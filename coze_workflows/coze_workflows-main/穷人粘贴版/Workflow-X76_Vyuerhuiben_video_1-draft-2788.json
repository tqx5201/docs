{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531365915235139610","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"880732","sourcePortID":"","targetNodeID":"130809"},{"sourceNodeID":"130809","sourcePortID":"","targetNodeID":"118692"},{"sourceNodeID":"138647","sourcePortID":"","targetNodeID":"112744"},{"sourceNodeID":"112744","sourcePortID":"","targetNodeID":"166472"},{"sourceNodeID":"193179","sourcePortID":"","targetNodeID":"175252"},{"sourceNodeID":"175252","sourcePortID":"","targetNodeID":"160402"},{"sourceNodeID":"166472","sourcePortID":"","targetNodeID":"183321"},{"sourceNodeID":"183321","sourcePortID":"","targetNodeID":"193179"},{"sourceNodeID":"157641","sourcePortID":"","targetNodeID":"605469"},{"sourceNodeID":"605469","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"160402","sourcePortID":"","targetNodeID":"108449"},{"sourceNodeID":"880732","sourcePortID":"","targetNodeID":"062491"},{"sourceNodeID":"062491","sourcePortID":"","targetNodeID":"199038"},{"sourceNodeID":"199038","sourcePortID":"","targetNodeID":"134829"},{"sourceNodeID":"497042","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"434584","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"170813","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"134829","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"161570","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"131684","sourcePortID":"","targetNodeID":"168391"},{"sourceNodeID":"168391","sourcePortID":"","targetNodeID":"317914"},{"sourceNodeID":"317914","sourcePortID":"","targetNodeID":"199437"},{"sourceNodeID":"898538","sourcePortID":"","targetNodeID":"150141"},{"sourceNodeID":"150141","sourcePortID":"","targetNodeID":"350511"},{"sourceNodeID":"199437","sourcePortID":"","targetNodeID":"898538"},{"sourceNodeID":"108449","sourcePortID":"","targetNodeID":"133978"},{"sourceNodeID":"133978","sourcePortID":"","targetNodeID":"896813"},{"sourceNodeID":"896813","sourcePortID":"","targetNodeID":"168498"},{"sourceNodeID":"168498","sourcePortID":"","targetNodeID":"880732"},{"sourceNodeID":"880732","sourcePortID":"","targetNodeID":"524645"},{"sourceNodeID":"880732","sourcePortID":"","targetNodeID":"192450"},{"sourceNodeID":"880732","sourcePortID":"","targetNodeID":"508101"},{"sourceNodeID":"880732","sourcePortID":"","targetNodeID":"110117"},{"sourceNodeID":"524645","sourcePortID":"","targetNodeID":"883019"},{"sourceNodeID":"350511","sourcePortID":"","targetNodeID":"224182"},{"sourceNodeID":"883019","sourcePortID":"","targetNodeID":"608039"},{"sourceNodeID":"608039","sourcePortID":"","targetNodeID":"648377"},{"sourceNodeID":"224182","sourcePortID":"","targetNodeID":"530873"},{"sourceNodeID":"648377","sourcePortID":"","targetNodeID":"497042"},{"sourceNodeID":"530873","sourcePortID":"","targetNodeID":"329174"},{"sourceNodeID":"329174","sourcePortID":"","targetNodeID":"194205"},{"sourceNodeID":"147972","sourcePortID":"","targetNodeID":"434584"},{"sourceNodeID":"192450","sourcePortID":"","targetNodeID":"147972"},{"sourceNodeID":"194205","sourcePortID":"","targetNodeID":"108027"},{"sourceNodeID":"118692","sourcePortID":"batch-output","targetNodeID":"277717"},{"sourceNodeID":"277717","sourcePortID":"loop-output","targetNodeID":"170813"},{"sourceNodeID":"108027","sourcePortID":"","targetNodeID":"769506"},{"sourceNodeID":"769506","sourcePortID":"","targetNodeID":"120630"},{"sourceNodeID":"110117","sourcePortID":"","targetNodeID":"157641"},{"sourceNodeID":"508101","sourcePortID":"","targetNodeID":"957939"},{"sourceNodeID":"957939","sourcePortID":"","targetNodeID":"161570"},{"sourceNodeID":"878129","sourcePortID":"","targetNodeID":"443516"},{"sourceNodeID":"443516","sourcePortID":"","targetNodeID":"181583"},{"sourceNodeID":"705848","sourcePortID":"","targetNodeID":"878129"},{"sourceNodeID":"181854","sourcePortID":"","targetNodeID":"705848"},{"sourceNodeID":"170734","sourcePortID":"","targetNodeID":"705848"},{"sourceNodeID":"138873","sourcePortID":"","targetNodeID":"111554"},{"sourceNodeID":"111554","sourcePortID":"","targetNodeID":"138647"},{"sourceNodeID":"181583","sourcePortID":"","targetNodeID":"138873"}],"nodes":[{"blocks":[],"data":{"inputs":{"batch":{"batchEnable":true,"batchSize":100,"concurrentSize":10,"inputList":{},"inputLists":[{"input":{"schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"},{"name":"content","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"880732","name":"visualPromptGroups","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"wenanTimelines","right":{}}]},"inputParameters":[{"input":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"},{"name":"content","type":"string"}],"type":"object","value":{"content":{"blockID":"130809","name":"wenanTimelines","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":6},"type":"ref"}},"left":{},"name":"wenanTimeline","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"1024","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"DeepSeek-V3-0324","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1742989917","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"文案时间线:{{wenanTimeline}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"**你是一名家庭教育视觉策划师**，专注将短视频中的字幕片段转化为“黑色极简线条图标风”的图像提示词，用于AI生成视觉分镜图，**主体以幼儿、小孩、宝宝相关形象为主**，服务对象为宝妈群体。\n\n---\n\n### 🏁 输出格式要求  \n\n输出 JSON 结构如下，时间单位为毫秒：\n\n```json\n{\n  \"start\": [开始时间戳],\n  \"end\": [结束时间戳],\n  \"img_prompt\": \"纯白色背景，极简线条图标风格，仅黑色笔划，...\"\n}\n```\n\n---\n\n### 🧩 图像生成提示词结构规范  \n\n每条 `img_prompt` **必须以固定锚点起始**：\n\n> 纯白色干净背景，Q版卡通风格，极简黑色线条图标风格，使用粗黑的线条，简洁的设计，无阴影，背景为纯白色，黑色线条\n\n提示词内容应包含以下四个要素：\n\n#### 1. ✅ 单一主体（必选）  \n- 仅出现一个可辨识主体，不绘制完整身体  \n- 推荐类型：  \n  - 大头婴儿 / 大头孩子 / 家长/爸爸妈妈/书本、玩具、绘本、手机、闹钟、餐具 一颗心、一朵云、一道裂缝、一个问号 等  \n\n#### 2. ✅ 情绪表现（必选）  \n- 情绪表达需温和、不激烈，避免“崩溃、崩塌、愤怒”等极端词  \n- 推荐使用情绪状态：困惑、好奇、思考、略显焦虑、轻微沮丧、孤独、渴望、专注  \n- 表达方式：\n  - 姿态：低头、抬头、双手举起、安静坐姿  \n  - 符号：小问号、泡泡、心形、闪电、云朵\n\n#### 3. ✅ 认知符号（建议包含）  \n- 表现角色心理、认知或环境关联的符号元素  \n- 出现位置：浮于头部上方、或环绕周围  \n- 推荐元素：小书本、手机轮廓、问号、泡泡、爱心、星星、对话框、闪电、灯泡、小动物符号等\n\n#### 4. ✅ 构图说明（必选）  \n- 主体居中，符号辅助构图但不喧宾夺主  \n- 背景必须为空白（纯白）  \n- 构图需强调留白、线条对比、视觉焦点突出  \n\n---\n\n### 🎨 风格限制（严格遵守）\n\n**必须符合以下“黑色极简线条图标风”标准**：\n\n#### ✅ 允许元素  \n- 仅使用黑色线条（粗细一致或极简变化）  \n- 所有元素为二维线描图标（近似 ISO pictogram / 极简 emoji）  \n- 构图干净、简明、清晰、一目了然  \n- 主体 + 辅助符号元素构成唯一视觉焦点\n\n#### ❌ 禁止元素  \n- 禁用颜色、阴影、渐变、3D、描边、纹理、照片质感  \n- 禁用复杂图案、写实元素、五官细节（如眼睛、鼻子、嘴）  \n- 禁用透视、投影、立体感  \n- 禁止出现完整人物身体或多个主要角色  \n- 禁止直接在图中加入文字（仅允许图形符号，如问号等）","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"生成图像画面"},"outputs":[{"input":{},"name":"outputList","required":false,"schema":{"schema":[{"description":"视觉脚本输出数组，其中每一项代表一张画面","name":"imgsTimeline","required":false,"schema":{"schema":[{"description":"当前配图段落的开始时间戳\n\n取值规则：你合并的那一段中，第一句字幕的 start 值","name":"start","type":"float"},{"description":"当前配图段落的结束时间戳\n\n取值规则：你合并的那一段中，最后一句字幕的 end 值","name":"end","type":"float"},{"description":"用于AI生成画面的文字提示词，完整描述画面中应包含的内容","name":"img_prompt","type":"string"}],"type":"object"},"type":"list"}],"type":"object"},"type":"list"}],"settings":null,"version":"3"},"edges":null,"id":"130809","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1796.5699693260506,"y":1097.6281332998005}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"batch":{"batchEnable":true,"batchSize":100,"concurrentSize":10,"inputLists":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"138647","name":"wenan","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"wenan"}]},"inputDefs":[{"description":"要合成音频的文本内容","input":{},"name":"text","required":true,"type":"string"},{"assistType":12,"description":"voice id","input":{},"name":"voice_id","required":false,"type":"string"},{"description":"语音语种，非必填，参考 https://bytedance.larkoffice.com/docx/WdDOdiB1BoRyBNxlkXWcn0n3nLc","input":{},"name":"language","required":false,"type":"string"},{"defaultValue":"爽快思思/Skye","description":"音色ID，默认为爽快思思/Skye。详细音色列表参考 https://bytedance.larkoffice.com/docx/WdDOdiB1BoRyBNxlkXWcn0n3nLc, default value is 爽快思思/Skye","input":{},"name":"speaker_id","required":false,"type":"string"},{"defaultValue":1,"description":"语速，范围是[0.2,3]，默认为1，通常保留一位小数即可, default value is 1","input":{},"name":"speed_ratio","required":false,"type":"float"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"112744","name":"wenan","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"float","value":{"content":1.2,"rawMeta":{"type":4},"type":"literal"}},"name":"speed_ratio"},{"input":{"assistType":12,"type":"string","value":{"content":"7426720361733177353","rawMeta":{"fileName":"渊博小叔","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745953518&x-signature=xXEfOOuluB3ZdC24xV5cwikTVvg%3D","subtitle":"语音合成:speech_synthesis","title":"语音合成"},"outputs":[{"name":"outputList","schema":{"schema":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"112744","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-3723.430030673949,"y":545.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439158307","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"audio_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"特效音，eg：教堂，默认无","input":{},"name":"audio_effect","required":false,"type":"string"},{"description":"音频列表","input":{},"name":"mp3_urls","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间线","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"音量大小，0-10,默认1","input":{},"name":"volume","required":false,"type":"float"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"183321","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"mp3_urls"},{"input":{"schema":{"schema":[{"description":"当前音频段的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"当前音频段的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"193179","name":"timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"string","value":{"content":"人声增强3","rawMeta":{"type":1},"type":"literal"}},"name":"audio_effect"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据时间线制作音频数据","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:audio_infos","title":"文案人声"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"175252","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1883.4300306739492,"y":545.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109816465719337","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_url","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"batch":{"batchEnable":true,"batchSize":100,"concurrentSize":10,"inputLists":[{"input":{"schema":{"schema":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"112744","name":"outputList","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"item1"}]},"inputDefs":[{"description":"提取内容","input":{},"name":"output","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"166472","name":"item1.data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"output"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745966768&x-signature=FBPy4tbrIHqXlp2kVWRwUVdkqBE%3D","subtitle":"剪映小助手数据生成器:get_url","title":"批量提取语音URL"},"outputs":[{"name":"outputList","schema":{"schema":[{"name":"output","required":false,"type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"166472","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-3263.430030673949,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109816465735721","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"objs_to_str_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"数据对象，接收get_outputs节点的输出","input":{},"name":"outputs","required":true,"schema":{"schema":[{"description":"内容","input":{},"name":"output","required":true,"type":"string"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"schema":{"schema":[{"name":"output","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"166472","name":"outputList","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"outputs"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745967187&x-signature=ENYls8SsDklJIvyK3rs5hc%2BlBp4%3D","subtitle":"剪映小助手数据生成器:objs_to_str_list","title":"提取语音URL为列表"},"outputs":[{"name":"infos","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"183321","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2803.430030673949,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439158307","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"audio_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"特效音，eg：教堂，默认无","input":{},"name":"audio_effect","required":false,"type":"string"},{"description":"音频列表","input":{},"name":"mp3_urls","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间线","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"音量大小，0-10,默认1","input":{},"name":"volume","required":false,"type":"float"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"157641","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"mp3_urls"},{"input":{"schema":{"schema":[{"description":"最后一段音频的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"第一段音频的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"193179","name":"all_timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"float","value":{"content":0.3,"rawMeta":{"type":4},"type":"literal"}},"name":"volume"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据时间线制作音频数据","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:audio_infos","title":"处理背景音乐信息"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"605469","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4956.56996932605,"y":658.4281332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = {\n        wenanTimeline: params.wenan.map((item,idx) => ({\n            content: item,\n            start: params.timelines[idx].start,\n            end: params.timelines[idx].end\n        }))\n    };\n\n    return ret;\n}","functionID":"38x41ek5n4r2j","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"138647","name":"wenan","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"wenan","right":{}},{"input":{"schema":{"schema":[{"description":"当前音频段的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"当前音频段的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"193179","name":"timelines","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"timelines","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"文案合并时间线"},"outputs":[{"input":{},"name":"wenanTimeline","required":false,"schema":{"schema":[{"name":"content","type":"string"},{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"160402","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1423.4300306739492,"y":545.3781332998005}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"{{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":"https://p3-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/7da28adcba9141df951adee938c4271b.png~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1777027282&x-signature=B98H7bdBzayg9EVgKtjz5evC%2B3k%3D","rawMeta":{"fileName":"微信图片_20250429184110.png","type":7},"type":"literal"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"背景设置"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"062491","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2586.5699693260503,"y":-43.87186670019946}},"type":"15","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109802306060299","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"str_to_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"对象内容","input":{},"name":"obj","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"062491","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"obj"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1746105993&x-signature=EH9PMyAiT2g5OWtOU5x4MxyqWzs%3D","subtitle":"剪映小助手数据生成器:str_to_list","title":"解析封面数据结构"},"outputs":[{"name":"infos","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"199038","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3936.569969326051,"y":-55.87186670019946}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684515874","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"高","input":{},"name":"height","required":false,"type":"integer"},{"description":"关联创作者","input":{},"name":"user_id","required":false,"type":"integer"},{"description":"宽","input":{},"name":"width","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"integer","value":{"content":1080,"rawMeta":{"type":2},"type":"literal"}},"name":"height"},{"input":{"type":"integer","value":{"content":12437,"rawMeta":{"type":2},"type":"literal"}},"name":"user_id"},{"input":{"type":"integer","value":{"content":1920,"rawMeta":{"type":2},"type":"literal"}},"name":"width"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745954017&x-signature=oeKDt5C3yqpHRP2RnxGmjU9ooTY%3D","subtitle":"视频合成_剪映小助手:create_draft","title":"创建剪映视频草稿"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"tip_url","required":false,"type":"string"}]},"edges":null,"id":"131684","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":5416.56996932605,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"教堂\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"175252","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_audios","title":"添加人声音频轨道"},"outputs":[{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"168391","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":5876.56996932605,"y":545.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"教堂\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"605469","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_audios","title":"添加背景音乐轨道"},"outputs":[{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"317914","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":6336.56996932605,"y":545.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"524645","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":"#000000","rawMeta":{"type":1},"type":"literal"}},"name":"border_color"},{"input":{"type":"integer","value":{"content":9,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":1.2,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":1.2,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"string","value":{"content":"#ffffff","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745976209&x-signature=eZoliJWq4E%2FkkL%2FQogpYx0WFLMc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"添加单行轨道中文字幕"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"150141","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":7716.56996932605,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"134829","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1746108622&x-signature=tpYIwk%2F06hNFfKCDRlvw%2FnqZe%2BE%3D","subtitle":"视频合成_剪映小助手:add_images","title":"添加背景图片"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"199437","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":6796.56996932605,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"138647","name":"wenan","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"wenan","right":{}}],"llmParam":[{"input":{"type":"string","value":{"content":"default_val","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"float","value":{"content":"1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"12288","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"豆包·1.5·Pro·32k","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1737521813","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"wenan: {{wenan}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"你是一名「短视频分镜脚本拆解师」，擅长将中文口语字幕拆分为拍摄分镜，并严格保持原句顺序。你的任务是根据提供的字幕数组，生成一个符合短视频拍摄节奏的分镜脚本。\n\n**输入格式** \"wenan\": [\"句子1\", \"句子2\", …]   // 按出现顺序排列的完整中文口语字幕数组\n\n**任务目标** 将输入的完整字幕数组 `wenan` 拆解为一系列连续的子数组，每个子数组代表一个拍摄分镜，包含 1 到 2 句字幕。拆解过程必须**严格遵循原句的先后顺序**，并且每句字幕只能使用一次。\n\n**核心拆解规则** 1.  **优先处理强制绑定分镜：** 首先遍历输入的 `wenan` 数组，识别并锁定符合“强制绑定规则”的句子及其后续句子。这些锁定的句子组合将作为不可分割的独立分镜，**不受后续分组数量平衡原则的约束**。\n2.  **分组剩余句子：** 将所有未被锁定的句子按照原顺序排列。然后，将这些剩余句子顺序分组，每组包含 1 句或 2 句。\n3.  **平衡分镜数量：** 在分组剩余句子时，请力求使最终包含 2 句的分镜数量**多于或等于**包含 1 句的分镜数量（即：两句分镜数 ≥ 单句分镜数）。这是一个指导性的平衡原则，用于确保分镜节奏的多样性，特别是在总句数无法精确满足特定比例时，此原则是决定性的依据。\n\n**强制绑定规则** 如果句子中包含以下任一特定推荐语：\n* 「推荐陪孩子读一读这套」\n* 「推荐陪孩子读一读这本」\n\n则必须将**包含此推荐语的句子**与**其后紧接的下一句（通常是书名《xxx》）**合并为一个分镜组。此组合**不可拆分、不可重排**，必须作为一个整体处理。\n\n**输出格式** 严格按照以下 JSON 格式输出一个对象数组。数组中的每个对象代表一个分镜组。\n```json\n[\n  {\"wenan\": [\"分镜1的句子1\", \"分镜1的句子2\" (可选)]},\n  {\"wenan\": [\"分镜2的句子1\" (可选), \"分镜2的句子2\" (可选)]},\n  ...\n]\n","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"文本分镜设计_分组"},"outputs":[{"input":{},"name":"wenan_group","required":false,"schema":{"schema":[{"name":"wenan","schema":{"type":"string"},"type":"list"}],"type":"object"},"type":"list"}],"settings":null,"version":"3"},"edges":null,"id":"108449","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-963.4300306739492,"y":519.3781332998005}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"batch":{"batchEnable":true,"batchSize":100,"concurrentSize":10,"inputList":{},"inputLists":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"133978","name":"singleLineGroups","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"wenan","right":{}}]},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"896813","name":"wenan","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"wenan","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"4096","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"豆包·1.5·Pro·32k","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1737521813","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"default_val","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"{{wenan}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"你是一位**中文语言理解专家**，擅长从一句中文中，**精确提取该句最关键的短句**，用于强化信息浓度或摘要表达。\n\n---\n\n### ✅ 规则\n\n- 用户每次只输入一**句中文**\n- 你只返回该句中**最关键的短句**\n- 该短句必须是原句中**完整保留**的一段，**不允许改写或扩展**\n- 优先选择表达**情绪、评价、判断、动机、核心事件**的短语\n\n---\n\n### ✅ 输出\n\n只输出一句短句，**不加引号、不加标点、不做解释**，保持极简格式  \n**输入一句，输出一句，不多不少**\n\n---\n\n### ✅ 示例\n\n#### 🎯 输入：\n他明明知道后果还要这么做\n\n✅ 输出：\n知道后果还要这么做\n\n---\n\n#### 🎯 输入：\n这部片子看完我真的很震撼\n\n✅ 输出：\n真的很震撼","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"文本分镜单行关键词挖掘"},"outputs":[{"input":{},"name":"outputList","required":false,"schema":{"schema":[{"name":"keywords","type":"string"}],"type":"object"},"type":"list"}],"settings":null,"version":"3"},"edges":null,"id":"896813","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-43.43003067394943,"y":519.3781332998005}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"async function main({ params }: Args): Promise<Output> {\n    const { wenan_group, timeline } = params;\n  \n    const wenan_group_timeline = [];\n    let currentIndex = 0;\n  \n    for (const group of wenan_group) {\n      const groupLen = group.wenan.length;\n  \n      // 当前组最后一句的 end 作为统一结束时间\n      const unifiedEnd = timeline[currentIndex + groupLen - 1].end;\n  \n      for (let i = 0; i < groupLen; i++) {\n        const content = group.wenan[i].trim();\n  \n        let start: number;\n  \n        if (i === 0) {\n          // 第一句：用当前这句原始 start\n          start = timeline[currentIndex + i].start;\n        } else {\n          // 后面句子：start = 上一句的原始 end - 0.3秒（注意不能小于0）\n          const prevEnd = timeline[currentIndex + i - 1].end;\n          start = Math.max(0, prevEnd - 300000);\n        }\n  \n        wenan_group_timeline.push({\n          start,\n          end: unifiedEnd,\n          content\n        });\n      }\n  \n      currentIndex += groupLen;\n    }\n  \n    return { wenan_group_timeline };\n  }\n  ","functionID":"38x3ymty9rgjl","inputParameters":[{"input":{"schema":{"schema":[{"description":"当前音频段的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"当前音频段的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"193179","name":"timelines","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"timeline","right":{}},{"input":{"schema":{"schema":[{"name":"wenan","schema":{"type":"string"},"type":"list"}],"type":"object"},"type":"list","value":{"content":{"blockID":"108449","name":"wenan_group","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"wenan_group","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"合并分组文本时间线"},"outputs":[{"input":{},"name":"wenan_group_timeline","required":false,"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"},{"name":"content","type":"string"}],"type":"object"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"168498","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":416.56996932605057,"y":545.3781332998005}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"\nasync function main({ params }: Args): Promise<Output> {\n    const { wenan_group } = params;\n  \n    const singleLineGroups: string[] = [];\n    const doubleLineGroups: { wenan: string[] }[] = [];\n  \n    for (const group of wenan_group) {\n      const lines = group.wenan.map(s => s.trim()).filter(Boolean);\n  \n      if (lines.length === 1) {\n        singleLineGroups.push(lines[0]);\n      } else if (lines.length === 2) {\n        doubleLineGroups.push({ wenan: lines });\n      }\n    }\n  \n    return {\n      singleLineGroups,\n      doubleLineGroups\n    };\n  }\n  ","functionID":"38x3zjji4skte","inputParameters":[{"input":{"schema":{"schema":[{"name":"wenan","schema":{"type":"string"},"type":"list"}],"type":"object"},"type":"list","value":{"content":{"blockID":"108449","name":"wenan_group","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"wenan_group","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"拆分单双行文本分镜数据"},"outputs":[{"input":{},"name":"singleLineGroups","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"doubleLineGroups","required":false,"schema":{"schema":[{"name":"wenan","schema":{"type":"string"},"type":"list"}],"type":"object"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"133978","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-503.4300306739492,"y":545.3781332998005}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"async function main({ params }) {\n    const {\n      wenan_group_timeline = [],\n      singleLineGroups = [],\n      keywordsList = [],\n      doubleLineGroups = []\n    } = params;\n  \n    const timelineMap = {};\n    for (const { content, start, end } of wenan_group_timeline) {\n      timelineMap[content] = { start, end };\n    }\n  \n    const keywordArr = keywordsList.map(item => item.keywords);\n    const keywordStr = keywordArr.join('|');\n  \n    // === 轨道 1：单句字幕 ===\n    const track_1_texts = [];\n    const track_1_timelines = [];\n    const track_1_otherInfo = [];\n  \n    for (const text of singleLineGroups) {\n      const time = timelineMap[text];\n      if (!time) continue;\n  \n      track_1_texts.push(text);\n      track_1_timelines.push(time);\n      track_1_otherInfo.push({\n        alignment: 1,\n        text_color: \"#61862b\",\n        transform_x: 0,\n        transform_y: 0\n      });\n    }\n  \n    // === 轨道 2 和 3：普通双行字幕 ===\n    const track_2_texts = [];\n    const track_2_timelines = [];\n    const track_2_otherInfo = [];\n  \n    const track_3_texts = [];\n    const track_3_timelines = [];\n    const track_3_otherInfo = [];\n  \n    // === 新增轨道 4：推荐文案 ===\n    const track_4_texts = [];\n    const track_4_timelines = [];\n    const track_4_otherInfo = [];\n  \n    // === 新增轨道 5：书名文案 ===\n    const track_5_texts = [];\n    const track_5_timelines = [];\n    const track_5_otherInfo = [];\n    \n    // 存储双行字幕组的对应关系，用于生成画面提示词\n    const doubleLinePairs = [];\n  \n    for (const { wenan } of doubleLineGroups) {\n      const [line1, line2] = wenan;\n      const time1 = timelineMap[line1];\n      const time2 = timelineMap[line2];\n      if (!time1 || !time2) continue;\n\n      const recommendPhrases = ['推荐', '强烈推荐', '建议', '安利', '一定要试试', '必须看看', '良心推荐', '超适合', '很适合', '值得一读', '分享', '别错过', '可以入手'];\n      const childrenPhrases = ['孩子', '宝贝', '小朋友', '宝宝', '小宝', '小孩', '娃', '娃娃', '儿童', '幼儿', '学龄前', '小男孩', '小女孩', '小弟弟', '小妹妹', '小公主', '小王子'];\n      const actionPhrases = ['读一读', '看一看', '读读看', '看看', '共读', '阅读'];\n      const unitPhrases = ['这套', '这一套', '这本', '这一册', '这册'];\n\n      function isBookRecommendation(line) {\n        const pattern = new RegExp(\n          `(?:${recommendPhrases.join('|')}).*?(?:陪|给)?.*?(?:${childrenPhrases.join('|')})?.*?(?:${actionPhrases.join('|')}).{0,5}(?:${unitPhrases.join('|')})`\n        );\n        return pattern.test(line);\n      }\n\n      if (isBookRecommendation(line1)) {\n        // === 推荐句 → 轨道 4\n        track_4_texts.push(line1);\n        track_4_timelines.push(time1);\n        track_4_otherInfo.push({\n          alignment: 1,\n          text_color: \"#000000\",\n          transform_x: 0,\n          transform_y: 100\n        });\n  \n        // === 书名句 → 轨道 5\n        track_5_texts.push(line2);\n        track_5_timelines.push(time2);\n        track_5_otherInfo.push({\n          alignment: 1,\n          text_color: \"#db7431\",\n          transform_x: 0,\n          transform_y: -100\n        });\n      } else {\n        // === 普通双行逻辑\n        track_2_texts.push(line1);\n        track_2_timelines.push({ start: time1.start, end: time1.end });\n        track_2_otherInfo.push({\n          alignment: 1,\n          text_color: \"#61862b\",\n          transform_x: 0,\n          transform_y: 140\n        });\n  \n        track_3_texts.push(line2);\n        track_3_timelines.push({ start: time2.start, end: time2.end });\n        track_3_otherInfo.push({\n          alignment: 1,\n          text_color: \"#db7431\",\n          transform_x: 0,\n          transform_y: -140\n        });\n        \n        // 保存普通双行字幕的配对信息\n        doubleLinePairs.push({\n          line1: { text: line1, time: time1 },\n          line2: { text: line2, time: time2 }\n        });\n      }\n    }\n    \n    // === 生成画面提示词数据 ===\n    const visualPromptGroups = [];\n    \n    // 添加单句字幕的提示词\n    for (let i = 0; i < track_1_texts.length; i++) {\n      visualPromptGroups.push({\n        start: track_1_timelines[i].start,\n        end: track_1_timelines[i].end,\n        content: track_1_texts[i]\n      });\n    }\n    \n    // 添加双行字幕的提示词\n    for (const pair of doubleLinePairs) {\n      visualPromptGroups.push({\n        start: pair.line1.time.start,\n        end: pair.line2.time.end,\n        content: `${pair.line1.text}\\n${pair.line2.text}`\n      });\n    }\n  \n    return {\n      track_1: {\n        texts: track_1_texts,\n        timelines: track_1_timelines,\n        otherInfo: track_1_otherInfo,\n        keywords: track_1_texts.map(() => keywordStr),\n        keyword_color: \"#db7431\"\n      },\n      track_2: {\n        texts: track_2_texts,\n        timelines: track_2_timelines,\n        otherInfo: track_2_otherInfo\n      },\n      track_3: {\n        texts: track_3_texts,\n        timelines: track_3_timelines,\n        otherInfo: track_3_otherInfo\n      },\n      track_4: {\n        texts: track_4_texts,\n        timelines: track_4_timelines,\n        otherInfo: track_4_otherInfo\n      },\n      track_5: {\n        texts: track_5_texts,\n        timelines: track_5_timelines,\n        otherInfo: track_5_otherInfo\n      },\n      visualPromptGroups // 新增字段，用于生成画面提示词\n    };\n  }","functionID":"38x43vd13gzvk","inputParameters":[{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"},{"name":"content","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"168498","name":"wenan_group_timeline","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"wenan_group_timeline","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"133978","name":"singleLineGroups","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"singleLineGroups","right":{}},{"input":{"schema":{"schema":[{"name":"keywords","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"896813","name":"outputList","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"keywordsList","right":{}},{"input":{"schema":{"schema":[{"name":"wenan","schema":{"type":"string"},"type":"list"}],"type":"object"},"type":"list","value":{"content":{"blockID":"133978","name":"doubleLineGroups","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"doubleLineGroups","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"处理多轨道字幕的字幕生成"},"outputs":[{"input":{},"name":"track_1","required":false,"schema":[{"name":"texts","schema":{"type":"string"},"type":"list"},{"name":"timelines","schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list"},{"name":"otherInfo","schema":{"schema":[{"name":"alignment","type":"integer"},{"name":"text_color","type":"string"},{"name":"transform_x","type":"integer"},{"name":"transform_y","type":"integer"}],"type":"object"},"type":"list"},{"name":"keywords","schema":{"type":"string"},"type":"list"},{"name":"keyword_color","type":"string"}],"type":"object"},{"input":{},"name":"track_2","required":false,"schema":[{"name":"texts","schema":{"type":"string"},"type":"list"},{"name":"timelines","schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list"},{"name":"otherInfo","schema":{"schema":[{"name":"alignment","type":"integer"},{"name":"text_color","type":"string"},{"name":"transform_x","type":"integer"},{"name":"transform_y","type":"integer"}],"type":"object"},"type":"list"}],"type":"object"},{"input":{},"name":"track_3","required":false,"schema":[{"name":"texts","schema":{"type":"string"},"type":"list"},{"name":"timelines","schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list"},{"name":"otherInfo","schema":{"schema":[{"name":"alignment","type":"integer"},{"name":"text_color","type":"string"},{"name":"transform_x","type":"integer"},{"name":"transform_y","type":"integer"}],"type":"object"},"type":"list"}],"type":"object"},{"input":{},"name":"track_4","required":false,"schema":[{"name":"texts","schema":{"type":"string"},"type":"list"},{"name":"timelines","schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list"},{"name":"otherInfo","schema":{"schema":[{"name":"alignment","type":"integer"},{"name":"text_color","type":"string"},{"name":"transform_x","type":"integer"},{"name":"transform_y","type":"integer"}],"type":"object"},"type":"list"}],"type":"object"},{"input":{},"name":"track_5","required":false,"schema":[{"name":"texts","schema":{"type":"string"},"type":"list"},{"name":"timelines","schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list"},{"name":"otherInfo","schema":{"schema":[{"name":"alignment","type":"integer"},{"name":"text_color","type":"string"},{"name":"transform_x","type":"integer"},{"name":"transform_y","type":"integer"}],"type":"object"},"type":"list"}],"type":"object"},{"input":{},"name":"visualPromptGroups","required":false,"schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"},{"name":"content","type":"string"}],"type":"object"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"880732","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":876.5699693260506,"y":545.3781332998005}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"文字大小","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"对应剪映的入场动画名字，多个动画请用英文|分割，比如：飞入|放大","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"关键词颜色","input":{},"name":"keyword_color","required":false,"type":"string"},{"description":"关键词字大小","input":{},"name":"keyword_font_size","required":false,"type":"integer"},{"description":"入场动画时长","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"文本里面的重点词列表","input":{},"name":"keywords","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"对应剪映的循环动画名字，多个动画请用英文|分割，比如：扫光|晃动","input":{},"name":"loop_animation","required":false,"type":"string"},{"description":"循环动画时长","input":{},"name":"loop_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的出场动画名字，多个动画请用英文|分割，比如：消散|闭幕","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"出场动画时长","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"文本列表","input":{},"name":"texts","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间节点，只接收结构：[{\"start\":0,\"end\":4612}]，一般从audio_timeline节点的输出获取","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"880732","name":"track_1.texts","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"880732","name":"track_1.timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"integer","value":{"content":8,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"string","value":{"content":"向上翻转|左上弹入|金粉飘落","rawMeta":{"type":1},"type":"literal"}},"name":"in_animation"},{"input":{"type":"string","value":{"content":{"blockID":"880732","name":"track_1.keyword_color","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"keyword_color"},{"input":{"type":"integer","value":{"content":8,"rawMeta":{"type":2},"type":"literal"}},"name":"keyword_font_size"},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"880732","name":"track_1.keywords","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"keywords"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745974125&x-signature=kiSVNIdcDVmZP4uYua5hey9aZQY%3D","subtitle":"剪映小助手数据生成器:caption_infos","title":"处理单行轨道文案信息"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"524645","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1336.5699693260506,"y":182.22813329980045}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"883019","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":"伯兮体","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":10,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"string","value":{"content":"#64862f","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":-500,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":130,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745976209&x-signature=eZoliJWq4E%2FkkL%2FQogpYx0WFLMc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"添加两行轨道1中文字幕"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"350511","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":8176.56996932605,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"文字大小","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"对应剪映的入场动画名字，多个动画请用英文|分割，比如：飞入|放大","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"关键词颜色","input":{},"name":"keyword_color","required":false,"type":"string"},{"description":"关键词字大小","input":{},"name":"keyword_font_size","required":false,"type":"integer"},{"description":"入场动画时长","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"文本里面的重点词列表","input":{},"name":"keywords","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"对应剪映的循环动画名字，多个动画请用英文|分割，比如：扫光|晃动","input":{},"name":"loop_animation","required":false,"type":"string"},{"description":"循环动画时长","input":{},"name":"loop_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的出场动画名字，多个动画请用英文|分割，比如：消散|闭幕","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"出场动画时长","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"文本列表","input":{},"name":"texts","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间节点，只接收结构：[{\"start\":0,\"end\":4612}]，一般从audio_timeline节点的输出获取","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"880732","name":"track_2.texts","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"880732","name":"track_2.timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"string","value":{"content":"向上翻转|跃进","rawMeta":{"type":1},"type":"literal"}},"name":"in_animation"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745974125&x-signature=kiSVNIdcDVmZP4uYua5hey9aZQY%3D","subtitle":"剪映小助手数据生成器:caption_infos","title":"处理两行轨道1文案信息"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"883019","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1796.5699693260506,"y":182.22813329980045}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"文字大小","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"对应剪映的入场动画名字，多个动画请用英文|分割，比如：飞入|放大","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"关键词颜色","input":{},"name":"keyword_color","required":false,"type":"string"},{"description":"关键词字大小","input":{},"name":"keyword_font_size","required":false,"type":"integer"},{"description":"入场动画时长","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"文本里面的重点词列表","input":{},"name":"keywords","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"对应剪映的循环动画名字，多个动画请用英文|分割，比如：扫光|晃动","input":{},"name":"loop_animation","required":false,"type":"string"},{"description":"循环动画时长","input":{},"name":"loop_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的出场动画名字，多个动画请用英文|分割，比如：消散|闭幕","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"出场动画时长","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"文本列表","input":{},"name":"texts","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间节点，只接收结构：[{\"start\":0,\"end\":4612}]，一般从audio_timeline节点的输出获取","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"880732","name":"track_3.texts","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"880732","name":"track_3.timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"integer","value":{"content":10,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"string","value":{"content":"向上翻转|跃进","rawMeta":{"type":1},"type":"literal"}},"name":"in_animation"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745974125&x-signature=kiSVNIdcDVmZP4uYua5hey9aZQY%3D","subtitle":"剪映小助手数据生成器:caption_infos","title":"处理两行轨道2文案信息"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"608039","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2586.5699693260503,"y":182.22813329980045}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"608039","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":"伯兮体","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":10,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"string","value":{"content":"#db7431","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":500,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":-130,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745976209&x-signature=eZoliJWq4E%2FkkL%2FQogpYx0WFLMc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"添加两行轨道2中文字幕"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"224182","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":8636.56996932605,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"文字大小","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"对应剪映的入场动画名字，多个动画请用英文|分割，比如：飞入|放大","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"关键词颜色","input":{},"name":"keyword_color","required":false,"type":"string"},{"description":"关键词字大小","input":{},"name":"keyword_font_size","required":false,"type":"integer"},{"description":"入场动画时长","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"文本里面的重点词列表","input":{},"name":"keywords","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"对应剪映的循环动画名字，多个动画请用英文|分割，比如：扫光|晃动","input":{},"name":"loop_animation","required":false,"type":"string"},{"description":"循环动画时长","input":{},"name":"loop_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的出场动画名字，多个动画请用英文|分割，比如：消散|闭幕","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"出场动画时长","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"文本列表","input":{},"name":"texts","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间节点，只接收结构：[{\"start\":0,\"end\":4612}]，一般从audio_timeline节点的输出获取","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"880732","name":"track_4.texts","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"880732","name":"track_4.timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"integer","value":{"content":10,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"string","value":{"content":"向上翻转|跃进","rawMeta":{"type":1},"type":"literal"}},"name":"in_animation"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745974125&x-signature=kiSVNIdcDVmZP4uYua5hey9aZQY%3D","subtitle":"剪映小助手数据生成器:caption_infos","title":"处理推荐书籍轨道文案信息"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"648377","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3936.569969326051,"y":182.22813329980045}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"文字大小","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"对应剪映的入场动画名字，多个动画请用英文|分割，比如：飞入|放大","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"关键词颜色","input":{},"name":"keyword_color","required":false,"type":"string"},{"description":"关键词字大小","input":{},"name":"keyword_font_size","required":false,"type":"integer"},{"description":"入场动画时长","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"文本里面的重点词列表","input":{},"name":"keywords","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"对应剪映的循环动画名字，多个动画请用英文|分割，比如：扫光|晃动","input":{},"name":"loop_animation","required":false,"type":"string"},{"description":"循环动画时长","input":{},"name":"loop_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的出场动画名字，多个动画请用英文|分割，比如：消散|闭幕","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"出场动画时长","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"文本列表","input":{},"name":"texts","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间节点，只接收结构：[{\"start\":0,\"end\":4612}]，一般从audio_timeline节点的输出获取","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"880732","name":"track_5.texts","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"880732","name":"track_5.timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"integer","value":{"content":11,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"string","value":{"content":"向上翻转|跃进","rawMeta":{"type":1},"type":"literal"}},"name":"in_animation"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745974125&x-signature=kiSVNIdcDVmZP4uYua5hey9aZQY%3D","subtitle":"剪映小助手数据生成器:caption_infos","title":"处理书名轨道文案信息"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"497042","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4956.56996932605,"y":182.22813329980045}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"648377","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":"伯兮体","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":10,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"string","value":{"content":"#64862f","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":-250,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745976209&x-signature=eZoliJWq4E%2FkkL%2FQogpYx0WFLMc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"添加推荐书籍轨道文字幕"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"530873","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":9096.56996932605,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"497042","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":"伯兮体","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":11,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"string","value":{"content":"#db7431","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":-550,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745976209&x-signature=eZoliJWq4E%2FkkL%2FQogpYx0WFLMc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"添加书名轨道文字幕"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"329174","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":9556.56996932605,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439223843","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"imgs_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"时间节点，只接收结构：[{\"start\":0,\"end\":4612}]，一般从audio_timeline节点的输出获取","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"对应剪映的转场动画名字   可选","input":{},"name":"transition","required":false,"type":"string"},{"description":"图片宽度","input":{},"name":"width","required":false,"type":"integer"},{"description":"对应剪映的入场动画名字   可选，多个动画请用英文|分割，比如：动画1|动画2","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"对应剪映的入场动画时长  可选","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的组合动画名字    可选，多个动画请用英文|分割，比如：动画1|动画2","input":{},"name":"loop_animation","required":false,"type":"string"},{"description":"对应剪映的组合动画时长  可选","input":{},"name":"loop_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的出场动画名字。可选，多个动画请用英文|分割，比如：动画1|动画2","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"对应剪映的出场动画时长  可选","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的转场动画时长 ，范围是500000-2500000  可选","input":{},"name":"transition_duration","required":false,"type":"integer"},{"description":"图片高度","input":{},"name":"height","required":false,"type":"integer"},{"description":"图片列表，格式[\"https://a.png\",\"https://a.png\"]","input":{},"name":"imgs","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"147972","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"imgs"},{"input":{"schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"880732","name":"track_4.timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"integer","value":{"content":180,"rawMeta":{"type":2},"type":"literal"}},"name":"height"},{"input":{"type":"string","value":{"content":"镜像翻转|轻微放大|缩小","rawMeta":{"type":1},"type":"literal"}},"name":"in_animation"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1746105229&x-signature=U6VYZ3AzJKGNraej%2Fs4OrrZS%2B5E%3D","subtitle":"剪映小助手数据生成器:imgs_infos","title":"处理书籍图片信息"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"434584","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4956.56996932605,"y":420.3281332998003}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"{{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"170734","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"推荐书籍格式化为字符串"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"192450","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2586.5699693260503,"y":432.3281332998003}},"type":"15","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109802306060299","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"str_to_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"192450","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"obj"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747917707&x-signature=g6jNlcyh9QeBNjPJzMs9M06RAOw%3D","subtitle":"剪映小助手数据生成器:str_to_list","title":"推荐书籍格式化为列表"},"outputs":[{"name":"infos","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"147972","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3936.569969326051,"y":420.3281332998003}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"434584","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":0.4,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":0.4,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"float","value":{"content":365,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面查看案例","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/a88794574b9a4d118d708e7e4345d6f1~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747918472&x-signature=0Uy513NP5%2FX5cwvZODZaTxHBK7Q%3D","subtitle":"视频合成_剪映小助手:add_images","title":"添加推荐书籍图片到轨道"},"outputs":[{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"194205","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":10016.56996932605,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[{"blocks":[],"data":{"inputs":{"code":"async function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = {\n        \"imgs\": [params.var_Imgs[params.idx]], \n        \"timelines\": [{\n            start: params.currImgTimeline.imgsTimeline[0].start,\n            end: params.currImgTimeline.imgsTimeline[0].end,\n        }], \n        \"otherInfos\": {\n            in_animation: params.in_animation\n        }\n    };\n\n    return ret;\n}","functionID":"38x3zh4ksuhdr","inputParameters":[{"input":{"type":"integer","value":{"content":{"blockID":"277717","name":"index","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"ref"}},"left":{},"name":"idx","right":{}},{"input":{"schema":[{"description":"视觉脚本输出数组，其中每一项代表一张画面","name":"imgsTimeline","required":false,"schema":{"schema":[{"description":"当前配图段落的开始时间戳\n\n取值规则：你合并的那一段中，第一句字幕的 start 值","name":"start","type":"float"},{"description":"当前配图段落的结束时间戳\n\n取值规则：你合并的那一段中，最后一句字幕的 end 值","name":"end","type":"float"},{"description":"用于AI生成画面的文字提示词，完整描述画面中应包含的内容","name":"img_prompt","type":"string"}],"type":"object"},"type":"list"}],"type":"object","value":{"content":{"blockID":"277717","name":"imgsDesc","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":6},"type":"ref"}},"left":{},"name":"currImgTimeline","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"277717","name":"var_Imgs","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"var_Imgs","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"147995","name":"in_animation","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"in_animation","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"视频配图统一数据结构"},"outputs":[{"input":{},"name":"imgs","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"timelines","required":false,"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list"},{"input":{},"name":"otherInfos","required":false,"schema":[{"name":"in_animation","type":"string"},{"name":"in_animation_duratio","type":"integer"},{"name":"loop_animation","type":"string"},{"name":"loop_animation_durat","type":"integer"},{"name":"out_animation","type":"string"},{"name":"out_animation_durati","type":"integer"},{"name":"alignment","type":"integer"},{"name":"transform_x","type":"float"},{"name":"transform_y","type":"float"},{"name":"border_color","type":"string"}],"type":"object"}],"settings":null,"version":""},"edges":null,"id":"793569","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":640,"y":26}},"type":"5"},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = JSON.stringify([\n        {\n            \"image_url\": params.imgs[0],\n            \"width\": 1024,\n            \"height\": 1024,\n            \"in_animation\": params.in_animation,\n            ...params.timeline[0]\n        }\n    ])\n\n    return { infos: ret };\n}","functionID":"38x43q2cx2wcb","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"793569","name":"imgs","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"imgs","right":{}},{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"793569","name":"timelines","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"timeline","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"793569","name":"otherInfos.in_animation","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"in_animation","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"处理配图Infos"},"outputs":[{"input":{},"name":"infos","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"705395","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1100,"y":26}},"type":"5"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"277717","name":"imgsDesc.imgsTimeline.img_prompt","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"img_desc","right":{}}],"llmParam":[{"input":{"type":"string","value":{"content":"creative","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"float","value":{"content":"1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"topP","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"integer","value":{"content":"1024","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"1706077826","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"豆包·工具调用","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"string","value":{"content":"{{img_desc}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"根据图片描述的情绪氛围、内容节奏、构图特点和画面动静感，从以下选项中选择最匹配的进场特效，仅返回一个特效名称，不含任何解释：展开、横向模糊、拼图、渐显、动感放大、向上滑动、轻微放大、缩小","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"图片进场特效选择"},"outputs":[{"description":"可选项为：展开、横向模糊、拼图、渐显、动感放大、向上滑动、轻微放大、缩小","input":{},"name":"in_animation","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"147995","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":180,"y":0}},"type":"3"}],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"schema":[{"description":"视觉脚本输出数组，其中每一项代表一张画面","name":"imgsTimeline","required":false,"schema":{"schema":[{"description":"当前配图段落的开始时间戳\n\n取值规则：你合并的那一段中，第一句字幕的 start 值","name":"start","type":"float"},{"description":"当前配图段落的结束时间戳\n\n取值规则：你合并的那一段中，最后一句字幕的 end 值","name":"end","type":"float"},{"description":"用于AI生成画面的文字提示词，完整描述画面中应包含的内容","name":"img_prompt","type":"string"}],"type":"object"},"type":"list"}],"type":"object"},"type":"list","value":{"content":{"blockID":"130809","name":"outputList","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"imgsDesc"}],"loopCount":{"type":"integer","value":{"content":"10","type":"literal"}},"loopType":"array","variableParameters":[{"input":{"schema":{"assistType":2,"type":"string"},"type":"list","value":{"content":{"blockID":"118692","name":"output","source":"block-output"},"rawMeta":{"type":104},"type":"ref"}},"name":"var_Imgs"}]},"nodeMeta":{"description":"用于通过设定循环次数和逻辑，重复执行一系列任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","mainColor":"#00B2B2","subTitle":"循环","title":"循环处理图片分镜"},"outputs":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"705395","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"infos"}]},"edges":[{"sourceNodeID":"147995","sourcePortID":"","targetNodeID":"793569"},{"sourceNodeID":"793569","sourcePortID":"","targetNodeID":"705395"},{"sourceNodeID":"705395","sourcePortID":"","targetNodeID":"277717","targetPortID":"loop-function-inline-input"},{"sourceNodeID":"277717","sourcePortID":"loop-function-inline-output","targetNodeID":"147995"}],"id":"277717","meta":{"canvasPosition":{"x":3296.5699693260503,"y":1430.7281332998004},"defaultCollapsed":false,"position":{"x":3936.569969326051,"y":1110.6281332998005}},"type":"21","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"async function main({ params }: Args): Promise<Output> {\n    const double_img_info: any[] = [];\n    const single_img_info: any[] = [];\n\n    const infos = params.infos_list.map(item => JSON.parse(item));\n    const prompts = params.visualPromptGroups;\n\n    for (let i = 0; i < prompts.length; i++) {\n        const content = prompts[i].content;\n        const firstImgInfo = infos[i]?.[0];  // 安全获取第一个图片信息\n        if (!firstImgInfo) continue; // 如果为空跳过\n\n        if (content.includes('\\n')) {\n            double_img_info.push(firstImgInfo);\n        } else {\n            single_img_info.push(firstImgInfo);\n        }\n    }\n\n    return {\n        single_img_info,\n        double_img_info\n    };\n}\n","functionID":"38x43p7zy99vu","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"277717","name":"infos","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"infos_list","right":{}},{"input":{"schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"},{"name":"content","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"880732","name":"visualPromptGroups","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"visualPromptGroups","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"处理配图轨道信息"},"outputs":[{"input":{},"name":"single_img_info","required":false,"type":"string"},{"input":{},"name":"double_img_info","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"170813","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4956.56996932605,"y":1123.6281332998005}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"170813","name":"single_img_info","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":0.3,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":0.3,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"float","value":{"content":500,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1746108622&x-signature=tpYIwk%2F06hNFfKCDRlvw%2FnqZe%2BE%3D","subtitle":"视频合成_剪映小助手:add_images","title":"添加单行配图"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"769506","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":10936.56996932605,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"170813","name":"double_img_info","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":0.3,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":0.3,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"float","value":{"content":1000,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":350,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面查看案例","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/a88794574b9a4d118d708e7e4345d6f1~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747941279&x-signature=Vft%2B0at6ugALNB%2FgRlPcqgs6Wpc%3D","subtitle":"视频合成_剪映小助手:add_images","title":"添加双行配图"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"108027","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":10476.56996932605,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"{{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"assistType":8,"type":"string","value":{"content":"https://p26-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/3fad8a0f14634ca999742c5ef0f7a56c.MP3~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1776492985&x-signature=p8z8aucVc7F7rj2SnnFQ%2FA1ThPw%3D","rawMeta":{"fileName":"bgm.MP3","type":14},"type":"literal"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"上传背景音乐"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"110117","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2586.5699693260503,"y":658.4281332998005}},"type":"15","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109802306060299","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"str_to_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"110117","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"obj"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"字符转列表","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:str_to_list","title":"处理背景音乐URL到列表"},"outputs":[{"name":"infos","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"157641","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3936.569969326051,"y":658.4281332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7495338880829390888","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"audio_timelines","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7495336137377153039","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_速创小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"183321","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"links"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"视频合成-速创猫小工具","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/3247da2db640408cb195e3c2fd54f372~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748010702&x-signature=OHy3bvGGmi1QVwXlGpbrUZM%2FORE%3D","subtitle":"视频合成_速创小助手:audio_timelines","title":"文案音频时间线"},"outputs":[{"description":"总时间线","name":"all_timelines","required":true,"schema":{"schema":[{"description":"最后一段音频的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"第一段音频的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"错误信息","name":"error","required":false,"type":"string"},{"description":"音频链接数组","name":"links","required":true,"schema":{"type":"string"},"type":"list"},{"description":"音频时间线数组","name":"timelines","required":true,"schema":{"schema":[{"description":"当前音频段的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"当前音频段的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"193179","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2343.430030673949,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"118692","name":"input.imgsTimeline.img_prompt","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"prompt"},{"input":{"type":"string","value":{"content":{"blockID":"118692","name":"timelines.content","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"content"}],"modelSetting":{"custom_ratio":{"height":512,"width":512},"ddim_steps":40,"model":8},"prompt":{"negative_prompt":"黑色背景，黑色画框，黑色方框，黑色环境，黑色，水印复杂背景，黑色边框，方形头部，方脸，尖锐线条，过细或过粗线条，姿态不科学，身体结构错误，比例失调，肢体扭曲，过于僵硬，不自然的姿势，文字，字母，数字，符号，水印，签名，品牌，Logo，漫画气泡框，纤细手臂，纤细腿部，细弱结构感，儿童卡通风格，卡通脸，动画风格，漫画脸，3D元素，渐变阴影，光影效果，彩色，彩色背景，模糊效果，透明效果，高光效果，光泽效果，服装，配饰，可爱元素，橡胶四肢，玩具质感，塑料质感，闪亮表面，过度圆润的身体比例，过度夸张的肢体比例","prompt":"纯白干净背景，{{prompt}}，{{content}}黑白极简矢量图标，黑色描边"},"references":[],"settingOnError":{"dataOnErr":"{\n    \"data\": \"\",\n    \"msg\": \"\"\n}","processType":2,"retryTimes":1,"switch":true,"timeoutMs":60000}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","mainColor":"#FF4DC3","subTitle":"图像生成","title":"图像生成_1"},"outputs":[{"assistType":2,"name":"data","type":"string"},{"name":"msg","type":"string"},{"name":"errorBody","readonly":true,"schema":[{"name":"errorMessage","readonly":true,"type":"string"},{"name":"errorCode","readonly":true,"type":"string"}],"type":"object"},{"name":"isSuccess","readonly":true,"type":"boolean"}]},"edges":null,"id":"695988","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":180,"y":0}},"type":"16"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7438919188246429731","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"cutout","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7438919188246413347","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"抠图","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"695988","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"url"},{"input":{"type":"string","value":{"content":"0","type":"literal"}},"name":"only_mask"},{"input":{"type":"string","value":{"content":"0","type":"literal"}},"name":"output_mode"}],"settingOnError":{"dataOnErr":"{\n    \"data\": \"\",\n    \"mask\": \"\",\n    \"msg\": \"\"\n}","processType":2,"retryTimes":1,"switch":true,"timeoutMs":180000}},"nodeMeta":{"description":"保留图片前景主体，输出透明背景(.png)","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-plugin-cutout-v2.jpg","subtitle":"抠图:cutout","title":"cutout"},"outputs":[{"assistType":2,"description":"透明背景图，在输出模式为透明背景时生效","name":"data","required":false,"type":"string"},{"description":"抠图区域蒙板矢量图，在输出模式为蒙版矢量图时生效","name":"mask","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"},{"name":"errorBody","readonly":true,"schema":[{"name":"errorMessage","readonly":true,"type":"string"},{"name":"errorCode","readonly":true,"type":"string"}],"type":"object"},{"name":"isSuccess","readonly":true,"type":"boolean"}]},"edges":null,"id":"116023","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":640,"y":14}},"type":"4"}],"data":{"inputs":{"batchSize":{"type":"integer","value":{"content":"100","type":"literal"}},"concurrentSize":{"type":"integer","value":{"content":3,"rawMeta":{"type":2},"type":"literal"}},"inputParameters":[{"input":{"schema":{"schema":[{"description":"视觉脚本输出数组，其中每一项代表一张画面","name":"imgsTimeline","required":false,"schema":{"schema":[{"description":"当前配图段落的开始时间戳\n\n取值规则：你合并的那一段中，第一句字幕的 start 值","name":"start","type":"float"},{"description":"当前配图段落的结束时间戳\n\n取值规则：你合并的那一段中，最后一句字幕的 end 值","name":"end","type":"float"},{"description":"用于AI生成画面的文字提示词，完整描述画面中应包含的内容","name":"img_prompt","type":"string"}],"type":"object"},"type":"list"}],"type":"object"},"type":"list","value":{"content":{"blockID":"130809","name":"outputList","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"input"},{"input":{"schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"},{"name":"content","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"880732","name":"visualPromptGroups","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"}]},"nodeMeta":{"description":"通过设定批量运行次数和逻辑，运行批处理体内的任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg","mainColor":"#00B2B2","subTitle":"批处理","title":"批处理生成配图"},"outputs":[{"input":{"assistType":2,"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"116023","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"output"}]},"edges":[{"sourceNodeID":"118692","sourcePortID":"batch-function-inline-output","targetNodeID":"695988"},{"sourceNodeID":"695988","sourcePortID":"","targetNodeID":"116023"},{"sourceNodeID":"116023","sourcePortID":"","targetNodeID":"118692","targetPortID":"batch-function-inline-input"}],"id":"118692","meta":{"canvasPosition":{"x":2176.5699693260503,"y":1417.7281332998004},"defaultCollapsed":false,"position":{"x":2586.5699693260503,"y":1123.6281332998005}},"type":"28","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"{{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"author","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"作者水印设置"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"508101","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2586.5699693260503,"y":884.5281332998005}},"type":"15","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109802306060299","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"str_to_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"对象内容","input":{},"name":"obj","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"508101","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"obj"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1746105993&x-signature=EH9PMyAiT2g5OWtOU5x4MxyqWzs%3D","subtitle":"剪映小助手数据生成器:str_to_list","title":"作者水印设置数据结构"},"outputs":[{"name":"infos","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"957939","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3936.569969326051,"y":872.5281332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"161570","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"伯兮体","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":7,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"letter_spacing"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"line_spacing"},{"input":{"type":"string","value":{"content":"#2b2b2b","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":-748,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745976209&x-signature=eZoliJWq4E%2FkkL%2FQogpYx0WFLMc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"添加水印字幕"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"898538","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":7256.56996932605,"y":533.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439223843","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"imgs_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"时间节点，只接收结构：[{\"start\":0,\"end\":4612}]，一般从audio_timeline节点的输出获取","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"对应剪映的转场动画名字   可选","input":{},"name":"transition","required":false,"type":"string"},{"description":"图片宽度","input":{},"name":"width","required":false,"type":"integer"},{"description":"对应剪映的入场动画名字   可选，多个动画请用英文|分割，比如：动画1|动画2","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"对应剪映的入场动画时长  可选","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的组合动画名字    可选，多个动画请用英文|分割，比如：动画1|动画2","input":{},"name":"loop_animation","required":false,"type":"string"},{"description":"对应剪映的组合动画时长  可选","input":{},"name":"loop_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的出场动画名字。可选，多个动画请用英文|分割，比如：动画1|动画2","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"对应剪映的出场动画时长  可选","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的转场动画时长 ，范围是500000-2500000  可选","input":{},"name":"transition_duration","required":false,"type":"integer"},{"description":"图片高度","input":{},"name":"height","required":false,"type":"integer"},{"description":"图片列表，格式[\"https://a.png\",\"https://a.png\"]","input":{},"name":"imgs","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"199038","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"imgs"},{"input":{"schema":{"schema":[{"description":"最后一段音频的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"第一段音频的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"193179","name":"all_timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1746105229&x-signature=U6VYZ3AzJKGNraej%2Fs4OrrZS%2B5E%3D","subtitle":"剪映小助手数据生成器:imgs_infos","title":"背景图片信息"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"134829","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4956.56996932605,"y":-55.87186670019946}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"957939","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[{"description":"最后一段音频的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"第一段音频的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"193179","name":"all_timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据时间线制作字幕数据","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748355197&x-signature=F1AWBquhF3hXP8YepBBET0E%2FLR8%3D","subtitle":"剪映小助手数据生成器:caption_infos","title":"作者水印设置数据"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"161570","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4956.56996932605,"y":884.5281332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7366504288144785434","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"SpeechToText","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7366504288144769050","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音转文本","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"音频url链接","input":{},"name":"url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"878129","name":"audio_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"读取音频url链接，并将音频转为文字","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"语音转文本:SpeechToText","title":"SpeechToText-语音转文本_1"},"outputs":[{"description":"错误码","name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"description":"额外信息","name":"msg","required":false,"type":"string"},{"description":"音频转化后的文字","name":"text","required":false,"type":"string"}],"type":"object"},{"description":"日志ID","name":"log_id","required":false,"type":"string"},{"description":"额外信息","name":"msg","required":false,"type":"string"}]},"edges":null,"id":"443516","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-6023.43003067395,"y":545.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7374410555316011027","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"video2mp3","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7374410555315994643","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频转音频","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"替换为你的OSS存储桶名称","input":{},"name":"bucket_name","required":false,"type":"string"},{"description":"替换为你的OSS区域节点","input":{},"name":"endpoint","required":false,"type":"string"},{"description":"视频链接","input":{},"name":"video_url","required":true,"type":"string"},{"description":"替换为你的阿里云访问密钥ID","input":{},"name":"access_key_id","required":false,"type":"string"},{"description":"替换为你的阿里云访问密钥","input":{},"name":"access_key_secret","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"705848","name":"data.video","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"video_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"提取视频中的音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频转音频:video2mp3","title":"video2mp3-视频转音频_1"},"outputs":[{"description":"音频大小","name":"audio_size","required":false,"type":"string"},{"description":"音频地址","name":"audio_url","required":false,"type":"string"},{"name":"message","required":true,"type":"string"},{"description":"视频大小（视频太大容易报错）","name":"video_size","required":false,"type":"string"},{"description":"原视频地址","name":"video_url","required":false,"type":"string"}]},"edges":null,"id":"878129","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-6483.43003067395,"y":545.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7459326199785947172","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"parseLink","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7459326199785930788","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频无水印解析","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"非必填，更多通道和更多解析质量列表，当前正常开放。","input":{},"name":"auth","required":false,"type":"string"},{"description":"传入分享链接（视频或图片）","input":{},"name":"link","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"clue_info","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"link"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"短视频无水印解析下载，视频去水印，支持国内绝大部分平台，国外：油管、Instgram、Twitter、Tiktok、FaceBook、Vimeo、 Triller、Twitch、Pinterest、VK等，持续更新中... 如果在coze中点击链接提示“403 Forbidden”请复制链接到新打开浏览器标签中即可正常访问。使用国外平台解析时间会稍微久一点。","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频无水印解析:parseLink","title":"parseLink-视频无水印解析_1"},"outputs":[{"description":"返回状态码 0：成功","name":"code","required":false,"type":"integer"},{"description":"返回数据","name":"data","required":false,"schema":[{"name":"avlist","required":false,"schema":{"schema":[{"description":"音频编码","name":"acodec","required":false,"type":"string"},{"description":"文件大小(MB) （可能为0）","name":"filesize","required":false,"type":"string"},{"description":"格式说明","name":"format","required":false,"type":"string"},{"description":"视频高度（可能为0）","name":"height","required":false,"type":"string"},{"description":"视频或音频地址","name":"url","required":false,"type":"string"},{"description":"视频编码","name":"vcodec","required":false,"type":"string"},{"description":"视频宽度（可能为0）","name":"width","required":false,"type":"string"}],"type":"object"},"type":"list"},{"description":"使用通道","name":"channel","required":false,"type":"string"},{"description":"封面图片地址","name":"cover","required":false,"type":"string"},{"description":"图片地址列表","name":"images","required":false,"schema":{"type":"string"},"type":"list"},{"description":"标题或描述","name":"title","required":false,"type":"string"},{"description":"返回数据类型  1：视频  2：图像","name":"type","required":false,"type":"integer"},{"description":"视频地址","name":"video","required":false,"type":"string"}],"type":"object"},{"description":"返回错误描述","name":"message","required":false,"type":"string"}]},"edges":null,"id":"705848","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-6943.43003067395,"y":545.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"clue_info","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String"}],"method":"split","splitParams":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":[","],"type":"literal"}},"name":"delimiters"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "},{"isDefault":false,"label":",","value":","}],"type":"literal"}},"name":"allDelimiters"}]},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理"},"outputs":[{"name":"output","required":true,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"181854","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-7403.43003067395,"y":432.3281332998003}},"type":"15","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"138873","name":"wenan","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String"}],"method":"split","splitParams":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":["\n"],"type":"literal"}},"name":"delimiters"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allDelimiters"}]},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文案台词分割"},"outputs":[{"name":"output","required":true,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"111554","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-4643.43003067395,"y":545.3781332998005}},"type":"15","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7438919188246429731","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"cutout","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7438919188246413347","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"智能抠图","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"100001","name":"book_fm","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"url"},{"input":{"type":"string","value":{"content":"0","type":"literal"}},"name":"only_mask"},{"input":{"type":"string","value":{"content":"0","type":"literal"}},"name":"output_mode"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"自动去背景，自定义抠图对象","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/e1fa61efc3b94459b34c634db918af22~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747944338&x-signature=p9OgcOR2XopgiPE8JY1W33padWQ%3D","subtitle":"智能抠图:cutout","title":"推荐书籍抠图"},"outputs":[{"name":"msg","required":false,"type":"string"},{"assistType":2,"description":"透明背景图，在输出模式为透明背景时生效","name":"data","required":false,"type":"string"},{"description":"抠图区域蒙板矢量图，在输出模式为蒙版矢量图时生效","name":"mask","required":false,"type":"string"}]},"edges":null,"id":"170734","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-7403.43003067395,"y":646.4281332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"fcParam":{"llmNodeUID":"7522832990495162387","pluginFCParam":{"pluginList":[{"api_id":"7362079843678289974","api_name":"bingWebSearch","is_draft":false,"plugin_id":"7362079843678273590","plugin_version":""}]},"spaceID":"7512069975897735222","workflowVersion":""},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"443516","name":"data.text","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"input","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"book_name","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"book_name","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"0.85","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"topP","right":{}},{"input":{"type":"integer","value":{"content":"2000","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"通义千问·Max","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1714394325","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"书籍名称：{{book_name}}\n原始信息：{{input}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"① 角色定位  \n你是「儿童家庭教育信息抽取与补全专家」，深知目标读者——有学龄前或小学孩子的宝妈——最关注孩子成长中的痛点和家长的可操作方案。\n\n② 输出目标  \n将零散的图书卖点、章节摘录、作者介绍、对话记录等，统一整理为以下 JSON 结构，并在缺项时基于常见教育场景进行合理补全。禁止编造具体数据或名人背书。\n\n```json\n{\n  \"book_title\":        \"\",\n  \"pain_points\":       [],\n  \"solutions\":         [],\n  \"key_sentences\":     [],\n  \"author_backing\":    \"\",\n  \"cta\":               \"\",\n  \"tone\":              \"\"\n}\n","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"生成视频前置结构"},"outputs":[{"description":"书名","input":{},"name":"book_title","required":false,"type":"string"},{"input":{},"name":"pain_points","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"solutions","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"key_sentences","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"author_backing","required":false,"type":"string"},{"input":{},"name":"cta","required":false,"type":"string"},{"input":{},"name":"tone","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"181583","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-5563.43003067395,"y":519.3781332998005}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"async function main({ params }: Args): Promise<Output> {\n    const wenan = (params.input as string[])\n      // ➊ 去首尾空格\n      .map(s => s.trim())\n      // ➋ 过滤空文案\n      .filter(Boolean)\n      // ➌ 逐条清洗\n      .map(line => {\n        // a. 移除英文引号\n        line = line.replace(/[\"']/g, '');\n  \n        // b. 移除结尾的逗号、句号（中英文）\n        line = line.replace(/[.,。]+$/g, '');\n  \n        // c. 只移除空格字符\n        line = line.replace(/\\s+/g, '');  // Remove all spaces\n  \n        return line;\n      });\n  \n    return { wenan };\n}\n","functionID":"38x41daa1d5cj","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"111554","name":"output","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"input","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"移除空文案"},"outputs":[{"input":{},"name":"wenan","required":false,"schema":{"type":"string"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"138647","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-4183.43003067395,"y":545.3781332998005}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"181583","name":"book_title","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"book_title","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"181583","name":"pain_points","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"pain_points","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"181583","name":"solutions","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"solutions","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"181583","name":"key_sentences","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"key_sentences","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"181583","name":"author_backing","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"author_backing","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"181583","name":"cta","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"cta","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"181583","name":"tone","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"tone","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"2200","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"DeepSeek-R1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1738675233","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"default_val","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"全文： 420‑460字\nbook_title: {{book_title}}\npain_points: {{pain_points}}\nsolutions: {{solutions}}\nkey_sentences: {{key_sentences}}\nauthor_backing: {{author_backing}}\ncta:  {{cta}}\ntone: {{tone}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"###### ① 角色  \n你是一位资深「亲子教育短视频口播文案策划师」，  \n擅长把心理学与家庭教育理念浓缩成 60‑90 秒、约 420‑460 字的中文口播稿；  \n口吻【真诚且专业】，充满同理心，善于捕捉和描绘家长情绪与孩子行为细节，兼具营销转化力。\n\n###### ② 输入格式  \n{\n  \"book_title\":     \"\",                // 必填：书名\n  \"pain_points\":    [\"\", \"\"],          // 必填：1‑3 个核心痛点。务必具体描述家长在孩子教育中遇到的**典型困扰、日常场景和负面情绪**。\n  \"solutions\":      [\"\", \"\"],          // 必填：1‑3 条针对痛点的解决方案。具体说明书本提供了**哪些方法、知识或引导**来帮助孩子和家长。\n  \"key_sentences\":  [\"\", \"\"],          // 必填：≤3 句能体现书本核心价值、解决方法的**具体故事片段、角色对话或书本原文**。这些应是生动且具象的例子。\n  \"author_backing\": \"\",                // 必填：作者 / 奖项 / 媒体推荐等权威背书。\n  \"cta\":            \"\",                // 必填：行动召唤。清晰、有吸引力地指引用户下一步操作（如“点击下方链接”、“立刻拥有”等）。\n  \"tone\":           \"真诚且专业\",       // 选填：口吻。\n  \"synonyms\": {                        // 选填：同义词映射。增加能体现情绪或具体行为的词汇。\n    \"孩子\": [\"娃\", \"宝贝\", \"小朋友\"],\n    \"家长\": [\"你\", \"我们做父母的\", \"当妈的\", \"当爸的\"],\n    \"不听话\": [\"磨蹭\", \"顶嘴\", \"捣乱\"],\n    \"烦恼\": [\"头疼\", \"发愁\", \"崩溃\", \"焦虑\"],\n    \"学\": [\"习\", \"懂\", \"会\"]\n  }\n}\n\n###### ③ 规则  \n1.  **开篇抓住注意力 & 激发共鸣 (Attention & Interest & Agitation, ≈180‑220 字)：**\n    * 直接切入 `pain_points`，用生活化的语言、生动的场景和真实的感受，**深入描绘**家长面临的困扰。让家长产生“这就是我！”的强烈共鸣。例如：孩子磨蹭时的具体表现、家长催促时的无奈心情。\n    * 可以使用 `synonyms` 替换词汇，使语言更口语化、情感更饱满。\n    * 强调这个痛点**不容忽视的原因**或**不解决可能带来的长期影响**。可以引用 1 条权威研究数据或教育理念，提升问题的严重性和解决的紧迫性。例如：关键期重要性、某种能力对未来的影响。\n    * 在结尾自然引出对解决方案的需求或困惑状态。\n\n2.  **承上启下引出书本 (Transition, 固定句式)：**\n    * 承接上文的困惑，直接引出书本作为解决问题的希望。必须 **固定写为**\n      **“想彻底解决这些烦恼，推荐陪孩子读一读这套\\n{{book_title}}”** 或\n      **“想彻底解决这些烦恼，推荐陪孩子读一读本\\n{{book_title}}”**\n      其中“这套/本”根据真实情况二选一；引号不可缺省。“这些烦恼”可以根据上文痛点灵活调整措辞，但核心句式不变。\n\n3.  **主体展示价值 & 促进行动 (Desire, Authority & Action, ≈230‑270 字)：**\n    * **Desire (建立渴望):**\n        * 详细展开书本如何针对性地解决上述 `pain_points`，对应讲解 `solutions`。\n        * **核心在于具象化展示：** 通过引用 `key_sentences` 中具体的书本片段、角色行为或对话，生动地呈现解决方案的**具体操作方式或带来的积极改变**。用画面感强的语言，让家长看到孩子阅读后可能出现的积极反应和进步，描绘孩子获得成功的画面，激发家长的强烈购买欲望。例如：孩子读完某个故事后，在类似情境下的不同反应。\n        * 语言要有感染力，突出书本的独特魅力和易于落地性。\n    * **Authority (增强信任):**\n        * 自然地融入 `author_backing`，利用作者的专业背景、获得的奖项或第三方推荐，增强书本的可信度和价值感。\n    * **Action (引导行动):**\n        * 给出明确、有吸引力的 `cta`。语言要简洁有力，再次与开头的痛点或期望挂钩，强化行动的必要性和收益。\n\n4.  不得捏造明显失真的数据；若公开数据不足，可用“研究显示”“大型调查指出”等笼统表达。数据应服务于痛点强调或解决方案的佐证。\n5.  **仅输出口播稿正文**，不返回 JSON、标题、多余的引号符号或别的内容。\n6.  每句 10‑22 字自动\\n换行；仅中文，不含价格、英文广告词或解释。\n7.  说话的内容必须使用中文引号 “xxx”包裹。\n8.  只需要输出口播内容，其他的不需要输出任何内容。\n\n###### ④ 输出格式  \n<口播稿正文>\n\n###### ⑤ 样例输出（示范流程，沿用“小话痨”主题，但按新规则重写）：  \n如果你家有个小“永动机”\n每天从早到晚说个不停\n吃饭说 玩玩具说 睡觉前还在说\n你是不是经常被吵得头大\n甚至有点心烦\n担心孩子这样“没重点”地聊天\n长大后会不分场合乱说话\n影响他的人际交往和表达能力\n其实，爱表达是孩子探索世界\n和建立连接的原始动力\n心理学研究表明\n在3-6岁关键期\n如果能科学引导孩子\n学会高质量的沟通方式\n不仅能保护他的表达热情\n更能帮助他建立自信\n成为一个受欢迎的小朋友\n\n想彻底解决这些烦恼，推荐陪孩子读一读这套\n《莉莉兰的高情商沟通课》\n这套书简直太懂孩子了\n它不像枯燥的说教\n而是通过小莉莉兰和伙伴们的日常故事\n巧妙地把沟通技巧融入进去\n教会孩子怎么说、说什么\n比如，当小动物们因为误会吵架时\n莉莉兰没有指责任何人\n而是说：“我们都冷静一下\n也许只是没听清对方的意思”\n引导孩子学会换位思考\n朋友伤心哭泣时\n她不会敷衍地说“别哭了”\n而是理解地说：“我知道你现在很难过\n没关系，想哭就哭出来吧”\n教会孩子如何回应情绪\n绘本的作者是儿童心理学专家\n也是多部知名动画片的编剧\n他最擅长把复杂的心理道理\n变成孩子能听懂、爱听的故事\n让孩子在轻松愉快的阅读中\n潜移默化地学会如何清晰表达自己\n如何友善回应他人\n如何成为一个高情商的小人气王\n全套一共10册\n涵盖了孩子成长中\n几乎所有会遇到的沟通难题\n如果你也希望孩子将来能自信表达\n有好人缘 受欢迎\n这套书一定要给孩子安排上\n点击下方链接\n送给孩子一套受益终生的高情商秘籍吧！\n","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"口播稿"},"outputs":[{"input":{},"name":"wenan","required":false,"type":"string"},{"input":{},"name":"reasoning_content","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"138873","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-5103.43003067395,"y":519.3781332998005}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684548642","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"save_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"769506","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":12437,"rawMeta":{"type":2},"type":"literal"}},"name":"user_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"保存草稿\n","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:save_draft","title":"save_draft"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"120630","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":11365.904209521068,"y":545.3781332998005}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}}],"versions":{"batch":"v2","loop":"v2"}},"bounds":{"x":0,"y":0,"width":4567,"height":1234}}