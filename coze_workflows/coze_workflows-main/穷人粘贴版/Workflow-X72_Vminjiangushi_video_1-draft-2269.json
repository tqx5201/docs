{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531363689128230946","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"169698","sourcePortID":"","targetNodeID":"127547"},{"sourceNodeID":"127547","sourcePortID":"","targetNodeID":"104727"},{"sourceNodeID":"191805","sourcePortID":"","targetNodeID":"172576"},{"sourceNodeID":"172576","sourcePortID":"","targetNodeID":"169698"},{"sourceNodeID":"104727","sourcePortID":"","targetNodeID":"111554"},{"sourceNodeID":"111554","sourcePortID":"","targetNodeID":"148399"},{"sourceNodeID":"148399","sourcePortID":"","targetNodeID":"112744"},{"sourceNodeID":"112744","sourcePortID":"","targetNodeID":"117592"},{"sourceNodeID":"180432","sourcePortID":"","targetNodeID":"175252"},{"sourceNodeID":"175252","sourcePortID":"","targetNodeID":"114173"},{"sourceNodeID":"114173","sourcePortID":"","targetNodeID":"178178"},{"sourceNodeID":"178178","sourcePortID":"","targetNodeID":"122250"},{"sourceNodeID":"122250","sourcePortID":"","targetNodeID":"605469"},{"sourceNodeID":"605469","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"121063","sourcePortID":"","targetNodeID":"171939"},{"sourceNodeID":"171939","sourcePortID":"","targetNodeID":"140775"},{"sourceNodeID":"140775","sourcePortID":"loop-output","targetNodeID":"243718"},{"sourceNodeID":"114173","sourcePortID":"","targetNodeID":"549009"},{"sourceNodeID":"549009","sourcePortID":"","targetNodeID":"115803"},{"sourceNodeID":"115803","sourcePortID":"","targetNodeID":"227967"},{"sourceNodeID":"227967","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"114173","sourcePortID":"","targetNodeID":"115123"},{"sourceNodeID":"114173","sourcePortID":"","targetNodeID":"114067"},{"sourceNodeID":"114173","sourcePortID":"","targetNodeID":"121063"},{"sourceNodeID":"243718","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"170813","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"397123","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"024922","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"501302","sourcePortID":"","targetNodeID":"131684"},{"sourceNodeID":"131684","sourcePortID":"","targetNodeID":"317914"},{"sourceNodeID":"317914","sourcePortID":"","targetNodeID":"168391"},{"sourceNodeID":"168391","sourcePortID":"","targetNodeID":"131771"},{"sourceNodeID":"206773","sourcePortID":"","targetNodeID":"150141"},{"sourceNodeID":"131771","sourcePortID":"","targetNodeID":"291561"},{"sourceNodeID":"114067","sourcePortID":"","targetNodeID":"844008"},{"sourceNodeID":"844008","sourcePortID":"","targetNodeID":"397123"},{"sourceNodeID":"100305","sourcePortID":"","targetNodeID":"423829"},{"sourceNodeID":"423829","sourcePortID":"","targetNodeID":"939698"},{"sourceNodeID":"115123","sourcePortID":"","targetNodeID":"157306"},{"sourceNodeID":"157306","sourcePortID":"","targetNodeID":"832596"},{"sourceNodeID":"115123","sourcePortID":"","targetNodeID":"079456"},{"sourceNodeID":"116861","sourcePortID":"","targetNodeID":"168634"},{"sourceNodeID":"168634","sourcePortID":"","targetNodeID":"287201"},{"sourceNodeID":"287201","sourcePortID":"","targetNodeID":"024922"},{"sourceNodeID":"276651","sourcePortID":"","targetNodeID":"501302"},{"sourceNodeID":"832596","sourcePortID":"","targetNodeID":"276651"},{"sourceNodeID":"291561","sourcePortID":"","targetNodeID":"421761"},{"sourceNodeID":"421761","sourcePortID":"","targetNodeID":"184820"},{"sourceNodeID":"184820","sourcePortID":"","targetNodeID":"100305"},{"sourceNodeID":"079456","sourcePortID":"","targetNodeID":"116861"},{"sourceNodeID":"101841","sourcePortID":"","targetNodeID":"130809"},{"sourceNodeID":"130809","sourcePortID":"","targetNodeID":"109434"},{"sourceNodeID":"109434","sourcePortID":"loop-output","targetNodeID":"354613"},{"sourceNodeID":"354613","sourcePortID":"loop-output","targetNodeID":"170813"},{"sourceNodeID":"121063","sourcePortID":"","targetNodeID":"101841"},{"sourceNodeID":"939698","sourcePortID":"","targetNodeID":"441738"},{"sourceNodeID":"441738","sourcePortID":"","targetNodeID":"206773"},{"sourceNodeID":"117592","sourcePortID":"","targetNodeID":"180432"}],"nodes":[{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"191805","name":"style_structure","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"style_structure","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"169698","name":"pre_wenan","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"pre_wenan","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"172576","name":"main_wenan","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"main_wenan","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"2200","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"DeepSeek-R1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1738675233","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"我给你结构、文案、：{{style_structure}}{{pre_wenan}}{{main_wenan}}，帮我生成爆款标题","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"## ✅ **爆款标题生成器｜结构化输入升级版**\n\n---\n\n### 🧠【角色设定】\n\n你是一名专注短视频剧情账号的**爆款标题策划人**，擅长从一段剧本或提纲中**反向提取最大情绪钩子与反转爆点**，生成极具吸引力的标题。  \n\n你服务的账号目标是：  \n- 爆款播放（百万+）  \n- 强钩子标题  \n- 适用于抖音 / 快手 / B站等短视频平台  \n- 情绪炸裂、剧情扭曲、局术反转、人性崩塌、历史迷雾\n\n---\n\n### 🧩【输入结构】\n\n我将提供你一段内容，包含以下字段：\n\n- `style_structure`：风格设定，如极端选择、市井反差、社会机制、人性困局等关键词  \n- `pre_wenan`：口播开头（已带情绪）  \n- `main_wenan`：剧情核心段落，包含冲突与反转  \n\n你需要通读这些内容，从中提炼出最具视觉爆点与情绪张力的冲突点，生成一个最有吸引力的**视频封面钩子标题**。\n\n---\n\n### 🎯【输出要求】\n\n- 只输出一个标题  \n- 绝不能平淡、无反差、无好奇心驱动  \n- 必须具有：**强设问/强视觉/强隐喻/强反常识/强羞辱/强情绪/强悬念**\n- 结合结构内容发散式提炼，不是照搬，不要复述原文  \n- 字数建议：12~22字（符合短视频视觉封面最佳密度）\n\n---\n\n### ⛔【限制】\n\n- 不要解释，不要给多个备选，不要输出段落  \n- **只输出一个最优标题**此外不要返回任何其他信息\n\n---\n\n### 🧪【输入示例】\n\n```\n我给你结构、文案：\nstyle_structure：权力结构型 + 市井羞辱型 + 极端人性抉择  \npre_wenan：我爹一辈子清白做人，临死前却跪着让我尝皇上的屎  \nmain_wenan：为了进朝堂，我做了“尝秽官”。。。\n```\n \n---\n\n### ✅【输出示例】\n那年我靠舔屎进了朝堂","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"生成标题"},"outputs":[{"description":"标题","input":{},"name":"title","required":false,"type":"string"},{"input":{},"name":"reasoning_content","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"127547","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2312.904518034962,"y":869.3249480514062}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"191805","name":"style_structure","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"style_structure","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"subject","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"subject","right":{}}],"llmParam":[{"input":{"type":"string","value":{"content":"default_val","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"float","value":{"content":"1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"8192","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"DeepSeek-R1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1738675233","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"{{subject}}{{style_structure}}\n- 输出口播稿字数大于1000个汉字","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"## 💣 **爆款历史剧情口播提示词模版 V3（极致情绪 + 历史真实）**\n\n---\n\n### ✅【角色设定】\n\n你是百万播放剧情视频的策划人  \n你要写一篇**基于真实历史事件改编**的第一人称口播稿，  \n主打**极端命运 + 真实奇案 + 情绪炸裂 + 戏剧反转**\n\n---\n\n### ✅【输出目标】\n\n生成一篇短视频剧情口播稿，要求：\n\n- 内容基于**真实历史文献、人物、事件、制度背景**（可微润色，不可穿越魔幻）\n- 全文保持**强情绪 + 高反转 + 短句节奏**\n- 主人公必须为“你”，使用**第二人称代入视角**\n- 不啰嗦，不AI味，**紧凑狠辣，打在人性**\n\n---\n\n### ✅【结构模板】\n\n1. **开头勾子（第一句）**\n   - 不用瞎编癫疯话，但要足够**震撼或勾人**\n   - 可用设问句、历史宿命感、道德两难、被逼命局等形式切入  \n   - **15-20字内，禁止逗号句号，强视觉冲突**\n\n   示例：  \n   > 你知道吗 他不是太监 他是来杀皇帝的  \n   > 你亲手阉了自己 只为接近贵妃一步  \n   > 一枚铜钱换命 全族三百口的血都换不来  \n   > 所有人都说她疯了 可只有你知道她没说谎  \n\n2. **你是……（角色设定）**  \n   - 明确主角身份＋处境  \n   - 体现阶层、地位、环境限制\n\n3. **背景过渡（表面平静 or 伪希望）**  \n   - 古代日常、制度设定、主角动机  \n   - 传达主角的初衷或幻想\n\n4. **第一次危机突发**  \n   - 小反转，命运断层  \n   - **破坏安全感 + 压力来袭**\n\n5. **希望路径**  \n   - 让观众误以为主角找到出路  \n   - 可能有帮手、有计划、有转机\n\n6. **第一次重大反转**  \n   - 希望破灭，或**进入更深黑暗**\n\n7. **主角挣扎与极端行动**  \n   - 做选择，杀人、逃跑、背叛、自残都合理  \n   - 只要能撑起动机链，越狠越真实\n\n8. **第二次反转（或真相揭露）**  \n   - 真相反转、命运代价、情感错位、人性扭曲\n\n9. **结尾哲理句 / 宿命感 / 留钩子**  \n   - 不必强收尾，要**留一句观众会回味或转发的钩子**\n\n---\n\n### ✅【语言风格与限制】\n\n| 项目 | 规则 |\n|------|------|\n| 📌 视角 | 第二人称：你是…… |\n| 🧱 句式 | 每行一句、自动换行，15~22字 |\n| ❌ 禁忌 | 禁用逗号、句号、顿号，禁现代物品/穿越设定 |\n| 📖 逻辑 | 所有反转符合制度逻辑、历史语境、人性动机 |\n| 🗣️ 风格 | 市井狠辣 + 情绪碎裂 + 真实历史细节感 |\n| 🧠 表达 | 通俗口语 + 快节奏 + 无AI啰嗦语句 |\n\n---\n\n### ✅【可选扩展】\n\n> ✅ 如用户输入为“真实奇案/冷门制度/古代怪职业”等题材，  \n> 系统将自动检索真实历史文献并微润色重构为剧情。\n\n\n### ✅【语言风格与限制】\n- 全文用“你是……”**第一人称视角**  \n- 句子必须为**每行一句**，15~22字  \n- 禁止使用逗号、句号、顿号（仅可使用感叹号、问号）  \n-- 禁止出现与历史背景不符的设定（如穿越、魔法、枪支、现代交通工具等）  \n- 所有逻辑必须自洽，行为必须符合角色动机和古代常识  \n- 禁止杜撰超出现实可能性的事件（如敌将突然变成母亲、银子变成火药等）  \n- 对话和情节需贴近语言逻辑\n- 每行**自动换行**，适配短视频字幕展示  \n- **语言口语化＋碎裂情绪＋市井狠辣**\n- 最终仅返回完整的故事，除此之外不返回任何解释、emoji等信息\n\n---\n\n\n### 案例输出\n输出：\n古代屠城真的没人能活下来吗？\n你是徐州城内的一名普通书生\n今日闲来无事正在青楼里勾栏听曲\n突然一声震天的号角划破了所有的平静\n街上传来哭喊声 敌军屠城了 快逃啊！\n守城士兵被乱军砍成肉块\n孩童的啼哭混杂在烈火与杀伐中\n你惊恐的跑回家中将母亲背在背上\n准备从后门逃跑\n两个手持滴血长刀的敌兵闯入屋中\n给老子滚出来！\n你跪下疯狂磕头 军爷饶命 我们只是平民\n士兵嗤笑一声 去广场清点人数\n广场上挤满了人 老幼病残黑压压的一片\n远处敌将高坐在马上环视全城\n声音冷漠如铁 20两熟金一条命 交钱者免死\n人群开始骚动\n跪着的人们疯狂的翻找衣袖腰带鞋底\n有人颤抖着递出银两 眼中带着求生的渴望\n此时你心中发冷 自己家并不富裕 哪来的40两？\n母亲沉默片刻\n忽然伸手摘下耳畔的一对翡翠耳环\n手指颤抖着递给士兵\n这是留给儿子的嫁妆 你看看值不值40两？\n士兵接过随手掂了掂 冷笑 算你过关\n交了银子的百姓被士兵们押送到一座大宅之中\n宅院里有人跪地哭泣 有人相互拥抱\n那些穷苦人家东拼西凑 也只够让家里的长子活下来\n一个妇人紧紧抱着啼哭的孩子\n眼里闪出了泪光 别怕 我们有银子 我们能活\n可就在这时 士兵忽然关闭了宅院大门\n周围的敌兵抽出泛着森冷寒光的长刀\n高台上敌将缓缓开口 给我动手！\n话音落下 敌兵们毫不犹豫的挥刀屠戮\n哭喊声 惨叫声 瞬间炸裂开来\n刚刚还暗自庆幸的百姓转瞬间化为倒地尸体\n那名抱孩子的妇人惊叫道\n不是说交了银子就能活吗？\n士兵冷笑一声 刀刃寒光闪过\n此刻你跪在地上拼命护着母亲 浑身发抖\n求求你 放过我们 我们愿意再交钱！\n其中一个敌军忽然盯着你 皱了皱眉 你哪的人？\n你颤抖着回答 四川 浮陵\n士兵愣了一下 像是回忆起了什么 低声道 老乡啊！\n他压低声音 你们把剩下的银子给我 我带你们从偏门走\n你连忙从鞋底掏出几张银票递了过去 生怕他反悔\n士兵冷笑 太少了！\n母亲一咬牙解下脖颈上的玉坠 双手奉上 这些够吗？\n行 跟我走吧\n他带你们穿过长巷避开巡逻的同僚\n你看到了生的希望 母亲也虚弱的笑了一下\n可走到一处破庙时 士兵停下了\n他缓缓抽出腰间的短刀 轻笑道\n妈的 还以为你们真能活啊！\n下一秒 刀尖刺穿母亲的胸膛\n你惊愕的睁大双眼 嘴唇微微颤抖 却再说不出 一句话\n危急时刻 你猛地扑上去 躲过他的短刀 狠狠捅进他的心脏\n鲜血顺着刀刃喷溅在你脸上\n他的眼神从惊愕化为死寂\n直到他死透了 你的手还紧紧握着刀柄\n你颤抖着手扒下士兵的甲胄 穿在自己身上\n混进了敌军部队之中 没有人察觉你的异常\n可你真的能活下去了吗？\n随着队伍前行 你发现了一个可怕的事实\n不管有没有交银子 不管有没有反抗\n所有百姓最后都会被杀掉\n这一切不过是敌军榨干了最后一丝价值的手段\n他们骗钱 骗劳役 骗人们心存侥幸\n在最后的时刻割下他们的头颅\n午时三刻 最后一批百姓被带到街上准备屠杀\n人群中不乏你的至爱亲朋\n你握着刀柄的手心冒汗\n这时敌将忽然看向你 随意的指了指 你去！\n你浑身一颤 去 去做什么？\n敌将不耐烦的冷笑 加快进度 日落之前把城屠尽\n刀都拿着了 等什么？\n你僵硬的站在原地 心跳如雷鼓\n跪在地上求饶的百姓们惊恐的望着你\n眼神里带着最后的渴求\n敌将的声音从耳后传来 给老子麻利点！\n你闭上双眼 手中长刀落下\n乡亲们的血溅了你一身","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"生成口播稿文案"},"outputs":[{"description":"输出口播稿字数大于1350个汉字","input":{},"name":"main_wenan","required":false,"type":"string"},{"input":{},"name":"reasoning_content","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"172576","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2305.062098344404,"y":21.83990910375661}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"fcParam":{"llmNodeUID":"7522827771991687231","pluginFCParam":{"pluginList":[{"api_id":"7391851218685165608","api_name":"bingWebSearchLight","is_draft":false,"plugin_id":"7362079843678273590","plugin_version":""}]},"spaceID":"7512069975897735222","workflowVersion":""},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"subject","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"title","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"float","value":{"content":"0.7","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"topP","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"integer","value":{"content":"1024","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"string","value":{"content":"豆包·工具调用","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1706077826","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"标题：{{title}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"你是一名专精于短视频爆款剧情创作的AI策划助手。  \n用户将提供一个标题或命题（如“尝秽官”、“我亲爹让我杀了我娘”）。  \n你需要从这个标题出发，结合角色关系、人性冲突、社会结构，输出完整的剧情结构草图。  \n\n你具备以下能力：  \n- **风格智能匹配**：根据标题，判断属于哪种爆款叙事风格  \n- **关键词提炼**：提取其中的人物关系、核心物件、关键行为  \n- **情绪输出设定**：确定观众看完应产生的情绪张力  \n- **历史/现实背景补全**：根据标题，自动搜索或关联合适的真实事件、民俗、心理研究、社会制度等信息，为剧本增厚  \n\n---\n\n### 🧩【任务目标】\n\n请根据**标题内容**，推导以下结构字段：\n\n1. **标题**：原始输入标题  \n2. **风格偏好**：（从下列中多选组合）  \n   - 极端选择型  \n   - 瞬间炸裂型  \n   - 社会机制型  \n   - 情感背刺型  \n   - 权力结构型  \n   - 冷暴力观察型  \n   - 下里巴人市井味  \n   - 宫斗 / 青楼 / 乡野 / 监牢 等具体场景风格  \n3. **关键词**：  \n   - 不少于4个，突出视觉锚点、冲突行为或身份暗示  \n4. **目标情绪**：  \n   - 从下列中多选组合：癫狂、冤屈、压抑爆发、恐惧、讽刺、人性扭曲、心碎、愤怒、残酷无力感、撕裂感  \n5. **字数限制**：  \n   - 默认1000字左右\n6. **背景资料补充**：  \n   - 补充与该标题主题高度相关的真实历史事件、制度设定、心理现象或社会隐喻，体现可信张力  \n\n---\n\n### 🧾【输出格式要求】\n\n请以如下结构输出，不要省略字段：\n\n```\n风格偏好：xxx + xxx  \n关键词：xxx、xxx、xxx、xxx  \n目标情绪：xxx、xxx、xxx  \n字数：1000字左右  \n背景资料：  \n- （历史真实/心理研究/社会制度/典故隐喻等内容）  \n- ……（可补充2-4条，简洁凝练）  \n```\n\n---\n\n### 🧪【输入示例】（给AI的内容）\n标题：尝秽官\n\n---\n\n### 🎯【输出示例】（AI返回）\n\n```\n风格偏好：下里巴人市井味 + 权力结构型 + 人性扭曲型  \n关键词：官职、屎尿、仕途羞辱、底层斗争  \n目标情绪：讽刺、残酷无力感、癫狂  \n字数：1000字左右  \n背景资料：  \n- 「尝秽官」是古代职官体系中的极端低阶职位，负责处理皇族排泄物，甚至有试毒功能，历史上东汉、南北朝均有记载  \n- 古代仕途讲求“忍辱负重”，以污名换得升迁  \n- “舔痔疾”作为谄媚成语，出自《世说新语》，描述权臣权术之风  \n- 对应现代“高薪羞辱岗”概念，映射尊严与生存的张力博弈  \n```","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"口播剧本前置结构生成 "},"outputs":[{"description":"口播剧本前置风格结构","input":{},"name":"style_structure","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"191805","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2253.9626802364946,"y":-435.8372845186909}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"191805","name":"style_structure","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"title","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"172576","name":"main_wenan","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"main_wenan","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"2200","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"DeepSeek-R1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1738675233","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"请根据以下标题，生成符合上述规则的前三秒钩子语：  \n【标题】：{{title}}\n【文案】：{{main_wenan}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"你是一个**疯癫沉稳的高智商编剧**，擅长写**极端命局 + 民间共识 + 情绪炸裂 + 宿命诅咒**的剧情口播。  \n你从不乱用猎奇点，而是能**精准提炼出一段诡异故事中真正“勾人的第一句话”**，  \n让观众从信息流里一眼停下，并愿意听下去。  \n\n你的钩子句，必须像是从老一辈口中流传下来的**疯话、禁语或文化诅咒**，  \n一出口就带画面、有反常识、能抓住观众内心“听说过但没听完”的那一根筋。\n\n---\n\n## ✅【你的任务】\n\n> **用一句“设问句/疯训句/禁忌话”开头，把观众狠狠拉进这个故事。**\n\n这句话必须满足：\n- **像真的、像老人口口相传的禁语**  \n- **不能剧透结尾，但要留下疑问和冲突点**  \n- **既引发“这是真的吗”的猎奇心，也藏着“别讲太大声”的诡异文化感**\n\n---\n\n## 🔪【钩子生成公式】\n\n从主文案中提炼一句15～20字以内的钩子：\n\n> **[设问 / 禁语] + [文化锚点] + [画面冲突] + [宿命感 or 民间规则]**\n\n---\n\n## 🧠【写作要素】\n\n| 要素 | 要求 | 示例 |\n|------|------|------|\n| ❶ 打开方式 | 用**设问/疯言/民俗规训/视觉错位**句式开场 | 师父说… / 你听过吗… / 谁走谁回… |\n| ❷ 情绪密度 | 情绪必须浓，能带来“惊悚、羞耻、恐惧、冤屈”中的任意一种 | 听了不舒服、但想知道后面怎么回事 |\n| ❸ 可画面化 | 这句话要能配图，能被AI或画手画出来 | 焦尸、黄符、铜铃、坟前、尸油滴地 |\n| ❹ 民间锚点 | 背后必须是大众文化中模糊但熟悉的事 | 雷劈尸、童子命、收徒符、头七、符纸封魂 |\n\n---\n\n## 💬【开头句型推荐】\n\n| 类型 | 示例 | 说明 |\n|------|--------|------|\n| 设问型 | 你知道湘西赶尸匠吗？/ 死人真的能自己走回坟吗？ | 引发好奇、扎在文化常识上 |\n| 民俗疯言型 | 师父说，赶尸人死不得全尸。 | 疯话+宿命+地域性强 |\n| 视觉错位型 | 铜钱孔一转，我看见尸体的眼睛在盯我影子。 | 抓视觉、冲情绪 |\n| 禁忌混乱型 | 黄符封尸的，是他自己那层烂皮。 | 情节颠倒+引爆悬疑 |\n\n---\n\n## 🧬【关键词提示池】\n\n| 类别 | 示例 |\n|------|-------|\n| 情绪动作 | 焦尸、剥皮、摄魂、喊破、腐烂、踩脸、灌黑水 |\n| 文化意象 | 黄符、铜铃、尸油、摄魂钉、收徒符、缠魂线 |\n| 民俗共识 | 赶尸、雷劈尸、童子命、吊死不葬、头七要过桥 |\n| 场景符号 | 山道、乱葬岗、义庄、坟前、夜雨、雾中长路 |\n\n---\n\n## 📌【输出要求】\n\n- ✅ 只输出一句钩子话  \n- ✅ 控制在15～20字以内  \n- ✅ 不加任何解释或注释  \n- ✅ 不剧透结尾  \n- ✅ 必须满足以下三项中的至少两项：\n  - 有情绪张力（惊悚、冤屈、疯感）\n  - 有文化锚点（观众“听说过”但没弄懂）\n  - 有画面冲突（尸、油、符、钉、雾、山道等）\n\n- ✅ 输出格式如下：\n赶尸匠的最后一单，是把自己赶回坟里","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"生成口播稿前3秒勾子文案"},"outputs":[{"description":"前三秒勾子文案","input":{},"name":"pre_wenan","required":false,"type":"string"},{"input":{},"name":"reasoning_content","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"169698","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2312.904518034962,"y":466.6736852029756}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = {\n        \"wenan\": params.pre_wenan +\"\\n\"+ params.main_wenan, // 拼接两次入参 input 的值\n    };\n\n    return ret;\n}","functionID":"38x3upgcncfi3","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"169698","name":"pre_wenan","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"pre_wenan","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"172576","name":"main_wenan","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"main_wenan","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"合并口播稿"},"outputs":[{"input":{},"name":"wenan","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"104727","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1626.8257278802412,"y":887.6554001876264}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"104727","name":"wenan","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String"}],"method":"split","splitParams":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":["\n"],"type":"literal"}},"name":"delimiters"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allDelimiters"}]},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文案台词分割"},"outputs":[{"name":"output","required":true,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"111554","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1669.1811129578073,"y":466.6736852029756}},"type":"15","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"batch":{"batchEnable":true,"batchSize":200,"concurrentSize":10,"inputLists":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"148399","name":"wenan","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"wenan"}]},"inputDefs":[{"description":"要合成音频的文本内容","input":{},"name":"text","required":true,"type":"string"},{"assistType":12,"description":"voice id","input":{},"name":"voice_id","required":false,"type":"string"},{"description":"语音语种，非必填，参考 https://bytedance.larkoffice.com/docx/WdDOdiB1BoRyBNxlkXWcn0n3nLc","input":{},"name":"language","required":false,"type":"string"},{"defaultValue":"爽快思思/Skye","description":"音色ID，默认为爽快思思/Skye。详细音色列表参考 https://bytedance.larkoffice.com/docx/WdDOdiB1BoRyBNxlkXWcn0n3nLc, default value is 爽快思思/Skye","input":{},"name":"speaker_id","required":false,"type":"string"},{"defaultValue":1,"description":"语速，范围是[0.2,3]，默认为1，通常保留一位小数即可, default value is 1","input":{},"name":"speed_ratio","required":false,"type":"float"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"112744","name":"wenan","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"speed_ratio"},{"input":{"assistType":12,"type":"string","value":{"content":"7468512265134932019","rawMeta":{"fileName":"悬疑解说","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745953518&x-signature=xXEfOOuluB3ZdC24xV5cwikTVvg%3D","subtitle":"语音合成:speech_synthesis","title":"语音合成"},"outputs":[{"name":"outputList","schema":{"schema":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"112744","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1558.3184125865573,"y":-423.8372845186909}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439158307","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"audio_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"特效音，eg：教堂，默认无","input":{},"name":"audio_effect","required":false,"type":"string"},{"description":"音频列表","input":{},"name":"mp3_urls","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间线","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"音量大小，0-10,默认1","input":{},"name":"volume","required":false,"type":"float"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"117592","name":"links","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"mp3_urls"},{"input":{"schema":{"schema":[{"description":"当前音频段的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"当前音频段的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"180432","name":"timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"string","value":{"content":"人声增强3","rawMeta":{"type":1},"type":"literal"}},"name":"audio_effect"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据时间线制作音频数据","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:audio_infos","title":"处理文案人声信息"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"175252","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-887.7515899861737,"y":837.8033390730591}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"{{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"assistType":10,"type":"string","value":{"content":"https://p26-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/584e9e8e292a46e1b9f7c5c7068114c9.mp4~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1775243539&x-signature=KyKfKuoGfHqk434TAwYgYenGoM8%3D","rawMeta":{"fileName":"test-bgm.mp4","type":16},"type":"literal"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"背景音乐上传"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"178178","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1454.8996607703893,"y":-1034.7705835797385}},"type":"15","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439158307","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"audio_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"特效音，eg：教堂，默认无","input":{},"name":"audio_effect","required":false,"type":"string"},{"description":"音频列表","input":{},"name":"mp3_urls","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间线","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"音量大小，0-10,默认1","input":{},"name":"volume","required":false,"type":"float"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"122250","name":"bgm","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"mp3_urls"},{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"122250","name":"bgmTimeline","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"float","value":{"content":0.1,"rawMeta":{"type":4},"type":"literal"}},"name":"volume"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据时间线制作音频数据","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:audio_infos","title":"背景音乐信息处理"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"605469","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3324.8887060917486,"y":-1034.7705835797385}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    return {\n        bgm: [params.bgmData], // 输出一个数组\n        bgmTimeline: [{\n            start: params.timelines[1].start,\n            end: params.timelines?.pop()?.end,\n        }]\n    }\n}","functionID":"38x3ymty9jfo7","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"178178","name":"output","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"bgmData","right":{}},{"input":{"schema":{"schema":[{"description":"当前音频段的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"当前音频段的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"180432","name":"timelines","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"timelines","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"处理背景音乐格式和音乐时间线"},"outputs":[{"input":{},"name":"bgm","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"bgmTimeline","required":false,"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"122250","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2304.8887060917477,"y":-1034.7705835797385}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = {\n        \"texts\": params.wenanTimeline.map(item => item.content), // 拼接两次入参 input 的值\n        \"timelines\": params.wenanTimeline.map(item => ({ start: item.start,end: item.end})), // 输出一个数组\n        \"otherInfo\": params.wenanTimeline.map(() => ({\n            font_size: 6,\n            alignment: 1,\n            transform_y: -957\n        })),\n    };\n\n    return ret;\n}","functionID":"38x3zh4ksm359","inputParameters":[{"input":{"schema":{"schema":[{"description":"文案","name":"content","required":true,"type":"string"},{"description":"文案结束时间","name":"end","required":true,"type":"float"},{"description":"文案开始时间","name":"start","required":true,"type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"121063","name":"wenanTimeline","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"wenanTimeline","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"中文字幕统一数据结构"},"outputs":[{"input":{},"name":"texts","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"timelines","required":false,"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list"},{"input":{},"name":"otherInfo","required":false,"schema":{"schema":[{"name":"font_size","type":"integer"},{"name":"in_animation","type":"string"},{"name":"in_animation_duratio","type":"integer"},{"name":"keyword_color","type":"string"},{"name":"keyword_font_size","type":"integer"},{"name":"keyword","type":"string"},{"name":"loop_animation","type":"string"},{"name":"loop_animation_durat","type":"integer"},{"name":"out_animation","type":"string"},{"name":"out_animation_durati","type":"integer"},{"name":"alignment","type":"integer"},{"name":"text_color","type":"string"},{"name":"line_spacing","type":"float"},{"name":"transform_y","type":"float"},{"name":"transform_x","type":"float"},{"name":"line_spacing","type":"float"}],"type":"object"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"171939","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1454.8996607703893,"y":135.22941642026154}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"文字大小","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"对应剪映的入场动画名字，多个动画请用英文|分割，比如：飞入|放大","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"关键词颜色","input":{},"name":"keyword_color","required":false,"type":"string"},{"description":"关键词字大小","input":{},"name":"keyword_font_size","required":false,"type":"integer"},{"description":"入场动画时长","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"文本里面的重点词列表","input":{},"name":"keywords","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"对应剪映的循环动画名字，多个动画请用英文|分割，比如：扫光|晃动","input":{},"name":"loop_animation","required":false,"type":"string"},{"description":"循环动画时长","input":{},"name":"loop_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的出场动画名字，多个动画请用英文|分割，比如：消散|闭幕","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"出场动画时长","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"文本列表","input":{},"name":"texts","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间节点，只接收结构：[{\"start\":0,\"end\":4612}]，一般从audio_timeline节点的输出获取","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"165305","name":"texts","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"165305","name":"timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"integer","value":{"content":{"blockID":"165305","name":"otherInfos.font_size","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"font_size"},{"input":{"type":"string","value":{"content":{"blockID":"165305","name":"otherInfos.in_animation","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"in_animation"},{"input":{"type":"string","value":{"content":{"blockID":"165305","name":"keyword_color","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"keyword_color"},{"input":{"type":"integer","value":{"content":{"blockID":"165305","name":"otherInfos.font_size","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"keyword_font_size"},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"165305","name":"keywords","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"keywords"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745974125&x-signature=kiSVNIdcDVmZP4uYua5hey9aZQY%3D","subtitle":"剪映小助手数据生成器:caption_infos","title":"处理中文文案分镜"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"160748","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":640,"y":0}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = {\n        \"texts\": [params.text], // 拼接两次入参 input 的值\n        \"keywords\": params.var_otherInfo[params.idx].keyword ? [params.var_otherInfo[params.idx].keyword] : [],\n        \"keyword_font_size\": params.var_otherInfo[params.idx].font_size,\n        \"keyword_color\": params.var_otherInfo[params.idx].keyword_color,\n        \"timelines\": [params.var_timelines[params.idx]], // 输出一个数组\n        \"otherInfos\": params.var_otherInfo[params.idx] ? {\n            ...params.var_otherInfo[params.idx],\n            // BUG：有高亮会自动变白，需要调整颜色\n            border_color: params.var_otherInfo[params.idx]?.keyword?.length ? '#000000' : null\n         } : {},\n    };\n\n    return ret;\n}","functionID":"38x3x9qrzshqp","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"140775","name":"texts","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"text","right":{}},{"input":{"type":"integer","value":{"content":{"blockID":"140775","name":"index","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"ref"}},"left":{},"name":"idx","right":{}},{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"140775","name":"var_timelines","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"var_timelines","right":{}},{"input":{"schema":{"schema":[{"name":"font_size","type":"integer"},{"name":"in_animation","type":"string"},{"name":"in_animation_duratio","type":"integer"},{"name":"keyword_color","type":"string"},{"name":"keyword_font_size","type":"integer"},{"name":"keyword","type":"string"},{"name":"loop_animation","type":"string"},{"name":"loop_animation_durat","type":"integer"},{"name":"out_animation","type":"string"},{"name":"out_animation_durati","type":"integer"},{"name":"alignment","type":"integer"},{"name":"text_color","type":"string"},{"name":"line_spacing","type":"float"},{"name":"transform_y","type":"float"},{"name":"transform_x","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"140775","name":"var_otherInfo","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"var_otherInfo","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"视频文案中文数据归一化"},"outputs":[{"input":{},"name":"texts","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"timelines","required":false,"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list"},{"input":{},"name":"otherInfos","required":false,"schema":[{"name":"font_size","type":"integer"},{"name":"in_animation","type":"string"},{"name":"in_animation_duratio","type":"integer"},{"name":"keyword_color","type":"string"},{"name":"keyword_font_size","type":"integer"},{"name":"keyword","type":"string"},{"name":"loop_animation","type":"string"},{"name":"loop_animation_durat","type":"integer"},{"name":"out_animation","type":"string"},{"name":"out_animation_durati","type":"integer"},{"name":"alignment","type":"integer"},{"name":"text_color","type":"string"},{"name":"line_spacing","type":"float"},{"name":"transform_x","type":"float"},{"name":"transform_y","type":"float"},{"name":"line_spacing","type":"float"},{"name":"border_color","type":"string"}],"type":"object"},{"input":{},"name":"keywords","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"keyword_color","required":false,"type":"string"},{"input":{},"name":"keyword_font_size","required":false,"type":"integer"}],"settings":null,"version":""},"edges":null,"id":"165305","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":180,"y":12}},"type":"5"}],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"171939","name":"texts","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"}],"loopCount":{"type":"integer","value":{"content":"10","type":"literal"}},"loopType":"array","variableParameters":[{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"171939","name":"timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"var_timelines"},{"input":{"schema":{"schema":[{"name":"font_size","type":"integer"},{"name":"in_animation","type":"string"},{"name":"in_animation_duratio","type":"integer"},{"name":"keyword_color","type":"string"},{"name":"keyword_font_size","type":"integer"},{"name":"keyword","type":"string"},{"name":"loop_animation","type":"string"},{"name":"loop_animation_durat","type":"integer"},{"name":"out_animation","type":"string"},{"name":"out_animation_durati","type":"integer"},{"name":"alignment","type":"integer"},{"name":"text_color","type":"string"},{"name":"line_spacing","type":"float"},{"name":"transform_y","type":"float"},{"name":"transform_x","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"171939","name":"otherInfo","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"var_otherInfo"}]},"nodeMeta":{"description":"用于通过设定循环次数和逻辑，重复执行一系列任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","mainColor":"#00B2B2","subTitle":"循环","title":"循环处理中文字幕分镜"},"outputs":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"160748","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"infos_list"},{"input":{"schema":{"schema":[{"name":"font_size","type":"integer"},{"name":"in_animation","type":"string"},{"name":"in_animation_duratio","type":"integer"},{"name":"keyword_color","type":"string"},{"name":"keyword_font_size","type":"integer"},{"name":"keyword","type":"string"},{"name":"loop_animation","type":"string"},{"name":"loop_animation_durat","type":"integer"},{"name":"out_animation","type":"string"},{"name":"out_animation_durati","type":"integer"},{"name":"alignment","type":"integer"},{"name":"text_color","type":"string"},{"name":"line_spacing","type":"float"},{"name":"transform_x","type":"float"},{"name":"transform_y","type":"float"},{"name":"border_color","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"165305","name":"otherInfos","source":"block-output"},"rawMeta":{"type":6},"type":"ref"}},"name":"otherInfos_list"}]},"edges":[{"sourceNodeID":"165305","sourcePortID":"","targetNodeID":"160748"},{"sourceNodeID":"160748","sourcePortID":"","targetNodeID":"140775","targetPortID":"loop-function-inline-input"},{"sourceNodeID":"140775","sourcePortID":"loop-function-inline-output","targetNodeID":"165305"}],"id":"140775","meta":{"canvasPosition":{"x":1894.8887060917477,"y":441.62941642026163},"defaultCollapsed":false,"position":{"x":2304.8887060917477,"y":122.22941642026154}},"type":"21","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"{{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"schema":{"assistType":8,"type":"string"},"type":"list","value":{"content":["https://p26-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/158befdef9b7431bb65663b19a0c2776.MP3~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1775292164&x-signature=VtoLdftaP4PoVJTLP2QVsArOOR8%3D"],"rawMeta":{"fileName":["悬疑氛围音.MP3"],"type":111},"type":"literal"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"视频开场音效上传"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"549009","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1454.8996607703893,"y":-555.9705835797383}},"type":"15","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439158307","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"audio_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"特效音，eg：教堂，默认无","input":{},"name":"audio_effect","required":false,"type":"string"},{"description":"音频列表","input":{},"name":"mp3_urls","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间线","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"音量大小，0-10,默认1","input":{},"name":"volume","required":false,"type":"float"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"115803","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"mp3_urls"},{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"114173","name":"pre_wenan_timeline","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"float","value":{"content":0.7,"rawMeta":{"type":4},"type":"literal"}},"name":"volume"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据时间线制作音频数据","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:audio_infos","title":"开场音效信息"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"227967","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3324.8887060917486,"y":-555.9705835797383}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = {\n        pre_wenan_timeline: [params.timeline[0]]\n    };\n\n    return ret;\n}","functionID":"38x41pmtywoj8","inputParameters":[{"input":{"schema":{"schema":[{"description":"当前音频段的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"当前音频段的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"180432","name":"timelines","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"timeline","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"开场勾子文案时间线"},"outputs":[{"input":{},"name":"pre_wenan_timeline","required":false,"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"114173","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-715.1003392296097,"y":-555.9705835797383}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684515874","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"高","input":{},"name":"height","required":false,"type":"integer"},{"description":"关联创作者","input":{},"name":"user_id","required":false,"type":"integer"},{"description":"宽","input":{},"name":"width","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"integer","value":{"content":1080,"rawMeta":{"type":2},"type":"literal"}},"name":"height"},{"input":{"type":"integer","value":{"content":1920,"rawMeta":{"type":2},"type":"literal"}},"name":"width"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745954017&x-signature=oeKDt5C3yqpHRP2RnxGmjU9ooTY%3D","subtitle":"视频合成_剪映小助手:create_draft","title":"创建剪映视频草稿"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"tip_url","required":false,"type":"string"}]},"edges":null,"id":"131684","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4271.10512800036,"y":-177.9917368925382}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"教堂\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"175252","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_audios","title":"添加人声音频轨道"},"outputs":[{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"168391","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4279.058506220851,"y":668.9593436992566}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"教堂\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"605469","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_audios","title":"添加背景音乐轨道"},"outputs":[{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"317914","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4271.105128000359,"y":258.797100648603}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"243718","name":"zh_zimu_info","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"#000000","rawMeta":{"type":1},"type":"literal"}},"name":"border_color"},{"input":{"type":"string","value":{"content":" ","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":6,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"integer","value":{"content":0,"rawMeta":{"type":2},"type":"literal"}},"name":"style_text"},{"input":{"type":"float","value":{"content":-957,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745976209&x-signature=eZoliJWq4E%2FkkL%2FQogpYx0WFLMc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"添加视频字幕"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"150141","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":6136.6717462126035,"y":-121.7696848650341}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"教堂\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"227967","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_audios","title":"添加开场音效轨道"},"outputs":[{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"131771","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4870.243294285027,"y":689.8328328594669}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"169698","name":"pre_wenan","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"pre_wenan","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"4096","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"豆包·1.5·Pro·32k","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1737521813","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"勾子文案：{{pre_wenan}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"勾子文案 ➜ 花字（含视觉锤定位）\n\n角色：你是一名短视频内容策划专家，擅长从剧情钩子文案中提炼出视觉锤级别的“花字”。你提取的花字需要强视觉冲击、强情绪浓度、强猎奇诱导。\n\n任务目标：请根据用户提供的[勾子文案]，提取一个极简的“花字”作为视觉锤，用于短视频画面呈现。该花字将强化观众第一眼的注意力，是文案核心概念的“视觉符号”。\n\n什么是视觉锤？\n视觉锤是指观众在看到视频一瞬间被钉住的关键词，通常是：\n- 暴力、死亡、异象（如屠城、活埋、抄斩）\n- 违禁、怪诞、宗教、性别议题（如守寡、镜禁、祭子）\n- 情绪冲击强的具象名词（如冤魂、毒母、换子）\n\n生成规则：\n- 仅输出1~2个字的中文花字\n- 必须是具象名词或高情绪词，避免抽象词或动词\n- 优先选择最能激起猎奇/惊悚/反常感的核心词汇\n- 花字就是视觉锤，必须具备视觉想象力与爆点属性\n\n输出格式：\n{输出花字}\n\n限制条件：\n- 不得使用“真的”“有没有”等语气词\n- 不得超过2个字\n- 不要解释或复述文案内容，仅输出最合适的一个花字\n\n✅ 示例输入输出：\n输入：\n勾子文案：古代屠城 真的没人能活下来吗？\n输出：\n屠城\n\n输入：\n勾子文案：为了诅咒丈夫，她剜下亲生孩子的心\n输出：\n剜心","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"开场花字生成"},"outputs":[{"description":"花字","input":{},"name":"huazi","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"114067","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1454.8996607703893,"y":-821.3705835797384}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"文字大小","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"对应剪映的入场动画名字，多个动画请用英文|分割，比如：飞入|放大","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"关键词颜色","input":{},"name":"keyword_color","required":false,"type":"string"},{"description":"关键词字大小","input":{},"name":"keyword_font_size","required":false,"type":"integer"},{"description":"入场动画时长","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"文本里面的重点词列表","input":{},"name":"keywords","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"对应剪映的循环动画名字，多个动画请用英文|分割，比如：扫光|晃动","input":{},"name":"loop_animation","required":false,"type":"string"},{"description":"循环动画时长","input":{},"name":"loop_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的出场动画名字，多个动画请用英文|分割，比如：消散|闭幕","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"出场动画时长","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"文本列表","input":{},"name":"texts","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"时间节点，只接收结构：[{\"start\":0,\"end\":4612}]，一般从audio_timeline节点的输出获取","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"844008","name":"texts","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"844008","name":"timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"string","value":{"content":{"blockID":"844008","name":"otherInfos.in_animation","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"in_animation"},{"input":{"type":"integer","value":{"content":{"blockID":"844008","name":"otherInfos.in_animation_duratio","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"in_animation_duration"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/afd2da27eeeb41c2aaadbb7e224ff9ca~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745974125&x-signature=kiSVNIdcDVmZP4uYua5hey9aZQY%3D","subtitle":"剪映小助手数据生成器:caption_infos","title":"处理开场花字分镜"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"397123","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3324.8887060917486,"y":-807.3705835797384}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    function addSpaces(str) {\n        const mid = Math.floor(str.length / 2);\n        return str.slice(0, mid) + '     ' + str.slice(mid);\n      }\n\n    const ret = {\n        \"texts\": [addSpaces(params.huazi)],\n        \"timelines\": params.pre_wenan_timeline, // 输出一个数组\n        \"otherInfos\": {\n            in_animation: \"慢速放大\",\n            in_animation_duratio: params.pre_wenan_timeline[0].end,\n            text_color: '#ffde00',\n            border_color: '#000000',\n         },\n    };\n\n    return ret;\n}","functionID":"38x3wgei31dtd","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"114067","name":"huazi","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"huazi","right":{}},{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"114173","name":"pre_wenan_timeline","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"pre_wenan_timeline","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"开场花字数据归一化"},"outputs":[{"input":{},"name":"texts","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"timelines","required":false,"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list"},{"input":{},"name":"otherInfos","required":false,"schema":[{"name":"font_size","type":"integer"},{"name":"in_animation","type":"string"},{"name":"in_animation_duratio","type":"integer"},{"name":"keyword_color","type":"string"},{"name":"keyword_font_size","type":"integer"},{"name":"keyword","type":"string"},{"name":"loop_animation","type":"string"},{"name":"loop_animation_durat","type":"integer"},{"name":"out_animation","type":"string"},{"name":"out_animation_durati","type":"integer"},{"name":"alignment","type":"integer"},{"name":"text_color","type":"string"},{"name":"line_spacing","type":"float"},{"name":"transform_x","type":"float"},{"name":"transform_y","type":"float"},{"name":"line_spacing","type":"float"},{"name":"border_color","type":"string"},{"name":"font","type":"string"}],"type":"object"},{"input":{},"name":"keywords","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"keyword_color","required":false,"type":"string"},{"input":{},"name":"keyword_font_size","required":false,"type":"integer"}],"settings":null,"version":""},"edges":null,"id":"844008","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2304.8887060917477,"y":-795.3705835797384}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"397123","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"844008","name":"otherInfos.border_color","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"border_color"},{"input":{"type":"string","value":{"content":"仓耳酷黑","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":15,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":1.65,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":1.65,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"integer","value":{"content":0,"rawMeta":{"type":2},"type":"literal"}},"name":"style_text"},{"input":{"type":"string","value":{"content":{"blockID":"844008","name":"otherInfos.text_color","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text_color"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745976209&x-signature=eZoliJWq4E%2FkkL%2FQogpYx0WFLMc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"添加开场花字"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"423829","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":5486.705180794769,"y":-615.2743637731248}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109802306060299","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"str_to_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"549009","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"obj"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"字符转列表","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:str_to_list","title":"开场音效数据归一化"},"outputs":[{"name":"infos","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"115803","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2304.8887060917477,"y":-555.9705835797383}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":null,"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"115123","name":"scene_img_prompt","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"prompt","right":{}}],"modelSetting":{"custom_ratio":{"height":576,"width":1024},"ddim_steps":25,"images_reference":{},"model":8,"ratio":0},"prompt":{"negative_prompt":"anime, cartoon, stylized, chibi, round face, big eyes, exaggerated head, simplified features, smooth skin, perfect face, polished armor, Pixar, cute, 3D, CGI, illustration, vector style, glossy surface, fantasy soft render","prompt":"A serious and gritty Chinese ink-brush graphic novel style. Thick, rugged black linework with strong cross-hatching and deep shadows. Faces appear weathered and realistic, with expressive emotions like fear, exhaustion, and anger. Characters follow natural human proportions — no exaggeration or stylization. The background features a sepia-black palette with cracked walls, smoky air, and candlelight casting dramatic shadows. Inspired by traditional ink drawings and emotionally intense historical storytelling. Rendered in a raw and grounded artistic style.\n---\n{{prompt}}    "},"references":[],"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","title":"开场场景图片生成"},"outputs":[{"assistType":2,"input":{},"name":"data","required":false,"type":"string"},{"input":{},"name":"msg","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"157306","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":664.8996607703898,"y":-117.17058357973855}},"type":"16","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"127547","name":"title","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"title","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"169698","name":"pre_wenan","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"pre_wenan","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"1024","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"DeepSeek-V3-0324","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1742989917","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"选题：{{title}}\n字幕：{{pre_wenan}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"你是一个擅长挖掘短视频内容爆点的短视频视觉脚本策划师，擅长将短视频的【选题】和【字幕片段】深度分析，抓取能够引发用户强烈情绪共鸣的画面视角，并最终输出对应的：\n\n- `scene_img_prompt`: 反映整体场景氛围、情绪张力与背景环境的AI生成提示词  \n- `role_img_prompt`: 聚焦于主题角色本身的视觉姿态、情绪表达与构图重点\n\n---\n\n### 【任务目标】  \n从【选题】与【字幕】中提炼“最令普通人好奇、恐惧、愤怒、震惊”的冲突点，用**视觉手段放大“人与人之间的张力”或“弱者 vs 强者”的压迫感**，通过强氛围感与主视角冲击制造点击欲望。\n\n---\n\n### ✅ 核心方法论（记住这个 AI最听话）\n\n> **构图思维是：我是一个普通人，我在目睹/窥视/被支配**\n\n- **反转视角**：不是“女子哭”，而是“被官兵包围、抬头绝望看镜头的女子”\n- **心理沉浸**：不是“士兵杀人”，而是“我从桌下看到士兵提刀靠近”\n- **猎奇暴力**：不是“屠城很惨”，而是“街头堆满尸体、一个小孩独自站着看着你”\n- **地位差异**：权力感 vs 无力感，刀/脚/高坐位/低仰视角统统用上\n\n---\n\n### ✅ 输出格式（注意：**只输出提示词，不要文字说明**）\n\n```json\n{\n  \"scene_img_prompt\": \"（AI生成整个场景的提示词）\",\n  \"role_img_prompt\": \"（AI生成角色特写的提示词）\"\n}\n```\n\n---\n### ✅ 你的输出必须满足以下要求：\n\n#### ✅ scene_img_prompt 要素：\n- 明确描述**环境场景、气氛情绪、事件冲突**\n- 包含：古代东方幻想背景（realistic oriental fantasy style）\n- 场景必须真实可信，不能包含现代元素\n- 强调高对比度光影效果与主次分明的构图\n- 使用镜头语言描述视角（如 from behind / top-down / wide view）\n\n✅ 示例：\n> inside a burning ancient city, soldiers chasing civilians, corpses on the ground, firelight and smoke, viewed from behind a wooden fence, high contrast lighting, realistic oriental fantasy style\n\n---\n\n#### ✅ role_img_prompt 要素：\n- 强调**角色居中、占比大、有冲击力**\n- 明确身份、动作、情绪、构图位置、视角、光影\n- 使用以下关键词控制构图：\n  - “standing at the absolute center”\n  - “filling most of the frame”\n  - “oversized and imposing presence”\n  - “from a low-angle close-up view”\n\n✅ 示例：\n> a bloodstained general gripping a sword, staring down coldly, standing at the absolute center, filling most of the frame, oversized and dominant, from a low-angle close-up view, dramatic lighting, realistic oriental fantasy style\n\n---\n\n### ✅ 风格限制（与之前一致，强调执行落地）：\n\n- 画风：`realistic oriental fantasy style`\n- 禁止卡通/现代/西方服饰与物品\n- 主体突出，背景低饱和，光源局部照明（火光、月光）\n- \n\n---\n\n### ✅ 输入格式\n\n我将提供如下数据：\n\n```\n选题：古代屠城真的没人能活吗？  \n字幕：古代屠城真的没人能逃掉吗？  \n```\n\n请根据内容，**用观众最想看到的猎奇、压迫、反转心理画面**生成：\n\n```json\n{\n  \"scene_img_prompt\": \"...\",\n  \"role_img_prompt\": \"...\"\n}\n```\n\n---\n\n## ✅ BONUS 加持建议\n你可以默认套用以下类型的“强冲击构图法”，让AI图每次都更炸：\n\n| 方法论类型         | 示例关键术语 |\n|------------------|--------------|\n| 权力压迫          | low-angle view, foot stepping on, kneeling subject |\n| 窥视与恐惧        | seen through a crack, from under the bed, behind the curtain |\n| 群体孤立          | a single person surrounded by enemies, standing alone |\n| 行刑与威慑        | gallows in background, executioner holding axe, heads on ground |\n| 情绪崩溃瞬间      | screaming face close-up, tears and dirt on face |\n| 局部特写冲击      | only hands gripping a bloodstained robe, feet dragging in dust |","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"开场图片提示词生成"},"outputs":[{"description":"场景画面生成提示词，无任何额外描述","input":{},"name":"scene_img_prompt","required":false,"type":"string"},{"description":"角色画面生成提示词，无任何额外描述","input":{},"name":"role_img_prompt","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"115123","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-255.10033922961065,"y":-242.87058357973837}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"{{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"116861","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"开场角色图像处理成字符串"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"168634","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1454.8996607703893,"y":-342.57058357973824}},"type":"15","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = {\n        \"imgs\": [params.role_img], \n        \"timelines\": params.pre_wenan_timeline, \n        \"otherInfos\": {}\n    };\n\n    return ret;\n}","functionID":"38x3udscvgwxj","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"168634","name":"output","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"role_img","right":{}},{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"114173","name":"pre_wenan_timeline","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"pre_wenan_timeline","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"开场角色配图统一数据结构"},"outputs":[{"input":{},"name":"imgs","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"timelines","required":false,"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list"},{"input":{},"name":"otherInfos","required":false,"schema":[{"name":"in_animation","type":"string"},{"name":"in_animation_duratio","type":"integer"},{"name":"loop_animation","type":"string"},{"name":"loop_animation_durat","type":"integer"},{"name":"out_animation","type":"string"},{"name":"out_animation_durati","type":"integer"},{"name":"alignment","type":"integer"},{"name":"transform_x","type":"float"},{"name":"transform_y","type":"float"},{"name":"border_color","type":"string"}],"type":"object"}],"settings":null,"version":""},"edges":null,"id":"287201","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2304.8887060917477,"y":-342.57058357973824}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = JSON.stringify([\n        {\n            \"image_url\": params.imgs[0],\n            \"width\": 1024,\n            \"height\": 1024,\n            ...params.timeline[0]\n        }\n    ])\n\n    return { infos: ret };\n}","functionID":"38x3x9k1jfx6p","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"276651","name":"imgs","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"imgs","right":{}},{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"276651","name":"timelines","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"timeline","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"处理开场场景配图info"},"outputs":[{"input":{},"name":"infos","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"501302","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3324.8887060917486,"y":-91.17058357973855}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = JSON.stringify([\n        {\n            \"image_url\": params.imgs[0],\n            \"width\": 1024,\n            \"height\": 1024,\n            \"in_animation\": params.in_animation,\n            ...params.timeline[0]\n        }\n    ])\n\n    return { infos: ret };\n}","functionID":"38x3zjji4m3gg","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"287201","name":"imgs","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"imgs","right":{}},{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"287201","name":"timelines","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"timeline","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"287201","name":"otherInfos.in_animation","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"in_animation","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"处理开场角色配图info"},"outputs":[{"input":{},"name":"infos","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"024922","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3324.8887060917486,"y":-342.57058357973824}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"{{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"157306","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"开场场景图像处理成字符串"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"832596","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1454.8996607703893,"y":-91.17058357973855}},"type":"15","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = {\n        \"imgs\": [params.role_img], \n        \"timelines\": params.pre_wenan_timeline, \n        \"otherInfos\": {}\n    };\n\n    return ret;\n}","functionID":"38x43p7zy35w1","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"832596","name":"output","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"role_img","right":{}},{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"114173","name":"pre_wenan_timeline","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"pre_wenan_timeline","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"开场场景配图统一数据结构"},"outputs":[{"input":{},"name":"imgs","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"timelines","required":false,"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list"},{"input":{},"name":"otherInfos","required":false,"schema":[{"name":"in_animation","type":"string"},{"name":"in_animation_duratio","type":"integer"},{"name":"loop_animation","type":"string"},{"name":"loop_animation_durat","type":"integer"},{"name":"out_animation","type":"string"},{"name":"out_animation_durati","type":"integer"},{"name":"alignment","type":"integer"},{"name":"transform_x","type":"float"},{"name":"transform_y","type":"float"},{"name":"border_color","type":"string"}],"type":"object"}],"settings":null,"version":""},"edges":null,"id":"276651","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2304.8887060917477,"y":-91.17058357973855}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"501302","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1746108622&x-signature=tpYIwk%2F06hNFfKCDRlvw%2FnqZe%2BE%3D","subtitle":"视频合成_剪映小助手:add_images","title":"添加开场场景图片"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"291561","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4870.243294285027,"y":258.797100648603}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"024922","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1746108622&x-signature=tpYIwk%2F06hNFfKCDRlvw%2FnqZe%2BE%3D","subtitle":"视频合成_剪映小助手:add_images","title":"添加开场角色图片"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"421761","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4825.098067812875,"y":-177.9917368925382}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7465608338500452404","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_keyframes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"184820","name":"keyframes_infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"keyframes"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"添加关键帧","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_keyframes","title":"添加开场角色关键帧"},"outputs":[{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"100305","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4664.385289950854,"y":-953.1004652775939}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7478102722533834778","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"keyframes_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":"UNIFORM_SCALE","rawMeta":{"type":1},"type":"literal"}},"name":"ctype"},{"input":{"type":"string","value":{"content":"0|5|100","rawMeta":{"type":1},"type":"literal"}},"name":"offsets"},{"input":{"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"421761","name":"segment_infos","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"segment_infos"},{"input":{"type":"string","value":{"content":"4|1.1|1","rawMeta":{"type":1},"type":"literal"}},"name":"values"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"关键帧数据生成器","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:keyframes_infos","title":"开场角色关键帧信息"},"outputs":[{"description":"放入add_frames节点","name":"keyframes_infos","required":false,"type":"string"}]},"edges":null,"id":"184820","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":4744.741678881865,"y":-578.2867850942341}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":null,"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"115123","name":"role_img_prompt","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"prompt","right":{}}],"modelSetting":{"custom_ratio":{"height":576,"width":1024},"ddim_steps":25,"images_reference":{},"model":8,"ratio":0},"prompt":{"negative_prompt":"anime, cartoon, stylized, chibi, round face, big eyes, exaggerated head, simplified features, smooth skin, perfect face, polished armor, Pixar, cute, 3D, CGI, illustration, vector style, glossy surface, fantasy soft render","prompt":"A serious and gritty Chinese ink-brush graphic novel style. Thick, rugged black linework with strong cross-hatching and deep shadows. Faces appear weathered and realistic, with expressive emotions like fear, exhaustion, and anger. Characters follow natural human proportions — no exaggeration or stylization. The background features a sepia-black palette with cracked walls, smoky air, and candlelight casting dramatic shadows. Inspired by traditional ink drawings and emotionally intense historical storytelling. Rendered in a raw and grounded artistic style.\n---\n{{prompt}}"},"references":[],"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","title":"开场角色图片生成"},"outputs":[{"assistType":2,"input":{},"name":"data","required":false,"type":"string"},{"input":{},"name":"msg","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"079456","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":204.8996607703898,"y":-368.57058357973824}},"type":"16","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7438919188246429731","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"cutout","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7438919188246413347","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"抠图","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"079456","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"url"},{"input":{"type":"string","value":{"content":"0","type":"literal"}},"name":"only_mask"},{"input":{"type":"string","value":{"content":"0","type":"literal"}},"name":"output_mode"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"保留图片前景主体，输出透明背景(.png)","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-plugin-cutout-v2.jpg","subtitle":"抠图:cutout","title":"开场角色抠图"},"outputs":[{"assistType":2,"description":"透明背景图，在输出模式为透明背景时生效","name":"data","required":false,"type":"string"},{"description":"抠图区域蒙板矢量图，在输出模式为蒙版矢量图时生效","name":"mask","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"116861","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":664.8996607703898,"y":-354.57058357973824}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"},{"name":"content","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"101841","name":"wenanTimeline","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"wenanTimeline","right":{}}],"llmParam":[{"input":{"type":"string","value":{"content":"default_val","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"float","value":{"content":"1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"12288","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"豆包·1.5·Pro·256k","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1739350359","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"文案时间线:{{wenanTimeline}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"你是一名专业的“分镜设计师”AI助手，专精于将短视频字幕转换为具有**东方厚重水墨风格**的 AI 分镜提示词。你所生成的画面应具备深刻情绪、真实结构、低饱和背景与强对比光影，整体风格接近古代木刻画、黑黄主调的历史图像小说。\n\n根据我提供的字幕片段（含 content, start, end），合并多句（2-5句）表达同一情绪或画面内容的片段，重新划分图像节奏，并为每一段配图设计一条完整的生图提示词。\n---\n\n**输入：**  \n\n你将收到一个按时间排序的字幕列表（JSON 数组），每个元素包含：\n- `content`: 字幕文本  \n- `start`: 起始时间（毫秒）  \n- `end`: 结束时间（毫秒）  \n\n例如：\n\n```json\n[\n  { \"content\": \"她听见门外有人靠近。\", \"start\": 1500000, \"end\": 1800000 },\n  { \"content\": \"脚步声越来越近。\", \"start\": 1800000, \"end\": 2100000 }\n]\n```\n\n---\n\n**输出：**  \n你需要根据输入字幕合并结果，输出一个 JSON 数组，每个元素为一个镜头段落的描述对象，包含以下字段：\n\n- `start`: 合并后镜头段落的起始时间（毫秒）  \n- `end`: 合并后镜头段落的结束时间（毫秒）  \n- `img_prompt`: 针对该镜头段落生成的 AI 图像提示词（英文）\n\n---\n\n**img_prompt 描述要求（英文输出）：**  \n每个 `img_prompt` 必须包括以下内容（逗号分隔）：\n\n1. **角色身份**（如 *a frightened young woman*、*a battle-hardened general*）  \n2. **姿态与动作**（如 *kneeling and sobbing*、*gripping a bloody blade*）  \n3. **情绪表现**（如 *on the verge of collapse*、*eyes wide in horror*）  \n4. **构图位置**（如 *centered in frame*、*in the foreground*）  \n5. **镜头视角**（如 *low angle close-up*、*from over-the-shoulder*）  \n6. **环境背景**（如 *inside a ruined tea house*、*at the city gate under yellow sky*）  \n7. **光影渲染**（如 *flickering candlelight casting harsh shadows*、*sepia haze in background*）  \n8. **统一风格锚定（必须包含）**：  \n   - *gritty ink-brush style*  \n   - *thick jagged linework*  \n   - *sepia-black tone*  \n   - *dramatic chiaroscuro*  \n   - *realistic oriental fantasy style*\n\n---\n\n**场景与画面要求：**\n\n- 主角始终居于画面中央，占据主要视觉空间。\n- 场景中可加入配角或远景人物（如士兵、百姓、尸体等），但不能喧宾夺主。\n- 场景必须符合东方古代幻想设定，禁止现代建筑、现代人物服饰与物品。\n- 所有光源均应为自然光（火光、烛光、月光），避免人工光源。\n- 色调整体偏灰黄低饱和，人物光影强烈反差，具有“戏剧性”与“压抑感”。\n\n---\n\n**语言与格式要求：**\n\n- 输出中每个 `img_prompt` 字段为单句英文提示词，由逗号连接多个描写短语，格式紧凑清晰。\n- 使用生动、富有画面感的英文词汇，避免使用抽象词或无意义连接词。\n- 输出 JSON 结构严格遵循以下格式：\n\n```json\n[\n  {\n    \"start\": 1500000,\n    \"end\": 2100000,\n    \"img_prompt\": \"a terrified woman kneeling behind a wooden screen, peeking through a crack, candlelight flickering on her twisted face, expression exaggerated in fear, centered in frame, background shows shadows of approaching soldiers, seen from a low side angle, dramatic light and shadow, gritty ink-brush style, thick jagged linework, sepia-black tone, dramatic chiaroscuro, realistic oriental fantasy style\"\n  }\n]\n```\n\n---\n\n**完成后，仅输出最终的 JSON 结果。**","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"生成视频配图画面"},"outputs":[{"description":"视觉脚本输出数组，其中每一项代表一张画面","input":{},"name":"imgsTimeline","required":false,"schema":{"schema":[{"description":"当前配图段落的开始时间戳\n\n取值规则：你合并的那一段中，第一句字幕的 start 值","name":"start","type":"float"},{"description":"当前配图段落的结束时间戳\n\n取值规则：你合并的那一段中，最后一句字幕的 end 值","name":"end","type":"float"},{"description":"用于AI生成画面的文字提示词，完整描述画面中应包含的内容","name":"img_prompt","type":"string"}],"type":"object"},"type":"list"}],"settings":null,"version":"3"},"edges":null,"id":"130809","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":664.8996607703898,"y":746.0294164202617}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"109434","name":"imgsTimeline.img_prompt","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"prompt"}],"modelSetting":{"custom_ratio":{"height":576,"width":1024},"ddim_steps":40,"model":8},"prompt":{"negative_prompt":"anime, cartoon, stylized, chibi, round face, big eyes, exaggerated head, simplified features, smooth skin, perfect face, polished armor, Pixar, cute, 3D, CGI, illustration, vector style, glossy surface, fantasy soft render","prompt":"A serious and gritty Chinese ink-brush graphic novel style. Thick, rugged black linework with strong cross-hatching and deep shadows. Faces appear weathered and realistic, with expressive emotions like fear, exhaustion, and anger. Characters follow natural human proportions — no exaggeration or stylization. The background features a sepia-black palette with cracked walls, smoky air, and candl elight casting dramatic shadows. Inspired by traditional ink drawings and emotionally intense historical storytelling. Rendered in a raw and grounded artistic style.\n--你的具体画面描述这里--\n{{prompt}}"},"references":[],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":60000}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","mainColor":"#FF4DC3","subTitle":"图像生成","title":"图像生成"},"outputs":[{"assistType":2,"name":"data","type":"string"},{"name":"msg","type":"string"}]},"edges":null,"id":"749655","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":180,"y":0}},"type":"16"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"{{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"749655","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"图像处理成字符串"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"501264","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":640,"y":26}},"type":"15"}],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"schema":[{"description":"当前配图段落的开始时间戳\n\n取值规则：你合并的那一段中，第一句字幕的 start 值","name":"start","type":"float"},{"description":"当前配图段落的结束时间戳\n\n取值规则：你合并的那一段中，最后一句字幕的 end 值","name":"end","type":"float"},{"description":"用于AI生成画面的文字提示词，完整描述画面中应包含的内容","name":"img_prompt","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"130809","name":"imgsTimeline","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"imgsTimeline"}],"loopCount":{"type":"integer","value":{"content":"10","type":"literal"}},"loopType":"array","variableParameters":[]},"nodeMeta":{"description":"用于通过设定循环次数和逻辑，重复执行一系列任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","mainColor":"#00B2B2","subTitle":"循环","title":"循环生成正文配图"},"outputs":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"501264","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"Imgs"}]},"edges":[{"sourceNodeID":"109434","sourcePortID":"loop-function-inline-output","targetNodeID":"749655"},{"sourceNodeID":"749655","sourcePortID":"","targetNodeID":"501264"},{"sourceNodeID":"501264","sourcePortID":"","targetNodeID":"109434","targetPortID":"loop-function-inline-input"}],"id":"109434","meta":{"canvasPosition":{"x":1044.8996607703898,"y":1078.4294164202613},"defaultCollapsed":false,"position":{"x":1454.8996607703893,"y":759.0294164202617}},"type":"21","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"354613","name":"imgsDesc.img_prompt","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"img_desc","right":{}}],"llmParam":[{"input":{"type":"string","value":{"content":"creative","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"float","value":{"content":"1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"topP","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"integer","value":{"content":"1024","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"1706077826","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"豆包·工具调用","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"string","value":{"content":"{{img_desc}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"根据图片描述的情绪氛围、内容节奏、构图特点和画面动静感，从以下选项中选择最匹配的进场特效，仅返回一个特效名称，不含任何解释：展开、横向模糊、拼图、渐显、动感放大、向上滑动、轻微放大、缩小","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":" 图片进场特效选择"},"outputs":[{"description":"可选项为：展开、横向模糊、拼图、渐显、动感放大、向上滑动、轻微放大、缩小","input":{},"name":"in_animation","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"147995","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":180,"y":0}},"type":"3"},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = {\n        \"imgs\": [params.var_Imgs[params.idx]], \n        \"timelines\": [{\n            start: params.currImgTimeline.start,\n            end: params.currImgTimeline.end,\n        }], \n        \"otherInfos\": {\n            in_animation: params.in_animation\n        }\n    };\n\n    return ret;\n}","functionID":"38x41daa16myl","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"147995","name":"in_animation","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"in_animation","right":{}},{"input":{"type":"integer","value":{"content":{"blockID":"354613","name":"index","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"ref"}},"left":{},"name":"idx","right":{}},{"input":{"schema":[{"description":"当前配图段落的开始时间戳\n\n取值规则：你合并的那一段中，第一句字幕的 start 值","name":"start","type":"float"},{"description":"当前配图段落的结束时间戳\n\n取值规则：你合并的那一段中，最后一句字幕的 end 值","name":"end","type":"float"},{"description":"用于AI生成画面的文字提示词，完整描述画面中应包含的内容","name":"img_prompt","type":"string"}],"type":"object","value":{"content":{"blockID":"354613","name":"imgsDesc","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":6},"type":"ref"}},"left":{},"name":"currImgTimeline","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"354613","name":"var_Imgs","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"var_Imgs","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"视频配图统一数据结构"},"outputs":[{"input":{},"name":"imgs","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"timelines","required":false,"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list"},{"input":{},"name":"otherInfos","required":false,"schema":[{"name":"in_animation","type":"string"},{"name":"in_animation_duratio","type":"integer"},{"name":"loop_animation","type":"string"},{"name":"loop_animation_durat","type":"integer"},{"name":"out_animation","type":"string"},{"name":"out_animation_durati","type":"integer"},{"name":"alignment","type":"integer"},{"name":"transform_x","type":"float"},{"name":"transform_y","type":"float"},{"name":"border_color","type":"string"}],"type":"object"}],"settings":null,"version":""},"edges":null,"id":"904178","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":640,"y":26}},"type":"5"},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = JSON.stringify([\n        {\n            \"image_url\": params.imgs[0],\n            \"width\": 1024,\n            \"height\": 1024,\n            \"in_animation\": params.in_animation,\n            ...params.timeline[0]\n        }\n    ])\n\n    return { infos: ret };\n}","functionID":"38x3x7pc67kiw","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"904178","name":"imgs","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"imgs","right":{}},{"input":{"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"904178","name":"timelines","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"timeline","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"904178","name":"otherInfos.in_animation","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"in_animation","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"处理配图Infos"},"outputs":[{"input":{},"name":"infos","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"388835","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1100,"y":26}},"type":"5"}],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"schema":[{"description":"当前配图段落的开始时间戳\n\n取值规则：你合并的那一段中，第一句字幕的 start 值","name":"start","type":"float"},{"description":"当前配图段落的结束时间戳\n\n取值规则：你合并的那一段中，最后一句字幕的 end 值","name":"end","type":"float"},{"description":"用于AI生成画面的文字提示词，完整描述画面中应包含的内容","name":"img_prompt","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"130809","name":"imgsTimeline","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"imgsDesc"}],"loopCount":{"type":"integer","value":{"content":"10","type":"literal"}},"loopType":"array","variableParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"109434","name":"Imgs","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"var_Imgs"}]},"nodeMeta":{"description":"用于通过设定循环次数和逻辑，重复执行一系列任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","mainColor":"#00B2B2","subTitle":"循环","title":"循环处理配图分镜"},"outputs":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"388835","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"infos"}]},"edges":[{"sourceNodeID":"354613","sourcePortID":"loop-function-inline-output","targetNodeID":"147995"},{"sourceNodeID":"147995","sourcePortID":"","targetNodeID":"904178"},{"sourceNodeID":"904178","sourcePortID":"","targetNodeID":"388835"},{"sourceNodeID":"388835","sourcePortID":"","targetNodeID":"354613","targetPortID":"loop-function-inline-input"}],"id":"354613","meta":{"canvasPosition":{"x":2188.4295880493846,"y":1119.6067891585024},"defaultCollapsed":false,"position":{"x":2304.8887060917477,"y":759.0294164202617}},"type":"21","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = {\n        \"wenanTimeline\": params.wenanTimeline.slice(1), // 拼接两次入参 input 的值\n    };\n\n    return ret;\n}","functionID":"38x41ek5mrj2v","inputParameters":[{"input":{"schema":{"schema":[{"description":"文案","name":"content","required":true,"type":"string"},{"description":"文案结束时间","name":"end","required":true,"type":"float"},{"description":"文案开始时间","name":"start","required":true,"type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"121063","name":"wenanTimeline","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"wenanTimeline","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"移除开头勾子的文案时间线"},"outputs":[{"input":{},"name":"wenanTimeline","required":false,"schema":{"schema":[{"name":"start","type":"float"},{"name":"end","type":"float"},{"name":"content","type":"string"}],"type":"object"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"101841","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":204.8996607703898,"y":772.0294164202617}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"170813","name":"img_info","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":1.2,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":1.2,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面可以加入交流群","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1746108622&x-signature=tpYIwk%2F06hNFfKCDRlvw%2FnqZe%2BE%3D","subtitle":"视频合成_剪映小助手:add_images","title":"批量添加正文配图"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"939698","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":5428.212923207788,"y":-246.70757825948743}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7478102722533834778","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"keyframes_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":"UNIFORM_SCALE","rawMeta":{"type":1},"type":"literal"}},"name":"ctype"},{"input":{"type":"string","value":{"content":"5|100","rawMeta":{"type":1},"type":"literal"}},"name":"offsets"},{"input":{"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"939698","name":"segment_infos","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"segment_infos"},{"input":{"type":"string","value":{"content":"1.5|1.1","rawMeta":{"type":1},"type":"literal"}},"name":"values"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"关键帧数据生成器","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:keyframes_infos","title":"批量处理正文配图关键帧信息"},"outputs":[{"description":"放入add_frames节点","name":"keyframes_infos","required":false,"type":"string"}]},"edges":null,"id":"441738","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":5428.212923207788,"y":158.75934369925636}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7465608338500452404","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_keyframes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"131684","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"441738","name":"keyframes_infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"keyframes"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"添加关键帧","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_keyframes","title":"批量添加正文配图关键帧"},"outputs":[{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"206773","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":5408.055275414527,"y":727.3142008778029}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = {\n        \"zh_zimu_info\": params.infos_list.map(item => JSON.parse(item).at(0))\n    };\n\n    return ret;\n}","functionID":"38x43q2cwyuce","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"140775","name":"infos_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"infos_list","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"处理中文字幕同一轨道信息"},"outputs":[{"input":{},"name":"zh_zimu_info","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"243718","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3324.8887060917486,"y":135.22941642026154}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    // 构建输出对象\n    const ret = {\n        \"img_info\": params.infos_list.map(item => JSON.parse(item).at(0))\n    };\n\n    return ret;\n}","functionID":"38x3upgcnd79b","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"354613","name":"infos","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"infos_list","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"处理图片同一轨道信息"},"outputs":[{"input":{},"name":"img_info","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"170813","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3324.8887060917486,"y":772.0294164202617}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7495338880829390888","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"audio_timelines","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7495336137377153039","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_速创小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"117592","name":"links","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"links"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"视频合成-速创猫小工具","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/3247da2db640408cb195e3c2fd54f372~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747740120&x-signature=2GBhs5zmHuP8lzsmpHeCl9X6V5g%3D","subtitle":"视频合成_速创小助手:audio_timelines","title":"提取文案音频时间线"},"outputs":[{"description":"音频链接数组","name":"links","required":true,"schema":{"type":"string"},"type":"list"},{"description":"音频时间线数组","name":"timelines","required":true,"schema":{"schema":[{"description":"当前音频段的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"当前音频段的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"总时间线","name":"all_timelines","required":true,"schema":{"schema":[{"description":"最后一段音频的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"第一段音频的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"错误信息","name":"error","required":false,"type":"string"}]},"edges":null,"id":"180432","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-956.604648933413,"y":454.6736852029756}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7497679985252057114","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"text_empty_removal","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7495336137377153039","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_速创小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"111554","name":"output","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"text"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"视频合成-速创猫小工具","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/d6e39e163e0a4271862bb94edd9b8593~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748328652&x-signature=VCRsOV2FTLua%2BeITUViWcSbzptc%3D","subtitle":"视频合成_速创小助手:text_empty_removal","title":"移除空文案text_empty_removal"},"outputs":[{"description":"清洗后的字符串数组","name":"wenan","required":true,"schema":{"type":"string"},"type":"list"},{"description":"错误信息，正常时为空字符串","name":"error","required":true,"type":"string"}]},"edges":null,"id":"108573","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1790.6083661254688,"y":-45.029884797063175}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7497679985252040730","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"audio_link_collector","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7495336137377153039","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_速创小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"schema":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"112744","name":"outputList","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"outputList"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"视频合成-速创猫小工具","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/d6e39e163e0a4271862bb94edd9b8593~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748328692&x-signature=4n5lkC%2BEimAR3mVKwUOZDAAVd7Y%3D","subtitle":"视频合成_速创小助手:audio_link_collector","title":"提取语音URL为列表audio_link_collector"},"outputs":[{"description":"错误信息；正常为空字符串","name":"error","required":true,"type":"string"},{"description":"提取出的链接数组","name":"links","required":true,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"117592","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-814.5451416267115,"y":-17.84692594270126}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7497679985252089882","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"wenan_timeline_range_merge","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7495336137377153039","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_速创小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"schema":[{"description":"当前音频段的结束时间（单位：微秒）","name":"end","required":true,"type":"integer"},{"description":"当前音频段的开始时间（单位：微秒）","name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"180432","name":"timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"148399","name":"wenan","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"wenan"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"视频合成-速创猫小工具","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/d6e39e163e0a4271862bb94edd9b8593~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748328791&x-signature=Z9cds9MZjUea2xb8PAyI3DTau5U%3D","subtitle":"视频合成_速创小助手:wenan_timeline_range_merge","title":"文案合并时间线wenan_timeline_range_merge"},"outputs":[{"description":"错误信息字符串，正常时为空字符串","name":"error","required":false,"type":"string"},{"description":"合并后的文案时间线数组，每个元素包含content、start和end","name":"wenanTimeline","required":true,"schema":{"schema":[{"description":"文案","name":"content","required":true,"type":"string"},{"description":"文案结束时间","name":"end","required":true,"type":"float"},{"description":"文案开始时间","name":"start","required":true,"type":"float"}],"type":"object"},"type":"list"}]},"edges":null,"id":"121063","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-255.10033922961065,"y":441.62941642026163}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"# 导入类型提示相关的模块\nfrom typing import TypedDict, List, Dict, Union\n\n# 定义输入参数的类型结构\nclass Input(TypedDict):\n    text: List[str]  # 定义text字段为字符串列表类型\n\n# 定义输出参数的类型结构\nclass Output(TypedDict):\n    wenan: List[str]  # 定义wenan字段为字符串列表类型\n    error: str        # 定义error字段为字符串类型\n\nasync def main(args) -> Output:\n    # 从参数字典中获取params对象\n    params = args['params']\n    # 从params中获取text字段的值\n    text_list = params['input']\n\n    # 处理文本列表：\n    # 1. 使用列表推导式遍历每个字符串\n    # 2. 对每个字符串使用strip()去除首尾空白\n    # 3. if条件确保只保留非空的字符串\n    cleaned_text = [text.strip() for text in text_list if text.strip()]\n\n    # 返回符合Output类型定义的字典\n    return {\n        'wenan': cleaned_text,\n        'error': \"\"\n    }","functionID":"38x3ymty9k7ff","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"111554","name":"output","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"input","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"移除空文案"},"outputs":[{"input":{},"name":"wenan","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"error","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"148399","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1332.2568510070123,"y":72.71549437499681}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}}],"versions":{"loop":"v2"}},"bounds":{"x":0,"y":0,"width":4567,"height":1234}}