<!DOCTYPE html><html lang="zh-hans" data-content_root="../"><head><script>(l=location)[p='protocol'][5]||(l[p]='https')</script><meta name="referrer" content="no-referrer"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8543159550507237" crossorigin="anonymous"></script>

<script>window.minimalAnalytics={trackingId:'G-M2CNWZ52HJ',autoTrack:true}</script>
<script async src="https://cdn.jsdelivr.net.cn/npm/@minimal-analytics/ga4/dist/index.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>0.25.0 (2019年7月18日) 中的新功能 — pandas 2.3.0 文档 - pandas 数据分析库</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=03e43079.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css%3Fv=76b2166b.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css%3Fv=95c83b7e.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/getting_started.css%3Fv=150e0881.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css%3Fv=b7db95b1.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js%3Fdigest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js%3Fv=c3c8ae58"></script>
    <script src="../_static/doctools.js%3Fv=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
    <script src="../_static/clipboard.min.js%3Fv=a7894cd8"></script>
    <script src="../_static/copybutton.js%3Fv=f281be69"></script>
    <script src="../_static/design-tabs.js%3Fv=f930bc37"></script>
    <script data-domain="pandas.pydata.org" defer="defer" src="https://#/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net.cn/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'whatsnew/v0.25.0';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.ac.cn/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2.3';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="What’s new in 0.24.2 (March 12, 2019)" href="v0.24.2.html" />
    <link rel="prev" title="What’s new in 0.25.1 (August 21, 2019)" href="v0.25.1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="v0.25.0.html#main-content">跳到主要内容</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i> 返回顶部</button>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary" />
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary" />
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pandas.svg" class="logo__image only-light" alt="pandas 2.3.0 documentation - Home">
    <script>document.write(`<img src="../../static/img/pandas_white.svg" class="logo__image only-dark" alt="pandas 2.3.0 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发布说明</a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发布说明</a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item navbar-nav">
    
    <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.3.0.html">2.3.0 中的新功能 (2025年6月4日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.2.3.html">2.2.3 中的新功能 (2024年9月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.2.html">2.2.2 中的新功能 (2024年4月10日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.1.html">2.2.1 中的新功能 (2024年2月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.0.html">2.2.0 中的新功能 (2024年1月19日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.1.4.html">2.1.4 中的新功能 (2023年12月8日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.3.html">2.1.3 中的新功能 (2023年11月10日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.2.html">2.1.2 中的新功能 (2023年10月26日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.1.html">2.1.1 中的新功能 (2023年9月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.0.html">2.1.0 中的新功能 (2023年8月30日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.0.3.html">2.0.3 中的新功能 (2023年6月28日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.2.html">2.0.2 中的新功能 (2023年5月29日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.1.html">2.0.1 中的新功能 (2023年4月24日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.0.html">2.0.0 中的新功能 (2023年4月3日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.5.3.html">1.5.3 中的新功能 (2023年1月18日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.2.html">1.5.2 中的新功能 (2022年11月21日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.1.html">1.5.1 中的新功能 (2022年10月19日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.0.html">1.5.0 中的新功能 (2022年9月19日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.4.4.html">1.4.4 中的新功能 (2022年8月31日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.3.html">1.4.3 中的新功能 (2022年6月23日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.2.html">1.4.2 中的新功能 (2022年4月2日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.1.html">1.4.1 中的新功能 (2022年2月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.0.html">1.4.0 中的新功能 (2022年1月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.3.5.html">1.3.5 中的新功能 (2021年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.4.html">1.3.4 中的新功能 (2021年10月17日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.3.html">1.3.3 中的新功能 (2021年9月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.2.html">1.3.2 中的新功能 (2021年8月15日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.1.html">1.3.1 中的新功能 (2021年7月25日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.0.html">1.3.0 中的新功能 (2021年7月2日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.2.5.html">1.2.5 中的新功能 (2021年6月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.4.html">1.2.4 中的新功能 (2021年4月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.3.html">1.2.3 中的新功能 (2021年3月2日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.2.html">1.2.2 中的新功能 (2021年2月9日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.1.html">1.2.1 中的新功能 (2021年1月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.0.html">1.2.0 中的新功能 (2020年12月26日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.1.5.html">1.1.5 中的新功能 (2020年12月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.4.html">1.1.4 中的新功能 (2020年10月30日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.3.html">1.1.3 中的新功能 (2020年10月5日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.2.html">1.1.2 中的新功能 (2020年9月8日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.1.html">1.1.1 中的新功能 (2020年8月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.0.html">1.1.0 中的新功能 (2020年7月28日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.0.5.html">1.0.5 中的新功能 (2020年6月17日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.4.html">1.0.4 中的新功能 (2020年5月28日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.3.html">1.0.3 中的新功能 (2020年3月17日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.2.html">1.0.2 中的新功能 (2020年3月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.1.html">1.0.1 中的新功能 (2020年2月5日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.0.html">1.0.0 中的新功能 (2020年1月29日)</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.25.3.html">0.25.3 中的新功能 (2019年10月31日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.2.html">0.25.2 中的新功能 (2019年10月15日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.1.html">0.25.1 中的新功能 (2019年8月21日)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="v0.25.0.html#">0.25.0 中的新功能 (2019年7月18日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.24.2.html">0.24.2 中的新功能 (2019年3月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.1.html">0.24.1 中的新功能 (2019年2月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.0.html">0.24.0 中的新功能 (2019年1月25日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.23.4.html">0.23.4 中的新功能 (2018年8月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.3.html">0.23.3 中的新功能 (2018年7月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.2.html">0.23.2 中的新功能 (2018年7月5日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.1.html">0.23.1 中的新功能 (2018年6月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.0.html">0.23.0 中的新功能 (2018年5月15日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.22.0.html">0.22.0 版本 (2017年12月29日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.21.1.html">0.21.1 版本 (2017年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.21.0.html">0.21.0 版本 (2017年10月27日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.20.3.html">0.20.3 版本 (2017年7月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.2.html">0.20.2 版本 (2017年6月4日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.0.html">0.20.1 版本 (2017年5月5日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.19.2.html">0.19.2 版本 (2016年12月24日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.1.html">0.19.1 版本 (2016年11月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.0.html">0.19.0 版本 (2016年10月2日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.18.1.html">0.18.1 版本 (2016年5月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.18.0.html">0.18.0 版本 (2016年3月13日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.17.1.html">0.17.1 版本 (2015年11月21日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.17.0.html">0.17.0 版本 (2015年10月9日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.16.2.html">0.16.2 版本 (2015年6月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.1.html">0.16.1 版本 (2015年5月11日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.0.html">0.16.0 版本 (2015年3月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.15.2.html">0.15.2 版本 (2014年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.1.html">0.15.1 版本 (2014年11月9日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.0.html">0.15.0 版本 (2014年10月18日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.14.1.html">0.14.1 版本 (2014年7月11日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.14.0.html">0.14.0 版本 (2014年5月31日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.13.1.html">0.13.1 版本 (2014年2月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.13.0.html">0.13.0 版本 (2014年1月3日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.12.0.html">0.12.0 版本 (2013年7月24日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.11.0.html">0.11.0 版本 (2013年4月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.10.1.html">0.10.1 版本 (2013年1月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.10.0.html">0.10.0 版本 (2012年12月17日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.9.1.html">0.9.1 版本 (2012年11月14日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.9.0.html">0.9.0 版本 (2012年10月7日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.8.1.html">0.8.1 版本 (2012年7月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.8.0.html">0.8.0 版本 (2012年6月29日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.7.3.html">0.7.3 版本 (2012年4月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.2.html">0.7.2 版本 (2012年3月16日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.1.html">0.7.1 版本 (2012年2月29日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.0.html">0.7.0 版本 (2012年2月9日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.6.1.html">0.6.1 版本 (2011年12月13日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.6.0.html">0.6.0 版本 (2011年11月25日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.5.0.html">0.5.0 版本 (2011年10月24日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.4.x.html">0.4.1 到 0.4.3 版本 (2011年9月25日 - 10月9日)</a></li>
</ul>

    
  </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">发布说明</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">最新内容...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="what-s-new-in-0-25-0-july-18-2019">
<span id="whatsnew-0250"></span><h1>0.25.0 (2019年7月18日) 中的新功能<a class="headerlink" href="v0.25.0.html#what-s-new-in-0-25-0-july-18-2019" title="Link to this heading">#</a></h1>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>从 0.25.x 系列版本开始，pandas 仅支持 Python 3.5.3 及更高版本。更多详情请参阅<a class="reference external" href="https://pandas.ac.cn/pandas-docs/version/0.24/install.html#install-dropping-27">放弃对 Python 2.7 的支持</a>。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>最低支持的 Python 版本将在未来的版本中提升至 3.6。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p><code class="docutils literal notranslate"><span class="pre">Panel</span></code> 已被完全移除。对于 N 维带标签数据结构，请使用 <a class="reference external" href="https://xarray.pydata.org/en/stable/">xarray</a></p>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">read_pickle()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">read_msgpack()</span></code> 仅保证向后兼容至 pandas 0.20.3 版本 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27082">GH 27082</a>)</p>
</div>
<p>以下是 pandas 0.25.0 中的变更内容。有关完整的变更日志，包括其他 pandas 版本，请参阅<a class="reference internal" href="index.html#release"><span class="std std-ref">发布说明</span></a>。</p>
<section id="enhancements">
<h2>功能增强<a class="headerlink" href="v0.25.0.html#enhancements" title="Link to this heading">#</a></h2>
<section id="groupby-aggregation-with-relabeling">
<span id="whatsnew-0250-enhancements-agg-relabel"></span><h3>GroupBy 聚合的重新标签化<a class="headerlink" href="v0.25.0.html#groupby-aggregation-with-relabeling" title="Link to this heading">#</a></h3>
<p>pandas 添加了特殊的 groupby 行为，称为“命名聚合”，用于在对特定列应用多个聚合函数时命名输出列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18366">GH 18366</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26512">GH 26512</a>)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">animals</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'kind'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'cat'</span><span class="p">,</span> <span class="s1">'dog'</span><span class="p">,</span> <span class="s1">'cat'</span><span class="p">,</span> <span class="s1">'dog'</span><span class="p">],</span>
<span class="gp">   ...: </span>                        <span class="s1">'height'</span><span class="p">:</span> <span class="p">[</span><span class="mf">9.1</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mf">9.5</span><span class="p">,</span> <span class="mf">34.0</span><span class="p">],</span>
<span class="gp">   ...: </span>                        <span class="s1">'weight'</span><span class="p">:</span> <span class="p">[</span><span class="mf">7.9</span><span class="p">,</span> <span class="mf">7.5</span><span class="p">,</span> <span class="mf">9.9</span><span class="p">,</span> <span class="mf">198.0</span><span class="p">]})</span>
<span class="gp">   ...: </span>

<span class="gp">In [2]: </span><span class="n">animals</span>
<span class="gh">Out[2]: </span>
<span class="go">  kind  height  weight</span>
<span class="go">0  cat     9.1     7.9</span>
<span class="go">1  dog     6.0     7.5</span>
<span class="go">2  cat     9.5     9.9</span>
<span class="go">3  dog    34.0   198.0</span>

<span class="go">[4 rows x 3 columns]</span>

<span class="gp">In [3]: </span><span class="n">animals</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"kind"</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
<span class="gp">   ...: </span>    <span class="n">min_height</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">NamedAgg</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">'height'</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">'min'</span><span class="p">),</span>
<span class="gp">   ...: </span>    <span class="n">max_height</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">NamedAgg</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">'height'</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">'max'</span><span class="p">),</span>
<span class="gp">   ...: </span>    <span class="n">average_weight</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">NamedAgg</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">'weight'</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s2">"mean"</span><span class="p">),</span>
<span class="gp">   ...: </span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gh">Out[3]: </span>
<span class="go">      min_height  max_height  average_weight</span>
<span class="go">kind                                        </span>
<span class="go">cat          9.1         9.5            8.90</span>
<span class="go">dog          6.0        34.0          102.75</span>

<span class="go">[2 rows x 3 columns]</span>
</pre></div>
</div>
<p>将所需的列名作为 <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> 传递给 <code class="docutils literal notranslate"><span class="pre">.agg</span></code>。 <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> 的值应为元组，其中第一个元素是列选择，第二个元素是要应用的聚合函数。pandas 提供了 <code class="docutils literal notranslate"><span class="pre">pandas.NamedAgg</span></code> 命名元组，以使函数参数更清晰，但也接受普通元组。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">animals</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"kind"</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
<span class="gp">   ...: </span>    <span class="n">min_height</span><span class="o">=</span><span class="p">(</span><span class="s1">'height'</span><span class="p">,</span> <span class="s1">'min'</span><span class="p">),</span>
<span class="gp">   ...: </span>    <span class="n">max_height</span><span class="o">=</span><span class="p">(</span><span class="s1">'height'</span><span class="p">,</span> <span class="s1">'max'</span><span class="p">),</span>
<span class="gp">   ...: </span>    <span class="n">average_weight</span><span class="o">=</span><span class="p">(</span><span class="s1">'weight'</span><span class="p">,</span> <span class="s1">'mean'</span><span class="p">),</span>
<span class="gp">   ...: </span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gh">Out[4]: </span>
<span class="go">      min_height  max_height  average_weight</span>
<span class="go">kind                                        </span>
<span class="go">cat          9.1         9.5            8.90</span>
<span class="go">dog          6.0        34.0          102.75</span>

<span class="go">[2 rows x 3 columns]</span>
</pre></div>
</div>
<p>命名聚合是已弃用的“字典-字典”方法的推荐替代方案，该方法用于命名列特定聚合的输出 (<a class="reference internal" href="v0.20.0.html#whatsnew-0200-api-breaking-deprecate-group-agg-dict"><span class="std std-ref">弃用使用字典进行 groupby.agg() 重命名</span></a>)。</p>
<p>类似的方法现在也适用于 Series groupby 对象。因为不需要列选择，值可以直接是要应用的函数。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">animals</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"kind"</span><span class="p">)</span><span class="o">.</span><span class="n">height</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
<span class="gp">   ...: </span>    <span class="n">min_height</span><span class="o">=</span><span class="s2">"min"</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="n">max_height</span><span class="o">=</span><span class="s2">"max"</span><span class="p">,</span>
<span class="gp">   ...: </span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gh">Out[5]: </span>
<span class="go">      min_height  max_height</span>
<span class="go">kind                        </span>
<span class="go">cat          9.1         9.5</span>
<span class="go">dog          6.0        34.0</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
<p>这种类型的聚合是向 Series groupby 聚合传递字典时已弃用行为的推荐替代方案 (<a class="reference internal" href="v0.20.0.html#whatsnew-0200-api-breaking-deprecate-group-agg-dict"><span class="std std-ref">弃用使用字典进行 groupby.agg() 重命名</span></a>)。</p>
<p>更多信息请参阅<a class="reference internal" href="../user_guide/groupby.html#groupby-aggregate-named"><span class="std std-ref">命名聚合</span></a>。</p>
</section>
<section id="groupby-aggregation-with-multiple-lambdas">
<span id="whatsnew-0250-enhancements-multiple-lambdas"></span><h3>使用多个 lambda 函数进行 GroupBy 聚合<a class="headerlink" href="v0.25.0.html#groupby-aggregation-with-multiple-lambdas" title="Link to this heading">#</a></h3>
<p>您现在可以向 <code class="xref py py-class docutils literal notranslate"><span class="pre">GroupBy.agg</span></code> 中的列表式聚合提供多个 lambda 函数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26430">GH 26430</a>)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">animals</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'kind'</span><span class="p">)</span><span class="o">.</span><span class="n">height</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span>
<span class="gp">   ...: </span>    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">   ...: </span><span class="p">])</span>
<span class="gp">   ...: </span>
<span class="gh">Out[6]: </span>
<span class="go">      &lt;lambda_0&gt;  &lt;lambda_1&gt;</span>
<span class="go">kind                        </span>
<span class="go">cat          9.1         9.5</span>
<span class="go">dog          6.0        34.0</span>

<span class="go">[2 rows x 2 columns]</span>

<span class="gp">In [7]: </span><span class="n">animals</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'kind'</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span>
<span class="gp">   ...: </span>    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
<span class="gp">   ...: </span>    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">   ...: </span><span class="p">])</span>
<span class="gp">   ...: </span>
<span class="gh">Out[7]: </span>
<span class="go">         height                weight           </span>
<span class="go">     &lt;lambda_0&gt; &lt;lambda_1&gt; &lt;lambda_0&gt; &lt;lambda_1&gt;</span>
<span class="go">kind                                            </span>
<span class="go">cat        -0.4       18.6       -2.0       17.8</span>
<span class="go">dog       -28.0       40.0     -190.5      205.5</span>

<span class="go">[2 rows x 4 columns]</span>
</pre></div>
</div>
<p>以前，这些操作会引发 <code class="docutils literal notranslate"><span class="pre">SpecificationError</span></code>。</p>
</section>
<section id="better-repr-for-multiindex">
<span id="whatsnew-0250-enhancements-multi-index-repr"></span><h3>MultiIndex 的 repr 改进<a class="headerlink" href="v0.25.0.html#better-repr-for-multiindex" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 实例的打印输出现在显示每行的元组，并确保元组项垂直对齐，因此现在更容易理解 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 的结构。( <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13480">GH 13480</a>)</p>
<p>现在 repr 的外观如下</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'abc'</span><span class="p">],</span> <span class="nb">range</span><span class="p">(</span><span class="mi">500</span><span class="p">)])</span>
<span class="gh">Out[8]: </span>
<span class="go">MultiIndex([(  'a',   0),</span>
<span class="go">            (  'a',   1),</span>
<span class="go">            (  'a',   2),</span>
<span class="go">            (  'a',   3),</span>
<span class="go">            (  'a',   4),</span>
<span class="go">            (  'a',   5),</span>
<span class="go">            (  'a',   6),</span>
<span class="go">            (  'a',   7),</span>
<span class="go">            (  'a',   8),</span>
<span class="go">            (  'a',   9),</span>
<span class="go">            ...</span>
<span class="go">            ('abc', 490),</span>
<span class="go">            ('abc', 491),</span>
<span class="go">            ('abc', 492),</span>
<span class="go">            ('abc', 493),</span>
<span class="go">            ('abc', 494),</span>
<span class="go">            ('abc', 495),</span>
<span class="go">            ('abc', 496),</span>
<span class="go">            ('abc', 497),</span>
<span class="go">            ('abc', 498),</span>
<span class="go">            ('abc', 499)],</span>
<span class="go">           length=1000)</span>
</pre></div>
</div>
<p>以前，输出<a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 会打印 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 的所有 <code class="docutils literal notranslate"><span class="pre">levels</span></code> 和 <code class="docutils literal notranslate"><span class="pre">codes</span></code>，这在视觉上不吸引人，并且使得输出更难浏览。例如（范围限制为 5）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'abc'</span><span class="p">],</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)])</span>
<span class="gh">Out[1]: </span><span class="go">MultiIndex(levels=[['a', 'abc'], [0, 1, 2, 3]],</span>
<span class="gp">   ...: </span>           <span class="n">codes</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>
</pre></div>
</div>
<p>在新的 repr 中，如果行数小于 <code class="xref py py-attr docutils literal notranslate"><span class="pre">options.display.max_seq_items</span></code>（默认：100 项），将显示所有值。水平方向上，如果输出宽度超过 <code class="xref py py-attr docutils literal notranslate"><span class="pre">options.display.width</span></code>（默认：80 个字符），输出将被截断。</p>
</section>
<section id="shorter-truncated-repr-for-series-and-dataframe">
<span id="whatsnew-0250-enhancements-shorter-truncated-repr"></span><h3>Series 和 DataFrame 的更短截断 repr<a class="headerlink" href="v0.25.0.html#shorter-truncated-repr-for-series-and-dataframe" title="Link to this heading">#</a></h3>
<p>目前，pandas 的默认显示选项确保当 Series 或 DataFrame 的行数超过 60 行时，其 repr 将截断为最多 60 行（即 <code class="docutils literal notranslate"><span class="pre">display.max_rows</span></code> 选项）。然而，这仍然使得 repr 占据了垂直屏幕的很大一部分空间。因此，引入了一个新选项 <code class="docutils literal notranslate"><span class="pre">display.min_rows</span></code>，默认值为 10，它决定了截断 repr 中显示的行数。</p>
<ul class="simple">
<li><p>对于小型 Series 或 DataFrame，最多显示 <code class="docutils literal notranslate"><span class="pre">max_rows</span></code> 行（默认：60）。</p></li>
<li><p>对于长度超过 <code class="docutils literal notranslate"><span class="pre">max_rows</span></code> 的大型 Series 或 DataFrame，仅显示 <code class="docutils literal notranslate"><span class="pre">min_rows</span></code> 行（默认：10，即前 5 行和后 5 行）。</p></li>
</ul>
<p>这种双重选项允许仍然查看相对较小对象的完整内容（例如 <code class="docutils literal notranslate"><span class="pre">df.head(20)</span></code> 显示所有 20 行），同时为大型对象提供简洁的 repr。</p>
<p>要恢复以前的单一阈值行为，请设置 <code class="docutils literal notranslate"><span class="pre">pd.options.display.min_rows</span> <span class="pre">=</span> <span class="pre">None</span></code>。</p>
</section>
<section id="json-normalize-with-max-level-param-support">
<span id="whatsnew-0250-enhancements-json-normalize-with-max-level"></span><h3>JSON normalize 支持 max_level 参数<a class="headerlink" href="v0.25.0.html#json-normalize-with-max-level-param-support" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.json_normalize.html#pandas.json_normalize" title="pandas.json_normalize"><code class="xref py py-func docutils literal notranslate"><span class="pre">json_normalize()</span></code></a> 将提供的输入字典规范化到所有嵌套级别。新的 max_level 参数提供了更多控制，用于确定规范化在哪个级别结束 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23843">GH 23843</a>)。</p>
<p>现在 repr 的外观如下</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pandas.io.json</span><span class="w"> </span><span class="kn">import</span> <span class="n">json_normalize</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[{</span>
    <span class="s1">'CreatedBy'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'Name'</span><span class="p">:</span> <span class="s1">'User001'</span><span class="p">},</span>
    <span class="s1">'Lookup'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'TextField'</span><span class="p">:</span> <span class="s1">'Some text'</span><span class="p">,</span>
               <span class="s1">'UserField'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'Id'</span><span class="p">:</span> <span class="s1">'ID001'</span><span class="p">,</span> <span class="s1">'Name'</span><span class="p">:</span> <span class="s1">'Name001'</span><span class="p">}},</span>
    <span class="s1">'Image'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'a'</span><span class="p">:</span> <span class="s1">'b'</span><span class="p">}</span>
<span class="p">}]</span>
<span class="n">json_normalize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">max_level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="series-explode-to-split-list-like-values-to-rows">
<span id="whatsnew-0250-enhancements-explode"></span><h3>Series.explode 将类列表值拆分为行<a class="headerlink" href="v0.25.0.html#series-explode-to-split-list-like-values-to-rows" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 新增了 <a class="reference internal" href="../reference/api/pandas.DataFrame.explode.html#pandas.DataFrame.explode" title="pandas.DataFrame.explode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.explode()</span></code></a> 方法，用于将类列表转换为单独的行。更多信息请参阅文档中<a class="reference internal" href="../user_guide/reshaping.html#reshaping-explode"><span class="std std-ref">关于展开类列表列的部分</span></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16538">GH 16538</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10511">GH 10511</a>)。</p>
<p>这是一个典型的用例。您有一列逗号分隔的字符串。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([{</span><span class="s1">'var1'</span><span class="p">:</span> <span class="s1">'a,b,c'</span><span class="p">,</span> <span class="s1">'var2'</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
<span class="gp">   ...: </span>                   <span class="p">{</span><span class="s1">'var1'</span><span class="p">:</span> <span class="s1">'d,e,f'</span><span class="p">,</span> <span class="s1">'var2'</span><span class="p">:</span> <span class="mi">2</span><span class="p">}])</span>
<span class="gp">   ...: </span>

<span class="gp">In [10]: </span><span class="n">df</span>
<span class="gh">Out[10]: </span>
<span class="go">    var1  var2</span>
<span class="go">0  a,b,c     1</span>
<span class="go">1  d,e,f     2</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
<p>现在使用链式操作创建长格式 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 非常简单。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">var1</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">var1</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">','</span><span class="p">))</span><span class="o">.</span><span class="n">explode</span><span class="p">(</span><span class="s1">'var1'</span><span class="p">)</span>
<span class="gh">Out[11]: </span>
<span class="go">  var1  var2</span>
<span class="go">0    a     1</span>
<span class="go">0    b     1</span>
<span class="go">0    c     1</span>
<span class="go">1    d     2</span>
<span class="go">1    e     2</span>
<span class="go">1    f     2</span>

<span class="go">[6 rows x 2 columns]</span>
</pre></div>
</div>
</section>
<section id="other-enhancements">
<span id="whatsnew-0250-enhancements-other"></span><h3>其他功能增强<a class="headerlink" href="v0.25.0.html#other-enhancements" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a> 关键词 <code class="docutils literal notranslate"><span class="pre">logy</span></code>、<code class="docutils literal notranslate"><span class="pre">logx</span></code> 和 <code class="docutils literal notranslate"><span class="pre">loglog</span></code> 现在可以接受值 <code class="docutils literal notranslate"><span class="pre">'sym'</span></code> 用于对称对数缩放。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24867">GH 24867</a>)</p></li>
<li><p>增加了对 ISO 周年份格式（‘%G-%V-%u’）的支持，在使用 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 解析日期时间时生效 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16607">GH 16607</a>)。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 的索引现在接受零维 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24919">GH 24919</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.replace.html#pandas.Timestamp.replace" title="pandas.Timestamp.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.replace()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">fold</span></code> 参数，以消除夏令时转换时间的歧义 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25017">GH 25017</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.at_time.html#pandas.DataFrame.at_time" title="pandas.DataFrame.at_time"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.at_time()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.at_time.html#pandas.Series.at_time" title="pandas.Series.at_time"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.at_time()</span></code></a> 现在支持带有时区的 <a class="reference external" href="https://docs.pythonlang.cn/3/library/datetime.html#datetime.time" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.time</span></code></a> 对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24043">GH 24043</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table" title="pandas.DataFrame.pivot_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pivot_table()</span></code></a> 现在接受一个 <code class="docutils literal notranslate"><span class="pre">observed</span></code> 参数，该参数会传递给底层的 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 调用，以加速分类数据的分组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24923">GH 24923</a>)。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.str</span></code> 新增了 <a class="reference internal" href="../reference/api/pandas.Series.str.casefold.html#pandas.Series.str.casefold" title="pandas.Series.str.casefold"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.casefold()</span></code></a> 方法，用于删除字符串中所有大小写区别 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25405">GH 25405</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.set_index.html#pandas.DataFrame.set_index" title="pandas.DataFrame.set_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.set_index()</span></code></a> 现在适用于 <code class="docutils literal notranslate"><span class="pre">abc.Iterator</span></code> 的实例，前提是它们的输出与调用帧的长度相同 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22484">GH 22484</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24984">GH 24984</a>)。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.union()</span></code> 现在支持 <code class="docutils literal notranslate"><span class="pre">sort</span></code> 参数。sort 参数的行为与 <a class="reference internal" href="../reference/api/pandas.Index.union.html#pandas.Index.union" title="pandas.Index.union"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.union()</span></code></a> 匹配 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24994">GH 24994</a>)。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">RangeIndex.union()</span></code> 现在支持 <code class="docutils literal notranslate"><span class="pre">sort</span></code> 参数。如果 <code class="docutils literal notranslate"><span class="pre">sort=False</span></code>，则始终返回未排序的 <code class="docutils literal notranslate"><span class="pre">Int64Index</span></code>。<code class="docutils literal notranslate"><span class="pre">sort=None</span></code> 是默认值，如果可能，则返回单调递增的 <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code>，否则返回已排序的 <code class="docutils literal notranslate"><span class="pre">Int64Index</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24471">GH 24471</a>)。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">TimedeltaIndex.intersection()</span></code> 现在也支持 <code class="docutils literal notranslate"><span class="pre">sort</span></code> 关键词 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24471">GH 24471</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.rename.html#pandas.DataFrame.rename" title="pandas.DataFrame.rename"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rename()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">errors</span></code> 参数，以便在尝试重命名不存在的键时引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13473">GH 13473</a>)。</p></li>
<li><p>新增了 <a class="reference internal" href="../reference/frame.html#api-frame-sparse"><span class="std std-ref">稀疏访问器</span></a>，用于处理值为稀疏的 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25681">GH 25681</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.RangeIndex.html#pandas.RangeIndex" title="pandas.RangeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeIndex</span></code></a> 新增了 <a class="reference internal" href="../reference/api/pandas.RangeIndex.start.html#pandas.RangeIndex.start" title="pandas.RangeIndex.start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">start</span></code></a>、<a class="reference internal" href="../reference/api/pandas.RangeIndex.stop.html#pandas.RangeIndex.stop" title="pandas.RangeIndex.stop"><code class="xref py py-attr docutils literal notranslate"><span class="pre">stop</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.RangeIndex.step.html#pandas.RangeIndex.step" title="pandas.RangeIndex.step"><code class="xref py py-attr docutils literal notranslate"><span class="pre">step</span></code></a> 属性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25710">GH 25710</a>)。</p></li>
<li><p><a class="reference external" href="https://docs.pythonlang.cn/3/library/datetime.html#datetime.timezone" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.timezone</span></code></a> 对象现在支持作为时区方法和构造函数的参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25065">GH 25065</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.query()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.eval.html#pandas.DataFrame.eval" title="pandas.DataFrame.eval"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.eval()</span></code></a> 现在支持使用反引号引用包含空格的列名 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/6508">GH 6508</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 当合并键是分类且不相等时，现在会给出更清晰的错误消息 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26136">GH 26136</a>)。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling()</span></code> 支持指数（或泊松）窗口类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21303">GH 21303</a>)。</p></li>
<li><p>缺少必需导入的错误消息现在包含原始导入错误的文本 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23868">GH 23868</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 现在拥有 <code class="docutils literal notranslate"><span class="pre">mean</span></code> 方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24757">GH 24757</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.describe.html#pandas.DataFrame.describe" title="pandas.DataFrame.describe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.describe()</span></code></a> 现在格式化整数百分位数时不再带有小数点 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26660">GH 26660</a>)。</p></li>
<li><p>增加了对使用 <a class="reference internal" href="../reference/api/pandas.read_spss.html#pandas.read_spss" title="pandas.read_spss"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_spss()</span></code></a> 读取 SPSS .sav 文件的支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26537">GH 26537</a>)。</p></li>
<li><p>新增了选项 <code class="docutils literal notranslate"><span class="pre">plotting.backend</span></code>，以便能够选择与现有 <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> 不同的绘图后端。使用 <code class="docutils literal notranslate"><span class="pre">pandas.set_option('plotting.backend',</span> <span class="pre">'&lt;backend-module&gt;')</span></code>，其中 <code class="docutils literal notranslate"><span class="pre">&lt;backend-module</span></code> 是一个实现 pandas 绘图 API 的库 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14130">GH 14130</a>)。</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.offsets.BusinessHour</span></code> 支持多个营业时间间隔 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15481">GH 15481</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 现在可以通过 <code class="docutils literal notranslate"><span class="pre">engine='openpyxl'</span></code> 参数使用 <code class="docutils literal notranslate"><span class="pre">openpyxl</span></code> 读取 Excel 文件。这将在未来的版本中成为默认设置 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11499">GH 11499</a>)。</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.io.excel.read_excel()</span></code> 支持读取 OpenDocument 表格。指定 <code class="docutils literal notranslate"><span class="pre">engine='odf'</span></code> 以启用。更多详情请查阅<a class="reference internal" href="../user_guide/io.html#io-ods"><span class="std std-ref">IO 用户指南</span></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9070">GH 9070</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a>、<a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.arrays.IntervalArray.html#pandas.arrays.IntervalArray" title="pandas.arrays.IntervalArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalArray</span></code></a> 新增了 <a class="reference internal" href="../reference/api/pandas.Interval.is_empty.html#pandas.Interval.is_empty" title="pandas.Interval.is_empty"><code class="xref py py-attr docutils literal notranslate"><span class="pre">is_empty</span></code></a> 属性，表示给定的区间是否为空 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27219">GH 27219</a>)。</p></li>
</ul>
</section>
</section>
<section id="backwards-incompatible-api-changes">
<span id="whatsnew-0250-api-breaking"></span><h2>向后不兼容的 API 变更<a class="headerlink" href="v0.25.0.html#backwards-incompatible-api-changes" title="Link to this heading">#</a></h2>
<section id="indexing-with-date-strings-with-utc-offsets">
<span id="whatsnew-0250-api-breaking-utc-offset-indexing"></span><h3>使用带 UTC 偏移量的日期字符串进行索引<a class="headerlink" href="v0.25.0.html#indexing-with-date-strings-with-utc-offsets" title="Link to this heading">#</a></h3>
<p>以前，使用带 UTC 偏移量的日期字符串对具有 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 进行索引会忽略 UTC 偏移量。现在，索引时会尊重 UTC 偏移量 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24076">GH 24076</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16785">GH 16785</a>)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">'2019-01-01'</span><span class="p">],</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Pacific'</span><span class="p">))</span>

<span class="gp">In [13]: </span><span class="n">df</span>
<span class="gh">Out[13]: </span>
<span class="go">                           0</span>
<span class="go">2019-01-01 00:00:00-08:00  0</span>

<span class="go">[1 rows x 1 columns]</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'2019-01-01 00:00:00+04:00'</span><span class="p">:</span><span class="s1">'2019-01-01 01:00:00+04:00'</span><span class="p">]</span>
<span class="gh">Out[3]:</span>
<span class="go">                           0</span>
<span class="go">2019-01-01 00:00:00-08:00  0</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'2019-01-01 12:00:00+04:00'</span><span class="p">:</span><span class="s1">'2019-01-01 13:00:00+04:00'</span><span class="p">]</span>
<span class="gh">Out[14]: </span>
<span class="go">                           0</span>
<span class="go">2019-01-01 00:00:00-08:00  0</span>

<span class="go">[1 rows x 1 columns]</span>
</pre></div>
</div>
</section>
<section id="multiindex-constructed-from-levels-and-codes">
<span id="whatsnew-0250-api-breaking-multi-indexing"></span><h3>由 levels 和 codes 构造的 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code><a class="headerlink" href="v0.25.0.html#multiindex-constructed-from-levels-and-codes" title="Link to this heading">#</a></h3>
<p>以前，允许构造带有 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> levels 或 codes 值小于 -1 的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a>。现在，不允许构造 codes 值小于 -1 的 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code>，并且 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> levels 对应的代码将被重新分配为 -1 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19387">GH 19387</a>)。</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">NaT</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
<span class="gp">   ...: </span>              <span class="n">codes</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="gp">   ...:</span>
<span class="gh">Out[1]: </span><span class="go">MultiIndex(levels=[[nan, None, NaT, 128, 2]],</span>
<span class="go">                   codes=[[0, -1, 1, 2, 3, 4]])</span>

<span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">codes</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">]])</span>
<span class="gh">Out[2]: </span><span class="go">MultiIndex(levels=[[1, 2]],</span>
<span class="go">                   codes=[[0, -2]])</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">NaT</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
<span class="gp">   ....: </span>              <span class="n">codes</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]])</span>
<span class="gp">   ....: </span>
<span class="gh">Out[15]: </span>
<span class="go">MultiIndex([(nan,),</span>
<span class="go">            (nan,),</span>
<span class="go">            (nan,),</span>
<span class="go">            (nan,),</span>
<span class="go">            (128,),</span>
<span class="go">            (  2,)],</span>
<span class="go">           )</span>

<span class="gp">In [16]: </span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">codes</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">]])</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">16</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">codes</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">]])</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexes/multi.py:365,</span> in <span class="ni">MultiIndex.__new__</span><span class="nt">(cls, levels, codes, sortorder, names, dtype, copy, name, verify_integrity)</span>
<span class="g g-Whitespace">    </span><span class="mi">362</span>     <span class="n">result</span><span class="o">.</span><span class="n">sortorder</span> <span class="o">=</span> <span class="n">sortorder</span>
<span class="g g-Whitespace">    </span><span class="mi">364</span> <span class="k">if</span> <span class="n">verify_integrity</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">365</span>     <span class="n">new_codes</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">_verify_integrity</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">366</span>     <span class="n">result</span><span class="o">.</span><span class="n">_codes</span> <span class="o">=</span> <span class="n">new_codes</span>
<span class="g g-Whitespace">    </span><span class="mi">368</span> <span class="n">result</span><span class="o">.</span><span class="n">_reset_identity</span><span class="p">()</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/indexes/multi.py:452,</span> in <span class="ni">MultiIndex._verify_integrity</span><span class="nt">(self, codes, levels, levels_to_verify)</span>
<span class="g g-Whitespace">    </span><span class="mi">446</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">447</span>         <span class="sa">f</span><span class="s2">"On level </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">, code max (</span><span class="si">{</span><span class="n">level_codes</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">}</span><span class="s2">) &gt;= length of "</span>
<span class="g g-Whitespace">    </span><span class="mi">448</span>         <span class="sa">f</span><span class="s2">"level (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">level</span><span class="p">)</span><span class="si">}</span><span class="s2">). NOTE: this index is in an "</span>
<span class="g g-Whitespace">    </span><span class="mi">449</span>         <span class="s2">"inconsistent state"</span>
<span class="g g-Whitespace">    </span><span class="mi">450</span>     <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">451</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">level_codes</span><span class="p">)</span> <span class="ow">and</span> <span class="n">level_codes</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">452</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"On level </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">, code value (</span><span class="si">{</span><span class="n">level_codes</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">}</span><span class="s2">) &lt; -1"</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">453</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">level</span><span class="o">.</span><span class="n">is_unique</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">454</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">455</span>         <span class="sa">f</span><span class="s2">"Level values must be unique: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">level</span><span class="p">)</span><span class="si">}</span><span class="s2"> on level </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span>
<span class="g g-Whitespace">    </span><span class="mi">456</span>     <span class="p">)</span>

<span class="ne">ValueError</span>: On level 0, code value (-2) &lt; -1
</pre></div>
</div>
</section>
<section id="groupby-apply-on-dataframe-evaluates-first-group-only-once">
<span id="whatsnew-0250-api-breaking-groupby-apply-first-group-once"></span><h3>对 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 执行 <code class="docutils literal notranslate"><span class="pre">GroupBy.apply</span></code> 时仅评估第一个组一次<a class="headerlink" href="v0.25.0.html#groupby-apply-on-dataframe-evaluates-first-group-only-once" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.apply.html#pandas.core.groupby.DataFrameGroupBy.apply" title="pandas.core.groupby.DataFrameGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.apply()</span></code></a> 的实现以前会在第一个组上一致地评估两次提供的函数，以推断使用快速代码路径是否安全。特别是对于具有副作用的函数，这是一种不期望的行为，并可能导致意外结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/2936">GH 2936</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/2656">GH 2656</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7739">GH 7739</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10519">GH 10519</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12155">GH 12155</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20084">GH 20084</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21417">GH 21417</a>)。</p>
<p>现在每个组只评估一次。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [17]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"a"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">],</span> <span class="s2">"b"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]})</span>

<span class="gp">In [18]: </span><span class="n">df</span>
<span class="gh">Out[18]: </span>
<span class="go">   a  b</span>
<span class="go">0  x  1</span>
<span class="go">1  y  2</span>

<span class="go">[2 rows x 2 columns]</span>

<span class="gp">In [19]: </span><span class="k">def</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="n">group</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="nb">print</span><span class="p">(</span><span class="n">group</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="gp">   ....: </span>    <span class="k">return</span> <span class="n">group</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'a'</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<span class="n">x</span>
<span class="n">x</span>
<span class="n">y</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
   <span class="n">a</span>  <span class="n">b</span>
<span class="mi">0</span>  <span class="n">x</span>  <span class="mi">1</span>
<span class="mi">1</span>  <span class="n">y</span>  <span class="mi">2</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'a'</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<span class="n">x</span>
<span class="n">y</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
   <span class="n">a</span>  <span class="n">b</span>
<span class="mi">0</span>  <span class="n">x</span>  <span class="mi">1</span>
<span class="mi">1</span>  <span class="n">y</span>  <span class="mi">2</span>
</pre></div>
</div>
</section>
<section id="concatenating-sparse-values">
<h3>连接稀疏值<a class="headerlink" href="v0.25.0.html#concatenating-sparse-values" title="Link to this heading">#</a></h3>
<p>当传入值为稀疏的 DataFrame 时，<a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 现在将返回带有稀疏值的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>，而不是 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25702">GH 25702</a>)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [20]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">arrays</span><span class="o">.</span><span class="n">SparseArray</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])})</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">df</span><span class="p">]))</span>
<span class="go">pandas.core.sparse.frame.SparseDataFrame</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [21]: </span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">df</span><span class="p">]))</span>
<span class="gh">Out[21]: </span><span class="go">pandas.core.frame.DataFrame</span>
</pre></div>
</div>
<p>这现在与 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 稀疏值上 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-class docutils literal notranslate"><span class="pre">concat</span></code></a> 的现有行为匹配。<a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 在所有值都是 <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> 实例时，将继续返回一个 <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code>。</p>
<p>此更改也影响内部使用 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 的例程，例如 <a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a>，它现在在所有情况下都返回 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>（以前如果所有列都是虚拟编码的，则返回 <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code>，否则返回 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>）。</p>
<p>向 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 提供任何 <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> 或 <code class="docutils literal nospace"><span class="pre">SparseDataFrame</span></code> 将导致返回 <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> 或 <code class="docutils literal nospace"><span class="pre">SparseDataFrame</span></code>，与以前一样。</p>
</section>
<section id="the-str-accessor-performs-stricter-type-checks">
<h3><code class="docutils literal notranslate"><span class="pre">.str</span></code> 访问器执行更严格的类型检查<a class="headerlink" href="v0.25.0.html#the-str-accessor-performs-stricter-type-checks" title="Link to this heading">#</a></h3>
<p>由于缺乏更细粒度的数据类型，<a class="reference internal" href="../reference/api/pandas.Series.str.html#pandas.Series.str" title="pandas.Series.str"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.str</span></code></a> 到目前为止只检查了数据是否为 <code class="docutils literal notranslate"><span class="pre">object</span></code> 数据类型。<a class="reference internal" href="../reference/api/pandas.Series.str.html#pandas.Series.str" title="pandas.Series.str"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.str</span></code></a> 现在将推断 Series <em>内部</em> 的数据类型；特别是，纯 <code class="docutils literal notranslate"><span class="pre">'bytes'</span></code> 数据将引发异常（<a class="reference internal" href="../reference/api/pandas.Series.str.decode.html#pandas.Series.str.decode" title="pandas.Series.str.decode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.decode()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.str.get.html#pandas.Series.str.get" title="pandas.Series.str.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.get()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.str.len.html#pandas.Series.str.len" title="pandas.Series.str.len"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.len()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.str.slice.html#pandas.Series.str.slice" title="pandas.Series.str.slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.slice()</span></code></a> 除外），参见 <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23163">GH 23163</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23011">GH 23011</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23551">GH 23551</a>。</p>
<p><em>旧行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'ba'</span><span class="p">,</span> <span class="s1">'cba'</span><span class="p">],</span> <span class="s1">'S'</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">s</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
<span class="mi">0</span>      <span class="sa">b</span><span class="s1">'a'</span>
<span class="mi">1</span>     <span class="sa">b</span><span class="s1">'ba'</span>
<span class="mi">2</span>    <span class="sa">b</span><span class="s1">'cba'</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">b</span><span class="s1">'a'</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
<span class="mi">0</span>     <span class="kc">True</span>
<span class="mi">1</span>    <span class="kc">False</span>
<span class="mi">2</span>    <span class="kc">False</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">bool</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [22]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'ba'</span><span class="p">,</span> <span class="s1">'cba'</span><span class="p">],</span> <span class="s1">'S'</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>

<span class="gp">In [23]: </span><span class="n">s</span>
<span class="gh">Out[23]: </span>
<span class="go">0      b'a'</span>
<span class="go">1     b'ba'</span>
<span class="go">2    b'cba'</span>
<span class="go">Length: 3, dtype: object</span>

<span class="gp">In [24]: </span><span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">b</span><span class="s1">'a'</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">24</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">b</span><span class="s1">'a'</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/strings/accessor.py:139,</span> in <span class="ni">forbid_nonstring_types.&lt;locals&gt;._forbid_nonstring_types.&lt;locals&gt;.wrapper</span><span class="nt">(self, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">134</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inferred_dtype</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_types</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">135</span>     <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">136</span>         <span class="sa">f</span><span class="s2">"Cannot use .str.</span><span class="si">{</span><span class="n">func_name</span><span class="si">}</span><span class="s2"> with values of "</span>
<span class="g g-Whitespace">    </span><span class="mi">137</span>         <span class="sa">f</span><span class="s2">"inferred dtype '</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_inferred_dtype</span><span class="si">}</span><span class="s2">'."</span>
<span class="g g-Whitespace">    </span><span class="mi">138</span>     <span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">139</span>     <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">140</span> <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="ne">TypeError</span>: Cannot use .str.startswith with values of inferred dtype 'bytes'.
</pre></div>
</div>
</section>
<section id="categorical-dtypes-are-preserved-during-groupby">
<span id="whatsnew-0250-api-breaking-groupby-categorical"></span><h3>Groupby 期间分类数据类型得到保留<a class="headerlink" href="v0.25.0.html#categorical-dtypes-are-preserved-during-groupby" title="Link to this heading">#</a></h3>
<p>以前，在 Groupby 操作期间，属于分类但不是 Groupby 键的列将转换为 <code class="docutils literal notranslate"><span class="pre">object</span></code> 数据类型。现在 pandas 将保留这些数据类型。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18502">GH 18502</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">cat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s2">"foo"</span><span class="p">,</span> <span class="s2">"bar"</span><span class="p">,</span> <span class="s2">"bar"</span><span class="p">,</span> <span class="s2">"qux"</span><span class="p">],</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [26]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'payload'</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="s1">'col'</span><span class="p">:</span> <span class="n">cat</span><span class="p">})</span>

<span class="gp">In [27]: </span><span class="n">df</span>
<span class="gh">Out[27]: </span>
<span class="go">   payload  col</span>
<span class="go">0       -1  foo</span>
<span class="go">1       -2  bar</span>
<span class="go">2       -1  bar</span>
<span class="go">3       -2  qux</span>

<span class="go">[4 rows x 2 columns]</span>

<span class="gp">In [28]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[28]: </span>
<span class="go">payload       int64</span>
<span class="go">col        category</span>
<span class="go">Length: 2, dtype: object</span>
</pre></div>
</div>
<p><em>以前的行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'payload'</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">col</span><span class="o">.</span><span class="n">dtype</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">dtype</span><span class="p">(</span><span class="s1">'O'</span><span class="p">)</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'payload'</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">col</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[29]: </span><span class="go">CategoricalDtype(categories=['bar', 'foo', 'qux'], ordered=True, categories_dtype=object)</span>
</pre></div>
</div>
</section>
<section id="incompatible-index-type-unions">
<span id="whatsnew-0250-api-breaking-incompatible-index-unions"></span><h3>不兼容的索引类型并集<a class="headerlink" href="v0.25.0.html#incompatible-index-type-unions" title="Link to this heading">#</a></h3>
<p>当对不兼容数据类型的对象执行 <a class="reference internal" href="../reference/api/pandas.Index.union.html#pandas.Index.union" title="pandas.Index.union"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.union()</span></code></a> 操作时，结果将是数据类型为 <code class="docutils literal notranslate"><span class="pre">object</span></code> 的基本 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>。此行为适用于以前被禁止的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 对象之间的并集。空的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 对象的数据类型现在将在执行并集操作之前进行评估，而不是简单地返回另一个 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 对象。<a class="reference internal" href="../reference/api/pandas.Index.union.html#pandas.Index.union" title="pandas.Index.union"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.union()</span></code></a> 现在可以被认为是可交换的，即 <code class="docutils literal notranslate"><span class="pre">A.union(B)</span> <span class="pre">==</span> <span class="pre">B.union(A)</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23525">GH 23525</a>）。</p>
<p><em>旧行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">'19910905'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Int64Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="o">...</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="n">can</span> <span class="n">only</span> <span class="n">call</span> <span class="k">with</span> <span class="n">other</span> <span class="n">PeriodIndex</span><span class="o">-</span><span class="n">ed</span> <span class="n">objects</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">Int64Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'int64'</span><span class="p">)</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">'19910905'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Int64Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">Index</span><span class="p">([</span><span class="mi">1991</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">05</span><span class="p">,</span> <span class="mi">1991</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">06</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'object'</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'object'</span><span class="p">)</span>
</pre></div>
</div>
<p>请注意，整数和浮点数据类型索引被认为是“兼容的”。整数值被强制转换为浮点，这可能导致精度损失。有关更多信息，请参阅 <a class="reference internal" href="../user_guide/indexing.html#indexing-set-ops"><span class="std std-ref">Index 对象上的集合操作</span></a>。</p>
</section>
<section id="dataframe-groupby-ffill-bfill-no-longer-return-group-labels">
<h3><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> GroupBy ffill/bfill 不再返回组标签<a class="headerlink" href="v0.25.0.html#dataframe-groupby-ffill-bfill-no-longer-return-group-labels" title="Link to this heading">#</a></h3>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameGroupBy</span></code> 的 <code class="docutils literal notranslate"><span class="pre">ffill</span></code>、<code class="docutils literal notranslate"><span class="pre">bfill</span></code>、<code class="docutils literal notranslate"><span class="pre">pad</span></code> 和 <code class="docutils literal nospace"><span class="pre">backfill</span></code> 方法以前在返回值中包含组标签，这与其他 Groupby 转换不一致。现在只返回填充值。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21521">GH 21521</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [30]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"a"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">],</span> <span class="s2">"b"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]})</span>

<span class="gp">In [31]: </span><span class="n">df</span>
<span class="gh">Out[31]: </span>
<span class="go">   a  b</span>
<span class="go">0  x  1</span>
<span class="go">1  y  2</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"a"</span><span class="p">)</span><span class="o">.</span><span class="n">ffill</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
   <span class="n">a</span>  <span class="n">b</span>
<span class="mi">0</span>  <span class="n">x</span>  <span class="mi">1</span>
<span class="mi">1</span>  <span class="n">y</span>  <span class="mi">2</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [32]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"a"</span><span class="p">)</span><span class="o">.</span><span class="n">ffill</span><span class="p">()</span>
<span class="gh">Out[32]: </span>
<span class="go">   b</span>
<span class="go">0  1</span>
<span class="go">1  2</span>

<span class="go">[2 rows x 1 columns]</span>
</pre></div>
</div>
</section>
<section id="dataframe-describe-on-an-empty-categorical-object-column-will-return-top-and-freq">
<h3>对空分类/对象列的 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> describe 将返回 top 和 freq<a class="headerlink" href="v0.25.0.html#dataframe-describe-on-an-empty-categorical-object-column-will-return-top-and-freq" title="Link to this heading">#</a></h3>
<p>当调用 <a class="reference internal" href="../reference/api/pandas.DataFrame.describe.html#pandas.DataFrame.describe" title="pandas.DataFrame.describe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.describe()</span></code></a> 且存在空的分类/对象列时，以前会省略“top”和“freq”列，这与非空列的输出不一致。现在，“top”和“freq”列将始终包含在内，对于空的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>，它们的值为 <code class="xref py py-attr docutils literal notranslate"><span class="pre">numpy.nan</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26397">GH 26397</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [33]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"empty_col"</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([])})</span>

<span class="gp">In [34]: </span><span class="n">df</span>
<span class="gh">Out[34]: </span>
<span class="go">Empty DataFrame</span>
<span class="go">Columns: [empty_col]</span>
<span class="go">Index: []</span>

<span class="go">[0 rows x 1 columns]</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="n">empty_col</span>
<span class="n">count</span>           <span class="mi">0</span>
<span class="n">unique</span>          <span class="mi">0</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [35]: </span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="gh">Out[35]: </span>
<span class="go">       empty_col</span>
<span class="go">count          0</span>
<span class="go">unique         0</span>
<span class="go">top          NaN</span>
<span class="go">freq         NaN</span>

<span class="go">[4 rows x 1 columns]</span>
</pre></div>
</div>
</section>
<section id="str-methods-now-call-repr-rather-than-vice-versa">
<h3><code class="docutils literal notranslate"><span class="pre">__str__</span></code> 方法现在调用 <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> 而不是反过来<a class="headerlink" href="v0.25.0.html#str-methods-now-call-repr-rather-than-vice-versa" title="Link to this heading">#</a></h3>
<p>到目前为止，pandas 大部分时间都将字符串表示定义在 pandas 对象的 <code class="docutils literal nospace"><span class="pre">__str__</span></code>/<code class="docutils literal nospace"><span class="pre">__unicode__</span></code>/<code class="docutils literal nospace"><span class="pre">__bytes__</span></code> 方法中，如果未找到特定的 <code class="docutils literal nospace"><span class="pre">__repr__</span></code> 方法，则从 <code class="docutils literal nospace"><span class="pre">__repr__</span></code> 方法中调用 <code class="docutils literal nospace"><span class="pre">__str__</span></code>。Python 3 不需要这样做。在 pandas 0.25 中，pandas 对象的字符串表示现在通常定义在 <code class="docutils literal nospace"><span class="pre">__repr__</span></code> 中，并且对 <code class="docutils literal nospace"><span class="pre">__str__</span></code> 的调用通常会将其传递给 <code class="docutils literal nospace"><span class="pre">__repr__</span></code>（如果不存在特定的 <code class="docutils literal nospace"><span class="pre">__str__</span></code> 方法），这符合 Python 标准。此更改对于 pandas 的直接使用是向后兼容的，但如果您子类化 pandas 对象<em>并</em>为您的子类提供特定的 <code class="docutils literal nospace"><span class="pre">__str__</span></code>/<code class="docutils literal nospace"><span class="pre">__repr__</span></code> 方法，您可能需要调整您的 <code class="docutils literal nospace"><span class="pre">__str__</span></code>/<code class="docutils literal nospace"><span class="pre">__repr__</span></code> 方法（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26495">GH 26495</a>）。</p>
</section>
<section id="indexing-an-intervalindex-with-interval-objects">
<span id="whatsnew-0250-api-breaking-interval-indexing"></span><h3>使用 <code class="docutils literal notranslate"><span class="pre">Interval</span></code> 对象索引 <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code><a class="headerlink" href="v0.25.0.html#indexing-an-intervalindex-with-interval-objects" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 的索引方法已修改为仅在 <a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 查询中要求精确匹配。以前的 <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> 方法匹配任何重叠的 <code class="docutils literal nospace"><span class="pre">Interval</span></code>。使用标量点（例如使用整数查询）的行为不变（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16316">GH 16316</a>）。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [36]: </span><span class="n">ii</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">IntervalIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">)])</span>

<span class="gp">In [37]: </span><span class="n">ii</span>
<span class="gh">Out[37]: </span><span class="go">IntervalIndex([(0, 4], (1, 5], (5, 8]], dtype='interval[int64, right]')</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">in</span></code> 运算符（<code class="docutils literal notranslate"><span class="pre">__contains__</span></code>）现在仅在 <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> 中与 <code class="docutils literal nospace"><span class="pre">Intervals</span></code> 精确匹配时返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>，而以前对于任何与 <code class="docutils literal nospace"><span class="pre">IntervalIndex</span></code> 中某个 <code class="docutils literal nospace"><span class="pre">Interval</span></code> 重叠的 <code class="docutils literal nolate"><span class="pre">Interval</span></code> 都会返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p>
<p><em>旧行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s1">'neither'</span><span class="p">)</span> <span class="ow">in</span> <span class="n">ii</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="kc">True</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s1">'both'</span><span class="p">)</span> <span class="ow">in</span> <span class="n">ii</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="kc">True</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [38]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s1">'neither'</span><span class="p">)</span> <span class="ow">in</span> <span class="n">ii</span>
<span class="gh">Out[38]: </span><span class="go">False</span>

<span class="gp">In [39]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s1">'both'</span><span class="p">)</span> <span class="ow">in</span> <span class="n">ii</span>
<span class="gh">Out[39]: </span><span class="go">False</span>
</pre></div>
</div>
<p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.get_loc.html#pandas.IntervalIndex.get_loc" title="pandas.IntervalIndex.get_loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_loc()</span></code></a> 方法现在仅返回与 <code class="docutils literal nospace"><span class="pre">Interval</span></code> 查询精确匹配的位置，而不是以前返回重叠匹配位置的行为。如果未找到精确匹配，将引发 <code class="docutils literal nospace"><span class="pre">KeyError</span></code>。</p>
<p><em>旧行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">ii</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">ii</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">ii</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">ii</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="p">:</span> <span class="n">Interval</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s1">'right'</span><span class="p">)</span>
</pre></div>
</div>
<p>同样，<a class="reference internal" href="../reference/api/pandas.IntervalIndex.get_indexer.html#pandas.IntervalIndex.get_indexer" title="pandas.IntervalIndex.get_indexer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_indexer()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_indexer_non_unique()</span></code> 也将仅返回与 <code class="docutils literal nospace"><span class="pre">Interval</span></code> 查询精确匹配的位置，其中 <code class="docutils literal nolate"><span class="pre">-1</span></code> 表示未找到精确匹配。</p>
<p>这些索引更改扩展到使用 <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> 索引查询 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [40]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">'abc'</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">ii</span><span class="p">)</span>

<span class="gp">In [41]: </span><span class="n">s</span>
<span class="gh">Out[41]: </span>
<span class="go">(0, 4]    a</span>
<span class="go">(1, 5]    b</span>
<span class="go">(5, 8]    c</span>
<span class="go">Length: 3, dtype: object</span>
</pre></div>
</div>
<p>现在，从 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 或 <code class="docutils literal nospace"><span class="pre">DataFrame</span></code> 中使用 <code class="docutils literal notranslate"><span class="pre">[]</span></code>（<code class="docutils literal nospace"><span class="pre">__getitem__</span></code>）或 <code class="docutils literal nospace"><span class="pre">loc</span></code> 进行选择时，只返回 <code class="docutils literal nospace"><span class="pre">Interval</span></code> 查询的精确匹配。</p>
<p><em>旧行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">s</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">8</span><span class="p">]:</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>    <span class="n">a</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>    <span class="n">b</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">9</span><span class="p">]:</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>    <span class="n">a</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>    <span class="n">b</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [42]: </span><span class="n">s</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
<span class="gh">Out[42]: </span><span class="go">'b'</span>

<span class="gp">In [43]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>
<span class="gh">Out[43]: </span><span class="go">'b'</span>
</pre></div>
</div>
<p>同样，对于非精确匹配，将引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>，而不是返回重叠匹配。</p>
<p><em>旧行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">s</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">9</span><span class="p">]:</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>    <span class="n">a</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>    <span class="n">b</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">10</span><span class="p">]:</span>
<span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>    <span class="n">a</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>    <span class="n">b</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">s</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="p">:</span> <span class="n">Interval</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s1">'right'</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="p">:</span> <span class="n">Interval</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s1">'right'</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.overlaps.html#pandas.IntervalIndex.overlaps" title="pandas.IntervalIndex.overlaps"><code class="xref py py-meth docutils literal notranslate"><span class="pre">overlaps()</span></code></a> 方法可用于创建布尔索引器，它复制了以前返回重叠匹配的行为。</p>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [44]: </span><span class="n">idxr</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">overlaps</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="gp">In [45]: </span><span class="n">idxr</span>
<span class="gh">Out[45]: </span><span class="go">array([ True,  True, False])</span>

<span class="gp">In [46]: </span><span class="n">s</span><span class="p">[</span><span class="n">idxr</span><span class="p">]</span>
<span class="gh">Out[46]: </span>
<span class="go">(0, 4]    a</span>
<span class="go">(1, 5]    b</span>
<span class="go">Length: 2, dtype: object</span>

<span class="gp">In [47]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idxr</span><span class="p">]</span>
<span class="gh">Out[47]: </span>
<span class="go">(0, 4]    a</span>
<span class="go">(1, 5]    b</span>
<span class="go">Length: 2, dtype: object</span>
</pre></div>
</div>
</section>
<section id="binary-ufuncs-on-series-now-align">
<span id="whatsnew-0250-api-breaking-ufunc"></span><h3>Series 上的二元 ufunc 现在对齐<a class="headerlink" href="v0.25.0.html#binary-ufuncs-on-series-now-align" title="Link to this heading">#</a></h3>
<p>当两个输入都是 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时，应用像 <code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.power()</span></code> 这样的二元 ufunc 现在会使输入对齐（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23293">GH 23293</a>）。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [48]: </span><span class="n">s1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">])</span>

<span class="gp">In [49]: </span><span class="n">s2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'d'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">])</span>

<span class="gp">In [50]: </span><span class="n">s1</span>
<span class="gh">Out[50]: </span>
<span class="go">a    1</span>
<span class="go">b    2</span>
<span class="go">c    3</span>
<span class="go">Length: 3, dtype: int64</span>

<span class="gp">In [51]: </span><span class="n">s2</span>
<span class="gh">Out[51]: </span>
<span class="go">d    3</span>
<span class="go">c    4</span>
<span class="go">b    5</span>
<span class="go">Length: 3, dtype: int64</span>
</pre></div>
</div>
<p><em>旧行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
<span class="gh">Out[5]:</span>
<span class="go">a      1</span>
<span class="go">b     16</span>
<span class="go">c    243</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p><em>新行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [52]: </span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
<span class="gh">Out[52]: </span>
<span class="go">a     1.0</span>
<span class="go">b    32.0</span>
<span class="go">c    81.0</span>
<span class="go">d     NaN</span>
<span class="go">Length: 4, dtype: float64</span>
</pre></div>
</div>
<p>这与 pandas 中其他二元操作（如 <a class="reference internal" href="../reference/api/pandas.Series.add.html#pandas.Series.add" title="pandas.Series.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.add()</span></code></a>）的行为匹配。要保留以前的行为，请在应用 ufunc 之前将另一个 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 转换为数组。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [53]: </span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="gh">Out[53]: </span>
<span class="go">a      1</span>
<span class="go">b     16</span>
<span class="go">c    243</span>
<span class="go">Length: 3, dtype: int64</span>
</pre></div>
</div>
</section>
<section id="categorical-argsort-now-places-missing-values-at-the-end">
<h3>Categorical.argsort 现在将缺失值放在末尾<a class="headerlink" href="v0.25.0.html#categorical-argsort-now-places-missing-values-at-the-end" title="Link to this heading">#</a></h3>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.argsort()</span></code> 现在将缺失值放在数组的末尾，使其与 NumPy 和 pandas 的其余部分保持一致（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21801">GH 21801</a>）。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [54]: </span><span class="n">cat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s1">'b'</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">'a'</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">],</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><em>旧行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">cat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s1">'b'</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">'a'</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">],</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">cat</span><span class="o">.</span><span class="n">argsort</span><span class="p">()</span>
<span class="gh">Out[3]: </span><span class="go">array([1, 2, 0])</span>

<span class="gp">In [4]: </span><span class="n">cat</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">argsort</span><span class="p">()]</span>
<span class="gh">Out[4]:</span>
<span class="go">[NaN, a, b]</span>
<span class="go">categories (2, object): [a &lt; b]</span>
</pre></div>
</div>
<p><em>新行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [55]: </span><span class="n">cat</span><span class="o">.</span><span class="n">argsort</span><span class="p">()</span>
<span class="gh">Out[55]: </span><span class="go">array([2, 0, 1])</span>

<span class="gp">In [56]: </span><span class="n">cat</span><span class="p">[</span><span class="n">cat</span><span class="o">.</span><span class="n">argsort</span><span class="p">()]</span>
<span class="gh">Out[56]: </span>
<span class="go">['a', 'b', NaN]</span>
<span class="go">Categories (2, object): ['a' &lt; 'b']</span>
</pre></div>
</div>
</section>
<section id="column-order-is-preserved-when-passing-a-list-of-dicts-to-dataframe">
<span id="whatsnew-0250-api-breaking-list-of-dict"></span><h3>当将字典列表传递给 DataFrame 时，列顺序得到保留<a class="headerlink" href="v0.25.0.html#column-order-is-preserved-when-passing-a-list-of-dicts-to-dataframe" title="Link to this heading">#</a></h3>
<p>从 Python 3.7 开始，<code class="docutils literal notranslate"><span class="pre">dict</span></code> 的键顺序<a class="reference external" href="https://mail.python.org/pipermail/python-dev/2017-December/151283.html">得到保证</a>。实际上，自 Python 3.6 以来一直如此。<a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数现在以与 <code class="docutils literal nospace"><span class="pre">OrderedDict</span></code> 列表相同的方式处理字典列表，即保留字典的顺序。此更改仅适用于 pandas 在 Python &gt;= 3.6 上运行时（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27309">GH 27309</a>）。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [57]: </span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">   ....: </span>    <span class="p">{</span><span class="s1">'name'</span><span class="p">:</span> <span class="s1">'Joe'</span><span class="p">,</span> <span class="s1">'state'</span><span class="p">:</span> <span class="s1">'NY'</span><span class="p">,</span> <span class="s1">'age'</span><span class="p">:</span> <span class="mi">18</span><span class="p">},</span>
<span class="gp">   ....: </span>    <span class="p">{</span><span class="s1">'name'</span><span class="p">:</span> <span class="s1">'Jane'</span><span class="p">,</span> <span class="s1">'state'</span><span class="p">:</span> <span class="s1">'KY'</span><span class="p">,</span> <span class="s1">'age'</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span> <span class="s1">'hobby'</span><span class="p">:</span> <span class="s1">'Minecraft'</span><span class="p">},</span>
<span class="gp">   ....: </span>    <span class="p">{</span><span class="s1">'name'</span><span class="p">:</span> <span class="s1">'Jean'</span><span class="p">,</span> <span class="s1">'state'</span><span class="p">:</span> <span class="s1">'OK'</span><span class="p">,</span> <span class="s1">'age'</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">'finances'</span><span class="p">:</span> <span class="s1">'good'</span><span class="p">}</span>
<span class="gp">   ....: </span><span class="p">]</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<p><em>以前的行为</em>:</p>
<p>以前，列是按字典顺序排序的，</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
   <span class="n">age</span> <span class="n">finances</span>      <span class="n">hobby</span>  <span class="n">name</span> <span class="n">state</span>
<span class="mi">0</span>   <span class="mi">18</span>      <span class="n">NaN</span>        <span class="n">NaN</span>   <span class="n">Joe</span>    <span class="n">NY</span>
<span class="mi">1</span>   <span class="mi">19</span>      <span class="n">NaN</span>  <span class="n">Minecraft</span>  <span class="n">Jane</span>    <span class="n">KY</span>
<span class="mi">2</span>   <span class="mi">20</span>     <span class="n">good</span>        <span class="n">NaN</span>  <span class="n">Jean</span>    <span class="n">OK</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<p>现在列顺序与 <code class="docutils literal nospace"><span class="pre">dict</span></code> 中键的插入顺序匹配，并考虑从上到下的所有记录。因此，与以前的 pandas 版本相比，生成的 DataFrame 的列顺序已更改。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [58]: </span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gh">Out[58]: </span>
<span class="go">   name state  age      hobby finances</span>
<span class="go">0   Joe    NY   18        NaN      NaN</span>
<span class="go">1  Jane    KY   19  Minecraft      NaN</span>
<span class="go">2  Jean    OK   20        NaN     good</span>

<span class="go">[3 rows x 5 columns]</span>
</pre></div>
</div>
</section>
<section id="increased-minimum-versions-for-dependencies">
<span id="whatsnew-0250-api-breaking-deps"></span><h3>增加了依赖项的最低版本<a class="headerlink" href="v0.25.0.html#increased-minimum-versions-for-dependencies" title="Link to this heading">#</a></h3>
<p>由于放弃了对 Python 2.7 的支持，一些可选依赖项的最低版本已更新（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25725">GH 25725</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24942">GH 24942</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25752">GH 25752</a>）。此外，一些受支持的依赖项的最低版本也已更新（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23519">GH 23519</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25554">GH 25554</a>）。如果已安装，我们现在要求：</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>包</p></th>
<th class="head"><p>最低版本</p></th>
<th class="head"><p>必需</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>numpy</p></td>
<td><p>1.13.3</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pytz</p></td>
<td><p>2015.4</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>python-dateutil</p></td>
<td><p>2.6.1</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>bottleneck</p></td>
<td><p>1.2.1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>numexpr</p></td>
<td><p>2.6.2</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pytest (dev)</p></td>
<td><p>4.0.2</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>对于<a class="reference external" href="../getting_started/install.html">可选库</a>，一般建议使用最新版本。下表列出了 pandas 开发过程中当前正在测试的每个库的最低版本。低于最低测试版本的可选库可能仍然可用，但不被视为受支持。</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>包</p></th>
<th class="head"><p>最低版本</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>beautifulsoup4</p></td>
<td><p>4.6.0</p></td>
</tr>
<tr class="row-odd"><td><p>fastparquet</p></td>
<td><p>0.2.1</p></td>
</tr>
<tr class="row-even"><td><p>gcsfs</p></td>
<td><p>0.2.2</p></td>
</tr>
<tr class="row-odd"><td><p>lxml</p></td>
<td><p>3.8.0</p></td>
</tr>
<tr class="row-even"><td><p>matplotlib</p></td>
<td><p>2.2.2</p></td>
</tr>
<tr class="row-odd"><td><p>openpyxl</p></td>
<td><p>2.4.8</p></td>
</tr>
<tr class="row-even"><td><p>pyarrow</p></td>
<td><p>0.9.0</p></td>
</tr>
<tr class="row-odd"><td><p>pymysql</p></td>
<td><p>0.7.1</p></td>
</tr>
<tr class="row-even"><td><p>pytables</p></td>
<td><p>3.4.2</p></td>
</tr>
<tr class="row-odd"><td><p>scipy</p></td>
<td><p>0.19.0</p></td>
</tr>
<tr class="row-even"><td><p>sqlalchemy</p></td>
<td><p>1.1.4</p></td>
</tr>
<tr class="row-odd"><td><p>xarray</p></td>
<td><p>0.8.2</p></td>
</tr>
<tr class="row-even"><td><p>xlrd</p></td>
<td><p>1.1.0</p></td>
</tr>
<tr class="row-odd"><td><p>xlsxwriter</p></td>
<td><p>0.9.8</p></td>
</tr>
<tr class="row-even"><td><p>xlwt</p></td>
<td><p>1.2.0</p></td>
</tr>
</tbody>
</table>
<p>有关更多信息，请参阅<a class="reference internal" href="../getting_started/install.html#install-dependencies"><span class="std std-ref">依赖项</span></a>和<a class="reference internal" href="../getting_started/install.html#install-optional-dependencies"><span class="std std-ref">可选依赖项</span></a>。</p>
</section>
<section id="other-api-changes">
<span id="whatsnew-0250-api-other"></span><h3>其他 API 更改<a class="headerlink" href="v0.25.0.html#other-api-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeTZDtype.html#pandas.DatetimeTZDtype" title="pandas.DatetimeTZDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code></a> 现在将把 pytz 时区标准化为常见的时区实例（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24713">GH 24713</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 标量现在实现了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_numpy()</span></code> 方法，作为 <a class="reference internal" href="../reference/api/pandas.Timestamp.to_datetime64.html#pandas.Timestamp.to_datetime64" title="pandas.Timestamp.to_datetime64"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.to_datetime64()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Timedelta.to_timedelta64.html#pandas.Timedelta.to_timedelta64" title="pandas.Timedelta.to_timedelta64"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timedelta.to_timedelta64()</span></code></a> 的别名。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24653">GH 24653</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.strptime.html#pandas.Timestamp.strptime" title="pandas.Timestamp.strptime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.strptime()</span></code></a> 现在将引发 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25016">GH 25016</a>）</p></li>
<li><p>将 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 与不支持的对象进行比较，现在返回 <a class="reference external" href="https://docs.pythonlang.cn/3/library/constants.html#NotImplemented" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NotImplemented</span></code></a> 而不是引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>。这意味着不支持的富比较被委托给其他对象，现在与 Python 3 中 <code class="docutils literal notranslate"><span class="pre">datetime</span></code> 对象的行为一致（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24011">GH 24011</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.snap.html#pandas.DatetimeIndex.snap" title="pandas.DatetimeIndex.snap"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.snap()</span></code></a> 的错误未保留输入 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">name</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25575">GH 25575</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.agg.html#pandas.core.groupby.DataFrameGroupBy.agg" title="pandas.core.groupby.DataFrameGroupBy.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.agg()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">arg</span></code> 参数已重命名为 <code class="docutils literal notranslate"><span class="pre">func</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26089">GH 26089</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Window.aggregate()</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">arg</span></code> 参数已重命名为 <code class="docutils literal notranslate"><span class="pre">func</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26372">GH 26372</a>）</p></li>
<li><p>大多数 pandas 类都有一个 <code class="docutils literal notranslate"><span class="pre">__bytes__</span></code> 方法，用于获取对象的 python2 风格的字节串表示。由于放弃了 Python2，此方法已被删除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26447">GH 26447</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.str</span></code> 访问器已对单层 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 禁用，如有必要，请使用 <a class="reference internal" href="../reference/api/pandas.MultiIndex.to_flat_index.html#pandas.MultiIndex.to_flat_index" title="pandas.MultiIndex.to_flat_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.to_flat_index()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23679">GH 23679</a>）</p></li>
<li><p>移除了对剪贴板 gtk 包的支持（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26563">GH 26563</a>）</p></li>
<li><p>现在，使用不支持的 Beautiful Soup 4 版本将引发 <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27063">GH 27063</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.to_excel.html#pandas.Series.to_excel" title="pandas.Series.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_excel()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_excel()</span></code></a> 在保存时区感知数据时将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27008">GH 27008</a>，<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7056">GH 7056</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray.argsort()</span></code> 将 NA 值放在排序数组的末尾。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21801">GH 21801</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_hdf.html#pandas.DataFrame.to_hdf" title="pandas.DataFrame.to_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_hdf()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.to_hdf.html#pandas.Series.to_hdf" title="pandas.Series.to_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_hdf()</span></code></a> 在保存带有扩展数据类型的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 为 <code class="docutils literal notranslate"><span class="pre">fixed</span></code> 格式时，现在将引发 <code class="docutils literal nospace"><span class="pre">NotImplementedError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7775">GH 7775</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中传递重复的 <code class="docutils literal notranslate"><span class="pre">names</span></code> 现在将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17346">GH 17346</a>）</p></li>
</ul>
</section>
</section>
<section id="deprecations">
<span id="whatsnew-0250-deprecations"></span><h2>弃用<a class="headerlink" href="v0.25.0.html#deprecations" title="Link to this heading">#</a></h2>
<section id="sparse-subclasses">
<h3>稀疏子类<a class="headerlink" href="v0.25.0.html#sparse-subclasses" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> 和 <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> 子类已弃用。它们的功能最好由带有稀疏值的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 或 <code class="docutils literal nospace"><span class="pre">DataFrame</span></code> 提供。</p>
<p><strong>旧方法</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">SparseDataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]})</span>
<span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
<p><strong>新方法</strong></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [59]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">arrays</span><span class="o">.</span><span class="n">SparseArray</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])})</span>

<span class="gp">In [60]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[60]: </span>
<span class="go">A    Sparse[int64, 0]</span>
<span class="go">Length: 1, dtype: object</span>
</pre></div>
</div>
<p>这两种方法的内存使用情况相同（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19239">GH 19239</a>）。</p>
</section>
<section id="msgpack-format">
<h3>msgpack 格式<a class="headerlink" href="v0.25.0.html#msgpack-format" title="Link to this heading">#</a></h3>
<p>msgpack 格式自 0.25 版本起已弃用，并将在未来版本中移除。建议使用 pyarrow 进行 pandas 对象的线上传输。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27084">GH 27084</a>）</p>
</section>
<section id="other-deprecations">
<h3>其他弃用<a class="headerlink" href="v0.25.0.html#other-deprecations" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>已弃用的 <code class="docutils literal notranslate"><span class="pre">.ix[]</span></code> 索引器现在引发更明显的 <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code> 而不是 <code class="docutils literal nospace"><span class="pre">DeprecationWarning</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26438">GH 26438</a>）。</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.to_timedelta()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.Timedelta()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.TimedeltaIndex()</span></code></a> 中 <code class="docutils literal nospace"><span class="pre">units</span></code> 的 <code class="docutils literal nospace"><span class="pre">units=M</span></code>（月）和 <code class="docutils literal nospace"><span class="pre">units=Y</span></code>（年）参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16344">GH 16344</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.concat()</span></code></a> 已弃用 <code class="docutils literal notranslate"><span class="pre">join_axes</span></code> 关键字。相反，请在结果或输入上使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex" title="pandas.DataFrame.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.reindex_like.html#pandas.DataFrame.reindex_like" title="pandas.DataFrame.reindex_like"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reindex_like()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21951">GH 21951</a>）</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">SparseArray.values</span></code> 属性已弃用。您可以使用 <code class="docutils literal notranslate"><span class="pre">np.asarray(...)</span></code> 或 <code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArray.to_dense()</span></code> 方法代替（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26421">GH 26421</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.to_datetime()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.to_timedelta()</span></code></a> 函数已弃用 <code class="docutils literal notranslate"><span class="pre">box</span></code> 关键字。相反，请使用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_numpy()</span></code> 或 <a class="reference internal" href="../reference/api/pandas.Timestamp.to_datetime64.html#pandas.Timestamp.to_datetime64" title="pandas.Timestamp.to_datetime64"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.to_datetime64()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Timedelta.to_timedelta64.html#pandas.Timedelta.to_timedelta64" title="pandas.Timedelta.to_timedelta64"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timedelta.to_timedelta64()</span></code></a>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24416">GH 24416</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.compound()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.compound()</span></code> 方法已弃用，并将在未来版本中移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26405">GH 26405</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.RangeIndex.html#pandas.RangeIndex" title="pandas.RangeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeIndex</span></code></a> 的内部属性 <code class="docutils literal notranslate"><span class="pre">_start</span></code>、<code class="docutils literal nospace"><span class="pre">_stop</span></code> 和 <code class="docutils literal nospace"><span class="pre">_step</span></code> 已弃用。请改用公共属性 <a class="reference internal" href="../reference/api/pandas.RangeIndex.start.html#pandas.RangeIndex.start" title="pandas.RangeIndex.start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">start</span></code></a>、<a class="reference internal" href="../reference/api/pandas.RangeIndex.stop.html#pandas.RangeIndex.stop" title="pandas.RangeIndex.stop"><code class="xref py py-attr docutils literal notranslate"><span class="pre">stop</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.RangeIndex.step.html#pandas.RangeIndex.step" title="pandas.RangeIndex.step"><code class="xref py py-attr docutils literal notranslate"><span class="pre">step</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26581">GH 26581</a>）。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.ftype()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.ftypes()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.ftypes()</span></code> 方法已弃用，并将在未来版本中移除。相反，请使用 <a class="reference internal" href="../reference/api/pandas.Series.dtype.html#pandas.Series.dtype" title="pandas.Series.dtype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.dtype()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.dtypes.html#pandas.DataFrame.dtypes" title="pandas.DataFrame.dtypes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.dtypes()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26705">GH 26705</a>）。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.get_values()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.get_values()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.get_values()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArray.get_values()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.get_values()</span></code> 方法已弃用。可以使用 <code class="docutils literal notranslate"><span class="pre">np.asarray(..)</span></code> 或 <a class="reference internal" href="../reference/api/pandas.Series.to_numpy.html#pandas.Series.to_numpy" title="pandas.Series.to_numpy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_numpy()</span></code></a> 代替（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19617">GH 19617</a>）。</p></li>
<li><p>NumPy ufuncs 上的 'outer' 方法（例如 <code class="docutils literal notranslate"><span class="pre">np.subtract.outer</span></code>）已在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 对象上弃用。请先使用 <a class="reference internal" href="../reference/api/pandas.Series.array.html#pandas.Series.array" title="pandas.Series.array"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.array</span></code></a> 将输入转换为数组（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27186">GH 27186</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timedelta.resolution.html#pandas.Timedelta.resolution" title="pandas.Timedelta.resolution"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timedelta.resolution()</span></code></a> 已弃用并替换为 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Timedelta.resolution_string()</span></code>。在未来版本中，<a class="reference internal" href="../reference/api/pandas.Timedelta.resolution.html#pandas.Timedelta.resolution" title="pandas.Timedelta.resolution"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timedelta.resolution()</span></code></a> 将更改为与标准库 <a class="reference external" href="https://docs.pythonlang.cn/3/library/datetime.html#datetime.timedelta.resolution" title="(in Python v3.13)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">datetime.timedelta.resolution</span></code></a> 的行为保持一致（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21344">GH 21344</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code></a> 已取消弃用。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25220">GH 25220</a>）</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Index.dtype_str</span></code> 已弃用。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18262">GH 18262</a>）</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.imag</span></code> 和 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.real</span></code> 已弃用。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18262">GH 18262</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.put()</span></code> 已弃用。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18262">GH 18262</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.item.html#pandas.Index.item" title="pandas.Index.item"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.item()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.item.html#pandas.Series.item" title="pandas.Series.item"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.item()</span></code></a> 已弃用。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18262">GH 18262</a>）</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> 中 <code class="docutils literal notranslate"><span class="pre">ordered=None</span></code> 的默认值已弃用，转而使用 <code class="docutils literal nospace"><span class="pre">ordered=False</span></code>。在分类类型之间转换时，必须显式传递 <code class="docutils literal nospace"><span class="pre">ordered=True</span></code> 才能保留。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26336">GH 26336</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.contains()</span></code> 已弃用。请改用 <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">in</span> <span class="pre">index</span></code>（<code class="docutils literal nospace"><span class="pre">__contains__</span></code>）（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17753">GH 17753</a>）。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.get_dtype_counts()</span></code> 已弃用。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18262">GH 18262</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.ravel()</span></code> 将返回 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 而不是 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27199">GH 27199</a>）</p></li>
</ul>
</section>
</section>
<section id="removal-of-prior-version-deprecations-changes">
<span id="whatsnew-0250-prior-deprecations"></span><h2>移除先前版本弃用/更改<a class="headerlink" href="v0.25.0.html#removal-of-prior-version-deprecations-changes" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>移除了 <code class="docutils literal notranslate"><span class="pre">Panel</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25047">GH 25047</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25191">GH 25191</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25231">GH 25231</a>）</p></li>
<li><p>移除了 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中先前弃用的 <code class="docutils literal nospace"><span class="pre">sheetname</span></code> 关键字（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16442">GH 16442</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20938">GH 20938</a>）</p></li>
<li><p>移除了先前弃用的 <code class="docutils literal notranslate"><span class="pre">TimeGrouper</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16942">GH 16942</a>）</p></li>
<li><p>移除了 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中先前弃用的 <code class="docutils literal nospace"><span class="pre">parse_cols</span></code> 关键字（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16488">GH 16488</a>）</p></li>
<li><p>移除了先前弃用的 <code class="docutils literal notranslate"><span class="pre">pd.options.html.border</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16970">GH 16970</a>）</p></li>
<li><p>移除了先前弃用的 <code class="docutils literal notranslate"><span class="pre">convert_objects</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11221">GH 11221</a>）</p></li>
<li><p>移除了 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 和 <code class="docutils literal nospace"><span class="pre">Series</span></code> 的先前弃用的 <code class="docutils literal nospace"><span class="pre">select</span></code> 方法（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17633">GH 17633</a>）</p></li>
<li><p>移除了先前弃用的行为，即 <a class="reference internal" href="../reference/api/pandas.Series.cat.rename_categories.html#pandas.Series.cat.rename_categories" title="pandas.Series.cat.rename_categories"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rename_categories()</span></code></a> 中将 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 视为类列表（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17982">GH 17982</a>）</p></li>
<li><p>移除了先前弃用的 <code class="docutils literal nospace"><span class="pre">DataFrame.reindex_axis</span></code> 和 <code class="docutils literal nospace"><span class="pre">Series.reindex_axis</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17842">GH 17842</a>）</p></li>
<li><p>移除了先前弃用的行为，即使用 <a class="reference internal" href="../reference/api/pandas.Series.rename_axis.html#pandas.Series.rename_axis" title="pandas.Series.rename_axis"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rename_axis()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.rename_axis.html#pandas.DataFrame.rename_axis" title="pandas.DataFrame.rename_axis"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rename_axis()</span></code></a> 更改列或索引标签（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17842">GH 17842</a>）</p></li>
<li><p>移除了 <a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_html()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> 中先前弃用的 <code class="docutils literal nospace"><span class="pre">tupleize_cols</span></code> 关键字参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17877">GH 17877</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17820">GH 17820</a>）</p></li>
<li><p>移除了先前弃用的 <code class="docutils literal notranslate"><span class="pre">DataFrame.from.csv</span></code> 和 <code class="docutils literal nospace"><span class="pre">Series.from_csv</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17812">GH 17812</a>）</p></li>
<li><p>移除了 <a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.mask.html#pandas.DataFrame.mask" title="pandas.DataFrame.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mask()</span></code></a> 中先前弃用的 <code class="docutils literal nospace"><span class="pre">raise_on_error</span></code> 关键字参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17744">GH 17744</a>）</p></li>
<li><p>移除了 <code class="docutils literal notranslate"><span class="pre">astype</span></code> 中先前弃用的 <code class="docutils literal nospace"><span class="pre">ordered</span></code> 和 <code class="docutils literal nospace"><span class="pre">categories</span></code> 关键字参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17742">GH 17742</a>）</p></li>
<li><p>移除了先前弃用的 <code class="docutils literal notranslate"><span class="pre">cdate_range</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17691">GH 17691</a>）</p></li>
<li><p>移除了 <code class="xref py py-func docutils literal notranslate"><span class="pre">SeriesGroupBy.nth()</span></code> 中 <code class="docutils literal notranslate"><span class="pre">dropna</span></code> 关键字参数的先前弃用的 <code class="docutils literal nospace"><span class="pre">True</span></code> 选项（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17493">GH 17493</a>）</p></li>
<li><p>移除了 <a class="reference internal" href="../reference/api/pandas.Series.take.html#pandas.Series.take" title="pandas.Series.take"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.take()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.take.html#pandas.DataFrame.take" title="pandas.DataFrame.take"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.take()</span></code></a> 中先前弃用的 <code class="docutils literal nospace"><span class="pre">convert</span></code> 关键字参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17352">GH 17352</a>）</p></li>
<li><p>移除了与 <code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> 对象进行算术运算的先前弃用行为（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21152">GH 21152</a>）</p></li>
</ul>
</section>
<section id="performance-improvements">
<span id="whatsnew-0250-performance"></span><h2>性能改进<a class="headerlink" href="v0.25.0.html#performance-improvements" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">SparseArray</span></code> 初始化速度显著加快，这有利于大多数操作，修复了 v0.20.0 中引入的性能回归（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24985">GH 24985</a>）</p></li>
<li><p>当输出包含任何字符串或非原生字节序列的数据时，<a class="reference internal" href="../reference/api/pandas.DataFrame.to_stata.html#pandas.DataFrame.to_stata" title="pandas.DataFrame.to_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code></a> 现在速度更快（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25045">GH 25045</a>）</p></li>
<li><p>提高了 <a class="reference internal" href="../reference/api/pandas.Series.searchsorted.html#pandas.Series.searchsorted" title="pandas.Series.searchsorted"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.searchsorted()</span></code></a> 的性能。当 dtype 为 int8/int16/int32 且搜索的键在 dtype 的整数边界内时，速度提升尤其显著（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22034">GH 22034</a>）</p></li>
<li><p>提高了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">GroupBy.quantile()</span></code> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20405">GH 20405</a>）</p></li>
<li><p>提高了 <a class="reference internal" href="../reference/api/pandas.RangeIndex.html#pandas.RangeIndex" title="pandas.RangeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeIndex</span></code></a> 上切片和其他选定操作的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26565">GH 26565</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26617">GH 26617</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26722">GH 26722</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.RangeIndex.html#pandas.RangeIndex" title="pandas.RangeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeIndex</span></code></a> 现在执行标准查找而无需实例化实际哈希表，从而节省了内存（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16685">GH 16685</a>）</p></li>
<li><p>通过更快的标记化和更快的解析小浮点数，提高了 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25784">GH 25784</a>）</p></li>
<li><p>通过更快地解析 N/A 和布尔值，提高了 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25804">GH 25804</a>）</p></li>
<li><p>通过移除到 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 的转换，提高了 <code class="xref py py-attr docutils literal notranslate"><span class="pre">IntervalIndex.is_monotonic</span></code>、<code class="xref py py-attr docutils literal notranslate"><span class="pre">IntervalIndex.is_monotonic_increasing</span></code> 和 <code class="xref py py-attr docutils literal notranslate"><span class="pre">IntervalIndex.is_monotonic_decreasing</span></code> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24813">GH 24813</a>）</p></li>
<li><p>提高了写入 datetime 数据类型时 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25708">GH 25708</a>）</p></li>
<li><p>通过更快地连接日期列而无需额外转换为字符串（对于整数/浮点零和浮点 <code class="docutils literal notranslate"><span class="pre">NaN</span></code>）；通过更快地检查字符串是否可能为日期，提高了 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25922">GH 25922</a>）</p></li>
<li><p>改进了无法存储 NaN 的数据类型的 nanops 性能。对于 <a class="reference internal" href="../reference/api/pandas.Series.all.html#pandas.Series.all" title="pandas.Series.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.all()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.any.html#pandas.Series.any" title="pandas.Series.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.any()</span></code></a>，速度提升尤其显著（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25070">GH 25070</a>）</p></li>
<li><p>通过映射类别而不是映射所有值，提高了在分类系列上使用字典映射器时 <a class="reference internal" href="../reference/api/pandas.Series.map.html#pandas.Series.map" title="pandas.Series.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.map()</span></code></a> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23785">GH 23785</a>）</p></li>
<li><p>提高了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.intersection()</span></code> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24813">GH 24813</a>）</p></li>
<li><p>通过更快地连接日期列，无需将零整数/浮点和浮点 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 额外转换为字符串；通过更快地检查字符串是否可能为日期，提高了 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25754">GH 25754</a>）</p></li>
<li><p>通过移除到 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 的转换，提高了 <code class="xref py py-attr docutils literal notranslate"><span class="pre">IntervalIndex.is_unique</span></code> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24813">GH 24813</a>）</p></li>
<li><p>通过重新启用专用代码路径，恢复了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.__iter__()</span></code> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26702">GH 26702</a>）</p></li>
<li><p>在构建至少一个 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 级别的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时，性能得到了提高（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22044">GH 22044</a>）</p></li>
<li><p>通过在检查 <code class="docutils literal notranslate"><span class="pre">SettingWithCopyWarning</span></code> 时不再需要垃圾回收，提高了性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27031">GH 27031</a>）</p></li>
<li><p>对于 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_datetime()</span></code></a>，cache 参数的默认值已更改为 <code class="docutils literal notranslate"><span class="pre">True</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26043">GH 26043</a>）</p></li>
<li><p>提高了 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 在给定非唯一、单调数据时的切片性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27136">GH 27136</a>）。</p></li>
<li><p>提高了索引导向数据 <code class="xref py py-meth docutils literal notranslate"><span class="pre">pd.read_json()</span></code> 的性能。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26773">GH 26773</a>）</p></li>
<li><p>提高了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.shape()</span></code> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27384">GH 27384</a>）。</p></li>
</ul>
</section>
<section id="bug-fixes">
<span id="whatsnew-0250-bug-fixes"></span><h2>错误修复<a class="headerlink" href="v0.25.0.html#bug-fixes" title="Link to this heading">#</a></h2>
<section id="categorical">
<h3>分类<a class="headerlink" href="v0.25.0.html#categorical" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.at.html#pandas.DataFrame.at" title="pandas.DataFrame.at"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.at()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.at.html#pandas.Series.at" title="pandas.Series.at"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.at()</span></code></a> 中的错误，如果索引是 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 则会引发异常（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20629">GH 20629</a>）</p></li>
<li><p>修复了带有缺失值的有序 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 与标量进行比较时有时会错误地返回 <code class="docutils literal notranslate"><span class="pre">True</span></code> 的错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26504">GH 26504</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.dropna.html#pandas.DataFrame.dropna" title="pandas.DataFrame.dropna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.dropna()</span></code></a> 中的错误，当 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 具有包含 <a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 对象的 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 时，错误地引发了 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25087">GH 25087</a>）</p></li>
</ul>
</section>
<section id="datetimelike">
<h3>日期时间类型<a class="headerlink" href="v0.25.0.html#datetimelike" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的错误，当使用遥远的未来日期和指定的 <code class="docutils literal notranslate"><span class="pre">format</span></code> 参数调用时，会引发（不正确）的 <code class="docutils literal nospace"><span class="pre">ValueError</span></code>，而不是引发 <code class="docutils literal nospace"><span class="pre">OutOfBoundsDatetime</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23830">GH 23830</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的错误，当 <code class="docutils literal notranslate"><span class="pre">cache=True</span></code> 调用时，如果 <code class="docutils literal nospace"><span class="pre">arg</span></code> 包含来自集合 <code class="docutils literal nospace"><span class="pre">{None,</span> <span class="pre">numpy.nan,</span> <span class="pre">pandas.NaT}</span></code> 的至少两个不同元素，则会引发 <code class="docutils literal nospace"><span class="pre">InvalidIndexError:</span> <span class="pre">Reindexing</span> <span class="pre">only</span> <span class="pre">valid</span> <span class="pre">with</span> <span class="pre">uniquely</span> <span class="pre">valued</span> <span class="pre">Index</span> <span class="pre">objects</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22305">GH 22305</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中的错误，其中时区感知数据（<code class="docutils literal notranslate"><span class="pre">dtype='datetime64[ns]</span></code>）未转换为本地时区（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25843">GH 25843</a>）</p></li>
<li><p>改进了各种日期时间函数中的 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 类型检查，以防止在使用子类化的 <code class="docutils literal notranslate"><span class="pre">datetime</span></code> 时出现异常（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25851">GH 25851</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> repr 中的错误，其中 <code class="docutils literal notranslate"><span class="pre">np.datetime64('NaT')</span></code> 和 <code class="docutils literal nospace"><span class="pre">np.timedelta64('NaT')</span></code> 带有 <code class="docutils literal nospace"><span class="pre">dtype=object</span></code> 会被表示为 <code class="docutils literal nospace"><span class="pre">NaN</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25445">GH 25445</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中未在错误设置为 coerce 时用 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 替换无效参数的错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26122">GH 26122</a>）</p></li>
<li><p>将带有非零月份的 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 添加到 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 的错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26258">GH 26258</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的错误，当使用 <code class="docutils literal notranslate"><span class="pre">format='%Y%m%d'</span></code> 和 <code class="docutils literal nospace"><span class="pre">error='coerce'</span></code> 调用时，对于无效日期和 <code class="docutils literal nospace"><span class="pre">NaN</span></code> 值的混合，会引发未处理的 <code class="docutils literal nospace"><span class="pre">OverflowError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25512">GH 25512</a>）</p></li>
<li><p>日期时间类型索引的 <code class="xref py py-meth docutils literal notranslate"><span class="pre">isin()</span></code> 中的错误；<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a>、<a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 忽略了 <code class="docutils literal notranslate"><span class="pre">levels</span></code> 参数。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26675">GH 26675</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的错误，当使用 <code class="docutils literal notranslate"><span class="pre">format='%Y%m%d'</span></code> 调用长度大于等于 6 位数的无效整数日期且 <code class="docutils literal nospace"><span class="pre">errors='ignore'</span></code> 时，会引发 <code class="docutils literal nospace"><span class="pre">TypeError</span></code></p></li>
<li><p>将 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 与零维 numpy 数组进行比较时出现的错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26689">GH 26689</a>）</p></li>
<li><p>从单位非纳秒且超出范围的时间戳的 numpy <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 数组构造 <code class="docutils literal nospace"><span class="pre">Series</span></code> 或 <code class="docutils literal nospace"><span class="pre">DataFrame</span></code> 时，会生成垃圾数据，现在将正确引发 <code class="docutils literal nospace"><span class="pre">OutOfBoundsDatetime</span></code> 错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26206">GH 26206</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> 中的错误，对于非常大或非常小的日期，会引发不必要的 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26651">GH 26651</a>）</p></li>
<li><p>将 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 添加到 <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> 对象时会引发错误，而不是返回 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24775">GH 24775</a>）</p></li>
<li><p>将包含 <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code> 对象的零维 numpy 数组与 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 进行比较时，会错误地引发 <code class="docutils literal nospace"><span class="pre">TypeError</span></code> 的错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26916">GH 26916</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的错误，当 <code class="docutils literal notranslate"><span class="pre">cache=True</span></code> 调用时，如果 <code class="docutils literal nospace"><span class="pre">arg</span></code> 包含具有不同偏移量的日期时间字符串，则会引发 <code class="docutils literal notranslate"><span class="pre">ValueError:</span> <span class="pre">Tz-aware</span> <span class="pre">datetime.datetime</span> <span class="pre">cannot</span> <span class="pre">be</span> <span class="pre">converted</span> <span class="pre">to</span> <span class="pre">datetime64</span> <span class="pre">unless</span> <span class="pre">utc=True</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26097">GH 26097</a>）</p></li>
<li></li>
</ul>
</section>
<section id="timedelta">
<h3>时间差<a class="headerlink" href="v0.25.0.html#timedelta" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">TimedeltaIndex.intersection()</span></code> 中的错误，对于非单调索引，在某些情况下，当实际存在交集时，会返回空 <code class="docutils literal notranslate"><span class="pre">Index</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25913">GH 25913</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 和 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 之间的比较会引发 <code class="docutils literal nospace"><span class="pre">TypeError</span></code> 的错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26039">GH 26039</a>）</p></li>
<li><p>将 <code class="xref py py-class docutils literal notranslate"><span class="pre">BusinessHour</span></code> 添加或减去到 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 时，结果时间分别落在后一天或前一天的错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26381">GH 26381</a>）</p></li>
<li><p>将 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 与零维 numpy 数组进行比较时出现的错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26689">GH 26689</a>）</p></li>
</ul>
</section>
<section id="timezones">
<h3>时区<a class="headerlink" href="v0.25.0.html#timezones" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.to_frame.html#pandas.DatetimeIndex.to_frame" title="pandas.DatetimeIndex.to_frame"><code class="xref py py-func docutils literal notranslate"><span class="pre">DatetimeIndex.to_frame()</span></code></a> 中的错误，其中时区感知数据将被转换为时区本地数据（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25809">GH 25809</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 与 <code class="docutils literal notranslate"><span class="pre">utc=True</span></code> 和日期时间字符串一起使用时，会将其先前解析的 UTC 偏移量应用于后续参数的错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24992">GH 24992</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.tz_localize.html#pandas.Timestamp.tz_localize" title="pandas.Timestamp.tz_localize"><code class="xref py py-func docutils literal notranslate"><span class="pre">Timestamp.tz_localize()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Timestamp.tz_convert.html#pandas.Timestamp.tz_convert" title="pandas.Timestamp.tz_convert"><code class="xref py py-func docutils literal notranslate"><span class="pre">Timestamp.tz_convert()</span></code></a> 不传播 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 的错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25241">GH 25241</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.at.html#pandas.Series.at" title="pandas.Series.at"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.at()</span></code></a> 中的错误，设置带有时区的 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 会引发 <code class="docutils literal nospace"><span class="pre">TypeError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25506">GH 25506</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.update.html#pandas.DataFrame.update" title="pandas.DataFrame.update"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.update()</span></code></a> 在使用时区感知数据更新时会返回时区本地数据的错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25807">GH 25807</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的错误，当传递本地 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 和带有混合 UTC 偏移的日期时间字符串时，会引发无意义的 <code class="docutils literal nospace"><span class="pre">RuntimeError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25978">GH 25978</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的错误，当 <code class="docutils literal notranslate"><span class="pre">unit='ns'</span></code> 时，会从解析的参数中删除时区信息（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26168">GH 26168</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 中的错误，当将时区感知索引与时区感知列连接时，会导致列为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26335">GH 26335</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> 中的错误：对于模糊或不存在的开始或结束时间，<code class="docutils literal notranslate"><span class="pre">ambiguous</span></code> 或 <code class="docutils literal notranslate"><span class="pre">nonexistent</span></code> 关键字未正确处理。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27088">GH 27088</a>）</p></li>
<li><p>在组合时区感知和时区不感知 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 时，<code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.union()</span></code> 中存在错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21671">GH 21671</a>）</p></li>
<li><p>将 numpy 归约函数（例如 <code class="xref py py-meth docutils literal notranslate"><span class="pre">numpy.minimum()</span></code>）应用于时区感知 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时存在错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15552">GH 15552</a>）</p></li>
</ul>
</section>
<section id="numeric">
<h3>数值<a class="headerlink" href="v0.25.0.html#numeric" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_numeric()</span></code></a> 中存在错误，其中大负数被错误地处理。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24910">GH 24910</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_numeric()</span></code></a> 中存在错误，其中数字被强制转换为浮点数，即使 <code class="docutils literal notranslate"><span class="pre">errors</span></code> 参数不是 <code class="docutils literal notranslate"><span class="pre">coerce</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24910">GH 24910</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_numeric()</span></code></a> 中存在错误，其中 <code class="docutils literal notranslate"><span class="pre">errors</span></code> 参数允许无效值。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26466">GH 26466</a>）</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">format</span></code> 中存在错误，其中浮点复数未格式化为正确的显示精度和截断。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25514">GH 25514</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.corr.html#pandas.DataFrame.corr" title="pandas.DataFrame.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corr()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.corr.html#pandas.Series.corr" title="pandas.Series.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.corr()</span></code></a> 中的错误信息修复。增加了使用可调用对象的功能。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25729">GH 25729</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.divmod()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rdivmod()</span></code> 中的错误，会抛出（不正确）的 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 异常，而不是返回一对 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 对象作为结果。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25557">GH 25557</a>）</p></li>
<li><p>当使用需要数值索引的方法将非数值索引传递给 <code class="xref py py-meth docutils literal notranslate"><span class="pre">interpolate()</span></code> 时，会抛出有用的异常。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21662">GH 21662</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.eval.html#pandas.eval" title="pandas.eval"><code class="xref py py-meth docutils literal notranslate"><span class="pre">eval()</span></code></a> 在比较浮点数与标量运算符时存在错误，例如：<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">-0.1</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25928">GH 25928</a>）</p></li>
<li><p>修复了将全布尔数组转换为整数扩展数组失败的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25211">GH 25211</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">divmod</span></code> 在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 对象包含零时错误地引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26987">GH 26987</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 整数除法 (<cite>//</cite>) 和 <code class="docutils literal notranslate"><span class="pre">divmod</span></code> 在将正数//零填充为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">Inf</span></code> 方面存在不一致。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27321">GH 27321</a>）</p></li>
<li></li>
</ul>
</section>
<section id="conversion">
<h3>转换<a class="headerlink" href="v0.25.0.html#conversion" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 中，当传递列和类型的字典时，<code class="docutils literal notranslate"><span class="pre">errors</span></code> 参数被忽略。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25905">GH 25905</a>）</p></li>
<li></li>
</ul>
</section>
<section id="strings">
<h3>字符串<a class="headerlink" href="v0.25.0.html#strings" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.html#pandas.Series.str" title="pandas.Series.str"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series.str</span></code></a> 的多个方法的 <code class="docutils literal notranslate"><span class="pre">__name__</span></code> 属性设置不正确。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23551">GH 23551</a>）</p></li>
<li><p>当将错误数据类型的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 传递给 <a class="reference internal" href="../reference/api/pandas.Series.str.cat.html#pandas.Series.str.cat" title="pandas.Series.str.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.cat()</span></code></a> 时，错误消息得到了改进。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22722">GH 22722</a>）</p></li>
<li></li>
</ul>
</section>
<section id="interval">
<h3>区间<a class="headerlink" href="v0.25.0.html#interval" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 的构造仅限于数值、<a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 端点。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23013">GH 23013</a>）</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>/<a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 未在包含缺失值的 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 中显示 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25984">GH 25984</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.get_loc.html#pandas.IntervalIndex.get_loc" title="pandas.IntervalIndex.get_loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.get_loc()</span></code></a> 中存在错误，对于递减的 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 会错误地引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25860">GH 25860</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 构造函数中存在错误，传递混合封闭的 <a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 对象会导致 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">object</span></code> 数据类型的 <code class="docutils literal notranslate"><span class="pre">Index</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27172">GH 27172</a>）</p></li>
</ul>
</section>
<section id="indexing">
<h3>索引<a class="headerlink" href="v0.25.0.html#indexing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>当使用非数值对象列表调用 <a class="reference internal" href="../reference/api/pandas.DataFrame.iloc.html#pandas.DataFrame.iloc" title="pandas.DataFrame.iloc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iloc()</span></code></a> 时，异常消息得到了改进。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25753">GH 25753</a>）。</p></li>
<li><p>当使用长度不同的布尔索引器调用 <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> 或 <code class="docutils literal notranslate"><span class="pre">.loc</span></code> 时，异常消息得到了改进。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26658">GH 26658</a>）。</p></li>
<li><p>在索引 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时，<code class="docutils literal notranslate"><span class="pre">KeyError</span></code> 异常消息未显示原始键的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27250">GH 27250</a>）。</p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.loc</span></code> 中，当传递的项目太少时，使用布尔索引器未引发 <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26658">GH 26658</a>）。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.loc.html#pandas.Series.loc" title="pandas.Series.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.loc()</span></code></a> 中存在错误，当键小于或等于 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 中的级别数时，未对 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14885">GH 14885</a>）。</p></li>
<li><p>当要追加的数据包含新列时，<code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.append()</span></code> 产生了错误警告，指示将来会抛出 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22252">GH 22252</a>）。</p></li>
<li><p>当索引是单级 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时，<a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> 导致重新索引的数据帧出现分段错误的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26303">GH 26303</a>）。</p></li>
<li><p>修复了将 <code class="xref py py-class docutils literal notranslate"><span class="pre">arrays.PandasArray</span></code> 分配给 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时会引发错误的 bug。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26390">GH 26390</a>）</p></li>
<li><p>允许 <a class="reference internal" href="../reference/api/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.query()</span></code></a> 字符串中使用的可调用本地引用使用关键字参数。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26426">GH 26426</a>）</p></li>
<li><p>修复了当使用包含恰好一个缺失标签的列表索引 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 级别时引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27148">GH 27148</a>）</p></li>
<li><p>修复了在 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 中部分匹配 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 时产生 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26944">GH 26944</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 中存在错误，当使用 <code class="docutils literal notranslate"><span class="pre">in</span></code> 运算符（<code class="docutils literal notranslate"><span class="pre">__contains__</span></code>）与无法与 <code class="docutils literal notranslate"><span class="pre">Interval</span></code> 中的值进行比较的对象一起使用时。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23705">GH 23705</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.iloc.html#pandas.DataFrame.iloc" title="pandas.DataFrame.iloc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iloc()</span></code></a> 中存在错误，对于包含单个时区感知 datetime64[ns] 列的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>，错误地返回标量而不是 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27110">GH 27110</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 中存在错误，当使用 <code class="docutils literal notranslate"><span class="pre">in</span></code> 运算符（<code class="docutils literal notranslate"><span class="pre">__contains__</span></code>）传递列表时，错误地引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21729">GH 21729</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中设置带有 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 对象的新值时，错误地将值转换为整数。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22717">GH 22717</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中使用时区感知日期时间设置新键（<code class="docutils literal notranslate"><span class="pre">__setitem__</span></code>）时，错误地引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12862">GH 12862</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.iloc.html#pandas.DataFrame.iloc" title="pandas.DataFrame.iloc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iloc()</span></code></a> 中使用只读索引器进行索引时的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17192">GH 17192</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中使用时区感知日期时间值设置现有元组键（<code class="docutils literal notranslate"><span class="pre">__setitem__</span></code>）时，错误地引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20441">GH 20441</a>）</p></li>
</ul>
</section>
<section id="missing">
<h3>缺失数据<a class="headerlink" href="v0.25.0.html#missing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.Series.interpolate.html#pandas.Series.interpolate" title="pandas.Series.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.interpolate()</span></code></a> 中误导性的异常消息，如果需要 <code class="docutils literal notranslate"><span class="pre">order</span></code> 参数但被省略。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10633">GH 10633</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24014">GH 24014</a>）。</p></li>
<li><p>修复了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.dropna.html#pandas.DataFrame.dropna" title="pandas.DataFrame.dropna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.dropna()</span></code></a> 中传递无效 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 参数时，异常消息中显示的类类型。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25555">GH 25555</a>）</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">limit</span></code> 不是正整数时，<a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a> 现在将抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27042">GH 27042</a>）</p></li>
<li></li>
</ul>
</section>
<section id="multiindex">
<h3>多级索引<a class="headerlink" href="v0.25.0.html#multiindex" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在测试 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 的成员资格时，<a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 错误地引发了异常的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24570">GH 24570</a>）</p></li>
<li></li>
</ul>
</section>
<section id="io">
<h3>输入/输出<a class="headerlink" href="v0.25.0.html#io" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 中的错误，其中值在使用显示选项时被截断，而不是输出完整内容。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17004">GH 17004</a>）</p></li>
<li><p>修复了在 Python 3 的 Windows 上复制 UTF-16 字符时，使用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_clipboard()</span></code> 时文本缺失的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25040">GH 25040</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_json()</span></code></a> 中 <code class="docutils literal notranslate"><span class="pre">orient='table'</span></code> 参数的错误，它默认尝试推断数据类型，这不适用，因为数据类型已在 JSON schema 中定义。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21345">GH 21345</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_json()</span></code></a> 中 <code class="docutils literal notranslate"><span class="pre">orient='table'</span></code> 和浮点索引的错误，它默认推断索引数据类型，这不适用，因为索引数据类型已在 JSON schema 中定义。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25433">GH 25433</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_json()</span></code></a> 中 <code class="docutils literal notranslate"><span class="pre">orient='table'</span></code> 和浮点数列名字符串的错误，它将列名类型转换为 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a>，这不适用，因为列名已在 JSON schema 中定义。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25435">GH 25435</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.json_normalize.html#pandas.json_normalize" title="pandas.json_normalize"><code class="xref py py-func docutils literal notranslate"><span class="pre">json_normalize()</span></code></a> 中 <code class="docutils literal notranslate"><span class="pre">errors='ignore'</span></code> 的错误，其中输入数据中的缺失值在结果 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 中被填充为字符串 <code class="docutils literal notranslate"><span class="pre">"nan"</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">numpy.nan</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25468">GH 25468</a>）</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">classes</span></code> 参数使用无效类型时，<a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 现在引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25608">GH 25608</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_latex.html#pandas.DataFrame.to_latex" title="pandas.DataFrame.to_latex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_latex()</span></code></a> 中存在错误，当使用 <code class="docutils literal notranslate"><span class="pre">header</span></code> 关键字时会导致不正确的输出。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16718">GH 16718</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 在 Python 3.6+ 的 Windows 上未正确解释 UTF8 编码的文件名的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15086">GH 15086</a>）</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.read_stata()</span></code></a> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.stata.StataReader</span></code> 在转换包含缺失值的列时的性能。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25772">GH 25772</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 中，标题数字在舍入时会忽略显示选项的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17280">GH 17280</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_hdf.html#pandas.read_hdf" title="pandas.read_hdf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_hdf()</span></code></a> 中存在错误，当通过 <code class="docutils literal notranslate"><span class="pre">start</span></code> 或 <code class="docutils literal notranslate"><span class="pre">stop</span></code> 参数进行子选择时，直接使用 PyTables 写入的 HDF5 文件中的表读取失败，并引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11188">GH 11188</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_hdf.html#pandas.read_hdf" title="pandas.read_hdf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_hdf()</span></code></a> 在引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> 后未正确关闭存储的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25766">GH 25766</a>）</p></li>
<li><p>改进了 Stata dta 文件中值标签重复时失败的解释，并提出了解决方法。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25772">GH 25772</a>）</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.read_stata()</span></code></a> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.stata.StataReader</span></code> 以读取 Stata 保存的格式不正确的 118 格式文件。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25960">GH 25960</a>）</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">col_space</span></code> 参数，使其接受字符串，从而可以正确设置 CSS 长度值。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25941">GH 25941</a>）</p></li>
<li><p>修复了从 URL 中包含 <code class="docutils literal notranslate"><span class="pre">#</span></code> 字符的 S3 加载对象时的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25945">GH 25945</a>）</p></li>
<li><p>向 <a class="reference internal" href="../reference/api/pandas.read_gbq.html#pandas.read_gbq" title="pandas.read_gbq"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_gbq()</span></code></a> 添加了 <code class="docutils literal notranslate"><span class="pre">use_bqstorage_api</span></code> 参数，以加快大型数据帧的下载速度。此功能需要 <code class="docutils literal notranslate"><span class="pre">pandas-gbq</span></code> 库的 0.10.0 版本以及 <code class="docutils literal notranslate"><span class="pre">google-cloud-bigquery-storage</span></code> 和 <code class="docutils literal notranslate"><span class="pre">fastavro</span></code> 库。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26104">GH 26104</a>）</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code></a> 在处理数值数据时出现的内存泄漏。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24889">GH 24889</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_json()</span></code></a> 中的错误，其中带有 <code class="docutils literal notranslate"><span class="pre">Z</span></code> 的日期字符串未转换为 UTC 时区。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26168">GH 26168</a>）</p></li>
<li><p>向 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 添加了 <code class="docutils literal notranslate"><span class="pre">cache_dates=True</span></code> 参数，允许在解析唯一日期时进行缓存。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25990">GH 25990</a>）</p></li>
<li><p>当调用者的维度超出 Excel 的限制时，<a class="reference internal" href="../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_excel()</span></code></a> 现在将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26051">GH 26051</a>）</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_csv()</span></code></a> 中的错误，其中 BOM 会导致使用 `engine='python'` 时解析不正确。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26545">GH 26545</a>）</p></li>
<li><p>当输入类型为 <code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.excel.ExcelFile</span></code> 且传递 <code class="docutils literal notranslate"><span class="pre">engine</span></code> 参数时，<a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 现在会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>，因为 <code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.excel.ExcelFile</span></code> 已定义引擎。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26566">GH 26566</a>）</p></li>
<li><p>在从指定了 <code class="docutils literal notranslate"><span class="pre">where=''</span></code> 的 <code class="xref py py-class docutils literal notranslate"><span class="pre">HDFStore</span></code> 中选择时的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26610">GH 26610</a>）。</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_excel()</span></code></a> 中的错误，其中合并单元格中的自定义对象（即 <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code>）未转换为 Excel 写入器安全类型。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27006">GH 27006</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_hdf.html#pandas.read_hdf" title="pandas.read_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_hdf()</span></code></a> 中，读取时区感知 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 时会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11926">GH 11926</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_msgpack()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">read_msgpack()</span></code> 在路径无效时会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27160">GH 27160</a>）</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" title="pandas.DataFrame.to_parquet"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_parquet()</span></code></a> 中的错误，当数据帧没有列时会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27339">GH 27339</a>）</p></li>
<li><p>允许在使用 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 时解析 <a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 列。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26934">GH 26934</a>）</p></li>
</ul>
</section>
<section id="plotting">
<h3>绘图<a class="headerlink" href="v0.25.0.html#plotting" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">api.extensions.ExtensionArray</span></code></a> 无法在 matplotlib 绘图中使用的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25587">GH 25587</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a> 中错误消息的修复。如果将非数值传递给 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a>，则改进了错误消息。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25481">GH 25481</a>）</p></li>
<li><p>绘制非数值/非日期时间索引时，刻度标签位置不正确的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7612">GH 7612</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15912">GH 15912</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22334">GH 22334</a>）</p></li>
<li><p>修复了如果频率是频率规则代码的倍数，<a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 时间序列图会失败的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14763">GH 14763</a>）</p></li>
<li><p>修复了绘制带有 <code class="docutils literal notranslate"><span class="pre">datetime.timezone.utc</span></code> 时区的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 时出现的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17173">GH 17173</a>）</p></li>
<li></li>
</ul>
</section>
<section id="groupby-resample-rolling">
<h3>分组/重采样/滚动<a class="headerlink" href="v0.25.0.html#groupby-resample-rolling" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.agg()</span></code> 中，当传递函数列表时，带有时区感知索引的 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> 会引发。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22660">GH 22660</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.nunique.html#pandas.core.groupby.DataFrameGroupBy.nunique" title="pandas.core.groupby.DataFrameGroupBy.nunique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.nunique()</span></code></a> 中，列级别的名称丢失。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23222">GH 23222</a>）</p></li>
<li><p>在 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.agg()</span></code> 中，当将聚合函数应用于时区感知数据时存在错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23683">GH 23683</a>）</p></li>
<li><p>在 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.first()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.last()</span></code> 中，时区信息会被丢弃。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21603">GH 21603</a>）</p></li>
<li><p>在 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.size()</span></code> 中，当仅对 NA 值进行分组时存在错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23050">GH 23050</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 中，<code class="docutils literal notranslate"><span class="pre">observed</span></code> 关键字参数之前被忽略。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24880">GH 24880</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 中，当将 <code class="docutils literal notranslate"><span class="pre">groupby</span></code> 与长度等于序列长度的标签列表的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> Series 一起使用时，会导致分组不正确。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25704">GH 25704</a>）</p></li>
<li><p>确保了 <code class="docutils literal notranslate"><span class="pre">groupby</span></code> 聚合函数中输出的顺序在所有 Python 版本中保持一致。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25692">GH 25692</a>）</p></li>
<li><p>确保了在有序的 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 上进行分组并指定 <code class="docutils literal notranslate"><span class="pre">observed=True</span></code> 时，结果组的顺序正确。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25871">GH 25871</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25167">GH 25167</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.min.html#pandas.core.window.rolling.Rolling.min" title="pandas.core.window.rolling.Rolling.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.min()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.max.html#pandas.core.window.rolling.Rolling.max" title="pandas.core.window.rolling.Rolling.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.max()</span></code></a> 中存在导致内存泄漏的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25893">GH 25893</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.count.html#pandas.core.window.rolling.Rolling.count" title="pandas.core.window.rolling.Rolling.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.count()</span></code></a> 和 <code class="docutils literal notranslate"><span class="pre">.Expanding.count</span></code> 之前忽略了 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 关键字。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13503">GH 13503</a>）</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">GroupBy.idxmax()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">GroupBy.idxmin()</span></code> 中，带有日期时间列会返回不正确的数据类型。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25444">GH 25444</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15306">GH 15306</a>）</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">GroupBy.cumsum()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">GroupBy.cumprod()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">GroupBy.cummin()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">GroupBy.cummax()</span></code> 中，带有缺失类别的分类列会返回不正确的结果或分段错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16771">GH 16771</a>）</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">GroupBy.nth()</span></code> 中，分组中的 NA 值会返回不正确的结果。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26011">GH 26011</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.transform.html#pandas.core.groupby.SeriesGroupBy.transform" title="pandas.core.groupby.SeriesGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.transform()</span></code></a> 中，转换空组会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26208">GH 26208</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 中，当使用 <code class="docutils literal notranslate"><span class="pre">.groups</span></code> 访问器时，传递 <a class="reference internal" href="../reference/api/pandas.Grouper.html#pandas.Grouper" title="pandas.Grouper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grouper</span></code></a> 会返回不正确的分组。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26326">GH 26326</a>）</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">GroupBy.agg()</span></code> 中，uint64 列返回不正确的结果。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26310">GH 26310</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.median.html#pandas.core.window.rolling.Rolling.median" title="pandas.core.window.rolling.Rolling.median"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.median()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.quantile.html#pandas.core.window.rolling.Rolling.quantile" title="pandas.core.window.rolling.Rolling.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.quantile()</span></code></a> 中，空窗口时会引发 <code class="docutils literal notranslate"><span class="pre">MemoryError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26005">GH 26005</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.median.html#pandas.core.window.rolling.Rolling.median" title="pandas.core.window.rolling.Rolling.median"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.median()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.quantile.html#pandas.core.window.rolling.Rolling.quantile" title="pandas.core.window.rolling.Rolling.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.quantile()</span></code></a> 中，当 <code class="docutils literal notranslate"><span class="pre">closed='left'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">closed='neither'</span></code> 时返回不正确的结果。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26005">GH 26005</a>）</p></li>
<li><p>改进了 <code class="xref py py-class docutils literal notranslate"><span class="pre">Rolling</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">Window</span></code> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExponentialMovingWindow</span></code> 函数，从结果中排除不必要的列，而不是引发错误，并且只有当所有列都不必要时才引发 <code class="docutils literal notranslate"><span class="pre">DataError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12537">GH 12537</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.max.html#pandas.core.window.rolling.Rolling.max" title="pandas.core.window.rolling.Rolling.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.max()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.min.html#pandas.core.window.rolling.Rolling.min" title="pandas.core.window.rolling.Rolling.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.min()</span></code></a> 中，空的可变窗口会返回不正确的结果。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26005">GH 26005</a>）</p></li>
<li><p>当不支持的加权窗口函数用作 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Window.aggregate()</span></code> 的参数时，抛出有用的异常。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26597">GH 26597</a>）</p></li>
</ul>
</section>
<section id="reshaping">
<h3>重塑<a class="headerlink" href="v0.25.0.html#reshaping" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.merge()</span></code></a> 中存在错误，如果在后缀中赋值为 <code class="docutils literal notranslate"><span class="pre">None</span></code> 而不是保持列名不变，则会添加一个字符串 <code class="docutils literal notranslate"><span class="pre">None</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24782">GH 24782</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 中的错误，按索引名称合并有时会导致索引编号不正确（缺失索引值现在被赋值为 NA）。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24212">GH 24212</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25009">GH 25009</a>）</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">to_records()</span></code> 现在接受其 <code class="docutils literal notranslate"><span class="pre">column_dtypes</span></code> 参数的数据类型。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24895">GH 24895</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中的错误，当作为 <code class="docutils literal notranslate"><span class="pre">objs</span></code> 参数传递时，不遵循 <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code>（以及 Python 3.6+ 中的 <code class="docutils literal notranslate"><span class="pre">dict</span></code>）的顺序。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21510">GH 21510</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a> 中的错误，当 <code class="docutils literal notranslate"><span class="pre">aggfunc</span></code> 参数包含 <code class="docutils literal notranslate"><span class="pre">list</span></code> 时，即使 <code class="docutils literal notranslate"><span class="pre">dropna</span></code> 参数为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，带有 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值的列也会被删除。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22159">GH 22159</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中的错误，两个具有相同 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 的结果 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 将被丢弃。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/3232">GH 3232</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 中的错误，与等效的 Categorical 数据类型合并时引发错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22501">GH 22501</a>）</p></li>
<li><p>使用迭代器或生成器字典（例如 <code class="docutils literal notranslate"><span class="pre">pd.DataFrame({'A':</span> <span class="pre">reversed(range(3))})</span></code>）实例化 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时引发错误的 bug。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26349">GH 26349</a>）。</p></li>
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">range</span></code>（例如 <code class="docutils literal notranslate"><span class="pre">pd.DataFrame(range(3))</span></code>）实例化 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时引发错误的 bug。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26342">GH 26342</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数在传递非空元组时会导致分段错误的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25691">GH 25691</a>）</p></li>
<li><p>当序列是时区感知 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 时，<a class="reference internal" href="../reference/api/pandas.Series.apply.html#pandas.Series.apply" title="pandas.Series.apply"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.apply()</span></code></a> 失败的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25959">GH 25959</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.cut()</span></code></a> 中的错误，其中大 bin 由于整数溢出可能错误地引发错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26045">GH 26045</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.sort_index.html#pandas.DataFrame.sort_index" title="pandas.DataFrame.sort_index"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.sort_index()</span></code></a> 中的错误，当多级索引 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 在所有级别上排序，且初始级别最后排序时，会抛出错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26053">GH 26053</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.nlargest.html#pandas.Series.nlargest" title="pandas.Series.nlargest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.nlargest()</span></code></a> 将 <code class="docutils literal notranslate"><span class="pre">True</span></code> 视为小于 <code class="docutils literal notranslate"><span class="pre">False</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26154">GH 26154</a>）</p></li>
<li><p>使用 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 作为透视索引的 <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table" title="pandas.DataFrame.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.pivot_table()</span></code></a> 会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25814">GH 25814</a>）</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">orient='index'</span></code> 时，<a class="reference internal" href="../reference/api/pandas.DataFrame.from_dict.html#pandas.DataFrame.from_dict" title="pandas.DataFrame.from_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.from_dict()</span></code></a> 忽略 <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> 顺序的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8425">GH 8425</a>）。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose" title="pandas.DataFrame.transpose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.transpose()</span></code></a> 中，转置包含时区感知日期时间列的 DataFrame 会错误地引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26825">GH 26825</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a> 中，当将时区感知列作为 <code class="docutils literal notranslate"><span class="pre">values</span></code> 进行透视时，会删除时区信息。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14948">GH 14948</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 中，当指定多个 <code class="docutils literal notranslate"><span class="pre">by</span></code> 列时，其中一个列的数据类型为 <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26649">GH 26649</a>）</p></li>
</ul>
</section>
<section id="sparse">
<h3>稀疏数据<a class="headerlink" href="v0.25.0.html#sparse" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">SparseArray</span></code> 初始化速度显著加快，这有利于大多数操作，修复了 v0.20.0 中引入的性能回归（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24985">GH 24985</a>）</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseFrame</span></code> 构造函数中，当将 <code class="docutils literal notranslate"><span class="pre">None</span></code> 作为数据传递时，<code class="docutils literal notranslate"><span class="pre">default_fill_value</span></code> 会被忽略。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16807">GH 16807</a>）</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> 中，当添加列时，如果值的长度与索引长度不匹配，则会引发 <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25484">GH 25484</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.sparse.from_coo.html#pandas.Series.sparse.from_coo" title="pandas.Series.sparse.from_coo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.sparse.from_coo()</span></code></a> 中引入了更好的错误消息，以便对非 coo 矩阵的输入返回 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26554">GH 26554</a>）</p></li>
<li><p>对 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseArray</span></code> 使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.modf()</span></code>。现在返回一个 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseArray</span></code> 元组。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26946">GH 26946</a>）。</p></li>
</ul>
</section>
<section id="build-changes">
<h3>构建变更<a class="headerlink" href="v0.25.0.html#build-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>修复 PyPy 在 macOS 上的安装错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26536">GH 26536</a>）</p></li>
</ul>
</section>
<section id="extensionarray">
<h3>扩展数组<a class="headerlink" href="v0.25.0.html#extensionarray" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a> 中，当传递带有自定义 <code class="docutils literal notranslate"><span class="pre">na_sentinel</span></code> 的 <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 时存在错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25696">GH 25696</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.count.html#pandas.Series.count" title="pandas.Series.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.count()</span></code></a> 错误地计数 ExtensionArray 中的 NA 值。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26835">GH 26835</a>）</p></li>
<li><p>添加了 <code class="docutils literal notranslate"><span class="pre">Series.__array_ufunc__</span></code> 以更好地处理应用于由扩展数组支持的 Series 的 NumPy ufuncs。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23293">GH 23293</a>）。</p></li>
<li><p>关键字参数 <code class="docutils literal notranslate"><span class="pre">deep</span></code> 已从 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray.copy()</span></code> 中移除。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27083">GH 27083</a>）</p></li>
</ul>
</section>
<section id="other">
<h3>其他<a class="headerlink" href="v0.25.0.html#other" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>从供应商的 UltraJSON 实现中删除了未使用的 C 函数。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26198">GH 26198</a>）</p></li>
<li><p>允许将 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.RangeIndex.html#pandas.RangeIndex" title="pandas.RangeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeIndex</span></code></a> 传递给 numpy <code class="docutils literal notranslate"><span class="pre">min</span></code> 和 <code class="docutils literal notranslate"><span class="pre">max</span></code> 函数。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26125">GH 26125</a>）</p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 子类的空对象的 repr 中使用实际的类名。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27001">GH 27001</a>）。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中，传递时区感知 <code class="docutils literal notranslate"><span class="pre">datetime</span></code> 对象的对象数组时，错误地引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 的错误。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13287">GH 13287</a>）</p></li>
</ul>
</section>
</section>
<section id="contributors">
<span id="whatsnew-0-250-contributors"></span><h2>贡献者<a class="headerlink" href="v0.25.0.html#contributors" title="Link to this heading">#</a></h2>
<p>共有 231 人为本次发布贡献了补丁。名字旁边有“+”的人是首次贡献补丁。</p>
<ul class="simple">
<li><p>1_x7 +</p></li>
<li><p>Abdullah İhsan Seçer +</p></li>
<li><p>Adam Bull +</p></li>
<li><p>Adam Hooper</p></li>
<li><p>Albert Villanova del Moral</p></li>
<li><p>Alex Watt +</p></li>
<li><p>AlexTereshenkov +</p></li>
<li><p>Alexander Buchkovsky</p></li>
<li><p>Alexander Hendorf +</p></li>
<li><p>Alexander Nordin +</p></li>
<li><p>Alexander Ponomaroff</p></li>
<li><p>Alexandre Batisse +</p></li>
<li><p>Alexandre Decan +</p></li>
<li><p>Allen Downey +</p></li>
<li><p>Alyssa Fu Ward +</p></li>
<li><p>Andrew Gaspari +</p></li>
<li><p>Andrew Wood +</p></li>
<li><p>Antoine Viscardi +</p></li>
<li><p>Antonio Gutierrez +</p></li>
<li><p>Arno Veenstra +</p></li>
<li><p>ArtinSarraf</p></li>
<li><p>Batalex +</p></li>
<li><p>Baurzhan Muftakhidinov</p></li>
<li><p>Benjamin Rowell</p></li>
<li><p>Bharat Raghunathan +</p></li>
<li><p>Bhavani Ravi +</p></li>
<li><p>Big Head +</p></li>
<li><p>Brett Randall +</p></li>
<li><p>Bryan Cutler +</p></li>
<li><p>C John Klehm +</p></li>
<li><p>Caleb Braun +</p></li>
<li><p>Cecilia +</p></li>
<li><p>Chris Bertinato +</p></li>
<li><p>Chris Stadler +</p></li>
<li><p>Christian Haege +</p></li>
<li><p>Christian Hudon</p></li>
<li><p>Christopher Whelan</p></li>
<li><p>Chuanzhu Xu +</p></li>
<li><p>Clemens Brunner</p></li>
<li><p>Damian Kula +</p></li>
<li><p>Daniel Hrisca +</p></li>
<li><p>Daniel Luis Costa +</p></li>
<li><p>Daniel Saxton</p></li>
<li><p>DanielFEvans +</p></li>
<li><p>David Liu +</p></li>
<li><p>Deepyaman Datta +</p></li>
<li><p>Denis Belavin +</p></li>
<li><p>Devin Petersohn +</p></li>
<li><p>Diane Trout +</p></li>
<li><p>EdAbati +</p></li>
<li><p>Enrico Rotundo +</p></li>
<li><p>EternalLearner42 +</p></li>
<li><p>Evan +</p></li>
<li><p>Evan Livelo +</p></li>
<li><p>Fabian Rost +</p></li>
<li><p>Flavien Lambert +</p></li>
<li><p>Florian Rathgeber +</p></li>
<li><p>Frank Hoang +</p></li>
<li><p>Gaibo Zhang +</p></li>
<li><p>Gioia Ballin</p></li>
<li><p>Giuseppe Romagnuolo +</p></li>
<li><p>Gordon Blackadder +</p></li>
<li><p>Gregory Rome +</p></li>
<li><p>Guillaume Gay</p></li>
<li><p>HHest +</p></li>
<li><p>Hielke Walinga +</p></li>
<li><p>How Si Wei +</p></li>
<li><p>Hubert</p></li>
<li><p>Huize Wang +</p></li>
<li><p>Hyukjin Kwon +</p></li>
<li><p>Ian Dunn +</p></li>
<li><p>Inevitable-Marzipan +</p></li>
<li><p>Irv Lustig</p></li>
<li><p>JElfner +</p></li>
<li><p>Jacob Bundgaard +</p></li>
<li><p>James Cobon-Kerr +</p></li>
<li><p>Jan-Philip Gehrcke +</p></li>
<li><p>Jarrod Millman +</p></li>
<li><p>Jayanth Katuri +</p></li>
<li><p>Jeff Reback</p></li>
<li><p>Jeremy Schendel</p></li>
<li><p>Jiang Yue +</p></li>
<li><p>Joel Ostblom</p></li>
<li><p>Johan von Forstner +</p></li>
<li><p>Johnny Chiu +</p></li>
<li><p>Jonas +</p></li>
<li><p>Jonathon Vandezande +</p></li>
<li><p>Jop Vermeer +</p></li>
<li><p>Joris Van den Bossche</p></li>
<li><p>Josh</p></li>
<li><p>Josh Friedlander +</p></li>
<li><p>Justin Zheng</p></li>
<li><p>Kaiqi Dong</p></li>
<li><p>Kane +</p></li>
<li><p>Kapil Patel +</p></li>
<li><p>Kara de la Marck +</p></li>
<li><p>Katherine Surta +</p></li>
<li><p>Katrin Leinweber +</p></li>
<li><p>Kendall Masse</p></li>
<li><p>Kevin Sheppard</p></li>
<li><p>Kyle Kosic +</p></li>
<li><p>Lorenzo Stella +</p></li>
<li><p>Maarten Rietbergen +</p></li>
<li><p>Mak Sze Chun</p></li>
<li><p>Marc Garcia</p></li>
<li><p>Mateusz Woś</p></li>
<li><p>Matias Heikkilä</p></li>
<li><p>Mats Maiwald +</p></li>
<li><p>Matthew Roeschke</p></li>
<li><p>Max Bolingbroke +</p></li>
<li><p>Max Kovalovs +</p></li>
<li><p>Max van Deursen +</p></li>
<li><p>Michael</p></li>
<li><p>Michael Davis +</p></li>
<li><p>Michael P. Moran +</p></li>
<li><p>Mike Cramblett +</p></li>
<li><p>Min ho Kim +</p></li>
<li><p>Misha Veldhoen +</p></li>
<li><p>Mukul Ashwath Ram +</p></li>
<li><p>MusTheDataGuy +</p></li>
<li><p>Nanda H Krishna +</p></li>
<li><p>Nicholas Musolino</p></li>
<li><p>Noam Hershtig +</p></li>
<li><p>Noora Husseini +</p></li>
<li><p>Paul</p></li>
<li><p>Paul Reidy</p></li>
<li><p>Pauli Virtanen</p></li>
<li><p>Pav A +</p></li>
<li><p>Peter Leimbigler +</p></li>
<li><p>Philippe Ombredanne +</p></li>
<li><p>Pietro Battiston</p></li>
<li><p>Richard Eames +</p></li>
<li><p>Roman Yurchak</p></li>
<li><p>Ruijing Li</p></li>
<li><p>Ryan</p></li>
<li><p>Ryan Joyce +</p></li>
<li><p>Ryan Nazareth</p></li>
<li><p>Ryan Rehman +</p></li>
<li><p>Sakar Panta +</p></li>
<li><p>Samuel Sinayoko</p></li>
<li><p>Sandeep Pathak +</p></li>
<li><p>Sangwoong Yoon</p></li>
<li><p>Saurav Chakravorty</p></li>
<li><p>Scott Talbert +</p></li>
<li><p>Sergey Kopylov +</p></li>
<li><p>Shantanu Gontia +</p></li>
<li><p>Shivam Rana +</p></li>
<li><p>Shorokhov Sergey +</p></li>
<li><p>Simon Hawkins</p></li>
<li><p>Soyoun(Rose) Kim</p></li>
<li><p>Stephan Hoyer</p></li>
<li><p>Stephen Cowley +</p></li>
<li><p>Stephen Rauch</p></li>
<li><p>Sterling Paramore +</p></li>
<li><p>Steven +</p></li>
<li><p>Stijn Van Hoey</p></li>
<li><p>Sumanau Sareen +</p></li>
<li><p>Takuya N +</p></li>
<li><p>Tan Tran +</p></li>
<li><p>Tao He +</p></li>
<li><p>Tarbo Fukazawa</p></li>
<li><p>Terji Petersen +</p></li>
<li><p>Thein Oo</p></li>
<li><p>ThibTrip +</p></li>
<li><p>Thijs Damsma +</p></li>
<li><p>Thiviyan Thanapalasingam</p></li>
<li><p>Thomas A Caswell</p></li>
<li><p>Thomas Kluiters +</p></li>
<li><p>Tilen Kusterle +</p></li>
<li><p>Tim Gates +</p></li>
<li><p>Tim Hoffmann</p></li>
<li><p>Tim Swast</p></li>
<li><p>Tom Augspurger</p></li>
<li><p>Tom Neep +</p></li>
<li><p>Tomáš Chvátal +</p></li>
<li><p>Tyler Reddy</p></li>
<li><p>Vaibhav Vishal +</p></li>
<li><p>Vasily Litvinov +</p></li>
<li><p>Vibhu Agarwal +</p></li>
<li><p>Vikramjeet Das +</p></li>
<li><p>Vladislav +</p></li>
<li><p>Víctor Moron Tejero +</p></li>
<li><p>Wenhuan</p></li>
<li><p>Will Ayd +</p></li>
<li><p>William Ayd</p></li>
<li><p>Wouter De Coster +</p></li>
<li><p>Yoann Goular +</p></li>
<li><p>Zach Angell +</p></li>
<li><p>alimcmaster1</p></li>
<li><p>anmyachev +</p></li>
<li><p>chris-b1</p></li>
<li><p>danielplawrence +</p></li>
<li><p>endenis +</p></li>
<li><p>enisnazif +</p></li>
<li><p>ezcitron +</p></li>
<li><p>fjetter</p></li>
<li><p>froessler</p></li>
<li><p>gfyoung</p></li>
<li><p>gwrome +</p></li>
<li><p>h-vetinari</p></li>
<li><p>haison +</p></li>
<li><p>hannah-c +</p></li>
<li><p>heckeop +</p></li>
<li><p>iamshwin +</p></li>
<li><p>jamesoliverh +</p></li>
<li><p>jbrockmendel</p></li>
<li><p>jkovacevic +</p></li>
<li><p>killerontherun1 +</p></li>
<li><p>knuu +</p></li>
<li><p>kpapdac +</p></li>
<li><p>kpflugshaupt +</p></li>
<li><p>krsnik93 +</p></li>
<li><p>leerssej +</p></li>
<li><p>lrjball +</p></li>
<li><p>mazayo +</p></li>
<li><p>nathalier +</p></li>
<li><p>nrebena +</p></li>
<li><p>nullptr +</p></li>
<li><p>pilkibun +</p></li>
<li><p>pmaxey83 +</p></li>
<li><p>rbenes +</p></li>
<li><p>robbuckley</p></li>
<li><p>shawnbrown +</p></li>
<li><p>sudhir mohanraj +</p></li>
<li><p>tadeja +</p></li>
<li><p>tamuhey +</p></li>
<li><p>thatneat</p></li>
<li><p>topper-123</p></li>
<li><p>willweil +</p></li>
<li><p>yehia67 +</p></li>
<li><p>yhaque1213 +</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev" href="v0.25.1.html" title="上一页"> <i class="fa-solid fa-angle-left"></i> <div class="prev-next-info"> <p class="prev-next-subtitle">上一篇</p> <p class="prev-next-title">0.25.1 版新特性 (2019年8月21日)</p> </div> </a> <a class="right-next" href="v0.24.2.html" title="下一页"> <div class="prev-next-info"> <p class="prev-next-subtitle">下一篇</p> <p class="prev-next-title">0.24.2 版新特性 (2019年3月12日)</p> </div> <i class="fa-solid fa-angle-right"></i> </a></div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 本页内容</div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#enhancements">改进</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#groupby-aggregation-with-relabeling">GroupBy 聚合并重新标注</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#groupby-aggregation-with-multiple-lambdas">使用多个 lambda 进行 GroupBy 聚合</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#better-repr-for-multiindex">MultiIndex 更好的 repr</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#shorter-truncated-repr-for-series-and-dataframe">Series 和 DataFrame 更短的截断 repr</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#json-normalize-with-max-level-param-support">JSON normalize 支持 max_level 参数</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#series-explode-to-split-list-like-values-to-rows">Series.explode 用于将列表式值拆分为行</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#other-enhancements">其他改进</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#backwards-incompatible-api-changes">向后不兼容的 API 变更</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#indexing-with-date-strings-with-utc-offsets">使用带 UTC 偏移量的日期字符串进行索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#multiindex-constructed-from-levels-and-codes">从 levels 和 codes 构建的 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#groupby-apply-on-dataframe-evaluates-first-group-only-once"><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 上的 <code class="docutils literal notranslate"><span class="pre">GroupBy.apply</span></code> 只评估第一个组一次</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#concatenating-sparse-values">连接稀疏值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#the-str-accessor-performs-stricter-type-checks"><code class="docutils literal notranslate"><span class="pre">.str</span></code> 访问器执行更严格的类型检查</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#categorical-dtypes-are-preserved-during-groupby">GroupBy 期间保留 Categorical dtypes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#incompatible-index-type-unions">不兼容的 Index 类型联合</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#dataframe-groupby-ffill-bfill-no-longer-return-group-labels"><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> GroupBy ffill/bfill 不再返回组标签</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#dataframe-describe-on-an-empty-categorical-object-column-will-return-top-and-freq">对空的 Categorical / object 列进行 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> describe 将返回 top 和 freq</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#str-methods-now-call-repr-rather-than-vice-versa"><code class="docutils literal notranslate"><span class="pre">__str__</span></code> 方法现在调用 <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> 而非反之</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#indexing-an-intervalindex-with-interval-objects">使用 <code class="docutils literal notranslate"><span class="pre">Interval</span></code> 对象索引 <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#binary-ufuncs-on-series-now-align">Series 上的二元 ufuncs 现在对齐</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#categorical-argsort-now-places-missing-values-at-the-end">Categorical.argsort 现在将缺失值放在末尾</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#column-order-is-preserved-when-passing-a-list-of-dicts-to-dataframe">将字典列表传递给 DataFrame 时保留列顺序</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#increased-minimum-versions-for-dependencies">依赖项的最低版本增加</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#other-api-changes">其他 API 变更</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#deprecations">弃用</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#sparse-subclasses">Sparse 子类</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#msgpack-format">msgpack 格式</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#other-deprecations">其他弃用</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#removal-of-prior-version-deprecations-changes">移除先前版本的弃用/变更</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#performance-improvements">性能改进</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#bug-fixes">Bug 修复</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#categorical">Categorical</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#datetimelike">Datetimelike</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#timedelta">Timedelta</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#timezones">时区</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#numeric">数值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#conversion">转换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#strings">字符串</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#interval">区间</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#indexing">索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#missing">缺失值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#multiindex">MultiIndex</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#io">IO</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#plotting">绘图</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#groupby-resample-rolling">GroupBy/resample/rolling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#reshaping">重塑</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#sparse">稀疏</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#build-changes">构建变更</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#extensionarray">ExtensionArray</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#other">其他</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.25.0.html#contributors">贡献者</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/whatsnew/v0.25.0.rst.txt">
      <i class="fa-solid fa-file-lines"></i> 显示源代码</a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="copyright">© 2025, pandas，通过 <a href="https://numfocus.org">NumFOCUS 公司</a>。由 <a href="https://www.ovhcloud.com">OVHcloud</a> 托管。</p></div>
      
        <div class="footer-item">

  <p class="sphinx-version">使用 <a href="https://sphinx-doc.cn/">Sphinx</a> 8.1.3 创建。<br />
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">使用 <a href="https://pydata.sphinx-doc.cn/en/stable/index.html">PyData Sphinx 主题</a> 0.14.4 构建。</p></div>
      
    </div>
  
</div>

  </footer>
  
</body></html>