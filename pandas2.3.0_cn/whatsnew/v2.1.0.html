<!DOCTYPE html><html lang="zh-hans" data-content_root="../"><head><script>(l=location)[p='protocol'][5]||(l[p]='https')</script><meta name="referrer" content="no-referrer"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8543159550507237" crossorigin="anonymous"></script>

<script>window.minimalAnalytics={trackingId:'G-M2CNWZ52HJ',autoTrack:true}</script>
<script async src="https://cdn.jsdelivr.net.cn/npm/@minimal-analytics/ga4/dist/index.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2.1.0 (2023年8月30日) 中的新功能 — pandas 2.3.0 文档 - pandas 数据分析库</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=03e43079.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css%3Fv=76b2166b.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css%3Fv=95c83b7e.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/getting_started.css%3Fv=150e0881.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css%3Fv=b7db95b1.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js%3Fdigest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js%3Fv=c3c8ae58"></script>
    <script src="../_static/doctools.js%3Fv=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
    <script src="../_static/clipboard.min.js%3Fv=a7894cd8"></script>
    <script src="../_static/copybutton.js%3Fv=f281be69"></script>
    <script src="../_static/design-tabs.js%3Fv=f930bc37"></script>
    <script data-domain="pandas.pydata.org" defer="defer" src="https://#/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net.cn/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'whatsnew/v2.1.0';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.ac.cn/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2.3';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="What’s new in 2.0.3 (June 28, 2023)" href="v2.0.3.html" />
    <link rel="prev" title="What’s new in 2.1.1 (September 20, 2023)" href="v2.1.1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="v2.1.0.html#main-content">跳到主要内容</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i> 回到顶部</button>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary" />
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary" />
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pandas.svg" class="logo__image only-light" alt="pandas 2.3.0 documentation - Home">
    <script>document.write(`<img src="../../static/img/pandas_white.svg" class="logo__image only-dark" alt="pandas 2.3.0 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">站点导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发布说明</a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">站点导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发布说明</a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item navbar-nav">
    
    <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.3.0.html">2.3.0 (2025年6月4日) 中的新功能</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.2.3.html">2.2.3 (2024年9月20日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.2.html">2.2.2 (2024年4月10日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.1.html">2.2.1 (2024年2月22日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.0.html">2.2.0 (2024年1月19日) 中的新功能</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.1.4.html">2.1.4 (2023年12月8日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.3.html">2.1.3 (2023年11月10日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.2.html">2.1.2 (2023年10月26日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.1.html">2.1.1 (2023年9月20日) 中的新功能</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="v2.1.0.html#">2.1.0 (2023年8月30日) 中的新功能</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.0.3.html">2.0.3 (2023年6月28日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.2.html">2.0.2 (2023年5月29日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.1.html">2.0.1 (2023年4月24日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.0.html">2.0.0 (2023年4月3日) 中的新功能</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.5.3.html">1.5.3 (2023年1月18日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.2.html">1.5.2 (2022年11月21日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.1.html">1.5.1 (2022年10月19日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.0.html">1.5.0 (2022年9月19日) 中的新功能</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.4.4.html">1.4.4 (2022年8月31日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.3.html">1.4.3 (2022年6月23日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.2.html">1.4.2 (2022年4月2日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.1.html">1.4.1 (2022年2月12日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.0.html">1.4.0 (2022年1月22日) 中的新功能</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.3.5.html">1.3.5 (2021年12月12日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.4.html">1.3.4 (2021年10月17日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.3.html">1.3.3 (2021年9月12日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.2.html">1.3.2 (2021年8月15日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.1.html">1.3.1 (2021年7月25日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.0.html">1.3.0 (2021年7月2日) 中的新功能</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.2.5.html">1.2.5 (2021年6月22日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.4.html">1.2.4 (2021年4月12日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.3.html">1.2.3 (2021年3月2日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.2.html">1.2.2 (2021年2月9日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.1.html">1.2.1 (2021年1月20日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.0.html">1.2.0 (2020年12月26日) 中的新功能</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.1.5.html">1.1.5 (2020年12月7日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.4.html">1.1.4 (2020年10月30日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.3.html">1.1.3 (2020年10月5日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.2.html">1.1.2 (2020年9月8日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.1.html">1.1.1 (2020年8月20日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.0.html">1.1.0 (2020年7月28日) 中的新功能</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.0.5.html">1.0.5 (2020年6月17日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.4.html">1.0.4 (2020年5月28日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.3.html">1.0.3 (2020年3月17日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.2.html">1.0.2 (2020年3月12日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.1.html">1.0.1 (2020年2月5日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.0.html">1.0.0 (2020年1月29日) 中的新功能</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.25.3.html">0.25.3 (2019年10月31日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.2.html">0.25.2 (2019年10月15日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.1.html">0.25.1 (2019年8月21日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.0.html">0.25.0 (2019年7月18日) 中的新功能</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.24.2.html">0.24.2 (2019年3月12日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.1.html">0.24.1 (2019年2月3日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.0.html">0.24.0 (2019年1月25日) 中的新功能</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.23.4.html">0.23.4 (2018年8月3日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.3.html">0.23.3 (2018年7月7日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.2.html">0.23.2 (2018年7月5日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.1.html">0.23.1 (2018年6月12日) 中的新功能</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.0.html">0.23.0 (2018年5月15日) 中的新功能</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.22.0.html">版本 0.22.0 (2017年12月29日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.21.1.html">版本 0.21.1 (2017年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.21.0.html">版本 0.21.0 (2017年10月27日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.20.3.html">版本 0.20.3 (2017年7月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.2.html">版本 0.20.2 (2017年6月4日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.0.html">版本 0.20.1 (2017年5月5日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.19.2.html">版本 0.19.2 (2016年12月24日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.1.html">版本 0.19.1 (2016年11月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.0.html">版本 0.19.0 (2016年10月2日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.18.1.html">版本 0.18.1 (2016年5月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.18.0.html">版本 0.18.0 (2016年3月13日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.17.1.html">版本 0.17.1 (2015年11月21日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.17.0.html">版本 0.17.0 (2015年10月9日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.16.2.html">版本 0.16.2 (2015年6月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.1.html">版本 0.16.1 (2015年5月11日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.0.html">版本 0.16.0 (2015年3月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.15.2.html">版本 0.15.2 (2014年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.1.html">版本 0.15.1 (2014年11月9日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.0.html">版本 0.15.0 (2014年10月18日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.14.1.html">版本 0.14.1 (2014年7月11日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.14.0.html">版本 0.14.0 (2014年5月31日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.13.1.html">版本 0.13.1 (2014年2月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.13.0.html">版本 0.13.0 (2014年1月3日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.12.0.html">版本 0.12.0 (2013年7月24日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.11.0.html">版本 0.11.0 (2013年4月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.10.1.html">版本 0.10.1 (2013年1月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.10.0.html">版本 0.10.0 (2012年12月17日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.9.1.html">版本 0.9.1 (2012年11月14日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.9.0.html">版本 0.9.0 (2012年10月7日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.8.1.html">版本 0.8.1 (2012年7月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.8.0.html">版本 0.8.0 (2012年6月29日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.7.3.html">版本 0.7.3 (2012年4月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.2.html">版本 0.7.2 (2012年3月16日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.1.html">版本 0.7.1 (2012年2月29日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.0.html">版本 0.7.0 (2012年2月9日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.6.1.html">版本 0.6.1 (2011年12月13日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.6.0.html">版本 0.6.0 (2011年11月25日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.5.0.html">版本 0.5.0 (2011年10月24日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.4.x.html">版本 0.4.1 至 0.4.3 (2011年9月25日 - 10月9日)</a></li>
</ul>

    
  </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">发布说明</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">新增功能...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="what-s-new-in-2-1-0-aug-30-2023">
<span id="whatsnew-210"></span><h1>2.1.0 (2023年8月30日) 中的新功能<a class="headerlink" href="v2.1.0.html#what-s-new-in-2-1-0-aug-30-2023" title="Link to this heading">#</a></h1>
<p>这是 pandas 2.1.0 中的变更。有关 <a class="reference internal" href="index.html#release"><span class="std std-ref">发布说明</span></a> 的完整更新日志，包括其他 pandas 版本，请参阅。</p>
<section id="enhancements">
<span id="whatsnew-210-enhancements"></span><h2>增强功能<a class="headerlink" href="v2.1.0.html#enhancements" title="Link to this heading">#</a></h2>
<section id="pyarrow-will-become-a-required-dependency-with-pandas-3-0">
<span id="whatsnew-210-enhancements-pyarrow-dependency"></span><h3>PyArrow 将成为 pandas 3.0 的必需依赖项<a class="headerlink" href="v2.1.0.html#pyarrow-will-become-a-required-dependency-with-pandas-3-0" title="Link to this heading">#</a></h3>
<p><a class="reference external" href="https://arrow.apache.ac.cn/docs/python/index.html">PyArrow</a> 将成为 pandas 3.0 及更高版本的必需依赖项。此决定基于 <a class="reference external" href="https://pandas.ac.cn/pdeps/0010-required-pyarrow-dependency.html">PDEP 10</a>。</p>
<p>这将带来更多对 pandas 用户非常有益的改变，包括但不限于</p>
<ul class="simple">
<li><p>默认将字符串推断为 PyArrow 支持的字符串，从而显著减少内存占用并大幅提升性能。</p></li>
<li><p>默认使用 PyArrow 推断更复杂的数据类型，例如 <code class="docutils literal notranslate"><span class="pre">Decimal</span></code>、<code class="docutils literal notranslate"><span class="pre">lists</span></code>、<code class="docutils literal notranslate"><span class="pre">bytes</span></code>、<code class="docutils literal notranslate"><span class="pre">structured</span> <span class="pre">data</span></code> 等等。</p></li>
<li><p>与其他依赖 Apache Arrow 的库更好地互操作。</p></li>
</ul>
<p>我们正在<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/54466">此处</a>收集关于此决定的反馈。</p>
</section>
<section id="avoid-numpy-object-dtype-for-strings-by-default">
<span id="whatsnew-210-enhancements-infer-strings"></span><h3>默认避免对字符串使用 NumPy object 数据类型<a class="headerlink" href="v2.1.0.html#avoid-numpy-object-dtype-for-strings-by-default" title="Link to this heading">#</a></h3>
<p>以前，所有字符串默认存储在具有 NumPy object 数据类型的列中。此版本引入了一个选项 <code class="docutils literal notranslate"><span class="pre">future.infer_string</span></code>，可以将所有字符串推断为具有数据类型 <code class="docutils literal notranslate"><span class="pre">"string[pyarrow_numpy]"</span></code> 的 PyArrow 支持的字符串。这是一种新的字符串数据类型实现，它在比较操作中遵循 NumPy 语义，并将 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> 作为缺失值指示符。设置此选项还将把数据类型 <code class="docutils literal notranslate"><span class="pre">"string"</span></code> 推断为具有存储设置为 <code class="docutils literal notranslate"><span class="pre">"pyarrow_numpy"</span></code> 的 <a class="reference internal" href="../reference/api/pandas.StringDtype.html#pandas.StringDtype" title="pandas.StringDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringDtype</span></code></a>，同时忽略选项 <code class="docutils literal notranslate"><span class="pre">mode.string_storage</span></code> 后面的值。</p>
<p>此选项仅在安装了 PyArrow 时有效。PyArrow 支持的字符串与 NumPy object 相比，内存占用显著减少，并提供巨大的性能提升 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54430">GH 54430</a>)。</p>
<p>此选项可以通过以下方式启用：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">future</span><span class="o">.</span><span class="n">infer_string</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>此行为将在 pandas 3.0 中成为默认设置。</p>
</section>
<section id="dataframe-reductions-preserve-extension-dtypes">
<span id="whatsnew-210-enhancements-reduction-extension-dtypes"></span><h3>DataFrame 聚合操作保留扩展数据类型<a class="headerlink" href="v2.1.0.html#dataframe-reductions-preserve-extension-dtypes" title="Link to this heading">#</a></h3>
<p>在 pandas 的早期版本中，DataFrame 聚合操作（<a class="reference internal" href="../reference/api/pandas.DataFrame.sum.html#pandas.DataFrame.sum" title="pandas.DataFrame.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sum()</span></code></a> <a class="reference internal" href="../reference/api/pandas.DataFrame.mean.html#pandas.DataFrame.mean" title="pandas.DataFrame.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mean()</span></code></a> 等）的结果是 NumPy 数据类型，即使 DataFrame 具有扩展数据类型。现在，当对具有相同数据类型的 DataFrame 列执行聚合操作时，Pandas 可以保留其数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52788">GH 52788</a>)。</p>
<p><em>旧行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"a"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">"b"</span><span class="p">:</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]},</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"Int64"</span><span class="p">)</span>
<span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[2]:</span>
<span class="go">a    5</span>
<span class="go">b    9</span>
<span class="go">dtype: int64</span>
<span class="gp">In [3]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">"int64[pyarrow]"</span><span class="p">)</span>
<span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[4]:</span>
<span class="go">a    5</span>
<span class="go">b    9</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p><em>新行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"a"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">"b"</span><span class="p">:</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]},</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"Int64"</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[2]: </span>
<span class="go">a    5</span>
<span class="go">b    9</span>
<span class="go">dtype: Int64</span>

<span class="gp">In [3]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">"int64[pyarrow]"</span><span class="p">)</span>

<span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[4]: </span>
<span class="go">a    5</span>
<span class="go">b    9</span>
<span class="go">dtype: int64[pyarrow]</span>
</pre></div>
</div>
<p>请注意，数据类型现在分别是掩码数据类型和 PyArrow 数据类型，而以前是 NumPy 整数数据类型。</p>
<p>为了允许 DataFrame 聚合操作保留扩展数据类型，<a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray._reduce.html#pandas.api.extensions.ExtensionArray._reduce" title="pandas.api.extensions.ExtensionArray._reduce"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray._reduce()</span></code></a> 新增了一个关键字参数 <code class="docutils literal notranslate"><span class="pre">keepdims</span></code>。调用 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray._reduce.html#pandas.api.extensions.ExtensionArray._reduce" title="pandas.api.extensions.ExtensionArray._reduce"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray._reduce()</span></code></a> 并传入 <code class="docutils literal notranslate"><span class="pre">keepdims=True</span></code> 应在聚合轴上返回长度为 1 的数组。为了保持向后兼容性，该参数目前不是必需的，但在将来会成为必需参数。如果在签名中未找到该参数，DataFrame 聚合操作将无法保留扩展数据类型。此外，如果未找到该参数，将发出一个 <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code>，并且 mypy 等类型检查器可能会抱怨签名与 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray._reduce.html#pandas.api.extensions.ExtensionArray._reduce" title="pandas.api.extensions.ExtensionArray._reduce"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray._reduce()</span></code></a> 不兼容。</p>
</section>
<section id="copy-on-write-improvements">
<span id="whatsnew-210-enhancements-cow"></span><h3>写时复制改进<a class="headerlink" href="v2.1.0.html#copy-on-write-improvements" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Series.transform.html#pandas.Series.transform" title="pandas.Series.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.transform()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">func</span></code> 就地修改 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时现在遵守写时复制原则 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53747">GH 53747</a>)</p></li>
<li><p>调用 <a class="reference internal" href="../reference/api/pandas.Index.values.html#pandas.Index.values" title="pandas.Index.values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.values()</span></code></a> 现在将返回一个只读的 NumPy 数组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53704">GH 53704</a>)</p></li>
<li><p>将 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 设置到 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中现在会创建延迟复制而非深层复制 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53142">GH 53142</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数，当从 Index 对象的字典构造 DataFrame 并指定 <code class="docutils literal notranslate"><span class="pre">copy=False</span></code> 时，现在将对这些 Index 对象使用延迟复制作为 DataFrame 的列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52947">GH 52947</a>)</p></li>
<li><p>Series 或 DataFrame 的浅层复制（<code class="docutils literal notranslate"><span class="pre">df.copy(deep=False)</span></code>）现在也将返回行/列 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 对象的浅层复制，而不仅仅是数据的浅层复制，即结果的索引不再相同（<code class="docutils literal notranslate"><span class="pre">df.copy(deep=False).index</span> <span class="pre">is</span> <span class="pre">df.index</span></code> 不再为 True） (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53721">GH 53721</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.head.html#pandas.DataFrame.head" title="pandas.DataFrame.head"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.head()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.tail.html#pandas.DataFrame.tail" title="pandas.DataFrame.tail"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.tail()</span></code></a> 现在将返回深层复制 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54011">GH 54011</a>)</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.DataFrame.eval.html#pandas.DataFrame.eval" title="pandas.DataFrame.eval"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.eval()</span></code></a> 添加了延迟复制机制 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53746">GH 53746</a>)</p></li>
<li><p>尝试在临时列选择上就地操作（例如，<code class="docutils literal notranslate"><span class="pre">df["a"].fillna(100,</span> <span class="pre">inplace=True)</span></code>）在启用写时复制时，现在将始终引发警告。在此模式下，像这样就地操作将永远不起作用，因为选择行为是一个临时副本。这适用于以下情况：</p>
<ul>
<li><p>DataFrame.update / Series.update</p></li>
<li><p>DataFrame.fillna / Series.fillna</p></li>
<li><p>DataFrame.replace / Series.replace</p></li>
<li><p>DataFrame.clip / Series.clip</p></li>
<li><p>DataFrame.where / Series.where</p></li>
<li><p>DataFrame.mask / Series.mask</p></li>
<li><p>DataFrame.interpolate / Series.interpolate</p></li>
<li><p>DataFrame.ffill / Series.ffill</p></li>
<li><p>DataFrame.bfill / Series.bfill</p></li>
</ul>
</li>
</ul>
</section>
<section id="new-dataframe-map-method-and-support-for-extensionarrays">
<span id="whatsnew-210-enhancements-map-na-action"></span><h3>新增 <a class="reference internal" href="../reference/api/pandas.DataFrame.map.html#pandas.DataFrame.map" title="pandas.DataFrame.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.map()</span></code></a> 方法并支持 ExtensionArrays<a class="headerlink" href="v2.1.0.html#new-dataframe-map-method-and-support-for-extensionarrays" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.map.html#pandas.DataFrame.map" title="pandas.DataFrame.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.map()</span></code></a> 已添加，而 <a class="reference internal" href="../reference/api/pandas.DataFrame.applymap.html#pandas.DataFrame.applymap" title="pandas.DataFrame.applymap"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.applymap()</span></code></a> 已弃用。<a class="reference internal" href="../reference/api/pandas.DataFrame.map.html#pandas.DataFrame.map" title="pandas.DataFrame.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.map()</span></code></a> 具有与 <a class="reference internal" href="../reference/api/pandas.DataFrame.applymap.html#pandas.DataFrame.applymap" title="pandas.DataFrame.applymap"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.applymap()</span></code></a> 相同的功能，但新名称更好地传达了这是 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 版本的 <a class="reference internal" href="../reference/api/pandas.Series.map.html#pandas.Series.map" title="pandas.Series.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.map()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52353">GH 52353</a>)。</p>
<p>当给定一个可调用对象时，<a class="reference internal" href="../reference/api/pandas.Series.map.html#pandas.Series.map" title="pandas.Series.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.map()</span></code></a> 将该可调用对象应用于 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的所有元素。类似地，<a class="reference internal" href="../reference/api/pandas.DataFrame.map.html#pandas.DataFrame.map" title="pandas.DataFrame.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.map()</span></code></a> 将该可调用对象应用于 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的所有元素，而 <a class="reference internal" href="../reference/api/pandas.Index.map.html#pandas.Index.map" title="pandas.Index.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.map()</span></code></a> 将该可调用对象应用于 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 的所有元素。</p>
<p>通常，不希望将可调用对象应用于数组中的 nan 值，为了避免这种情况，可以调用 <code class="docutils literal notranslate"><span class="pre">map</span></code> 方法并传入 <code class="docutils literal notranslate"><span class="pre">na_action="ignore"</span></code>，例如 <code class="docutils literal notranslate"><span class="pre">ser.map(func,</span> <span class="pre">na_action="ignore")</span></code>。然而，<code class="docutils literal notranslate"><span class="pre">na_action="ignore"</span></code> 并未针对许多 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code></a> 和 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 类型实现，并且除了可为空的数值类型（即数据类型为 <code class="xref py py-class docutils literal notranslate"><span class="pre">Int64</span></code> 等）之外，对于任何 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code></a> 子类，<code class="docutils literal notranslate"><span class="pre">na_action="ignore"</span></code> 也无法正常工作。</p>
<p><code class="docutils literal notranslate"><span class="pre">na_action="ignore"</span></code> 现在适用于所有数组类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52219">GH 52219</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51645">GH 51645</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51809">GH 51809</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51936">GH 51936</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52033">GH 52033</a>; <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52096">GH 52096</a>)。</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"category"</span><span class="p">)</span>
<span class="gp">In [2]: </span><span class="n">ser</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">,</span> <span class="n">na_action</span><span class="o">=</span><span class="s2">"ignore"</span><span class="p">)</span>
<span class="go">NotImplementedError</span>
<span class="gp">In [3]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">ser</span><span class="p">)</span>
<span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">,</span> <span class="n">na_action</span><span class="o">=</span><span class="s2">"ignore"</span><span class="p">)</span>  <span class="c1"># worked for DataFrame</span>
<span class="go">     0</span>
<span class="go">0    A</span>
<span class="go">1    B</span>
<span class="go">2  NaN</span>
<span class="gp">In [5]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">ser</span><span class="p">)</span>
<span class="gp">In [6]: </span><span class="n">idx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">,</span> <span class="n">na_action</span><span class="o">=</span><span class="s2">"ignore"</span><span class="p">)</span>
<span class="go">TypeError: CategoricalIndex.map() got an unexpected keyword argument 'na_action'</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"category"</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">ser</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">,</span> <span class="n">na_action</span><span class="o">=</span><span class="s2">"ignore"</span><span class="p">)</span>
<span class="gh">Out[6]: </span>
<span class="go">0      A</span>
<span class="go">1      B</span>
<span class="go">2    NaN</span>
<span class="go">dtype: category</span>
<span class="go">Categories (2, object): ['A', 'B']</span>

<span class="gp">In [7]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">ser</span><span class="p">)</span>

<span class="gp">In [8]: </span><span class="n">df</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">,</span> <span class="n">na_action</span><span class="o">=</span><span class="s2">"ignore"</span><span class="p">)</span>
<span class="gh">Out[8]: </span>
<span class="go">     0</span>
<span class="go">0    A</span>
<span class="go">1    B</span>
<span class="go">2  NaN</span>

<span class="gp">In [9]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">ser</span><span class="p">)</span>

<span class="gp">In [10]: </span><span class="n">idx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">upper</span><span class="p">,</span> <span class="n">na_action</span><span class="o">=</span><span class="s2">"ignore"</span><span class="p">)</span>
<span class="gh">Out[10]: </span><span class="go">CategoricalIndex(['A', 'B', nan], categories=['A', 'B'], ordered=False, dtype='category')</span>
</pre></div>
</div>
<p>另外请注意，<code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.map()</span></code> 默认隐式地将其 <code class="docutils literal notranslate"><span class="pre">na_action</span></code> 设置为 <code class="docutils literal notranslate"><span class="pre">"ignore"</span></code>。此行为已被弃用，<code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.map()</span></code> 的默认值将改为 <code class="docutils literal notranslate"><span class="pre">na_action=None</span></code>，与所有其他数组类型保持一致。</p>
</section>
<section id="new-implementation-of-dataframe-stack">
<span id="whatsnew-210-enhancements-new-stack"></span><h3>DataFrame.stack() 的新实现<a class="headerlink" href="v2.1.0.html#new-implementation-of-dataframe-stack" title="Link to this heading">#</a></h3>
<p>pandas 重新实现了 <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a>。要使用新实现，请传入参数 <code class="docutils literal notranslate"><span class="pre">future_stack=True</span></code>。这将在 pandas 3.0 中成为唯一选项。</p>
<p>以前的实现主要有两个行为上的缺点。</p>
<ol class="arabic simple">
<li><p>以前的实现会不必要地在结果中引入 NA 值。用户可以通过传入 <code class="docutils literal notranslate"><span class="pre">dropna=True</span></code>（默认值）来自动移除 NA 值，但这样做也可能移除输入中已存在的 NA 值。请参见下面的示例。</p></li>
<li><p>以前的实现，当 <code class="docutils literal notranslate"><span class="pre">sort=True</span></code>（默认值）时，有时会对结果索引的一部分进行排序，有时则不会。如果输入的列<em>不是</em> <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a>，则结果索引将永远不会被排序。如果列是 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a>，那么在大多数情况下，结果索引中来自堆叠列级别（一个或多个）的级别将被排序。在极少数情况下，这些级别可能会以非标准顺序排序，具体取决于列的创建方式。</p></li>
</ol>
<p>新实现（<code class="docutils literal notranslate"><span class="pre">future_stack=True</span></code>）在堆叠多个级别时将不再不必要地引入 NA 值，并且永远不会进行排序。因此，在使用 <code class="docutils literal notranslate"><span class="pre">future_stack=True</span></code> 时，参数 <code class="docutils literal notranslate"><span class="pre">dropna</span></code> 和 <code class="docutils literal notranslate"><span class="pre">sort</span></code> 将不被使用，并且必须保持未指定状态。这些参数将在下一个主要版本中移除。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">columns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="s2">"B"</span><span class="p">,</span> <span class="s2">"d"</span><span class="p">),</span> <span class="p">(</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">)])</span>

<span class="gp">In [12]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">"z"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="gp">In [13]: </span><span class="n">df</span>
<span class="gh">Out[13]: </span>
<span class="go">   B  A</span>
<span class="go">   d  c</span>
<span class="go">z  0  2</span>
<span class="go">y  1  3</span>
</pre></div>
</div>
<p>在以前的版本中（<code class="docutils literal notranslate"><span class="pre">future_stack=False</span></code>），默认的 <code class="docutils literal notranslate"><span class="pre">dropna=True</span></code> 会移除不必要引入的 NA 值，但在处理过程中仍会将数据类型强制转换为 <code class="docutils literal notranslate"><span class="pre">float64</span></code>。在新版本中，不会引入任何 NA 值，因此也没有数据类型的强制转换。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="n">df</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">future_stack</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[14]: </span>
<span class="go">z  A  c    2.0</span>
<span class="go">   B  d    0.0</span>
<span class="go">y  A  c    3.0</span>
<span class="go">   B  d    1.0</span>
<span class="go">dtype: float64</span>

<span class="gp">In [15]: </span><span class="n">df</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">future_stack</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[15]: </span>
<span class="go">z  B  d    0</span>
<span class="go">   A  c    2</span>
<span class="go">y  B  d    1</span>
<span class="go">   A  c    3</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>如果输入包含 NA 值，以前的版本在使用 <code class="docutils literal notranslate"><span class="pre">dropna=True</span></code> 时会同时删除这些值，或者在使用 <code class="docutils literal notranslate"><span class="pre">dropna=False</span></code> 时引入新的 NA 值。新版本保留输入中的所有值。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]],</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="gp">In [17]: </span><span class="n">df</span>
<span class="gh">Out[17]: </span>
<span class="go">     B    A</span>
<span class="go">     d    c</span>
<span class="go">0  0.0  2.0</span>
<span class="go">1  NaN  NaN</span>

<span class="gp">In [18]: </span><span class="n">df</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">future_stack</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[18]: </span>
<span class="go">0  A  c    2.0</span>
<span class="go">   B  d    0.0</span>
<span class="go">dtype: float64</span>

<span class="gp">In [19]: </span><span class="n">df</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">future_stack</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[19]: </span>
<span class="go">0  A  d    NaN</span>
<span class="go">      c    2.0</span>
<span class="go">   B  d    0.0</span>
<span class="go">      c    NaN</span>
<span class="go">1  A  d    NaN</span>
<span class="go">      c    NaN</span>
<span class="go">   B  d    NaN</span>
<span class="go">      c    NaN</span>
<span class="go">dtype: float64</span>

<span class="gp">In [20]: </span><span class="n">df</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">future_stack</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[20]: </span>
<span class="go">0  B  d    0.0</span>
<span class="go">   A  c    2.0</span>
<span class="go">1  B  d    NaN</span>
<span class="go">   A  c    NaN</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
</section>
<section id="other-enhancements">
<span id="whatsnew-210-enhancements-other"></span><h3>其他增强功能<a class="headerlink" href="v2.1.0.html#other-enhancements" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Series.ffill.html#pandas.Series.ffill" title="pandas.Series.ffill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.ffill()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.bfill.html#pandas.Series.bfill" title="pandas.Series.bfill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.bfill()</span></code></a> 现在支持具有 <a class="reference internal" href="../reference/api/pandas.IntervalDtype.html#pandas.IntervalDtype" title="pandas.IntervalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalDtype</span></code></a> 的对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54247">GH 54247</a>)</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.read_parquet.html#pandas.read_parquet" title="pandas.read_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parquet()</span></code></a> 添加了 <code class="docutils literal notranslate"><span class="pre">filters</span></code> 参数以过滤数据，与两种 <code class="docutils literal notranslate"><span class="pre">engines</span></code> 均兼容 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53212">GH 53212</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.map()</span></code> 和 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.map.html#pandas.CategoricalIndex.map" title="pandas.CategoricalIndex.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex.map()</span></code></a> 现在具有 <code class="docutils literal notranslate"><span class="pre">na_action</span></code> 参数。<code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.map()</span></code> 默认隐式地将 <code class="docutils literal notranslate"><span class="pre">na_action</span></code> 的值设置为 <code class="docutils literal notranslate"><span class="pre">"ignore"</span></code>。此行为已被正式弃用，并将在未来更改为 <code class="docutils literal notranslate"><span class="pre">None</span></code>。另请注意，<a class="reference internal" href="../reference/api/pandas.Series.map.html#pandas.Series.map" title="pandas.Series.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.map()</span></code></a> 的默认 <code class="docutils literal notranslate"><span class="pre">na_action=None</span></code>，并且现在除非另行明确设置，否则对包含分类数据的 Series 的调用将使用 <code class="docutils literal notranslate"><span class="pre">na_action=None</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44279">GH 44279</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">api.extensions.ExtensionArray</span></code></a> 现在具有 <code class="xref py py-meth docutils literal notranslate"><span class="pre">map()</span></code> 方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51809">GH 51809</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.applymap.html#pandas.DataFrame.applymap" title="pandas.DataFrame.applymap"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.applymap()</span></code></a> 现在使用底层 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">api.extensions.ExtensionArray</span></code></a> 实例的 <code class="xref py py-meth docutils literal notranslate"><span class="pre">map()</span></code> 方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52219">GH 52219</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.sort_values()</span></code> 现在支持 <code class="docutils literal notranslate"><span class="pre">na_position</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51612">GH 51612</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.sortlevel.html#pandas.MultiIndex.sortlevel" title="pandas.MultiIndex.sortlevel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.sortlevel()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.sortlevel()</span></code> 新增了关键字参数 <code class="docutils literal notranslate"><span class="pre">na_position</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51612">GH 51612</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">arrays.DatetimeArray.map()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">arrays.TimedeltaArray.map()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">arrays.PeriodArray.map()</span></code> 现在可以接受 <code class="docutils literal notranslate"><span class="pre">na_action</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51644">GH 51644</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">arrays.SparseArray.map()</span></code> 现在支持 <code class="docutils literal notranslate"><span class="pre">na_action</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52096">GH 52096</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.read_html()</span></code></a> 现在支持与 URL 一起使用时的 <code class="docutils literal notranslate"><span class="pre">storage_options</span></code> 关键字，允许用户将标头添加到出站 HTTP 请求中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/49944">GH 49944</a>)</p></li>
<li><p>添加 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.diff()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.round()</span></code> 方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19708">GH 19708</a>)</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">escape</span></code> 参数添加了 <code class="docutils literal notranslate"><span class="pre">"latex-math"</span></code> 选项，该选项在格式化期间将不会转义 <code class="docutils literal notranslate"><span class="pre">"\("</span></code> 和 <code class="docutils literal notranslate"><span class="pre">"\)"</span></code> 之间的所有字符 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51903">GH 51903</a>)</p></li>
<li><p>将类别的 dtype 添加到 <a class="reference internal" href="../reference/api/pandas.CategoricalDtype.html#pandas.CategoricalDtype" title="pandas.CategoricalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalDtype</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">repr</span></code> 信息中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52179">GH 52179</a>)</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 添加了 <code class="docutils literal notranslate"><span class="pre">engine_kwargs</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52214">GH 52214</a>)</p></li>
<li><p>对类型提示有用的类已添加到新子模块 <code class="docutils literal notranslate"><span class="pre">pandas.api.typing</span></code> 的公共 API 中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48577">GH 48577</a>)</p></li>
<li><p>为具有 <code class="docutils literal notranslate"><span class="pre">pyarrow.timestamp</span></code> 的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a> 实现了 <a class="reference internal" href="../reference/api/pandas.Series.dt.is_month_start.html#pandas.Series.dt.is_month_start" title="pandas.Series.dt.is_month_start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.is_month_start</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.dt.is_month_end.html#pandas.Series.dt.is_month_end" title="pandas.Series.dt.is_month_end"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.is_month_end</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.dt.is_year_start.html#pandas.Series.dt.is_year_start" title="pandas.Series.dt.is_year_start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.is_year_start</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.dt.is_year_end.html#pandas.Series.dt.is_year_end" title="pandas.Series.dt.is_year_end"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.is_year_end</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.dt.is_quarter_start.html#pandas.Series.dt.is_quarter_start" title="pandas.Series.dt.is_quarter_start"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.is_quarter_start</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.dt.is_quarter_end.html#pandas.Series.dt.is_quarter_end" title="pandas.Series.dt.is_quarter_end"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.is_quarter_end</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.dt.days_in_month.html#pandas.Series.dt.days_in_month" title="pandas.Series.dt.days_in_month"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.days_in_month</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.dt.unit.html#pandas.Series.dt.unit" title="pandas.Series.dt.unit"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.unit</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.dt.normalize.html#pandas.Series.dt.normalize" title="pandas.Series.dt.normalize"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.normalize</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.dt.day_name.html#pandas.Series.dt.day_name" title="pandas.Series.dt.day_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.dt.day_name()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.dt.month_name.html#pandas.Series.dt.month_name" title="pandas.Series.dt.month_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.dt.month_name()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.dt.tz_convert.html#pandas.Series.dt.tz_convert" title="pandas.Series.dt.tz_convert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.dt.tz_convert()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52388">GH 52388</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51718">GH 51718</a>)</p></li>
<li><p>当索引不是 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时，<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.agg.html#pandas.core.groupby.DataFrameGroupBy.agg" title="pandas.core.groupby.DataFrameGroupBy.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.agg()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 现在支持对 <code class="docutils literal notranslate"><span class="pre">engine="numba"</span></code> 使用多个键进行分组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53486">GH 53486</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.agg.html#pandas.Series.agg" title="pandas.core.groupby.SeriesGroupBy.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.agg()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.agg.html#pandas.core.groupby.DataFrameGroupBy.agg" title="pandas.core.groupby.DataFrameGroupBy.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.agg()</span></code></a> 现在支持为 <code class="docutils literal notranslate"><span class="pre">engine="numba"</span></code> 传入多个函数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53486">GH 53486</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.transform.html#pandas.core.groupby.SeriesGroupBy.transform" title="pandas.core.groupby.SeriesGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.transform()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 现在支持为 <code class="docutils literal notranslate"><span class="pre">engine="numba"</span></code> 传入字符串作为函数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53579">GH 53579</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a> 新增了 <code class="docutils literal notranslate"><span class="pre">sort</span></code> 关键字，用于指定结果 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 的级别是否排序 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15105">GH 15105</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.unstack()</span></code></a> 新增了 <code class="docutils literal notranslate"><span class="pre">sort</span></code> 关键字，用于指定结果 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 的级别是否排序 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15105">GH 15105</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.explode.html#pandas.Series.explode" title="pandas.Series.explode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.explode()</span></code></a> 现在支持 PyArrow 支持的列表类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53602">GH 53602</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.join.html#pandas.Series.str.join" title="pandas.Series.str.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.join()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">ArrowDtype(pa.string())</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53646">GH 53646</a>)</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes" title="pandas.Categorical.from_codes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.from_codes()</span></code></a> 添加了 <code class="docutils literal notranslate"><span class="pre">validate</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/50975">GH 50975</a>)</p></li>
<li><p>添加了 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.interpolate.html#pandas.api.extensions.ExtensionArray.interpolate" title="pandas.api.extensions.ExtensionArray.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray.interpolate()</span></code></a>，供 <a class="reference internal" href="../reference/api/pandas.Series.interpolate.html#pandas.Series.interpolate" title="pandas.Series.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.interpolate()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code></a> 使用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53659">GH 53659</a>)</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_excel()</span></code></a> 添加了 <code class="docutils literal notranslate"><span class="pre">engine_kwargs</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53220">GH 53220</a>)</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.DatetimeTZDtype.html#pandas.DatetimeTZDtype" title="pandas.DatetimeTZDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code></a> 实现了 <a class="reference internal" href="../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe" title="pandas.api.interchange.from_dataframe"><code class="xref py py-func docutils literal notranslate"><span class="pre">api.interchange.from_dataframe()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54239">GH 54239</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DatetimeTZDtype.html#pandas.DatetimeTZDtype" title="pandas.DatetimeTZDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code></a> 上实现了 <code class="docutils literal notranslate"><span class="pre">__from_arrow__</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52201">GH 52201</a>)</p></li>
<li><p>实现了 <code class="docutils literal notranslate"><span class="pre">__pandas_priority__</span></code> 以允许自定义类型在算术运算中优先于 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code></a>，<a class="reference internal" href="../development/extending.html#extending-pandas-priority"><span class="std std-ref">请参阅开发者指南</span></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48347">GH 48347</a>)</p></li>
<li><p>在使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge" title="pandas.DataFrame.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.merge()</span></code></a> 时，当列不兼容时的错误消息得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51861">GH 51861</a>)</p></li>
<li><p>通过 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.isetitem()</span></code> 设置列数不正确的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时的错误消息得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51701">GH 51701</a>)</p></li>
<li><p>在使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code></a> 时，当 <code class="docutils literal notranslate"><span class="pre">index</span></code> 和 <code class="docutils literal notranslate"><span class="pre">orient</span></code> 参数不兼容时的错误处理得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52143">GH 52143</a>)</p></li>
<li><p>当创建数据为空（0行）、没有索引且列数不正确的 DataFrame 时的错误消息得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52084">GH 52084</a>)</p></li>
<li><p>当为 <a class="reference internal" href="../reference/api/pandas.api.indexers.VariableOffsetWindowIndexer.html#pandas.api.indexers.VariableOffsetWindowIndexer" title="pandas.api.indexers.VariableOffsetWindowIndexer"><code class="xref py py-class docutils literal notranslate"><span class="pre">VariableOffsetWindowIndexer</span></code></a> 提供无效的 <code class="docutils literal notranslate"><span class="pre">index</span></code> 或 <code class="docutils literal notranslate"><span class="pre">offset</span></code> 参数时的错误消息得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54379">GH 54379</a>)</p></li>
<li><p>现在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_feather.html#pandas.DataFrame.to_feather" title="pandas.DataFrame.to_feather"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_feather()</span></code></a> 可以接受非默认的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 和非字符串列名 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51787">GH 51787</a>)</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.Series.apply.html#pandas.Series.apply" title="pandas.Series.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.apply()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 添加了一个新参数 <code class="docutils literal notranslate"><span class="pre">by_row</span></code>。当设置为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 时，提供的可调用对象将始终对整个 Series 或 DataFrame 进行操作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53400">GH 53400</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53601">GH 53601</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.shift.html#pandas.DataFrame.shift" title="pandas.DataFrame.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.shift()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.shift.html#pandas.Series.shift" title="pandas.Series.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.shift()</span></code></a> 现在允许通过提供一个周期列表来进行多周期移位 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44424">GH 44424</a>)</p></li>
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">numba</span></code> 进行分组聚合（例如 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.sum.html#pandas.core.groupby.DataFrameGroupBy.sum" title="pandas.core.groupby.DataFrameGroupBy.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.sum()</span></code></a>）现在可以保留输入的 dtype，而不再强制转换为 <code class="docutils literal notranslate"><span class="pre">float64</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44952">GH 44952</a>)</p></li>
<li><p>当 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.agg.html#pandas.core.groupby.DataFrameGroupBy.agg" title="pandas.core.groupby.DataFrameGroupBy.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.agg()</span></code></a> 失败时的错误消息得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52930">GH 52930</a>)</p></li>
<li><p>许多 read/to_* 函数，例如 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_pickle.html#pandas.DataFrame.to_pickle" title="pandas.DataFrame.to_pickle"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_pickle()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a>，支持将压缩参数转发给 <code class="docutils literal notranslate"><span class="pre">lzma.LZMAFile</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52979">GH 52979</a>)</p></li>
<li><p>聚合操作 <a class="reference internal" href="../reference/api/pandas.Series.argmax.html#pandas.Series.argmax" title="pandas.Series.argmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.argmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.argmin.html#pandas.Series.argmin" title="pandas.Series.argmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.argmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.idxmax.html#pandas.Series.idxmax" title="pandas.Series.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.idxmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.idxmin.html#pandas.Series.idxmin" title="pandas.Series.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.idxmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Index.argmax.html#pandas.Index.argmax" title="pandas.Index.argmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.argmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Index.argmin.html#pandas.Index.argmin" title="pandas.Index.argmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.argmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.idxmax.html#pandas.DataFrame.idxmax" title="pandas.DataFrame.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.idxmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.idxmin.html#pandas.DataFrame.idxmin" title="pandas.DataFrame.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.idxmin()</span></code></a> 现在支持 object 数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/4279">GH 4279</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18021">GH 18021</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40685">GH 40685</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/43697">GH 43697</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" title="pandas.DataFrame.to_parquet"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_parquet()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_parquet.html#pandas.read_parquet" title="pandas.read_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parquet()</span></code></a> 现在将分别写入和读取 <code class="docutils literal notranslate"><span class="pre">attrs</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54346">GH 54346</a>)</p></li>
<li><p>具有浮点数据类型和 timedelta64 数据类型的 <a class="reference internal" href="../reference/api/pandas.Index.all.html#pandas.Index.all" title="pandas.Index.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.all()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.any.html#pandas.Index.any" title="pandas.Index.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.any()</span></code></a> 不再引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>，与 <a class="reference internal" href="../reference/api/pandas.Series.all.html#pandas.Series.all" title="pandas.Series.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.all()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.any.html#pandas.Series.any" title="pandas.Series.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.any()</span></code></a> 的行为一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54566">GH 54566</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.cummax.html#pandas.Series.cummax" title="pandas.Series.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.cummax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.cummin.html#pandas.Series.cummin" title="pandas.Series.cummin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.cummin()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.cumprod.html#pandas.Series.cumprod" title="pandas.Series.cumprod"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.cumprod()</span></code></a> 现在支持 pyarrow 13.0 及更高版本的 pyarrow 数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52085">GH 52085</a>)</p></li>
<li><p>增加了对 DataFrame Consortium Standard 的支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54383">GH 54383</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.quantile.html#pandas.core.groupby.DataFrameGroupBy.quantile" title="pandas.core.groupby.DataFrameGroupBy.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.quantile()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.quantile.html#pandas.core.groupby.SeriesGroupBy.quantile" title="pandas.core.groupby.SeriesGroupBy.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.quantile()</span></code></a> 的性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51722">GH 51722</a>)</p></li>
<li><p>PyArrow 支持的整数数据类型现在支持位操作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54495">GH 54495</a>)</p></li>
</ul>
</section>
</section>
<section id="backwards-incompatible-api-changes">
<span id="whatsnew-210-api-breaking"></span><h2>向后不兼容的 API 更改<a class="headerlink" href="v2.1.0.html#backwards-incompatible-api-changes" title="Link to this heading">#</a></h2>
<section id="increased-minimum-version-for-python">
<span id="whatsnew-210-api-breaking-deps"></span><h3>Python 最低版本要求提升<a class="headerlink" href="v2.1.0.html#increased-minimum-version-for-python" title="Link to this heading">#</a></h3>
<p>pandas 2.1.0 支持 Python 3.9 及更高版本。</p>
</section>
<section id="increased-minimum-versions-for-dependencies">
<h3>依赖项最低版本要求提升<a class="headerlink" href="v2.1.0.html#increased-minimum-versions-for-dependencies" title="Link to this heading">#</a></h3>
<p>部分依赖项的最低支持版本已更新。如果已安装，我们现在要求：</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>包</p></th>
<th class="head"><p>最低版本</p></th>
<th class="head"><p>必需</p></th>
<th class="head"><p>已变更</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>numpy</p></td>
<td><p>1.22.4</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>mypy (dev)</p></td>
<td><p>1.4.1</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>beautifulsoup4</p></td>
<td><p>4.11.1</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>bottleneck</p></td>
<td><p>1.3.4</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>dataframe-api-compat</p></td>
<td><p>0.1.7</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>fastparquet</p></td>
<td><p>0.8.1</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>fsspec</p></td>
<td><p>2022.05.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>hypothesis</p></td>
<td><p>6.46.1</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>gcsfs</p></td>
<td><p>2022.05.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>jinja2</p></td>
<td><p>3.1.2</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>lxml</p></td>
<td><p>4.8.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>numba</p></td>
<td><p>0.55.2</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>numexpr</p></td>
<td><p>2.8.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>openpyxl</p></td>
<td><p>3.0.10</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pandas-gbq</p></td>
<td><p>0.17.5</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>psycopg2</p></td>
<td><p>2.9.3</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pyreadstat</p></td>
<td><p>1.1.5</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pyqt5</p></td>
<td><p>5.15.6</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pytables</p></td>
<td><p>3.7.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pytest</p></td>
<td><p>7.3.2</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>python-snappy</p></td>
<td><p>0.6.1</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pyxlsb</p></td>
<td><p>1.0.9</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>s3fs</p></td>
<td><p>2022.05.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>scipy</p></td>
<td><p>1.8.1</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>sqlalchemy</p></td>
<td><p>1.4.36</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>tabulate</p></td>
<td><p>0.8.10</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>xarray</p></td>
<td><p>2022.03.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>xlsxwriter</p></td>
<td><p>3.0.3</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>zstandard</p></td>
<td><p>0.17.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
</tbody>
</table>
<p>对于<a class="reference external" href="../getting_started/install.html">可选库</a>，一般建议使用最新版本。</p>
<p>更多信息请参阅 <a class="reference internal" href="../getting_started/install.html#install-dependencies"><span class="std std-ref">依赖项</span></a> 和 <a class="reference internal" href="../getting_started/install.html#install-optional-dependencies"><span class="std std-ref">可选依赖项</span></a>。</p>
</section>
<section id="other-api-changes">
<span id="whatsnew-210-api-breaking-other"></span><h3>其他 API 更改<a class="headerlink" href="v2.1.0.html#other-api-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">arrays.PandasArray</span></code> 已更名为 <a class="reference internal" href="../reference/api/pandas.arrays.NumpyExtensionArray.html#pandas.arrays.NumpyExtensionArray" title="pandas.arrays.NumpyExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumpyExtensionArray</span></code></a>，其附加的 dtype 名称已从 <code class="docutils literal notranslate"><span class="pre">PandasDtype</span></code> 更改为 <code class="docutils literal notranslate"><span class="pre">NumpyEADtype</span></code>；导入 <code class="docutils literal notranslate"><span class="pre">PandasArray</span></code> 在下一个主要版本之前仍然有效 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53694">GH 53694</a>)</p></li>
</ul>
</section>
</section>
<section id="deprecations">
<span id="whatsnew-210-deprecations"></span><h2>弃用<a class="headerlink" href="v2.1.0.html#deprecations" title="Link to this heading">#</a></h2>
<section id="deprecated-silent-upcasting-in-setitem-like-series-operations">
<h3>弃用 setitem 类的 Series 操作中的隐式向上转型<a class="headerlink" href="v2.1.0.html#deprecated-silent-upcasting-in-setitem-like-series-operations" title="Link to this heading">#</a></h3>
<p>PDEP-6: <a class="reference external" href="https://pandas.ac.cn/pdeps/0006-ban-upcasting.html">https://pandas.ac.cn/pdeps/0006-ban-upcasting.html</a></p>
<p>在 Series（或 DataFrame 列）上执行的 setitem 类的操作，如果隐式地向上转型数据类型，则已弃用并显示警告。受影响的操作示例包括：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ser.fillna('foo',</span> <span class="pre">inplace=True)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ser.where(ser.isna(),</span> <span class="pre">'foo',</span> <span class="pre">inplace=True)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ser.iloc[indexer]</span> <span class="pre">=</span> <span class="pre">'foo'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ser.loc[indexer]</span> <span class="pre">=</span> <span class="pre">'foo'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">df.iloc[indexer,</span> <span class="pre">0]</span> <span class="pre">=</span> <span class="pre">'foo'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">df.loc[indexer,</span> <span class="pre">'a']</span> <span class="pre">=</span> <span class="pre">'foo'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ser[indexer]</span> <span class="pre">=</span> <span class="pre">'foo'</span></code></p></li>
</ul>
<p>其中 <code class="docutils literal notranslate"><span class="pre">ser</span></code> 是一个 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>，<code class="docutils literal notranslate"><span class="pre">df</span></code> 是一个 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>，<code class="docutils literal notranslate"><span class="pre">indexer</span></code> 可以是切片、掩码、单个值、值列表或数组，或任何其他允许的索引器。</p>
<p>在未来的版本中，这些操作将引发错误，您应该首先转换为一个共同的数据类型。</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [2]: </span><span class="n">ser</span>
<span class="gh">Out[2]:</span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">dtype: int64</span>

<span class="gp">In [3]: </span><span class="n">ser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'not an int64'</span>

<span class="gp">In [4]: </span><span class="n">ser</span>
<span class="gh">Out[4]:</span>
<span class="go">0    not an int64</span>
<span class="go">1               2</span>
<span class="go">2               3</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [2]: </span><span class="n">ser</span>
<span class="gh">Out[2]:</span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">dtype: int64</span>

<span class="gp">In [3]: </span><span class="n">ser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'not an int64'</span>
<span class="go">FutureWarning:</span>
<span class="go">  Setting an item of incompatible dtype is deprecated and will raise an error in a future version of pandas.</span>
<span class="go">  Value 'not an int64' has dtype incompatible with int64, please explicitly cast to a compatible dtype first.</span>

<span class="gp">In [4]: </span><span class="n">ser</span>
<span class="gh">Out[4]:</span>
<span class="go">0    not an int64</span>
<span class="go">1               2</span>
<span class="go">2               3</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>为了保留当前行为，在上述情况下，您可以首先将 <code class="docutils literal notranslate"><span class="pre">ser</span></code> 转换为 <code class="docutils literal notranslate"><span class="pre">object</span></code> 数据类型：</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [21]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [22]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">ser</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'object'</span><span class="p">)</span>

<span class="gp">In [23]: </span><span class="n">ser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'not an int64'</span>

<span class="gp">In [24]: </span><span class="n">ser</span>
<span class="gh">Out[24]: </span>
<span class="go">0    not an int64</span>
<span class="go">1               2</span>
<span class="go">2               3</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>根据用例，转换为不同的数据类型可能更合适。例如，在以下示例中，我们转换为 <code class="docutils literal notranslate"><span class="pre">float64</span></code>：</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [26]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">ser</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'float64'</span><span class="p">)</span>

<span class="gp">In [27]: </span><span class="n">ser</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.1</span>

<span class="gp">In [28]: </span><span class="n">ser</span>
<span class="gh">Out[28]: </span>
<span class="go">0    1.1</span>
<span class="go">1    2.0</span>
<span class="go">2    3.0</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>如需进一步阅读，请参阅<a class="reference external" href="https://pandas.ac.cn/pdeps/0006-ban-upcasting.html">https://pandas.ac.cn/pdeps/0006-ban-upcasting.html</a>。</p>
</section>
<section id="deprecated-parsing-datetimes-with-mixed-time-zones">
<h3>弃用解析混合时区日期时间的方法<a class="headerlink" href="v2.1.0.html#deprecated-parsing-datetimes-with-mixed-time-zones" title="Link to this heading">#</a></h3>
<p>解析混合时区的日期时间已被弃用，除非用户将 <code class="docutils literal notranslate"><span class="pre">utc=True</span></code> 传递给 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a>，否则会显示警告 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/50887">GH 50887</a>)。</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"2020-01-01 00:00:00+06:00"</span><span class="p">,</span> <span class="s2">"2020-01-01 00:00:00+01:00"</span><span class="p">]</span>

<span class="gp">In [8]: </span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[8]:</span>
<span class="go">Index([2020-01-01 00:00:00+06:00, 2020-01-01 00:00:00+01:00], dtype='object')</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">FutureWarning:</span>
<span class="go">  In a future version of pandas, parsing datetimes with mixed time zones will raise</span>
<span class="go">  a warning unless `utc=True`. Please specify `utc=True` to opt in to the new behaviour</span>
<span class="go">  and silence this warning. To create a `Series` with mixed offsets and `object` dtype,</span>
<span class="go">  please use `apply` and `datetime.datetime.strptime`.</span>
<span class="go">Index([2020-01-01 00:00:00+06:00, 2020-01-01 00:00:00+01:00], dtype='object')</span>
</pre></div>
</div>
<p>为消除此警告并避免在未来版本的 pandas 中出现错误，请指定 <code class="docutils literal notranslate"><span class="pre">utc=True</span></code>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"2020-01-01 00:00:00+06:00"</span><span class="p">,</span> <span class="s2">"2020-01-01 00:00:00+01:00"</span><span class="p">]</span>

<span class="gp">In [30]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[30]: </span><span class="go">DatetimeIndex(['2019-12-31 18:00:00+00:00', '2019-12-31 23:00:00+00:00'], dtype='datetime64[ns, UTC]', freq=None)</span>
</pre></div>
</div>
<p>要创建具有混合偏移和 <code class="docutils literal notranslate"><span class="pre">object</span></code> 类型的 <code class="docutils literal notranslate"><span class="pre">Series</span></code>，请使用 <code class="docutils literal notranslate"><span class="pre">apply</span></code> 和 <code class="docutils literal notranslate"><span class="pre">datetime.datetime.strptime</span></code>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [31]: </span><span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">dt</span>

<span class="gp">In [32]: </span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"2020-01-01 00:00:00+06:00"</span><span class="p">,</span> <span class="s2">"2020-01-01 00:00:00+01:00"</span><span class="p">]</span>

<span class="gp">In [33]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">'%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S%z'</span><span class="p">))</span>
<span class="gh">Out[33]: </span>
<span class="go">0    2020-01-01 00:00:00+06:00</span>
<span class="go">1    2020-01-01 00:00:00+01:00</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</section>
<section id="other-deprecations">
<h3>其他弃用<a class="headerlink" href="v2.1.0.html#other-deprecations" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>弃用 <code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFrameGroupBy.dtypes</span></code>，请改为检查底层对象的 <code class="docutils literal notranslate"><span class="pre">dtypes</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51045">GH 51045</a>)。</p></li>
<li><p>弃用 <code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFrame._data</span></code> 和 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Series._data</span></code>，请改为使用公共 API (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33333">GH 33333</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 在任何被连接对象长度为 0 时的行为；过去在确定结果类型时会忽略空对象的类型，未来版本将不再忽略 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39122">GH 39122</a>)。</p></li>
<li><p>弃用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.to_list()</span></code>，请改为使用 <code class="docutils literal notranslate"><span class="pre">obj.tolist()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51254">GH 51254</a>)。</p></li>
<li><p>弃用带 datetime64 或 <a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 值的 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.all.html#pandas.core.groupby.DataFrameGroupBy.all" title="pandas.core.groupby.DataFrameGroupBy.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.all()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.any.html#pandas.core.groupby.DataFrameGroupBy.any" title="pandas.core.groupby.DataFrameGroupBy.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.any()</span></code></a>，与 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的弃用保持一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34479">GH 34479</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.ewm.html#pandas.DataFrame.ewm" title="pandas.DataFrame.ewm"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.ewm()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.expanding.html#pandas.DataFrame.expanding" title="pandas.DataFrame.expanding"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.expanding()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 参数，请改为在调用方法之前进行转置 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51778">GH 51778</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Grouper.html#pandas.Grouper" title="pandas.Grouper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grouper</span></code></a> 构造函数中的 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 参数，请改为使用 <code class="docutils literal notranslate"><span class="pre">frame.T.groupby(...)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51203">GH 51203</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Series.align.html#pandas.Series.align" title="pandas.Series.align"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.align()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.align.html#pandas.DataFrame.align" title="pandas.DataFrame.align"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.align()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">broadcast_axis</span></code> 关键字，请改为在调用 <code class="docutils literal notranslate"><span class="pre">align</span></code> 之前使用 <code class="docutils literal notranslate"><span class="pre">left</span> <span class="pre">=</span> <span class="pre">DataFrame({col:</span> <span class="pre">left</span> <span class="pre">for</span> <span class="pre">col</span> <span class="pre">in</span> <span class="pre">right.columns},</span> <span class="pre">index=right.index)</span></code> 进行向上转型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51856">GH 51856</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Index.fillna.html#pandas.Index.fillna" title="pandas.Index.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.fillna()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">downcast</span></code> 关键字 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53956">GH 53956</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.pct_change.html#pandas.DataFrame.pct_change" title="pandas.DataFrame.pct_change"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pct_change()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.pct_change.html#pandas.Series.pct_change" title="pandas.Series.pct_change"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.pct_change()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.pct_change.html#pandas.core.groupby.DataFrameGroupBy.pct_change" title="pandas.core.groupby.DataFrameGroupBy.pct_change"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.pct_change()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.pct_change.html#pandas.core.groupby.SeriesGroupBy.pct_change" title="pandas.core.groupby.SeriesGroupBy.pct_change"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.pct_change()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">fill_method</span></code> 和 <code class="docutils literal notranslate"><span class="pre">limit</span></code> 关键字，请改为在调用 <code class="docutils literal notranslate"><span class="pre">pct_change</span></code> 之前显式调用例如 <a class="reference internal" href="../reference/api/pandas.DataFrame.ffill.html#pandas.DataFrame.ffill" title="pandas.DataFrame.ffill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.ffill()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.bfill.html#pandas.DataFrame.bfill" title="pandas.DataFrame.bfill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.bfill()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53491">GH 53491</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.align.html#pandas.DataFrame.align" title="pandas.DataFrame.align"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.align()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.align.html#pandas.Series.align" title="pandas.Series.align"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.align()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">method</span></code>、<code class="docutils literal notranslate"><span class="pre">limit</span></code> 和 <code class="docutils literal notranslate"><span class="pre">fill_axis</span></code> 关键字，请改为显式调用 <a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a> 来处理对齐结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51856">GH 51856</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.quantile.html#pandas.core.window.rolling.Rolling.quantile" title="pandas.core.window.rolling.Rolling.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.quantile()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.window.expanding.Expanding.quantile.html#pandas.core.window.expanding.Expanding.quantile" title="pandas.core.window.expanding.Expanding.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Expanding.quantile()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">quantile</span></code> 关键字，改为重命名为 <code class="docutils literal notranslate"><span class="pre">q</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52550">GH 52550</a>)。</p></li>
<li><p>弃用在 <a class="reference internal" href="../reference/api/pandas.DataFrame.take.html#pandas.DataFrame.take" title="pandas.DataFrame.take"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.take()</span></code></a> 中接受切片，请改为调用 <code class="docutils literal notranslate"><span class="pre">obj[slicer]</span></code> 或传递整数序列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51539">GH 51539</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.idxmax.html#pandas.DataFrame.idxmax" title="pandas.DataFrame.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.idxmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.idxmin.html#pandas.DataFrame.idxmin" title="pandas.DataFrame.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.idxmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.idxmax.html#pandas.Series.idxmax" title="pandas.Series.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.idxmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.idxmin.html#pandas.Series.idxmin" title="pandas.Series.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.idxmin()</span></code></a> 在包含所有 NA 条目或任何 NA 且 <code class="docutils literal notranslate"><span class="pre">skipna=False</span></code> 时的行为；在未来版本中，这些操作将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51276">GH 51276</a>)。</p></li>
<li><p>弃用显式支持 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 的子类化 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45289">GH 45289</a>)。</p></li>
<li><p>弃用将函数传递给 <a class="reference internal" href="../reference/api/pandas.Series.agg.html#pandas.Series.agg" title="pandas.Series.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.agg()</span></code></a> 时，先尝试对 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中的每个元素进行操作，只有当元素级操作失败时才对整个 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 进行操作的行为。未来，传递给 <a class="reference internal" href="../reference/api/pandas.Series.agg.html#pandas.Series.agg" title="pandas.Series.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.agg()</span></code></a> 的函数将始终只对整个 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 进行操作。要保留当前行为，请改为使用 <a class="reference internal" href="../reference/api/pandas.Series.transform.html#pandas.Series.transform" title="pandas.Series.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.transform()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53325">GH 53325</a>)。</p></li>
<li><p>弃用将函数列表传递给 <a class="reference internal" href="../reference/api/pandas.DataFrame.agg.html#pandas.DataFrame.agg" title="pandas.DataFrame.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.agg()</span></code></a> 时，先尝试对 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中的每个元素进行操作，只有当元素级操作失败时才对 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的列进行操作的行为。要保留当前行为，请改为使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.transform.html#pandas.DataFrame.transform" title="pandas.DataFrame.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.transform()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53325">GH 53325</a>)。</p></li>
<li><p>弃用将 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 传递给 <a class="reference internal" href="../reference/api/pandas.DataFrame.from_records.html#pandas.DataFrame.from_records" title="pandas.DataFrame.from_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.from_records()</span></code></a>，请改为使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.set_index.html#pandas.DataFrame.set_index" title="pandas.DataFrame.set_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.set_index()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.drop.html#pandas.DataFrame.drop" title="pandas.DataFrame.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.drop()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51353">GH 51353</a>)。</p></li>
<li><p>弃用在将字符串解析为日期时间时，默默地忽略无法识别的时区 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18702">GH 18702</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.ewm.html#pandas.DataFrame.ewm" title="pandas.DataFrame.ewm"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.ewm()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.ewm.html#pandas.Series.ewm" title="pandas.Series.ewm"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.ewm()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.rolling.html#pandas.Series.rolling" title="pandas.Series.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rolling()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.expanding.html#pandas.DataFrame.expanding" title="pandas.DataFrame.expanding"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.expanding()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.expanding.html#pandas.Series.expanding" title="pandas.Series.expanding"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.expanding()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 关键字 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51778">GH 51778</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 关键字 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51778">GH 51778</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Series.interpolate.html#pandas.Series.interpolate" title="pandas.Series.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.interpolate()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.ffill.html#pandas.Series.ffill" title="pandas.Series.ffill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.ffill()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.ffill.html#pandas.DataFrame.ffill" title="pandas.DataFrame.ffill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.ffill()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.bfill.html#pandas.Series.bfill" title="pandas.Series.bfill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.bfill()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.bfill.html#pandas.DataFrame.bfill" title="pandas.DataFrame.bfill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.bfill()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">downcast</span></code> 关键字 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40988">GH 40988</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">len(keys)</span> <span class="pre">!=</span> <span class="pre">len(objs)</span></code> 时的行为，未来版本将引发错误而不是截断为较短的序列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/43485">GH 43485</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Series.argsort.html#pandas.Series.argsort" title="pandas.Series.argsort"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.argsort()</span></code></a> 在存在 NA 值时的行为；在未来版本中，这些值将被排序到末尾而不是返回 -1 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54219">GH 54219</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 中 <code class="docutils literal notranslate"><span class="pre">observed=False</span></code> 的默认值；这在未来版本中将默认为 <code class="docutils literal notranslate"><span class="pre">True</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/43999">GH 43999</a>)。</p></li>
<li><p>弃用在 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.aggregate.html#pandas.core.groupby.SeriesGroupBy.aggregate" title="pandas.core.groupby.SeriesGroupBy.aggregate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.aggregate()</span></code></a> 聚合中将 <code class="docutils literal notranslate"><span class="pre">group.name</span></code> 绑定到每个组的行为；如果您的操作需要利用 groupby 键，请改为迭代 groupby 对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41090">GH 41090</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmax.html#pandas.core.groupby.DataFrameGroupBy.idxmax" title="pandas.core.groupby.DataFrameGroupBy.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmin.html#pandas.core.groupby.DataFrameGroupBy.idxmin" title="pandas.core.groupby.DataFrameGroupBy.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.fillna.html#pandas.core.groupby.DataFrameGroupBy.fillna" title="pandas.core.groupby.DataFrameGroupBy.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.fillna()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.take.html#pandas.core.groupby.DataFrameGroupBy.take" title="pandas.core.groupby.DataFrameGroupBy.take"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.take()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.skew.html#pandas.core.groupby.DataFrameGroupBy.skew" title="pandas.core.groupby.DataFrameGroupBy.skew"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.skew()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.rank.html#pandas.core.groupby.DataFrameGroupBy.rank" title="pandas.core.groupby.DataFrameGroupBy.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.rank()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cumprod.html#pandas.core.groupby.DataFrameGroupBy.cumprod" title="pandas.core.groupby.DataFrameGroupBy.cumprod"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cumprod()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cumsum.html#pandas.core.groupby.DataFrameGroupBy.cumsum" title="pandas.core.groupby.DataFrameGroupBy.cumsum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cumsum()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummax.html#pandas.core.groupby.DataFrameGroupBy.cummax" title="pandas.core.groupby.DataFrameGroupBy.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummin.html#pandas.core.groupby.DataFrameGroupBy.cummin" title="pandas.core.groupby.DataFrameGroupBy.cummin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.pct_change.html#pandas.core.groupby.DataFrameGroupBy.pct_change" title="pandas.core.groupby.DataFrameGroupBy.pct_change"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.pct_change()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.diff.html#pandas.core.groupby.DataFrameGroupBy.diff" title="pandas.core.groupby.DataFrameGroupBy.diff"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.diff()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.shift.html#pandas.core.groupby.DataFrameGroupBy.shift" title="pandas.core.groupby.DataFrameGroupBy.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.shift()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.corrwith.html#pandas.core.groupby.DataFrameGroupBy.corrwith" title="pandas.core.groupby.DataFrameGroupBy.corrwith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.corrwith()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 关键字；对于 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code>，请改为操作底层 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/50405">GH 50405</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51046">GH 51046</a>)。</p></li>
<li><p>弃用 <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameGroupBy</span></code> 在 <code class="docutils literal notranslate"><span class="pre">as_index=False</span></code> 时不包含结果中非 DataFrame 列的组合项的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/49519">GH 49519</a>)。</p></li>
<li><p>弃用 <code class="xref py py-func docutils literal notranslate"><span class="pre">is_categorical_dtype()</span></code>，请改为使用 <code class="docutils literal notranslate"><span class="pre">isinstance(obj.dtype,</span> <span class="pre">pd.CategoricalDtype)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52527">GH 52527</a>)。</p></li>
<li><p>弃用 <code class="xref py py-func docutils literal notranslate"><span class="pre">is_datetime64tz_dtype()</span></code>，请改为检查 <code class="docutils literal notranslate"><span class="pre">isinstance(dtype,</span> <span class="pre">pd.DatetimeTZDtype)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52607">GH 52607</a>)。</p></li>
<li><p>弃用 <code class="xref py py-func docutils literal notranslate"><span class="pre">is_int64_dtype()</span></code>，请改为检查 <code class="docutils literal notranslate"><span class="pre">dtype</span> <span class="pre">==</span> <span class="pre">np.dtype(np.int64)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52564">GH 52564</a>)。</p></li>
<li><p>弃用 <code class="xref py py-func docutils literal notranslate"><span class="pre">is_interval_dtype()</span></code>，请改为检查 <code class="docutils literal notranslate"><span class="pre">isinstance(dtype,</span> <span class="pre">pd.IntervalDtype)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52607">GH 52607</a>)。</p></li>
<li><p>弃用 <code class="xref py py-func docutils literal notranslate"><span class="pre">is_period_dtype()</span></code>，请改为检查 <code class="docutils literal notranslate"><span class="pre">isinstance(dtype,</span> <span class="pre">pd.PeriodDtype)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52642">GH 52642</a>)。</p></li>
<li><p>弃用 <code class="xref py py-func docutils literal notranslate"><span class="pre">is_sparse()</span></code>，请改为检查 <code class="docutils literal notranslate"><span class="pre">isinstance(dtype,</span> <span class="pre">pd.SparseDtype)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52642">GH 52642</a>)。</p></li>
<li><p>弃用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.applymap_index()</span></code>。请改为使用新的 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.map_index.html#pandas.io.formats.style.Styler.map_index" title="pandas.io.formats.style.Styler.map_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.map_index()</span></code></a> 方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52708">GH 52708</a>)。</p></li>
<li><p>弃用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.applymap()</span></code>。请改为使用新的 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.map.html#pandas.io.formats.style.Styler.map" title="pandas.io.formats.style.Styler.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.map()</span></code></a> 方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52708">GH 52708</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.applymap.html#pandas.DataFrame.applymap" title="pandas.DataFrame.applymap"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.applymap()</span></code></a>。请改为使用新的 <a class="reference internal" href="../reference/api/pandas.DataFrame.map.html#pandas.DataFrame.map" title="pandas.DataFrame.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.map()</span></code></a> 方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52353">GH 52353</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.swapaxes.html#pandas.DataFrame.swapaxes" title="pandas.DataFrame.swapaxes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.swapaxes()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.swapaxes()</span></code>，请改为使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose" title="pandas.DataFrame.transpose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.transpose()</span></code></a> 或 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.transpose()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51946">GH 51946</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.arrays.PeriodArray.html#pandas.arrays.PeriodArray" title="pandas.arrays.PeriodArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodArray</span></code></a> 构造函数中的 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 参数，请改为传递 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52462">GH 52462</a>)。</p></li>
<li><p>弃用 <code class="xref py py-func docutils literal notranslate"><span class="pre">take()</span></code> 中允许非标准输入，请改为传递 <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>、<a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52981">GH 52981</a>)。</p></li>
<li><p>弃用 <code class="xref py py-func docutils literal notranslate"><span class="pre">isin()</span></code>、<code class="xref py py-func docutils literal notranslate"><span class="pre">value_counts()</span></code>、<a class="reference internal" href="../reference/api/pandas.unique.html#pandas.unique" title="pandas.unique"><code class="xref py py-func docutils literal notranslate"><span class="pre">unique()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a> 允许非标准序列作为输入，请改为在调用前转换为 <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>、<a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>、<a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 之一 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52986">GH 52986</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 聚合函数 <code class="docutils literal notranslate"><span class="pre">sum</span></code>、<code class="docutils literal notranslate"><span class="pre">prod</span></code>、<code class="docutils literal notranslate"><span class="pre">std</span></code>、<code class="docutils literal notranslate"><span class="pre">var</span></code>、<code class="docutils literal notranslate"><span class="pre">sem</span></code> 在 <code class="docutils literal notranslate"><span class="pre">axis=None</span></code> 时的行为，在未来版本中这将对两个轴进行操作并返回一个标量，而不是像 <code class="docutils literal notranslate"><span class="pre">axis=0</span></code> 那样；请注意这也影响 NumPy 函数，例如 <code class="docutils literal notranslate"><span class="pre">np.sum(df)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21597">GH 21597</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 包含全 NA 列时的行为，在未来版本中，这些列在确定结果类型时将不会被丢弃 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40893">GH 40893</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Series.dt.to_pydatetime.html#pandas.Series.dt.to_pydatetime" title="pandas.Series.dt.to_pydatetime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.dt.to_pydatetime()</span></code></a> 的行为，在未来版本中，这将返回一个包含 Python <code class="docutils literal notranslate"><span class="pre">datetime</span></code> 对象的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>，而不是一个日期时间 <code class="docutils literal notranslate"><span class="pre">ndarray</span></code>；这与 <a class="reference internal" href="../reference/api/pandas.Series.dt.html#pandas.Series.dt" title="pandas.Series.dt"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt</span></code></a> 的其他属性的行为一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20306">GH 20306</a>)。</p></li>
<li><p>弃用 pandas 对象与无 dtype 序列（如 <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">tuple</span></code>）之间的逻辑运算（<code class="docutils literal notranslate"><span class="pre">|</span></code>, <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">^</span></code>），请改为在操作前将序列包装在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 NumPy 数组中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51521">GH 51521</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Series.apply.html#pandas.Series.apply" title="pandas.Series.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.apply()</span></code></a> 中的参数 <code class="docutils literal notranslate"><span class="pre">convert_type</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52140">GH 52140</a>)。</p></li>
<li><p>弃用向 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.agg.html#pandas.core.groupby.SeriesGroupBy.agg" title="pandas.core.groupby.SeriesGroupBy.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.agg()</span></code></a> 传递字典；请改为传递聚合列表 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/50684">GH 50684</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 构造函数中的 <code class="docutils literal notranslate"><span class="pre">fastpath</span></code> 关键字，请改为使用 <a class="reference internal" href="../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes" title="pandas.Categorical.from_codes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.from_codes()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20110">GH 20110</a>)。</p></li>
<li><p>弃用 <code class="xref py py-func docutils literal notranslate"><span class="pre">is_bool_dtype()</span></code> 对于布尔对象为对象类型 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 返回 <code class="docutils literal notranslate"><span class="pre">True</span></code> 的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52680">GH 52680</a>)。</p></li>
<li><p>弃用方法 <a class="reference internal" href="../reference/api/pandas.Series.bool.html#pandas.Series.bool" title="pandas.Series.bool"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.bool()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.bool.html#pandas.DataFrame.bool" title="pandas.DataFrame.bool"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.bool()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51749">GH 51749</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 构造函数中未使用的 <code class="docutils literal notranslate"><span class="pre">closed</span></code> 和 <code class="docutils literal notranslate"><span class="pre">normalize</span></code> 关键字 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52628">GH 52628</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 构造函数中未使用的 <code class="docutils literal notranslate"><span class="pre">closed</span></code> 关键字 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52628">GH 52628</a>)。</p></li>
<li><p>弃用两个非布尔 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 之间索引不同时，逻辑运算总是将结果强制转换为布尔类型的行为。在未来版本中，这将保持输入的数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52500">GH 52500</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52538">GH 52538</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 与 <code class="docutils literal notranslate"><span class="pre">BDay</span></code> 频率一起使用，请改为使用带有 <code class="docutils literal notranslate"><span class="pre">BDay</span></code> 频率的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53446">GH 53446</a>)。</p></li>
<li><p>弃用 <code class="xref py py-func docutils literal notranslate"><span class="pre">value_counts()</span></code>，请改为使用 <code class="docutils literal notranslate"><span class="pre">pd.Series(obj).value_counts()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47862">GH 47862</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Series.first.html#pandas.Series.first" title="pandas.Series.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.first()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.first.html#pandas.DataFrame.first" title="pandas.DataFrame.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.first()</span></code></a>；请改为创建掩码并使用 <code class="docutils literal notranslate"><span class="pre">.loc</span></code> 进行筛选 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45908">GH 45908</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Series.interpolate.html#pandas.Series.interpolate" title="pandas.Series.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.interpolate()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code></a> 用于对象类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53631">GH 53631</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Series.last.html#pandas.Series.last" title="pandas.Series.last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.last()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.last.html#pandas.DataFrame.last" title="pandas.DataFrame.last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.last()</span></code></a>；请改为创建掩码并使用 <code class="docutils literal notranslate"><span class="pre">.loc</span></code> 进行筛选 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53692">GH 53692</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.SparseDtype.html#pandas.SparseDtype" title="pandas.SparseDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDtype</span></code></a> 中允许任意 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> 的行为，在未来版本中，<code class="docutils literal notranslate"><span class="pre">fill_value</span></code> 需要与 <code class="docutils literal notranslate"><span class="pre">dtype.subtype</span></code> 兼容，可以是该子类型可以容纳的标量，或者对于整数或布尔子类型为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23124">GH 23124</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.quantile.html#pandas.core.groupby.DataFrameGroupBy.quantile" title="pandas.core.groupby.DataFrameGroupBy.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.quantile()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.quantile.html#pandas.core.groupby.SeriesGroupBy.quantile" title="pandas.core.groupby.SeriesGroupBy.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.quantile()</span></code></a> 中允许布尔类型，与 <a class="reference internal" href="../reference/api/pandas.Series.quantile.html#pandas.Series.quantile" title="pandas.Series.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.quantile()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.quantile.html#pandas.DataFrame.quantile" title="pandas.DataFrame.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.quantile()</span></code></a> 的行为一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51424">GH 51424</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.testing.assert_series_equal.html#pandas.testing.assert_series_equal" title="pandas.testing.assert_series_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_series_equal()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.testing.assert_frame_equal.html#pandas.testing.assert_frame_equal" title="pandas.testing.assert_frame_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_frame_equal()</span></code></a> 将类 NA 值（例如 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 与 <code class="docutils literal notranslate"><span class="pre">None</span></code> 视为等效）的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52081">GH 52081</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 的字节输入。要读取文件路径，请使用字符串或路径类对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53767">GH 53767</a>)。</p></li>
<li><p>弃用从标量数据构造 <a class="reference internal" href="../reference/api/pandas.arrays.SparseArray.html#pandas.arrays.SparseArray" title="pandas.arrays.SparseArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">SparseArray</span></code></a>，请改为传递序列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53039">GH 53039</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.replace.html#pandas.DataFrame.replace" title="pandas.DataFrame.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.replace.html#pandas.Series.replace" title="pandas.Series.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.replace()</span></code></a> 在未指定 <code class="docutils literal notranslate"><span class="pre">value</span></code> 且 <code class="docutils literal notranslate"><span class="pre">to_replace</span></code> 非字典类型时回退到填充的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33302">GH 33302</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_json()</span></code></a> 的字面量 json 输入。请改为将字面量 json 字符串输入包装在 <code class="docutils literal notranslate"><span class="pre">io.StringIO</span></code> 中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53409">GH 53409</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.read_xml.html#pandas.read_xml" title="pandas.read_xml"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_xml()</span></code></a> 的字面量字符串输入。请改为将字面量字符串/字节输入包装在 <code class="docutils literal notranslate"><span class="pre">io.StringIO</span></code> / <code class="docutils literal notranslate"><span class="pre">io.BytesIO</span></code> 中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53767">GH 53767</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> 的字面量字符串/字节输入。请改为将字面量字符串/字节输入包装在 <code class="docutils literal notranslate"><span class="pre">io.StringIO</span></code> / <code class="docutils literal notranslate"><span class="pre">io.BytesIO</span></code> 中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53767">GH 53767</a>)。</p></li>
<li><p>弃用选项 <code class="docutils literal notranslate"><span class="pre">mode.use_inf_as_na</span></code>，请改为先将 inf 条目转换为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51684">GH 51684</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.get_group.html#pandas.core.groupby.DataFrameGroupBy.get_group" title="pandas.core.groupby.DataFrameGroupBy.get_group"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.get_group()</span></code></a> 中的参数 <code class="docutils literal notranslate"><span class="pre">obj</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53545">GH 53545</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 上使用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__getitem__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__setitem__()</span></code> 的位置索引，在未来版本中 <code class="docutils literal notranslate"><span class="pre">ser[item]</span></code> 将 <em>始终</em> 将 <code class="docutils literal notranslate"><span class="pre">item</span></code> 解释为标签，而不是位置 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/50617">GH 50617</a>)。</p></li>
<li><p>弃用在 <code class="docutils literal notranslate"><span class="pre">.agg</span></code>、<code class="docutils literal notranslate"><span class="pre">.apply</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.transform</span></code> 中替换内置函数和 NumPy 函数；请改为使用相应的字符串别名（例如 <code class="docutils literal notranslate"><span class="pre">"sum"</span></code> 替代 <code class="docutils literal notranslate"><span class="pre">sum</span></code> 或 <code class="docutils literal notranslate"><span class="pre">np.sum</span></code>）(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53425">GH 53425</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_timedelta()</span></code></a> 中表示单位的字符串 <code class="docutils literal notranslate"><span class="pre">T</span></code>、<code class="docutils literal notranslate"><span class="pre">t</span></code>、<code class="docutils literal notranslate"><span class="pre">L</span></code> 和 <code class="docutils literal notranslate"><span class="pre">l</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52536">GH 52536</a>)。</p></li>
<li><p>弃用 <code class="docutils literal notranslate"><span class="pre">.ExtensionArray.fillna</span></code> 中的“method”和“limit”关键字，请改为实现 <code class="docutils literal notranslate"><span class="pre">_pad_or_backfill</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53621">GH 53621</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.replace.html#pandas.DataFrame.replace" title="pandas.DataFrame.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.replace.html#pandas.Series.replace" title="pandas.Series.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.replace()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">method</span></code> 和 <code class="docutils literal notranslate"><span class="pre">limit</span></code> 关键字 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33302">GH 33302</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.fillna.html#pandas.core.groupby.SeriesGroupBy.fillna" title="pandas.core.groupby.SeriesGroupBy.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.fillna()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.fillna.html#pandas.core.groupby.DataFrameGroupBy.fillna" title="pandas.core.groupby.DataFrameGroupBy.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.fillna()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.fillna.html#pandas.core.resample.Resampler.fillna" title="pandas.core.resample.Resampler.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.fillna()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">method</span></code> 和 <code class="docutils literal notranslate"><span class="pre">limit</span></code> 关键字，请改为使用 <code class="docutils literal notranslate"><span class="pre">obj.bfill()</span></code> 或 <code class="docutils literal notranslate"><span class="pre">obj.ffill()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53394">GH 53394</a>)。</p></li>
<li><p>弃用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__getitem__()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__setitem__()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__getitem__()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__setitem__()</span></code> 在具有浮点类型索引的对象上使用整数切片的行为，在未来版本中这将视为 <em>位置</em> 索引 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/49612">GH 49612</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.array.html#pandas.array" title="pandas.array"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.array()</span></code></a> 中使用非受支持的 datetime64 和 timedelta64 分辨率。受支持的分辨率为：“s”、“ms”、“us”、“ns” (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53058">GH 53058</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Series.interpolate.html#pandas.Series.interpolate" title="pandas.Series.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.interpolate()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code></a> 的值 <code class="docutils literal notranslate"><span class="pre">"pad"</span></code>、<code class="docutils literal notranslate"><span class="pre">"ffill"</span></code>、<code class="docutils literal notranslate"><span class="pre">"bfill"</span></code>、<code class="docutils literal notranslate"><span class="pre">"backfill"</span></code>，请改为使用 <code class="docutils literal notranslate"><span class="pre">obj.ffill()</span></code> 或 <code class="docutils literal notranslate"><span class="pre">obj.bfill()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53581">GH 53581</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.Index.argmax.html#pandas.Index.argmax" title="pandas.Index.argmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.argmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Index.argmin.html#pandas.Index.argmin" title="pandas.Index.argmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.argmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.argmax.html#pandas.Series.argmax" title="pandas.Series.argmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.argmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.argmin.html#pandas.Series.argmin" title="pandas.Series.argmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.argmin()</span></code></a> 在全部 NA 且 <code class="docutils literal notranslate"><span class="pre">skipna=True</span></code> 或任何 NA 且 <code class="docutils literal notranslate"><span class="pre">skipna=False</span></code> 时返回 -1 的行为；在未来版本中，这将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33941">GH 33941</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33942">GH 33942</a>)。</p></li>
<li><p>弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code></a> 中除了 <code class="docutils literal notranslate"><span class="pre">name</span></code> 和 <code class="docutils literal notranslate"><span class="pre">con</span></code> 之外的非关键字参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)。</p></li>
<li><p>弃用在将 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 和 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> 同时传递给 <a class="reference internal" href="../reference/api/pandas.DataFrame.shift.html#pandas.DataFrame.shift" title="pandas.DataFrame.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.shift()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.shift.html#pandas.Series.shift" title="pandas.Series.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.shift()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.shift.html#pandas.core.groupby.DataFrameGroupBy.shift" title="pandas.core.groupby.DataFrameGroupBy.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.shift()</span></code></a> 时，默默地忽略 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> 的行为；在未来版本中，这将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53832">GH 53832</a>)。</p></li>
</ul>
</section>
</section>
<section id="performance-improvements">
<span id="whatsnew-210-performance"></span><h2>性能改进<a class="headerlink" href="v2.1.0.html#performance-improvements" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 处理同构 <code class="docutils literal notranslate"><span class="pre">np.float64</span></code> 或 <code class="docutils literal notranslate"><span class="pre">np.float32</span></code> 类型时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52685">GH 52685</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a> 处理不包含字符串的对象列时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51921">GH 51921</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_orc.html#pandas.read_orc" title="pandas.read_orc"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_orc()</span></code></a> 读取远程 URI 文件路径时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51609">GH 51609</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_parquet.html#pandas.read_parquet" title="pandas.read_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parquet()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" title="pandas.DataFrame.to_parquet"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_parquet()</span></code></a> 使用 <code class="docutils literal notranslate"><span class="pre">engine="pyarrow"</span></code> 读取远程文件时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51609">GH 51609</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_parquet.html#pandas.read_parquet" title="pandas.read_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parquet()</span></code></a> 处理字符串列并使用 <code class="docutils literal notranslate"><span class="pre">use_nullable_dtypes=True</span></code> 时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47345">GH 47345</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.clip.html#pandas.DataFrame.clip" title="pandas.DataFrame.clip"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.clip()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.clip.html#pandas.Series.clip" title="pandas.Series.clip"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.clip()</span></code></a> 中，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51472">GH 51472</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.filter.html#pandas.DataFrame.filter" title="pandas.DataFrame.filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.filter()</span></code></a> 中给定 <code class="docutils literal notranslate"><span class="pre">items</span></code> 时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52941">GH 52941</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.first_valid_index.html#pandas.DataFrame.first_valid_index" title="pandas.DataFrame.first_valid_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.first_valid_index()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.last_valid_index.html#pandas.DataFrame.last_valid_index" title="pandas.DataFrame.last_valid_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.last_valid_index()</span></code></a> 处理扩展数组类型时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51549">GH 51549</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> 中 <code class="docutils literal notranslate"><span class="pre">cond</span></code> 由扩展类型支持时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51574">GH 51574</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.MultiIndex.set_levels.html#pandas.MultiIndex.set_levels" title="pandas.MultiIndex.set_levels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.set_levels()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.MultiIndex.set_codes.html#pandas.MultiIndex.set_codes" title="pandas.MultiIndex.set_codes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.set_codes()</span></code></a> 中当 <code class="docutils literal notranslate"><span class="pre">verify_integrity=True</span></code> 时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51873">GH 51873</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.MultiIndex.sortlevel.html#pandas.MultiIndex.sortlevel" title="pandas.MultiIndex.sortlevel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.sortlevel()</span></code></a> 中 <code class="docutils literal notranslate"><span class="pre">ascending</span></code> 为列表时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51612">GH 51612</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.combine_first.html#pandas.Series.combine_first" title="pandas.Series.combine_first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.combine_first()</span></code></a> 中，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51777">GH 51777</a>)。</p></li>
<li><p>在数组不包含空值时，<code class="xref py py-meth docutils literal notranslate"><span class="pre">fillna()</span></code> 的性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51635">GH 51635</a>)。</p></li>
<li><p>在数组没有空值或全部为空值时，<code class="xref py py-meth docutils literal notranslate"><span class="pre">isna()</span></code> 的性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51630">GH 51630</a>)。</p></li>
<li><p>解析字符串为 <code class="docutils literal notranslate"><span class="pre">boolean[pyarrow]</span></code> 类型时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51730">GH 51730</a>)。</p></li>
<li><p>从其他索引切片出的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 搜索性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51738">GH 51738</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52291">GH 52291</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52290">GH 52290</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 的默认格式化器 (<code class="docutils literal notranslate"><span class="pre">period_format</span></code>) 现在显著加快（约两倍）。这提高了 <code class="docutils literal notranslate"><span class="pre">str(Period)</span></code>、<code class="docutils literal notranslate"><span class="pre">repr(Period)</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Period.strftime(fmt=None)()</span></code> 的性能，以及 <code class="docutils literal notranslate"><span class="pre">.PeriodArray.strftime(fmt=None)</span></code>、<code class="docutils literal notranslate"><span class="pre">.PeriodIndex.strftime(fmt=None)</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.PeriodIndex.format(fmt=None)</span></code> 的性能。<code class="docutils literal notranslate"><span class="pre">to_csv</span></code> 涉及 <a class="reference internal" href="../reference/api/pandas.arrays.PeriodArray.html#pandas.arrays.PeriodArray" title="pandas.arrays.PeriodArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodArray</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 且使用默认 <code class="docutils literal notranslate"><span class="pre">date_format</span></code> 的操作也显著加速 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51459">GH 51459</a>)。</p></li>
<li><p>访问 <code class="xref py py-attr docutils literal notranslate"><span class="pre">arrays.IntegerArrays.dtype</span></code> 和 <code class="xref py py-attr docutils literal notranslate"><span class="pre">arrays.FloatingArray.dtype</span></code> 的性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52998">GH 52998</a>)。</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameGroupBy</span></code>/<code class="xref py py-class docutils literal notranslate"><span class="pre">SeriesGroupBy</span></code> 聚合（例如 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.sum.html#pandas.core.groupby.DataFrameGroupBy.sum" title="pandas.core.groupby.DataFrameGroupBy.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.sum()</span></code></a>）使用 <code class="docutils literal notranslate"><span class="pre">engine="numba"</span></code> 时的性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53731">GH 53731</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 聚合函数中使用 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 和扩展数据类型时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54341">GH 54341</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 聚合函数中使用 <code class="docutils literal notranslate"><span class="pre">axis=None</span></code> 和扩展数据类型时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54308">GH 54308</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 和多列操作（例如 <a class="reference internal" href="../reference/api/pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values" title="pandas.DataFrame.sort_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sort_values()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.unstack.html#pandas.Series.unstack" title="pandas.Series.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.unstack()</span></code></a>）中，当索引/列值已排序时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53806">GH 53806</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 聚合函数中，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52341">GH 52341</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中，当 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 且对象具有不同索引时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52541">GH 52541</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中，当连接轴为 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53574">GH 53574</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 处理 PyArrow 支持的字符串时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54443">GH 54443</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 使用 <code class="docutils literal notranslate"><span class="pre">engine="c"</span></code> 时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52632">GH 52632</a>)。</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ArrowExtensionArray.to_numpy()</span></code> 中，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52525">GH 52525</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.groups.html#pandas.core.groupby.DataFrameGroupBy.groups" title="pandas.core.groupby.DataFrameGroupBy.groups"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.groups()</span></code></a> 中，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53088">GH 53088</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 中，当 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 是扩展数据类型时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54299">GH 54299</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.iloc.html#pandas.DataFrame.iloc" title="pandas.DataFrame.iloc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iloc()</span></code></a> 中，当输入为单个整数且 DataFrame 由扩展数据类型支持时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54508">GH 54508</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.isin.html#pandas.DataFrame.isin" title="pandas.DataFrame.isin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.isin()</span></code></a> 处理扩展数据类型时，性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53514">GH 53514</a>)。</p></li>
<li><p>在选择行和列时，<a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53014">GH 53014</a>)</p></li>
<li><p>在转置具有单个 PyArrow 数据类型的 DataFrame 时，<a class="reference internal" href="../reference/api/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose" title="pandas.DataFrame.transpose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.transpose()</span></code></a> 的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54224">GH 54224</a>)</p></li>
<li><p>在转置具有单个掩码数据类型（例如 <code class="xref py py-class docutils literal notranslate"><span class="pre">Int64</span></code>）的 DataFrame 时，<a class="reference internal" href="../reference/api/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose" title="pandas.DataFrame.transpose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.transpose()</span></code></a> 的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52836">GH 52836</a>)</p></li>
<li><p>针对 PyArrow 字符串和二进制数据类型，<a class="reference internal" href="../reference/api/pandas.Series.add.html#pandas.Series.add" title="pandas.Series.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.add()</span></code></a> 的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53150">GH 53150</a>)</p></li>
<li><p>针对扩展数据类型，<a class="reference internal" href="../reference/api/pandas.Series.corr.html#pandas.Series.corr" title="pandas.Series.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.corr()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.cov.html#pandas.Series.cov" title="pandas.Series.cov"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.cov()</span></code></a> 的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52502">GH 52502</a>)</p></li>
<li><p>针对 <code class="docutils literal notranslate"><span class="pre">ArrowDtype</span></code>，<a class="reference internal" href="../reference/api/pandas.Series.drop_duplicates.html#pandas.Series.drop_duplicates" title="pandas.Series.drop_duplicates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.drop_duplicates()</span></code></a> 的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54667">GH 54667</a>)。</p></li>
<li><p>使用 PyArrow 数据类型时，<a class="reference internal" href="../reference/api/pandas.Series.ffill.html#pandas.Series.ffill" title="pandas.Series.ffill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.ffill()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.bfill.html#pandas.Series.bfill" title="pandas.Series.bfill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.bfill()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.ffill.html#pandas.DataFrame.ffill" title="pandas.DataFrame.ffill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.ffill()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.bfill.html#pandas.DataFrame.bfill" title="pandas.DataFrame.bfill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.bfill()</span></code></a> 的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53950">GH 53950</a>)</p></li>
<li><p>针对 PyArrow 支持的字符串，<a class="reference internal" href="../reference/api/pandas.Series.str.get_dummies.html#pandas.Series.str.get_dummies" title="pandas.Series.str.get_dummies"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.get_dummies()</span></code></a> 的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53655">GH 53655</a>)</p></li>
<li><p>针对 PyArrow 支持的字符串，<a class="reference internal" href="../reference/api/pandas.Series.str.get.html#pandas.Series.str.get" title="pandas.Series.str.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.get()</span></code></a> 的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53152">GH 53152</a>)</p></li>
<li><p>针对 PyArrow 支持的字符串，带有 <code class="docutils literal notranslate"><span class="pre">expand=True</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Series.str.split.html#pandas.Series.str.split" title="pandas.Series.str.split"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.split()</span></code></a> 的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53585">GH 53585</a>)</p></li>
<li><p>当数据类型为 NumPy 浮点数据类型且 <code class="docutils literal notranslate"><span class="pre">na_value</span></code> 为 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> 时，<a class="reference internal" href="../reference/api/pandas.Series.to_numpy.html#pandas.Series.to_numpy" title="pandas.Series.to_numpy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_numpy()</span></code></a> 的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52430">GH 52430</a>)</p></li>
<li><p>将 PyArrow 时间戳或持续时间数据类型转换为 NumPy 时，<code class="xref py py-meth docutils literal notranslate"><span class="pre">astype()</span></code> 的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53326">GH 53326</a>)</p></li>
<li><p>各种 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 设置和索引操作的性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53955">GH 53955</a>)</p></li>
<li><p>通过避免不必要的验证，在对 <a class="reference internal" href="../reference/api/pandas.arrays.IntegerArray.html#pandas.arrays.IntegerArray" title="pandas.arrays.IntegerArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">arrays.IntegerArray</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.arrays.FloatingArray.html#pandas.arrays.FloatingArray" title="pandas.arrays.FloatingArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">arrays.FloatingArray</span></code></a> 执行各种重塑操作时，性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53013">GH 53013</a>)</p></li>
<li><p>使用 PyArrow 时间戳和持续时间数据类型进行索引时，性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53368">GH 53368</a>)</p></li>
<li><p>当将数组传递给 <code class="xref py py-meth docutils literal notranslate"><span class="pre">RangeIndex.take()</span></code>、<a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.iloc.html#pandas.DataFrame.iloc" title="pandas.DataFrame.iloc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iloc()</span></code></a> 且 DataFrame 使用 RangeIndex 时，性能有所改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53387">GH 53387</a>)</p></li>
</ul>
</section>
<section id="bug-fixes">
<span id="whatsnew-210-bug-fixes"></span><h2>错误修复<a class="headerlink" href="v2.1.0.html#bug-fixes" title="Link to this heading">#</a></h2>
<section id="categorical">
<h3>类别型<a class="headerlink" href="v2.1.0.html#categorical" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.CategoricalIndex.remove_categories.html#pandas.CategoricalIndex.remove_categories" title="pandas.CategoricalIndex.remove_categories"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex.remove_categories()</span></code></a> 中修复了一个错误，该错误导致有序类别无法保持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53935">GH 53935</a>)。</p></li>
<li><p>针对带有只读空值掩码的可为空数组，<a class="reference internal" href="../reference/api/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.astype()</span></code></a> 带有 <code class="docutils literal notranslate"><span class="pre">dtype="category"</span></code> 时修复了一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53658">GH 53658</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.map.html#pandas.Series.map" title="pandas.Series.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.map()</span></code></a> 中修复了一个错误，如果 series 包含 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a>，则 <code class="docutils literal notranslate"><span class="pre">na_action</span></code> 参数的值未被使用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22527">GH 22527</a>)。</p></li>
</ul>
</section>
<section id="datetimelike">
<h3>日期时间类型<a class="headerlink" href="v2.1.0.html#datetimelike" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>带有 <code class="docutils literal notranslate"><span class="pre">na_action="ignore"</span></code> 的 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.map()</span></code> 现在按预期工作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51644">GH 51644</a>)</p></li>
<li><p>如果切片边界中的任何一个不在索引中，<code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.slice_indexer()</span></code> 现在会针对非单调索引引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>；此行为先前已弃用但处理不一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53983">GH 53983</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 中修复了一个错误，该错误在将 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 对象乘以常量时行为不一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47953">GH 47953</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> 中修复了一个错误，当 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 是带有 <code class="docutils literal notranslate"><span class="pre">nanoseconds</span></code> 的 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46877">GH 46877</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 修复了一个错误，该错误在将包含 PyArrow 时间戳的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.arrays.ArrowExtensionArray.html#pandas.arrays.ArrowExtensionArray" title="pandas.arrays.ArrowExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">arrays.ArrowExtensionArray</span></code></a> 转换为 NumPy datetime 时出现 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52545">GH 52545</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeArray.map()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.map()</span></code> 中修复了一个错误，该错误导致提供的可调用对象以数组方式而非元素方式操作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51977">GH 51977</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code></a> 中修复了一个错误，该错误在 PyArrow 支持的日期类数据类型时引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53854">GH 53854</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.date.html#pandas.Timestamp.date" title="pandas.Timestamp.date"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.date()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Timestamp.isocalendar.html#pandas.Timestamp.isocalendar" title="pandas.Timestamp.isocalendar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.isocalendar()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Timestamp.timetuple.html#pandas.Timestamp.timetuple" title="pandas.Timestamp.timetuple"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.timetuple()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Timestamp.toordinal.html#pandas.Timestamp.toordinal" title="pandas.Timestamp.toordinal"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.toordinal()</span></code></a> 修复了一个错误，该错误在超出 Python 标准库 datetime 模块支持的输入时返回不正确的结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53668">GH 53668</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.round.html#pandas.Timestamp.round" title="pandas.Timestamp.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.round()</span></code></a> 中修复了一个错误，该错误在接近实现边界的值时返回不正确的结果而不是引发 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51494">GH 51494</a>)</p></li>
<li><p>从 datetime 或 timedelta 标量构造 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时修复了一个错误，该错误总是推断纳秒分辨率而不是从输入推断 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52212">GH 52212</a>)</p></li>
<li><p>从表示没有日期的字符串构造 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 时修复了一个错误，该错误推断出不正确的单位 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54097">GH 54097</a>)</p></li>
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">ts_input=pd.NA</span></code> 构造 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 时引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的错误已修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45481">GH 45481</a>)</p></li>
<li><p>解析包含工作日但没有日期（例如“2023 Sept Thu”）的日期时间字符串时修复了一个错误，该错误错误地引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52659">GH 52659</a>)</p></li>
<li><p>当数据类型是具有非纳秒分辨率的时区感知 datetime 时，<a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的 repr 中修复了一个错误，该错误引发 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54623">GH 54623</a>)</p></li>
</ul>
</section>
<section id="timedelta">
<h3>时间差<a class="headerlink" href="v2.1.0.html#timedelta" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 除法或乘法导致 <code class="docutils literal notranslate"><span class="pre">.freq</span></code> 为“0 天”而不是 <code class="docutils literal notranslate"><span class="pre">None</span></code> 的错误已修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51575">GH 51575</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 针对 NumPy <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> 对象未正确引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 的错误已修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52806">GH 52806</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_timedelta()</span></code></a> 修复了一个错误，该错误在将包含 <code class="docutils literal notranslate"><span class="pre">pyarrow.duration</span></code> 的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 转换为 NumPy <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> 时出现 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54298">GH 54298</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timedelta.__hash__()</span></code> 中修复了一个错误，该错误在某些较大的秒分辨率值上引发 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsTimedelta</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54037">GH 54037</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timedelta.round.html#pandas.Timedelta.round" title="pandas.Timedelta.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timedelta.round()</span></code></a> 中修复了一个错误，该错误在接近实现边界的值时返回不正确的结果而不是引发 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsTimedelta</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51494">GH 51494</a>)</p></li>
<li><p>带有 <code class="docutils literal notranslate"><span class="pre">na_action="ignore"</span></code> 的 <code class="xref py py-meth docutils literal notranslate"><span class="pre">TimedeltaIndex.map()</span></code> 修复了一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51644">GH 51644</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">arrays.TimedeltaArray.map()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">TimedeltaIndex.map()</span></code> 中修复了一个错误，该错误导致提供的可调用对象以数组方式而非元素方式操作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51977">GH 51977</a>)</p></li>
</ul>
</section>
<section id="timezones">
<h3>时区<a class="headerlink" href="v2.1.0.html#timezones" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.infer_freq.html#pandas.infer_freq" title="pandas.infer_freq"><code class="xref py py-func docutils literal notranslate"><span class="pre">infer_freq()</span></code></a> 中修复了一个错误，该错误会针对时区感知时间戳的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52456">GH 52456</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeTZDtype.base()</span></code> 中修复了一个错误，该错误始终返回具有纳秒分辨率的 NumPy 数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52705">GH 52705</a>)</p></li>
</ul>
</section>
<section id="numeric">
<h3>数值型<a class="headerlink" href="v2.1.0.html#numeric" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.RangeIndex.html#pandas.RangeIndex" title="pandas.RangeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeIndex</span></code></a> 中修复了一个错误，该错误在作为减数且被减数为数值时错误地设置了 <code class="docutils literal notranslate"><span class="pre">step</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53255">GH 53255</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.corr.html#pandas.Series.corr" title="pandas.Series.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.corr()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.cov.html#pandas.Series.cov" title="pandas.Series.cov"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.cov()</span></code></a> 中修复了一个错误，该错误针对掩码数据类型引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51422">GH 51422</a>)</p></li>
<li><p>在对全零 NumPy 数据调用 <a class="reference internal" href="../reference/api/pandas.Series.kurt.html#pandas.Series.kurt" title="pandas.Series.kurt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.kurt()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.skew.html#pandas.Series.skew" title="pandas.Series.skew"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.skew()</span></code></a> 时修复了一个错误，该错误返回 Python 类型而不是 NumPy 类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53482">GH 53482</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.mean.html#pandas.Series.mean" title="pandas.Series.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mean()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.mean.html#pandas.DataFrame.mean" title="pandas.DataFrame.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mean()</span></code></a> 中修复了一个错误，该错误导致包含可转换为数字的字符串（例如“2”）的对象数据类型值返回不正确的数值结果；现在这些操作会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/36703">GH 36703</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44008">GH 44008</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.corrwith.html#pandas.DataFrame.corrwith" title="pandas.DataFrame.corrwith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corrwith()</span></code></a> 中修复了一个错误，该错误针对 PyArrow 支持的数据类型引发 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52314">GH 52314</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.size.html#pandas.DataFrame.size" title="pandas.DataFrame.size"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.size()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.size.html#pandas.Series.size" title="pandas.Series.size"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.size()</span></code></a> 修复了一个错误，该错误返回 64 位整数而不是 Python int (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52897">GH 52897</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DateFrame.dot()</span></code> 中修复了一个错误，该错误针对 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a> 数据返回 <code class="docutils literal notranslate"><span class="pre">object</span></code> 数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53979">GH 53979</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.any.html#pandas.Series.any" title="pandas.Series.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.any()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.all.html#pandas.Series.all" title="pandas.Series.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.all()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.any.html#pandas.DataFrame.any" title="pandas.DataFrame.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.any()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.all.html#pandas.DataFrame.all" title="pandas.DataFrame.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.all()</span></code></a> 修复了一个错误，该错误导致 <code class="docutils literal notranslate"><span class="pre">bool_only</span></code> 的默认值设置为 <code class="docutils literal notranslate"><span class="pre">None</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">False</span></code>；此更改不应影响用户 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53258">GH 53258</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.corr.html#pandas.Series.corr" title="pandas.Series.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.corr()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.cov.html#pandas.Series.cov" title="pandas.Series.cov"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.cov()</span></code></a> 中修复了一个错误，该错误针对掩码数据类型引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51422">GH 51422</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.median.html#pandas.Series.median" title="pandas.Series.median"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.median()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.median.html#pandas.DataFrame.median" title="pandas.DataFrame.median"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.median()</span></code></a> 修复了一个错误，该错误导致包含可转换为数字的字符串（例如“2”）的对象数据类型值返回不正确的数值结果；现在这些操作会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34671">GH 34671</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.sum.html#pandas.Series.sum" title="pandas.Series.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.sum()</span></code></a> 将数据类型 <code class="docutils literal notranslate"><span class="pre">uint64</span></code> 转换为 <code class="docutils literal notranslate"><span class="pre">int64</span></code> 的错误已修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53401">GH 53401</a>)</p></li>
</ul>
</section>
<section id="conversion">
<h3>转换<a class="headerlink" href="v2.1.0.html#conversion" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.style.to_latex()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.style.to_html()</span></code> 中修复了一个错误，如果 DataFrame 包含的整数位数超过浮点双精度所能表示的位数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52272">GH 52272</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.array.html#pandas.array" title="pandas.array"><code class="xref py py-func docutils literal notranslate"><span class="pre">array()</span></code></a> 修复了一个错误，该错误在给定单位为“s”、“us”或“ms”的 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 或 <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> 数据类型时返回 <a class="reference internal" href="../reference/api/pandas.arrays.NumpyExtensionArray.html#pandas.arrays.NumpyExtensionArray" title="pandas.arrays.NumpyExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumpyExtensionArray</span></code></a> 而不是 <a class="reference internal" href="../reference/api/pandas.arrays.DatetimeArray.html#pandas.arrays.DatetimeArray" title="pandas.arrays.DatetimeArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeArray</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.arrays.TimedeltaArray.html#pandas.arrays.TimedeltaArray" title="pandas.arrays.TimedeltaArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaArray</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52859">GH 52859</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.array.html#pandas.array" title="pandas.array"><code class="xref py py-func docutils literal notranslate"><span class="pre">array()</span></code></a> 修复了一个错误，该错误在给定空列表且无数据类型时返回 <a class="reference internal" href="../reference/api/pandas.arrays.NumpyExtensionArray.html#pandas.arrays.NumpyExtensionArray" title="pandas.arrays.NumpyExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumpyExtensionArray</span></code></a> 而不是 <a class="reference internal" href="../reference/api/pandas.arrays.FloatingArray.html#pandas.arrays.FloatingArray" title="pandas.arrays.FloatingArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">FloatingArray</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54371">GH 54371</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">ArrowDtype.numpy_dtype()</span></code> 修复了一个错误，该错误会针对非纳秒 <code class="docutils literal notranslate"><span class="pre">pyarrow.timestamp</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pyarrow.duration</span></code> 类型返回纳秒单位 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51800">GH 51800</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__repr__()</span></code> 修复了一个错误，该错误在列的数据类型为 <code class="docutils literal notranslate"><span class="pre">np.record</span></code> 时错误地引发了 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48526">GH 48526</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.info.html#pandas.DataFrame.info" title="pandas.DataFrame.info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.info()</span></code></a> 修复了一个错误，该错误在设置 <code class="docutils literal notranslate"><span class="pre">use_numba</span></code> 时引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51922">GH 51922</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.insert.html#pandas.DataFrame.insert" title="pandas.DataFrame.insert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.insert()</span></code></a> 修复了一个错误，如果 <code class="docutils literal notranslate"><span class="pre">loc</span></code> 为 <code class="docutils literal notranslate"><span class="pre">np.int64</span></code> 则引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53193">GH 53193</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.HDFStore.select.html#pandas.HDFStore.select" title="pandas.HDFStore.select"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HDFStore.select()</span></code></a> 修复了一个错误，该错误在存储和检索大整数时会丢失精度 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54186">GH 54186</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.astype()</span></code></a> 不支持 <code class="docutils literal notranslate"><span class="pre">object_</span></code> 的错误已修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54251">GH 54251</a>)</p></li>
</ul>
</section>
<section id="strings">
<h3>字符串<a class="headerlink" href="v2.1.0.html#strings" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.html#pandas.Series.str" title="pandas.Series.str"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str()</span></code></a> 中修复了一个错误，该错误在迭代时未引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54173">GH 54173</a>)</p></li>
<li><p>带有字符串数据类型列的 <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame`</span></code> 的 <code class="docutils literal notranslate"><span class="pre">repr</span></code> 修复了一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54797">GH 54797</a>)</p></li>
</ul>
</section>
<section id="interval">
<h3>区间<a class="headerlink" href="v2.1.0.html#interval" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.get_indexer.html#pandas.IntervalIndex.get_indexer" title="pandas.IntervalIndex.get_indexer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.get_indexer()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.get_indexer_nonunique()</span></code> 修复了一个错误，该错误在 <code class="docutils literal notranslate"><span class="pre">target</span></code> 是只读数组时引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53703">GH 53703</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalDtype.html#pandas.IntervalDtype" title="pandas.IntervalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalDtype</span></code></a> 中修复了一个错误，该错误导致对象在删除时仍可能存活 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54184">GH 54184</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.interval_range.html#pandas.interval_range" title="pandas.interval_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">interval_range()</span></code></a> 中修复了一个错误，该错误导致浮点 <code class="docutils literal notranslate"><span class="pre">step</span></code> 由于浮点数误差产生不正确的区间 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54477">GH 54477</a>)</p></li>
</ul>
</section>
<section id="indexing">
<h3>索引<a class="headerlink" href="v2.1.0.html#indexing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__setitem__()</span></code> 修复了一个错误，该错误在将 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 设置到重复列时会丢失数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53143">GH 53143</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__setitem__()</span></code> 带有布尔掩码和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.putmask()</span></code> 带有混合非数值数据类型和除了 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 以外的值时修复了一个错误，该错误错误地引发了 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53291">GH 53291</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.iloc.html#pandas.DataFrame.iloc" title="pandas.DataFrame.iloc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iloc()</span></code></a> 修复了一个错误，该错误在使用 <code class="docutils literal notranslate"><span class="pre">nan</span></code> 作为唯一元素时出现 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52234">GH 52234</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.loc.html#pandas.Series.loc" title="pandas.Series.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.loc()</span></code></a> 修复了一个错误，该错误在对象数据类型 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的预定义索引处分配 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时将 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 转换为 <code class="docutils literal notranslate"><span class="pre">np.dnarray</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48933">GH 48933</a>)</p></li>
</ul>
</section>
<section id="missing">
<h3>缺失值<a class="headerlink" href="v2.1.0.html#missing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code></a> 修复了一个错误，该错误在 <code class="docutils literal notranslate"><span class="pre">method</span></code> 为 <code class="docutils literal notranslate"><span class="pre">"pad"</span></code>、<code class="docutils literal notranslate"><span class="pre">"ffill"</span></code>、<code class="docutils literal notranslate"><span class="pre">"bfill"</span></code> 或 <code class="docutils literal notranslate"><span class="pre">"backfill"</span></code> 时未能填充跨数据 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53898">GH 53898</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code></a> 修复了一个错误，该错误在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 为空时忽略了 <code class="docutils literal notranslate"><span class="pre">inplace</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53199">GH 53199</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.idxmin.html#pandas.Series.idxmin" title="pandas.Series.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.idxmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.idxmax.html#pandas.Series.idxmax" title="pandas.Series.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.idxmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.idxmin.html#pandas.DataFrame.idxmin" title="pandas.DataFrame.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.idxmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.idxmax.html#pandas.DataFrame.idxmax" title="pandas.DataFrame.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.idxmax()</span></code></a> 修复了一个错误，该错误在带有包含 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 索引时错误地返回 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/43587">GH 43587</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.interpolate.html#pandas.Series.interpolate" title="pandas.Series.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.interpolate()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code></a> 修复了一个错误，该错误在无效的 <code class="docutils literal notranslate"><span class="pre">downcast</span></code> 关键字上未能引发错误，该关键字只能是 <code class="docutils literal notranslate"><span class="pre">None</span></code> 或 <code class="docutils literal notranslate"><span class="pre">"infer"</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53103">GH 53103</a>)</p></li>
<li><p>具有复杂数据类型的 <a class="reference internal" href="../reference/api/pandas.Series.interpolate.html#pandas.Series.interpolate" title="pandas.Series.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.interpolate()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code></a> 修复了一个错误，该错误错误地未能填充 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 条目 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53635">GH 53635</a>)</p></li>
</ul>
</section>
<section id="multiindex">
<h3>MultiIndex<a class="headerlink" href="v2.1.0.html#multiindex" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.set_levels.html#pandas.MultiIndex.set_levels" title="pandas.MultiIndex.set_levels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.set_levels()</span></code></a> 未保留 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 数据类型的错误已修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52125">GH 52125</a>)</p></li>
<li><p>显示包含长元素的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时修复了一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52960">GH 52960</a>)</p></li>
</ul>
</section>
<section id="i-o">
<h3>输入/输出<a class="headerlink" href="v2.1.0.html#i-o" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_orc.html#pandas.DataFrame.to_orc" title="pandas.DataFrame.to_orc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_orc()</span></code></a> 现在在给定非默认 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 时引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51828">GH 51828</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code></a> 现在在使用 SQLAlchemy 连接时，如果 <code class="docutils literal notranslate"><span class="pre">name</span></code> 参数留空则引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52675">GH 52675</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.json_normalize.html#pandas.json_normalize" title="pandas.json_normalize"><code class="xref py py-func docutils literal notranslate"><span class="pre">json_normalize()</span></code></a> 无法解析元数据字段列表类型的错误已修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37782">GH 37782</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中修复了一个错误，该错误在 <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> 设置为列表或字典且 <code class="docutils literal notranslate"><span class="pre">engine="pyarrow"</span></code> 时会出错 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47961">GH 47961</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 带有 <code class="docutils literal notranslate"><span class="pre">engine="pyarrow"</span></code> 时，在指定 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 和 <code class="docutils literal notranslate"><span class="pre">index_col</span></code> 时引发错误的错误已修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53229">GH 53229</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_hdf.html#pandas.read_hdf" title="pandas.read_hdf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_hdf()</span></code></a> 修复了一个错误，该错误在引发 <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> 后未正确关闭存储 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52781">GH 52781</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> 修复了一个错误，该错误导致样式元素被读取到 DataFrames 中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52197">GH 52197</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> 修复了一个错误，该错误导致尾部文本与包含 <code class="docutils literal notranslate"><span class="pre">display:none</span></code> 样式的元素一起被移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51629">GH 51629</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_table()</span></code></a> 修复了一个错误，该错误在读取视图时引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52969">GH 52969</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_sql.html#pandas.read_sql" title="pandas.read_sql"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql()</span></code></a> 修复了一个错误，该错误在读取具有相同列名的多个时区感知列时出现 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44421">GH 44421</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_xml.html#pandas.read_xml" title="pandas.read_xml"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_xml()</span></code></a> 修复了一个错误，该错误剥离了字符串数据中的空格 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53811">GH 53811</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 修复了一个错误，该错误在多索引列的情况下错误地应用了 <code class="docutils literal notranslate"><span class="pre">colspace</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53885">GH 53885</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 修复了一个错误，该错误导致具有复杂数据类型的空 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 转换时引发了 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54167">GH 54167</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code></a> 修复了一个错误，该错误导致具有非纳秒精度的 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeArray</span></code>/<code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeIndex</span></code> 无法正确序列化 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53686">GH 53686</a>)</p></li>
<li><p>写入和读取空 Stata dta 文件时丢失数据类型信息的错误已修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46240">GH 46240</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bz2</span></code> 被视为硬性要求的错误已修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53857">GH 53857</a>)</p></li>
</ul>
</section>
<section id="period">
<h3>周期<a class="headerlink" href="v2.1.0.html#period" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 构造函数中修复了一个错误，该错误在没有传递参数或传递 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时未能引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27388">GH 27388</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 构造函数中修复了一个错误，该错误为不同的 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> <code class="docutils literal notranslate"><span class="pre">freq</span></code> 输入错误地返回相同的 <code class="docutils literal notranslate"><span class="pre">normalize</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24121">GH 24121</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 构造函数中修复了一个错误，该错误在传递无效类型时引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51790">GH 51790</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 中修复了一个错误，该错误导致对象在删除时仍可能存活 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54184">GH 54184</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 修复了一个错误，该错误在使用 <code class="docutils literal notranslate"><span class="pre">engine="pyarrow"</span></code> 时未将空字符串处理为 null 值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52087">GH 52087</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 修复了一个错误，该错误在使用 <code class="docutils literal notranslate"><span class="pre">engine="pyarrow"</span></code> 且所有列都为 null 时，返回 <code class="docutils literal notranslate"><span class="pre">object</span></code> 数据类型列而不是 <code class="docutils literal notranslate"><span class="pre">float64</span></code> 数据类型列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52087">GH 52087</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Period.now.html#pandas.Period.now" title="pandas.Period.now"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Period.now()</span></code></a> 修复了一个错误，该错误不接受 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 参数作为关键字参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53369">GH 53369</a>)</p></li>
<li><p>带有 <code class="docutils literal notranslate"><span class="pre">na_action="ignore"</span></code> 的 <code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.map()</span></code> 修复了一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51644">GH 51644</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">arrays.PeriodArray.map()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.map()</span></code> 中修复了一个错误，该错误导致提供的可调用对象以数组方式而非元素方式操作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51977">GH 51977</a>)</p></li>
<li><p>修复了一个错误，该错误错误地允许使用 <code class="xref py py-class docutils literal notranslate"><span class="pre">CustomBusinessDay</span></code> 频率构造 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a>；请改用 <code class="xref py py-class docutils literal notranslate"><span class="pre">BusinessDay</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52534">GH 52534</a>)</p></li>
</ul>
</section>
<section id="plotting">
<h3>绘图<a class="headerlink" href="v2.1.0.html#plotting" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Series.plot.html#pandas.Series.plot" title="pandas.Series.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.plot()</span></code></a> 修复了一个错误，该错误在调用时带有 <code class="docutils literal notranslate"><span class="pre">color=None</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51953">GH 51953</a>)</p></li>
<li><p>修复了在调用 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.scatter.html#pandas.DataFrame.plot.scatter" title="pandas.DataFrame.plot.scatter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot.scatter()</span></code></a> 时 <code class="docutils literal notranslate"><span class="pre">c="b"</span></code> 引起的 <code class="docutils literal notranslate"><span class="pre">UserWarning</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53908">GH 53908</a>)</p></li>
</ul>
</section>
<section id="groupby-resample-rolling">
<h3>分组/重采样/滚动<a class="headerlink" href="v2.1.0.html#groupby-resample-rolling" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmin.html#pandas.core.groupby.DataFrameGroupBy.idxmin" title="pandas.core.groupby.DataFrameGroupBy.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.idxmin.html#pandas.core.groupby.SeriesGroupBy.idxmin" title="pandas.core.groupby.SeriesGroupBy.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.idxmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmax.html#pandas.core.groupby.DataFrameGroupBy.idxmax" title="pandas.core.groupby.DataFrameGroupBy.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.idxmax.html#pandas.core.groupby.SeriesGroupBy.idxmax" title="pandas.core.groupby.SeriesGroupBy.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.idxmax()</span></code></a> 修复了一个错误，该错误在空 DataFrameGroupBy 或 SeriesGroupBy 上使用时返回错误的数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51423">GH 51423</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby.rank()</span></code> 在可为空数据类型上，当传递 <code class="docutils literal notranslate"><span class="pre">na_option="bottom"</span></code> 或 <code class="docutils literal notranslate"><span class="pre">na_option="top"</span></code> 时修复了一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54206">GH 54206</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> 修复了一个错误，该错误在 TimedeltaIndex 上重采样时错误地允许非固定 <code class="docutils literal notranslate"><span class="pre">freq</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51896">GH 51896</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> 修复了一个错误，该错误在重采样空数据时丢失时区 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53664">GH 53664</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> 修复了一个错误，该错误导致当值超出轴时 <code class="docutils literal notranslate"><span class="pre">origin</span></code> 在重采样中无效 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53662">GH 53662</a>)</p></li>
<li><p>加权滚动聚合中，当指定 <code class="docutils literal notranslate"><span class="pre">min_periods=0</span></code> 时修复了一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51449">GH 51449</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 修复了一个错误，该错误导致当分组的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的索引是 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a>、<a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a>，并且 <code class="docutils literal notranslate"><span class="pre">groupby</span></code> 方法的第一个参数是一个函数时，该函数作用于整个索引而不是索引的每个元素 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51979">GH 51979</a>)</p></li>
<li><p>带有列表的 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.agg.html#pandas.core.groupby.DataFrameGroupBy.agg" title="pandas.core.groupby.DataFrameGroupBy.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.agg()</span></code></a> 不遵守 <code class="docutils literal notranslate"><span class="pre">as_index=False</span></code> 的错误已修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52849">GH 52849</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.apply.html#pandas.core.groupby.DataFrameGroupBy.apply" title="pandas.core.groupby.DataFrameGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.apply()</span></code></a> 修复了一个错误，该错误导致当输入的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 在分组后被子集化为 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>（<code class="docutils literal notranslate"><span class="pre">[['a']]</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">['a']</span></code>）且给定的可调用对象返回的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 并非都具有相同的索引时引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52444">GH 52444</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.apply.html#pandas.core.groupby.DataFrameGroupBy.apply" title="pandas.core.groupby.DataFrameGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.apply()</span></code></a> 修复了一个错误，该错误导致在选择多列并提供返回 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> 结果的函数时引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18930">GH 18930</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.groups.html#pandas.core.groupby.DataFrameGroupBy.groups" title="pandas.core.groupby.DataFrameGroupBy.groups"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.groups()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.groups.html#pandas.core.groupby.SeriesGroupBy.groups" title="pandas.core.groupby.SeriesGroupBy.groups"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.groups()</span></code></a> 修复了一个错误，该错误导致日期时间键与另一个键结合时产生不正确的组键数量 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51158">GH 51158</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.quantile.html#pandas.core.groupby.DataFrameGroupBy.quantile" title="pandas.core.groupby.DataFrameGroupBy.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.quantile()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.quantile.html#pandas.core.groupby.SeriesGroupBy.quantile" title="pandas.core.groupby.SeriesGroupBy.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.quantile()</span></code></a> 修复了一个错误，该错误可能在 <code class="docutils literal notranslate"><span class="pre">sort=False</span></code> 时隐式排序结果索引 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53009">GH 53009</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.size.html#pandas.core.groupby.SeriesGroupBy.size" title="pandas.core.groupby.SeriesGroupBy.size"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.size()</span></code></a> 修复了一个错误，该错误导致对于具有 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a> 或掩码数据类型（例如 <code class="docutils literal notranslate"><span class="pre">Int64</span></code>）的数据，数据类型将为 <code class="docutils literal notranslate"><span class="pre">np.int64</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53831">GH 53831</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 修复了一个错误，该错误导致在对生成的 groupby 对象进行列选择时，当按包含单个元素的列表分组时不以元组形式返回名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53500">GH 53500</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.var.html#pandas.core.groupby.DataFrameGroupBy.var" title="pandas.core.groupby.DataFrameGroupBy.var"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.var()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.var.html#pandas.core.groupby.SeriesGroupBy.var" title="pandas.core.groupby.SeriesGroupBy.var"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.var()</span></code></a> 修复了一个错误，该错误在用 datetime64、timedelta64 或 <a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 值调用时未能引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52128">GH 52128</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53045">GH 53045</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.resample.html#pandas.core.groupby.DataFrameGroupBy.resample" title="pandas.core.groupby.DataFrameGroupBy.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.resample()</span></code></a> 带有 <code class="docutils literal notranslate"><span class="pre">kind="period"</span></code> 时引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> 的错误已修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24103">GH 24103</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.ohlc.html#pandas.core.resample.Resampler.ohlc" title="pandas.core.resample.Resampler.ohlc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.ohlc()</span></code></a> 修复了一个错误，该错误导致空对象返回 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 而不是空 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/42902">GH 42902</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.count.html#pandas.core.groupby.SeriesGroupBy.count" title="pandas.core.groupby.SeriesGroupBy.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.count()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.count.html#pandas.core.groupby.DataFrameGroupBy.count" title="pandas.core.groupby.DataFrameGroupBy.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.count()</span></code></a> 修复了一个错误，该错误导致对于具有 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a> 或掩码数据类型（例如 <code class="docutils literal notranslate"><span class="pre">Int64</span></code>）的数据，数据类型将为 <code class="docutils literal notranslate"><span class="pre">np.int64</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53831">GH 53831</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.nth.html#pandas.core.groupby.SeriesGroupBy.nth" title="pandas.core.groupby.SeriesGroupBy.nth"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.nth()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.nth.html#pandas.core.groupby.DataFrameGroupBy.nth" title="pandas.core.groupby.DataFrameGroupBy.nth"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.nth()</span></code></a> 修复了一个错误，该错误导致在使用 <code class="docutils literal notranslate"><span class="pre">dropna="any"</span></code> 或 <code class="docutils literal notranslate"><span class="pre">dropna="all"</span></code> 执行列选择后不会子集化列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53518">GH 53518</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.nth.html#pandas.core.groupby.SeriesGroupBy.nth" title="pandas.core.groupby.SeriesGroupBy.nth"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.nth()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.nth.html#pandas.core.groupby.DataFrameGroupBy.nth" title="pandas.core.groupby.DataFrameGroupBy.nth"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.nth()</span></code></a> 中，在使用 <code class="docutils literal notranslate"><span class="pre">dropna="any"</span></code> 或 <code class="docutils literal notranslate"><span class="pre">dropna="all"</span></code> 且导致行被删除的情况下执行列选择后引发的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53518">GH 53518</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.sum.html#pandas.core.groupby.SeriesGroupBy.sum" title="pandas.core.groupby.SeriesGroupBy.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.sum()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.sum.html#pandas.core.groupby.DataFrameGroupBy.sum" title="pandas.core.groupby.DataFrameGroupBy.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.sum()</span></code></a> 中，<code class="docutils literal notranslate"><span class="pre">np.inf</span> <span class="pre">+</span> <span class="pre">np.inf</span></code> 和 <code class="docutils literal notranslate"><span class="pre">(-np.inf)</span> <span class="pre">+</span> <span class="pre">(-np.inf)</span></code> 被求和为 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> 和 <code class="docutils literal notranslate"><span class="pre">-np.inf</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53606">GH 53606</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 中，当分组的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 具有 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 索引，并且向 <code class="docutils literal notranslate"><span class="pre">by</span></code> 参数传递一个月份名称的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时引发错误的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48509">GH 48509</a>)</p></li>
</ul>
</section>
<section id="reshaping">
<h3>重塑<a class="headerlink" href="v2.1.0.html#reshaping" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中，当其中一列具有 <code class="docutils literal notranslate"><span class="pre">pa.null()</span></code> dtype 时强制转换为 <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53702">GH 53702</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.crosstab.html#pandas.crosstab" title="pandas.crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a> 中，当 <code class="docutils literal notranslate"><span class="pre">dropna=False</span></code> 时不会在结果中保留 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10772">GH 10772</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.melt.html#pandas.melt" title="pandas.melt"><code class="xref py py-func docutils literal notranslate"><span class="pre">melt()</span></code></a> 中，<code class="docutils literal notranslate"><span class="pre">variable</span></code> 列会丢失扩展数据类型（extension dtypes）的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54297">GH 54297</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 中，对扩展数据类型（extension dtypes）引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52904">GH 52904</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 中，对于只读 ndarrays 支持的数据引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53513">GH 53513</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 中，当 <code class="docutils literal notranslate"><span class="pre">left_index=True</span></code> 或 <code class="docutils literal notranslate"><span class="pre">right_index=True</span></code> 与不匹配的索引数据类型（index dtypes）在某些情况下给出不正确的结果而不是引发 <code class="docutils literal notranslate"><span class="pre">MergeError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53870">GH 53870</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 中，当合并整数 <code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 和浮点 NumPy dtype 时引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46178">GH 46178</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.agg.html#pandas.DataFrame.agg" title="pandas.DataFrame.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.agg()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.agg.html#pandas.Series.agg" title="pandas.Series.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.agg()</span></code></a> 中，对非唯一列应用 dist-like 参数时返回不正确类型的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51099">GH 51099</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.combine_first.html#pandas.DataFrame.combine_first" title="pandas.DataFrame.combine_first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.combine_first()</span></code></a> 中，如果 <code class="docutils literal notranslate"><span class="pre">other</span></code> 为空则忽略其列的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53792">GH 53792</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.idxmin.html#pandas.DataFrame.idxmin" title="pandas.DataFrame.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.idxmin()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.idxmax.html#pandas.DataFrame.idxmax" title="pandas.DataFrame.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.idxmax()</span></code></a> 中，空帧的轴数据类型（axis dtype）会丢失的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53265">GH 53265</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge" title="pandas.DataFrame.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.merge()</span></code></a> 中，当 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 具有单层时合并不正确的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52331">GH 52331</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a> 中，当列是 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 且帧包含混合数据类型时，会丢失扩展数据类型（extension dtypes）的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45740">GH 45740</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a> 中，按字典顺序对列进行排序的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53786">GH 53786</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose" title="pandas.DataFrame.transpose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.transpose()</span></code></a> 中，推断对象列数据类型（dtype）的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51546">GH 51546</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.combine_first.html#pandas.Series.combine_first" title="pandas.Series.combine_first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.combine_first()</span></code></a> 中，将 <code class="docutils literal notranslate"><span class="pre">int64</span></code> 数据类型转换为 <code class="docutils literal notranslate"><span class="pre">float64</span></code> 并导致非常大的整数精度丢失的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51764">GH 51764</a>)</p></li>
<li><p>在连接空的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 对象时，连接的索引会变成 <a class="reference internal" href="../reference/api/pandas.RangeIndex.html#pandas.RangeIndex" title="pandas.RangeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeIndex</span></code></a> 而不是连接的索引类型的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52777">GH 52777</a>)</p></li>
</ul>
</section>
<section id="sparse">
<h3>稀疏<a class="headerlink" href="v2.1.0.html#sparse" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.SparseDtype.html#pandas.SparseDtype" title="pandas.SparseDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDtype</span></code></a> 构造函数中，当为其子类型给定不兼容的 <code class="docutils literal notranslate"><span class="pre">dtype</span></code>（必须是 NumPy dtype）时未能引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53160">GH 53160</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">arrays.SparseArray.map()</span></code> 中，允许将填充值包含在稀疏值中的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52095">GH 52095</a>)</p></li>
</ul>
</section>
<section id="extensionarray">
<h3>扩展数组<a class="headerlink" href="v2.1.0.html#extensionarray" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.arrays.ArrowStringArray.html#pandas.arrays.ArrowStringArray" title="pandas.arrays.ArrowStringArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowStringArray</span></code></a> 构造函数中，对于字符串的字典类型引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54074">GH 54074</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数中，当在字典中给定具有扩展数据类型（extension dtype）的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时未复制的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53744">GH 53744</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.arrays.ArrowExtensionArray.html#pandas.arrays.ArrowExtensionArray" title="pandas.arrays.ArrowExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowExtensionArray</span></code></a> 中，将 pandas 非纳秒时间对象从非零值转换为零值的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53171">GH 53171</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.quantile.html#pandas.Series.quantile" title="pandas.Series.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.quantile()</span></code></a> 中，对于 PyArrow 时间类型引发 <code class="docutils literal notranslate"><span class="pre">ArrowInvalid</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52678">GH 52678</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.rank.html#pandas.Series.rank" title="pandas.Series.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rank()</span></code></a> 中，对于 <code class="docutils literal notranslate"><span class="pre">Float64</span></code> 数据类型的小值返回错误顺序的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52471">GH 52471</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.unique.html#pandas.Series.unique" title="pandas.Series.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.unique()</span></code></a> 中，对于包含 <code class="docutils literal notranslate"><span class="pre">NA</span></code> 值的布尔 <code class="docutils literal notranslate"><span class="pre">ArrowDtype</span></code> 返回不正确唯一值的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54667">GH 54667</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">__iter__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">__getitem__()</span></code> 中，对于非纳秒数据类型（non-nano dtypes）返回 python datetime 和 timedelta 对象的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53326">GH 53326</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">factorize()</span></code> 中，对于包含多个块的 <code class="docutils literal notranslate"><span class="pre">pyarrow.dictionary</span></code> 类型 <code class="docutils literal notranslate"><span class="pre">pyarrow.chunked_array</span></code> 返回不正确唯一值的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54844">GH 54844</a>)</p></li>
<li><p>在将 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 子类传递给 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 关键字时出错。现在将引发 <code class="docutils literal notranslate"><span class="pre">UserWarning</span></code> 以鼓励传递实例 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/31356">GH 31356</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54592">GH 54592</a>)</p></li>
<li><p>当列具有带 <code class="docutils literal notranslate"><span class="pre">pyarrow.ExtensionDtype</span></code> 的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a> 时，<a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> repr 不工作的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54063">GH 54063</a>)</p></li>
<li><p>掩码扩展数据类型（masked ExtensionDtypes）（例如 <a class="reference internal" href="../reference/api/pandas.Float64Dtype.html#pandas.Float64Dtype" title="pandas.Float64Dtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float64Dtype</span></code></a>, <a class="reference internal" href="../reference/api/pandas.BooleanDtype.html#pandas.BooleanDtype" title="pandas.BooleanDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">BooleanDtype</span></code></a>）的 <code class="docutils literal notranslate"><span class="pre">__from_arrow__</span></code> 方法不接受 <code class="docutils literal notranslate"><span class="pre">pyarrow.null()</span></code> 类型的 PyArrow 数组的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52223">GH 52223</a>)</p></li>
</ul>
</section>
<section id="styler">
<h3>样式器<a class="headerlink" href="v2.1.0.html#styler" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler._copy()</span></code> 中，调用 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> 子类中被重写的方法的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52728">GH 52728</a>)</p></li>
</ul>
</section>
<section id="metadata">
<h3>元数据<a class="headerlink" href="v2.1.0.html#metadata" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.DataFrame.max.html#pandas.DataFrame.max" title="pandas.DataFrame.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.max()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.min.html#pandas.DataFrame.min" title="pandas.DataFrame.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.min()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.prod.html#pandas.DataFrame.prod" title="pandas.DataFrame.prod"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.prod()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.mean.html#pandas.DataFrame.mean" title="pandas.DataFrame.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mean()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.mode.html#pandas.Series.mode" title="pandas.Series.mode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mode()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.median.html#pandas.DataFrame.median" title="pandas.DataFrame.median"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.median()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.sem.html#pandas.DataFrame.sem" title="pandas.DataFrame.sem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sem()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.skew.html#pandas.DataFrame.skew" title="pandas.DataFrame.skew"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.skew()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.kurt.html#pandas.DataFrame.kurt" title="pandas.DataFrame.kurt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.kurt()</span></code></a> 中的元数据传播问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/28283">GH 28283</a>)</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.DataFrame.squeeze.html#pandas.DataFrame.squeeze" title="pandas.DataFrame.squeeze"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.squeeze()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.describe.html#pandas.DataFrame.describe" title="pandas.DataFrame.describe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.describe()</span></code></a> 中的元数据传播问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/28283">GH 28283</a>)</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.DataFrame.std.html#pandas.DataFrame.std" title="pandas.DataFrame.std"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.std()</span></code></a> 中的元数据传播问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/28283">GH 28283</a>)</p></li>
</ul>
</section>
<section id="other">
<h3>其他<a class="headerlink" href="v2.1.0.html#other" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">FloatingArray.__contains__</span></code> 中，当存在 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值时，<code class="docutils literal notranslate"><span class="pre">NaN</span></code> 项错误地返回 <code class="docutils literal notranslate"><span class="pre">False</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52840">GH 52840</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中，当存在 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值时，对复杂数据类型（complex dtype）的数据引发错误的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53627">GH 53627</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 中，当索引传递时间且时间为午夜且非基于日期的频率时，<code class="docutils literal notranslate"><span class="pre">repr</span></code> 不打印时间的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53470">GH 53470</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.testing.assert_frame_equal.html#pandas.testing.assert_frame_equal" title="pandas.testing.assert_frame_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_frame_equal()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.testing.assert_series_equal.html#pandas.testing.assert_series_equal" title="pandas.testing.assert_series_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_series_equal()</span></code></a> 中，现在对两个不相等的集合抛出断言错误的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51727">GH 51727</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.testing.assert_frame_equal.html#pandas.testing.assert_frame_equal" title="pandas.testing.assert_frame_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_frame_equal()</span></code></a> 中，即使要求不检查索引类型也会检查分类数据类型（category dtypes）的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52126">GH 52126</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe" title="pandas.api.interchange.from_dataframe"><code class="xref py py-func docutils literal notranslate"><span class="pre">api.interchange.from_dataframe()</span></code></a> 中，不遵守 <code class="docutils literal notranslate"><span class="pre">allow_copy</span></code> 参数的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54322">GH 54322</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe" title="pandas.api.interchange.from_dataframe"><code class="xref py py-func docutils literal notranslate"><span class="pre">api.interchange.from_dataframe()</span></code></a> 中，从包含空值的非 pandas 时区感知数据进行交换时引发错误的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54287">GH 54287</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe" title="pandas.api.interchange.from_dataframe"><code class="xref py py-func docutils literal notranslate"><span class="pre">api.interchange.from_dataframe()</span></code></a> 中，转换空 DataFrame 对象时出现的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53155">GH 53155</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.from_dummies.html#pandas.from_dummies" title="pandas.from_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">from_dummies()</span></code></a> 中，结果 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 与原始 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 不匹配的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54300">GH 54300</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.from_dummies.html#pandas.from_dummies" title="pandas.from_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">from_dummies()</span></code></a> 中，结果数据总是 <code class="docutils literal notranslate"><span class="pre">object</span></code> 数据类型而不是列的数据类型的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54300">GH 54300</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.first.html#pandas.core.groupby.DataFrameGroupBy.first" title="pandas.core.groupby.DataFrameGroupBy.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.first()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.last.html#pandas.core.groupby.DataFrameGroupBy.last" title="pandas.core.groupby.DataFrameGroupBy.last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.last()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.first.html#pandas.core.groupby.SeriesGroupBy.first" title="pandas.core.groupby.SeriesGroupBy.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.first()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.last.html#pandas.core.groupby.SeriesGroupBy.last" title="pandas.core.groupby.SeriesGroupBy.last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.last()</span></code></a> 中，空组返回 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> 而不是相应的 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code></a> NA 值的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39098">GH 39098</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table" title="pandas.DataFrame.pivot_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pivot_table()</span></code></a> 中，将整数的平均值转换回整数的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16676">GH 16676</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex" title="pandas.DataFrame.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code></a> 中，当 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> 应推断为 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 时错误地推断为 <code class="docutils literal notranslate"><span class="pre">object</span></code> 数据类型的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52586">GH 52586</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.shift.html#pandas.DataFrame.shift" title="pandas.DataFrame.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.shift()</span></code></a> 中，对具有单个 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 列的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 使用 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 时给出不正确结果的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53832">GH 53832</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Index.sort_values.html#pandas.Index.sort_values" title="pandas.Index.sort_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.sort_values()</span></code></a> 中，当传递 <code class="docutils literal notranslate"><span class="pre">key</span></code> 参数时出现的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52764">GH 52764</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.align.html#pandas.Series.align" title="pandas.Series.align"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.align()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.align.html#pandas.DataFrame.align" title="pandas.DataFrame.align"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.align()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.reindex.html#pandas.Series.reindex" title="pandas.Series.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.reindex()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex" title="pandas.DataFrame.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.interpolate.html#pandas.Series.interpolate" title="pandas.Series.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.interpolate()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code></a> 中，当 <code class="docutils literal notranslate"><span class="pre">method="asfreq"</span></code> 时未能正确引发错误的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53620">GH 53620</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.argsort.html#pandas.Series.argsort" title="pandas.Series.argsort"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.argsort()</span></code></a> 中，当传递无效的 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 时未能引发错误的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54257">GH 54257</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.map.html#pandas.Series.map" title="pandas.Series.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.map()</span></code></a> 中，当给空序列提供可调用对象时，返回的序列具有 <code class="docutils literal notranslate"><span class="pre">object</span></code> 数据类型。现在它会保留原始数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52384">GH 52384</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.memory_usage.html#pandas.Series.memory_usage" title="pandas.Series.memory_usage"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.memory_usage()</span></code></a> 中，当 <code class="docutils literal notranslate"><span class="pre">deep=True</span></code> 时，对于对象系列抛出错误，并且返回的值不正确，因为它没有考虑 GC 修正 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51858">GH 51858</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.period_range.html#pandas.period_range" title="pandas.period_range"><code class="xref py py-meth docutils literal notranslate"><span class="pre">period_range()</span></code></a> 中，当 freq 未作为参数传递时默认行为不正确的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53687">GH 53687</a>)</p></li>
<li><p>修复了 <code class="docutils literal notranslate"><span class="pre">pandas._libs.json</span></code> 中不正确的 <code class="docutils literal notranslate"><span class="pre">__name__</span></code> 属性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52898">GH 52898</a>)</p></li>
</ul>
</section>
</section>
<section id="contributors">
<span id="whatsnew-210-contributors"></span><h2>贡献者<a class="headerlink" href="v2.1.0.html#contributors" title="Link to this heading">#</a></h2>
<p>共有 266 人为本次发布贡献了补丁。名字旁边有“+”的人是首次贡献补丁。</p>
<ul class="simple">
<li><p>AG +</p></li>
<li><p>Aarni Koskela</p></li>
<li><p>Adrian D’Alessandro +</p></li>
<li><p>Adrien RUAULT +</p></li>
<li><p>Ahmad +</p></li>
<li><p>Aidos Kanapyanov +</p></li>
<li><p>Alex Malins</p></li>
<li><p>Alexander Seiler +</p></li>
<li><p>Ali Asgar +</p></li>
<li><p>Allison Kwan</p></li>
<li><p>Amanda Bizzinotto +</p></li>
<li><p>Andres Algaba +</p></li>
<li><p>Angela Seo +</p></li>
<li><p>Anirudh Hegde +</p></li>
<li><p>Antony Evmorfopoulos +</p></li>
<li><p>Anushka Bishnoi</p></li>
<li><p>ArnaudChanoine +</p></li>
<li><p>Artem Vorobyev +</p></li>
<li><p>Arya Sarkar +</p></li>
<li><p>Ashwin Srinath</p></li>
<li><p>Austin Au-Yeung +</p></li>
<li><p>Austin Burnett +</p></li>
<li><p>Bear +</p></li>
<li><p>Ben Mangold +</p></li>
<li><p>Bernardo Gameiro +</p></li>
<li><p>Boyd Kane +</p></li>
<li><p>Brayan Alexander Muñoz B +</p></li>
<li><p>Brock</p></li>
<li><p>Chetan0402 +</p></li>
<li><p>Chris Carini</p></li>
<li><p>ChristofKaufmann</p></li>
<li><p>Clark-W +</p></li>
<li><p>Conrad Mcgee Stocks</p></li>
<li><p>Corrie Bartelheimer +</p></li>
<li><p>Coulton Theuer +</p></li>
<li><p>D067751 +</p></li>
<li><p>Daniel Isaac</p></li>
<li><p>Daniele Nicolodi +</p></li>
<li><p>David Samuel +</p></li>
<li><p>David Seifert +</p></li>
<li><p>Dea Leon +</p></li>
<li><p>Dea María Léon</p></li>
<li><p>Deepyaman Datta</p></li>
<li><p>Denis Sapozhnikov +</p></li>
<li><p>Dharani Akurathi +</p></li>
<li><p>DimiGrammatikakis +</p></li>
<li><p>Dirk Ulbricht +</p></li>
<li><p>Dmitry Shemetov +</p></li>
<li><p>Dominik Berger</p></li>
<li><p>Efkan S. Goktepe +</p></li>
<li><p>Ege Özgüroğlu</p></li>
<li><p>Eli Schwartz</p></li>
<li><p>Erdi +</p></li>
<li><p>Fabrizio Primerano +</p></li>
<li><p>Facundo Batista +</p></li>
<li><p>Fangchen Li</p></li>
<li><p>Felipe Maion +</p></li>
<li><p>Francis +</p></li>
<li><p>Future Programmer +</p></li>
<li><p>Gabriel Kabbe +</p></li>
<li><p>Gaétan Ramet +</p></li>
<li><p>Gianluca Ficarelli</p></li>
<li><p>Godwill Agbehonou +</p></li>
<li><p>Guillaume Lemaitre</p></li>
<li><p>Guo Ci</p></li>
<li><p>Gustavo Vargas +</p></li>
<li><p>Hamidreza Sanaee +</p></li>
<li><p>HappyHorse +</p></li>
<li><p>Harald Husum +</p></li>
<li><p>Hugo van Kemenade</p></li>
<li><p>Ido Ronen +</p></li>
<li><p>Irv Lustig</p></li>
<li><p>JHM Darbyshire</p></li>
<li><p>JHM Darbyshire (iMac)</p></li>
<li><p>JJ +</p></li>
<li><p>Jarrod Millman</p></li>
<li><p>Jay +</p></li>
<li><p>Jeff Reback</p></li>
<li><p>Jessica Greene +</p></li>
<li><p>Jiawei Zhang +</p></li>
<li><p>Jinli Xiao +</p></li>
<li><p>Joanna Ge +</p></li>
<li><p>Jona Sassenhagen +</p></li>
<li><p>Jonas Haag</p></li>
<li><p>Joris Van den Bossche</p></li>
<li><p>Joshua Shew +</p></li>
<li><p>Julian Badillo</p></li>
<li><p>Julian Ortiz +</p></li>
<li><p>Julien Palard +</p></li>
<li><p>Justin Tyson +</p></li>
<li><p>Justus Magin</p></li>
<li><p>Kabiir Krishna +</p></li>
<li><p>Kang Su Min</p></li>
<li><p>Ketu Patel +</p></li>
<li><p>Kevin +</p></li>
<li><p>Kevin Anderson</p></li>
<li><p>Kevin Jan Anker</p></li>
<li><p>Kevin Klein +</p></li>
<li><p>Kevin Sheppard</p></li>
<li><p>Kostya Farber</p></li>
<li><p>LM +</p></li>
<li><p>Lars Lien Ankile +</p></li>
<li><p>Lawrence Mitchell</p></li>
<li><p>Liwei Cai +</p></li>
<li><p>Loic Diridollou</p></li>
<li><p>Luciana Solorzano +</p></li>
<li><p>Luke Manley</p></li>
<li><p>Lumberbot (aka Jack)</p></li>
<li><p>Marat Kopytjuk +</p></li>
<li><p>Marc Garcia</p></li>
<li><p>Marco Edward Gorelli</p></li>
<li><p>MarcoGorelli</p></li>
<li><p>Maria Telenczuk +</p></li>
<li><p>MarvinGravert +</p></li>
<li><p>Mateusz Sokół +</p></li>
<li><p>Matt Richards</p></li>
<li><p>Matthew Barber +</p></li>
<li><p>Matthew Roeschke</p></li>
<li><p>Matus Valo +</p></li>
<li><p>Mia Reimer +</p></li>
<li><p>Michael Terry +</p></li>
<li><p>Michael Tiemann +</p></li>
<li><p>Milad Maani Jou +</p></li>
<li><p>Miles Cranmer +</p></li>
<li><p>MirijaH +</p></li>
<li><p>Miyuu +</p></li>
<li><p>Natalia Mokeeva</p></li>
<li><p>Nathan Goldbaum +</p></li>
<li><p>Nicklaus Roach +</p></li>
<li><p>Nicolas Camenisch +</p></li>
<li><p>Nikolay Boev +</p></li>
<li><p>Nirav</p></li>
<li><p>Nishu Choudhary</p></li>
<li><p>Noa Tamir</p></li>
<li><p>Noy Hanan +</p></li>
<li><p>Numan +</p></li>
<li><p>Numan Ijaz +</p></li>
<li><p>Omar Elbaz +</p></li>
<li><p>Pandas Development Team</p></li>
<li><p>Parfait Gasana</p></li>
<li><p>Parthi</p></li>
<li><p>Patrick Hoefler</p></li>
<li><p>Patrick Schleiter +</p></li>
<li><p>Pawel Kranzberg +</p></li>
<li><p>Philip</p></li>
<li><p>Philip Meier +</p></li>
<li><p>Pranav Saibhushan Ravuri</p></li>
<li><p>PrathumP +</p></li>
<li><p>Rahul Siloniya +</p></li>
<li><p>Rajasvi Vinayak +</p></li>
<li><p>Rajat Subhra Mukherjee +</p></li>
<li><p>Ralf Gommers</p></li>
<li><p>RaphSku</p></li>
<li><p>Rebecca Chen +</p></li>
<li><p>Renato Cotrim Maciel +</p></li>
<li><p>Reza (Milad) Maanijou +</p></li>
<li><p>Richard Shadrach</p></li>
<li><p>Rithik Reddy +</p></li>
<li><p>Robert Luce +</p></li>
<li><p>Ronalido +</p></li>
<li><p>Rylie Wei +</p></li>
<li><p>SOUMYADIP MAL +</p></li>
<li><p>Sanjith Chockan +</p></li>
<li><p>Sayed Qaiser Ali +</p></li>
<li><p>Scott Harp +</p></li>
<li><p>Se +</p></li>
<li><p>Shashwat Agrawal</p></li>
<li><p>Simar Bassi +</p></li>
<li><p>Simon Brugman +</p></li>
<li><p>Simon Hawkins</p></li>
<li><p>Simon Høxbro Hansen</p></li>
<li><p>Snorf Yang +</p></li>
<li><p>Sortofamudkip +</p></li>
<li><p>Stefan Krawczyk</p></li>
<li><p>Stefanie Molin</p></li>
<li><p>Stefanie Senger</p></li>
<li><p>Stelios Petrakis +</p></li>
<li><p>Stijn Van Hoey</p></li>
<li><p>Sven</p></li>
<li><p>Sylvain MARIE</p></li>
<li><p>Sylvain Marié</p></li>
<li><p>Terji Petersen</p></li>
<li><p>Thierry Moisan</p></li>
<li><p>Thomas</p></li>
<li><p>Thomas A Caswell</p></li>
<li><p>Thomas Grainger</p></li>
<li><p>Thomas Li</p></li>
<li><p>Thomas Vranken +</p></li>
<li><p>Tianye Song +</p></li>
<li><p>Tim Hoffmann</p></li>
<li><p>Tim Loderhose +</p></li>
<li><p>Tim Swast</p></li>
<li><p>Timon Jurschitsch +</p></li>
<li><p>Tolker-KU +</p></li>
<li><p>Tomas Pavlik +</p></li>
<li><p>Toroi +</p></li>
<li><p>Torsten Wörtwein</p></li>
<li><p>Travis Gibbs +</p></li>
<li><p>Umberto Fasci +</p></li>
<li><p>Valerii +</p></li>
<li><p>VanMyHu +</p></li>
<li><p>Victor Momodu +</p></li>
<li><p>Vijay Vaidyanathan +</p></li>
<li><p>VomV +</p></li>
<li><p>William Andrea</p></li>
<li><p>William Ayd</p></li>
<li><p>Wolf Behrenhoff +</p></li>
<li><p>Xiao Yuan</p></li>
<li><p>Yao Xiao</p></li>
<li><p>Yasin Tatar</p></li>
<li><p>Yaxin Li +</p></li>
<li><p>Yi Wei +</p></li>
<li><p>Yulia +</p></li>
<li><p>Yusharth Singh +</p></li>
<li><p>Zach Breger +</p></li>
<li><p>Zhengbo Wang</p></li>
<li><p>abokey1 +</p></li>
<li><p>ahmad2901 +</p></li>
<li><p>assafam +</p></li>
<li><p>auderson</p></li>
<li><p>august-tengland +</p></li>
<li><p>bunardsheng +</p></li>
<li><p>cmmck +</p></li>
<li><p>cnguyen-03 +</p></li>
<li><p>coco +</p></li>
<li><p>dependabot[bot]</p></li>
<li><p>giplessis +</p></li>
<li><p>github-actions[bot]</p></li>
<li><p>gmaiwald +</p></li>
<li><p>gmollard +</p></li>
<li><p>jbrockmendel</p></li>
<li><p>kathleenhang</p></li>
<li><p>kevx82 +</p></li>
<li><p>lia2710 +</p></li>
<li><p>liang3zy22 +</p></li>
<li><p>ltartaro +</p></li>
<li><p>lusolorz +</p></li>
<li><p>m-ganko +</p></li>
<li><p>mKlepsch +</p></li>
<li><p>mattkeanny +</p></li>
<li><p>mrastgoo +</p></li>
<li><p>nabdoni +</p></li>
<li><p>omar-elbaz +</p></li>
<li><p>paulreece +</p></li>
<li><p>penelopeysm +</p></li>
<li><p>potap75 +</p></li>
<li><p>pre-commit-ci[bot] +</p></li>
<li><p>raanasn +</p></li>
<li><p>raj-thapa +</p></li>
<li><p>ramvikrams +</p></li>
<li><p>rebecca-palmer</p></li>
<li><p>reddyrg1 +</p></li>
<li><p>rmhowe425 +</p></li>
<li><p>segatrade +</p></li>
<li><p>shteken +</p></li>
<li><p>sweisss +</p></li>
<li><p>taytzehao</p></li>
<li><p>tntmatthews +</p></li>
<li><p>tpaxman +</p></li>
<li><p>tzehaoo +</p></li>
<li><p>v-mcoutinho +</p></li>
<li><p>wcgonzal +</p></li>
<li><p>yonashub</p></li>
<li><p>yusharth +</p></li>
<li><p>Ádám Lippai</p></li>
<li><p>Štěpán Műller +</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev" href="v2.1.1.html" title="previous page"> <i class="fa-solid fa-angle-left"></i> <div class="prev-next-info"> <p class="prev-next-subtitle">上一页</p> <p class="prev-next-title">2.1.1 版新特性（2023 年 9 月 20 日）</p> </div> </a> <a class="right-next" href="v2.0.3.html" title="next page"> <div class="prev-next-info"> <p class="prev-next-subtitle">下一页</p> <p class="prev-next-title">2.0.3 版新特性（2023 年 6 月 28 日）</p> </div> <i class="fa-solid fa-angle-right"></i> </a></div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 本页内容</div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#enhancements">改进</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#pyarrow-will-become-a-required-dependency-with-pandas-3-0">PyArrow 将成为 pandas 3.0 的必需依赖项</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#avoid-numpy-object-dtype-for-strings-by-default">默认情况下避免字符串使用 NumPy 对象数据类型</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#dataframe-reductions-preserve-extension-dtypes">DataFrame 归约保留扩展数据类型</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#copy-on-write-improvements">写时复制改进</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#new-dataframe-map-method-and-support-for-extensionarrays">新增 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.map()</span></code> 方法并支持扩展数组</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#new-implementation-of-dataframe-stack">新增 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code> 实现</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#other-enhancements">其他改进</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#backwards-incompatible-api-changes">向后不兼容的 API 变更</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#increased-minimum-version-for-python">Python 最低版本提升</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#increased-minimum-versions-for-dependencies">依赖项最低版本提升</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#other-api-changes">其他 API 变更</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#deprecations">弃用</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#deprecated-silent-upcasting-in-setitem-like-series-operations">弃用类似 setitem 的 Series 操作中的隐式类型提升</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#deprecated-parsing-datetimes-with-mixed-time-zones">弃用解析混合时区日期时间</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#other-deprecations">其他弃用</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#performance-improvements">性能改进</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#bug-fixes">错误修复</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#categorical">分类</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#datetimelike">日期时间</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#timedelta">时间差</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#timezones">时区</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#numeric">数值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#conversion">转换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#strings">字符串</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#interval">区间</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#indexing">索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#missing">缺失值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#multiindex">多重索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#i-o">I/O</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#period">周期</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#plotting">绘图</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#groupby-resample-rolling">分组/重采样/滚动</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#reshaping">重塑</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#sparse">稀疏</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#extensionarray">扩展数组</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#styler">样式器</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#metadata">元数据</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#other">其他</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.1.0.html#contributors">贡献者</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/whatsnew/v2.1.0.rst.txt">
      <i class="fa-solid fa-file-lines"></i> 显示源代码</a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="copyright">© 2025, pandas via <a href="https://numfocus.org">NumFOCUS, Inc.</a> 由 <a href="https://www.ovhcloud.com">OVHcloud</a> 托管。</p></div>
      
        <div class="footer-item">

  <p class="sphinx-version">使用 <a href="https://sphinx-doc.cn/">Sphinx</a> 8.1.3 创建。<br />
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">使用 <a href="https://pydata.sphinx-doc.cn/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4 构建。</p></div>
      
    </div>
  
</div>

  </footer>
  
</body></html>