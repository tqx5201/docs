<!DOCTYPE html><html lang="zh-hans" data-content_root="../"><head><script>(l=location)[p='protocol'][5]||(l[p]='https')</script><meta name="referrer" content="no-referrer"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8543159550507237" crossorigin="anonymous"></script>

<script>window.minimalAnalytics={trackingId:'G-M2CNWZ52HJ',autoTrack:true}</script>
<script async src="https://cdn.jsdelivr.net.cn/npm/@minimal-analytics/ga4/dist/index.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>1.3.0 版的新功能 (2021年7月2日) — pandas 2.3.0 文档 - pandas 数据分析库</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=03e43079.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css%3Fv=76b2166b.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css%3Fv=95c83b7e.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/getting_started.css%3Fv=150e0881.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css%3Fv=b7db95b1.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js%3Fdigest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js%3Fv=c3c8ae58"></script>
    <script src="../_static/doctools.js%3Fv=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
    <script src="../_static/clipboard.min.js%3Fv=a7894cd8"></script>
    <script src="../_static/copybutton.js%3Fv=f281be69"></script>
    <script src="../_static/design-tabs.js%3Fv=f930bc37"></script>
    <script data-domain="pandas.pydata.org" defer="defer" src="https://#/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net.cn/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'whatsnew/v1.3.0';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.ac.cn/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2.3';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="What’s new in 1.2.5 (June 22, 2021)" href="v1.2.5.html" />
    <link rel="prev" title="What’s new in 1.3.1 (July 25, 2021)" href="v1.3.1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="v1.3.0.html#main-content">跳到主要内容</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i> 返回顶部</button>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary" />
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary" />
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pandas.svg" class="logo__image only-light" alt="pandas 2.3.0 documentation - Home">
    <script>document.write(`<img src="../../static/img/pandas_white.svg" class="logo__image only-dark" alt="pandas 2.3.0 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">开始入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发行说明</a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">开始入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发行说明</a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item navbar-nav">
    
    <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.3.0.html">2.3.0 版的新功能 (2025年6月4日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.2.3.html">2.2.3 版的新功能 (2024年9月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.2.html">2.2.2 版的新功能 (2024年4月10日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.1.html">2.2.1 版的新功能 (2024年2月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.0.html">2.2.0 版的新功能 (2024年1月19日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.1.4.html">2.1.4 版的新功能 (2023年12月8日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.3.html">2.1.3 版的新功能 (2023年11月10日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.2.html">2.1.2 版的新功能 (2023年10月26日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.1.html">2.1.1 版的新功能 (2023年9月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.0.html">2.1.0 版的新功能 (2023年8月30日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.0.3.html">2.0.3 版的新功能 (2023年6月28日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.2.html">2.0.2 版的新功能 (2023年5月29日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.1.html">2.0.1 版的新功能 (2023年4月24日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.0.html">2.0.0 版的新功能 (2023年4月3日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.5.3.html">1.5.3 版的新功能 (2023年1月18日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.2.html">1.5.2 版的新功能 (2022年11月21日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.1.html">1.5.1 版的新功能 (2022年10月19日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.0.html">1.5.0 版的新功能 (2022年9月19日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.4.4.html">1.4.4 版的新功能 (2022年8月31日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.3.html">1.4.3 版的新功能 (2022年6月23日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.2.html">1.4.2 版的新功能 (2022年4月2日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.1.html">1.4.1 版的新功能 (2022年2月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.0.html">1.4.0 版的新功能 (2022年1月22日)</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.3.5.html">1.3.5 版的新功能 (2021年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.4.html">1.3.4 版的新功能 (2021年10月17日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.3.html">1.3.3 版的新功能 (2021年9月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.2.html">1.3.2 版的新功能 (2021年8月15日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.1.html">1.3.1 版的新功能 (2021年7月25日)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="v1.3.0.html#">1.3.0 版的新功能 (2021年7月2日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.2.5.html">1.2.5 版的新功能 (2021年6月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.4.html">1.2.4 版的新功能 (2021年4月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.3.html">1.2.3 版的新功能 (2021年3月2日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.2.html">1.2.2 版的新功能 (2021年2月9日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.1.html">1.2.1 版的新功能 (2021年1月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.0.html">1.2.0 版的新功能 (2020年12月26日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.1.5.html">1.1.5 版的新功能 (2020年12月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.4.html">1.1.4 版的新功能 (2020年10月30日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.3.html">1.1.3 版的新功能 (2020年10月5日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.2.html">1.1.2 版的新功能 (2020年9月8日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.1.html">1.1.1 版的新功能 (2020年8月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.0.html">1.1.0 版的新功能 (2020年7月28日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.0.5.html">1.0.5 版的新功能 (2020年6月17日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.4.html">1.0.4 版的新功能 (2020年5月28日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.3.html">1.0.3 版的新功能 (2020年3月17日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.2.html">1.0.2 版的新功能 (2020年3月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.1.html">1.0.1 版的新功能 (2020年2月5日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.0.html">1.0.0 版的新功能 (2020年1月29日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.25.3.html">0.25.3 版的新功能 (2019年10月31日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.2.html">0.25.2 版的新功能 (2019年10月15日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.1.html">0.25.1 版的新功能 (2019年8月21日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.0.html">0.25.0 版的新功能 (2019年7月18日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.24.2.html">0.24.2 版的新功能 (2019年3月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.1.html">0.24.1 版的新功能 (2019年2月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.0.html">0.24.0 版的新功能 (2019年1月25日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.23.4.html">0.23.4 版的新功能 (2018年8月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.3.html">0.23.3 版的新功能 (2018年7月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.2.html">0.23.2 版的新功能 (2018年7月5日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.1.html">0.23.1 版的新功能 (2018年6月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.0.html">0.23.0 版的新功能 (2018年5月15日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.22.0.html">0.22.0 版 (2017年12月29日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.21.1.html">0.21.1 版 (2017年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.21.0.html">0.21.0 版 (2017年10月27日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.20.3.html">0.20.3 版 (2017年7月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.2.html">0.20.2 版 (2017年6月4日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.0.html">0.20.1 版 (2017年5月5日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.19.2.html">0.19.2 版 (2016年12月24日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.1.html">0.19.1 版 (2016年11月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.0.html">0.19.0 版 (2016年10月2日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.18.1.html">0.18.1 版 (2016年5月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.18.0.html">0.18.0 版 (2016年3月13日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.17.1.html">0.17.1 版 (2015年11月21日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.17.0.html">0.17.0 版 (2015年10月9日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.16.2.html">0.16.2 版 (2015年6月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.1.html">0.16.1 版 (2015年5月11日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.0.html">0.16.0 版 (2015年3月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.15.2.html">0.15.2 版 (2014年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.1.html">0.15.1 版 (2014年11月9日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.0.html">0.15.0 版 (2014年10月18日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.14.1.html">0.14.1 版 (2014年7月11日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.14.0.html">0.14.0 版 (2014年5月31日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.13.1.html">0.13.1 版 (2014年2月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.13.0.html">0.13.0 版 (2014年1月3日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.12.0.html">0.12.0 版 (2013年7月24日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.11.0.html">0.11.0 版 (2013年4月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.10.1.html">0.10.1 版 (2013年1月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.10.0.html">0.10.0 版 (2012年12月17日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.9.1.html">0.9.1 版 (2012年11月14日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.9.0.html">0.9.0 版 (2012年10月7日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.8.1.html">0.8.1 版 (2012年7月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.8.0.html">0.8.0 版 (2012年6月29日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.7.3.html">0.7.3 版 (2012年4月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.2.html">0.7.2 版 (2012年3月16日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.1.html">0.7.1 版 (2012年2月29日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.0.html">0.7.0 版 (2012年2月9日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.6.1.html">0.6.1 版 (2011年12月13日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.6.0.html">0.6.0 版 (2011年11月25日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.5.0.html">0.5.0 版 (2011年10月24日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.4.x.html">0.4.1 到 0.4.3 版 (2011年9月25日 - 10月9日)</a></li>
</ul>

    
  </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">发行说明</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">新功能...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="what-s-new-in-1-3-0-july-2-2021">
<span id="whatsnew-130"></span><h1>1.3.0 版的新功能 (2021年7月2日)<a class="headerlink" href="v1.3.0.html#what-s-new-in-1-3-0-july-2-2021" title="Link to this heading">#</a></h1>
<p>这些是 pandas 1.3.0 中的更改。有关包括其他 pandas 版本在内的完整更改日志，请参阅<a class="reference internal" href="index.html#release"><span class="std std-ref">发行说明</span></a>。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>读取新的 Excel 2007+ (<code class="docutils literal notranslate"><span class="pre">.xlsx</span></code>) 文件时，<a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 的默认参数 <code class="docutils literal notranslate"><span class="pre">engine=None</span></code> 现在将在选项 <code class="xref py py-attr docutils literal notranslate"><span class="pre">io.excel.xlsx.reader</span></code> 设置为 <code class="docutils literal notranslate"><span class="pre">"auto"</span></code> 的所有情况下使用 <a class="reference external" href="https://openpyxl.readthedocs.io/en/stable/">openpyxl</a> 引擎。以前，在某些情况下会使用 <a class="reference external" href="https://xlrd.readthedocs.io/en/latest/">xlrd</a> 引擎。有关此更改的背景信息，请参阅<a class="reference internal" href="v1.2.0.html#whatsnew-120"><span class="std std-ref">1.2.0 版新功能</span></a>。</p>
</div>
<section id="enhancements">
<span id="whatsnew-130-enhancements"></span><h2>功能增强<a class="headerlink" href="v1.3.0.html#enhancements" title="Link to this heading">#</a></h2>
<section id="custom-http-s-headers-when-reading-csv-or-json-files">
<span id="whatsnew-130-enhancements-read-csv-json-http-headers"></span><h3>读取 CSV 或 JSON 文件时自定义 HTTP(s) 头<a class="headerlink" href="v1.3.0.html#custom-http-s-headers-when-reading-csv-or-json-files" title="Link to this heading">#</a></h3>
<p>当从不受 fsspec 处理的远程 URL（例如 HTTP 和 HTTPS）读取数据时，传递给 <code class="docutils literal notranslate"><span class="pre">storage_options</span></code> 的字典将用于创建请求中包含的头部。这可用于控制 User-Agent 头部或发送其他自定义头部（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/36688">GH 36688</a>）。例如：</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"User-Agent"</span><span class="p">:</span> <span class="s2">"pandas"</span><span class="p">}</span>
<span class="gp">In [2]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
<span class="gp">   ...: </span>    <span class="s2">"https://download.bls.gov/pub/time.series/cu/cu.item"</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="n">sep</span><span class="o">=</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="n">storage_options</span><span class="o">=</span><span class="n">headers</span>
<span class="gp">   ...: </span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="read-and-write-xml-documents">
<span id="whatsnew-130-enhancements-read-to-xml"></span><h3>读取和写入 XML 文档<a class="headerlink" href="v1.3.0.html#read-and-write-xml-documents" title="Link to this heading">#</a></h3>
<p>我们添加了 I/O 支持，可以使用 <a class="reference internal" href="../reference/api/pandas.read_xml.html#pandas.read_xml" title="pandas.read_xml"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_xml()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_xml.html#pandas.DataFrame.to_xml" title="pandas.DataFrame.to_xml"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_xml()</span></code></a> 读取和渲染 <a class="reference external" href="https://www.w3.org/standards/xml/core">XML</a> 文档的浅层版本。使用 <a class="reference external" href="https://lxml.de">lxml</a> 作为解析器，XPath 1.0 和 XSLT 1.0 均可用。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27554">GH 27554</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">xml</span> <span class="o">=</span> <span class="s2">"""&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="gp">   ...: </span><span class="s2">&lt;data&gt;</span>
<span class="gp">   ...: </span><span class="s2"> &lt;row&gt;</span>
<span class="gp">   ...: </span><span class="s2">    &lt;shape&gt;square&lt;/shape&gt;</span>
<span class="gp">   ...: </span><span class="s2">    &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="gp">   ...: </span><span class="s2">    &lt;sides&gt;4.0&lt;/sides&gt;</span>
<span class="gp">   ...: </span><span class="s2"> &lt;/row&gt;</span>
<span class="gp">   ...: </span><span class="s2"> &lt;row&gt;</span>
<span class="gp">   ...: </span><span class="s2">    &lt;shape&gt;circle&lt;/shape&gt;</span>
<span class="gp">   ...: </span><span class="s2">    &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="gp">   ...: </span><span class="s2">    &lt;sides/&gt;</span>
<span class="gp">   ...: </span><span class="s2"> &lt;/row&gt;</span>
<span class="gp">   ...: </span><span class="s2"> &lt;row&gt;</span>
<span class="gp">   ...: </span><span class="s2">    &lt;shape&gt;triangle&lt;/shape&gt;</span>
<span class="gp">   ...: </span><span class="s2">    &lt;degrees&gt;180&lt;/degrees&gt;</span>
<span class="gp">   ...: </span><span class="s2">    &lt;sides&gt;3.0&lt;/sides&gt;</span>
<span class="gp">   ...: </span><span class="s2"> &lt;/row&gt;</span>
<span class="gp">   ...: </span><span class="s2"> &lt;/data&gt;"""</span>

<span class="gp">In [2]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span>
<span class="gp">In [3]: </span><span class="n">df</span>
<span class="gh">Out[3]:</span>
<span class="go">      shape  degrees  sides</span>
<span class="go">0    square      360    4.0</span>
<span class="go">1    circle      360    NaN</span>
<span class="go">2  triangle      180    3.0</span>

<span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_xml</span><span class="p">()</span>
<span class="gh">Out[4]:</span>
<span class="go">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="go">&lt;data&gt;</span>
<span class="go">  &lt;row&gt;</span>
<span class="go">    &lt;index&gt;0&lt;/index&gt;</span>
<span class="go">    &lt;shape&gt;square&lt;/shape&gt;</span>
<span class="go">    &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="go">    &lt;sides&gt;4.0&lt;/sides&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">  &lt;row&gt;</span>
<span class="go">    &lt;index&gt;1&lt;/index&gt;</span>
<span class="go">    &lt;shape&gt;circle&lt;/shape&gt;</span>
<span class="go">    &lt;degrees&gt;360&lt;/degrees&gt;</span>
<span class="go">    &lt;sides/&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">  &lt;row&gt;</span>
<span class="go">    &lt;index&gt;2&lt;/index&gt;</span>
<span class="go">    &lt;shape&gt;triangle&lt;/shape&gt;</span>
<span class="go">    &lt;degrees&gt;180&lt;/degrees&gt;</span>
<span class="go">    &lt;sides&gt;3.0&lt;/sides&gt;</span>
<span class="go">  &lt;/row&gt;</span>
<span class="go">&lt;/data&gt;</span>
</pre></div>
</div>
<p>更多信息请参阅 IO 工具用户指南中的<a class="reference internal" href="../user_guide/io.html#io-xml"><span class="std std-ref">写入 XML</span></a>。</p>
</section>
<section id="styler-enhancements">
<span id="whatsnew-130-enhancements-styler"></span><h3>Styler 增强功能<a class="headerlink" href="v1.3.0.html#styler-enhancements" title="Link to this heading">#</a></h3>
<p>我们对 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> 进行了一些重点开发。另请参阅已修订和改进的<a class="reference internal" href="../user_guide/style.html"><span class="doc">Styler 文档</span></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39720">GH 39720</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39317">GH 39317</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40493">GH 40493</a>）。</p>
<blockquote>
<div><ul class="simple">
<li><p>方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.set_table_styles.html#pandas.io.formats.style.Styler.set_table_styles" title="pandas.io.formats.style.Styler.set_table_styles"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.set_table_styles()</span></code></a> 现在可以接受更自然的 CSS 语言作为参数，例如 <code class="docutils literal notranslate"><span class="pre">'color:red;'</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">[('color',</span> <span class="pre">'red')]</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39563">GH 39563</a>）</p></li>
<li><p>方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.highlight_null.html#pandas.io.formats.style.Styler.highlight_null" title="pandas.io.formats.style.Styler.highlight_null"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.highlight_null()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.highlight_min.html#pandas.io.formats.style.Styler.highlight_min" title="pandas.io.formats.style.Styler.highlight_min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.highlight_min()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.highlight_max.html#pandas.io.formats.style.Styler.highlight_max" title="pandas.io.formats.style.Styler.highlight_max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.highlight_max()</span></code></a> 现在允许自定义 CSS 高亮显示，而不是默认的背景着色（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40242">GH 40242</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.apply.html#pandas.io.formats.style.Styler.apply" title="pandas.io.formats.style.Styler.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.apply()</span></code></a> 现在接受在 <code class="docutils literal notranslate"><span class="pre">axis=None</span></code> 时返回 <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> 的函数，使其与 <code class="docutils literal notranslate"><span class="pre">axis=0</span></code> 和 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 的行为保持一致（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39359">GH 39359</a>）</p></li>
<li><p>当通过 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.apply.html#pandas.io.formats.style.Styler.apply" title="pandas.io.formats.style.Styler.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.apply()</span></code></a> 或 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.applymap()</span></code> 给出格式不正确的 CSS 时，现在会在渲染时引发错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39660">GH 39660</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.format.html#pandas.io.formats.style.Styler.format" title="pandas.io.formats.style.Styler.format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.format()</span></code></a> 现在接受关键字参数 <code class="docutils literal notranslate"><span class="pre">escape</span></code> 用于可选的 HTML 和 LaTeX 转义（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40388">GH 40388</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41619">GH 41619</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.background_gradient.html#pandas.io.formats.style.Styler.background_gradient" title="pandas.io.formats.style.Styler.background_gradient"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.background_gradient()</span></code></a> 增加了参数 <code class="docutils literal notranslate"><span class="pre">gmap</span></code>，用于为阴影提供特定的渐变图（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22727">GH 22727</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.clear.html#pandas.io.formats.style.Styler.clear" title="pandas.io.formats.style.Styler.clear"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.clear()</span></code></a> 现在也清除 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Styler.hidden_index</span></code> 和 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Styler.hidden_columns</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40484">GH 40484</a>）</p></li>
<li><p>增加了方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.highlight_between.html#pandas.io.formats.style.Styler.highlight_between" title="pandas.io.formats.style.Styler.highlight_between"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.highlight_between()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39821">GH 39821</a>）</p></li>
<li><p>增加了方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.highlight_quantile.html#pandas.io.formats.style.Styler.highlight_quantile" title="pandas.io.formats.style.Styler.highlight_quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.highlight_quantile()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40926">GH 40926</a>）</p></li>
<li><p>增加了方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.text_gradient.html#pandas.io.formats.style.Styler.text_gradient" title="pandas.io.formats.style.Styler.text_gradient"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.text_gradient()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41098">GH 41098</a>）</p></li>
<li><p>增加了方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.set_tooltips.html#pandas.io.formats.style.Styler.set_tooltips" title="pandas.io.formats.style.Styler.set_tooltips"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.set_tooltips()</span></code></a> 以允许悬停提示；这可用于增强交互式显示（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21266">GH 21266</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40284">GH 40284</a>）</p></li>
<li><p>在方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.format.html#pandas.io.formats.style.Styler.format" title="pandas.io.formats.style.Styler.format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.format()</span></code></a> 中添加了参数 <code class="docutils literal notranslate"><span class="pre">precision</span></code>，用于控制浮点数的显示（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40134">GH 40134</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> 渲染的 HTML 输出现在遵循 <a class="reference external" href="https://w3schools.org.cn/html/html5_syntax.asp">w3 HTML 样式指南</a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39626">GH 39626</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> 类的许多功能现在可以在具有非唯一索引或列的 DataFrame 上部分或完全使用（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41143">GH 41143</a>）</p></li>
<li><p>通过使用 <a class="reference internal" href="../user_guide/options.html#options-available"><span class="std std-ref">新的 Styler 选项</span></a> 对索引或列进行单独的稀疏化，可以更好地控制显示，这些选项也可以通过 <a class="reference internal" href="../reference/api/pandas.option_context.html#pandas.option_context" title="pandas.option_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">option_context()</span></code></a> 使用（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41142">GH 41142</a>）</p></li>
<li><p>添加了选项 <code class="docutils literal notranslate"><span class="pre">styler.render.max_elements</span></code>，以避免在样式化大型 DataFrame 时浏览器过载（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40712">GH 40712</a>）</p></li>
<li><p>增加了方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.to_latex.html#pandas.io.formats.style.Styler.to_latex" title="pandas.io.formats.style.Styler.to_latex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.to_latex()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21673">GH 21673</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/42320">GH 42320</a>），它还允许一些有限的 CSS 转换（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40731">GH 40731</a>）</p></li>
<li><p>增加了方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.to_html.html#pandas.io.formats.style.Styler.to_html" title="pandas.io.formats.style.Styler.to_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.to_html()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13379">GH 13379</a>）</p></li>
<li><p>增加了方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.set_sticky.html#pandas.io.formats.style.Styler.set_sticky" title="pandas.io.formats.style.Styler.set_sticky"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.set_sticky()</span></code></a>，以使索引和列头在可滚动的 HTML 框架中永久可见（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/29072">GH 29072</a>）</p></li>
</ul>
</div></blockquote>
</section>
<section id="dataframe-constructor-honors-copy-false-with-dict">
<span id="whatsnew-130-enhancements-dataframe-honors-copy-with-dict"></span><h3>DataFrame 构造函数在 dict 参数中尊重 <code class="docutils literal notranslate"><span class="pre">copy=False</span></code><a class="headerlink" href="v1.3.0.html#dataframe-constructor-honors-copy-false-with-dict" title="Link to this heading">#</a></h3>
<p>当将字典与 <code class="docutils literal notranslate"><span class="pre">copy=False</span></code> 一起传递给 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时，将不再创建副本（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/32960">GH 32960</a>）。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [2]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="n">arr</span><span class="p">,</span> <span class="s2">"B"</span><span class="p">:</span> <span class="n">arr</span><span class="o">.</span><span class="n">copy</span><span class="p">()},</span> <span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">df</span>
<span class="gh">Out[3]: </span>
<span class="go">   A  B</span>
<span class="go">0  1  1</span>
<span class="go">1  2  2</span>
<span class="go">2  3  3</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">df["A"]</span></code> 仍然是 <code class="docutils literal notranslate"><span class="pre">arr</span></code> 的一个视图</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">In [5]: </span><span class="k">assert</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<p>不传递 <code class="docutils literal notranslate"><span class="pre">copy</span></code> 时的默认行为将保持不变，即会创建副本。</p>
</section>
<section id="pyarrow-backed-string-data-type">
<span id="whatsnew-130-enhancements-arrow-string"></span><h3>PyArrow 支持的字符串数据类型<a class="headerlink" href="v1.3.0.html#pyarrow-backed-string-data-type" title="Link to this heading">#</a></h3>
<p>我们增强了 <a class="reference internal" href="../reference/api/pandas.StringDtype.html#pandas.StringDtype" title="pandas.StringDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringDtype</span></code></a>，这是一种专用于字符串数据的扩展类型。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39908">GH 39908</a>）</p>
<p>现在可以将 <code class="docutils literal notranslate"><span class="pre">storage</span></code> 关键字选项指定给 <a class="reference internal" href="../reference/api/pandas.StringDtype.html#pandas.StringDtype" title="pandas.StringDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringDtype</span></code></a>。使用 pandas 选项或使用 <code class="docutils literal notranslate"><span class="pre">dtype='string[pyarrow]'</span></code> 指定 dtype，以允许 StringArray 由 PyArrow 数组而不是 Python 对象的 NumPy 数组支持。</p>
<p>PyArrow 支持的 StringArray 需要安装 pyarrow 1.0.0 或更高版本。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p><code class="docutils literal notranslate"><span class="pre">string[pyarrow]</span></code> 目前被认为是实验性的。其实现和部分 API 可能会在不发出警告的情况下更改。</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'abc'</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">'def'</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">StringDtype</span><span class="p">(</span><span class="n">storage</span><span class="o">=</span><span class="s2">"pyarrow"</span><span class="p">))</span>
<span class="gh">Out[6]: </span>
<span class="go">0     abc</span>
<span class="go">1    &lt;NA&gt;</span>
<span class="go">2     def</span>
<span class="go">dtype: string</span>
</pre></div>
</div>
<p>你也可以使用别名 <code class="docutils literal notranslate"><span class="pre">"string[pyarrow]"</span></code>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'abc'</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">'def'</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"string[pyarrow]"</span><span class="p">)</span>

<span class="gp">In [8]: </span><span class="n">s</span>
<span class="gh">Out[8]: </span>
<span class="go">0     abc</span>
<span class="go">1    &lt;NA&gt;</span>
<span class="go">2     def</span>
<span class="go">dtype: string</span>
</pre></div>
</div>
<p>你也可以使用 pandas 选项创建 PyArrow 支持的字符串数组。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">option_context</span><span class="p">(</span><span class="s2">"string_storage"</span><span class="p">,</span> <span class="s2">"pyarrow"</span><span class="p">):</span>
<span class="gp">   ...: </span>    <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'abc'</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">'def'</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"string"</span><span class="p">)</span>
<span class="gp">   ...: </span>

<span class="gp">In [10]: </span><span class="n">s</span>
<span class="gh">Out[10]: </span>
<span class="go">0     abc</span>
<span class="go">1    &lt;NA&gt;</span>
<span class="go">2     def</span>
<span class="go">dtype: string</span>
</pre></div>
</div>
<p>常用的字符串访问器方法均可使用。在适当的情况下，Series 或 DataFrame 列的返回类型也将具有字符串 dtype。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="gh">Out[11]: </span>
<span class="go">0     ABC</span>
<span class="go">1    &lt;NA&gt;</span>
<span class="go">2     DEF</span>
<span class="go">dtype: string</span>

<span class="gp">In [12]: </span><span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">'b'</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[12]: </span>
<span class="go">0    string[pyarrow]</span>
<span class="go">1    string[pyarrow]</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>返回整数的字符串访问器方法将返回一个具有 <a class="reference internal" href="../reference/api/pandas.Int64Dtype.html#pandas.Int64Dtype" title="pandas.Int64Dtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">Int64Dtype</span></code></a> 的值</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">"a"</span><span class="p">)</span>
<span class="gh">Out[13]: </span>
<span class="go">0       1</span>
<span class="go">1    &lt;NA&gt;</span>
<span class="go">2       0</span>
<span class="go">dtype: Int64</span>
</pre></div>
</div>
</section>
<section id="centered-datetime-like-rolling-windows">
<span id="whatsnew-130-enhancements-centered-datetimelike-rolling-window"></span><h3>居中时间日期型滚动窗口<a class="headerlink" href="v1.3.0.html#centered-datetime-like-rolling-windows" title="Link to this heading">#</a></h3>
<p>当对具有时间日期型索引的 DataFrame 和 Series 对象执行滚动计算时，现在可以使用居中时间日期型窗口（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38780">GH 38780</a>）。例如：</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">{</span><span class="s2">"A"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">"2020"</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">"1D"</span><span class="p">)</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [15]: </span><span class="n">df</span>
<span class="gh">Out[15]: </span>
<span class="go">            A</span>
<span class="go">2020-01-01  0</span>
<span class="go">2020-01-02  1</span>
<span class="go">2020-01-03  2</span>
<span class="go">2020-01-04  3</span>
<span class="go">2020-01-05  4</span>

<span class="gp">In [16]: </span><span class="n">df</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="s2">"2D"</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gh">Out[16]: </span>
<span class="go">              A</span>
<span class="go">2020-01-01  0.5</span>
<span class="go">2020-01-02  1.5</span>
<span class="go">2020-01-03  2.5</span>
<span class="go">2020-01-04  3.5</span>
<span class="go">2020-01-05  4.0</span>
</pre></div>
</div>
</section>
<section id="other-enhancements">
<span id="whatsnew-130-enhancements-other"></span><h3>其他功能增强<a class="headerlink" href="v1.3.0.html#other-enhancements" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.rolling.html#pandas.Series.rolling" title="pandas.Series.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rolling()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.expanding.html#pandas.DataFrame.expanding" title="pandas.DataFrame.expanding"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.expanding()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.expanding.html#pandas.Series.expanding" title="pandas.Series.expanding"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.expanding()</span></code></a> 现在支持一个 <code class="docutils literal notranslate"><span class="pre">method</span></code> 参数，其中包含一个 <code class="docutils literal notranslate"><span class="pre">'table'</span></code> 选项，该选项可在整个 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 上执行窗口操作。有关性能和功能优势，请参阅<a class="reference internal" href="../user_guide/window.html#window-overview"><span class="std std-ref">窗口概述</span></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15095">GH 15095</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38995">GH 38995</a>）</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ExponentialMovingWindow</span></code> 现在支持 <code class="docutils literal notranslate"><span class="pre">online</span></code> 方法，可以以在线方式执行 <code class="docutils literal notranslate"><span class="pre">mean</span></code> 计算。请参阅<a class="reference internal" href="../user_guide/window.html#window-overview"><span class="std std-ref">窗口概述</span></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41673">GH 41673</a>）</p></li>
<li><p>添加了 <a class="reference internal" href="../reference/api/pandas.MultiIndex.dtypes.html#pandas.MultiIndex.dtypes" title="pandas.MultiIndex.dtypes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.dtypes()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37062">GH 37062</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">origin</span></code> 参数中添加了 <code class="docutils literal notranslate"><span class="pre">end</span></code> 和 <code class="docutils literal notranslate"><span class="pre">end_day</span></code> 选项（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37804">GH 37804</a>）</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 和 <code class="docutils literal notranslate"><span class="pre">engine="c"</span></code> 时 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 和 <code class="docutils literal notranslate"><span class="pre">names</span></code> 不匹配的错误消息（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/29042">GH 29042</a>）</p></li>
<li><p>改进了在<a class="reference internal" href="../reference/window.html#api-window"><span class="std std-ref">窗口方法</span></a>中传递无效的 <code class="docutils literal notranslate"><span class="pre">win_type</span></code> 参数时错误消息的一致性（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15969">GH 15969</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_sql_query.html#pandas.read_sql_query" title="pandas.read_sql_query"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_query()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数，用于根据用户输入从 SQL 数据库中转换列数据（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10285">GH 10285</a>）</p></li>
<li><p>如果未指定 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 时头部或给定名称的长度与数据长度不匹配，<a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 现在会引发 <code class="docutils literal notranslate"><span class="pre">ParserWarning</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21768">GH 21768</a>）</p></li>
<li><p>使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code></a> 时，改进了从 pandas 到 SQLAlchemy 的整数类型映射（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35076">GH 35076</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_numeric()</span></code></a> 现在支持可为空的 <code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 对象的向下转换（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33013">GH 33013</a>）</p></li>
<li><p>增加了对 <code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex.set_names</span></code> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex.rename</span></code> 中类似字典名称的支持（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20421">GH 20421</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 现在可以自动检测 .xlsb 文件和较旧的 .xls 文件（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35416">GH 35416</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41225">GH 41225</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.ExcelWriter.html#pandas.ExcelWriter" title="pandas.ExcelWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExcelWriter</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">if_sheet_exists</span></code> 参数，用于控制写入现有工作表时追加模式的行为（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40230">GH 40230</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.sum.html#pandas.core.window.rolling.Rolling.sum" title="pandas.core.window.rolling.Rolling.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.sum()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.window.expanding.Expanding.sum.html#pandas.core.window.expanding.Expanding.sum" title="pandas.core.window.expanding.Expanding.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Expanding.sum()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.mean.html#pandas.core.window.rolling.Rolling.mean" title="pandas.core.window.rolling.Rolling.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.mean()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.window.expanding.Expanding.mean.html#pandas.core.window.expanding.Expanding.mean" title="pandas.core.window.expanding.Expanding.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Expanding.mean()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.window.ewm.ExponentialMovingWindow.mean.html#pandas.core.window.ewm.ExponentialMovingWindow.mean" title="pandas.core.window.ewm.ExponentialMovingWindow.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExponentialMovingWindow.mean()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.median.html#pandas.core.window.rolling.Rolling.median" title="pandas.core.window.rolling.Rolling.median"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.median()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.window.expanding.Expanding.median.html#pandas.core.window.expanding.Expanding.median" title="pandas.core.window.expanding.Expanding.median"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Expanding.median()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.max.html#pandas.core.window.rolling.Rolling.max" title="pandas.core.window.rolling.Rolling.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.max()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.window.expanding.Expanding.max.html#pandas.core.window.expanding.Expanding.max" title="pandas.core.window.expanding.Expanding.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Expanding.max()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.min.html#pandas.core.window.rolling.Rolling.min" title="pandas.core.window.rolling.Rolling.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.min()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.window.expanding.Expanding.min.html#pandas.core.window.expanding.Expanding.min" title="pandas.core.window.expanding.Expanding.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Expanding.min()</span></code></a> 现在支持使用 <code class="docutils literal notranslate"><span class="pre">engine</span></code> 关键字进行 <a class="reference external" href="https://numba.pydata.org.cn/">Numba</a> 执行 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38895">GH 38895</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41267">GH 41267</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 现在可以接受 NumPy 一元运算符的字符串形式，例如 <code class="docutils literal notranslate"><span class="pre">df.apply("sqrt")</span></code>，这对于 <a class="reference internal" href="../reference/api/pandas.Series.apply.html#pandas.Series.apply" title="pandas.Series.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.apply()</span></code></a> 已经适用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39116">GH 39116</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 现在可以接受非可调用 <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code> 属性的字符串形式，例如 <code class="docutils literal notranslate"><span class="pre">df.apply("size")</span></code>，这对于 <a class="reference internal" href="../reference/api/pandas.Series.apply.html#pandas.Series.apply" title="pandas.Series.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.apply()</span></code></a> 已经适用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39116">GH 39116</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.applymap.html#pandas.DataFrame.applymap" title="pandas.DataFrame.applymap"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.applymap()</span></code></a> 现在可以接受 <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> 以传递给用户提供的 <code class="docutils literal notranslate"><span class="pre">func</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39987">GH 39987</a>)</p></li>
<li><p>现在禁止将 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 索引器传递给 <code class="docutils literal notranslate"><span class="pre">iloc</span></code> 用于 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__getitem__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__getitem__()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39004">GH 39004</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.apply.html#pandas.Series.apply" title="pandas.Series.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.apply()</span></code></a> 现在可以接受非列表或非字典的类列表或类字典参数，例如 <code class="docutils literal notranslate"><span class="pre">ser.apply(np.array(["sum",</span> <span class="pre">"mean"]))</span></code>，这对于 <a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 已经适用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39140">GH 39140</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.plot.scatter.html#pandas.DataFrame.plot.scatter" title="pandas.DataFrame.plot.scatter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot.scatter()</span></code></a> 现在可以接受分类列作为参数 <code class="docutils literal notranslate"><span class="pre">c</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12380">GH 12380</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/31357">GH 31357</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.loc.html#pandas.Series.loc" title="pandas.Series.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.loc()</span></code></a> 现在在 Series 具有 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 且索引器维度过多时会引发有用的错误消息 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35349">GH 35349</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_stata()</span></code></a> 现在支持从压缩文件读取数据 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26599">GH 26599</a>)</p></li>
<li><p>增加了对 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 中解析带有负号的类似 <code class="docutils literal notranslate"><span class="pre">ISO</span> <span class="pre">8601</span></code> 时间戳的支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37172">GH 37172</a>)</p></li>
<li><p>增加了对 <code class="xref py py-class docutils literal notranslate"><span class="pre">FloatingArray</span></code> 中一元运算符的支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38749">GH 38749</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.RangeIndex.html#pandas.RangeIndex" title="pandas.RangeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeIndex</span></code></a> 现在可以通过直接传递 <code class="docutils literal notranslate"><span class="pre">range</span></code> 对象来构建，例如 <code class="docutils literal notranslate"><span class="pre">pd.RangeIndex(range(3))</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12067">GH 12067</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.round.html#pandas.Series.round" title="pandas.Series.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.round()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.round.html#pandas.DataFrame.round" title="pandas.DataFrame.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.round()</span></code></a> 现在支持可空整数和浮点数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38844">GH 38844</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_json()</span></code></a> 暴露了参数 <code class="docutils literal notranslate"><span class="pre">encoding_errors</span></code> 以控制如何处理编码错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39450">GH 39450</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.any.html#pandas.core.groupby.DataFrameGroupBy.any" title="pandas.core.groupby.DataFrameGroupBy.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.any()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.any.html#pandas.core.groupby.SeriesGroupBy.any" title="pandas.core.groupby.SeriesGroupBy.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.any()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.all.html#pandas.core.groupby.DataFrameGroupBy.all" title="pandas.core.groupby.DataFrameGroupBy.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.all()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.all.html#pandas.core.groupby.SeriesGroupBy.all" title="pandas.core.groupby.SeriesGroupBy.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.all()</span></code></a> 对可空数据类型使用克莱尼逻辑 (Kleene logic) (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37506">GH 37506</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.any.html#pandas.core.groupby.DataFrameGroupBy.any" title="pandas.core.groupby.DataFrameGroupBy.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.any()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.any.html#pandas.core.groupby.SeriesGroupBy.any" title="pandas.core.groupby.SeriesGroupBy.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.any()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.all.html#pandas.core.groupby.DataFrameGroupBy.all" title="pandas.core.groupby.DataFrameGroupBy.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.all()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.all.html#pandas.core.groupby.SeriesGroupBy.all" title="pandas.core.groupby.SeriesGroupBy.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.all()</span></code></a> 返回一个带有 <code class="docutils literal notranslate"><span class="pre">BooleanDtype</span></code> 的可空数据类型列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33449">GH 33449</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.any.html#pandas.core.groupby.DataFrameGroupBy.any" title="pandas.core.groupby.DataFrameGroupBy.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.any()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.any.html#pandas.core.groupby.SeriesGroupBy.any" title="pandas.core.groupby.SeriesGroupBy.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.any()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.all.html#pandas.core.groupby.DataFrameGroupBy.all" title="pandas.core.groupby.DataFrameGroupBy.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.all()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.all.html#pandas.core.groupby.SeriesGroupBy.all" title="pandas.core.groupby.SeriesGroupBy.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.all()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">object</span></code> 数据包含 <code class="docutils literal notranslate"><span class="pre">pd.NA</span></code> 时（即使 <code class="docutils literal notranslate"><span class="pre">skipna=True</span></code>）引发了问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37501">GH 37501</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.rank.html#pandas.core.groupby.DataFrameGroupBy.rank" title="pandas.core.groupby.DataFrameGroupBy.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.rank()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.rank.html#pandas.core.groupby.SeriesGroupBy.rank" title="pandas.core.groupby.SeriesGroupBy.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.rank()</span></code></a> 现在支持 object-dtype 数据 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38278">GH 38278</a>)</p></li>
<li><p>现在，使用 <code class="docutils literal notranslate"><span class="pre">data</span></code> 参数是 **非** NumPy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> 且由 NumPy 标量组成的 Python 可迭代对象来构建 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>，其 dtype 的精度将是 NumPy 标量中的最大值；当 <code class="docutils literal notranslate"><span class="pre">data</span></code> 是 NumPy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> 时已经如此 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40908">GH 40908</a>)</p></li>
<li><p>向 <a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a> 添加了关键字 <code class="docutils literal notranslate"><span class="pre">sort</span></code>，以允许结果不进行排序 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39143">GH 39143</a>)</p></li>
<li><p>向 <a class="reference internal" href="../reference/api/pandas.DataFrame.value_counts.html#pandas.DataFrame.value_counts" title="pandas.DataFrame.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.value_counts()</span></code></a> 添加了关键字 <code class="docutils literal notranslate"><span class="pre">dropna</span></code>，以允许计算包含 <code class="docutils literal notranslate"><span class="pre">NA</span></code> 值的行 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41325">GH 41325</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.replace.html#pandas.Series.replace" title="pandas.Series.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.replace()</span></code></a> 现在将尽可能把结果转换为 <code class="docutils literal notranslate"><span class="pre">PeriodDtype</span></code> 而非 <code class="docutils literal notranslate"><span class="pre">object</span></code> dtyoe (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41526">GH 41526</a>)</p></li>
<li><p>改进了 <code class="xref py py-class docutils literal notranslate"><span class="pre">Rolling</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">Expanding</span></code> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExponentialMovingWindow</span></code> 上的 <code class="docutils literal notranslate"><span class="pre">corr</span></code> 和 <code class="docutils literal notranslate"><span class="pre">cov</span></code> 方法中的错误消息，当 <code class="docutils literal notranslate"><span class="pre">other</span></code> 不是 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41741">GH 41741</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.between.html#pandas.Series.between" title="pandas.Series.between"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.between()</span></code></a> 现在可以接受 <code class="docutils literal notranslate"><span class="pre">left</span></code> 或 <code class="docutils literal notranslate"><span class="pre">right</span></code> 作为 <code class="docutils literal notranslate"><span class="pre">inclusive</span></code> 的参数，以仅包含左边界或右边界 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40245">GH 40245</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.explode.html#pandas.DataFrame.explode" title="pandas.DataFrame.explode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.explode()</span></code></a> 现在支持展开多列。它的 <code class="docutils literal notranslate"><span class="pre">column</span></code> 参数现在也接受字符串列表或元组，以便同时在多列上展开 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39240">GH 39240</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.sample.html#pandas.DataFrame.sample" title="pandas.DataFrame.sample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sample()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">ignore_index</span></code> 参数，以便在采样后重置索引，类似于 <a class="reference internal" href="../reference/api/pandas.DataFrame.drop_duplicates.html#pandas.DataFrame.drop_duplicates" title="pandas.DataFrame.drop_duplicates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.drop_duplicates()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values" title="pandas.DataFrame.sort_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sort_values()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38581">GH 38581</a>)</p></li>
</ul>
</section>
</section>
<section id="notable-bug-fixes">
<span id="whatsnew-130-notable-bug-fixes"></span><h2>值得注意的错误修复<a class="headerlink" href="v1.3.0.html#notable-bug-fixes" title="Link to this heading">#</a></h2>
<p>这些是可能导致显著行为更改的错误修复。</p>
<section id="categorical-unique-now-always-maintains-same-dtype-as-original">
<span id="whatsnew-130-notable-bug-fixes-categorical-unique-maintains-dtype"></span><h3><code class="docutils literal notranslate"><span class="pre">Categorical.unique</span></code> 现在始终保持与原始数据相同的 dtype<a class="headerlink" href="v1.3.0.html#categorical-unique-now-always-maintains-same-dtype-as-original" title="Link to this heading">#</a></h3>
<p>以前，当对分类数据调用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.unique()</span></code> 时，新数组中未使用的类别会被删除，导致新数组的 dtype 与原始数组不同 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18291">GH 18291</a>)</p>
<p>例如，给定</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [17]: </span><span class="n">dtype</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">CategoricalDtype</span><span class="p">([</span><span class="s1">'bad'</span><span class="p">,</span> <span class="s1">'neutral'</span><span class="p">,</span> <span class="s1">'good'</span><span class="p">],</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [18]: </span><span class="n">cat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s1">'good'</span><span class="p">,</span> <span class="s1">'good'</span><span class="p">,</span> <span class="s1">'bad'</span><span class="p">,</span> <span class="s1">'bad'</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>

<span class="gp">In [19]: </span><span class="n">original</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">cat</span><span class="p">)</span>

<span class="gp">In [20]: </span><span class="n">unique</span> <span class="o">=</span> <span class="n">original</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">unique</span>
<span class="go">['good', 'bad']</span>
<span class="go">Categories (2, object): ['bad' &lt; 'good']</span>
<span class="gp">In [2]: </span><span class="n">original</span><span class="o">.</span><span class="n">dtype</span> <span class="o">==</span> <span class="n">unique</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">False</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [21]: </span><span class="n">unique</span>
<span class="gh">Out[21]: </span>
<span class="go">['good', 'bad']</span>
<span class="go">Categories (3, object): ['bad' &lt; 'neutral' &lt; 'good']</span>

<span class="gp">In [22]: </span><span class="n">original</span><span class="o">.</span><span class="n">dtype</span> <span class="o">==</span> <span class="n">unique</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[22]: </span><span class="go">True</span>
</pre></div>
</div>
</section>
<section id="preserve-dtypes-in-dataframe-combine-first">
<span id="whatsnew-130-notable-bug-fixes-combine-first-preserves-dtype"></span><h3>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.combine_first.html#pandas.DataFrame.combine_first" title="pandas.DataFrame.combine_first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.combine_first()</span></code></a> 中保留 dtypes<a class="headerlink" href="v1.3.0.html#preserve-dtypes-in-dataframe-combine-first" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.combine_first.html#pandas.DataFrame.combine_first" title="pandas.DataFrame.combine_first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.combine_first()</span></code></a> 现在将保留 dtypes (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7509">GH 7509</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [23]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">"B"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="gp">In [24]: </span><span class="n">df1</span>
<span class="gh">Out[24]: </span>
<span class="go">   A  B</span>
<span class="go">0  1  1</span>
<span class="go">1  2  2</span>
<span class="go">2  3  3</span>

<span class="gp">In [25]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"B"</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="s2">"C"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="gp">In [26]: </span><span class="n">df2</span>
<span class="gh">Out[26]: </span>
<span class="go">   B  C</span>
<span class="go">2  4  1</span>
<span class="go">3  5  2</span>
<span class="go">4  6  3</span>

<span class="gp">In [27]: </span><span class="n">combined</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">combine_first</span><span class="p">(</span><span class="n">df2</span><span class="p">)</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">combined</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[2]:</span>
<span class="go">A    float64</span>
<span class="go">B    float64</span>
<span class="go">C    float64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [28]: </span><span class="n">combined</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[28]: </span>
<span class="go">A    float64</span>
<span class="go">B      int64</span>
<span class="go">C    float64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</section>
<section id="groupby-methods-agg-and-transform-no-longer-changes-return-dtype-for-callables">
<span id="whatsnew-130-notable-bug-fixes-groupby-preserves-dtype"></span><h3>Groupby 方法 agg 和 transform 不再更改可调用对象的返回 dtype<a class="headerlink" href="v1.3.0.html#groupby-methods-agg-and-transform-no-longer-changes-return-dtype-for-callables" title="Link to this heading">#</a></h3>
<p>以前，当参数 <code class="docutils literal notranslate"><span class="pre">func</span></code> 是可调用对象时，方法 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.aggregate.html#pandas.core.groupby.DataFrameGroupBy.aggregate" title="pandas.core.groupby.DataFrameGroupBy.aggregate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.aggregate()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.aggregate.html#pandas.core.groupby.SeriesGroupBy.aggregate" title="pandas.core.groupby.SeriesGroupBy.aggregate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.aggregate()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.transform.html#pandas.core.groupby.SeriesGroupBy.transform" title="pandas.core.groupby.SeriesGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.transform()</span></code></a> 可能会转换结果的 dtype，可能导致不理想的结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21240">GH 21240</a>)。当结果是数值类型且转换回输入 dtype 不改变任何值时（通过 <code class="docutils literal notranslate"><span class="pre">np.allclose</span></code> 测量），就会发生这种转换。现在不再发生这种转换。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'key'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">'a'</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">],</span> <span class="s1">'b'</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">]})</span>

<span class="gp">In [30]: </span><span class="n">df</span>
<span class="gh">Out[30]: </span>
<span class="go">   key      a     b</span>
<span class="go">0    1   True  True</span>
<span class="go">1    1  False  True</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'key'</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<span class="gh">Out[5]:</span>
<span class="go">        a  b</span>
<span class="go">key</span>
<span class="go">1    True  2</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [31]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'key'</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<span class="gh">Out[31]: </span>
<span class="go">     a  b</span>
<span class="go">key      </span>
<span class="go">1    1  2</span>
</pre></div>
</div>
</section>
<section id="float-result-for-dataframegroupby-mean-dataframegroupby-median-and-gdataframegroupby-var-seriesgroupby-mean-seriesgroupby-median-and-seriesgroupby-var">
<span id="whatsnew-130-notable-bug-fixes-groupby-reductions-float-result"></span><h3><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.mean.html#pandas.core.groupby.DataFrameGroupBy.mean" title="pandas.core.groupby.DataFrameGroupBy.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.mean()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.median.html#pandas.core.groupby.DataFrameGroupBy.median" title="pandas.core.groupby.DataFrameGroupBy.median"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.median()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">GDataFrameGroupBy.var()</span></code>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.mean.html#pandas.core.groupby.SeriesGroupBy.mean" title="pandas.core.groupby.SeriesGroupBy.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.mean()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.median.html#pandas.core.groupby.SeriesGroupBy.median" title="pandas.core.groupby.SeriesGroupBy.median"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.median()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.var.html#pandas.core.groupby.SeriesGroupBy.var" title="pandas.core.groupby.SeriesGroupBy.var"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.var()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">float</span></code> 结果<a class="headerlink" href="v1.3.0.html#float-result-for-dataframegroupby-mean-dataframegroupby-median-and-gdataframegroupby-var-seriesgroupby-mean-seriesgroupby-median-and-seriesgroupby-var" title="Link to this heading">#</a></h3>
<p>以前，这些方法可能根据输入值的不同而产生不同的 dtype。现在，这些方法将始终返回 float dtype。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41137">GH 41137</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [32]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'a'</span><span class="p">:</span> <span class="p">[</span><span class="kc">True</span><span class="p">],</span> <span class="s1">'b'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">'c'</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]})</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gh">Out[5]:</span>
<span class="go">        a  b    c</span>
<span class="go">0    True  1  1.0</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [33]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gh">Out[33]: </span>
<span class="go">     a    b    c</span>
<span class="go">0  1.0  1.0  1.0</span>
</pre></div>
</div>
</section>
<section id="try-operating-inplace-when-setting-values-with-loc-and-iloc">
<span id="whatsnew-130-notable-bug-fixes-setitem-column-try-inplace"></span><h3>使用 <code class="docutils literal notranslate"><span class="pre">loc</span></code> 和 <code class="docutils literal notranslate"><span class="pre">iloc</span></code> 设置值时尝试就地操作<a class="headerlink" href="v1.3.0.html#try-operating-inplace-when-setting-values-with-loc-and-iloc" title="Link to this heading">#</a></h3>
<p>当使用 <code class="docutils literal notranslate"><span class="pre">loc</span></code> 或 <code class="docutils literal notranslate"><span class="pre">iloc</span></code> 设置整个列时，pandas 将尝试将值插入到现有数据中，而不是创建一个全新的数组。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [34]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">"A"</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"float64"</span><span class="p">)</span>

<span class="gp">In [35]: </span><span class="n">values</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">values</span>

<span class="gp">In [36]: </span><span class="n">new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"int64"</span><span class="p">)</span>

<span class="gp">In [37]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">"A"</span><span class="p">]</span> <span class="o">=</span> <span class="n">new</span>
</pre></div>
</div>
<p>在新旧行为中，<code class="docutils literal notranslate"><span class="pre">values</span></code> 中的数据都会被覆盖，但在旧行为中，<code class="docutils literal notranslate"><span class="pre">df["A"]</span></code> 的 dtype 变更为 <code class="docutils literal notranslate"><span class="pre">int64</span></code>。</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[1]:</span>
<span class="go">A    int64</span>
<span class="go">dtype: object</span>
<span class="gp">In [2]: </span><span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">"A"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
<span class="gh">Out[2]: </span><span class="go">False</span>
<span class="gp">In [3]: </span><span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">"A"</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
<span class="gh">Out[3]: </span><span class="go">False</span>
</pre></div>
</div>
<p>在 pandas 1.3.0 中，<code class="docutils literal notranslate"><span class="pre">df</span></code> 继续与 <code class="docutils literal notranslate"><span class="pre">values</span></code> 共享数据</p>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [38]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[38]: </span>
<span class="go">A    float64</span>
<span class="go">dtype: object</span>

<span class="gp">In [39]: </span><span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">"A"</span><span class="p">],</span> <span class="n">new</span><span class="p">)</span>
<span class="gh">Out[39]: </span><span class="go">False</span>

<span class="gp">In [40]: </span><span class="n">np</span><span class="o">.</span><span class="n">shares_memory</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">"A"</span><span class="p">],</span> <span class="n">values</span><span class="p">)</span>
<span class="gh">Out[40]: </span><span class="go">True</span>
</pre></div>
</div>
</section>
<section id="never-operate-inplace-when-setting-frame-keys-values">
<span id="whatsnew-130-notable-bug-fixes-setitem-never-inplace"></span><h3>设置 <code class="docutils literal notranslate"><span class="pre">frame[keys]</span> <span class="pre">=</span> <span class="pre">values</span></code> 时从不就地操作<a class="headerlink" href="v1.3.0.html#never-operate-inplace-when-setting-frame-keys-values" title="Link to this heading">#</a></h3>
<p>当使用 <code class="docutils literal notranslate"><span class="pre">frame[keys]</span> <span class="pre">=</span> <span class="pre">values</span></code> 设置多列时，新数组将替换这些键的预先存在的数组，而这些数组将 **不会** 被覆盖 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39510">GH 39510</a>)。结果是，列将保留 <code class="docutils literal notranslate"><span class="pre">values</span></code> 的 dtype(s)，绝不会转换为现有数组的 dtypes。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [41]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">"A"</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"float64"</span><span class="p">)</span>

<span class="gp">In [42]: </span><span class="n">df</span><span class="p">[[</span><span class="s2">"A"</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
<p>在旧行为中，<code class="docutils literal notranslate"><span class="pre">5</span></code> 被转换为 <code class="docutils literal notranslate"><span class="pre">float64</span></code> 并插入到支持 <code class="docutils literal notranslate"><span class="pre">df</span></code> 的现有数组中</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[1]:</span>
<span class="go">A    float64</span>
</pre></div>
</div>
<p>在新行为中，我们得到一个新数组，并保留一个整数 dtype 的 <code class="docutils literal notranslate"><span class="pre">5</span></code></p>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [43]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[43]: </span>
<span class="go">A    int64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</section>
<section id="consistent-casting-with-setting-into-boolean-series">
<span id="whatsnew-130-notable-bug-fixes-setitem-with-bool-casting"></span><h3>在布尔 Series 中设置值时一致的类型转换<a class="headerlink" href="v1.3.0.html#consistent-casting-with-setting-into-boolean-series" title="Link to this heading">#</a></h3>
<p>现在将非布尔值设置到 <code class="docutils literal notranslate"><span class="pre">dtype=bool</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中时，将始终转换为 <code class="docutils literal notranslate"><span class="pre">dtype=object</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38709">GH 38709</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">orig</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span>

<span class="gp">In [2]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">orig</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [3]: </span><span class="n">ser</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="gp">In [4]: </span><span class="n">ser2</span> <span class="o">=</span> <span class="n">orig</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [5]: </span><span class="n">ser2</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2.0</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">ser</span>
<span class="go">Out [1]:</span>
<span class="go">0    1.0</span>
<span class="go">1    NaN</span>
<span class="go">dtype: float64</span>

<span class="go">In [2]:ser2</span>
<span class="go">Out [2]:</span>
<span class="go">0    True</span>
<span class="go">1     2.0</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">ser</span>
<span class="go">Out [1]:</span>
<span class="go">0    True</span>
<span class="go">1     NaN</span>
<span class="go">dtype: object</span>

<span class="go">In [2]:ser2</span>
<span class="go">Out [2]:</span>
<span class="go">0    True</span>
<span class="go">1     2.0</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</section>
<section id="dataframegroupby-rolling-and-seriesgroupby-rolling-no-longer-return-grouped-by-column-in-values">
<span id="whatsnew-130-notable-bug-fixes-rolling-groupby-column"></span><h3>DataFrameGroupBy.rolling 和 SeriesGroupBy.rolling 不再在值中返回分组列<a class="headerlink" href="v1.3.0.html#dataframegroupby-rolling-and-seriesgroupby-rolling-no-longer-return-grouped-by-column-in-values" title="Link to this heading">#</a></h3>
<p>现在，分组列将从 <code class="docutils literal notranslate"><span class="pre">groupby.rolling</span></code> 操作的结果中删除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/32262">GH 32262</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [44]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">"B"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>

<span class="gp">In [45]: </span><span class="n">df</span>
<span class="gh">Out[45]: </span>
<span class="go">   A  B</span>
<span class="go">0  1  0</span>
<span class="go">1  1  1</span>
<span class="go">2  2  2</span>
<span class="go">3  3  3</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"A"</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[1]:</span>
<span class="go">       A    B</span>
<span class="go">A</span>
<span class="go">1 0  NaN  NaN</span>
<span class="go">1    2.0  1.0</span>
<span class="go">2 2  NaN  NaN</span>
<span class="go">3 3  NaN  NaN</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [46]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">"A"</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[46]: </span>
<span class="go">       B</span>
<span class="go">A       </span>
<span class="go">1 0  NaN</span>
<span class="go">  1  1.0</span>
<span class="go">2 2  NaN</span>
<span class="go">3 3  NaN</span>
</pre></div>
</div>
</section>
<section id="removed-artificial-truncation-in-rolling-variance-and-standard-deviation">
<span id="whatsnew-130-notable-bug-fixes-rolling-var-precision"></span><h3>移除了滚动方差和标准差中的人工截断<a class="headerlink" href="v1.3.0.html#removed-artificial-truncation-in-rolling-variance-and-standard-deviation" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.std.html#pandas.core.window.rolling.Rolling.std" title="pandas.core.window.rolling.Rolling.std"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.std()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.var.html#pandas.core.window.rolling.Rolling.var" title="pandas.core.window.rolling.Rolling.var"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.var()</span></code></a> 将不再人工截断小于 <code class="docutils literal notranslate"><span class="pre">~1e-8</span></code> 和 <code class="docutils literal notranslate"><span class="pre">~1e-15</span></code> 的结果为零 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37051">GH 37051</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40448">GH 40448</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39872">GH 39872</a>)。</p>
<p>然而，当在较大值上滚动时，结果中现在可能存在浮点数误差。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [47]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>

<span class="gp">In [48]: </span><span class="n">s</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">var</span><span class="p">()</span>
<span class="gh">Out[48]: </span>
<span class="go">0         NaN</span>
<span class="go">1         NaN</span>
<span class="go">2    1.333333</span>
<span class="go">3    0.000000</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
</section>
<section id="dataframegroupby-rolling-and-seriesgroupby-rolling-with-multiindex-no-longer-drop-levels-in-the-result">
<span id="whatsnew-130-notable-bug-fixes-rolling-groupby-multiindex"></span><h3>DataFrameGroupBy.rolling 和 SeriesGroupBy.rolling 与 MultiIndex 不再在结果中删除级别<a class="headerlink" href="v1.3.0.html#dataframegroupby-rolling-and-seriesgroupby-rolling-with-multiindex-no-longer-drop-levels-in-the-result" title="Link to this heading">#</a></h3>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.rolling()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.rolling()</span></code> 将不再删除结果中具有 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的级别。这可能导致结果 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 中级别重复的感知，但此更改恢复了 1.1.3 版本中的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38787">GH 38787</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38523">GH 38523</a>)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [49]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="s1">'idx1'</span><span class="p">,</span> <span class="s1">'idx2'</span><span class="p">)],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">'label1'</span><span class="p">,</span> <span class="s1">'label2'</span><span class="p">])</span>

<span class="gp">In [50]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'a'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">'b'</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>

<span class="gp">In [51]: </span><span class="n">df</span>
<span class="gh">Out[51]: </span>
<span class="go">               a  b</span>
<span class="go">label1 label2      </span>
<span class="go">idx1   idx2    1  2</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'label1'</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[1]:</span>
<span class="go">          a    b</span>
<span class="go">label1</span>
<span class="go">idx1    1.0  2.0</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [52]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'label1'</span><span class="p">)</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[52]: </span>
<span class="go">                        a    b</span>
<span class="go">label1 label1 label2          </span>
<span class="go">idx1   idx1   idx2    1.0  2.0</span>
</pre></div>
</div>
</section>
</section>
<section id="backwards-incompatible-api-changes">
<span id="whatsnew-130-api-breaking"></span><h2>向后不兼容的 API 更改<a class="headerlink" href="v1.3.0.html#backwards-incompatible-api-changes" title="Link to this heading">#</a></h2>
<section id="increased-minimum-versions-for-dependencies">
<span id="whatsnew-130-api-breaking-deps"></span><h3>增加了依赖项的最低版本<a class="headerlink" href="v1.3.0.html#increased-minimum-versions-for-dependencies" title="Link to this heading">#</a></h3>
<p>某些依赖项的最低支持版本已更新。如果已安装，我们现在要求</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>包</p></th>
<th class="head"><p>最低版本</p></th>
<th class="head"><p>必需</p></th>
<th class="head"><p>已更改</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>numpy</p></td>
<td><p>1.17.3</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pytz</p></td>
<td><p>2017.3</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>python-dateutil</p></td>
<td><p>2.7.3</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>bottleneck</p></td>
<td><p>1.2.1</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>numexpr</p></td>
<td><p>2.7.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pytest (dev)</p></td>
<td><p>6.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>mypy (dev)</p></td>
<td><p>0.812</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>setuptools</p></td>
<td><p>38.6.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
</tbody>
</table>
<p>对于<a class="reference external" href="../getting_started/install.html">可选库</a>，一般建议使用最新版本。下表列出了 pandas 开发过程中当前测试的每个库的最低版本。低于最低测试版本的可选库可能仍然有效，但不被视为支持。</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>包</p></th>
<th class="head"><p>最低版本</p></th>
<th class="head"><p>已更改</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>beautifulsoup4</p></td>
<td><p>4.6.0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fastparquet</p></td>
<td><p>0.4.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>fsspec</p></td>
<td><p>0.7.4</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>gcsfs</p></td>
<td><p>0.6.0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>lxml</p></td>
<td><p>4.3.0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>matplotlib</p></td>
<td><p>2.2.3</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>numba</p></td>
<td><p>0.46.0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>openpyxl</p></td>
<td><p>3.0.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pyarrow</p></td>
<td><p>0.17.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pymysql</p></td>
<td><p>0.8.1</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pytables</p></td>
<td><p>3.5.1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>s3fs</p></td>
<td><p>0.4.0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>scipy</p></td>
<td><p>1.2.0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>sqlalchemy</p></td>
<td><p>1.3.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>tabulate</p></td>
<td><p>0.8.7</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>xarray</p></td>
<td><p>0.12.0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>xlrd</p></td>
<td><p>1.2.0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>xlsxwriter</p></td>
<td><p>1.0.2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>xlwt</p></td>
<td><p>1.3.0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas-gbq</p></td>
<td><p>0.12.0</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>有关更多信息，请参阅<a class="reference internal" href="../getting_started/install.html#install-dependencies"><span class="std std-ref">依赖项</span></a>和<a class="reference internal" href="../getting_started/install.html#install-optional-dependencies"><span class="std std-ref">可选依赖项</span></a>。</p>
</section>
<section id="other-api-changes">
<span id="whatsnew-130-api-breaking-other"></span><h3>其他 API 更改<a class="headerlink" href="v1.3.0.html#other-api-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>部分初始化的 <a class="reference internal" href="../reference/api/pandas.CategoricalDtype.html#pandas.CategoricalDtype" title="pandas.CategoricalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalDtype</span></code></a> 对象（即那些 <code class="docutils literal notranslate"><span class="pre">categories=None</span></code> 的对象）将不再与完全初始化的 dtype 对象进行等值比较 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38516">GH 38516</a>)</p></li>
<li><p>现在，访问 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 上的 <code class="docutils literal notranslate"><span class="pre">_constructor_expanddim</span></code> 和 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 上的 <code class="docutils literal notranslate"><span class="pre">_constructor_sliced</span></code> 将引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>。以前会引发 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38782">GH 38782</a>)</p></li>
<li><p>向 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code></a> 添加了新的 <code class="docutils literal notranslate"><span class="pre">engine</span></code> 和 <code class="docutils literal notranslate"><span class="pre">**engine_kwargs</span></code> 参数，以支持其他未来的“SQL 引擎”。目前我们仍然只在底层使用 <code class="docutils literal notranslate"><span class="pre">SQLAlchemy</span></code>，但计划支持更多引擎，例如 <a class="reference external" href="https://turbodbc.readthedocs.io/en/latest/">turbodbc</a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/36893">GH 36893</a>)</p></li>
<li><p>从 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 字符串表示中移除了冗余的 <code class="docutils literal notranslate"><span class="pre">freq</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41653">GH 41653</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionDtype.construct_array_type()</span></code> 现在是 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 子类的一个必需方法，而不是可选方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24860">GH 24860</a>)</p></li>
<li><p>现在，对不可哈希的 pandas 对象调用 <code class="docutils literal notranslate"><span class="pre">hash</span></code> 将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>，并附带内置错误消息（例如 <code class="docutils literal notranslate"><span class="pre">unhashable</span> <span class="pre">type:</span> <span class="pre">'Series'</span></code>）。以前会引发自定义消息，例如 <code class="docutils literal notranslate"><span class="pre">'Series'</span> <span class="pre">objects</span> <span class="pre">are</span> <span class="pre">mutable,</span> <span class="pre">thus</span> <span class="pre">they</span> <span class="pre">cannot</span> <span class="pre">be</span> <span class="pre">hashed</span></code>。此外，<code class="docutils literal notranslate"><span class="pre">isinstance(&lt;Series&gt;,</span> <span class="pre">abc.collections.Hashable)</span></code> 现在将返回 <code class="docutils literal notranslate"><span class="pre">False</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40013">GH 40013</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.from_custom_template.html#pandas.io.formats.style.Styler.from_custom_template" title="pandas.io.formats.style.Styler.from_custom_template"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.from_custom_template()</span></code></a> 现在有两个新的模板名称参数，并移除了旧的 <code class="docutils literal notranslate"><span class="pre">name</span></code> 参数，因为为了更好地解析，引入了模板继承 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/42053">GH 42053</a>)。还需要对 Styler 属性进行子类化修改。</p></li>
</ul>
</section>
<section id="build">
<span id="whatsnew-130-api-breaking-build"></span><h3>构建<a class="headerlink" href="v1.3.0.html#build" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>`.pptx` 和 `.pdf` 格式的文档不再包含在 wheels 或源发行版中。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/30741">GH 30741</a>）</p></li>
</ul>
</section>
</section>
<section id="deprecations">
<span id="whatsnew-130-deprecations"></span><h2>弃用<a class="headerlink" href="v1.3.0.html#deprecations" title="Link to this heading">#</a></h2>
<section id="deprecated-dropping-nuisance-columns-in-dataframe-reductions-and-dataframegroupby-operations">
<span id="whatsnew-130-deprecations-nuisance-columns"></span><h3>弃用了 DataFrame 缩减和 DataFrameGroupBy 操作中删除无用列的行为<a class="headerlink" href="v1.3.0.html#deprecated-dropping-nuisance-columns-in-dataframe-reductions-and-dataframegroupby-operations" title="Link to this heading">#</a></h3>
<p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 上调用缩减操作（例如 <code class="docutils literal notranslate"><span class="pre">.min</span></code>、<code class="docutils literal notranslate"><span class="pre">.max</span></code>、<code class="docutils literal notranslate"><span class="pre">.sum</span></code>），当 <code class="docutils literal notranslate"><span class="pre">numeric_only=None</span></code>（默认）时，缩减操作引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的列会被静默忽略并从结果中删除。</p>
<p>此行为已被弃用。在将来的版本中，将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>，用户将需要在使用函数之前仅选择有效列。</p>
<p>例如</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [53]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">"B"</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">"2016-01-01"</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">)})</span>

<span class="gp">In [54]: </span><span class="n">df</span>
<span class="gh">Out[54]: </span>
<span class="go">   A          B</span>
<span class="go">0  1 2016-01-01</span>
<span class="go">1  2 2016-01-02</span>
<span class="go">2  3 2016-01-03</span>
<span class="go">3  4 2016-01-04</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">prod</span><span class="p">()</span>
<span class="gh">Out[3]:</span>
<span class="gh">Out[3]:</span>
<span class="go">A    24</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p><em>未来行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">prod</span><span class="p">()</span>
<span class="go">...</span>
<span class="go">TypeError: 'DatetimeArray' does not implement reduction 'prod'</span>

<span class="gp">In [5]: </span><span class="n">df</span><span class="p">[[</span><span class="s2">"A"</span><span class="p">]]</span><span class="o">.</span><span class="n">prod</span><span class="p">()</span>
<span class="gh">Out[5]:</span>
<span class="go">A    24</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>同样，当将函数应用于 <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameGroupBy</span></code> 时，函数引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的列目前会被静默忽略并从结果中删除。</p>
<p>此行为已被弃用。在将来的版本中，将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>，用户将需要在使用函数之前仅选择有效列。</p>
<p>例如</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [55]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s2">"B"</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">"2016-01-01"</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">)})</span>

<span class="gp">In [56]: </span><span class="n">gb</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">gb</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">numeric_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[4]:</span>
<span class="go">A</span>
<span class="go">1   2</span>
<span class="go">2  12</span>
</pre></div>
</div>
<p><em>未来行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">gb</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">numeric_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">...</span>
<span class="go">TypeError: datetime64 type does not support prod operations</span>

<span class="gp">In [6]: </span><span class="n">gb</span><span class="p">[[</span><span class="s2">"A"</span><span class="p">]]</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">numeric_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[6]:</span>
<span class="go">    A</span>
<span class="go">1   2</span>
<span class="go">2  12</span>
</pre></div>
</div>
</section>
<section id="other-deprecations">
<span id="whatsnew-130-deprecations-other"></span><h3>其他弃用<a class="headerlink" href="v1.3.0.html#other-deprecations" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>弃用了允许将标量传递给 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 构造函数的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38433">GH 38433</a>)</p></li>
<li><p>弃用了在不传递类列表数据的情况下构造 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38944">GH 38944</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 构造函数中允许子类特定关键字参数的行为，请直接使用特定的子类替代 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14093">GH 14093</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21311">GH 21311</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22315">GH 22315</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26974">GH 26974</a>)</p></li>
<li><p>弃用了 datetimelike（<code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code>、<code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code>、<code class="docutils literal notranslate"><span class="pre">Datetime64TZDtype</span></code>、<code class="docutils literal notranslate"><span class="pre">PeriodDtype</span></code>）的 <code class="xref py py-meth docutils literal notranslate"><span class="pre">astype()</span></code> 方法，用于转换为整数 dtypes，请改用 <code class="docutils literal notranslate"><span class="pre">values.view(...)</span></code>。此弃用在 pandas 1.4.0 中被撤销。</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.is_lexsorted()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.lexsort_depth()</span></code>，请改用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.is_monotonic_increasing()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/32259">GH 32259</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.where()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.mask.html#pandas.Series.mask" title="pandas.Series.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mask()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.mask.html#pandas.DataFrame.mask" title="pandas.DataFrame.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mask()</span></code></a> 中的关键字 <code class="docutils literal notranslate"><span class="pre">try_cast</span></code>；如果需要，请手动转换结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38836">GH 38836</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 对象与 <code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> 对象的比较。请改用 <code class="docutils literal notranslate"><span class="pre">ts</span> <span class="pre">&lt;=</span> <span class="pre">pd.Timestamp(mydate)</span></code> 或 <code class="docutils literal notranslate"><span class="pre">ts.date()</span> <span class="pre">&lt;=</span> <span class="pre">mydate</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ts</span> <span class="pre">&lt;=</span> <span class="pre">mydate</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/36131">GH 36131</a>)</p></li>
<li><p>弃用了 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Rolling.win_type</span></code> 返回 <code class="docutils literal notranslate"><span class="pre">"freq"</span></code> 的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38963">GH 38963</a>)</p></li>
<li><p>弃用了 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Rolling.is_datetimelike</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38963">GH 38963</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 索引器，用于 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__setitem__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__setitem__()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39004">GH 39004</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExponentialMovingWindow.vol()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39220">GH 39220</a>)</p></li>
<li><p>弃用了使用 <code class="docutils literal notranslate"><span class="pre">.astype</span></code> 在 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype 和 <a class="reference internal" href="../reference/api/pandas.DatetimeTZDtype.html#pandas.DatetimeTZDtype" title="pandas.DatetimeTZDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code></a> 之间进行转换；在未来版本中，这将引发错误，请改用 <code class="docutils literal notranslate"><span class="pre">obj.tz_localize</span></code> 或 <code class="docutils literal notranslate"><span class="pre">obj.dt.tz_localize</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38622">GH 38622</a>)</p></li>
<li><p>弃用了将 <code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> 对象转换为 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 的行为，当它们在 <a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.unstack()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.shift.html#pandas.DataFrame.shift" title="pandas.DataFrame.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.shift()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.shift.html#pandas.Series.shift" title="pandas.Series.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.shift()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex" title="pandas.DataFrame.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code></a> 中用作 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> 时，请改传 <code class="docutils literal notranslate"><span class="pre">pd.Timestamp(dateobj)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39767">GH 39767</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.set_na_rep()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.set_precision()</span></code>，转而使用 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.format.html#pandas.io.formats.style.Styler.format" title="pandas.io.formats.style.Styler.format"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.format()</span></code></a>，其中 <code class="docutils literal notranslate"><span class="pre">na_rep</span></code> 和 <code class="docutils literal notranslate"><span class="pre">precision</span></code> 分别作为现有和新的输入参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40134">GH 40134</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40425">GH 40425</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.where()</span></code>，转而使用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.applymap()</span></code> 的替代形式 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40821">GH 40821</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.Series.transform.html#pandas.Series.transform" title="pandas.Series.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.transform()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.transform.html#pandas.DataFrame.transform" title="pandas.DataFrame.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.transform()</span></code></a> 中允许部分失败的行为，当 <code class="docutils literal notranslate"><span class="pre">func</span></code> 为类列表或类字典且引发除 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 以外的任何异常时；在未来版本中，<code class="docutils literal notranslate"><span class="pre">func</span></code> 引发除 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 以外的任何异常都将引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40211">GH 40211</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_table()</span></code></a> 中的参数 <code class="docutils literal notranslate"><span class="pre">error_bad_lines</span></code> 和 <code class="docutils literal notranslate"><span class="pre">warn_bad_lines</span></code>，转而使用参数 <code class="docutils literal notranslate"><span class="pre">on_bad_lines</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15122">GH 15122</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数中对 <code class="docutils literal notranslate"><span class="pre">np.ma.mrecords.MaskedRecords</span></code> 的支持，请改传 <code class="docutils literal notranslate"><span class="pre">{name:</span> <span class="pre">data[name]</span> <span class="pre">for</span> <span class="pre">name</span> <span class="pre">in</span> <span class="pre">data.dtype.names}</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40363">GH 40363</a>)</p></li>
<li><p>弃用了在不同级别数量上使用 <a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge" title="pandas.DataFrame.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.merge()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34862">GH 34862</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.ExcelWriter.html#pandas.ExcelWriter" title="pandas.ExcelWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExcelWriter</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>；请改用关键字参数 <code class="docutils literal notranslate"><span class="pre">engine_kwargs</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40430">GH 40430</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 聚合中的 <code class="docutils literal notranslate"><span class="pre">level</span></code> 关键字；请改用 groupby (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39983">GH 39983</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.remove_categories()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.add_categories()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.reorder_categories()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.rename_categories()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.set_categories()</span></code> 的 <code class="docutils literal notranslate"><span class="pre">inplace</span></code> 参数，并将在未来版本中移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37643">GH 37643</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 通过 <code class="docutils literal notranslate"><span class="pre">suffixes</span></code> 关键字和已存在列产生重复列的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22818">GH 22818</a>)</p></li>
<li><p>弃用了设置 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Categorical._codes</span></code> 的行为，请改用所需代码创建新的 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40606">GH 40606</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.ExcelFile.parse.html#pandas.ExcelFile.parse" title="pandas.ExcelFile.parse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExcelFile.parse()</span></code></a> 中的可选参数 <code class="docutils literal notranslate"><span class="pre">convert_float</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41127">GH 41127</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.union()</span></code> 处理混合时区的行为；在未来版本中，两者都将转换为 UTC 而非 object dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39328">GH 39328</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中使用超出范围索引的 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 并设置 <code class="docutils literal notranslate"><span class="pre">engine="c"</span></code> 的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25623">GH 25623</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数中对第一个元素是 Categorical 的列表的特殊处理；请改传 <code class="docutils literal notranslate"><span class="pre">pd.DataFrame({col:</span> <span class="pre">categorical,</span> <span class="pre">...})</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38845">GH 38845</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数中，当传递 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 且数据无法转换为该 dtype 时的行为。在未来的版本中，这将引发错误而不是被静默忽略 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24435">GH 24435</a>)</p></li>
<li><p>弃用了 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Timestamp.freq</span></code> 属性。对于使用它的属性（<code class="docutils literal notranslate"><span class="pre">is_month_start</span></code>、<code class="docutils literal notranslate"><span class="pre">is_month_end</span></code>、<code class="docutils literal notranslate"><span class="pre">is_quarter_start</span></code>、<code class="docutils literal notranslate"><span class="pre">is_quarter_end</span></code>、<code class="docutils literal notranslate"><span class="pre">is_year_start</span></code>、<code class="docutils literal notranslate"><span class="pre">is_year_end</span></code>），当你有 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 时，请使用例如 <code class="docutils literal notranslate"><span class="pre">freq.is_month_start(ts)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15146">GH 15146</a>)</p></li>
<li><p>弃用了使用 <a class="reference internal" href="../reference/api/pandas.DatetimeTZDtype.html#pandas.DatetimeTZDtype" title="pandas.DatetimeTZDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code></a> 数据和 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype 构造 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的行为。请改用 <code class="docutils literal notranslate"><span class="pre">Series(data).dt.tz_localize(None)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41555">GH 41555</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33401">GH 33401</a>)</p></li>
<li><p>弃用了使用大整数值和小整数 dtype 构造 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时静默溢出的行为；请改用 <code class="docutils literal notranslate"><span class="pre">Series(data).astype(dtype)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41734">GH 41734</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数中浮点数据转换为整数 dtype 的行为，即使有损失；在未来版本中，这将保持浮点类型，与 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的行为一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41770">GH 41770</a>)</p></li>
<li><p>弃用了在传递包含字符串的数据且未传递 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 时，<a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 构造函数中推断 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code>、<code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> 或 <code class="docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code> dtypes 的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33558">GH 33558</a>)</p></li>
<li><p>在未来的版本中，使用 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> 数据和 <code class="docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code> 构造 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 将把数据视为本地时间而不是 UTC 时间（与 DatetimeIndex 行为一致）。要将数据视为 UTC 时间，请使用 <code class="docutils literal notranslate"><span class="pre">pd.Series(data).dt.tz_localize("UTC").dt.tz_convert(dtype.tz)</span></code> 或 <code class="docutils literal notranslate"><span class="pre">pd.Series(data.view("int64"),</span> <span class="pre">dtype=dtype)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33401">GH 33401</a>)</p></li>
<li><p>弃用了将列表作为 <code class="docutils literal notranslate"><span class="pre">key</span></code> 传递给 <a class="reference internal" href="../reference/api/pandas.DataFrame.xs.html#pandas.DataFrame.xs" title="pandas.DataFrame.xs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.xs()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.xs.html#pandas.Series.xs" title="pandas.Series.xs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.xs()</span></code></a> 的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41760">GH 41760</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.Series.between.html#pandas.Series.between" title="pandas.Series.between"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.between()</span></code></a> 的布尔参数 <code class="docutils literal notranslate"><span class="pre">inclusive</span></code>，将其标准参数值改为 <code class="docutils literal notranslate"><span class="pre">{"left",</span> <span class="pre">"right",</span> <span class="pre">"neither",</span> <span class="pre">"both"}</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40628">GH 40628</a>)</p></li>
<li><p>弃用了以下所有函数的位置参数传递（注明例外）(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41485">GH 41485</a>)</p>
<ul>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a>（除 <code class="docutils literal notranslate"><span class="pre">objs</span></code> 外）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a>（除 <code class="docutils literal notranslate"><span class="pre">filepath_or_buffer</span></code> 外）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code></a>（除 <code class="docutils literal notranslate"><span class="pre">filepath_or_buffer</span></code> 外）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.clip.html#pandas.DataFrame.clip" title="pandas.DataFrame.clip"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.clip()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.clip.html#pandas.Series.clip" title="pandas.Series.clip"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.clip()</span></code></a>（除 <code class="docutils literal notranslate"><span class="pre">upper</span></code> 和 <code class="docutils literal notranslate"><span class="pre">lower</span></code> 外）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.drop_duplicates.html#pandas.DataFrame.drop_duplicates" title="pandas.DataFrame.drop_duplicates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.drop_duplicates()</span></code></a>（<code class="docutils literal notranslate"><span class="pre">subset</span></code> 除外）、<a class="reference internal" href="../reference/api/pandas.Series.drop_duplicates.html#pandas.Series.drop_duplicates" title="pandas.Series.drop_duplicates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.drop_duplicates()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Index.drop_duplicates.html#pandas.Index.drop_duplicates" title="pandas.Index.drop_duplicates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.drop_duplicates()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.drop_duplicates()</span></code></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.drop.html#pandas.DataFrame.drop" title="pandas.DataFrame.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.drop()</span></code></a>（除 <code class="docutils literal notranslate"><span class="pre">labels</span></code> 外）和 <a class="reference internal" href="../reference/api/pandas.Series.drop.html#pandas.Series.drop" title="pandas.Series.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.drop()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.dropna.html#pandas.DataFrame.dropna" title="pandas.DataFrame.dropna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.dropna()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.dropna.html#pandas.Series.dropna" title="pandas.Series.dropna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.dropna()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.ffill.html#pandas.DataFrame.ffill" title="pandas.DataFrame.ffill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.ffill()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.ffill.html#pandas.Series.ffill" title="pandas.Series.ffill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.ffill()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.bfill.html#pandas.DataFrame.bfill" title="pandas.DataFrame.bfill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.bfill()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.bfill.html#pandas.Series.bfill" title="pandas.Series.bfill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.bfill()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a>（<code class="docutils literal notranslate"><span class="pre">value</span></code> 除外）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.interpolate.html#pandas.Series.interpolate" title="pandas.Series.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.interpolate()</span></code></a>（除 <code class="docutils literal notranslate"><span class="pre">method</span></code> 外）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.mask.html#pandas.DataFrame.mask" title="pandas.DataFrame.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mask()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.mask.html#pandas.Series.mask" title="pandas.Series.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mask()</span></code></a>（除 <code class="docutils literal notranslate"><span class="pre">cond</span></code> 和 <code class="docutils literal notranslate"><span class="pre">other</span></code> 外）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.reset_index.html#pandas.DataFrame.reset_index" title="pandas.DataFrame.reset_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reset_index()</span></code></a>（除 <code class="docutils literal notranslate"><span class="pre">level</span></code> 外）和 <a class="reference internal" href="../reference/api/pandas.Series.reset_index.html#pandas.Series.reset_index" title="pandas.Series.reset_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.reset_index()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.set_axis.html#pandas.DataFrame.set_axis" title="pandas.DataFrame.set_axis"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.set_axis()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.set_axis.html#pandas.Series.set_axis" title="pandas.Series.set_axis"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.set_axis()</span></code></a>（除 <code class="docutils literal notranslate"><span class="pre">labels</span></code> 外）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.set_index.html#pandas.DataFrame.set_index" title="pandas.DataFrame.set_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.set_index()</span></code></a>（除 <code class="docutils literal notranslate"><span class="pre">keys</span></code> 外）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.sort_index.html#pandas.DataFrame.sort_index" title="pandas.DataFrame.sort_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sort_index()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.sort_index.html#pandas.Series.sort_index" title="pandas.Series.sort_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.sort_index()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values" title="pandas.DataFrame.sort_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sort_values()</span></code></a>（除 <code class="docutils literal notranslate"><span class="pre">by</span></code> 外）和 <a class="reference internal" href="../reference/api/pandas.Series.sort_values.html#pandas.Series.sort_values" title="pandas.Series.sort_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.sort_values()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.where()</span></code></a>（除 <code class="docutils literal notranslate"><span class="pre">cond</span></code> 和 <code class="docutils literal notranslate"><span class="pre">other</span></code> 外）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.set_names.html#pandas.Index.set_names" title="pandas.Index.set_names"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.set_names()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.set_names()</span></code>（<code class="docutils literal notranslate"><span class="pre">names</span></code> 除外）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.codes.html#pandas.MultiIndex.codes" title="pandas.MultiIndex.codes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.codes()</span></code></a>（`codes` 除外）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.set_levels.html#pandas.MultiIndex.set_levels" title="pandas.MultiIndex.set_levels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.set_levels()</span></code></a>（`levels` 除外）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.interpolate()</span></code>（`method` 除外）</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="performance-improvements">
<span id="whatsnew-130-performance"></span><h2>性能改进<a class="headerlink" href="v1.3.0.html#performance-improvements" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.isin()</span></code> 的性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38353">GH 38353</a>）</p></li>
<li><p>针对可空数据类型的 <a class="reference internal" href="../reference/api/pandas.Series.mean.html#pandas.Series.mean" title="pandas.Series.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mean()</span></code></a> 性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34814">GH 34814</a>）</p></li>
<li><p>针对可空数据类型的 <a class="reference internal" href="../reference/api/pandas.Series.isin.html#pandas.Series.isin" title="pandas.Series.isin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.isin()</span></code></a> 性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38340">GH 38340</a>）</p></li>
<li><p>针对可空浮点和可空整数 dtype，<a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a> 使用 `method="pad"` 或 `method="backfill"` 时的性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39953">GH 39953</a>）</p></li>
<li><p>针对 `method=kendall` 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.corr.html#pandas.DataFrame.corr" title="pandas.DataFrame.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corr()</span></code></a> 性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/28329">GH 28329</a>）</p></li>
<li><p>针对 `method=spearman` 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.corr.html#pandas.DataFrame.corr" title="pandas.DataFrame.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corr()</span></code></a> 性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40956">GH 40956</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41885">GH 41885</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.corr.html#pandas.core.window.rolling.Rolling.corr" title="pandas.core.window.rolling.Rolling.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.corr()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.cov.html#pandas.core.window.rolling.Rolling.cov" title="pandas.core.window.rolling.Rolling.cov"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.cov()</span></code></a> 的性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39388">GH 39388</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">RollingGroupby.corr()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpandingGroupby.corr()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpandingGroupby.corr()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpandingGroupby.cov()</span></code> 的性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39591">GH 39591</a>）</p></li>
<li><p>针对对象数据类型的 <a class="reference internal" href="../reference/api/pandas.unique.html#pandas.unique" title="pandas.unique"><code class="xref py py-func docutils literal notranslate"><span class="pre">unique()</span></code></a> 性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37615">GH 37615</a>）</p></li>
<li><p>针对基本情况（包括分隔符）的 <a class="reference internal" href="../reference/api/pandas.json_normalize.html#pandas.json_normalize" title="pandas.json_normalize"><code class="xref py py-func docutils literal notranslate"><span class="pre">json_normalize()</span></code></a> 性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40035">GH 40035</a> <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15621">GH 15621</a>）</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpandingGroupby</span></code> 聚合方法的性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39664">GH 39664</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> 的性能改进，其渲染时间减少了 50% 以上，现在与 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 匹配（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39972">GH 39972</a> <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39952">GH 39952</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40425">GH 40425</a>）</p></li>
<li><p>方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.set_td_classes.html#pandas.io.formats.style.Styler.set_td_classes" title="pandas.io.formats.style.Styler.set_td_classes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.set_td_classes()</span></code></a> 现在与 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.apply.html#pandas.io.formats.style.Styler.apply" title="pandas.io.formats.style.Styler.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.apply()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.applymap()</span></code> 的性能相当，在某些情况下甚至更好（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40453">GH 40453</a>）</p></li>
<li><p>带 `times` 参数的 <a class="reference internal" href="../reference/api/pandas.core.window.ewm.ExponentialMovingWindow.mean.html#pandas.core.window.ewm.ExponentialMovingWindow.mean" title="pandas.core.window.ewm.ExponentialMovingWindow.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExponentialMovingWindow.mean()</span></code></a> 性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39784">GH 39784</a>）</p></li>
<li><p>当需要 Python 回退实现时，<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.apply.html#pandas.core.groupby.DataFrameGroupBy.apply" title="pandas.core.groupby.DataFrameGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.apply()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.apply.html#pandas.core.groupby.SeriesGroupBy.apply" title="pandas.core.groupby.SeriesGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.apply()</span></code></a> 的性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40176">GH 40176</a>）</p></li>
<li><p>将 PyArrow 布尔数组转换为 pandas 可空布尔数组的性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41051">GH 41051</a>）</p></li>
<li><p>`CategoricalDtype` 类型数据拼接的性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40193">GH 40193</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummin.html#pandas.core.groupby.DataFrameGroupBy.cummin" title="pandas.core.groupby.DataFrameGroupBy.cummin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummin()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cummin.html#pandas.core.groupby.SeriesGroupBy.cummin" title="pandas.core.groupby.SeriesGroupBy.cummin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cummin()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummax.html#pandas.core.groupby.DataFrameGroupBy.cummax" title="pandas.core.groupby.DataFrameGroupBy.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummax()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cummax.html#pandas.core.groupby.SeriesGroupBy.cummax" title="pandas.core.groupby.SeriesGroupBy.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cummax()</span></code></a> 中可空数据类型的性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37493">GH 37493</a>）</p></li>
<li><p>含 nan 值的 <a class="reference internal" href="../reference/api/pandas.Series.nunique.html#pandas.Series.nunique" title="pandas.Series.nunique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.nunique()</span></code></a> 性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40865">GH 40865</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.transpose.html#pandas.DataFrame.transpose" title="pandas.DataFrame.transpose"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.transpose()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.unstack.html#pandas.Series.unstack" title="pandas.Series.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.unstack()</span></code></a> 中 `DatetimeTZDtype` 的性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40149">GH 40149</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.plot.html#pandas.Series.plot" title="pandas.Series.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.plot()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a> 中使用入口点延迟加载的性能改进（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41492">GH 41492</a>）</p></li>
</ul>
</section>
<section id="bug-fixes">
<span id="whatsnew-130-bug-fixes"></span><h2>Bug 修复<a class="headerlink" href="v1.3.0.html#bug-fixes" title="Link to this heading">#</a></h2>
<section id="categorical">
<h3>分类<a class="headerlink" href="v1.3.0.html#categorical" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 的 Bug，当传递标量数据时错误地未引发 `TypeError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38614">GH 38614</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CategoricalIndex.reindex</span></code> 的 Bug，当传入的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 不是分类类型但其值都是类别中的标签时，操作失败（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/28690">GH 28690</a>）</p></li>
<li><p>从 `date` 对象的 object-dtype 数组构造 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 时，未能正确地与 `astype` 进行往返转换的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38552">GH 38552</a>）</p></li>
<li><p>从 `ndarray` 和 <a class="reference internal" href="../reference/api/pandas.CategoricalDtype.html#pandas.CategoricalDtype" title="pandas.CategoricalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalDtype</span></code></a> 构造 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38857">GH 38857</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中将分类值设置到 object-dtype 列的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39136">GH 39136</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex" title="pandas.DataFrame.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code></a> 的 Bug，当新索引包含重复项且旧索引为 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 时，引发 `IndexError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38906">GH 38906</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.fillna()</span></code> 的 Bug，当使用非类别元组进行填充时，对于元组类别的处理，错误地引发 `NotImplementedError` 而非 `ValueError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41914">GH 41914</a>）</p></li>
</ul>
</section>
<section id="datetimelike">
<h3>日期时间类<a class="headerlink" href="v1.3.0.html#datetimelike" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 构造函数的 Bug，有时会从 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a>（或 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a>）`data` 中丢弃纳秒，当 `dtype=datetime64[ns]`（或 `timedelta64[ns]`）时（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38032">GH 38032</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.first.html#pandas.DataFrame.first" title="pandas.DataFrame.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.first()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.first.html#pandas.Series.first" title="pandas.Series.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.first()</span></code></a> 的 Bug，当第一个日期是某月的最后一天时，带有一个月偏移量会返回不正确的结果（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/29623">GH 29623</a>）</p></li>
<li><p>构造 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时，`datetime64` 数据与 `timedelta64` dtype 不匹配，或反之亦然，未能引发 `TypeError` 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38575">GH 38575</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38764">GH 38764</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38792">GH 38792</a>）</p></li>
<li><p>构造 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时，`datetime` 对象超出 `datetime64[ns]` dtype 范围，或 `timedelta` 对象超出 `timedelta64[ns]` dtype 范围的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38792">GH 38792</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38965">GH 38965</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.intersection()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.symmetric_difference()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.intersection()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.symmetric_difference()</span></code> 的 Bug，在与 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 操作时总是返回 object-dtype（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38741">GH 38741</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.intersection()</span></code> 的 Bug，当 `n != 1` 时，使用非 Tick 频率会给出不正确的结果（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/42104">GH 42104</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.where()</span></code></a> 的 Bug，错误地将 `datetime64` 值转换为 `int64`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37682">GH 37682</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 的 Bug，错误地将 `datetime` 对象类型转换为 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38878">GH 38878</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 对象与纳秒 `datetime64` 对象之间，当后者刚好超出实现边界时比较的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39221">GH 39221</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Timestamp.round.html#pandas.Timestamp.round" title="pandas.Timestamp.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.round()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Timestamp.floor.html#pandas.Timestamp.floor" title="pandas.Timestamp.floor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.floor()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Timestamp.ceil.html#pandas.Timestamp.ceil" title="pandas.Timestamp.ceil"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.ceil()</span></code></a> 中，当值接近 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 的实现边界时的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39244">GH 39244</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Timedelta.round.html#pandas.Timedelta.round" title="pandas.Timedelta.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timedelta.round()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Timedelta.floor.html#pandas.Timedelta.floor" title="pandas.Timedelta.floor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timedelta.floor()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Timedelta.ceil.html#pandas.Timedelta.ceil" title="pandas.Timedelta.ceil"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timedelta.ceil()</span></code></a> 中，当值接近 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 的实现边界时的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38964">GH 38964</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> 的 Bug，在极端情况下错误地创建包含 `NaT` 的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a>，而不是引发 `OutOfBoundsDatetime`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24124">GH 24124</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.infer_freq.html#pandas.infer_freq" title="pandas.infer_freq"><code class="xref py py-func docutils literal notranslate"><span class="pre">infer_freq()</span></code></a> 的 Bug，如果 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 具有时区并跨越夏令时边界，则错误地无法推断出 'H' 频率（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39556">GH 39556</a>）</p></li>
<li><p>由 <code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeArray</span></code> 或 <code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaArray</span></code> 支持的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的 Bug，有时未能将数组的 `freq` 设置为 `None`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41425">GH 41425</a>）</p></li>
</ul>
</section>
<section id="timedelta">
<h3>时间差<a class="headerlink" href="v1.3.0.html#timedelta" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>从 `np.timedelta64` 对象构造 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 的 Bug，其中非纳秒单位超出 `timedelta64[ns]` 的范围（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38965">GH 38965</a>）</p></li>
<li><p>构造 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 时错误地接受 `np.datetime64("NaT")` 对象的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39462">GH 39462</a>）</p></li>
<li><p>从仅包含符号而无数字的输入字符串构造 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 时未能引发错误的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39710">GH 39710</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_timedelta()</span></code></a> 的 Bug，当传入的非纳秒 `timedelta64` 数组在转换为 `timedelta64[ns]` 时溢出，却未能引发错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40008">GH 40008</a>）</p></li>
</ul>
</section>
<section id="timezones">
<h3>时区<a class="headerlink" href="v1.3.0.html#timezones" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>不同的表示 UTC 的 `tzinfo` 对象未被视为等效的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39216">GH 39216</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dateutil.tz.gettz("UTC")</span></code> 未被识别为与表示 UTC 的其他 tzinfo 等效的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39276">GH 39276</a>）</p></li>
</ul>
</section>
<section id="numeric">
<h3>数值<a class="headerlink" href="v1.3.0.html#numeric" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.quantile.html#pandas.DataFrame.quantile" title="pandas.DataFrame.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.quantile()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values" title="pandas.DataFrame.sort_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sort_values()</span></code></a> 导致后续索引行为不正确的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38351">GH 38351</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values" title="pandas.DataFrame.sort_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sort_values()</span></code></a> 的 Bug，对于空的 `by` 参数会引发 `IndexError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40258">GH 40258</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.select_dtypes.html#pandas.DataFrame.select_dtypes" title="pandas.DataFrame.select_dtypes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.select_dtypes()</span></code></a> 的 Bug，当 `include=np.number` 时会丢弃数值 `ExtensionDtype` 列（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35340">GH 35340</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.mode.html#pandas.DataFrame.mode" title="pandas.DataFrame.mode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mode()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.mode.html#pandas.Series.mode" title="pandas.Series.mode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mode()</span></code></a> 的 Bug，对于空输入未能保持一致的整数 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33321">GH 33321</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.rank.html#pandas.DataFrame.rank" title="pandas.DataFrame.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rank()</span></code></a> 的 Bug，当 DataFrame 包含 `np.inf` 时（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/32593">GH 32593</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.rank.html#pandas.DataFrame.rank" title="pandas.DataFrame.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rank()</span></code></a> 的 Bug，当 `axis=0` 且列包含不可比较类型时引发 `IndexError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38932">GH 38932</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.rank.html#pandas.Series.rank" title="pandas.Series.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rank()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.rank.html#pandas.DataFrame.rank" title="pandas.DataFrame.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rank()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.rank.html#pandas.core.groupby.DataFrameGroupBy.rank" title="pandas.core.groupby.DataFrameGroupBy.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.rank()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.rank.html#pandas.core.groupby.SeriesGroupBy.rank" title="pandas.core.groupby.SeriesGroupBy.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.rank()</span></code></a> 的 Bug，将最负的 `int64` 值视为缺失值（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/32859">GH 32859</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.select_dtypes.html#pandas.DataFrame.select_dtypes" title="pandas.DataFrame.select_dtypes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.select_dtypes()</span></code></a> 的 Bug，在 Windows 和 Linux 之间，当 `include="int"` 时行为不同（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/36596">GH 36596</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.agg.html#pandas.DataFrame.agg" title="pandas.DataFrame.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.agg()</span></code></a> 的 Bug，当传入参数 `func="size"` 时，会对整个 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 进行操作，而不是针对行或列（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39934">GH 39934</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.transform.html#pandas.DataFrame.transform" title="pandas.DataFrame.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.transform()</span></code></a> 的 Bug，当传入字典且列缺失时会引发 `SpecificationError`；现在将改为引发 `KeyError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40004">GH 40004</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.rank.html#pandas.core.groupby.DataFrameGroupBy.rank" title="pandas.core.groupby.DataFrameGroupBy.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.rank()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.rank.html#pandas.core.groupby.SeriesGroupBy.rank" title="pandas.core.groupby.SeriesGroupBy.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.rank()</span></code></a> 的 Bug，当 `pct=True` 且连续组之间存在相等值时，给出不正确的结果（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40518">GH 40518</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.count.html#pandas.Series.count" title="pandas.Series.count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.count()</span></code></a> 的 Bug，在 32 位平台上，当参数 `level=None` 时，结果会是 `int32` 类型（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40908">GH 40908</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的 Bug，当使用 `any` 和 `all` 方法进行缩减时，对于对象数据未返回布尔结果（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12863">GH 12863</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35450">GH 35450</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27709">GH 27709</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.clip.html#pandas.Series.clip" title="pandas.Series.clip"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.clip()</span></code></a> 的 Bug，如果 Series 包含 NA 值且数据类型为可空整数或浮点数，则会失败（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40851">GH 40851</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">UInt64Index.where()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">UInt64Index.putmask()</span></code> 的 Bug，当 `other` 参数是 `np.int64` dtype 时，错误地引发 `TypeError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41974">GH 41974</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.agg.html#pandas.DataFrame.agg" title="pandas.DataFrame.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.agg()</span></code></a> 的 Bug，当一个或多个聚合函数未能产生结果时，聚合轴未按照提供的聚合函数顺序排序（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33634">GH 33634</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.clip.html#pandas.DataFrame.clip" title="pandas.DataFrame.clip"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.clip()</span></code></a> 的 Bug，未将缺失值解释为无阈值（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40420">GH 40420</a>）</p></li>
</ul>
</section>
<section id="conversion">
<h3>转换<a class="headerlink" href="v1.3.0.html#conversion" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Series.to_dict.html#pandas.Series.to_dict" title="pandas.Series.to_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_dict()</span></code></a> 的 Bug，当 `orient='records'` 时，现在返回 Python 原生类型（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25969">GH 25969</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.view.html#pandas.Series.view" title="pandas.Series.view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.view()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.view.html#pandas.Index.view" title="pandas.Index.view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.view()</span></code></a> 的 Bug，在日期时间类（`datetime64[ns]`、`datetime64[ns, tz]`、`timedelta64`、`period`）dtypes 之间进行转换时（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39788">GH 39788</a>）</p></li>
<li><p>从空的 `np.recarray` 创建 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时，未能保留原始 dtypes 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40121">GH 40121</a>）</p></li>
<li><p>从 `frozenset` 构造 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时，未能引发 `TypeError` 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40163">GH 40163</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 构造中，当数据无法转换为传入的 `dtype` 时，默默地忽略该 `dtype` 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21311">GH 21311</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">StringArray.astype()</span></code> 的 Bug，在转换为 `dtype='categorical'` 时，回退到 NumPy 并引发错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40450">GH 40450</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a> 的 Bug，当给定一个数值 NumPy dtype 低于 int64、uint64 和 float64 的数组时，唯一值未能保留其原始 dtype（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41132">GH 41132</a>）</p></li>
<li><p>用包含具有 `ExtensionDtype` 的类数组和 `copy=True` 的字典构造 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时，未能创建副本的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38939">GH 38939</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.qcut.html#pandas.qcut" title="pandas.qcut"><code class="xref py py-meth docutils literal notranslate"><span class="pre">qcut()</span></code></a> 的 Bug，当以 `Float64DType` 作为输入时引发错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40730">GH 40730</a>）</p></li>
<li><p>构造 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时，`datetime64[ns]` 数据和 `dtype=object` 导致结果为 `datetime` 对象而非 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 对象的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41599">GH 41599</a>）</p></li>
<li><p>构造 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时，`timedelta64[ns]` 数据和 `dtype=object` 导致结果为 `np.timedelta64` 对象而非 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 对象的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41599">GH 41599</a>）</p></li>
<li><p>构造 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时，当给定一个包含 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 对象的二维 object-dtype `np.ndarray` 时，未能分别转换为 <a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.IntervalDtype.html#pandas.IntervalDtype" title="pandas.IntervalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalDtype</span></code></a> 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41812">GH 41812</a>）</p></li>
<li><p>从列表和 <code class="xref py py-class docutils literal notranslate"><span class="pre">PandasDtype</span></code> 构造 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39357">GH 39357</a>）</p></li>
<li><p>从不符合 `int64` dtype 范围的 `range` 对象创建 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/30173">GH 30173</a>）</p></li>
<li><p>从具有全元组键和需要重新索引的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 的 `dict` 创建 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41707">GH 41707</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.api.types.infer_dtype.html#pandas.api.types.infer_dtype" title="pandas.api.types.infer_dtype"><code class="xref py py-func docutils literal notranslate"><span class="pre">infer_dtype()</span></code></a> 的 Bug，未能识别带有 Period dtype 的 Series、Index 或数组（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23553">GH 23553</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.api.types.infer_dtype.html#pandas.api.types.infer_dtype" title="pandas.api.types.infer_dtype"><code class="xref py py-func docutils literal notranslate"><span class="pre">infer_dtype()</span></code></a> 的 Bug，对于一般的 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code></a> 对象会引发错误。现在将返回 `"unknown-array"` 而非引发错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37367">GH 37367</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.convert_dtypes.html#pandas.DataFrame.convert_dtypes" title="pandas.DataFrame.convert_dtypes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.convert_dtypes()</span></code></a> 的 Bug，在空 DataFrame 上调用时错误地引发了 `ValueError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40393">GH 40393</a>）</p></li>
</ul>
</section>
<section id="strings">
<h3>字符串<a class="headerlink" href="v1.3.0.html#strings" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>将 `pyarrow.ChunkedArray` 转换为 <a class="reference internal" href="../reference/api/pandas.arrays.StringArray.html#pandas.arrays.StringArray" title="pandas.arrays.StringArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringArray</span></code></a> 的 Bug，当原始数组有零个块时（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41040">GH 41040</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.replace.html#pandas.Series.replace" title="pandas.Series.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.replace()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.replace.html#pandas.DataFrame.replace" title="pandas.DataFrame.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code></a> 的 Bug，对于 `StringDType` 数据，当 `regex=True` 时忽略替换（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41333">GH 41333</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35977">GH 35977</a>）</p></li>
<li><p>使用 <a class="reference internal" href="../reference/api/pandas.arrays.StringArray.html#pandas.arrays.StringArray" title="pandas.arrays.StringArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringArray</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.Series.str.extract.html#pandas.Series.str.extract" title="pandas.Series.str.extract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.extract()</span></code></a> 的 Bug，对于空的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 返回 object dtype（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41441">GH 41441</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.replace.html#pandas.Series.str.replace" title="pandas.Series.str.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.replace()</span></code></a> 的 Bug，当 `regex=False` 时 `case` 参数被忽略（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41602">GH 41602</a>）</p></li>
</ul>
</section>
<section id="interval">
<h3>区间<a class="headerlink" href="v1.3.0.html#interval" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.intersection()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.symmetric_difference()</span></code> 的 Bug，在与 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 操作时总是返回 object-dtype（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38653">GH 38653</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38741">GH 38741</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.intersection()</span></code> 的 Bug，当至少一个 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 对象包含在另一个中存在的重复项时，返回重复项（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38743">GH 38743</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.union()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.intersection()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.difference()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.symmetric_difference()</span></code> 现在，当与另一个具有不兼容 dtype 的 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 操作时，会转换为适当的 dtype 而不是引发 `TypeError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39267">GH 39267</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.union()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.intersection()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.symmetric_difference()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.difference()</span></code> 现在，当与另一个具有不兼容 dtype 的 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 操作时，会转换为 object dtype 而不是引发 `IncompatibleFrequency`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39306">GH 39306</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.is_monotonic()</span></code>, <a class="reference internal" href="../reference/api/pandas.IntervalIndex.get_loc.html#pandas.IntervalIndex.get_loc" title="pandas.IntervalIndex.get_loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.get_loc()</span></code></a>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.get_indexer_for()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.__contains__()</span></code> 的 Bug，当存在 NA 值时（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41831">GH 41831</a>）</p></li>
</ul>
</section>
<section id="indexing">
<h3>索引<a class="headerlink" href="v1.3.0.html#indexing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Index.union.html#pandas.Index.union" title="pandas.Index.union"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.union()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.union()</span></code> 的 Bug，当 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 不是单调的或 `sort` 设置为 `False` 时，会丢弃重复的 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 值（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/36289">GH 36289</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/31326">GH 31326</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40862">GH 40862</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex.get_indexer()</span></code> 的 Bug，在非唯一时未能引发 `InvalidIndexError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38372">GH 38372</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.get_indexer.html#pandas.IntervalIndex.get_indexer" title="pandas.IntervalIndex.get_indexer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.get_indexer()</span></code></a> 的 Bug，当 `target` 具有 `CategoricalDtype` 且索引和目标都包含 NA 值时（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41934">GH 41934</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.loc.html#pandas.Series.loc" title="pandas.Series.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.loc()</span></code></a> 的 Bug，当输入使用布尔列表过滤且要设置的值是低维列表时，引发 `ValueError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20438">GH 20438</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中插入许多新列导致后续索引行为不正确的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38380">GH 38380</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__setitem__()</span></code> 的 Bug，当为重复列设置多个值时引发 `ValueError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15695">GH 15695</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.loc.html#pandas.Series.loc" title="pandas.Series.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.loc()</span></code></a>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__getitem__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__getitem__()</span></code> 的 Bug，对于字符串切片，当 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 非单调时返回不正确的元素（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33146">GH 33146</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex" title="pandas.DataFrame.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.reindex.html#pandas.Series.reindex" title="pandas.Series.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.reindex()</span></code></a> 的 Bug，带时区感知索引时，当 `method="ffill"` 和 `method="bfill"` 且指定 `tolerance` 时引发 `TypeError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38566">GH 38566</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex" title="pandas.DataFrame.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code></a> 的 Bug，当 `datetime64[ns]` 或 `timedelta64[ns]` 的 `fill_value` 需要转换为 object dtype 时，错误地转换为整数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39755">GH 39755</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__setitem__()</span></code> 的 Bug，当使用指定列和非空 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 值设置空 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时引发 `ValueError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38831">GH 38831</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc.__setitem__()</span></code> 的 Bug，当 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 存在重复列时，对唯一列进行操作会引发 `ValueError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38521">GH 38521</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iloc.__setitem__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc.__setitem__()</span></code> 的 Bug，当使用字典值进行设置时，对于混合 dtypes 的处理（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38335">GH 38335</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.loc.__setitem__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc.__setitem__()</span></code> 的 Bug，当提供布尔生成器时引发 `KeyError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39614">GH 39614</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.iloc.html#pandas.Series.iloc" title="pandas.Series.iloc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.iloc()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.iloc.html#pandas.DataFrame.iloc" title="pandas.DataFrame.iloc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iloc()</span></code></a> 的 Bug，当提供生成器时引发 `KeyError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39614">GH 39614</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__setitem__()</span></code> 的 Bug，当右侧是一个列数错误的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时，未引发 `ValueError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38604">GH 38604</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__setitem__()</span></code> 的 Bug，当使用标量索引器设置 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时引发 `ValueError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38303">GH 38303</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 的 Bug，当作为输入的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 只有一行时，会丢弃 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 的级别（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10521">GH 10521</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__getitem__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__getitem__()</span></code> 的 Bug，当使用具有毫秒的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 的现有字符串进行切片时，总是引发 `KeyError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33589">GH 33589</a>）</p></li>
<li><p>在数值 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中设置 `timedelta64` 或 `datetime64` 值时，未能转换为 object dtype 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39086">GH 39086</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39619">GH 39619</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中设置 <a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 值时，当 <a class="reference internal" href="../reference/api/pandas.IntervalDtype.html#pandas.IntervalDtype" title="pandas.IntervalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalDtype</span></code></a> 不匹配时，错误地将新值转换为现有 dtype 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39120">GH 39120</a>）</p></li>
<li><p>在具有整数 dtype 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中设置 `datetime64` 值时，错误地将 `datetime64` 值转换为整数的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39266">GH 39266</a>）</p></li>
<li><p>在具有 <code class="xref py py-class docutils literal notranslate"><span class="pre">Datetime64TZDtype</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中设置 `np.datetime64("NaT")` 时，错误地将无时区的值视为有时区的值的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39769">GH 39769</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.get_loc.html#pandas.Index.get_loc" title="pandas.Index.get_loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.get_loc()</span></code></a> 的 Bug，当 `key=NaN` 且指定 `method` 但 `NaN` 不在 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 中时，未引发 `KeyError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39382">GH 39382</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.insert()</span></code> 的 Bug，将 `np.datetime64("NaT")` 插入到时区感知索引时，错误地将无时区的值视为有时区的值（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39769">GH 39769</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Index.insert.html#pandas.Index.insert" title="pandas.Index.insert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.insert()</span></code></a> 中，当设置的新列无法保留在现有 `frame.columns` 中时，或在 <a class="reference internal" href="../reference/api/pandas.Series.reset_index.html#pandas.Series.reset_index" title="pandas.Series.reset_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.reset_index()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.reset_index.html#pandas.DataFrame.reset_index" title="pandas.DataFrame.reset_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reset_index()</span></code></a> 中，错误地引发错误，而不是转换为兼容的 dtype 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39068">GH 39068</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">RangeIndex.append()</span></code> 的 Bug，其中长度为 1 的单个对象被错误地连接（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39401">GH 39401</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">RangeIndex.astype()</span></code> 的 Bug，当转换为 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 时，类别变成了 <code class="xref py py-class docutils literal notranslate"><span class="pre">Int64Index</span></code> 而非 <a class="reference internal" href="../reference/api/pandas.RangeIndex.html#pandas.RangeIndex" title="pandas.RangeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeIndex</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41263">GH 41263</a>）</p></li>
<li><p>使用布尔索引器将 `numpy.timedelta64` 值设置到 object-dtype <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39488">GH 39488</a>）</p></li>
<li><p>使用 `at` 或 `iat` 将数值设置到布尔 dtype <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时，未能转换为 object-dtype 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39582">GH 39582</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__setitem__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iloc.__setitem__()</span></code> 的 Bug，当尝试使用行切片进行索引并将列表设置为值时引发 `ValueError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40440">GH 40440</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 的 Bug，当在 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 中未找到键且级别未完全指定时，未引发 `KeyError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41170">GH 41170</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc.__setitem__()</span></code> 的 Bug，在扩展设置时，当扩展轴中的索引包含重复项时，错误地引发错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40096">GH 40096</a>）</p></li>
<li><p>带有 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 的 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc.__getitem__()</span></code> 的 Bug，当至少一个索引列具有 float dtype 且我们检索标量时转换为浮点数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41369">GH 41369</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 的 Bug，错误地匹配非布尔索引元素（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20432">GH 20432</a>）</p></li>
<li><p>在使用 `np.nan` 对具有 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 进行索引时，当存在 `np.nan` 键时，错误地引发 `KeyError` 的 Bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41933">GH 41933</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__delitem__()</span></code> 的 Bug，当使用 `ExtensionDtype` 时错误地转换为 `ndarray`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40386">GH 40386</a>）</p></li>
<li><p>带有 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.at.html#pandas.DataFrame.at" title="pandas.DataFrame.at"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.at()</span></code></a> 的 Bug，当传入整数键时返回不正确的结果（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41846">GH 41846</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 的 Bug，如果索引器包含重复项，则返回错误顺序的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40978">GH 40978</a>）</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__setitem__()</span></code> 的 Bug，当使用 `str` 子类作为列名且 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 时引发 `TypeError`（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37366">GH 37366</a>）</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.get_loc()</span></code> 中存在一个错误，当给定一个 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 对象且其 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 不匹配时，未能抛出 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41670">GH 41670</a>)</p></li>
<li><p>当使用 <code class="xref py py-class docutils literal notranslate"><span class="pre">UInt64Index</span></code> 和负整数键时，<code class="docutils literal notranslate"><span class="pre">.loc.__getitem__</span></code> 存在一个错误，在某些情况下会抛出 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> 而非 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>，在其他情况下则会回绕为正整数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41777">GH 41777</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Index.get_indexer.html#pandas.Index.get_indexer" title="pandas.Index.get_indexer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.get_indexer()</span></code></a> 中存在一个错误，在某些情况下，当给定无效的 <code class="docutils literal notranslate"><span class="pre">method</span></code>、<code class="docutils literal notranslate"><span class="pre">limit</span></code> 或 <code class="docutils literal notranslate"><span class="pre">tolerance</span></code> 参数时，未能抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41918">GH 41918</a>)</p></li>
<li><p>在对具有 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 进行切片时，传递无效字符串会抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而非 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41821">GH 41821</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 构造函数中存在一个错误，有时会静默忽略指定的 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38879">GH 38879</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.where.html#pandas.Index.where" title="pandas.Index.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.where()</span></code></a> 的行为现在与 <a class="reference internal" href="../reference/api/pandas.Index.putmask.html#pandas.Index.putmask" title="pandas.Index.putmask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.putmask()</span></code></a> 的行为保持一致，即 <code class="docutils literal notranslate"><span class="pre">index.where(mask,</span> <span class="pre">other)</span></code> 匹配 <code class="docutils literal notranslate"><span class="pre">index.putmask(~mask,</span> <span class="pre">other)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39412">GH 39412</a>)</p></li>
</ul>
</section>
<section id="missing">
<h3>缺失值<a class="headerlink" href="v1.3.0.html#missing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Grouper.html#pandas.Grouper" title="pandas.Grouper"><code class="xref py py-class docutils literal notranslate"><span class="pre">Grouper</span></code></a> 中存在一个错误，未能正确传播 <code class="docutils literal notranslate"><span class="pre">dropna</span></code> 参数；现在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">dropna=True</span></code> 时能正确处理缺失值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35612">GH 35612</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.isna.html#pandas.isna" title="pandas.isna"><code class="xref py py-func docutils literal notranslate"><span class="pre">isna()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.isna.html#pandas.Series.isna" title="pandas.Series.isna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.isna()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Index.isna.html#pandas.Index.isna" title="pandas.Index.isna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.isna()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.isna.html#pandas.DataFrame.isna" title="pandas.DataFrame.isna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.isna()</span></code></a> 以及相应的 <code class="docutils literal notranslate"><span class="pre">notna</span></code> 函数中存在一个错误，无法识别 <code class="docutils literal notranslate"><span class="pre">Decimal("NaN")</span></code> 对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39409">GH 39409</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a> 中存在一个错误，不接受 <code class="docutils literal notranslate"><span class="pre">downcast</span></code> 关键字的字典参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40809">GH 40809</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.isna.html#pandas.isna" title="pandas.isna"><code class="xref py py-func docutils literal notranslate"><span class="pre">isna()</span></code></a> 中存在一个错误，不会返回可空类型掩码的副本，导致后续的掩码修改会改变原始数组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40935">GH 40935</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造中存在一个错误，当浮点数据包含 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 且指定整数 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 时，会进行类型转换而非保留 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26919">GH 26919</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.isin.html#pandas.Series.isin" title="pandas.Series.isin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.isin()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.isin()</span></code> 中存在一个错误，如果元组中包含所有 NaN，它们将不会被视为等效 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41836">GH 41836</a>)</p></li>
</ul>
</section>
<section id="multiindex">
<h3>多级索引<a class="headerlink" href="v1.3.0.html#multiindex" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.drop.html#pandas.DataFrame.drop" title="pandas.DataFrame.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.drop()</span></code></a> 中存在一个错误，当 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 不唯一且未提供 <code class="docutils literal notranslate"><span class="pre">level</span></code> 时会抛出 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/36293">GH 36293</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.intersection()</span></code> 中存在一个错误，导致结果中 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 重复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38623">GH 38623</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.equals()</span></code> 中存在一个错误，当 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 包含 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 时，即使它们的顺序不同，也会错误地返回 <code class="docutils literal notranslate"><span class="pre">True</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38439">GH 38439</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.intersection()</span></code> 中存在一个错误，与 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 取交集时总是返回空结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38653">GH 38653</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.difference()</span></code> 中存在一个错误，当索引包含不可排序的条目时，错误地抛出 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41915">GH 41915</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.reindex()</span></code> 中存在一个错误，当在空的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 上使用且仅索引特定级别时，会抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41170">GH 41170</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.reindex()</span></code> 中存在一个错误，当对齐扁平的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 时，会抛出 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41707">GH 41707</a>)</p></li>
</ul>
</section>
<section id="i-o">
<h3>输入/输出<a class="headerlink" href="v1.3.0.html#i-o" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.__repr__()</span></code> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">display.max_seq_items=1</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38415">GH 38415</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在一个错误，当设置了 <code class="docutils literal notranslate"><span class="pre">decimal</span></code> 参数且 <code class="docutils literal notranslate"><span class="pre">engine="python"</span></code> 时，无法识别科学计数法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/31920">GH 31920</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">NA</span></code> 值包含注释字符串时，将其解释为注释，现已针对 <code class="docutils literal notranslate"><span class="pre">engine="python"</span></code> 修复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34002">GH 34002</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在一个错误，当文件没有数据行时，如果指定了多个标题列和 <code class="docutils literal notranslate"><span class="pre">index_col</span></code>，会抛出 <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38292">GH 38292</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在一个错误，对于 <code class="docutils literal notranslate"><span class="pre">engine="python"</span></code>，不接受 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 的长度与 <code class="docutils literal notranslate"><span class="pre">names</span></code> 不同 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16469">GH 16469</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">delimiter=","</span></code> 且为 <code class="docutils literal notranslate"><span class="pre">engine="python"</span></code> 指定了 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 和 <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> 时，返回对象 dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35873">GH 35873</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在一个错误，当为 <code class="docutils literal notranslate"><span class="pre">engine="c"</span></code> 指定了 <code class="docutils literal notranslate"><span class="pre">names</span></code> 和 <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> 时，会抛出 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33699">GH 33699</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_clipboard.html#pandas.read_clipboard" title="pandas.read_clipboard"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_clipboard()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_clipboard.html#pandas.DataFrame.to_clipboard" title="pandas.DataFrame.to_clipboard"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_clipboard()</span></code></a> 中存在一个错误，在 WSL 中无法工作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38527">GH 38527</a>)</p></li>
<li><p>允许为 <a class="reference internal" href="../reference/api/pandas.read_sql.html#pandas.read_sql" title="pandas.read_sql"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.read_sql_query.html#pandas.read_sql_query" title="pandas.read_sql_query"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_query()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_table()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> 参数设置自定义错误值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35185">GH 35185</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_hdf.html#pandas.DataFrame.to_hdf" title="pandas.DataFrame.to_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_hdf()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.to_hdf.html#pandas.Series.to_hdf" title="pandas.Series.to_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_hdf()</span></code></a> 中存在一个错误，当尝试应用于 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 或 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 的子类时，会抛出 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33748">GH 33748</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.HDFStore.put.html#pandas.HDFStore.put" title="pandas.HDFStore.put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HDFStore.put()</span></code></a> 中存在一个错误，当保存具有非字符串 dtype 的 DataFrame 时，会抛出错误的 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34274">GH 34274</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.json_normalize.html#pandas.json_normalize" title="pandas.json_normalize"><code class="xref py py-func docutils literal notranslate"><span class="pre">json_normalize()</span></code></a> 中存在一个错误，导致生成器对象的第一个元素未包含在返回的 DataFrame 中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35923">GH 35923</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在一个错误，当列应解析为日期且为 <code class="docutils literal notranslate"><span class="pre">engine="python"</span></code> 指定了 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 时，会将千位分隔符应用于日期列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39365">GH 39365</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在一个错误，当指定多个标题和索引列时，会前向填充 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34673">GH 34673</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在一个错误，不遵守 <a class="reference internal" href="../reference/api/pandas.set_option.html#pandas.set_option" title="pandas.set_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_option()</span></code></a> 的设置 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34252">GH 34252</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在一个错误，对于可空布尔 dtype，不切换 <code class="docutils literal notranslate"><span class="pre">true_values</span></code> 和 <code class="docutils literal notranslate"><span class="pre">false_values</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34655">GH 34655</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_json()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">orient="split"</span></code> 时不维护数字字符串索引 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/28556">GH 28556</a>)</p></li>
<li><p>如果 <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> 不为零且查询没有返回结果，<a class="reference internal" href="../reference/api/pandas.read_sql.html#pandas.read_sql" title="pandas.read_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_sql()</span></code></a> 会返回一个空的生成器。现在它返回一个包含单个空 DataFrame 的生成器 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34411">GH 34411</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_hdf.html#pandas.read_hdf" title="pandas.read_hdf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_hdf()</span></code></a> 中存在一个错误，当使用 <code class="docutils literal notranslate"><span class="pre">where</span></code> 参数对分类字符串列进行过滤时，返回意外的记录 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39189">GH 39189</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">datetimes</span></code> 为空时，会抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39725">GH 39725</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在一个错误，会从单列电子表格中删除空值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39808">GH 39808</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在一个错误，会加载某些文件类型的末尾空行/列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41167">GH 41167</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在一个错误，当 Excel 文件具有 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 标题后跟两个空行且无索引时，会抛出 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40442">GH 40442</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.read_fwf.html#pandas.read_fwf" title="pandas.read_fwf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_fwf()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_clipboard.html#pandas.read_clipboard" title="pandas.read_clipboard"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_clipboard()</span></code></a> 中存在一个错误，即在 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 标题后且无索引时，会删除一个空行 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40442">GH 40442</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">index=False</span></code> 时，截断列位置错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40904">GH 40904</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">index=False</span></code> 时，会额外添加一个点并使截断行未对齐 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40904">GH 40904</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_orc.html#pandas.read_orc" title="pandas.read_orc"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_orc()</span></code></a> 中存在一个错误，总是抛出 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40918">GH 40918</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code></a> 中存在一个错误，如果同时定义了 <code class="docutils literal notranslate"><span class="pre">names</span></code> 和 <code class="docutils literal notranslate"><span class="pre">prefix</span></code>，会静默忽略 <code class="docutils literal notranslate"><span class="pre">prefix</span></code>，现在会抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39123">GH 39123</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">mangle_dupe_cols</span></code> 设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 时，不遵守重复列名的 dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35211">GH 35211</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在一个错误，如果同时定义了 <code class="docutils literal notranslate"><span class="pre">delimiter</span></code> 和 <code class="docutils literal notranslate"><span class="pre">sep</span></code>，会静默忽略 <code class="docutils literal notranslate"><span class="pre">sep</span></code>，现在会抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39823">GH 39823</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">sys.setprofile</span></code> 之前被调用时，会错误地解释参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41069">GH 41069</a>)</p></li>
<li><p>将 PyArrow 转换为 pandas（例如读取 Parquet）时存在一个错误，当具有可空 dtype 且 PyArrow 数组的数据缓冲区大小不是 dtype 大小的倍数时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40896">GH 40896</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在一个错误，即使用户指定了 <code class="docutils literal notranslate"><span class="pre">engine</span></code> 参数，当 pandas 无法确定文件类型时也会抛出错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41225">GH 41225</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_clipboard.html#pandas.read_clipboard" title="pandas.read_clipboard"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_clipboard()</span></code></a> 中存在一个错误，如果第一列中存在空值，从 Excel 文件复制会使值移到错误的列中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41108">GH 41108</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_hdf.html#pandas.DataFrame.to_hdf" title="pandas.DataFrame.to_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_hdf()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.to_hdf.html#pandas.Series.to_hdf" title="pandas.Series.to_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_hdf()</span></code></a> 中存在一个错误，当尝试将字符串列附加到不兼容的列时，会抛出 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41897">GH 41897</a>)</p></li>
</ul>
</section>
<section id="period">
<h3>周期<a class="headerlink" href="v1.3.0.html#period" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 对象或 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 与不匹配的 <code class="docutils literal notranslate"><span class="pre">PeriodDtype</span></code> 进行比较的行为现在与其他不匹配类型比较一致：对于相等性检查返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>，对于不相等性检查返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>，对于不等式检查抛出 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39274">GH 39274</a>)</p></li>
</ul>
</section>
<section id="plotting">
<h3>绘图<a class="headerlink" href="v1.3.0.html#plotting" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.plotting.scatter_matrix.html#pandas.plotting.scatter_matrix" title="pandas.plotting.scatter_matrix"><code class="xref py py-func docutils literal notranslate"><span class="pre">plotting.scatter_matrix()</span></code></a> 中存在一个错误，当传递 2d <code class="docutils literal notranslate"><span class="pre">ax</span></code> 参数时会抛出错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16253">GH 16253</a>)</p></li>
<li><p>防止 Matplotlib 的 <code class="docutils literal notranslate"><span class="pre">constrained_layout</span></code> 启用时出现警告 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25261">GH 25261</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a> 中存在一个错误，如果函数被重复调用，并且某些调用使用了 <code class="docutils literal notranslate"><span class="pre">yerr</span></code> 而其他调用没有使用，则图例中会显示错误的颜色 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39522">GH 39522</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a> 中存在一个错误，如果函数被重复调用，并且某些调用使用了 <code class="docutils literal notranslate"><span class="pre">secondary_y</span></code> 而其他调用使用了 <code class="docutils literal notranslate"><span class="pre">legend=False</span></code>，则图例中会显示错误的颜色 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40044">GH 40044</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.box.html#pandas.DataFrame.plot.box" title="pandas.DataFrame.plot.box"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot.box()</span></code></a> 中存在一个错误，当选择了 <code class="docutils literal notranslate"><span class="pre">dark_background</span></code> 主题时，绘图的上限或最小/最大标记不可见 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40769">GH 40769</a>)</p></li>
</ul>
</section>
<section id="groupby-resample-rolling">
<h3>分组/重采样/滚动<a class="headerlink" href="v1.3.0.html#groupby-resample-rolling" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.agg.html#pandas.core.groupby.DataFrameGroupBy.agg" title="pandas.core.groupby.DataFrameGroupBy.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.agg()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.agg.html#pandas.core.groupby.SeriesGroupBy.agg" title="pandas.core.groupby.SeriesGroupBy.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.agg()</span></code></a> 中存在一个错误，<a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 列的聚合结果类型转换过于激进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38254">GH 38254</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.value_counts.html#pandas.core.groupby.SeriesGroupBy.value_counts" title="pandas.core.groupby.SeriesGroupBy.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.value_counts()</span></code></a> 中存在一个错误，分组分类 Series 中未观察到的类别未被计数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38672">GH 38672</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.value_counts.html#pandas.core.groupby.SeriesGroupBy.value_counts" title="pandas.core.groupby.SeriesGroupBy.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.value_counts()</span></code></a> 中存在一个错误，在空 Series 上会抛出错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39172">GH 39172</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">GroupBy.indices()</span></code> 中存在一个错误，当分组键中存在空值时，会包含不存在的索引 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9304">GH 9304</a>)</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.sum.html#pandas.core.groupby.DataFrameGroupBy.sum" title="pandas.core.groupby.DataFrameGroupBy.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.sum()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.sum.html#pandas.core.groupby.SeriesGroupBy.sum" title="pandas.core.groupby.SeriesGroupBy.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.sum()</span></code></a> 中的错误，现在使用 Kahan 求和法来防止精度损失 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38778">GH 38778</a>)</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cumsum.html#pandas.core.groupby.DataFrameGroupBy.cumsum" title="pandas.core.groupby.DataFrameGroupBy.cumsum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cumsum()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cumsum.html#pandas.core.groupby.SeriesGroupBy.cumsum" title="pandas.core.groupby.SeriesGroupBy.cumsum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cumsum()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.mean.html#pandas.core.groupby.DataFrameGroupBy.mean" title="pandas.core.groupby.DataFrameGroupBy.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.mean()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.mean.html#pandas.core.groupby.SeriesGroupBy.mean" title="pandas.core.groupby.SeriesGroupBy.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.mean()</span></code></a> 中的错误，通过使用 Kahan 求和法防止精度损失 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38934">GH 38934</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.aggregate.html#pandas.core.resample.Resampler.aggregate" title="pandas.core.resample.Resampler.aggregate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.aggregate()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.transform.html#pandas.DataFrame.transform" title="pandas.DataFrame.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.transform()</span></code></a> 中存在一个错误，当缺失的键具有混合 dtype 时，会抛出 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而非 <code class="docutils literal notranslate"><span class="pre">SpecificationError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39025">GH 39025</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmin.html#pandas.core.groupby.DataFrameGroupBy.idxmin" title="pandas.core.groupby.DataFrameGroupBy.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmin()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmax.html#pandas.core.groupby.DataFrameGroupBy.idxmax" title="pandas.core.groupby.DataFrameGroupBy.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmax()</span></code></a> 中存在一个错误，涉及 <code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38733">GH 38733</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> 中存在一个错误，当索引是包含 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 的 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 时会抛出错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39227">GH 39227</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">RollingGroupby.corr()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpandingGroupby.corr()</span></code> 中存在一个错误，当提供比每个组更长的 <code class="docutils literal notranslate"><span class="pre">other</span></code> 时，分组列会返回 <code class="docutils literal notranslate"><span class="pre">0</span></code> 而非 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39591">GH 39591</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpandingGroupby.corr()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpandingGroupby.cov()</span></code> 中存在一个错误，当提供比每个组更长的 <code class="docutils literal notranslate"><span class="pre">other</span></code> 时，会返回 <code class="docutils literal notranslate"><span class="pre">1</span></code> 而非 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39591">GH 39591</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.mean.html#pandas.core.groupby.DataFrameGroupBy.mean" title="pandas.core.groupby.DataFrameGroupBy.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.mean()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.mean.html#pandas.core.groupby.SeriesGroupBy.mean" title="pandas.core.groupby.SeriesGroupBy.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.mean()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.median.html#pandas.core.groupby.DataFrameGroupBy.median" title="pandas.core.groupby.DataFrameGroupBy.median"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.median()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.median.html#pandas.core.groupby.SeriesGroupBy.median" title="pandas.core.groupby.SeriesGroupBy.median"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.median()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table" title="pandas.DataFrame.pivot_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pivot_table()</span></code></a> 中存在一个错误，无法传播元数据 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/28283">GH 28283</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.rolling.html#pandas.Series.rolling" title="pandas.Series.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rolling()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code></a> 中存在一个错误，当窗口是偏移量且日期按降序排列时，未能正确计算窗口边界 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40002">GH 40002</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 中存在一个错误，在空 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 或 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 上直接使用 <code class="docutils literal notranslate"><span class="pre">idxmax</span></code>、<code class="docutils literal notranslate"><span class="pre">idxmin</span></code>、<code class="docutils literal notranslate"><span class="pre">mad</span></code>、<code class="docutils literal notranslate"><span class="pre">min</span></code>、<code class="docutils literal notranslate"><span class="pre">max</span></code>、<code class="docutils literal notranslate"><span class="pre">sum</span></code>、<code class="docutils literal notranslate"><span class="pre">prod</span></code> 和 <code class="docutils literal notranslate"><span class="pre">skew</span></code> 方法，或通过 <code class="docutils literal notranslate"><span class="pre">apply</span></code>、<code class="docutils literal notranslate"><span class="pre">aggregate</span></code> 或 <code class="docutils literal notranslate"><span class="pre">resample</span></code> 使用它们时，会丢失索引、列和/或数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26411">GH 26411</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.apply.html#pandas.core.groupby.DataFrameGroupBy.apply" title="pandas.core.groupby.DataFrameGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.apply()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.apply.html#pandas.core.groupby.SeriesGroupBy.apply" title="pandas.core.groupby.SeriesGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.apply()</span></code></a> 中存在一个错误，当在 <code class="xref py py-class docutils literal notranslate"><span class="pre">RollingGroupby</span></code> 对象上使用时，会创建 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 而非 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39732">GH 39732</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.sample.html#pandas.core.groupby.DataFrameGroupBy.sample" title="pandas.core.groupby.DataFrameGroupBy.sample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.sample()</span></code></a> 中存在一个错误，当指定 <code class="docutils literal notranslate"><span class="pre">weights</span></code> 且索引是 <code class="xref py py-class docutils literal notranslate"><span class="pre">Int64Index</span></code> 时，会抛出错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39927">GH 39927</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.aggregate.html#pandas.core.groupby.DataFrameGroupBy.aggregate" title="pandas.core.groupby.DataFrameGroupBy.aggregate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.aggregate()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.aggregate.html#pandas.core.resample.Resampler.aggregate" title="pandas.core.resample.Resampler.aggregate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.aggregate()</span></code></a> 中存在一个错误，当传递字典且列缺失时，有时会抛出 <code class="docutils literal notranslate"><span class="pre">SpecificationError</span></code>；现在总是抛出 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40004">GH 40004</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.sample.html#pandas.core.groupby.DataFrameGroupBy.sample" title="pandas.core.groupby.DataFrameGroupBy.sample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.sample()</span></code></a> 中存在一个错误，未在计算结果前应用列选择 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39928">GH 39928</a>)</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExponentialMovingWindow</span></code> 中存在一个错误，当调用 <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> 且提供 <code class="docutils literal notranslate"><span class="pre">times</span></code> 时，会错误地抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40164">GH 40164</a>)</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExponentialMovingWindow</span></code> 中存在一个错误，当调用 <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> 时，不会保留 <code class="docutils literal notranslate"><span class="pre">com</span></code>、<code class="docutils literal notranslate"><span class="pre">span</span></code>、<code class="docutils literal notranslate"><span class="pre">alpha</span></code> 或 <code class="docutils literal notranslate"><span class="pre">halflife</span></code> 属性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40164">GH 40164</a>)</p></li>
<li><p>由于计算不正确，<code class="xref py py-class docutils literal notranslate"><span class="pre">ExponentialMovingWindow</span></code> 现在在指定 <code class="docutils literal notranslate"><span class="pre">times</span></code> 且 <code class="docutils literal notranslate"><span class="pre">adjust=False</span></code> 时会抛出 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40098">GH 40098</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExponentialMovingWindowGroupby.mean()</span></code> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">engine='numba'</span></code> 时，<code class="docutils literal notranslate"><span class="pre">times</span></code> 参数被忽略 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40951">GH 40951</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExponentialMovingWindowGroupby.mean()</span></code> 中存在一个错误，在多个组的情况下使用了错误的时间 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40951">GH 40951</a>)</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExponentialMovingWindowGroupby</span></code> 中存在一个错误，对于非平凡组，时间向量和值变得不同步 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40951">GH 40951</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.asfreq.html#pandas.Series.asfreq" title="pandas.Series.asfreq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.asfreq()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.asfreq.html#pandas.DataFrame.asfreq" title="pandas.DataFrame.asfreq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.asfreq()</span></code></a> 中存在一个错误，当索引未排序时会删除行 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39805">GH 39805</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的聚合函数中存在一个错误，当给定 <code class="docutils literal notranslate"><span class="pre">level</span></code> 关键字时，不遵守 <code class="docutils literal notranslate"><span class="pre">numeric_only</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40660">GH 40660</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.aggregate.html#pandas.core.groupby.SeriesGroupBy.aggregate" title="pandas.core.groupby.SeriesGroupBy.aggregate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.aggregate()</span></code></a> 中存在一个错误，使用用户定义函数聚合具有对象类型 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 的 Series 时，会导致不正确的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 形状 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40014">GH 40014</a>)</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">RollingGroupby</span></code> 中存在一个错误，其中 <code class="docutils literal notranslate"><span class="pre">groupby</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">as_index=False</span></code> 参数被忽略 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39433">GH 39433</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.any.html#pandas.core.groupby.DataFrameGroupBy.any" title="pandas.core.groupby.DataFrameGroupBy.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.any()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.any.html#pandas.core.groupby.SeriesGroupBy.any" title="pandas.core.groupby.SeriesGroupBy.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.any()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.all.html#pandas.core.groupby.DataFrameGroupBy.all" title="pandas.core.groupby.DataFrameGroupBy.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.all()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.all.html#pandas.core.groupby.SeriesGroupBy.all" title="pandas.core.groupby.SeriesGroupBy.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.all()</span></code></a> 中存在一个错误，当与包含 <code class="docutils literal notranslate"><span class="pre">NA</span></code> 的可空类型列一起使用时，即使 <code class="docutils literal notranslate"><span class="pre">skipna=True</span></code>，也会抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40585">GH 40585</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummin.html#pandas.core.groupby.DataFrameGroupBy.cummin" title="pandas.core.groupby.DataFrameGroupBy.cummin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cummin.html#pandas.core.groupby.SeriesGroupBy.cummin" title="pandas.core.groupby.SeriesGroupBy.cummin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cummin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummax.html#pandas.core.groupby.DataFrameGroupBy.cummax" title="pandas.core.groupby.DataFrameGroupBy.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummax()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cummax.html#pandas.core.groupby.SeriesGroupBy.cummax" title="pandas.core.groupby.SeriesGroupBy.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cummax()</span></code></a> 中存在一个错误，会错误地舍入接近 <code class="docutils literal notranslate"><span class="pre">int64</span></code> 实现边界的整数值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40767">GH 40767</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.rank.html#pandas.core.groupby.DataFrameGroupBy.rank" title="pandas.core.groupby.DataFrameGroupBy.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.rank()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.rank.html#pandas.core.groupby.SeriesGroupBy.rank" title="pandas.core.groupby.SeriesGroupBy.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.rank()</span></code></a> 中存在一个错误，当使用可空 dtype 时，会错误地抛出 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41010">GH 41010</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummin.html#pandas.core.groupby.DataFrameGroupBy.cummin" title="pandas.core.groupby.DataFrameGroupBy.cummin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cummin.html#pandas.core.groupby.SeriesGroupBy.cummin" title="pandas.core.groupby.SeriesGroupBy.cummin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cummin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummax.html#pandas.core.groupby.DataFrameGroupBy.cummax" title="pandas.core.groupby.DataFrameGroupBy.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummax()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cummax.html#pandas.core.groupby.SeriesGroupBy.cummax" title="pandas.core.groupby.SeriesGroupBy.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cummax()</span></code></a> 中存在一个错误，当可空数据类型过大导致无法往返转换成浮点数时，会计算出错误的结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37493">GH 37493</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">min_periods=0</span></code> 且计算不稳定时，对于全为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 的窗口，返回的均值为零 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41053">GH 41053</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">min_periods=0</span></code> 且计算不稳定时，对于全为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 的窗口，返回的和不为零 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41053">GH 41053</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.agg.html#pandas.core.groupby.SeriesGroupBy.agg" title="pandas.core.groupby.SeriesGroupBy.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.agg()</span></code></a> 中存在一个错误，无法在保持顺序的聚合中保留有序的 <a class="reference internal" href="../reference/api/pandas.CategoricalDtype.html#pandas.CategoricalDtype" title="pandas.CategoricalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalDtype</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41147">GH 41147</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.min.html#pandas.core.groupby.DataFrameGroupBy.min" title="pandas.core.groupby.DataFrameGroupBy.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.min()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.min.html#pandas.core.groupby.SeriesGroupBy.min" title="pandas.core.groupby.SeriesGroupBy.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.min()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.max.html#pandas.core.groupby.DataFrameGroupBy.max" title="pandas.core.groupby.DataFrameGroupBy.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.max()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.max.html#pandas.core.groupby.SeriesGroupBy.max" title="pandas.core.groupby.SeriesGroupBy.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.max()</span></code></a> 中存在一个错误，当有多个对象 dtype 列且 <code class="docutils literal notranslate"><span class="pre">numeric_only=False</span></code> 时，会错误地抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41111">GH 41111</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.rank.html#pandas.core.groupby.DataFrameGroupBy.rank" title="pandas.core.groupby.DataFrameGroupBy.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.rank()</span></code></a> 中存在一个错误，当 GroupBy 对象的 <code class="docutils literal notranslate"><span class="pre">axis=0</span></code> 且 <code class="docutils literal notranslate"><span class="pre">rank</span></code> 方法的关键字 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41320">GH 41320</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.__getitem__()</span></code> 中存在一个错误，当列不唯一时，错误地返回一个格式错误的 <code class="xref py py-class docutils literal notranslate"><span class="pre">SeriesGroupBy</span></code> 而非 <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameGroupBy</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41427">GH 41427</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 中存在一个错误，当列不唯一时，错误地抛出 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41427">GH 41427</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.apply.html#pandas.core.resample.Resampler.apply" title="pandas.core.resample.Resampler.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.apply()</span></code></a> 中存在一个错误，当列不唯一时，错误地删除重复列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41445">GH 41445</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 聚合中存在一个错误，当聚合对 dtype 无效时，例如对 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype 使用 <code class="docutils literal notranslate"><span class="pre">.prod</span></code>，会错误地返回空 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 而非抛出 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41342">GH 41342</a>)</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameGroupBy</span></code> 聚合中存在一个错误，当没有有效列时，错误地未能删除对于该聚合无效 dtype 的列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41291">GH 41291</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rolling.__iter__()</span></code> 中存在一个错误，其中 <code class="docutils literal notranslate"><span class="pre">on</span></code> 未分配给结果对象的索引 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40373">GH 40373</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.agg.html#pandas.core.groupby.DataFrameGroupBy.agg" title="pandas.core.groupby.DataFrameGroupBy.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.agg()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">engine="numba"</span></code> 时，<code class="docutils literal notranslate"><span class="pre">*args</span></code> 会与用户传入的函数一起被缓存 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41647">GH 41647</a>)</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameGroupBy</span></code> 方法 <code class="docutils literal notranslate"><span class="pre">agg</span></code>、<code class="docutils literal notranslate"><span class="pre">transform</span></code>、<code class="docutils literal notranslate"><span class="pre">sum</span></code>、<code class="docutils literal notranslate"><span class="pre">bfill</span></code>、<code class="docutils literal notranslate"><span class="pre">ffill</span></code>、<code class="docutils literal notranslate"><span class="pre">pad</span></code>、<code class="docutils literal notranslate"><span class="pre">pct_change</span></code>、<code class="docutils literal notranslate"><span class="pre">shift</span></code>、<code class="docutils literal notranslate"><span class="pre">ohlc</span></code> 中存在一个错误，会丢失 <code class="docutils literal notranslate"><span class="pre">.columns.names</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41497">GH 41497</a>)</p></li>
</ul>
</section>
<section id="reshaping">
<h3>重塑<a class="headerlink" href="v1.3.0.html#reshaping" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 中存在一个错误，当执行具有部分索引的内连接且 <code class="docutils literal notranslate"><span class="pre">right_index=True</span></code> 且索引之间没有重叠时，会抛出错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33814">GH 33814</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.unstack()</span></code></a> 中存在一个错误，缺失的级别导致不正确的索引名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37510">GH 37510</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">left_index=True</span></code> 并指定 <code class="docutils literal notranslate"><span class="pre">right_on</span></code> 时，会传播右侧索引而非左侧索引 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33463">GH 33463</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 中存在一个错误，当 DataFrame 具有 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 且其中一个或两个索引只有一个级别时，返回了错误的结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/36909">GH 36909</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 现在在合并列非数值的情况下会抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而非隐晦的 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/29130">GH 29130</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 中存在一个错误，当 DataFrame 具有 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 且至少一个维度具有 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> dtype 且类别未按字母顺序排序时，未能正确分配值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38502">GH 38502</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.value_counts.html#pandas.Series.value_counts" title="pandas.Series.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.value_counts()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.mode.html#pandas.Series.mode" title="pandas.Series.mode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mode()</span></code></a> 现在返回原始顺序中一致的键 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12679">GH 12679</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11227">GH 11227</a> 和 <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39007">GH 39007</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a> 中存在一个错误，未能正确处理 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 列中的 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39481">GH 39481</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 中存在一个错误，当参数 <code class="docutils literal notranslate"><span class="pre">func</span></code> 是字符串、<code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 且不支持 axis 参数时，会给出不正确的结果；现在会抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39211">GH 39211</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values" title="pandas.DataFrame.sort_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sort_values()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">ignore_index=True</span></code> 时，在列上排序后未能正确重塑索引 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39464">GH 39464</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.append()</span></code> 中存在一个错误，返回的 dtype 在 <code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> dtype 组合下不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39454">GH 39454</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.append()</span></code> 中存在一个错误，当与 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 和 <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> dtype 组合使用时，返回不正确的 dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39574">GH 39574</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.append()</span></code> 中存在一个错误，当 DataFrame 具有 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 且附加的 Series 的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 不是 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41707">GH 41707</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table" title="pandas.DataFrame.pivot_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pivot_table()</span></code></a> 中存在一个错误，当对空 DataFrame 操作时，对于单个值返回 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13483">GH 13483</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 现在可以传递给 <a class="reference external" href="https://numpy.com.cn/doc/stable/reference/generated/numpy.all.html#numpy.all" title="(in NumPy v2.2)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.all()</span></code></a> 函数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40180">GH 40180</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a> 中存在一个错误，在 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 中未保留 <code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/36991">GH 36991</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中存在一个错误，当输入序列包含不可哈希项时会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39756">GH 39756</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.explode.html#pandas.Series.explode" title="pandas.Series.explode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.explode()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">ignore_index</span></code> 为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 且值为标量时会保留索引 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40487">GH 40487</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中存在一个错误，当 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 包含 <code class="docutils literal notranslate"><span class="pre">None</span></code> 和 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 且元素数量超过 50 个时会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39882">GH 39882</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.unstack.html#pandas.Series.unstack" title="pandas.Series.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.unstack()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.unstack()</span></code></a> 中存在一个错误，当对象-dtype 值包含时区感知日期时间对象时会错误地引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41875">GH 41875</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.melt.html#pandas.DataFrame.melt" title="pandas.DataFrame.melt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.melt()</span></code></a> 中存在一个错误，当 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 具有作为 <code class="docutils literal notranslate"><span class="pre">value_vars</span></code> 使用的重复列时会引发 <code class="docutils literal notranslate"><span class="pre">InvalidIndexError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41951">GH 41951</a>)</p></li>
</ul>
</section>
<section id="sparse">
<h3>稀疏<a class="headerlink" href="v1.3.0.html#sparse" title="链接到此标题">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.sparse.to_coo.html#pandas.DataFrame.sparse.to_coo" title="pandas.DataFrame.sparse.to_coo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sparse.to_coo()</span></code></a> 中存在一个错误，当列是缺少 <code class="docutils literal notranslate"><span class="pre">0</span></code> 的数值 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 时会引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18414">GH 18414</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArray.astype()</span></code> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">copy=False</span></code> 且从整数 dtype 转换为浮点 dtype 时会产生不正确的结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34456">GH 34456</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArray.max()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArray.min()</span></code> 中存在一个错误，总是返回空结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40921">GH 40921</a>)</p></li>
</ul>
</section>
<section id="extensionarray">
<h3>扩展数组<a class="headerlink" href="v1.3.0.html#extensionarray" title="链接到此标题">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">other</span></code> 是一个带有 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 的 Series 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38729">GH 38729</a>)</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.Series.idxmax.html#pandas.Series.idxmax" title="pandas.Series.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.idxmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.idxmin.html#pandas.Series.idxmin" title="pandas.Series.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.idxmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.argmax.html#pandas.Series.argmax" title="pandas.Series.argmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.argmax()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.argmin.html#pandas.Series.argmin" title="pandas.Series.argmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.argmin()</span></code></a> 在底层数据为 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 时会失败的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/32749">GH 32749</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33719">GH 33719</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/36566">GH 36566</a>)</p></li>
<li><p>修复了 <code class="xref py py-class docutils literal notranslate"><span class="pre">PandasExtensionDtype</span></code> 子类的一些属性被不正确缓存的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40329">GH 40329</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.mask.html#pandas.DataFrame.mask" title="pandas.DataFrame.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mask()</span></code></a> 中存在一个错误，当用 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 遮盖 DataFrame 时会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40941">GH 40941</a>)</p></li>
</ul>
</section>
<section id="styler">
<h3>样式器<a class="headerlink" href="v1.3.0.html#styler" title="链接到此标题">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> 中存在一个错误，其中方法的 <code class="docutils literal notranslate"><span class="pre">subset</span></code> 参数对于某些有效的 MultiIndex 切片会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33562">GH 33562</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> 渲染的 HTML 输出已进行细微修改，以支持 w3 良好代码标准 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39626">GH 39626</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> 中存在一个错误，其中渲染的 HTML 在某些表头单元格中缺少列类标识符 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39716">GH 39716</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.background_gradient.html#pandas.io.formats.style.Styler.background_gradient" title="pandas.io.formats.style.Styler.background_gradient"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.background_gradient()</span></code></a> 中存在一个错误，其中文本颜色未正确确定 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39888">GH 39888</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.set_table_styles.html#pandas.io.formats.style.Styler.set_table_styles" title="pandas.io.formats.style.Styler.set_table_styles"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.set_table_styles()</span></code></a> 中存在一个错误，其中 <code class="docutils literal notranslate"><span class="pre">table_styles</span></code> 参数的 CSS 选择器中的多个元素未正确添加 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34061">GH 34061</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> 中存在一个错误，从 Jupyter 复制时会丢失左上角单元格并导致表头错位 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12147">GH 12147</a>)</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">Styler.where</span></code> 中存在一个错误，其中 <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> 未传递给适用的可调用对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40845">GH 40845</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> 中存在一个错误，导致 CSS 在多次渲染时重复 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39395">GH 39395</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40334">GH 40334</a>)</p></li>
</ul>
</section>
<section id="other">
<h3>其他<a class="headerlink" href="v1.3.0.html#other" title="链接到此标题">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">inspect.getmembers(Series)</span></code> 不再引发 <code class="docutils literal notranslate"><span class="pre">AbstractMethodError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38782">GH 38782</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.where()</span></code></a> 中存在一个错误，当 dtype 为数值型且 <code class="docutils literal notranslate"><span class="pre">other=None</span></code> 时未转换为 <code class="docutils literal notranslate"><span class="pre">nan</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39761">GH 39761</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.testing.assert_series_equal.html#pandas.testing.assert_series_equal" title="pandas.testing.assert_series_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">assert_series_equal()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.testing.assert_frame_equal.html#pandas.testing.assert_frame_equal" title="pandas.testing.assert_frame_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">assert_frame_equal()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.testing.assert_index_equal.html#pandas.testing.assert_index_equal" title="pandas.testing.assert_index_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">assert_index_equal()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.testing.assert_extension_array_equal.html#pandas.testing.assert_extension_array_equal" title="pandas.testing.assert_extension_array_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">assert_extension_array_equal()</span></code></a> 中存在一个错误，当某个属性具有无法识别的 NA 类型时会错误地引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39461">GH 39461</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.testing.assert_index_equal.html#pandas.testing.assert_index_equal" title="pandas.testing.assert_index_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">assert_index_equal()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">exact=True</span></code> 且比较 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 实例与 <code class="docutils literal notranslate"><span class="pre">Int64Index</span></code> 和 <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> 类别时未引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41263">GH 41263</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.equals.html#pandas.DataFrame.equals" title="pandas.DataFrame.equals"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.equals()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.equals.html#pandas.Series.equals" title="pandas.Series.equals"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.equals()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.equals.html#pandas.Index.equals" title="pandas.Index.equals"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.equals()</span></code></a> 中存在一个错误，当对象-dtype 包含 <code class="docutils literal notranslate"><span class="pre">np.datetime64("NaT")</span></code> 或 <code class="docutils literal notranslate"><span class="pre">np.timedelta64("NaT")</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39650">GH 39650</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.show_versions.html#pandas.show_versions" title="pandas.show_versions"><code class="xref py py-func docutils literal notranslate"><span class="pre">show_versions()</span></code></a> 中存在一个错误，其中控制台 JSON 输出不是正确的 JSON 格式 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39701">GH 39701</a>)</p></li>
<li><p>pandas 现在可以在使用 <a class="reference external" href="https://www.ibm.com/products/xl-cpp-compiler-zos">xlc</a> 时在 z/OS 上编译 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35826">GH 35826</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.util.hash_pandas_object.html#pandas.util.hash_pandas_object" title="pandas.util.hash_pandas_object"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.util.hash_pandas_object()</span></code></a> 中存在一个错误，当输入对象类型为 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时未识别 <code class="docutils literal notranslate"><span class="pre">hash_key</span></code>、<code class="docutils literal notranslate"><span class="pre">encoding</span></code> 和 <code class="docutils literal notranslate"><span class="pre">categorize</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41404">GH 41404</a>)</p></li>
</ul>
</section>
</section>
<section id="contributors">
<span id="whatsnew-130-contributors"></span><h2>贡献者<a class="headerlink" href="v1.3.0.html#contributors" title="链接到此标题">#</a></h2>
<p>共有 251 人为本次发布贡献了补丁。名字旁边带有“+”的人是首次贡献补丁。</p>
<ul class="simple">
<li><p>Abhishek R +</p></li>
<li><p>Ada Draginda</p></li>
<li><p>Adam J. Stewart</p></li>
<li><p>Adam Turner +</p></li>
<li><p>Aidan Feldman +</p></li>
<li><p>Ajitesh Singh +</p></li>
<li><p>Akshat Jain +</p></li>
<li><p>Albert Villanova del Moral</p></li>
<li><p>Alexandre Prince-Levasseur +</p></li>
<li><p>Andrew Hawyrluk +</p></li>
<li><p>Andrew Wieteska</p></li>
<li><p>AnglinaBhambra +</p></li>
<li><p>Ankush Dua +</p></li>
<li><p>Anna Daglis</p></li>
<li><p>Ashlan Parker +</p></li>
<li><p>Ashwani +</p></li>
<li><p>Avinash Pancham</p></li>
<li><p>Ayushman Kumar +</p></li>
<li><p>BeanNan</p></li>
<li><p>Benoît Vinot</p></li>
<li><p>Bharat Raghunathan</p></li>
<li><p>Bijay Regmi +</p></li>
<li><p>Bobin Mathew +</p></li>
<li><p>Bogdan Pilyavets +</p></li>
<li><p>Brian Hulette +</p></li>
<li><p>Brian Sun +</p></li>
<li><p>Brock +</p></li>
<li><p>Bryan Cutler</p></li>
<li><p>Caleb +</p></li>
<li><p>Calvin Ho +</p></li>
<li><p>Chathura Widanage +</p></li>
<li><p>Chinmay Rane +</p></li>
<li><p>Chris Lynch</p></li>
<li><p>Chris Withers</p></li>
<li><p>Christos Petropoulos</p></li>
<li><p>Corentin Girard +</p></li>
<li><p>DaPy15 +</p></li>
<li><p>Damodara Puddu +</p></li>
<li><p>Daniel Hrisca</p></li>
<li><p>Daniel Saxton</p></li>
<li><p>DanielFEvans</p></li>
<li><p>Dare Adewumi +</p></li>
<li><p>Dave Willmer</p></li>
<li><p>David Schlachter +</p></li>
<li><p>David-dmh +</p></li>
<li><p>Deepang Raval +</p></li>
<li><p>Doris Lee +</p></li>
<li><p>Dr. Jan-Philip Gehrcke +</p></li>
<li><p>DriesS +</p></li>
<li><p>Dylan Percy</p></li>
<li><p>Erfan Nariman</p></li>
<li><p>Eric Leung</p></li>
<li><p>EricLeer +</p></li>
<li><p>Eve</p></li>
<li><p>Fangchen Li</p></li>
<li><p>Felix Divo</p></li>
<li><p>Florian Jetter</p></li>
<li><p>Fred Reiss</p></li>
<li><p>GFJ138 +</p></li>
<li><p>Gaurav Sheni +</p></li>
<li><p>Geoffrey B. Eisenbarth +</p></li>
<li><p>Gesa Stupperich +</p></li>
<li><p>Griffin Ansel +</p></li>
<li><p>Gustavo C. Maciel +</p></li>
<li><p>Heidi +</p></li>
<li><p>Henry +</p></li>
<li><p>Hung-Yi Wu +</p></li>
<li><p>Ian Ozsvald +</p></li>
<li><p>Irv Lustig</p></li>
<li><p>Isaac Chung +</p></li>
<li><p>Isaac Virshup</p></li>
<li><p>JHM Darbyshire (MBP) +</p></li>
<li><p>JHM Darbyshire (iMac) +</p></li>
<li><p>Jack Liu +</p></li>
<li><p>James Lamb +</p></li>
<li><p>Jeet Parekh</p></li>
<li><p>Jeff Reback</p></li>
<li><p>Jiezheng2018 +</p></li>
<li><p>Jody Klymak</p></li>
<li><p>Johan Kåhrström +</p></li>
<li><p>John McGuigan</p></li>
<li><p>Joris Van den Bossche</p></li>
<li><p>Jose</p></li>
<li><p>JoseNavy</p></li>
<li><p>Josh Dimarsky</p></li>
<li><p>Josh Friedlander</p></li>
<li><p>Joshua Klein +</p></li>
<li><p>Julia Signell</p></li>
<li><p>Julian Schnitzler +</p></li>
<li><p>Kaiqi Dong</p></li>
<li><p>Kasim Panjri +</p></li>
<li><p>Katie Smith +</p></li>
<li><p>Kelly +</p></li>
<li><p>Kenil +</p></li>
<li><p>Keppler, Kyle +</p></li>
<li><p>Kevin Sheppard</p></li>
<li><p>Khor Chean Wei +</p></li>
<li><p>Kiley Hewitt +</p></li>
<li><p>Larry Wong +</p></li>
<li><p>Lightyears +</p></li>
<li><p>Lucas Holtz +</p></li>
<li><p>Lucas Rodés-Guirao</p></li>
<li><p>Lucky Sivagurunathan +</p></li>
<li><p>Luis Pinto</p></li>
<li><p>Maciej Kos +</p></li>
<li><p>Marc Garcia</p></li>
<li><p>Marco Edward Gorelli +</p></li>
<li><p>Marco Gorelli</p></li>
<li><p>MarcoGorelli +</p></li>
<li><p>Mark Graham</p></li>
<li><p>Martin Dengler +</p></li>
<li><p>Martin Grigorov +</p></li>
<li><p>Marty Rudolf +</p></li>
<li><p>Matt Roeschke</p></li>
<li><p>Matthew Roeschke</p></li>
<li><p>Matthew Zeitlin</p></li>
<li><p>Max Bolingbroke</p></li>
<li><p>Maxim Ivanov</p></li>
<li><p>Maxim Kupfer +</p></li>
<li><p>Mayur +</p></li>
<li><p>MeeseeksMachine</p></li>
<li><p>Micael Jarniac</p></li>
<li><p>Michael Hsieh +</p></li>
<li><p>Michel de Ruiter +</p></li>
<li><p>Mike Roberts +</p></li>
<li><p>Miroslav Šedivý</p></li>
<li><p>Mohammad Jafar Mashhadi</p></li>
<li><p>Morisa Manzella +</p></li>
<li><p>Mortada Mehyar</p></li>
<li><p>Muktan +</p></li>
<li><p>Naveen Agrawal +</p></li>
<li><p>Noah</p></li>
<li><p>Nofar Mishraki +</p></li>
<li><p>Oleh Kozynets</p></li>
<li><p>Olga Matoula +</p></li>
<li><p>Oli +</p></li>
<li><p>Omar Afifi</p></li>
<li><p>Omer Ozarslan +</p></li>
<li><p>Owen Lamont +</p></li>
<li><p>Ozan Öğreden +</p></li>
<li><p>Pandas Development Team</p></li>
<li><p>Paolo Lammens</p></li>
<li><p>Parfait Gasana +</p></li>
<li><p>Patrick Hoefler</p></li>
<li><p>Paul McCarthy +</p></li>
<li><p>Paulo S. Costa +</p></li>
<li><p>Pav A</p></li>
<li><p>Peter</p></li>
<li><p>Pradyumna Rahul +</p></li>
<li><p>Punitvara +</p></li>
<li><p>QP Hou +</p></li>
<li><p>Rahul Chauhan</p></li>
<li><p>Rahul Sathanapalli</p></li>
<li><p>Richard Shadrach</p></li>
<li><p>Robert Bradshaw</p></li>
<li><p>Robin to Roxel</p></li>
<li><p>Rohit Gupta</p></li>
<li><p>Sam Purkis +</p></li>
<li><p>Samuel GIFFARD +</p></li>
<li><p>Sean M. Law +</p></li>
<li><p>Shahar Naveh +</p></li>
<li><p>ShaharNaveh +</p></li>
<li><p>Shiv Gupta +</p></li>
<li><p>Shrey Dixit +</p></li>
<li><p>Shudong Yang +</p></li>
<li><p>Simon Boehm +</p></li>
<li><p>Simon Hawkins</p></li>
<li><p>Sioned Baker +</p></li>
<li><p>Stefan Mejlgaard +</p></li>
<li><p>Steven Pitman +</p></li>
<li><p>Steven Schaerer +</p></li>
<li><p>Stéphane Guillou +</p></li>
<li><p>TLouf +</p></li>
<li><p>Tegar D Pratama +</p></li>
<li><p>Terji Petersen</p></li>
<li><p>Theodoros Nikolaou +</p></li>
<li><p>Thomas Dickson</p></li>
<li><p>Thomas Li</p></li>
<li><p>Thomas Smith</p></li>
<li><p>Thomas Yu +</p></li>
<li><p>ThomasBlauthQC +</p></li>
<li><p>Tim Hoffmann</p></li>
<li><p>Tom Augspurger</p></li>
<li><p>Torsten Wörtwein</p></li>
<li><p>Tyler Reddy</p></li>
<li><p>UrielMaD</p></li>
<li><p>Uwe L. Korn</p></li>
<li><p>Venaturum +</p></li>
<li><p>VirosaLi</p></li>
<li><p>Vladimir Podolskiy</p></li>
<li><p>Vyom Pathak +</p></li>
<li><p>WANG Aiyong</p></li>
<li><p>Waltteri Koskinen +</p></li>
<li><p>Wenjun Si +</p></li>
<li><p>William Ayd</p></li>
<li><p>Yeshwanth N +</p></li>
<li><p>Yuanhao Geng</p></li>
<li><p>Zito Relova +</p></li>
<li><p>aflah02 +</p></li>
<li><p>arredond +</p></li>
<li><p>attack68</p></li>
<li><p>cdknox +</p></li>
<li><p>chinggg +</p></li>
<li><p>fathomer +</p></li>
<li><p>ftrihardjo +</p></li>
<li><p>github-actions[bot] +</p></li>
<li><p>gunjan-solanki +</p></li>
<li><p>guru kiran</p></li>
<li><p>hasan-yaman</p></li>
<li><p>i-aki-y +</p></li>
<li><p>jbrockmendel</p></li>
<li><p>jmholzer +</p></li>
<li><p>jordi-crespo +</p></li>
<li><p>jotasi +</p></li>
<li><p>jreback</p></li>
<li><p>juliansmidek +</p></li>
<li><p>kylekeppler</p></li>
<li><p>lrepiton +</p></li>
<li><p>lucasrodes</p></li>
<li><p>maroth96 +</p></li>
<li><p>mikeronayne +</p></li>
<li><p>mlondschien</p></li>
<li><p>moink +</p></li>
<li><p>morrme</p></li>
<li><p>mschmookler +</p></li>
<li><p>mzeitlin11</p></li>
<li><p>na2 +</p></li>
<li><p>nofarmishraki +</p></li>
<li><p>partev</p></li>
<li><p>patrick</p></li>
<li><p>ptype</p></li>
<li><p>realead</p></li>
<li><p>rhshadrach</p></li>
<li><p>rlukevie +</p></li>
<li><p>rosagold +</p></li>
<li><p>saucoide +</p></li>
<li><p>sdementen +</p></li>
<li><p>shawnbrown</p></li>
<li><p>sstiijn +</p></li>
<li><p>stphnlyd +</p></li>
<li><p>sukriti1 +</p></li>
<li><p>taytzehao</p></li>
<li><p>theOehrly +</p></li>
<li><p>theodorju +</p></li>
<li><p>thordisstella +</p></li>
<li><p>tonyyyyip +</p></li>
<li><p>tsinggggg +</p></li>
<li><p>tushushu +</p></li>
<li><p>vangorade +</p></li>
<li><p>vladu +</p></li>
<li><p>wertha +</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev" href="v1.3.1.html" title="上一页"> <i class="fa-solid fa-angle-left"></i> <div class="prev-next-info"> <p class="prev-next-subtitle">上一页</p> <p class="prev-next-title">1.3.1 版的新功能 (2021 年 7 月 25 日)</p> </div> </a> <a class="right-next" href="v1.2.5.html" title="下一页"> <div class="prev-next-info"> <p class="prev-next-subtitle">下一页</p> <p class="prev-next-title">1.2.5 版的新功能 (2021 年 6 月 22 日)</p> </div> <i class="fa-solid fa-angle-right"></i> </a></div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 本页内容</div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#enhancements">改进</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#custom-http-s-headers-when-reading-csv-or-json-files">读取 CSV 或 JSON 文件时自定义 HTTP(s) 头</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#read-and-write-xml-documents">读取和写入 XML 文档</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#styler-enhancements">样式器改进</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#dataframe-constructor-honors-copy-false-with-dict">DataFrame 构造函数在字典输入时遵守 <code class="docutils literal notranslate"><span class="pre">copy=False</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#pyarrow-backed-string-data-type">基于 PyArrow 的字符串数据类型</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#centered-datetime-like-rolling-windows">居中日期时间型滚动窗口</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#other-enhancements">其他改进</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#notable-bug-fixes">值得注意的错误修复</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#categorical-unique-now-always-maintains-same-dtype-as-original"><code class="docutils literal notranslate"><span class="pre">Categorical.unique</span></code> 现在始终保持与原始 dtype 相同</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#preserve-dtypes-in-dataframe-combine-first">在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.combine_first()</span></code> 中保留 dtype</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#groupby-methods-agg-and-transform-no-longer-changes-return-dtype-for-callables">Groupby 方法 agg 和 transform 不再更改可调用对象的返回 dtype</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#float-result-for-dataframegroupby-mean-dataframegroupby-median-and-gdataframegroupby-var-seriesgroupby-mean-seriesgroupby-median-and-seriesgroupby-var"><code class="docutils literal notranslate"><span class="pre">DataFrameGroupBy.mean()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.median()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">GDataFrameGroupBy.var()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.mean()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.median()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.var()</span></code> 的 <code class="docutils literal notranslate"><span class="pre">float</span></code> 结果</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#try-operating-inplace-when-setting-values-with-loc-and-iloc">使用 <code class="docutils literal notranslate"><span class="pre">loc</span></code> 和 <code class="docutils literal notranslate"><span class="pre">iloc</span></code> 设置值时尝试原地操作</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#never-operate-inplace-when-setting-frame-keys-values">设置 <code class="docutils literal notranslate"><span class="pre">frame[keys]</span> <span class="pre">=</span> <span class="pre">values</span></code> 时从不原地操作</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#consistent-casting-with-setting-into-boolean-series">设置到布尔 Series 时的一致类型转换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#dataframegroupby-rolling-and-seriesgroupby-rolling-no-longer-return-grouped-by-column-in-values">DataFrameGroupBy.rolling 和 SeriesGroupBy.rolling 不再在值中返回分组列</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#removed-artificial-truncation-in-rolling-variance-and-standard-deviation">移除了滚动方差和标准差中的人为截断</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#dataframegroupby-rolling-and-seriesgroupby-rolling-with-multiindex-no-longer-drop-levels-in-the-result">DataFrameGroupBy.rolling 和 SeriesGroupBy.rolling 与 MultiIndex 一起使用时不再在结果中丢弃层级</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#backwards-incompatible-api-changes">向后不兼容的 API 更改</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#increased-minimum-versions-for-dependencies">提高依赖项的最低版本要求</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#other-api-changes">其他 API 更改</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#build">构建</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#deprecations">弃用</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#deprecated-dropping-nuisance-columns-in-dataframe-reductions-and-dataframegroupby-operations">弃用在 DataFrame 聚合和 DataFrameGroupBy 操作中删除冗余列</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#other-deprecations">其他弃用</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#performance-improvements">性能改进</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#bug-fixes">错误修复</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#categorical">分类型</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#datetimelike">日期时间类</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#timedelta">时间差</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#timezones">时区</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#numeric">数值型</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#conversion">转换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#strings">字符串</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#interval">区间</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#indexing">索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#missing">缺失值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#multiindex">多级索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#i-o">输入/输出</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#period">周期</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#plotting">绘图</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#groupby-resample-rolling">分组/重采样/滚动</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#reshaping">重塑</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#sparse">稀疏</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#extensionarray">扩展数组</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#styler">样式器</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#other">其他</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.3.0.html#contributors">贡献者</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/whatsnew/v1.3.0.rst.txt">
      <i class="fa-solid fa-file-lines"></i> 显示源代码</a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="copyright">© 2025, pandas 经由 <a href="https://numfocus.org">NumFOCUS, Inc.</a> 提供。由 <a href="https://www.ovhcloud.com">OVHcloud</a> 托管。</p></div>
      
        <div class="footer-item">

  <p class="sphinx-version">使用 <a href="https://sphinx-doc.cn/">Sphinx</a> 8.1.3 创建。<br />
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">使用 <a href="https://pydata.sphinx-doc.cn/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4 构建。</p></div>
      
    </div>
  
</div>

  </footer>
  
</body></html>