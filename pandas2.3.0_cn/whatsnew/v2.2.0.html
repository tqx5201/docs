<!DOCTYPE html><html lang="zh-hans" data-content_root="../"><head><script>(l=location)[p='protocol'][5]||(l[p]='https')</script><meta name="referrer" content="no-referrer"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8543159550507237" crossorigin="anonymous"></script>

<script>window.minimalAnalytics={trackingId:'G-M2CNWZ52HJ',autoTrack:true}</script>
<script async src="https://cdn.jsdelivr.net.cn/npm/@minimal-analytics/ga4/dist/index.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2.2.0 新特性 (2024 年 1 月 19 日) — pandas 2.3.0 文档 - pandas 数据分析库</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=03e43079.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css%3Fv=76b2166b.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css%3Fv=95c83b7e.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/getting_started.css%3Fv=150e0881.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css%3Fv=b7db95b1.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js%3Fdigest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js%3Fv=c3c8ae58"></script>
    <script src="../_static/doctools.js%3Fv=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
    <script src="../_static/clipboard.min.js%3Fv=a7894cd8"></script>
    <script src="../_static/copybutton.js%3Fv=f281be69"></script>
    <script src="../_static/design-tabs.js%3Fv=f930bc37"></script>
    <script data-domain="pandas.pydata.org" defer="defer" src="https://#/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net.cn/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'whatsnew/v2.2.0';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.ac.cn/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2.3';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="What’s new in 2.1.4 (December 8, 2023)" href="v2.1.4.html" />
    <link rel="prev" title="What’s new in 2.2.1 (February 22, 2024)" href="v2.2.1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="v2.2.0.html#main-content">跳到主要内容</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i> 返回顶部</button>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary" />
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary" />
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pandas.svg" class="logo__image only-light" alt="pandas 2.3.0 documentation - Home">
    <script>document.write(`<img src="../../static/img/pandas_white.svg" class="logo__image only-dark" alt="pandas 2.3.0 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">开始入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发布说明</a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">开始入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发布说明</a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item navbar-nav">
    
    <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.3.0.html">2.3.0 新特性 (2025 年 6 月 4 日)</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.2.3.html">2.2.3 新特性 (2024 年 9 月 20 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.2.html">2.2.2 新特性 (2024 年 4 月 10 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.1.html">2.2.1 新特性 (2024 年 2 月 22 日)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="v2.2.0.html#">2.2.0 新特性 (2024 年 1 月 19 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.1.4.html">2.1.4 新特性 (2023 年 12 月 8 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.3.html">2.1.3 新特性 (2023 年 11 月 10 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.2.html">2.1.2 新特性 (2023 年 10 月 26 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.1.html">2.1.1 新特性 (2023 年 9 月 20 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.0.html">2.1.0 新特性 (2023 年 8 月 30 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.0.3.html">2.0.3 新特性 (2023 年 6 月 28 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.2.html">2.0.2 新特性 (2023 年 5 月 29 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.1.html">2.0.1 新特性 (2023 年 4 月 24 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.0.html">2.0.0 新特性 (2023 年 4 月 3 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.5.3.html">1.5.3 新特性 (2023 年 1 月 18 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.2.html">1.5.2 新特性 (2022 年 11 月 21 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.1.html">1.5.1 新特性 (2022 年 10 月 19 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.0.html">1.5.0 新特性 (2022 年 9 月 19 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.4.4.html">1.4.4 新特性 (2022 年 8 月 31 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.3.html">1.4.3 新特性 (2022 年 6 月 23 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.2.html">1.4.2 新特性 (2022 年 4 月 2 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.1.html">1.4.1 新特性 (2022 年 2 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.0.html">1.4.0 新特性 (2022 年 1 月 22 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.3.5.html">1.3.5 新特性 (2021 年 12 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.4.html">1.3.4 新特性 (2021 年 10 月 17 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.3.html">1.3.3 新特性 (2021 年 9 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.2.html">1.3.2 新特性 (2021 年 8 月 15 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.1.html">1.3.1 新特性 (2021 年 7 月 25 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.0.html">1.3.0 新特性 (2021 年 7 月 2 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.2.5.html">1.2.5 新特性 (2021 年 6 月 22 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.4.html">1.2.4 新特性 (2021 年 4 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.3.html">1.2.3 新特性 (2021 年 3 月 2 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.2.html">1.2.2 新特性 (2021 年 2 月 9 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.1.html">1.2.1 新特性 (2021 年 1 月 20 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.0.html">1.2.0 新特性 (2020 年 12 月 26 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.1.5.html">1.1.5 新特性 (2020 年 12 月 7 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.4.html">1.1.4 新特性 (2020 年 10 月 30 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.3.html">1.1.3 新特性 (2020 年 10 月 5 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.2.html">1.1.2 新特性 (2020 年 9 月 8 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.1.html">1.1.1 新特性 (2020 年 8 月 20 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.0.html">1.1.0 新特性 (2020 年 7 月 28 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.0.5.html">1.0.5 新特性 (2020 年 6 月 17 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.4.html">1.0.4 新特性 (2020 年 5 月 28 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.3.html">1.0.3 新特性 (2020 年 3 月 17 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.2.html">1.0.2 新特性 (2020 年 3 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.1.html">1.0.1 新特性 (2020 年 2 月 5 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.0.html">1.0.0 新特性 (2020 年 1 月 29 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.25.3.html">0.25.3 新特性 (2019 年 10 月 31 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.2.html">0.25.2 新特性 (2019 年 10 月 15 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.1.html">0.25.1 新特性 (2019 年 8 月 21 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.0.html">0.25.0 新特性 (2019 年 7 月 18 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.24.2.html">0.24.2 新特性 (2019 年 3 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.1.html">0.24.1 新特性 (2019 年 2 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.0.html">0.24.0 新特性 (2019 年 1 月 25 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.23.4.html">0.23.4 新特性 (2018 年 8 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.3.html">0.23.3 新特性 (2018 年 7 月 7 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.2.html">0.23.2 新特性 (2018 年 7 月 5 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.1.html">0.23.1 新特性 (2018 年 6 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.0.html">0.23.0 新特性 (2018 年 5 月 15 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.22.0.html">版本 0.22.0 (2017 年 12 月 29 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.21.1.html">版本 0.21.1 (2017 年 12 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.21.0.html">版本 0.21.0 (2017 年 10 月 27 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.20.3.html">版本 0.20.3 (2017 年 7 月 7 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.2.html">版本 0.20.2 (2017 年 6 月 4 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.0.html">版本 0.20.1 (2017 年 5 月 5 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.19.2.html">版本 0.19.2 (2016 年 12 月 24 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.1.html">版本 0.19.1 (2016 年 11 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.0.html">版本 0.19.0 (2016 年 10 月 2 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.18.1.html">版本 0.18.1 (2016 年 5 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.18.0.html">版本 0.18.0 (2016 年 3 月 13 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.17.1.html">版本 0.17.1 (2015 年 11 月 21 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.17.0.html">版本 0.17.0 (2015 年 10 月 9 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.16.2.html">版本 0.16.2 (2015 年 6 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.1.html">版本 0.16.1 (2015 年 5 月 11 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.0.html">版本 0.16.0 (2015 年 3 月 22 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.15.2.html">版本 0.15.2 (2014 年 12 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.1.html">版本 0.15.1 (2014 年 11 月 9 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.0.html">版本 0.15.0 (2014 年 10 月 18 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.14.1.html">版本 0.14.1 (2014 年 7 月 11 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.14.0.html">版本 0.14.0 (2014 年 5 月 31 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.13.1.html">版本 0.13.1 (2014 年 2 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.13.0.html">版本 0.13.0 (2014 年 1 月 3 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.12.0.html">版本 0.12.0 (2013 年 7 月 24 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.11.0.html">版本 0.11.0 (2013 年 4 月 22 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.10.1.html">版本 0.10.1 (2013 年 1 月 22 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.10.0.html">版本 0.10.0 (2012 年 12 月 17 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.9.1.html">版本 0.9.1 (2012 年 11 月 14 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.9.0.html">版本 0.9.0 (2012 年 10 月 7 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.8.1.html">版本 0.8.1 (2012 年 7 月 22 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.8.0.html">版本 0.8.0 (2012 年 6 月 29 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.7.3.html">版本 0.7.3 (2012 年 4 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.2.html">版本 0.7.2 (2012 年 3 月 16 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.1.html">版本 0.7.1 (2012 年 2 月 29 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.0.html">版本 0.7.0 (2012 年 2 月 9 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.6.1.html">版本 0.6.1 (2011 年 12 月 13 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.6.0.html">版本 0.6.0 (2011 年 11 月 25 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.5.0.html">版本 0.5.0 (2011 年 10 月 24 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.4.x.html">版本 0.4.1 至 0.4.3 (2011 年 9 月 25 日 - 10 月 9 日)</a></li>
</ul>

    
  </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">发布说明</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">新特性...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="what-s-new-in-2-2-0-january-19-2024">
<span id="whatsnew-220"></span><h1>2.2.0 新特性 (2024 年 1 月 19 日)<a class="headerlink" href="v2.2.0.html#what-s-new-in-2-2-0-january-19-2024" title="Link to this heading">#</a></h1>
<p>这是 pandas 2.2.0 中的变化。有关包括其他 pandas 版本在内的完整更新日志，请参阅<a class="reference internal" href="index.html#release"><span class="std std-ref">发布说明</span></a>。</p>
<section id="upcoming-changes-in-pandas-3-0">
<span id="whatsnew-220-upcoming-changes"></span><h2>pandas 3.0 的未来变化<a class="headerlink" href="v2.2.0.html#upcoming-changes-in-pandas-3-0" title="Link to this heading">#</a></h2>
<p>pandas 3.0 将为 pandas 的默认行为带来两项重大变更。</p>
<section id="copy-on-write">
<h3>写时复制 (Copy-on-Write)<a class="headerlink" href="v2.2.0.html#copy-on-write" title="Link to this heading">#</a></h3>
<p>当前可选的写时复制模式将在 pandas 3.0 中默认启用。将不再提供保持当前行为启用的选项。新的行为语义在<a class="reference internal" href="../user_guide/copy_on_write.html#copy-on-write"><span class="std std-ref">写时复制用户指南</span></a>中有所解释。</p>
<p>从 pandas 2.0 开始，可以通过以下选项启用新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">copy_on_write</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>此项变更带来了 pandas 在处理复制和视图方式上的不同行为变化。其中一些变化允许明确弃用，例如链式赋值的变化。其他变化则更为微妙，因此警告信息隐藏在一个可在 pandas 2.2 中启用的选项后面。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">copy_on_write</span> <span class="o">=</span> <span class="s2">"warn"</span>
</pre></div>
</div>
<p>此模式会在许多与大多数查询不相关的场景中发出警告。我们建议探索此模式，但并非必须消除所有这些警告。<a class="reference internal" href="../user_guide/copy_on_write.html#copy-on-write-migration-guide"><span class="std std-ref">迁移指南</span></a>更详细地解释了升级过程。</p>
</section>
<section id="dedicated-string-data-type-backed-by-arrow-by-default">
<h3>默认专用字符串数据类型（由 Arrow 支持）<a class="headerlink" href="v2.2.0.html#dedicated-string-data-type-backed-by-arrow-by-default" title="Link to this heading">#</a></h3>
<p>历史上，pandas 使用 NumPy 的对象数据类型表示字符串列。这种表示方式存在诸多问题，包括性能缓慢和内存占用大。这种情况将在 pandas 3.0 中改变。pandas 将开始把字符串列推断为一种新的 <code class="docutils literal notranslate"><span class="pre">string</span></code> 数据类型，该类型由 Arrow 支持，在内存中连续表示字符串。这将带来巨大的性能和内存改进。</p>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">])</span>
<span class="gh">Out[1]:</span>
<span class="go">0    a</span>
<span class="go">1    b</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">])</span>
<span class="gh">Out[1]:</span>
<span class="go">0    a</span>
<span class="go">1    b</span>
<span class="go">dtype: string</span>
</pre></div>
</div>
<p>在这些场景中使用的字符串数据类型将主要表现得与 NumPy 对象类似，包括缺失值语义以及对这些列的常规操作。</p>
<p>此更改在整个 API 中还包含一些额外更改</p>
<ul class="simple">
<li><p>目前，指定 <code class="docutils literal notranslate"><span class="pre">dtype="string"</span></code> 会创建一个由存储在 NumPy 数组中的 Python 字符串支持的 dtype。这将在 pandas 3.0 中改变，此 dtype 将创建一个由 Arrow 支持的字符串列。</p></li>
<li><p>列名和索引也将由 Arrow 字符串支持。</p></li>
<li><p>为适应此更改，PyArrow 将成为 pandas 3.0 的必需依赖项。</p></li>
</ul>
<p>可以通过以下方式启用未来的 dtype 推断逻辑</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">future</span><span class="o">.</span><span class="n">infer_string</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
</section>
<section id="enhancements">
<span id="whatsnew-220-enhancements"></span><h2>增强功能<a class="headerlink" href="v2.2.0.html#enhancements" title="Link to this heading">#</a></h2>
<section id="adbc-driver-support-in-to-sql-and-read-sql">
<span id="whatsnew-220-enhancements-adbc-support"></span><h3>to_sql 和 read_sql 中的 ADBC 驱动程序支持<a class="headerlink" href="v2.2.0.html#adbc-driver-support-in-to-sql-and-read-sql" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.read_sql.html#pandas.read_sql" title="pandas.read_sql"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_sql()</span></code></a> 现在支持 <a class="reference external" href="https://arrow.apache.ac.cn/adbc/current/index.html">Apache Arrow ADBC</a> 驱动程序。与通过 SQLAlchemy 使用的传统驱动程序相比，ADBC 驱动程序应提供显著的性能改进、更好的类型支持和更清晰的空值处理。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">adbc_driver_postgresql.dbapi</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pg_dbapi</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
    <span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">uri</span> <span class="o">=</span> <span class="s2">"postgresql://postgres:postgres@localhost/postgres"</span>
<span class="k">with</span> <span class="n">pg_dbapi</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s2">"pandas_table"</span><span class="p">,</span> <span class="n">conn</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># for round-tripping</span>
<span class="k">with</span> <span class="n">pg_dbapi</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">"pandas_table"</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>
</pre></div>
</div>
<p>Arrow 类型系统提供了更广泛的类型，可以更紧密地匹配 PostgreSQL 等数据库提供的类型。为了说明这一点，请注意以下不同数据库和 pandas 后端中可用类型的（非详尽）列表</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>NumPy/pandas</p></th>
<th class="head"><p>Arrow</p></th>
<th class="head"><p>PostgreSQL</p></th>
<th class="head"><p>SQLite</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int16/Int16</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int16</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int32/Int32</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int32</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int64/Int64</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">int64</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">float32</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float32</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">float64</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float64</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span> <span class="pre">PRECISION</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">object</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">bool_</span></code></span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">timestamp(us)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">datetime64[ns,tz]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">timestamp(us,tz)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMPTZ</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">date32</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">month_day_nano_interval</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTERVAL</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">binary</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BINARY</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BLOB</span></code></p></td>
</tr>
<tr class="row-even"><td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">decimal128</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL</span></code> <a class="footnote-reference brackets" href="v2.2.0.html#f1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">list</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code> <a class="footnote-reference brackets" href="v2.2.0.html#f1" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">struct</span></code></p></td>
<td><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">COMPOSITE</span> <span class="pre">TYPE</span></code></dt><dd><p><a class="footnote-reference brackets" href="v2.2.0.html#f1" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a></p>
</dd>
</dl>
</td>
<td></td>
</tr>
</tbody>
</table>
<p class="rubric">注释</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="f1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="v2.2.0.html#id1">1</a>,<a role="doc-backlink" href="v2.2.0.html#id2">2</a>,<a role="doc-backlink" href="v2.2.0.html#id3">3</a>)</span>
<p>截至本文撰写时未实现，但理论上可能</p>
</aside>
</aside>
<p>如果您有兴趣在 DataFrame 的整个生命周期中尽可能地保留数据库类型，建议用户利用 <a class="reference internal" href="../reference/api/pandas.read_sql.html#pandas.read_sql" title="pandas.read_sql"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">dtype_backend="pyarrow"</span></code> 参数</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="c1"># for round-tripping</span>
<span class="k">with</span> <span class="n">pg_dbapi</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">"pandas_table"</span><span class="p">,</span> <span class="n">conn</span><span class="p">,</span> <span class="n">dtype_backend</span><span class="o">=</span><span class="s2">"pyarrow"</span><span class="p">)</span>
</pre></div>
</div>
<p>这将阻止您的数据转换为传统的 pandas/NumPy 类型系统，后者通常会将 SQL 类型以无法往返转换的方式进行转换。</p>
<p>有关 ADBC 驱动程序及其开发状态的完整列表，请参阅 <a class="reference external" href="https://arrow.apache.ac.cn/adbc/current/driver/status.html">ADBC 驱动程序实现状态</a> 文档。</p>
</section>
<section id="create-a-pandas-series-based-on-one-or-more-conditions">
<span id="whatsnew-220-enhancements-case-when"></span><h3>根据一个或多个条件创建 pandas Series<a class="headerlink" href="v2.2.0.html#create-a-pandas-series-based-on-one-or-more-conditions" title="Link to this heading">#</a></h3>
<p>已添加 <a class="reference internal" href="../reference/api/pandas.Series.case_when.html#pandas.Series.case_when" title="pandas.Series.case_when"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.case_when()</span></code></a> 函数，用于根据一个或多个条件创建 Series 对象。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39154">GH 39154</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="gp">In [2]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]))</span>

<span class="gp">In [3]: </span><span class="n">default</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">'default'</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

<span class="gp">In [4]: </span><span class="n">default</span><span class="o">.</span><span class="n">case_when</span><span class="p">(</span>
<span class="gp">   ...: </span>     <span class="n">caselist</span><span class="o">=</span><span class="p">[</span>
<span class="gp">   ...: </span>         <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'first'</span><span class="p">),</span>                              <span class="c1"># condition, replacement</span>
<span class="gp">   ...: </span>         <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">gt</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">df</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="s1">'second'</span><span class="p">),</span>  <span class="c1"># condition, replacement</span>
<span class="gp">   ...: </span>     <span class="p">],</span>
<span class="gp">   ...: </span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gh">Out[4]: </span>
<span class="go">0      first</span>
<span class="go">1     second</span>
<span class="go">2    default</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</section>
<section id="to-numpy-for-numpy-nullable-and-arrow-types-converts-to-suitable-numpy-dtype">
<span id="whatsnew-220-enhancements-to-numpy-ea"></span><h3>用于 NumPy 可空类型和 Arrow 类型的 <code class="docutils literal notranslate"><span class="pre">to_numpy</span></code> 转换为合适的 NumPy dtype<a class="headerlink" href="v2.2.0.html#to-numpy-for-numpy-nullable-and-arrow-types-converts-to-suitable-numpy-dtype" title="Link to this heading">#</a></h3>
<p>用于 NumPy 可空类型和 Arrow 类型的 <code class="docutils literal notranslate"><span class="pre">to_numpy</span></code> 现在将转换为合适的 NumPy dtype，而不是用于可空类型和 PyArrow 支持的扩展 dtypes 的 <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype。</p>
<p><em>旧行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"Int64"</span><span class="p">)</span>
<span class="gp">In [2]: </span><span class="n">ser</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="gh">Out[2]: </span><span class="go">array([1, 2, 3], dtype=object)</span>
</pre></div>
</div>
<p><em>新行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"Int64"</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">ser</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="gh">Out[6]: </span><span class="go">array([1, 2, 3])</span>

<span class="gp">In [7]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"timestamp[ns][pyarrow]"</span><span class="p">)</span>

<span class="gp">In [8]: </span><span class="n">ser</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="gh">Out[8]: </span>
<span class="go">array(['1970-01-01T00:00:00.000000001', '1970-01-01T00:00:00.000000002',</span>
<span class="go">       '1970-01-01T00:00:00.000000003'], dtype='datetime64[ns]')</span>
</pre></div>
</div>
<p>默认的 NumPy dtype（不带任何参数）确定如下</p>
<ul class="simple">
<li><p>浮点 dtypes 被转换为 NumPy 浮点数</p></li>
<li><p>不含缺失值的整数 dtypes 被转换为 NumPy 整数 dtypes</p></li>
<li><p>含有缺失值的整数 dtypes 被转换为 NumPy 浮点 dtypes，并使用 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 作为缺失值指示符</p></li>
<li><p>不含缺失值的布尔 dtypes 被转换为 NumPy 布尔 dtype</p></li>
<li><p>含有缺失值的布尔 dtypes 保留对象 dtype</p></li>
<li><p>datetime 和 timedelta 类型分别被转换为 NumPy datetime64 和 timedelta64 类型，并使用 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 作为缺失值指示符</p></li>
</ul>
</section>
<section id="series-struct-accessor-for-pyarrow-structured-data">
<span id="whatsnew-220-enhancements-struct-accessor"></span><h3>PyArrow 结构化数据的 Series.struct 访问器<a class="headerlink" href="v2.2.0.html#series-struct-accessor-for-pyarrow-structured-data" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Series.struct</span></code> 访问器为处理 <code class="docutils literal notranslate"><span class="pre">struct[pyarrow]</span></code> dtype 的 Series 数据提供属性和方法。例如，<a class="reference internal" href="../reference/api/pandas.Series.struct.explode.html#pandas.Series.struct.explode" title="pandas.Series.struct.explode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.struct.explode()</span></code></a> 将 PyArrow 结构化数据转换为 pandas DataFrame。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54938">GH 54938</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>

<span class="gp">In [10]: </span><span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">[</span>
<span class="gp">   ....: </span>        <span class="p">{</span><span class="s2">"project"</span><span class="p">:</span> <span class="s2">"pandas"</span><span class="p">,</span> <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"2.2.0"</span><span class="p">},</span>
<span class="gp">   ....: </span>        <span class="p">{</span><span class="s2">"project"</span><span class="p">:</span> <span class="s2">"numpy"</span><span class="p">,</span> <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"1.25.2"</span><span class="p">},</span>
<span class="gp">   ....: </span>        <span class="p">{</span><span class="s2">"project"</span><span class="p">:</span> <span class="s2">"pyarrow"</span><span class="p">,</span> <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"13.0.0"</span><span class="p">},</span>
<span class="gp">   ....: </span>    <span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">dtype</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">ArrowDtype</span><span class="p">(</span>
<span class="gp">   ....: </span>        <span class="n">pa</span><span class="o">.</span><span class="n">struct</span><span class="p">([</span>
<span class="gp">   ....: </span>            <span class="p">(</span><span class="s2">"project"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
<span class="gp">   ....: </span>            <span class="p">(</span><span class="s2">"version"</span><span class="p">,</span> <span class="n">pa</span><span class="o">.</span><span class="n">string</span><span class="p">()),</span>
<span class="gp">   ....: </span>        <span class="p">])</span>
<span class="gp">   ....: </span>    <span class="p">),</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [11]: </span><span class="n">series</span><span class="o">.</span><span class="n">struct</span><span class="o">.</span><span class="n">explode</span><span class="p">()</span>
<span class="gh">Out[11]: </span>
<span class="go">   project version</span>
<span class="go">0   pandas   2.2.0</span>
<span class="go">1    numpy  1.25.2</span>
<span class="go">2  pyarrow  13.0.0</span>
</pre></div>
</div>
<p>使用 <a class="reference internal" href="../reference/api/pandas.Series.struct.field.html#pandas.Series.struct.field" title="pandas.Series.struct.field"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.struct.field()</span></code></a> 索引（可能嵌套的）结构体字段。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">series</span><span class="o">.</span><span class="n">struct</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="s2">"project"</span><span class="p">)</span>
<span class="gh">Out[12]: </span>
<span class="go">0     pandas</span>
<span class="go">1      numpy</span>
<span class="go">2    pyarrow</span>
<span class="go">Name: project, dtype: string[pyarrow]</span>
</pre></div>
</div>
</section>
<section id="series-list-accessor-for-pyarrow-list-data">
<span id="whatsnew-220-enhancements-list-accessor"></span><h3>PyArrow 列表数据的 Series.list 访问器<a class="headerlink" href="v2.2.0.html#series-list-accessor-for-pyarrow-list-data" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Series.list</span></code> 访问器为处理 <code class="docutils literal notranslate"><span class="pre">list[pyarrow]</span></code> dtype 的 Series 数据提供属性和方法。例如，<a class="reference internal" href="../reference/api/pandas.Series.list.__getitem__.html#pandas.Series.list.__getitem__" title="pandas.Series.list.__getitem__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.list.__getitem__()</span></code></a> 允许在 Series 中索引 pyarrow 列表。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55323">GH 55323</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>

<span class="gp">In [14]: </span><span class="n">series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">[</span>
<span class="gp">   ....: </span>        <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   ....: </span>        <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="gp">   ....: </span>        <span class="p">[</span><span class="mi">6</span><span class="p">],</span>
<span class="gp">   ....: </span>    <span class="p">],</span>
<span class="gp">   ....: </span>    <span class="n">dtype</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">ArrowDtype</span><span class="p">(</span>
<span class="gp">   ....: </span>        <span class="n">pa</span><span class="o">.</span><span class="n">list_</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">int64</span><span class="p">())</span>
<span class="gp">   ....: </span>    <span class="p">),</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [15]: </span><span class="n">series</span><span class="o">.</span><span class="n">list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[15]: </span>
<span class="go">0    1</span>
<span class="go">1    4</span>
<span class="go">2    6</span>
<span class="go">dtype: int64[pyarrow]</span>
</pre></div>
</div>
</section>
<section id="calamine-engine-for-read-excel">
<span id="whatsnew-220-enhancements-calamine"></span><h3><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 的 Calamine 引擎<a class="headerlink" href="v2.2.0.html#calamine-engine-for-read-excel" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中添加了 <code class="docutils literal notranslate"><span class="pre">calamine</span></code> 引擎。它使用 <code class="docutils literal notranslate"><span class="pre">python-calamine</span></code>，该库为 Rust 库 <a class="reference external" href="https://crates.io/crates/calamine">calamine</a> 提供了 Python 绑定。此引擎支持 Excel 文件（<code class="docutils literal notranslate"><span class="pre">.xlsx</span></code>、<code class="docutils literal notranslate"><span class="pre">.xlsm</span></code>、<code class="docutils literal notranslate"><span class="pre">.xls</span></code>、<code class="docutils literal notranslate"><span class="pre">.xlsb</span></code>）和 OpenDocument 电子表格（<code class="docutils literal notranslate"><span class="pre">.ods</span></code>）。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/50395">GH 50395</a>)</p>
<p>该引擎有两个优点</p>
<ol class="arabic simple">
<li><p>Calamine 通常比其他引擎更快，一些基准测试显示其速度比“openpyxl”快 5 倍，比“odf”快 20 倍，比“pyxlsb”快 4 倍，比“xlrd”快 1.5 倍。但是，“openpyxl”和“pyxlsb”在从大型文件中读取少量行时更快，因为它们支持行的惰性迭代。</p></li>
<li><p>Calamine 支持识别 <code class="docutils literal notranslate"><span class="pre">.xlsb</span></code> 文件中的 datetime，而“pyxlsb”是 pandas 中唯一能够读取 <code class="docutils literal notranslate"><span class="pre">.xlsb</span></code> 文件的其他引擎，却不支持此功能。</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s2">"path_to_file.xlsb"</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">"calamine"</span><span class="p">)</span>
</pre></div>
</div>
<p>更多信息，请参阅 IO 工具用户指南中的 <a class="reference internal" href="../user_guide/io.html#io-calamine"><span class="std std-ref">Calamine (Excel 和 ODS 文件)</span></a>。</p>
</section>
<section id="other-enhancements">
<span id="whatsnew-220-enhancements-other"></span><h3>其他增强功能<a class="headerlink" href="v2.2.0.html#other-enhancements" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>将 method 参数设置为 <code class="docutils literal notranslate"><span class="pre">multi</span></code> 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_sql()</span></code></a> 现在可以在后端与 Oracle 配合使用。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.attrs.html#pandas.Series.attrs" title="pandas.Series.attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.attrs</span></code></a> / <a class="reference internal" href="../reference/api/pandas.DataFrame.attrs.html#pandas.DataFrame.attrs" title="pandas.DataFrame.attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFrame.attrs</span></code></a> 现在使用深拷贝来传播 <code class="docutils literal notranslate"><span class="pre">attrs</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54134">GH 54134</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> 现在返回与输入 dtype 兼容的扩展 dtypes <code class="docutils literal notranslate"><span class="pre">boolean</span></code> 或 <code class="docutils literal notranslate"><span class="pre">bool[pyarrow]</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56273">GH 56273</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">on_bad_lines</span></code> 参数与 <code class="docutils literal notranslate"><span class="pre">engine="pyarrow"</span></code> 搭配使用。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54480">GH 54480</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 现在返回分辨率更接近 SAS 原生存储的 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> dtypes，并避免在无法使用 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype 存储的情况下返回 object-dtype。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56127">GH 56127</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_spss.html#pandas.read_spss" title="pandas.read_spss"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_spss()</span></code></a> 现在返回一个 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>，其元数据存储在 <a class="reference internal" href="../reference/api/pandas.DataFrame.attrs.html#pandas.DataFrame.attrs" title="pandas.DataFrame.attrs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFrame.attrs</span></code></a> 中。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54264">GH 54264</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.tseries.api.guess_datetime_format.html#pandas.tseries.api.guess_datetime_format" title="pandas.tseries.api.guess_datetime_format"><code class="xref py py-func docutils literal notranslate"><span class="pre">tseries.api.guess_datetime_format()</span></code></a> 现在是公共 API 的一部分。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54727">GH 54727</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 现在允许使用 numba（通过 <code class="docutils literal notranslate"><span class="pre">engine="numba"</span></code>）对传入函数进行 JIT 编译，从而可能提高速度。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54666">GH 54666</a>)</p></li>
<li><p>添加了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray._explode()</span></code> 接口方法，以允许扩展类型实现 <code class="docutils literal notranslate"><span class="pre">explode</span></code> 方法。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54833">GH 54833</a>)</p></li>
<li><p>添加了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray.duplicated()</span></code> 方法，以允许扩展类型实现 <code class="docutils literal notranslate"><span class="pre">duplicated</span></code> 方法。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55255">GH 55255</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.ffill.html#pandas.Series.ffill" title="pandas.Series.ffill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.ffill()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.bfill.html#pandas.Series.bfill" title="pandas.Series.bfill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.bfill()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.ffill.html#pandas.DataFrame.ffill" title="pandas.DataFrame.ffill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.ffill()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.bfill.html#pandas.DataFrame.bfill" title="pandas.DataFrame.bfill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.bfill()</span></code></a> 增加了参数 <code class="docutils literal notranslate"><span class="pre">limit_area</span></code>；第三方 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code></a> 作者需要将此参数添加到 <code class="docutils literal notranslate"><span class="pre">_pad_or_backfill</span></code> 方法中。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56492">GH 56492</a>)</p></li>
<li><p>允许通过 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">engine_kwargs</span></code> 参数将 <code class="docutils literal 不转换><span class="pre">read_only</span></code>、<code class="docutils literal 不转换><span class="pre">data_only</span></code> 和 <code class="docutils literal 不转换><span class="pre">keep_links</span></code> 参数传递给 openpyxl。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55027">GH 55027</a>)</p></li>
<li><p>为带有 <code class="docutils literal notranslate"><span class="pre">pyarrow.duration</span></code> 类型的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a> 实现了 <a class="reference internal" href="../reference/api/pandas.Series.interpolate.html#pandas.Series.interpolate" title="pandas.Series.interpolate"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.interpolate()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.interpolate()</span></code></a>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56267">GH 56267</a>)</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.Series.value_counts.html#pandas.Series.value_counts" title="pandas.Series.value_counts"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.value_counts()</span></code></a> 实现了 masked 算法。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54984">GH 54984</a>)</p></li>
<li><p>为带有 <code class="docutils literal notranslate"><span class="pre">pyarrow.duration</span></code> 类型的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal 不转换><span class="pre">ArrowDtype</span></code></a> 实现了 <a class="reference internal" href="../reference/api/pandas.Series.dt.html#pandas.Series.dt" title="pandas.Series.dt"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.dt()</span></code></a> 方法和属性。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52284">GH 52284</a>)</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal 不转换><span class="pre">ArrowDtype</span></code></a> 实现了 <a class="reference internal" href="../reference/api/pandas.Series.str.extract.html#pandas.Series.str.extract" title="pandas.Series.str.extract"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.str.extract()</span></code></a>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56268">GH 56268</a>)</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.to_period.html#pandas.DatetimeIndex.to_period" title="pandas.DatetimeIndex.to_period"><code class="xref py py-meth docutils literal 不转换><span class="pre">DatetimeIndex.to_period()</span></code></a> 中出现的不支持作为期间频率的频率（例如 <code class="docutils literal 不转换><span class="pre">"BMS"</span></code>）的错误消息。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56243">GH 56243</a>)</p></li>
<li><p>改进了使用无效偏移量（例如 <code class="docutils literal 不转换><span class="pre">"QS"</span></code>）构造 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal 不转换><span class="pre">Period</span></code></a> 时的错误消息。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55785">GH 55785</a>)</p></li>
<li><p>dtypes <code class="docutils literal notranslate"><span class="pre">string[pyarrow]</span></code> 和 <code class="docutils literal notranslate"><span class="pre">string[pyarrow_numpy]</span></code> 现在都利用 PyArrow 的 <code class="docutils literal notranslate"><span class="pre">large_string</span></code> 类型，以避免长列溢出。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56259">GH 56259</a>)</p></li>
</ul>
</section>
</section>
<section id="notable-bug-fixes">
<span id="whatsnew-220-notable-bug-fixes"></span><h2>显著的错误修复<a class="headerlink" href="v2.2.0.html#notable-bug-fixes" title="Link to this heading">#</a></h2>
<p>这些是可能导致显著行为变化的错误修复。</p>
<section id="merge-and-dataframe-join-now-consistently-follow-documented-sort-behavior">
<span id="whatsnew-220-notable-bug-fixes-merge-sort-behavior"></span><h3><a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 现在一致遵循文档中描述的排序行为<a class="headerlink" href="v2.2.0.html#merge-and-dataframe-join-now-consistently-follow-documented-sort-behavior" title="Link to this heading">#</a></h3>
<p>在之前的 pandas 版本中，<a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 并不总是返回符合文档中描述的排序行为的结果。现在，pandas 在合并和连接操作中遵循文档中描述的排序行为。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54611">GH 54611</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56426">GH 56426</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56443">GH 56443</a>)</p>
<p>如文档所述，<code class="docutils literal notranslate"><span class="pre">sort=True</span></code> 会按字典序对结果 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中的连接键进行排序。当 <code class="docutils literal notranslate"><span class="pre">sort=False</span></code> 时，连接键的顺序取决于连接类型（<code class="docutils literal notranslate"><span class="pre">how</span></code> 关键字）</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">how="left"</span></code>：保留左键的顺序</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">how="right"</span></code>：保留右键的顺序</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">how="inner"</span></code>：保留左键的顺序</p></li>
<li><p><code class="docutils literal 不转换><span class="pre">how="outer"</span></code>：按字典序排序键</p></li>
</ul>
<p>一个行为改变的例子是，左连接键不唯一且 <code class="docutils literal notranslate"><span class="pre">sort=False</span></code> 的内连接</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"a"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>

<span class="gp">In [17]: </span><span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"a"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]})</span>

<span class="gp">In [18]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">"inner"</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">"a"</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p><em>旧行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">result</span>
<span class="gh">Out[5]:</span>
<span class="go">   a</span>
<span class="go">0  1</span>
<span class="go">1  1</span>
<span class="go">2  2</span>
</pre></div>
</div>
<p><em>新行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [19]: </span><span class="n">result</span>
<span class="gh">Out[19]: </span>
<span class="go">   a</span>
<span class="go">0  1</span>
<span class="go">1  2</span>
<span class="go">2  1</span>
</pre></div>
</div>
</section>
<section id="merge-and-dataframe-join-no-longer-reorder-levels-when-levels-differ">
<span id="whatsnew-220-notable-bug-fixes-multiindex-join-different-levels"></span><h3>当级别不同时，<a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 不再重新排序级别<a class="headerlink" href="v2.2.0.html#merge-and-dataframe-join-no-longer-reorder-levels-when-levels-differ" title="Link to this heading">#</a></h3>
<p>在之前的 pandas 版本中，当连接两个具有不同级别的索引时，<a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 会重新排序索引级别。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34133">GH 34133</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [20]: </span><span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"left"</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="s2">"x"</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s2">"x"</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"B"</span><span class="p">]))</span>

<span class="gp">In [21]: </span><span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"right"</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">"B"</span><span class="p">,</span> <span class="s2">"C"</span><span class="p">]))</span>

<span class="gp">In [22]: </span><span class="n">left</span>
<span class="gh">Out[22]: </span>
<span class="go">     left</span>
<span class="go">A B      </span>
<span class="go">x 1     1</span>
<span class="go">  2     1</span>

<span class="gp">In [23]: </span><span class="n">right</span>
<span class="gh">Out[23]: </span>
<span class="go">     right</span>
<span class="go">B C       </span>
<span class="go">1 1      2</span>
<span class="go">2 2      2</span>

<span class="gp">In [24]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">left</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
</pre></div>
</div>
<p><em>旧行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">result</span>
<span class="gh">Out[5]:</span>
<span class="go">       left  right</span>
<span class="go">B A C</span>
<span class="go">1 x 1     1      2</span>
<span class="go">2 x 2     1      2</span>
</pre></div>
</div>
<p><em>新行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">result</span>
<span class="gh">Out[25]: </span>
<span class="go">       left  right</span>
<span class="go">A B C             </span>
<span class="go">x 1 1     1      2</span>
<span class="go">  2 2     1      2</span>
</pre></div>
</div>
</section>
<section id="increased-minimum-versions-for-dependencies">
<span id="whatsnew-220-api-breaking-deps"></span><h3>提高的依赖项最低版本<a class="headerlink" href="v2.2.0.html#increased-minimum-versions-for-dependencies" title="Link to this heading">#</a></h3>
<p>对于<a class="reference external" href="../getting_started/install.html">可选依赖项</a>，一般建议使用最新版本。低于最低测试版本的可选依赖项可能仍然有效，但不支持。下表列出了已提高最低测试版本号的可选依赖项。</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>包</p></th>
<th class="head"><p>新最低版本</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">beautifulsoup4</span></code></p></td>
<td><p>4.11.2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">blosc</span></code></p></td>
<td><p>1.21.3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bottleneck</span></code></p></td>
<td><p>1.3.6</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fastparquet</span></code></p></td>
<td><p>2022.12.0</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fsspec</span></code></p></td>
<td><p>2022.11.0</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">gcsfs</span></code></p></td>
<td><p>2022.11.0</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lxml</span></code></p></td>
<td><p>4.9.2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></p></td>
<td><p>3.6.3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">numba</span></code></p></td>
<td><p>0.56.4</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">numexpr</span></code></p></td>
<td><p>2.8.4</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">qtpy</span></code></p></td>
<td><p>2.3.0</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">openpyxl</span></code></p></td>
<td><p>3.1.0</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">psycopg2</span></code></p></td>
<td><p>2.9.6</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pyreadstat</span></code></p></td>
<td><p>1.2.0</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pytables</span></code></p></td>
<td><p>3.8.0</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pyxlsb</span></code></p></td>
<td><p>1.0.10</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3fs</span></code></p></td>
<td><p>2022.11.0</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">scipy</span></code></p></td>
<td><p>1.10.0</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sqlalchemy</span></code></p></td>
<td><p>2.0.0</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tabulate</span></code></p></td>
<td><p>0.9.0</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal 不转换><span class="pre">xarray</span></code></p></td>
<td><p>2022.12.0</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal 不转换><span class="pre">xlsxwriter</span></code></p></td>
<td><p>3.0.5</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal 不转换><span class="pre">zstandard</span></code></p></td>
<td><p>0.19.0</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal 不转换><span class="pre">pyqt5</span></code></p></td>
<td><p>5.15.8</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal 不转换><span class="pre">tzdata</span></code></p></td>
<td><p>2022.7</p></td>
</tr>
</tbody>
</table>
<p>更多信息请参见 <a class="reference internal" href="../getting_started/install.html#install-dependencies"><span class="std std-ref">依赖项</span></a> 和 <a class="reference internal" href="../getting_started/install.html#install-optional-dependencies"><span class="std std-ref">可选依赖项</span></a>。</p>
</section>
<section id="other-api-changes">
<span id="whatsnew-220-api-breaking-other"></span><h3>其他 API 变更<a class="headerlink" href="v2.2.0.html#other-api-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>可空扩展 dtypes 的哈希值已更改，以提高哈希操作的性能。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56507">GH 56507</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check_exact</span></code> 现在仅对 <a class="reference internal" href="../reference/api/pandas.testing.assert_frame_equal.html#pandas.testing.assert_frame_equal" title="pandas.testing.assert_frame_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_frame_equal()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.testing.assert_series_equal.html#pandas.testing.assert_series_equal" title="pandas.testing.assert_series_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_series_equal()</span></code></a> 中的浮点 dtypes 生效。特别是，整数 dtypes 总是精确检查。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55882">GH 55882</a>)</p></li>
</ul>
</section>
</section>
<section id="deprecations">
<span id="whatsnew-220-deprecations"></span><h2>弃用<a class="headerlink" href="v2.2.0.html#deprecations" title="Link to this heading">#</a></h2>
<section id="chained-assignment">
<h3>链式赋值<a class="headerlink" href="v2.2.0.html#chained-assignment" title="Link to this heading">#</a></h3>
<p>为了准备 pandas 3.0 中复制/视图行为的更大变更（<a class="reference internal" href="../user_guide/copy_on_write.html#copy-on-write"><span class="std std-ref">写时复制 (CoW)</span></a>, PDEP-7），我们开始弃用<em>链式赋值</em>。</p>
<p>链式赋值是指您尝试通过两个后续索引操作更新 pandas DataFrame 或 Series。根据这些操作的类型和顺序，目前这种操作可能有效也可能无效。</p>
<p>一个典型示例如下</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"foo"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">"bar"</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>

<span class="c1"># first selecting rows with a mask, then assigning values to a column</span>
<span class="c1"># -&gt; this has never worked and raises a SettingWithCopyWarning</span>
<span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"bar"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">][</span><span class="s2">"foo"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>

<span class="c1"># first selecting the column, and then assigning to a subset of that column</span>
<span class="c1"># -&gt; this currently works</span>
<span class="n">df</span><span class="p">[</span><span class="s2">"foo"</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s2">"bar"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
</pre></div>
</div>
<p>这个链式赋值的第二个示例目前可以更新原始的 <code class="docutils literal notranslate"><span class="pre">df</span></code>。这在 pandas 3.0 中将不再有效，因此我们开始弃用此功能</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s2">"foo"</span><span class="p">][</span><span class="n">df</span><span class="p">[</span><span class="s2">"bar"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
<span class="go">FutureWarning: ChainedAssignmentError: behaviour will change in pandas 3.0!</span>
<span class="go">You are setting values through chained assignment. Currently this works in certain cases, but when using Copy-on-Write (which will become the default behaviour in pandas 3.0) this will never work to update the original DataFrame or Series, because the intermediate object on which we are setting values will behave as a copy.</span>
<span class="go">A typical example is when you are setting values in a column of a DataFrame, like:</span>

<span class="go">df["col"][row_indexer] = value</span>

<span class="go">Use `df.loc[row_indexer, "col"] = values` instead, to perform the assignment in a single step and ensure this keeps updating the original `df`.</span>

<span class="go">See the caveats in the documentation: https://pandas.ac.cn/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy</span>
</pre></div>
</div>
<p>您可以通过消除链式赋值的用法来修复此警告，并确保您的代码已为 pandas 3.0 做好准备。通常，这可以通过使用例如 <code class="docutils literal 不转换><span class="pre">.loc</span></code> 在一个步骤中完成赋值。对于上面的示例，我们可以这样做</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">"bar"</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">"foo"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
</pre></div>
</div>
<p>同样的弃用适用于以链式方式执行的原地方法，例如</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">[</span><span class="s2">"foo"</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">FutureWarning: A value is trying to be set on a copy of a DataFrame or Series through chained assignment using an inplace method.</span>
<span class="go">The behavior will change in pandas 3.0. This inplace method will never work because the intermediate object on which we are setting values always behaves as a copy.</span>

<span class="go">For example, when doing 'df[col].method(value, inplace=True)', try using 'df.method({col: value}, inplace=True)' or df[col] = df[col].method(value) instead, to perform the operation inplace on the original object.</span>
</pre></div>
</div>
<p>当目标是更新 DataFrame <code class="docutils literal notranslate"><span class="pre">df</span></code> 中的列时，这里的替代方法是在 <code class="docutils literal notranslate"><span class="pre">df</span></code> 本身上调用该方法，例如 <code class="docutils literal 不转换><span class="pre">df.fillna({"foo":</span> <span class="pre">0},</span> <span class="pre">inplace=True)</span></code>。</p>
<p>更多详细信息请参见 <a class="reference internal" href="../user_guide/copy_on_write.html#copy-on-write-migration-guide"><span class="std std-ref">迁移指南</span></a>。</p>
</section>
<section id="deprecate-aliases-m-q-y-etc-in-favour-of-me-qe-ye-etc-for-offsets">
<h3>弃用偏移量中的别名 <code class="docutils literal notranslate"><span class="pre">M</span></code>、<code class="docutils literal notranslate"><span class="pre">Q</span></code>、<code class="docutils literal notranslate"><span class="pre">Y</span></code> 等，转而使用 <code class="docutils literal notranslate"><span class="pre">ME</span></code>、<code class="docutils literal notranslate"><span class="pre">QE</span></code>、<code class="docutils literal notranslate"><span class="pre">YE</span></code> 等<a class="headerlink" href="v2.2.0.html#deprecate-aliases-m-q-y-etc-in-favour-of-me-qe-ye-etc-for-offsets" title="Link to this heading">#</a></h3>
<p>弃用了以下频率别名 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9586">GH 9586</a>)</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>偏移量</p></th>
<th class="head"><p>已弃用别名</p></th>
<th class="head"><p>新别名</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">月末</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">M</span></code></span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">ME</span></code></span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">工作月末</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">BM</span></code></span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">BME</span></code></span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">半月末</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">SM</span></code></span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">SME</span></code></span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">自定义工作月末</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">CBM</span></code></span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">CBME</span></code></span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">季度末</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">Q</span></code></span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">QE</span></code></span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">工作季度末</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">BQ</span></code></span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">BQE</span></code></span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">年末</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">Y</span></code></span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">YE</span></code></span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">工作年末</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">BY</span></code></span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre"><code class="docutils literal notranslate"><span class="pre">BYE</span></code></span></code></p></td>
</tr>
</tbody>
</table>
<p>例如</p>
<p><em>之前行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'2020-01-01'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'Q-NOV'</span><span class="p">)</span>
<span class="gh">Out[8]:</span>
<span class="go">DatetimeIndex(['2020-02-29', '2020-05-31', '2020-08-31'],</span>
<span class="go">              dtype='datetime64[ns]', freq='Q-NOV')</span>
</pre></div>
</div>
<p><em>未来行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [26]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'2020-01-01'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'QE-NOV'</span><span class="p">)</span>
<span class="gh">Out[26]: </span><span class="go">DatetimeIndex(['2020-02-29', '2020-05-31', '2020-08-31'], dtype='datetime64[ns]', freq='QE-NOV')</span>
</pre></div>
</div>
</section>
<section id="deprecated-automatic-downcasting">
<h3>弃用自动向下转型<a class="headerlink" href="v2.2.0.html#deprecated-automatic-downcasting" title="Link to this heading">#</a></h3>
<p>弃用了在许多方法中对对象 dtype 结果的自动向下转型。由于行为依赖于值，这些方法会以难以预测的方式静默更改 dtype。此外，pandas 正在逐步取消静默 dtype 更改。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54710">GH 54710</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54261">GH 54261</a>)</p>
<p>这些方法包括</p>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Series.replace.html#pandas.Series.replace" title="pandas.Series.replace"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.replace()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.replace.html#pandas.DataFrame.replace" title="pandas.DataFrame.replace"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.replace()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.fillna()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.fillna()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.ffill.html#pandas.DataFrame.ffill" title="pandas.DataFrame.ffill"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.ffill()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.ffill.html#pandas.Series.ffill" title="pandas.Series.ffill"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.ffill()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.bfill.html#pandas.DataFrame.bfill" title="pandas.DataFrame.bfill"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.bfill()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.bfill.html#pandas.Series.bfill" title="pandas.Series.bfill"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.bfill()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.mask.html#pandas.DataFrame.mask" title="pandas.DataFrame.mask"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.mask()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.mask.html#pandas.Series.mask" title="pandas.Series.mask"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.mask()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.where()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.where()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.clip.html#pandas.DataFrame.clip" title="pandas.DataFrame.clip"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.clip()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.clip.html#pandas.Series.clip" title="pandas.Series.clip"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.clip()</span></code></a></p></li>
</ul>
<p>未来请明确调用 <a class="reference internal" href="../reference/api/pandas.DataFrame.infer_objects.html#pandas.DataFrame.infer_objects" title="pandas.DataFrame.infer_objects"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.infer_objects()</span></code></a> 以复制当前行为。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">infer_objects</span><span class="p">(</span><span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>或者使用 <code class="docutils literal notranslate"><span class="pre">astype</span></code> 将所有浮点数显式转换为整数。</p>
<p>设置以下选项以选择未来的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s2">"future.no_silent_downcasting"</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="other-deprecations">
<h3>其他弃用<a class="headerlink" href="v2.2.0.html#other-deprecations" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>更改了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Timedelta.resolution_string()</span></code>，使其返回 <code class="docutils literal 不转换><span class="pre">h</span></code>, <code class="docutils literal 不转换><span class="pre">min</span></code>, <code class="docutils literal 不转换><span class="pre">s</span></code>, <code class="docutils literal 不转换><span class="pre">ms</span></code>, <code class="docutils literal 不转换><span class="pre">us</span></code> 和 <code class="docutils literal 不转换><span class="pre">ns</span></code>，而不是 <code class="docutils literal 不转换><span class="pre">H</span></code>, <code class="docutils literal 不转换><span class="pre">T</span></code>, <code class="docutils literal 不转换><span class="pre">S</span></code>, <code class="docutils literal 不转换><span class="pre">L</span></code>, <code class="docutils literal 不转换><span class="pre">U</span></code> 和 <code class="docutils literal 不转换><span class="pre">N</span></code>，以与频率别名中的相应弃用保持兼容性。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52536">GH 52536</a>)</p></li>
<li><p>弃用了 <code class="xref py py-attr docutils literal notranslate"><span class="pre">offsets.Day.delta</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">offsets.Hour.delta</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">offsets.Minute.delta</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">offsets.Second.delta</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">offsets.Milli.delta</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">offsets.Micro.delta</span></code>, <code class="xref py py-attr docutils literal notranslate"><span class="pre">offsets.Nano.delta</span></code>，请改用 <code class="docutils literal 不转换><span class="pre">pd.Timedelta(obj)</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55498">GH 55498</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.api.types.is_interval.html#pandas.api.types.is_interval" title="pandas.api.types.is_interval"><code class="xref py py-func docutils literal 不转换><span class="pre">pandas.api.types.is_interval()</span></code></a> 和 <code class="xref py py-func docutils literal 不转换><span class="pre">pandas.api.types.is_period()</span></code>，请改用 <code class="docutils literal 不转换><span class="pre">isinstance(obj,</span> <span class="pre">pd.Interval)</span></code> 和 <code class="docutils literal 不转换><span class="pre">isinstance(obj,</span> <span class="pre">pd.Period)</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55264">GH 55264</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.read_gbq.html#pandas.read_gbq" title="pandas.read_gbq"><code class="xref py py-func docutils literal 不转换><span class="pre">read_gbq()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_gbq.html#pandas.DataFrame.to_gbq" title="pandas.DataFrame.to_gbq"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.to_gbq()</span></code></a>。请改用 <code class="docutils literal 不转换><span class="pre">pandas_gbq.read_gbq</span></code> 和 <code class="docutils literal 不转换><span class="pre">pandas_gbq.to_gbq</span></code> <a class="reference external" href="https://pandas-gbq.readthedocs.io/en/latest/api.html">https://pandas-gbq.readthedocs.io/en/latest/api.html</a>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55525">GH 55525</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.fillna.html#pandas.core.groupby.DataFrameGroupBy.fillna" title="pandas.core.groupby.DataFrameGroupBy.fillna"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrameGroupBy.fillna()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.fillna.html#pandas.core.groupby.SeriesGroupBy.fillna" title="pandas.core.groupby.SeriesGroupBy.fillna"><code class="xref py py-meth docutils literal 不转换><span class="pre">SeriesGroupBy.fillna()</span></code></a>；请改用 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.ffill.html#pandas.core.groupby.DataFrameGroupBy.ffill" title="pandas.core.groupby.DataFrameGroupBy.ffill"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrameGroupBy.ffill()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.bfill.html#pandas.core.groupby.DataFrameGroupBy.bfill" title="pandas.core.groupby.DataFrameGroupBy.bfill"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrameGroupBy.bfill()</span></code></a> 进行前向和后向填充，或使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.fillna()</span></code></a> 填充单个值（或 Series 对应的函数）。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55718">GH 55718</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DateOffset.is_anchored()</span></code>，对于非 Tick 子类请使用 <code class="docutils literal 不转换><span class="pre">obj.n</span> <span class="pre">==</span> <span class="pre">1</span></code>（对于 Tick，此值始终为 False）。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55388">GH 55388</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeArray.__init__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">TimedeltaArray.__init__()</span></code>，请改用 <a class="reference internal" href="../reference/api/pandas.array.html#pandas.array" title="pandas.array"><code class="xref py py-func docutils literal 不转换><span class="pre">array()</span></code></a>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55623">GH 55623</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.format()</span></code>，请改用 <code class="docutils literal 不转换><span class="pre">index.astype(str)</span></code> 或 <code class="docutils literal 不转换><span class="pre">index.map(formatter)</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55413">GH 55413</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.Series.ravel.html#pandas.Series.ravel" title="pandas.Series.ravel"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.ravel()</span></code></a>，底层数组已经是 1D，因此 ravel 不是必需的。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52511">GH 52511</a>)</p></li>
<li><p>弃用了使用 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal 不转换><span class="pre">PeriodIndex</span></code></a>（和 'convention' 关键字）的 <a class="reference internal" href="../reference/api/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.resample()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.resample()</span></code></a>，请改为在重采样之前转换为 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal 不转换><span class="pre">DatetimeIndex</span></code></a>（使用 <code class="docutils literal 不转换><span class="pre">.to_timestamp()</span></code>）。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53481">GH 53481</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.Series.view.html#pandas.Series.view" title="pandas.Series.view"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.view()</span></code></a>，请改用 <a class="reference internal" href="../reference/api/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-meth docutils literal 不转换><span class="pre">Series.astype()</span></code></a> 来更改 dtype。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20251">GH 20251</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">offsets.Tick.is_anchored()</span></code>，请改用 <code class="docutils literal 不转换><span class="pre">False</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55388">GH 55388</a>)</p></li>
<li><p>弃用了 <code class="docutils literal notranslate"><span class="pre">core.internals</span></code> 成员 <code class="docutils literal 不转换><span class="pre">Block</span></code>、<code class="docutils literal 不转换><span class="pre">ExtensionBlock</span></code> 和 <code class="docutils literal 不转换><span class="pre">DatetimeTZBlock</span></code>，请改用公共 API。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55139">GH 55139</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal 不转换><span class="pre">PeriodIndex</span></code></a> 构造函数中的 <code class="docutils literal 不转换><span class="pre">year</span></code>、<code class="docutils literal 不转换><span class="pre">month</span></code>、<code class="docutils literal 不转换><span class="pre">quarter</span></code>、<code class="docutils literal 不转换><span class="pre">day</span></code>、<code class="docutils literal 不转换><span class="pre">hour</span></code>、<code class="docutils literal 不转换><span class="pre">minute</span></code> 和 <code class="docutils literal 不转换><span class="pre">second</span></code> 关键字，请改用 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.from_fields.html#pandas.PeriodIndex.from_fields" title="pandas.PeriodIndex.from_fields"><code class="xref py py-meth docutils literal 不转换><span class="pre">PeriodIndex.from_fields()</span></code></a>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55960">GH 55960</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.Index.view.html#pandas.Index.view" title="pandas.Index.view"><code class="xref py py-meth docutils literal 不转换><span class="pre">Index.view()</span></code></a> 中将类型作为参数传递，请改为不带任何参数进行调用。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55709">GH 55709</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal 不转换><span class="pre">date_range()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.timedelta_range.html#pandas.timedelta_range" title="pandas.timedelta_range"><code class="xref py py-func docutils literal 不转换><span class="pre">timedelta_range()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.period_range.html#pandas.period_range" title="pandas.period_range"><code class="xref py py-func docutils literal 不转换><span class="pre">period_range()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.interval_range.html#pandas.interval_range" title="pandas.interval_range"><code class="xref py py-func docutils literal 不转换><span class="pre">interval_range()</span></code></a> 中允许非整数 <code class="docutils literal 不转换><span class="pre">periods</span></code> 参数。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56036">GH 56036</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_clipboard.html#pandas.DataFrame.to_clipboard" title="pandas.DataFrame.to_clipboard"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.to_clipboard()</span></code></a> 中允许非关键字参数。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.to_csv()</span></code></a> 中允许非关键字参数，<code class="docutils literal 不转换><span class="pre">path_or_buf</span></code> 除外。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict" title="pandas.DataFrame.to_dict"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.to_dict()</span></code></a> 中允许非关键字参数。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.to_excel()</span></code></a> 中允许非关键字参数，<code class="docutils literal 不转换><span class="pre">excel_writer</span></code> 除外。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_gbq.html#pandas.DataFrame.to_gbq" title="pandas.DataFrame.to_gbq"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.to_gbq()</span></code></a> 中允许非关键字参数，<code class="docutils literal 不转换><span class="pre">destination_table</span></code> 除外。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_hdf.html#pandas.DataFrame.to_hdf" title="pandas.DataFrame.to_hdf"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.to_hdf()</span></code></a> 中允许非关键字参数，<code class="docutils literal 不转换><span class="pre">path_or_buf</span></code> 除外。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.to_html()</span></code></a> 中允许非关键字参数，<code class="docutils literal 不转换><span class="pre">buf</span></code> 除外。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.to_json()</span></code></a> 中允许非关键字参数，<code class="docutils literal 不转换><span class="pre">path_or_buf</span></code> 除外。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_latex.html#pandas.DataFrame.to_latex" title="pandas.DataFrame.to_latex"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.to_latex()</span></code></a> 中允许非关键字参数，<code class="docutils literal 不转换><span class="pre">buf</span></code> 除外。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_markdown.html#pandas.DataFrame.to_markdown" title="pandas.DataFrame.to_markdown"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.to_markdown()</span></code></a> 中允许非关键字参数，<code class="docutils literal 不转换><span class="pre">buf</span></code> 除外。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" title="pandas.DataFrame.to_parquet"><code class="xref py py-meth docutils literal 不转换><span class="pre">DataFrame.to_parquet()</span></code></a> 中允许非关键字参数，<code class="docutils literal 不转换><span class="pre">path</span></code> 除外。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>已弃用在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_pickle.html#pandas.DataFrame.to_pickle" title="pandas.DataFrame.to_pickle"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_pickle()</span></code></a> 中允许非关键字参数，除了 <code class="docutils literal notranslate"><span class="pre">path</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>已弃用在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> 中允许非关键字参数，除了 <code class="docutils literal notranslate"><span class="pre">buf</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>已弃用在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_xml.html#pandas.DataFrame.to_xml" title="pandas.DataFrame.to_xml"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_xml()</span></code></a> 中允许非关键字参数，除了 <code class="docutils literal notranslate"><span class="pre">path_or_buffer</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54229">GH 54229</a>)</p></li>
<li><p>已弃用允许将 <code class="xref py py-class docutils literal notranslate"><span class="pre">BlockManager</span></code> 对象传递给 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 或将 <code class="xref py py-class docutils literal notranslate"><span class="pre">SingleBlockManager</span></code> 对象传递给 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52419">GH 52419</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.Index.insert.html#pandas.Index.insert" title="pandas.Index.insert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.insert()</span></code></a> 在对象数据类型索引上默默执行结果类型推断的行为，请明确调用 <code class="docutils literal notranslate"><span class="pre">result.infer_objects(copy=False)</span></code> 以保留旧行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51363">GH 51363</a>)</p></li>
<li><p>已弃用在 <a class="reference internal" href="../reference/api/pandas.Series.isin.html#pandas.Series.isin" title="pandas.Series.isin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.isin()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.isin.html#pandas.Index.isin" title="pandas.Index.isin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.isin()</span></code></a> 中将非日期时间值（主要是字符串）转换为 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code>、<code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> 和 <a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 数据类型的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53111">GH 53111</a>)</p></li>
<li><p>已弃用在 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数中给定 pandas 输入时进行数据类型推断的行为，请对输入调用 <code class="docutils literal notranslate"><span class="pre">.infer_objects</span></code> 以保持当前行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56012">GH 56012</a>)</p></li>
<li><p>已弃用将 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 设置到 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时进行数据类型推断的行为，请改为明确转换 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56102">GH 56102</a>)</p></li>
<li><p>已弃用在使用 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.apply.html#pandas.core.groupby.DataFrameGroupBy.apply" title="pandas.core.groupby.DataFrameGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.apply()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.resample.html#pandas.core.groupby.DataFrameGroupBy.resample" title="pandas.core.groupby.DataFrameGroupBy.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.resample()</span></code></a> 时在计算中包含组的行为；传递 <code class="docutils literal notranslate"><span class="pre">include_groups=False</span></code> 以排除组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7155">GH 7155</a>)</p></li>
<li><p>已弃用使用长度为零的布尔索引器对 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 进行索引的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55820">GH 55820</a>)</p></li>
<li><p>已弃用在按长度为1的列表状对象分组时，不向 <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameGroupBy.get_group</span></code> 或 <code class="xref py py-class docutils literal notranslate"><span class="pre">SeriesGroupBy.get_group</span></code> 传递元组的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25971">GH 25971</a>)</p></li>
<li><p>已弃用在 <code class="xref py py-class docutils literal notranslate"><span class="pre">YearBegin</span></code> 中表示频率的字符串 <code class="docutils literal notranslate"><span class="pre">AS</span></code>，以及表示不同财年开始的年度频率的字符串 <code class="docutils literal notranslate"><span class="pre">AS-DEC</span></code>、<code class="docutils literal notranslate"><span class="pre">AS-JAN</span></code> 等 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54275">GH 54275</a>)</p></li>
<li><p>已弃用在 <code class="xref py py-class docutils literal notranslate"><span class="pre">YearEnd</span></code> 中表示频率的字符串 <code class="docutils literal notranslate"><span class="pre">A</span></code>，以及表示不同财年结束的年度频率的字符串 <code class="docutils literal notranslate"><span class="pre">A-DEC</span></code>、<code class="docutils literal notranslate"><span class="pre">A-JAN</span></code> 等 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54275">GH 54275</a>)</p></li>
<li><p>已弃用在 <code class="xref py py-class docutils literal notranslate"><span class="pre">BYearBegin</span></code> 中表示频率的字符串 <code class="docutils literal notranslate"><span class="pre">BAS</span></code>，以及表示不同财年开始的年度频率的字符串 <code class="docutils literal notranslate"><span class="pre">BAS-DEC</span></code>、<code class="docutils literal notranslate"><span class="pre">BAS-JAN</span></code> 等 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54275">GH 54275</a>)</p></li>
<li><p>已弃用在 <code class="xref py py-class docutils literal notranslate"><span class="pre">BYearEnd</span></code> 中表示频率的字符串 <code class="docutils literal notranslate"><span class="pre">BA</span></code>，以及表示不同财年结束的年度频率的字符串 <code class="docutils literal notranslate"><span class="pre">BA-DEC</span></code>、<code class="docutils literal notranslate"><span class="pre">BA-JAN</span></code> 等 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54275">GH 54275</a>)</p></li>
<li><p>已弃用在 <code class="xref py py-class docutils literal notranslate"><span class="pre">Hour</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">BusinessHour</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">CustomBusinessHour</span></code> 中表示频率的字符串 <code class="docutils literal notranslate"><span class="pre">H</span></code>、<code class="docutils literal notranslate"><span class="pre">BH</span></code> 和 <code class="docutils literal notranslate"><span class="pre">CBH</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52536">GH 52536</a>)</p></li>
<li><p>已弃用在 <a class="reference internal" href="../reference/api/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_timedelta()</span></code></a> 中表示单位的字符串 <code class="docutils literal notranslate"><span class="pre">H</span></code>、<code class="docutils literal notranslate"><span class="pre">S</span></code>、<code class="docutils literal notranslate"><span class="pre">U</span></code> 和 <code class="docutils literal notranslate"><span class="pre">N</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52536">GH 52536</a>)</p></li>
<li><p>已弃用在 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 中表示单位的字符串 <code class="docutils literal notranslate"><span class="pre">H</span></code>、<code class="docutils literal notranslate"><span class="pre">T</span></code>、<code class="docutils literal notranslate"><span class="pre">S</span></code>、<code class="docutils literal notranslate"><span class="pre">L</span></code>、<code class="docutils literal notranslate"><span class="pre">U</span></code> 和 <code class="docutils literal notranslate"><span class="pre">N</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52536">GH 52536</a>)</p></li>
<li><p>已弃用在 <code class="xref py py-class docutils literal notranslate"><span class="pre">Minute</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">Second</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">Milli</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">Micro</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">Nano</span></code> 中表示频率的字符串 <code class="docutils literal notranslate"><span class="pre">T</span></code>、<code class="docutils literal notranslate"><span class="pre">S</span></code>、<code class="docutils literal notranslate"><span class="pre">L</span></code>、<code class="docutils literal notranslate"><span class="pre">U</span></code> 和 <code class="docutils literal notranslate"><span class="pre">N</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52536">GH 52536</a>)</p></li>
<li><p>已弃用在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中组合解析后的日期时间列以及 <code class="docutils literal notranslate"><span class="pre">keep_date_col</span></code> 关键字的支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55569">GH 55569</a>)</p></li>
<li><p>已弃用 <code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFrameGroupBy.grouper</span></code> 和 <code class="xref py py-attr docutils literal notranslate"><span class="pre">SeriesGroupBy.grouper</span></code>；这些属性将在未来版本的 pandas 中移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56521">GH 56521</a>)</p></li>
<li><p>已弃用 <code class="xref py py-class docutils literal notranslate"><span class="pre">Grouping</span></code> 属性 <code class="docutils literal notranslate"><span class="pre">group_index</span></code>、<code class="docutils literal notranslate"><span class="pre">result_index</span></code> 和 <code class="docutils literal notranslate"><span class="pre">group_arraylike</span></code>；这些属性将在未来版本的 pandas 中移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56148">GH 56148</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">delim_whitespace</span></code> 关键字，请改为使用 <code class="docutils literal notranslate"><span class="pre">sep="\\s+"</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55569">GH 55569</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_timedelta()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_numeric()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">errors="ignore"</span></code> 选项；请改为明确捕获异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54467">GH 54467</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 构造函数中的 <code class="docutils literal notranslate"><span class="pre">fastpath</span></code> 关键字 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20110">GH 20110</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">kind</span></code> 关键字，请改为明确转换对象的 <code class="docutils literal notranslate"><span class="pre">index</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55895">GH 55895</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">ordinal</span></code> 关键字，请改为使用 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.from_ordinals.html#pandas.PeriodIndex.from_ordinals" title="pandas.PeriodIndex.from_ordinals"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.from_ordinals()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55960">GH 55960</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 构造中的 <code class="docutils literal notranslate"><span class="pre">unit</span></code> 关键字，请改为使用 <a class="reference internal" href="../reference/api/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_timedelta()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55499">GH 55499</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">verbose</span></code> 关键字 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55569">GH 55569</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.replace.html#pandas.DataFrame.replace" title="pandas.DataFrame.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.replace.html#pandas.Series.replace" title="pandas.Series.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.replace()</span></code></a> 与 <a class="reference internal" href="../reference/api/pandas.CategoricalDtype.html#pandas.CategoricalDtype" title="pandas.CategoricalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalDtype</span></code></a> 结合时的行为；在未来版本中，replace 将更改值同时保留类别。要更改类别，请改为使用 <code class="docutils literal notranslate"><span class="pre">ser.cat.rename_categories</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55147">GH 55147</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.Series.value_counts.html#pandas.Series.value_counts" title="pandas.Series.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.value_counts()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.value_counts.html#pandas.Index.value_counts" title="pandas.Index.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.value_counts()</span></code></a> 与对象数据类型结合时的行为；在未来版本中，它们将不会对结果 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 执行数据类型推断，请执行 <code class="docutils literal notranslate"><span class="pre">result.index</span> <span class="pre">=</span> <span class="pre">result.index.infer_objects()</span></code> 以保留旧行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56161">GH 56161</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table" title="pandas.DataFrame.pivot_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pivot_table()</span></code></a> 中 <code class="docutils literal notranslate"><span class="pre">observed=False</span></code> 的默认值；在未来版本中将为 <code class="docutils literal notranslate"><span class="pre">True</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56236">GH 56236</a>)</p></li>
<li><p>已弃用扩展测试类 <code class="docutils literal notranslate"><span class="pre">BaseNoReduceTests</span></code>、<code class="docutils literal notranslate"><span class="pre">BaseBooleanReduceTests</span></code> 和 <code class="docutils literal notranslate"><span class="pre">BaseNumericReduceTests</span></code>，请改为使用 <code class="docutils literal notranslate"><span class="pre">BaseReduceTests</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54663">GH 54663</a>)</p></li>
<li><p>已弃用选项 <code class="docutils literal notranslate"><span class="pre">mode.data_manager</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ArrayManager</span></code>；未来版本中将只提供 <code class="docutils literal notranslate"><span class="pre">BlockManager</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55043">GH 55043</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame.stack</span></code></a> 的先前实现；指定 <code class="docutils literal notranslate"><span class="pre">future_stack=True</span></code> 以采用未来版本 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53515">GH 53515</a>)</p></li>
<li></li>
</ul>
</section>
</section>
<section id="performance-improvements">
<span id="whatsnew-220-performance"></span><h2>性能改进<a class="headerlink" href="v2.2.0.html#performance-improvements" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.testing.assert_frame_equal.html#pandas.testing.assert_frame_equal" title="pandas.testing.assert_frame_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_frame_equal()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.testing.assert_series_equal.html#pandas.testing.assert_series_equal" title="pandas.testing.assert_series_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_series_equal()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55949">GH 55949</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55971">GH 55971</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 且对象具有未对齐索引时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55084">GH 55084</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56089">GH 56089</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.merge_ordered.html#pandas.merge_ordered" title="pandas.merge_ordered"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_ordered()</span></code></a> 在按排序升序键连接时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56115">GH 56115</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">by</span></code> 不为 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55580">GH 55580</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55678">GH 55678</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_stata()</span></code></a> 对于具有许多变量的文件的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55515">GH 55515</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 在聚合 pyarrow 时间戳和持续时间数据类型时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55031">GH 55031</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 在按无序分类索引连接时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56345">GH 56345</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.loc.html#pandas.Series.loc" title="pandas.Series.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.loc()</span></code></a> 在使用 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 进行索引时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56062">GH 56062</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.sort_index.html#pandas.DataFrame.sort_index" title="pandas.DataFrame.sort_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sort_index()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.sort_index.html#pandas.Series.sort_index" title="pandas.Series.sort_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.sort_index()</span></code></a> 在通过 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 索引时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54835">GH 54835</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict" title="pandas.DataFrame.to_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_dict()</span></code></a> 在将 DataFrame 转换为字典时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/50990">GH 50990</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.difference.html#pandas.Index.difference" title="pandas.Index.difference"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.difference()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55108">GH 55108</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.sort_values.html#pandas.Index.sort_values" title="pandas.Index.sort_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.sort_values()</span></code></a> 在索引已排序时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56128">GH 56128</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.get_indexer.html#pandas.MultiIndex.get_indexer" title="pandas.MultiIndex.get_indexer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.get_indexer()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">method</span></code> 不为 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55839">GH 55839</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.duplicated.html#pandas.Series.duplicated" title="pandas.Series.duplicated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.duplicated()</span></code></a> 对于 pyarrow 数据类型的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55255">GH 55255</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.get_dummies.html#pandas.Series.str.get_dummies" title="pandas.Series.str.get_dummies"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.get_dummies()</span></code></a> 在数据类型为 <code class="docutils literal notranslate"><span class="pre">"string[pyarrow]"</span></code> 或 <code class="docutils literal notranslate"><span class="pre">"string[pyarrow_numpy]"</span></code> 时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56110">GH 56110</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.html#pandas.Series.str" title="pandas.Series.str"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str()</span></code></a> 方法的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55736">GH 55736</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.value_counts.html#pandas.Series.value_counts" title="pandas.Series.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.value_counts()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.mode.html#pandas.Series.mode" title="pandas.Series.mode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mode()</span></code></a> 对于掩码数据类型的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54984">GH 54984</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55340">GH 55340</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.nunique.html#pandas.core.groupby.DataFrameGroupBy.nunique" title="pandas.core.groupby.DataFrameGroupBy.nunique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.nunique()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.nunique.html#pandas.core.groupby.SeriesGroupBy.nunique" title="pandas.core.groupby.SeriesGroupBy.nunique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.nunique()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55972">GH 55972</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.idxmax.html#pandas.core.groupby.SeriesGroupBy.idxmax" title="pandas.core.groupby.SeriesGroupBy.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.idxmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.idxmin.html#pandas.core.groupby.SeriesGroupBy.idxmin" title="pandas.core.groupby.SeriesGroupBy.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.idxmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmax.html#pandas.core.groupby.DataFrameGroupBy.idxmax" title="pandas.core.groupby.DataFrameGroupBy.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmin.html#pandas.core.groupby.DataFrameGroupBy.idxmin" title="pandas.core.groupby.DataFrameGroupBy.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmin()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54234">GH 54234</a>)</p></li>
<li><p>哈希可为空的扩展数组时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56507">GH 56507</a>)</p></li>
<li><p>索引非唯一索引时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55816">GH 55816</a>)</p></li>
<li><p>使用超过4个键进行索引时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54550">GH 54550</a>)</p></li>
<li><p>将时间本地化为 UTC 时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55241">GH 55241</a>)</p></li>
</ul>
</section>
<section id="bug-fixes">
<span id="whatsnew-220-bug-fixes"></span><h2>错误修复<a class="headerlink" href="v2.2.0.html#bug-fixes" title="Link to this heading">#</a></h2>
<section id="categorical">
<h3>分类数据<a class="headerlink" href="v2.2.0.html#categorical" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.isin()</span></code> 对于包含重叠 <a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 值的分类数据引发 <code class="docutils literal notranslate"><span class="pre">InvalidIndexError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34974">GH 34974</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalDtype.__eq__()</span></code> 中的错误，对于混合类型的无序分类数据返回 <code class="docutils literal notranslate"><span class="pre">False</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55468">GH 55468</a>)</p></li>
<li><p>在将 <code class="docutils literal notranslate"><span class="pre">pa.dictionary</span></code> 转换为 <a class="reference internal" href="../reference/api/pandas.CategoricalDtype.html#pandas.CategoricalDtype" title="pandas.CategoricalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalDtype</span></code></a> 时，使用 <code class="docutils literal notranslate"><span class="pre">pa.DictionaryArray</span></code> 作为类别时出错 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56672">GH 56672</a>)</p></li>
</ul>
</section>
<section id="datetimelike">
<h3>日期时间类<a class="headerlink" href="v2.2.0.html#datetimelike" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 构造中的错误，当同时传递 <code class="docutils literal notranslate"><span class="pre">tz</span></code> 和 <code class="docutils literal notranslate"><span class="pre">dayfirst</span></code> 或 <code class="docutils literal notranslate"><span class="pre">yearfirst</span></code> 时，会忽略 <code class="docutils literal notranslate"><span class="pre">dayfirst/yearfirst</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55813">GH 55813</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 中的错误，当传递浮点对象的对象数据类型 ndarray 和 <code class="docutils literal notranslate"><span class="pre">tz</span></code> 时，结果本地化不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55780">GH 55780</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.isin.html#pandas.Series.isin" title="pandas.Series.isin"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.isin()</span></code></a> 中的错误，对于 <a class="reference internal" href="../reference/api/pandas.DatetimeTZDtype.html#pandas.DatetimeTZDtype" title="pandas.DatetimeTZDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code></a> 数据类型和所有比较值都是 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 的情况，即使系列包含 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 条目，也错误地返回全 <code class="docutils literal notranslate"><span class="pre">False</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56427">GH 56427</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中的错误，当连接全NA DataFrame 和 <a class="reference internal" href="../reference/api/pandas.DatetimeTZDtype.html#pandas.DatetimeTZDtype" title="pandas.DatetimeTZDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code></a> 数据类型 DataFrame 时引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52093">GH 52093</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.testing.assert_extension_array_equal.html#pandas.testing.assert_extension_array_equal" title="pandas.testing.assert_extension_array_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_extension_array_equal()</span></code></a> 中的错误，在比较分辨率时可能使用了错误的单位 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55730">GH 55730</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 中的错误，当传递混合字符串和数字类型的列表时，错误地引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55780">GH 55780</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 中的错误，当传递包含混合时区或混合时区意识的混合类型对象时未能引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55693">GH 55693</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Tick.delta()</span></code> 中的错误，当使用非常大的刻度时引发 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsTimedelta</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55503">GH 55503</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.shift()</span></code> 中的错误，非纳秒分辨率的数据错误地返回纳秒分辨率的结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56117">GH 56117</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.union()</span></code> 中的错误，对于具有相同时区但不同单位的时区感知索引返回对象数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55238">GH 55238</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.is_monotonic_increasing.html#pandas.Index.is_monotonic_increasing" title="pandas.Index.is_monotonic_increasing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.is_monotonic_increasing()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.is_monotonic_decreasing.html#pandas.Index.is_monotonic_decreasing" title="pandas.Index.is_monotonic_decreasing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.is_monotonic_decreasing()</span></code></a> 中的错误，当索引中的第一个值是 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 时，总是将 <a class="reference internal" href="../reference/api/pandas.Index.is_unique.html#pandas.Index.is_unique" title="pandas.Index.is_unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.is_unique()</span></code></a> 缓存为 <code class="docutils literal notranslate"><span class="pre">True</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55755">GH 55755</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.view.html#pandas.Index.view" title="pandas.Index.view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.view()</span></code></a> 中的错误，转换为不受支持分辨率的 datetime64 数据类型时错误地引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55710">GH 55710</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.dt.round.html#pandas.Series.dt.round" title="pandas.Series.dt.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.dt.round()</span></code></a> 中的错误，对于非纳秒分辨率和 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 条目，错误地引发 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56158">GH 56158</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a> 中的错误，对于非纳秒分辨率数据类型和更高分辨率的向量值，返回不正确（内部损坏）的结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56410">GH 56410</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.unit.html#pandas.Timestamp.unit" title="pandas.Timestamp.unit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.unit()</span></code></a> 中的错误，从具有分钟或小时分辨率和时区偏移的 ISO8601 格式字符串中推断不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56208">GH 56208</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.astype</span></code> 中的错误，从更高分辨率的 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 数据类型转换为更低分辨率的 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 数据类型（例如 <code class="docutils literal notranslate"><span class="pre">datetime64[us]-&gt;datetime64[ms]</span></code>）时，在接近下限时默默溢出 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55979">GH 55979</a>)</p></li>
<li><p>将 <code class="xref py py-class docutils literal notranslate"><span class="pre">Week</span></code> 偏移量添加到或从具有非纳秒分辨率的 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 列中减去时返回不正确结果的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55583">GH 55583</a>)</p></li>
<li><p>将具有 <code class="docutils literal notranslate"><span class="pre">offset</span></code> 属性的 <code class="xref py py-class docutils literal notranslate"><span class="pre">BusinessDay</span></code> 偏移量添加到或从非纳秒 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 列中减去时给出不正确结果的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55608">GH 55608</a>)</p></li>
<li><p>将带有微秒组件的 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 对象添加到或从具有非纳秒分辨率的 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 列中减去的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55595">GH 55595</a>)</p></li>
<li><p>将非常大的 <a class="reference internal" href="../reference/api/pandas.tseries.offsets.Tick.html#pandas.tseries.offsets.Tick" title="pandas.tseries.offsets.Tick"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tick</span></code></a> 对象添加到或从 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 对象中减去时引发 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsTimedelta</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55503">GH 55503</a>)</p></li>
<li><p>创建具有非纳秒 <a class="reference internal" href="../reference/api/pandas.DatetimeTZDtype.html#pandas.DatetimeTZDtype" title="pandas.DatetimeTZDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>，并且输入在纳秒分辨率下会超出范围时，错误地引发 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54620">GH 54620</a>)</p></li>
<li><p>创建具有非纳秒 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> (或 <a class="reference internal" href="../reference/api/pandas.DatetimeTZDtype.html#pandas.DatetimeTZDtype" title="pandas.DatetimeTZDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code></a>) 的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>，并将混合数字输入视为纳秒而不是数据类型单位的倍数（非混合数字输入会发生这种情况）的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56004">GH 56004</a>)</p></li>
<li><p>创建具有非纳秒 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 数据类型且输入对于 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> 将超出范围时，错误地引发 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55756">GH 55756</a>)</p></li>
<li><p>解析具有纳秒分辨率但非 ISO8601 格式的日期时间字符串时错误地截断亚微秒组件的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56051">GH 56051</a>)</p></li>
<li><p>解析具有亚秒分辨率和尾随零的日期时间字符串时错误地推断秒或毫秒分辨率的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55737">GH 55737</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 的结果中，浮点数据类型参数的 <code class="docutils literal notranslate"><span class="pre">unit</span></code> 与 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 的逐点结果不匹配的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56037">GH 56037</a>)</p></li>
<li><p>修复了回归问题，其中 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 在连接具有不同分辨率的 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 列时会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53641">GH 53641</a>)</p></li>
</ul>
</section>
<section id="timedelta">
<h3>时间差<a class="headerlink" href="v2.2.0.html#timedelta" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 构造中引发 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsTimedelta</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55503">GH 55503</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的渲染 (<code class="docutils literal notranslate"><span class="pre">__repr__</span></code>) 中，对于具有非纳秒分辨率且条目都是24小时倍数的 timedelta64 值，未能使用纳秒情况下的紧凑表示的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55405">GH 55405</a>)</p></li>
</ul>
</section>
<section id="timezones">
<h3>时区<a class="headerlink" href="v2.2.0.html#timezones" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractHolidayCalendar</span></code> 中的错误，在计算假期观察结果时未传播时区数据 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54580">GH 54580</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 构造中，当使用一个模糊值和 <code class="docutils literal notranslate"><span class="pre">pytz</span></code> 时区时未能引发 <code class="docutils literal notranslate"><span class="pre">pytz.AmbiguousTimeError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55657">GH 55657</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.tz_localize.html#pandas.Timestamp.tz_localize" title="pandas.Timestamp.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.tz_localize()</span></code></a> 中的错误，在夏令时期间使用 <code class="docutils literal notranslate"><span class="pre">nonexistent="shift_forward</span></code> 绕过 UTC+0 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51501">GH 51501</a>)</p></li>
</ul>
</section>
<section id="numeric">
<h3>数字<a class="headerlink" href="v2.2.0.html#numeric" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中的错误，当 <code class="docutils literal notranslate"><span class="pre">engine="pyarrow"</span></code> 时导致大整数的舍入错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52505">GH 52505</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__floordiv__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__truediv__()</span></code> 对于带有整数数据类型的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a>，对大除数引发异常的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56706">GH 56706</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__floordiv__()</span></code> 对于带有整数数据类型的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a>，对大值引发异常的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56645">GH 56645</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.pow.html#pandas.Series.pow" title="pandas.Series.pow"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.pow()</span></code></a> 未正确填充缺失值的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55512">GH 55512</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.replace.html#pandas.Series.replace" title="pandas.Series.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.replace()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.replace.html#pandas.DataFrame.replace" title="pandas.DataFrame.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code></a> 错误地将浮点数 <code class="docutils literal notranslate"><span class="pre">0.0</span></code> 与 <code class="docutils literal notranslate"><span class="pre">False</span></code> 匹配，反之亦然 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55398">GH 55398</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.round.html#pandas.Series.round" title="pandas.Series.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.round()</span></code></a> 对可为空的布尔数据类型引发异常的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55936">GH 55936</a>)</p></li>
</ul>
</section>
<section id="conversion">
<h3>转换<a class="headerlink" href="v2.2.0.html#conversion" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 中的错误，当对未解封的数组调用 <code class="docutils literal notranslate"><span class="pre">str</span></code> 时 - 数组可能会就地改变 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54654">GH 54654</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 中的错误，其中 <code class="docutils literal notranslate"><span class="pre">errors="ignore"</span></code> 对扩展类型无效 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54654">GH 54654</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.convert_dtypes.html#pandas.Series.convert_dtypes" title="pandas.Series.convert_dtypes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.convert_dtypes()</span></code></a> 未将所有 NA 列转换为 <code class="docutils literal notranslate"><span class="pre">null[pyarrow]</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55346">GH 55346</a>)</p></li>
<li><p>:meth:<code class="docutils literal notranslate"><span class="pre">DataFrame.loc</span></code> 中的错误，在使用完整的列设置器（例如 <code class="docutils literal notranslate"><span class="pre">df.loc[:,</span> <span class="pre">'a']</span> <span class="pre">=</span> <span class="pre">incompatible_value</span></code>）分配具有不同数据类型的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 时，未抛出“不兼容数据类型警告”（参见 <a class="reference external" href="https://pandas.ac.cn/pdeps/0006-ban-upcasting.html">PDEP6</a>）(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39584">GH 39584</a>)</p></li>
</ul>
</section>
<section id="strings">
<h3>字符串<a class="headerlink" href="v2.2.0.html#strings" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.api.types.is_string_dtype.html#pandas.api.types.is_string_dtype" title="pandas.api.types.is_string_dtype"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.api.types.is_string_dtype()</span></code></a> 中的错误，检查没有元素的对象数组是否为字符串数据类型时出现 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54661">GH 54661</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 中的错误，当 <code class="docutils literal notranslate"><span class="pre">engine="numba"</span></code> 且列或索引具有 <code class="docutils literal notranslate"><span class="pre">StringDtype</span></code> 时失败 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56189">GH 56189</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex" title="pandas.DataFrame.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code></a> 未与 <code class="docutils literal notranslate"><span class="pre">string[pyarrow_numpy]</span></code> 数据类型的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 匹配的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56106">GH 56106</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.str.cat()</span></code> 总是将结果转换为对象数据类型的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56157">GH 56157</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__mul__()</span></code> 对于带有 <code class="docutils literal notranslate"><span class="pre">pyarrow.string</span></code> 数据类型的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a> 和 pyarrow 后端的 <code class="docutils literal notranslate"><span class="pre">string[pyarrow]</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51970">GH 51970</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.find.html#pandas.Series.str.find" title="pandas.Series.str.find"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.find()</span></code></a> 中的错误，当 <code class="docutils literal notranslate"><span class="pre">ArrowDtype</span></code> 带有 <code class="docutils literal notranslate"><span class="pre">pyarrow.string</span></code> 且 <code class="docutils literal notranslate"><span class="pre">start</span> <span class="pre">&lt;</span> <span class="pre">0</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56411">GH 56411</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.fullmatch.html#pandas.Series.str.fullmatch" title="pandas.Series.str.fullmatch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.fullmatch()</span></code></a> 中的错误，当 <code class="docutils literal notranslate"><span class="pre">dtype=pandas.ArrowDtype(pyarrow.string()))</span></code> 允许正则表达式以字面量 //$ 结尾时进行部分匹配 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56652">GH 56652</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.replace.html#pandas.Series.str.replace" title="pandas.Series.str.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.replace()</span></code></a> 中的错误，当 <code class="docutils literal notranslate"><span class="pre">ArrowDtype</span></code> 带有 <code class="docutils literal notranslate"><span class="pre">pyarrow.string</span></code> 且 <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&lt;</span> <span class="pre">0</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56404">GH 56404</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.startswith.html#pandas.Series.str.startswith" title="pandas.Series.str.startswith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.startswith()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.str.endswith.html#pandas.Series.str.endswith" title="pandas.Series.str.endswith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.endswith()</span></code></a> 中的错误，对于带有 <code class="docutils literal notranslate"><span class="pre">pyarrow.string</span></code> 数据类型的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a>，参数类型为 <code class="docutils literal notranslate"><span class="pre">tuple[str,</span> <span class="pre">...]</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56579">GH 56579</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.startswith.html#pandas.Series.str.startswith" title="pandas.Series.str.startswith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.startswith()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.str.endswith.html#pandas.Series.str.endswith" title="pandas.Series.str.endswith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.endswith()</span></code></a> 中的错误，对于 <code class="docutils literal notranslate"><span class="pre">string[pyarrow]</span></code>，参数类型为 <code class="docutils literal notranslate"><span class="pre">tuple[str,</span> <span class="pre">...]</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54942">GH 54942</a>)</p></li>
<li><p>对于 <code class="docutils literal notranslate"><span class="pre">dtype="string[pyarrow_numpy]"</span></code> 的比较操作中的错误，如果数据类型无法比较则引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56008">GH 56008</a>)</p></li>
</ul>
</section>
<section id="interval">
<h3>区间<a class="headerlink" href="v2.2.0.html#interval" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">__repr__</span></code> 中的错误，不显示 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 边界的 UTC 偏移量。此外，现在将显示小时、分钟和秒组件 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55015">GH 55015</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.factorize()</span></code> 和 <a class="reference internal" href="../reference/api/pandas.Series.factorize.html#pandas.Series.factorize" title="pandas.Series.factorize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.factorize()</span></code></a> 中，当使用 <a class="reference internal" href="../reference/api/pandas.IntervalDtype.html#pandas.IntervalDtype" title="pandas.IntervalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalDtype</span></code></a> 且区间为 datetime64 或 timedelta64 类型时，未保留非纳秒单位的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56099">GH 56099</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.from_arrays.html#pandas.IntervalIndex.from_arrays" title="pandas.IntervalIndex.from_arrays"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.from_arrays()</span></code></a> 中存在错误，当传入分辨率不匹配的 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 或 <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> 数组时，会构建一个无效的 <code class="docutils literal notranslate"><span class="pre">IntervalArray</span></code> 对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55714">GH 55714</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.from_tuples.html#pandas.IntervalIndex.from_tuples" title="pandas.IntervalIndex.from_tuples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.from_tuples()</span></code></a> 中存在错误，当子类型是可空扩展 dtype 时会引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56765">GH 56765</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.get_indexer.html#pandas.IntervalIndex.get_indexer" title="pandas.IntervalIndex.get_indexer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.get_indexer()</span></code></a> 中存在错误，当 datetime 或 timedelta 区间与整数目标错误匹配 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47772">GH 47772</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.get_indexer.html#pandas.IntervalIndex.get_indexer" title="pandas.IntervalIndex.get_indexer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.get_indexer()</span></code></a> 中存在错误，当带有时区信息的 datetime 区间与不带时区信息的目标序列错误匹配 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47772">GH 47772</a>)</p></li>
<li><p>在使用切片对带有 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 设置值时错误地引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54722">GH 54722</a>)</p></li>
</ul>
</section>
<section id="indexing">
<h3>索引<a class="headerlink" href="v2.2.0.html#indexing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 中存在错误，当 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 具有 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时，会修改布尔索引器 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56635">GH 56635</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 中存在错误，当将具有扩展 dtype 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 设置为 NumPy dtype 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55604">GH 55604</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Index.difference.html#pandas.Index.difference" title="pandas.Index.difference"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.difference()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">other</span></code> 为空或 <code class="docutils literal notranslate"><span class="pre">other</span></code> 被认为是不可比较时，未返回唯一值集 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55113">GH 55113</a>)</p></li>
<li><p>在将 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 值设置到带有 numpy dtypes 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时引发 <code class="docutils literal notranslate"><span class="pre">RecursionError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52927">GH 52927</a>)</p></li>
<li><p>修复了设置单个字符串值时创建带有缺失值的新列的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56204">GH 56204</a>)</p></li>
</ul>
</section>
<section id="missing">
<h3>缺失值处理<a class="headerlink" href="v2.2.0.html#missing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.update.html#pandas.DataFrame.update" title="pandas.DataFrame.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.update()</span></code></a> 中存在错误，对于带时区的 datetime64 dtypes 未能原地更新 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56227">GH 56227</a>)</p></li>
</ul>
</section>
<section id="multiindex">
<h3>多级索引<a class="headerlink" href="v2.2.0.html#multiindex" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.MultiIndex.get_indexer.html#pandas.MultiIndex.get_indexer" title="pandas.MultiIndex.get_indexer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.get_indexer()</span></code></a> 中存在错误，当提供了 <code class="docutils literal notranslate"><span class="pre">method</span></code> 且索引为非单调时，未引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/53452">GH 53452</a>)</p></li>
</ul>
</section>
<section id="i-o">
<h3>输入/输出<a class="headerlink" href="v2.2.0.html#i-o" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，当指定 <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> 时，<code class="docutils literal notranslate"><span class="pre">engine="python"</span></code> 不尊重 <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56323">GH 56323</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，当指定可调用的 <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> 和分块大小时，<code class="docutils literal notranslate"><span class="pre">engine="python"</span></code> 会导致 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55677">GH 55677</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，<code class="docutils literal notranslate"><span class="pre">on_bad_lines="warn"</span></code> 会写入 <code class="docutils literal notranslate"><span class="pre">stderr</span></code> 而不是引发 Python 警告；现在这会产生一个 <a class="reference internal" href="../reference/api/pandas.errors.ParserWarning.html#pandas.errors.ParserWarning" title="pandas.errors.ParserWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">errors.ParserWarning</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54296">GH 54296</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">engine="pyarrow"</span></code> 时，<code class="docutils literal notranslate"><span class="pre">quotechar</span></code> 被忽略 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/52266">GH 52266</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">engine="pyarrow"</span></code> 时，<code class="docutils literal notranslate"><span class="pre">usecols</span></code> 对没有标题的 CSV 文件不起作用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54459">GH 54459</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">engine="xlrd"</span></code>（<code class="docutils literal notranslate"><span class="pre">xls</span></code> 文件）的文件包含 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 或 <code class="docutils literal notranslate"><span class="pre">Inf</span></code> 时会出错 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54564">GH 54564</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_json()</span></code></a> 中存在错误，如果设置了 <code class="docutils literal notranslate"><span class="pre">infer_string</span></code>，则无法正确处理 dtype 转换 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56195">GH 56195</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_excel()</span></code></a> 中存在错误，<code class="docutils literal notranslate"><span class="pre">OdsWriter</span></code>（<code class="docutils literal notranslate"><span class="pre">ods</span></code> 文件）写入布尔/字符串值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54994">GH 54994</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_hdf.html#pandas.DataFrame.to_hdf" title="pandas.DataFrame.to_hdf"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_hdf()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_hdf.html#pandas.read_hdf" title="pandas.read_hdf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_hdf()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> dtypes 具有非纳秒分辨率时，无法正确往返 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55622">GH 55622</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_stata.html#pandas.DataFrame.to_stata" title="pandas.DataFrame.to_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code></a> 中存在错误，当扩展 dtypes 时会引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54671">GH 54671</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在错误，当使用 <code class="docutils literal notranslate"><span class="pre">engine="odf"</span></code>（<code class="docutils literal notranslate"><span class="pre">ods</span></code> 文件）且字符串单元格包含注释时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55200">GH 55200</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在错误，当 ODS 文件中浮点值没有缓存的格式化单元格时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55219">GH 55219</a>)</p></li>
<li><p>一个错误，<a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code></a> 对于不支持的 NumPy 类型会引发 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55403">GH 55403</a>)</p></li>
</ul>
</section>
<section id="period">
<h3>周期<a class="headerlink" href="v2.2.0.html#period" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 构造中存在错误，当传入 <code class="docutils literal notranslate"><span class="pre">data</span></code>、<code class="docutils literal notranslate"><span class="pre">ordinal</span></code> 和 <code class="docutils literal notranslate"><span class="pre">**fields</span></code> 中多于一个参数时，未能引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55961">GH 55961</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 加法中存在错误，会默默地回绕而不是引发 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55503">GH 55503</a>)</p></li>
<li><p>从带有非纳秒单位的 <a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 使用 <code class="docutils literal notranslate"><span class="pre">astype</span></code> 转换为 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 或 <a class="reference internal" href="../reference/api/pandas.DatetimeTZDtype.html#pandas.DatetimeTZDtype" title="pandas.DatetimeTZDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code></a> 时存在错误，会错误地返回纳秒单位 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55958">GH 55958</a>)</p></li>
</ul>
</section>
<section id="plotting">
<h3>绘图<a class="headerlink" href="v2.2.0.html#plotting" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.box.html#pandas.DataFrame.plot.box" title="pandas.DataFrame.plot.box"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot.box()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">vert=False</span></code> 且 Matplotlib <code class="docutils literal notranslate"><span class="pre">Axes</span></code> 使用 <code class="docutils literal notranslate"><span class="pre">sharey=True</span></code> 创建时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54941">GH 54941</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.scatter.html#pandas.DataFrame.plot.scatter" title="pandas.DataFrame.plot.scatter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot.scatter()</span></code></a> 中存在错误，会丢弃字符串列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56142">GH 56142</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.plot.html#pandas.Series.plot" title="pandas.Series.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.plot()</span></code></a> 中存在错误，当重用 <code class="docutils literal notranslate"><span class="pre">ax</span></code> 对象时，若传入 <code class="docutils literal notranslate"><span class="pre">how</span></code> 关键字则未能引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55953">GH 55953</a>)</p></li>
</ul>
</section>
<section id="groupby-resample-rolling">
<h3>分组/重采样/滚动<a class="headerlink" href="v2.2.0.html#groupby-resample-rolling" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmin.html#pandas.core.groupby.DataFrameGroupBy.idxmin" title="pandas.core.groupby.DataFrameGroupBy.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmax.html#pandas.core.groupby.DataFrameGroupBy.idxmax" title="pandas.core.groupby.DataFrameGroupBy.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmax()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.idxmin.html#pandas.core.groupby.SeriesGroupBy.idxmin" title="pandas.core.groupby.SeriesGroupBy.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.idxmin()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.idxmax.html#pandas.core.groupby.SeriesGroupBy.idxmax" title="pandas.core.groupby.SeriesGroupBy.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.idxmax()</span></code></a> 中存在错误，当索引是包含 NA 值的 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 时，不会保留 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54234">GH 54234</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.transform.html#pandas.core.groupby.SeriesGroupBy.transform" title="pandas.core.groupby.SeriesGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.transform()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">observed=False</span></code> 且 <code class="docutils literal notranslate"><span class="pre">f="idxmin"</span></code> 或 <code class="docutils literal notranslate"><span class="pre">f="idxmax"</span></code> 时，对于未观测到的类别会错误地引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54234">GH 54234</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.value_counts.html#pandas.core.groupby.DataFrameGroupBy.value_counts" title="pandas.core.groupby.DataFrameGroupBy.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.value_counts()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.value_counts.html#pandas.core.groupby.SeriesGroupBy.value_counts" title="pandas.core.groupby.SeriesGroupBy.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.value_counts()</span></code></a> 中存在错误，如果 DataFrame 的列或 Series 的名称是整数，可能会导致错误的排序 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55951">GH 55951</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.value_counts.html#pandas.core.groupby.DataFrameGroupBy.value_counts" title="pandas.core.groupby.DataFrameGroupBy.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.value_counts()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.value_counts.html#pandas.core.groupby.SeriesGroupBy.value_counts" title="pandas.core.groupby.SeriesGroupBy.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.value_counts()</span></code></a> 中存在错误，在 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 中不尊重 <code class="docutils literal notranslate"><span class="pre">sort=False</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55951">GH 55951</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.value_counts.html#pandas.core.groupby.DataFrameGroupBy.value_counts" title="pandas.core.groupby.DataFrameGroupBy.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.value_counts()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.value_counts.html#pandas.core.groupby.SeriesGroupBy.value_counts" title="pandas.core.groupby.SeriesGroupBy.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.value_counts()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">sort=True</span></code> 且 <code class="docutils literal notranslate"><span class="pre">normalize=True</span></code> 时，会按比例而不是频率进行排序 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55951">GH 55951</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.asfreq.html#pandas.DataFrame.asfreq" title="pandas.DataFrame.asfreq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.asfreq()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.asfreq.html#pandas.Series.asfreq" title="pandas.Series.asfreq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.asfreq()</span></code></a> 中存在错误，当 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 具有非纳秒分辨率时，错误地转换为纳秒分辨率 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55958">GH 55958</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.ewm.html#pandas.DataFrame.ewm" title="pandas.DataFrame.ewm"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.ewm()</span></code></a> 中存在错误，当传入的 <code class="docutils literal notranslate"><span class="pre">times</span></code> 具有非纳秒 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 或 <a class="reference internal" href="../reference/api/pandas.DatetimeTZDtype.html#pandas.DatetimeTZDtype" title="pandas.DatetimeTZDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code></a> dtype 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56262">GH 56262</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">sort=True</span></code> 时，按 <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> 和 NA 值组合进行分组会失败 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54847">GH 54847</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 中存在错误，当为 DataFrame 子类选择列子集以应用函数时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56761">GH 56761</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 中存在错误，不尊重 <a class="reference internal" href="../reference/api/pandas.tseries.offsets.BusinessDay.html#pandas.tseries.offsets.BusinessDay" title="pandas.tseries.offsets.BusinessDay"><code class="xref py py-class docutils literal notranslate"><span class="pre">BusinessDay</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">closed</span></code> 和 <code class="docutils literal notranslate"><span class="pre">label</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55282">GH 55282</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 中存在错误，当对 <code class="docutils literal notranslate"><span class="pre">pyarrow.timestamp</span></code> 或 <code class="docutils literal notranslate"><span class="pre">pyarrow.duration</span></code> 类型的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a> 进行重采样时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55989">GH 55989</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 中存在错误，对于 <a class="reference internal" href="../reference/api/pandas.tseries.offsets.BusinessDay.html#pandas.tseries.offsets.BusinessDay" title="pandas.tseries.offsets.BusinessDay"><code class="xref py py-class docutils literal notranslate"><span class="pre">BusinessDay</span></code></a>，bin 边缘不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55281">GH 55281</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 中存在错误，对于 <a class="reference internal" href="../reference/api/pandas.tseries.offsets.MonthBegin.html#pandas.tseries.offsets.MonthBegin" title="pandas.tseries.offsets.MonthBegin"><code class="xref py py-class docutils literal notranslate"><span class="pre">MonthBegin</span></code></a>，bin 边缘不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55271">GH 55271</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.rolling.html#pandas.Series.rolling" title="pandas.Series.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rolling()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">closed='left'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">closed='neither'</span></code> 时，重复的日期时间类索引被视为连续而非相等 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20712">GH 20712</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.rolling.html#pandas.Series.rolling" title="pandas.Series.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rolling()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">index</span></code> 或 <code class="docutils literal notranslate"><span class="pre">on</span></code> 列是带有 <code class="docutils literal notranslate"><span class="pre">pyarrow.timestamp</span></code> 类型的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55849">GH 55849</a>)</p></li>
</ul>
</section>
<section id="reshaping">
<h3>重塑<a class="headerlink" href="v2.2.0.html#reshaping" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中存在错误，当传入 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 索引时会忽略 <code class="docutils literal notranslate"><span class="pre">sort</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54769">GH 54769</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">ignore_index=False</span></code> 时会重命名 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15047">GH 15047</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">by</span></code> dtype 不是 <code class="docutils literal notranslate"><span class="pre">object</span></code>、<code class="docutils literal notranslate"><span class="pre">int64</span></code> 或 <code class="docutils literal notranslate"><span class="pre">uint64</span></code> 时会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22794">GH 22794</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 中存在错误，对于字符串 dtype 会引发不正确的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56444">GH 56444</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 中存在错误，当对 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a> 列使用 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 容差时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56486">GH 56486</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 中存在错误，当合并 datetime 列和 timedelta 列时未引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56455">GH 56455</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 中存在错误，当合并字符串列和数字列时未引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56441">GH 56441</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 中存在错误，对于新的字符串 dtype 未排序 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56442">GH 56442</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 中存在错误，当左侧和/或右侧为空时，返回的列顺序不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/51929">GH 51929</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.melt.html#pandas.DataFrame.melt" title="pandas.DataFrame.melt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.melt()</span></code></a> 中存在错误，如果 <code class="docutils literal notranslate"><span class="pre">var_name</span></code> 不是字符串，则会引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55948">GH 55948</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.melt.html#pandas.DataFrame.melt" title="pandas.DataFrame.melt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.melt()</span></code></a> 中存在错误，它不会保留 datetime (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55254">GH 55254</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table" title="pandas.DataFrame.pivot_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pivot_table()</span></code></a> 中存在错误，当列具有数字名称时，行边距不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26568">GH 26568</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot.html#pandas.DataFrame.pivot" title="pandas.DataFrame.pivot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pivot()</span></code></a> 中存在错误，当数据具有数字列和扩展 dtype 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56528">GH 56528</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">future_stack=True</span></code> 时，不会保留索引中的 NA 值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56573">GH 56573</a>)</p></li>
</ul>
</section>
<section id="sparse">
<h3>稀疏<a class="headerlink" href="v2.2.0.html#sparse" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">arrays.SparseArray.take()</span></code> 中存在错误，当使用与数组填充值不同的填充值时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55181">GH 55181</a>)</p></li>
</ul>
</section>
<section id="other">
<h3>其他<a class="headerlink" href="v2.2.0.html#other" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.__dataframe__.html#pandas.DataFrame.__dataframe__" title="pandas.DataFrame.__dataframe__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__dataframe__()</span></code></a> 不支持 pyarrow large strings (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56702">GH 56702</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.describe.html#pandas.DataFrame.describe" title="pandas.DataFrame.describe"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.describe()</span></code></a> 中存在错误，当格式化百分位数时，结果中的 99.999% 百分位数被四舍五入为 100% (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55765">GH 55765</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe" title="pandas.api.interchange.from_dataframe"><code class="xref py py-func docutils literal notranslate"><span class="pre">api.interchange.from_dataframe()</span></code></a> 中存在错误，当处理空字符串列时会引发 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56703">GH 56703</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.qcut.html#pandas.qcut" title="pandas.qcut"><code class="xref py py-func docutils literal notranslate"><span class="pre">qcut()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> dtype 值具有非纳秒单位时，会错误地返回纳秒单位的 bin (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56101">GH 56101</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a> 中存在错误，错误地允许使用不带时区信息的 bin 对带时区信息的 datetime 进行切割 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/54964">GH 54964</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.infer_freq.html#pandas.infer_freq" title="pandas.infer_freq"><code class="xref py py-func docutils literal notranslate"><span class="pre">infer_freq()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.inferred_freq.html#pandas.DatetimeIndex.inferred_freq" title="pandas.DatetimeIndex.inferred_freq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.inferred_freq()</span></code></a> 中存在错误，当每周频率和非纳秒分辨率时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55609">GH 55609</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 中存在错误，当传入 <code class="docutils literal notranslate"><span class="pre">raw=True</span></code> 时，会忽略传递给应用函数的 <code class="docutils literal notranslate"><span class="pre">args</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55009">GH 55009</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.from_dict.html#pandas.DataFrame.from_dict" title="pandas.DataFrame.from_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.from_dict()</span></code></a> 中存在错误，它总是对创建的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的行进行排序。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55683">GH 55683</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.sort_index.html#pandas.DataFrame.sort_index" title="pandas.DataFrame.sort_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sort_index()</span></code></a> 中存在错误，当传入 <code class="docutils literal notranslate"><span class="pre">axis="columns"</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ignore_index=True</span></code> 时会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56478">GH 56478</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中渲染 <code class="docutils literal notranslate"><span class="pre">inf</span></code> 值时存在错误，当启用了 <code class="docutils literal notranslate"><span class="pre">use_inf_as_na</span></code> 选项时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55483">GH 55483</a>)</p></li>
<li><p>在渲染带有 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时存在错误，当其中一个索引级别的名称为 0 时，该名称未显示 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55415">GH 55415</a>)</p></li>
<li><p>将空 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 分配给列时，错误消息中存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55956">GH 55956</a>)</p></li>
<li><p>当时间字符串转换为带有 <code class="docutils literal notranslate"><span class="pre">pyarrow.time64</span></code> 类型的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a> 时存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/56463">GH 56463</a>)</p></li>
<li><p>修复了当在 <code class="xref py py-class docutils literal notranslate"><span class="pre">core.window.Rolling.apply</span></code> 中使用 <code class="docutils literal notranslate"><span class="pre">engine="numba"</span></code> 传递 numpy ufunc 时，来自 <code class="docutils literal notranslate"><span class="pre">numba</span></code> &gt;= 0.58.0 的虚假弃用警告 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/55247">GH 55247</a>)</p></li>
</ul>
</section>
</section>
<section id="contributors">
<span id="whatsnew-220-contributors"></span><h2>贡献者<a class="headerlink" href="v2.2.0.html#contributors" title="Link to this heading">#</a></h2>
<p>共有 162 人为本次发布贡献了补丁。名字旁边带有“+”的人是首次贡献补丁。</p>
<ul class="simple">
<li><p>AG</p></li>
<li><p>Aaron Rahman +</p></li>
<li><p>Abdullah Ihsan Secer +</p></li>
<li><p>Abhijit Deo +</p></li>
<li><p>Adrian D’Alessandro</p></li>
<li><p>Ahmad Mustafa Anis +</p></li>
<li><p>Amanda Bizzinotto</p></li>
<li><p>Amith KK +</p></li>
<li><p>Aniket Patil +</p></li>
<li><p>Antonio Fonseca +</p></li>
<li><p>Artur Barseghyan</p></li>
<li><p>Ben Greiner</p></li>
<li><p>Bill Blum +</p></li>
<li><p>Boyd Kane</p></li>
<li><p>Damian Kula</p></li>
<li><p>Dan King +</p></li>
<li><p>Daniel Weindl +</p></li>
<li><p>Daniele Nicolodi</p></li>
<li><p>David Poznik</p></li>
<li><p>David Toneian +</p></li>
<li><p>Dea María Léon</p></li>
<li><p>Deepak George +</p></li>
<li><p>Dmitriy +</p></li>
<li><p>Dominique Garmier +</p></li>
<li><p>Donald Thevalingam +</p></li>
<li><p>Doug Davis +</p></li>
<li><p>Dukastlik +</p></li>
<li><p>Elahe Sharifi +</p></li>
<li><p>Eric Han +</p></li>
<li><p>Fangchen Li</p></li>
<li><p>Francisco Alfaro +</p></li>
<li><p>Gadea Autric +</p></li>
<li><p>Guillaume Lemaitre</p></li>
<li><p>Hadi Abdi Khojasteh</p></li>
<li><p>Hedeer El Showk +</p></li>
<li><p>Huanghz2001 +</p></li>
<li><p>Isaac Virshup</p></li>
<li><p>Issam +</p></li>
<li><p>Itay Azolay +</p></li>
<li><p>Itayazolay +</p></li>
<li><p>Jaca +</p></li>
<li><p>Jack McIvor +</p></li>
<li><p>JackCollins91 +</p></li>
<li><p>James Spencer +</p></li>
<li><p>Jay</p></li>
<li><p>Jessica Greene</p></li>
<li><p>Jirka Borovec +</p></li>
<li><p>JohannaTrost +</p></li>
<li><p>John C +</p></li>
<li><p>Joris Van den Bossche</p></li>
<li><p>José Lucas Mayer +</p></li>
<li><p>José Lucas Silva Mayer +</p></li>
<li><p>João Andrade +</p></li>
<li><p>Kai Mühlbauer</p></li>
<li><p>Katharina Tielking, MD +</p></li>
<li><p>Kazuto Haruguchi +</p></li>
<li><p>Kevin</p></li>
<li><p>Lawrence Mitchell</p></li>
<li><p>Linus +</p></li>
<li><p>Linus Sommer +</p></li>
<li><p>Louis-Émile Robitaille +</p></li>
<li><p>Luke Manley</p></li>
<li><p>Lumberbot (aka Jack)</p></li>
<li><p>Maggie Liu +</p></li>
<li><p>MainHanzo +</p></li>
<li><p>Marc Garcia</p></li>
<li><p>Marco Edward Gorelli</p></li>
<li><p>MarcoGorelli</p></li>
<li><p>Martin Šícho +</p></li>
<li><p>Mateusz Sokół</p></li>
<li><p>Matheus Felipe +</p></li>
<li><p>Matthew Roeschke</p></li>
<li><p>Matthias Bussonnier</p></li>
<li><p>Maxwell Bileschi +</p></li>
<li><p>Michael Tiemann</p></li>
<li><p>Michał Górny</p></li>
<li><p>Molly Bowers +</p></li>
<li><p>Moritz Schubert +</p></li>
<li><p>NNLNR +</p></li>
<li><p>Natalia Mokeeva</p></li>
<li><p>Nils Müller-Wendt +</p></li>
<li><p>Omar Elbaz</p></li>
<li><p>Pandas Development Team</p></li>
<li><p>Paras Gupta +</p></li>
<li><p>Parthi</p></li>
<li><p>Patrick Hoefler</p></li>
<li><p>Paul Pellissier +</p></li>
<li><p>Paul Uhlenbruck +</p></li>
<li><p>Philip Meier</p></li>
<li><p>Philippe THOMY +</p></li>
<li><p>Quang Nguyễn</p></li>
<li><p>Raghav</p></li>
<li><p>Rajat Subhra Mukherjee</p></li>
<li><p>Ralf Gommers</p></li>
<li><p>Randolf Scholz +</p></li>
<li><p>Richard Shadrach</p></li>
<li><p>Rob +</p></li>
<li><p>Rohan Jain +</p></li>
<li><p>Ryan Gibson +</p></li>
<li><p>Sai-Suraj-27 +</p></li>
<li><p>Samuel Oranyeli +</p></li>
<li><p>Sara Bonati +</p></li>
<li><p>Sebastian Berg</p></li>
<li><p>Sergey Zakharov +</p></li>
<li><p>Shyamala Venkatakrishnan +</p></li>
<li><p>StEmGeo +</p></li>
<li><p>Stefanie Molin</p></li>
<li><p>Stijn de Gooijer +</p></li>
<li><p>Thiago Gariani +</p></li>
<li><p>Thomas A Caswell</p></li>
<li><p>Thomas Baumann +</p></li>
<li><p>Thomas Guillet +</p></li>
<li><p>Thomas Lazarus +</p></li>
<li><p>Thomas Li</p></li>
<li><p>Tim Hoffmann</p></li>
<li><p>Tim Swast</p></li>
<li><p>Tom Augspurger</p></li>
<li><p>Toro +</p></li>
<li><p>Torsten Wörtwein</p></li>
<li><p>Ville Aikas +</p></li>
<li><p>Vinita Parasrampuria +</p></li>
<li><p>Vyas Ramasubramani +</p></li>
<li><p>William Andrea</p></li>
<li><p>William Ayd</p></li>
<li><p>Willian Wang +</p></li>
<li><p>Xiao Yuan</p></li>
<li><p>Yao Xiao</p></li>
<li><p>Yves Delley</p></li>
<li><p>Zemux1613 +</p></li>
<li><p>Ziad Kermadi +</p></li>
<li><p>aaron-robeson-8451 +</p></li>
<li><p>aram-cinnamon +</p></li>
<li><p>caneff +</p></li>
<li><p>ccccjone +</p></li>
<li><p>chris-caballero +</p></li>
<li><p>cobalt</p></li>
<li><p>color455nm +</p></li>
<li><p>denisrei +</p></li>
<li><p>dependabot[bot]</p></li>
<li><p>jbrockmendel</p></li>
<li><p>jfadia +</p></li>
<li><p>johanna.trost +</p></li>
<li><p>kgmuzungu +</p></li>
<li><p>mecopur +</p></li>
<li><p>mhb143 +</p></li>
<li><p>morotti +</p></li>
<li><p>mvirts +</p></li>
<li><p>omar-elbaz</p></li>
<li><p>paulreece</p></li>
<li><p>pre-commit-ci[bot]</p></li>
<li><p>raj-thapa</p></li>
<li><p>rebecca-palmer</p></li>
<li><p>rmhowe425</p></li>
<li><p>rohanjain101</p></li>
<li><p>shiersansi +</p></li>
<li><p>smij720</p></li>
<li><p>srkds +</p></li>
<li><p>taytzehao</p></li>
<li><p>torext</p></li>
<li><p>vboxuser +</p></li>
<li><p>xzmeng +</p></li>
<li><p>yashb +</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev" href="v2.2.1.html" title="previous page"> <i class="fa-solid fa-angle-left"></i> <div class="prev-next-info"> <p class="prev-next-subtitle">上一页</p> <p class="prev-next-title">2.2.1 版新特性 (2024年2月22日)</p> </div> </a> <a class="right-next" href="v2.1.4.html" title="next page"> <div class="prev-next-info"> <p class="prev-next-subtitle">下一页</p> <p class="prev-next-title">2.1.4 版新特性 (2023年12月8日)</p> </div> <i class="fa-solid fa-angle-right"></i> </a></div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 本页内容</div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#upcoming-changes-in-pandas-3-0">pandas 3.0 即将进行的更改</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#copy-on-write">写入时复制</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#dedicated-string-data-type-backed-by-arrow-by-default">默认采用专用字符串数据类型（由 Arrow 提供支持）</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#enhancements">功能增强</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#adbc-driver-support-in-to-sql-and-read-sql">在 <code class="docutils literal notranslate"><span class="pre">to_sql</span></code> 和 <code class="docutils literal notranslate"><span class="pre">read_sql</span></code> 中添加了 ADBC 驱动支持</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#create-a-pandas-series-based-on-one-or-more-conditions">根据一个或多个条件创建 pandas Series</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#to-numpy-for-numpy-nullable-and-arrow-types-converts-to-suitable-numpy-dtype">用于 NumPy 可空类型和 Arrow 类型的 <code class="docutils literal notranslate"><span class="pre">to_numpy</span></code> 会转换为合适的 NumPy dtype</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#series-struct-accessor-for-pyarrow-structured-data">PyArrow 结构化数据的 <code class="docutils literal notranslate"><span class="pre">Series.struct</span></code> 访问器</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#series-list-accessor-for-pyarrow-list-data">PyArrow 列表数据的 <code class="docutils literal notranslate"><span class="pre">Series.list</span></code> 访问器</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#calamine-engine-for-read-excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code> 的 Calamine 引擎</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#other-enhancements">其他增强功能</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#notable-bug-fixes">值得注意的错误修复</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#merge-and-dataframe-join-now-consistently-follow-documented-sort-behavior"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code> 现在始终遵循文档中说明的排序行为</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#merge-and-dataframe-join-no-longer-reorder-levels-when-levels-differ"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code> 在级别不同时不再重新排序级别</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#increased-minimum-versions-for-dependencies">依赖项的最低版本要求提高</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#other-api-changes">其他 API 更改</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#deprecations">弃用</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#chained-assignment">链式赋值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#deprecate-aliases-m-q-y-etc-in-favour-of-me-qe-ye-etc-for-offsets">弃用偏移量别名 <code class="docutils literal notranslate"><span class="pre">M</span></code>、<code class="docutils literal notranslate"><span class="pre">Q</span></code>、<code class="docutils literal notranslate"><span class="pre">Y</span></code> 等，推荐使用 <code class="docutils literal notranslate"><span class="pre">ME</span></code>、<code class="docutils literal notranslate"><span class="pre">QE</span></code>、<code class="docutils literal notranslate"><span class="pre">YE</span></code> 等</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#deprecated-automatic-downcasting">弃用自动向下转型</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#other-deprecations">其他弃用</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#performance-improvements">性能改进</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#bug-fixes">错误修复</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#categorical">分类类型</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#datetimelike">日期时间类型</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#timedelta">时间差</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#timezones">时区</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#numeric">数值类型</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#conversion">转换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#strings">字符串</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#interval">区间</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#indexing">索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#missing">缺失值处理</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#multiindex">多级索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#i-o">输入/输出</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#period">周期</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#plotting">绘图</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#groupby-resample-rolling">分组/重采样/滚动</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#reshaping">重塑</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#sparse">稀疏</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#other">其他</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v2.2.0.html#contributors">贡献者</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/whatsnew/v2.2.0.rst.txt">
      <i class="fa-solid fa-file-lines"></i> 显示源代码</a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="copyright">© 2025, pandas，通过 <a href="https://numfocus.org">NumFOCUS, Inc.</a> 托管于 <a href="https://www.ovhcloud.com">OVHcloud</a>。</p></div>
      
        <div class="footer-item">

  <p class="sphinx-version">使用 <a href="https://sphinx-doc.cn/">Sphinx</a> 8.1.3 创建。<br />
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">使用 <a href="https://pydata.sphinx-doc.cn/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4 构建。</p></div>
      
    </div>
  
</div>

  </footer>
  
</body></html>