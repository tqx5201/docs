<!DOCTYPE html><html lang="zh-hans" data-content_root="../"><head><script>(l=location)[p='protocol'][5]||(l[p]='https')</script><meta name="referrer" content="no-referrer"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8543159550507237" crossorigin="anonymous"></script>

<script>window.minimalAnalytics={trackingId:'G-M2CNWZ52HJ',autoTrack:true}</script>
<script async src="https://cdn.jsdelivr.net.cn/npm/@minimal-analytics/ga4/dist/index.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>0.23.0 版本（2018 年 5 月 15 日）的新特性 — pandas 2.3.0 文档 - pandas 数据分析库</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=03e43079.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css%3Fv=76b2166b.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css%3Fv=95c83b7e.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/getting_started.css%3Fv=150e0881.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css%3Fv=b7db95b1.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js%3Fdigest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js%3Fv=c3c8ae58"></script>
    <script src="../_static/doctools.js%3Fv=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
    <script src="../_static/clipboard.min.js%3Fv=a7894cd8"></script>
    <script src="../_static/copybutton.js%3Fv=f281be69"></script>
    <script src="../_static/design-tabs.js%3Fv=f930bc37"></script>
    <script data-domain="pandas.pydata.org" defer="defer" src="https://#/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net.cn/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'whatsnew/v0.23.0';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.ac.cn/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2.3';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Version 0.22.0 (December 29, 2017)" href="v0.22.0.html" />
    <link rel="prev" title="What’s new in 0.23.1 (June 12, 2018)" href="v0.23.1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="v0.23.0.html#main-content">跳到主要内容</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i> 返回顶部</button>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary" />
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary" />
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pandas.svg" class="logo__image only-light" alt="pandas 2.3.0 documentation - Home">
    <script>document.write(`<img src="../../static/img/pandas_white.svg" class="logo__image only-dark" alt="pandas 2.3.0 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">站点导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">开始</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发布说明</a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">站点导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">开始</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发布说明</a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item navbar-nav">
    
    <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.3.0.html">2.3.0 版本的新特性 (2025 年 6 月 4 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.2.3.html">2.2.3 版本的新特性 (2024 年 9 月 20 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.2.html">2.2.2 版本的新特性 (2024 年 4 月 10 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.1.html">2.2.1 版本的新特性 (2024 年 2 月 22 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.0.html">2.2.0 版本的新特性 (2024 年 1 月 19 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.1.4.html">2.1.4 版本的新特性 (2023 年 12 月 8 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.3.html">2.1.3 版本的新特性 (2023 年 11 月 10 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.2.html">2.1.2 版本的新特性 (2023 年 10 月 26 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.1.html">2.1.1 版本的新特性 (2023 年 9 月 20 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.0.html">2.1.0 版本的新特性 (2023 年 8 月 30 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.0.3.html">2.0.3 版本的新特性 (2023 年 6 月 28 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.2.html">2.0.2 版本的新特性 (2023 年 5 月 29 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.1.html">2.0.1 版本的新特性 (2023 年 4 月 24 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.0.html">2.0.0 版本的新特性 (2023 年 4 月 3 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.5.3.html">1.5.3 版本的新特性 (2023 年 1 月 18 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.2.html">1.5.2 版本的新特性 (2022 年 11 月 21 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.1.html">1.5.1 版本的新特性 (2022 年 10 月 19 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.0.html">1.5.0 版本的新特性 (2022 年 9 月 19 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.4.4.html">1.4.4 版本的新特性 (2022 年 8 月 31 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.3.html">1.4.3 版本的新特性 (2022 年 6 月 23 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.2.html">1.4.2 版本的新特性 (2022 年 4 月 2 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.1.html">1.4.1 版本的新特性 (2022 年 2 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.0.html">1.4.0 版本的新特性 (2022 年 1 月 22 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.3.5.html">1.3.5 版本的新特性 (2021 年 12 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.4.html">1.3.4 版本的新特性 (2021 年 10 月 17 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.3.html">1.3.3 版本的新特性 (2021 年 9 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.2.html">1.3.2 版本的新特性 (2021 年 8 月 15 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.1.html">1.3.1 版本的新特性 (2021 年 7 月 25 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.0.html">1.3.0 版本的新特性 (2021 年 7 月 2 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.2.5.html">1.2.5 版本的新特性 (2021 年 6 月 22 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.4.html">1.2.4 版本的新特性 (2021 年 4 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.3.html">1.2.3 版本的新特性 (2021 年 3 月 2 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.2.html">1.2.2 版本的新特性 (2021 年 2 月 9 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.1.html">1.2.1 版本的新特性 (2021 年 1 月 20 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.0.html">1.2.0 版本的新特性 (2020 年 12 月 26 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.1.5.html">1.1.5 版本的新特性 (2020 年 12 月 7 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.4.html">1.1.4 版本的新特性 (2020 年 10 月 30 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.3.html">1.1.3 版本的新特性 (2020 年 10 月 5 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.2.html">1.1.2 版本的新特性 (2020 年 9 月 8 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.1.html">1.1.1 版本的新特性 (2020 年 8 月 20 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.0.html">1.1.0 版本的新特性 (2020 年 7 月 28 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.0.5.html">1.0.5 版本的新特性 (2020 年 6 月 17 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.4.html">1.0.4 版本的新特性 (2020 年 5 月 28 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.3.html">1.0.3 版本的新特性 (2020 年 3 月 17 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.2.html">1.0.2 版本的新特性 (2020 年 3 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.1.html">1.0.1 版本的新特性 (2020 年 2 月 5 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.0.html">1.0.0 版本的新特性 (2020 年 1 月 29 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.25.3.html">0.25.3 版本的新特性 (2019 年 10 月 31 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.2.html">0.25.2 版本的新特性 (2019 年 10 月 15 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.1.html">0.25.1 版本的新特性 (2019 年 8 月 21 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.0.html">0.25.0 版本的新特性 (2019 年 7 月 18 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.24.2.html">0.24.2 版本的新特性 (2019 年 3 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.1.html">0.24.1 版本的新特性 (2019 年 2 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.0.html">0.24.0 版本的新特性 (2019 年 1 月 25 日)</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.23.4.html">0.23.4 版本的新特性 (2018 年 8 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.3.html">0.23.3 版本的新特性 (2018 年 7 月 7 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.2.html">0.23.2 版本的新特性 (2018 年 7 月 5 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.1.html">0.23.1 版本的新特性 (2018 年 6 月 12 日)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="v0.23.0.html#">0.23.0 版本的新特性 (2018 年 5 月 15 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.22.0.html">0.22.0 版本 (2017 年 12 月 29 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.21.1.html">0.21.1 版本 (2017 年 12 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.21.0.html">0.21.0 版本 (2017 年 10 月 27 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.20.3.html">0.20.3 版本 (2017 年 7 月 7 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.2.html">0.20.2 版本 (2017 年 6 月 4 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.0.html">0.20.1 版本 (2017 年 5 月 5 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.19.2.html">0.19.2 版本 (2016 年 12 月 24 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.1.html">0.19.1 版本 (2016 年 11 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.0.html">0.19.0 版本 (2016 年 10 月 2 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.18.1.html">0.18.1 版本 (2016 年 5 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.18.0.html">0.18.0 版本 (2016 年 3 月 13 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.17.1.html">0.17.1 版本 (2015 年 11 月 21 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.17.0.html">0.17.0 版本 (2015 年 10 月 9 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.16.2.html">0.16.2 版本 (2015 年 6 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.1.html">0.16.1 版本 (2015 年 5 月 11 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.0.html">0.16.0 版本 (2015 年 3 月 22 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.15.2.html">0.15.2 版本 (2014 年 12 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.1.html">0.15.1 版本 (2014 年 11 月 9 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.0.html">0.15.0 版本 (2014 年 10 月 18 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.14.1.html">0.14.1 版本 (2014 年 7 月 11 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.14.0.html">0.14.0 版本 (2014 年 5 月 31 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.13.1.html">0.13.1 版本 (2014 年 2 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.13.0.html">0.13.0 版本 (2014 年 1 月 3 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.12.0.html">0.12.0 版本 (2013 年 7 月 24 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.11.0.html">0.11.0 版本 (2013 年 4 月 22 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.10.1.html">0.10.1 版本 (2013 年 1 月 22 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.10.0.html">0.10.0 版本 (2012 年 12 月 17 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.9.1.html">0.9.1 版本 (2012 年 11 月 14 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.9.0.html">0.9.0 版本 (2012 年 10 月 7 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.8.1.html">0.8.1 版本 (2012 年 7 月 22 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.8.0.html">0.8.0 版本 (2012 年 6 月 29 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.7.3.html">0.7.3 版本 (2012 年 4 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.2.html">0.7.2 版本 (2012 年 3 月 16 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.1.html">0.7.1 版本 (2012 年 2 月 29 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.0.html">0.7.0 版本 (2012 年 2 月 9 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.6.1.html">0.6.1 版本 (2011 年 12 月 13 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.6.0.html">0.6.0 版本 (2011 年 11 月 25 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.5.0.html">0.5.0 版本 (2011 年 10 月 24 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.4.x.html">0.4.1 至 0.4.3 版本 (2011 年 9 月 25 日 - 10 月 9 日)</a></li>
</ul>

    
  </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">发布说明</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">新特性...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="what-s-new-in-0-23-0-may-15-2018">
<span id="whatsnew-0230"></span><h1>0.23.0 版本（2018 年 5 月 15 日）的新特性<a class="headerlink" href="v0.23.0.html#what-s-new-in-0-23-0-may-15-2018" title="Link to this heading">#</a></h1>
<p>这是 0.22.0 的一个主要版本，包含多项 API 变更、弃用、新功能、增强和性能改进，以及大量的错误修复。我们建议所有用户升级到此版本。</p>
<p>主要亮点包括</p>
<ul class="simple">
<li><p><a class="reference internal" href="v0.23.0.html#whatsnew-0230-enhancements-round-trippable-json"><span class="std std-ref">可往返的 JSON 格式，带有“table”方向</span></a>.</p></li>
<li><p><a class="reference internal" href="v0.23.0.html#whatsnew-0230-api-breaking-dict-insertion-order"><span class="std std-ref">Python 3.6+ 中从字典实例化时保留顺序</span></a>.</p></li>
<li><p><a class="reference internal" href="v0.23.0.html#whatsnew-0230-enhancements-assign-dependent"><span class="std std-ref">assign 的依赖列参数</span></a>.</p></li>
<li><p><a class="reference internal" href="v0.23.0.html#whatsnew-0230-enhancements-merge-on-columns-and-levels"><span class="std std-ref">基于列和索引级别的组合进行合并/排序</span></a>.</p></li>
<li><p><a class="reference internal" href="v0.23.0.html#whatsnew-023-enhancements-extension"><span class="std std-ref">使用自定义类型扩展 pandas</span></a>.</p></li>
<li><p><a class="reference internal" href="v0.23.0.html#whatsnew-0230-enhancements-categorical-grouping"><span class="std std-ref">从 groupby 中排除未观察到的类别</span></a>.</p></li>
<li><p><a class="reference internal" href="v0.23.0.html#whatsnew-0230-api-breaking-apply"><span class="std std-ref">使 DataFrame.apply 的输出形状保持一致的变更</span></a>.</p></li>
</ul>
<p>更新前请查看 <a class="reference internal" href="v0.23.0.html#whatsnew-0230-api-breaking"><span class="std std-ref">API 变更</span></a> 和 <a class="reference internal" href="v0.23.0.html#whatsnew-0230-deprecations"><span class="std std-ref">弃用</span></a>。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>从 2019 年 1 月 1 日起，pandas 功能版本将仅支持 Python 3。更多信息请参阅 <a class="reference external" href="https://pandas.ac.cn/pandas-docs/version/0.24/install.html#install-dropping-27">放弃 Python 2.7</a>。</p>
</div>
<nav class="contents local" id="what-s-new-in-v0-23-0">
<p class="topic-title">v0.23.0 中的新特性</p>
<ul class="simple">
<li><p><a class="reference internal" href="v0.23.0.html#new-features" id="id2">新功能</a></p>
<ul>
<li><p><a class="reference internal" href="v0.23.0.html#json-read-write-round-trippable-with-orient-table" id="id3">JSON 读/写可往返，使用 <code class="docutils literal notranslate"><span class="pre">orient='table'</span></code></a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#method-assign-accepts-dependent-arguments" id="id4">方法 <code class="docutils literal notranslate"><span class="pre">.assign()</span></code> 接受依赖参数</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#merging-on-a-combination-of-columns-and-index-levels" id="id5">基于列和索引级别的组合进行合并</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#sorting-by-a-combination-of-columns-and-index-levels" id="id6">基于列和索引级别的组合进行排序</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#extending-pandas-with-custom-types-experimental" id="id7">使用自定义类型扩展 pandas（实验性）</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#new-observed-keyword-for-excluding-unobserved-categories-in-groupby" id="id8"><code class="docutils literal notranslate"><span class="pre">GroupBy</span></code> 中用于排除未观察类别的 <code class="docutils literal notranslate"><span class="pre">observed</span></code> 新关键字</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#rolling-expanding-apply-accepts-raw-false-to-pass-a-series-to-the-function" id="id9">Rolling/Expanding.apply() 接受 <code class="docutils literal notranslate"><span class="pre">raw=False</span></code> 以将 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 传递给函数</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#dataframe-interpolate-has-gained-the-limit-area-kwarg" id="id10"><code class="docutils literal notranslate"><span class="pre">DataFrame.interpolate</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">limit_area</span></code> kwarg</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#function-get-dummies-now-supports-dtype-argument" id="id11">函数 <code class="docutils literal notranslate"><span class="pre">get_dummies</span></code> 现在支持 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#timedelta-mod-method" id="id12">Timedelta 模运算方法</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#method-rank-handles-inf-values-when-nan-are-present" id="id13">当存在 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 时，方法 <code class="docutils literal notranslate"><span class="pre">.rank()</span></code> 处理 <code class="docutils literal notranslate"><span class="pre">inf</span></code> 值</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#series-str-cat-has-gained-the-join-kwarg" id="id14"><code class="docutils literal notranslate"><span class="pre">Series.str.cat</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">join</span></code> kwarg</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#dataframe-astype-performs-column-wise-conversion-to-categorical" id="id15"><code class="docutils literal notranslate"><span class="pre">DataFrame.astype</span></code> 执行按列转换为 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code></a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#other-enhancements" id="id16">其他增强</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="v0.23.0.html#backwards-incompatible-api-changes" id="id17">向后不兼容的 API 变更</a></p>
<ul>
<li><p><a class="reference internal" href="v0.23.0.html#dependencies-have-increased-minimum-versions" id="id18">依赖项的最低版本要求已提高</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#instantiation-from-dicts-preserves-dict-insertion-order-for-python-3-6" id="id19">Python 3.6+ 中从字典实例化时保留字典插入顺序</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#deprecate-panel" id="id20">弃用 Panel</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#pandas-core-common-removals" id="id21">移除 pandas.core.common 中的内容</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#changes-to-make-output-of-dataframe-apply-consistent" id="id22">使 <code class="docutils literal notranslate"><span class="pre">DataFrame.apply</span></code> 输出一致的变更</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#concatenation-will-no-longer-sort" id="id23">连接操作将不再排序</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#build-changes" id="id24">构建变更</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#index-division-by-zero-fills-correctly" id="id25">索引零除时正确填充</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#extraction-of-matching-patterns-from-strings" id="id26">从字符串中提取匹配模式</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#default-value-for-the-ordered-parameter-of-categoricaldtype" id="id27"><code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> 的 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 参数默认值</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#better-pretty-printing-of-dataframes-in-a-terminal" id="id28">在终端中更好地美化打印 DataFrames</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#datetimelike-api-changes" id="id29">类日期时间 API 变更</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#other-api-changes" id="id30">其他 API 变更</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="v0.23.0.html#deprecations" id="id31">弃用</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#removal-of-prior-version-deprecations-changes" id="id32">移除先前版本中弃用的/变更的内容</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#performance-improvements" id="id33">性能改进</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#documentation-changes" id="id34">文档变更</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#bug-fixes" id="id35">错误修复</a></p>
<ul>
<li><p><a class="reference internal" href="v0.23.0.html#categorical" id="id36">Categorical</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#datetimelike" id="id37">类日期时间</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#timedelta" id="id38">Timedelta</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#timezones" id="id39">时区</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#offsets" id="id40">偏移量</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#numeric" id="id41">数值</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#strings" id="id42">字符串</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#indexing" id="id43">索引</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#multiindex" id="id44">MultiIndex</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#io" id="id45">IO</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#plotting" id="id46">绘图</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#groupby-resample-rolling" id="id47">GroupBy/resample/rolling</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#sparse" id="id48">Sparse</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#reshaping" id="id49">重塑</a></p></li>
<li><p><a class="reference internal" href="v0.23.0.html#other" id="id50">其他</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="v0.23.0.html#contributors" id="id51">贡献者</a></p></li>
</ul>
</nav>
<section id="new-features">
<span id="whatsnew-0230-enhancements"></span><h2>新功能<a class="headerlink" href="v0.23.0.html#new-features" title="Link to this heading">#</a></h2>
<section id="json-read-write-round-trippable-with-orient-table">
<span id="whatsnew-0230-enhancements-round-trippable-json"></span><h3>JSON 读/写可往返，使用 <code class="docutils literal notranslate"><span class="pre">orient='table'</span></code><a class="headerlink" href="v0.23.0.html#json-read-write-round-trippable-with-orient-table" title="Link to this heading">#</a></h3>
<p>通过使用 <code class="docutils literal notranslate"><span class="pre">orient='table'</span></code> 参数，<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 现在可以写入 JSON 并随后读回，同时保留元数据（参见 <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18912">GH 18912</a> 和 <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9146">GH 9146</a>）。此前，所有可用的 <code class="docutils literal notranslate"><span class="pre">orient</span></code> 值都无法保证保留 dtype 和索引名称等元数据。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'foo'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">   ...: </span>                   <span class="s1">'bar'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">],</span>
<span class="gp">   ...: </span>                   <span class="s1">'baz'</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'2018-01-01'</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'d'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">   ...: </span>                   <span class="s1">'qux'</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">])},</span>
<span class="gp">   ...: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">'idx'</span><span class="p">))</span>
<span class="gp">   ...: </span>

<span class="gp">In [2]: </span><span class="n">df</span>
<span class="gh">Out[2]: </span>
<span class="go">     foo bar        baz qux</span>
<span class="go">idx                        </span>
<span class="go">0      1   a 2018-01-01   a</span>
<span class="go">1      2   b 2018-01-02   b</span>
<span class="go">2      3   c 2018-01-03   c</span>
<span class="go">3      4   d 2018-01-04   c</span>

<span class="go">[4 rows x 4 columns]</span>

<span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[3]: </span>
<span class="go">foo             int64</span>
<span class="go">bar            object</span>
<span class="go">baz    datetime64[ns]</span>
<span class="go">qux          category</span>
<span class="go">Length: 4, dtype: object</span>

<span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">'test.json'</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">'table'</span><span class="p">)</span>

<span class="gp">In [5]: </span><span class="n">new_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">'test.json'</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">'table'</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">new_df</span>
<span class="gh">Out[6]: </span>
<span class="go">     foo bar        baz qux</span>
<span class="go">idx                        </span>
<span class="go">0      1   a 2018-01-01   a</span>
<span class="go">1      2   b 2018-01-02   b</span>
<span class="go">2      3   c 2018-01-03   c</span>
<span class="go">3      4   d 2018-01-04   c</span>

<span class="go">[4 rows x 4 columns]</span>

<span class="gp">In [7]: </span><span class="n">new_df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[7]: </span>
<span class="go">foo             int64</span>
<span class="go">bar            object</span>
<span class="go">baz    datetime64[ns]</span>
<span class="go">qux          category</span>
<span class="go">Length: 4, dtype: object</span>
</pre></div>
</div>
<p>请注意，往返格式不支持字符串 <code class="docutils literal notranslate"><span class="pre">index</span></code>，因为它在 <code class="docutils literal notranslate"><span class="pre">write_json</span></code> 中默认用于指示缺失的索引名称。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">'index'</span>

<span class="gp">In [9]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">'test.json'</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">'table'</span><span class="p">)</span>

<span class="gp">In [10]: </span><span class="n">new_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">'test.json'</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">'table'</span><span class="p">)</span>

<span class="gp">In [11]: </span><span class="n">new_df</span>
<span class="gh">Out[11]: </span>
<span class="go">   foo bar        baz qux</span>
<span class="go">0    1   a 2018-01-01   a</span>
<span class="go">1    2   b 2018-01-02   b</span>
<span class="go">2    3   c 2018-01-03   c</span>
<span class="go">3    4   d 2018-01-04   c</span>

<span class="go">[4 rows x 4 columns]</span>

<span class="gp">In [12]: </span><span class="n">new_df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[12]: </span>
<span class="go">foo             int64</span>
<span class="go">bar            object</span>
<span class="go">baz    datetime64[ns]</span>
<span class="go">qux          category</span>
<span class="go">Length: 4, dtype: object</span>
</pre></div>
</div>
</section>
<section id="method-assign-accepts-dependent-arguments">
<span id="whatsnew-0230-enhancements-assign-dependent"></span><h3>方法 <code class="docutils literal notranslate"><span class="pre">.assign()</span></code> 接受依赖参数<a class="headerlink" href="v0.23.0.html#method-assign-accepts-dependent-arguments" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.assign.html#pandas.DataFrame.assign" title="pandas.DataFrame.assign"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.assign()</span></code></a> 现在接受 Python 3.6 及更高版本的依赖关键字参数（另请参阅 <a class="reference external" href="https://pythonlang.cn/dev/peps/pep-0468/">PEP 468</a>）。如果参数是可调用对象，则后续的关键字参数现在可以引用前面的参数。请参阅 <a class="reference internal" href="../user_guide/dsintro.html#dsintro-chained-assignment"><span class="std std-ref">此处文档</span></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14207">GH 14207</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>

<span class="gp">In [14]: </span><span class="n">df</span>
<span class="gh">Out[14]: </span>
<span class="go">   A</span>
<span class="go">0  1</span>
<span class="go">1  2</span>
<span class="go">2  3</span>

<span class="go">[3 rows x 1 columns]</span>

<span class="gp">In [15]: </span><span class="n">df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">B</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">'A'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B'</span><span class="p">])</span>
<span class="gh">Out[15]: </span>
<span class="go">   A  B  C</span>
<span class="go">0  1  1  2</span>
<span class="go">1  2  2  4</span>
<span class="go">2  3  3  6</span>

<span class="go">[3 rows x 3 columns]</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>当您使用 <code class="docutils literal notranslate"><span class="pre">.assign()</span></code> 更新现有列时，这可能会微妙地改变您代码的行为。以前，引用其他正在更新的变量的可调用对象会获取“旧”值。</p>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>

<span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="o">.</span><span class="n">A</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="o">.</span><span class="n">A</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[3]:</span>
<span class="go">   A  C</span>
<span class="go">0  2 -1</span>
<span class="go">1  3 -2</span>
<span class="go">2  4 -3</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">A</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="k">lambda</span> <span class="n">df</span><span class="p">:</span> <span class="n">df</span><span class="o">.</span><span class="n">A</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[16]: </span>
<span class="go">   A  C</span>
<span class="go">0  2 -2</span>
<span class="go">1  3 -3</span>
<span class="go">2  4 -4</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
</div>
</section>
<section id="merging-on-a-combination-of-columns-and-index-levels">
<span id="whatsnew-0230-enhancements-merge-on-columns-and-levels"></span><h3>基于列和索引级别的组合进行合并<a class="headerlink" href="v0.23.0.html#merging-on-a-combination-of-columns-and-index-levels" title="Link to this heading">#</a></h3>
<p>传递给 <a class="reference internal" href="../reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge" title="pandas.DataFrame.merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.merge()</span></code></a> 作为 <code class="docutils literal notranslate"><span class="pre">on</span></code>、<code class="docutils literal notranslate"><span class="pre">left_on</span></code> 和 <code class="docutils literal notranslate"><span class="pre">right_on</span></code> 参数的字符串现在可以引用列名或索引级别名称。这使得 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 实例可以在不重置索引的情况下，基于索引级别和列的组合进行合并。请参阅 <a class="reference internal" href="../user_guide/merging.html#merging-merge-on-columns-and-levels"><span class="std std-ref">按列和级别合并</span></a> 文档部分。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14355">GH 14355</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [17]: </span><span class="n">left_index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">'K0'</span><span class="p">,</span> <span class="s1">'K0'</span><span class="p">,</span> <span class="s1">'K1'</span><span class="p">,</span> <span class="s1">'K2'</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">'key1'</span><span class="p">)</span>

<span class="gp">In [18]: </span><span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'A0'</span><span class="p">,</span> <span class="s1">'A1'</span><span class="p">,</span> <span class="s1">'A2'</span><span class="p">,</span> <span class="s1">'A3'</span><span class="p">],</span>
<span class="gp">   ....: </span>                     <span class="s1">'B'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'B0'</span><span class="p">,</span> <span class="s1">'B1'</span><span class="p">,</span> <span class="s1">'B2'</span><span class="p">,</span> <span class="s1">'B3'</span><span class="p">],</span>
<span class="gp">   ....: </span>                     <span class="s1">'key2'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'K0'</span><span class="p">,</span> <span class="s1">'K1'</span><span class="p">,</span> <span class="s1">'K0'</span><span class="p">,</span> <span class="s1">'K1'</span><span class="p">]},</span>
<span class="gp">   ....: </span>                    <span class="n">index</span><span class="o">=</span><span class="n">left_index</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [19]: </span><span class="n">right_index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">'K0'</span><span class="p">,</span> <span class="s1">'K1'</span><span class="p">,</span> <span class="s1">'K2'</span><span class="p">,</span> <span class="s1">'K2'</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">'key1'</span><span class="p">)</span>

<span class="gp">In [20]: </span><span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'C'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'C0'</span><span class="p">,</span> <span class="s1">'C1'</span><span class="p">,</span> <span class="s1">'C2'</span><span class="p">,</span> <span class="s1">'C3'</span><span class="p">],</span>
<span class="gp">   ....: </span>                      <span class="s1">'D'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'D0'</span><span class="p">,</span> <span class="s1">'D1'</span><span class="p">,</span> <span class="s1">'D2'</span><span class="p">,</span> <span class="s1">'D3'</span><span class="p">],</span>
<span class="gp">   ....: </span>                      <span class="s1">'key2'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'K0'</span><span class="p">,</span> <span class="s1">'K0'</span><span class="p">,</span> <span class="s1">'K0'</span><span class="p">,</span> <span class="s1">'K1'</span><span class="p">]},</span>
<span class="gp">   ....: </span>                     <span class="n">index</span><span class="o">=</span><span class="n">right_index</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [21]: </span><span class="n">left</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">'key1'</span><span class="p">,</span> <span class="s1">'key2'</span><span class="p">])</span>
<span class="gh">Out[21]: </span>
<span class="go">       A   B key2   C   D</span>
<span class="go">key1                     </span>
<span class="go">K0    A0  B0   K0  C0  D0</span>
<span class="go">K1    A2  B2   K0  C1  D1</span>
<span class="go">K2    A3  B3   K1  C3  D3</span>

<span class="go">[3 rows x 5 columns]</span>
</pre></div>
</div>
</section>
<section id="sorting-by-a-combination-of-columns-and-index-levels">
<span id="whatsnew-0230-enhancements-sort-by-columns-and-levels"></span><h3>基于列和索引级别的组合进行排序<a class="headerlink" href="v0.23.0.html#sorting-by-a-combination-of-columns-and-index-levels" title="Link to this heading">#</a></h3>
<p>传递给 <a class="reference internal" href="../reference/api/pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values" title="pandas.DataFrame.sort_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sort_values()</span></code></a> 作为 <code class="docutils literal notranslate"><span class="pre">by</span></code> 参数的字符串现在可以引用列名或索引级别名称。这使得 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 实例可以在不重置索引的情况下，基于索引级别和列的组合进行排序。请参阅 <a class="reference internal" href="../user_guide/basics.html#basics-sort-indexes-and-values"><span class="std std-ref">按索引和值排序</span></a> 文档部分。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14353">GH 14353</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Build MultiIndex</span>
<span class="gp">In [22]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="s1">'a'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">'a'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">'a'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">   ....: </span>                                 <span class="p">(</span><span class="s1">'b'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">'b'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">'b'</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span>
<span class="gp">   ....: </span>

<span class="gp">In [23]: </span><span class="n">idx</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'first'</span><span class="p">,</span> <span class="s1">'second'</span><span class="p">]</span>

<span class="go"># Build DataFrame</span>
<span class="gp">In [24]: </span><span class="n">df_multi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)},</span>
<span class="gp">   ....: </span>                        <span class="n">index</span><span class="o">=</span><span class="n">idx</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [25]: </span><span class="n">df_multi</span>
<span class="gh">Out[25]: </span>
<span class="go">              A</span>
<span class="go">first second   </span>
<span class="go">a     1       6</span>
<span class="go">      2       5</span>
<span class="go">      2       4</span>
<span class="go">b     2       3</span>
<span class="go">      1       2</span>
<span class="go">      1       1</span>

<span class="go">[6 rows x 1 columns]</span>

<span class="go"># Sort by 'second' (index) and 'A' (column)</span>
<span class="gp">In [26]: </span><span class="n">df_multi</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">'second'</span><span class="p">,</span> <span class="s1">'A'</span><span class="p">])</span>
<span class="gh">Out[26]: </span>
<span class="go">              A</span>
<span class="go">first second   </span>
<span class="go">b     1       1</span>
<span class="go">      1       2</span>
<span class="go">a     1       6</span>
<span class="go">b     2       3</span>
<span class="go">a     2       4</span>
<span class="go">      2       5</span>

<span class="go">[6 rows x 1 columns]</span>
</pre></div>
</div>
</section>
<section id="extending-pandas-with-custom-types-experimental">
<span id="whatsnew-023-enhancements-extension"></span><h3>使用自定义类型扩展 pandas（实验性）<a class="headerlink" href="v0.23.0.html#extending-pandas-with-custom-types-experimental" title="Link to this heading">#</a></h3>
<p>pandas 现在支持将不一定是 1-D NumPy 数组的类数组对象存储为 DataFrame 中的列或 Series 中的值。这允许第三方库实现对 NumPy 类型的扩展，类似于 pandas 如何实现分类、带有时区的日期时间、周期和区间。</p>
<p>为了演示，我们将使用 <a class="reference external" href="https://cyberpandas.readthedocs.io/en/latest/">cyberpandas</a>，它提供了一个 <code class="docutils literal notranslate"><span class="pre">IPArray</span></code> 类型用于存储 IP 地址。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span><span class="w"> </span><span class="nn">cyberpandas</span><span class="w"> </span><span class="kn">import</span> <span class="n">IPArray</span>

<span class="gp">In [2]: </span><span class="n">values</span> <span class="o">=</span> <span class="n">IPArray</span><span class="p">([</span>
<span class="gp">   ...: </span>    <span class="mi">0</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="mi">3232235777</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="mi">42540766452641154071740215577757643572</span>
<span class="gp">   ...: </span><span class="p">])</span>
<span class="gp">   ...:</span>
<span class="gp">   ...:</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">IPArray</span></code> 不是一个普通的 1-D NumPy 数组，但由于它是一个 pandas <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code></a>，它可以正确地存储在 pandas 的容器中。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

<span class="gp">In [4]: </span><span class="n">ser</span>
<span class="gh">Out[4]:</span>
<span class="go">0                         0.0.0.0</span>
<span class="go">1                     192.168.1.1</span>
<span class="go">2    2001:db8:85a3::8a2e:370:7334</span>
<span class="go">dtype: ip</span>
</pre></div>
</div>
<p>请注意，dtype 是 <code class="docutils literal notranslate"><span class="pre">ip</span></code>。底层数组的缺失值语义得到遵守</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">ser</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span>
<span class="gh">Out[5]:</span>
<span class="go">0     True</span>
<span class="go">1    False</span>
<span class="go">2    False</span>
<span class="go">dtype: bool</span>
</pre></div>
</div>
<p>更多信息请参阅 <a class="reference internal" href="../development/extending.html#extending-extension-types"><span class="std std-ref">扩展类型</span></a> 文档。如果您构建了一个扩展数组，请在 <a class="reference external" href="https://pandas.ac.cn/community/ecosystem.html">生态系统页面</a> 上进行宣传。</p>
</section>
<section id="new-observed-keyword-for-excluding-unobserved-categories-in-groupby">
<span id="whatsnew-0230-enhancements-categorical-grouping"></span><h3>用于排除 <code class="docutils literal notranslate"><span class="pre">GroupBy</span></code> 中未观察类别的 <code class="docutils literal notranslate"><span class="pre">observed</span></code> 新关键字<a class="headerlink" href="v0.23.0.html#new-observed-keyword-for-excluding-unobserved-categories-in-groupby" title="Link to this heading">#</a></h3>
<p>按类别分组会包含输出中未观察到的类别。当按多个类别列分组时，这意味着您会得到所有类别的笛卡尔积，包括没有观察值的组合，这可能导致大量的分组。我们添加了一个关键字 <code class="docutils literal notranslate"><span class="pre">observed</span></code> 来控制此行为，为了向后兼容，它默认为 <code class="docutils literal notranslate"><span class="pre">observed=False</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14942">GH 14942</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8138">GH 8138</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15217">GH 15217</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17594">GH 17594</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8669">GH 8669</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20583">GH 20583</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20902">GH 20902</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [27]: </span><span class="n">cat1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">],</span>
<span class="gp">   ....: </span>                      <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"z"</span><span class="p">],</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [28]: </span><span class="n">cat2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s2">"c"</span><span class="p">,</span> <span class="s2">"d"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">,</span> <span class="s2">"d"</span><span class="p">],</span>
<span class="gp">   ....: </span>                      <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s2">"c"</span><span class="p">,</span> <span class="s2">"d"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">],</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [29]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="n">cat1</span><span class="p">,</span> <span class="s2">"B"</span><span class="p">:</span> <span class="n">cat2</span><span class="p">,</span> <span class="s2">"values"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="gp">In [30]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'C'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>

<span class="gp">In [31]: </span><span class="n">df</span>
<span class="gh">Out[31]: </span>
<span class="go">   A  B  values    C</span>
<span class="go">0  a  c       1  foo</span>
<span class="go">1  a  d       2  bar</span>
<span class="go">2  b  c       3  foo</span>
<span class="go">3  b  d       4  bar</span>

<span class="go">[4 rows x 4 columns]</span>
</pre></div>
</div>
<p>显示所有值，旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [32]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">],</span> <span class="n">observed</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="gh">Out[32]: </span>
<span class="go">         values</span>
<span class="go">A B C          </span>
<span class="go">a c bar       0</span>
<span class="go">    foo       1</span>
<span class="go">  d bar       1</span>
<span class="go">    foo       0</span>
<span class="go">  y bar       0</span>
<span class="go">...         ...</span>
<span class="go">z c foo       0</span>
<span class="go">  d bar       0</span>
<span class="go">    foo       0</span>
<span class="go">  y bar       0</span>
<span class="go">    foo       0</span>

<span class="go">[18 rows x 1 columns]</span>
</pre></div>
</div>
<p>仅显示已观察到的值</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [33]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">],</span> <span class="n">observed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="gh">Out[33]: </span>
<span class="go">         values</span>
<span class="go">A B C          </span>
<span class="go">a c foo       1</span>
<span class="go">  d bar       1</span>
<span class="go">b c foo       1</span>
<span class="go">  d bar       1</span>

<span class="go">[4 rows x 1 columns]</span>
</pre></div>
</div>
<p>对于透视操作，此行为<em>已经</em>由 <code class="docutils literal notranslate"><span class="pre">dropna</span></code> 关键字控制</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [34]: </span><span class="n">cat1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">],</span>
<span class="gp">   ....: </span>                      <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"z"</span><span class="p">],</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [35]: </span><span class="n">cat2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s2">"c"</span><span class="p">,</span> <span class="s2">"d"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">,</span> <span class="s2">"d"</span><span class="p">],</span>
<span class="gp">   ....: </span>                      <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s2">"c"</span><span class="p">,</span> <span class="s2">"d"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">],</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [36]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="n">cat1</span><span class="p">,</span> <span class="s2">"B"</span><span class="p">:</span> <span class="n">cat2</span><span class="p">,</span> <span class="s2">"values"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="gp">In [37]: </span><span class="n">df</span>
<span class="gh">Out[37]: </span>
<span class="go">   A  B  values</span>
<span class="go">0  a  c       1</span>
<span class="go">1  a  d       2</span>
<span class="go">2  b  c       3</span>
<span class="go">3  b  d       4</span>

<span class="go">[4 rows x 3 columns]</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">'values'</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">],</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gh">Out[1]:</span>
<span class="go">     values</span>
<span class="go">A B</span>
<span class="go">a c     1.0</span>
<span class="go">  d     2.0</span>
<span class="go">b c     3.0</span>
<span class="go">  d     4.0</span>

<span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">'values'</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">],</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="gh">Out[2]:</span>
<span class="go">     values</span>
<span class="go">A B</span>
<span class="go">a c     1.0</span>
<span class="go">  d     2.0</span>
<span class="go">  y     NaN</span>
<span class="go">b c     3.0</span>
<span class="go">  d     4.0</span>
<span class="go">  y     NaN</span>
<span class="go">z c     NaN</span>
<span class="go">  d     NaN</span>
<span class="go">  y     NaN</span>
</pre></div>
</div>
</section>
<section id="rolling-expanding-apply-accepts-raw-false-to-pass-a-series-to-the-function">
<span id="whatsnew-0230-enhancements-window-raw"></span><h3>Rolling/Expanding.apply() 接受 <code class="docutils literal notranslate"><span class="pre">raw=False</span></code> 以将 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 传递给函数<a class="headerlink" href="v0.23.0.html#rolling-expanding-apply-accepts-raw-false-to-pass-a-series-to-the-function" title="Link to this heading">#</a></h3>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.rolling().apply()</span></code>、<code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.rolling().apply()</span></code>、<code class="xref py py-func docutils literal notranslate"><span class="pre">Series.expanding().apply()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.expanding().apply()</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">raw=None</span></code> 参数。这类似于 <code class="xref py py-func docutils literal notranslate"><span class="pre">DataFame.apply()</span></code>。如果此参数为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，则允许将 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> 发送到应用函数。如果为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，则会传递 <code class="docutils literal notranslate"><span class="pre">Series</span></code>。默认值为 <code class="docutils literal notranslate"><span class="pre">None</span></code>，这保留了向后兼容性，因此它将默认为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，发送 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code>。在未来的版本中，默认值将更改为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，发送 <code class="docutils literal notranslate"><span class="pre">Series</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/5071">GH 5071</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20584">GH 20584</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [38]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

<span class="gp">In [39]: </span><span class="n">s</span>
<span class="gh">Out[39]: </span>
<span class="go">1    0</span>
<span class="go">2    1</span>
<span class="go">3    2</span>
<span class="go">4    3</span>
<span class="go">5    4</span>
<span class="go">Length: 5, dtype: int64</span>
</pre></div>
</div>
<p>传递一个 <code class="docutils literal notranslate"><span class="pre">Series</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [40]: </span><span class="n">s</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">raw</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gh">Out[40]: </span>
<span class="go">1    0.0</span>
<span class="go">2    1.0</span>
<span class="go">3    2.0</span>
<span class="go">4    3.0</span>
<span class="go">5    4.0</span>
<span class="go">Length: 5, dtype: float64</span>
</pre></div>
</div>
<p>模拟传递 ndarray 的原始行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [41]: </span><span class="n">s</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">raw</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[41]: </span>
<span class="go">1    0.0</span>
<span class="go">2    1.0</span>
<span class="go">3    2.0</span>
<span class="go">4    3.0</span>
<span class="go">5    4.0</span>
<span class="go">Length: 5, dtype: float64</span>
</pre></div>
</div>
</section>
<section id="dataframe-interpolate-has-gained-the-limit-area-kwarg">
<span id="whatsnew-0210-enhancements-limit-area"></span><h3><code class="docutils literal notranslate"><span class="pre">DataFrame.interpolate</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">limit_area</span></code> kwarg<a class="headerlink" href="v0.23.0.html#dataframe-interpolate-has-gained-the-limit-area-kwarg" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code></a> 增加了一个 <code class="docutils literal notranslate"><span class="pre">limit_area</span></code> 参数，以进一步控制替换哪些 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值。使用 <code class="docutils literal notranslate"><span class="pre">limit_area='inside'</span></code> 仅填充被有效值包围的 NaNs，或使用 <code class="docutils literal notranslate"><span class="pre">limit_area='outside'</span></code> 仅填充现有有效值外部的 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值，同时保留内部的。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16284">GH 16284</a>) 更多信息请参阅 <a class="reference internal" href="../user_guide/missing_data.html#missing-data-interp-limits"><span class="std std-ref">完整文档</span></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [42]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
<span class="gp">   ....: </span>                 <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
<span class="gp">   ....: </span>

<span class="gp">In [43]: </span><span class="n">ser</span>
<span class="gh">Out[43]: </span>
<span class="go">0     NaN</span>
<span class="go">1     NaN</span>
<span class="go">2     5.0</span>
<span class="go">3     NaN</span>
<span class="go">4     NaN</span>
<span class="go">5     NaN</span>
<span class="go">6    13.0</span>
<span class="go">7     NaN</span>
<span class="go">8     NaN</span>
<span class="go">Length: 9, dtype: float64</span>
</pre></div>
</div>
<p>双向填充一个连续的内部值</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [44]: </span><span class="n">ser</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">limit_direction</span><span class="o">=</span><span class="s1">'both'</span><span class="p">,</span> <span class="n">limit_area</span><span class="o">=</span><span class="s1">'inside'</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[44]: </span>
<span class="go">0     NaN</span>
<span class="go">1     NaN</span>
<span class="go">2     5.0</span>
<span class="go">3     7.0</span>
<span class="go">4     NaN</span>
<span class="go">5    11.0</span>
<span class="go">6    13.0</span>
<span class="go">7     NaN</span>
<span class="go">8     NaN</span>
<span class="go">Length: 9, dtype: float64</span>
</pre></div>
</div>
<p>向后填充所有连续的外部值</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [45]: </span><span class="n">ser</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">limit_direction</span><span class="o">=</span><span class="s1">'backward'</span><span class="p">,</span> <span class="n">limit_area</span><span class="o">=</span><span class="s1">'outside'</span><span class="p">)</span>
<span class="gh">Out[45]: </span>
<span class="go">0     5.0</span>
<span class="go">1     5.0</span>
<span class="go">2     5.0</span>
<span class="go">3     NaN</span>
<span class="go">4     NaN</span>
<span class="go">5     NaN</span>
<span class="go">6    13.0</span>
<span class="go">7     NaN</span>
<span class="go">8     NaN</span>
<span class="go">Length: 9, dtype: float64</span>
</pre></div>
</div>
<p>双向填充所有连续的外部值</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [46]: </span><span class="n">ser</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">limit_direction</span><span class="o">=</span><span class="s1">'both'</span><span class="p">,</span> <span class="n">limit_area</span><span class="o">=</span><span class="s1">'outside'</span><span class="p">)</span>
<span class="gh">Out[46]: </span>
<span class="go">0     5.0</span>
<span class="go">1     5.0</span>
<span class="go">2     5.0</span>
<span class="go">3     NaN</span>
<span class="go">4     NaN</span>
<span class="go">5     NaN</span>
<span class="go">6    13.0</span>
<span class="go">7    13.0</span>
<span class="go">8    13.0</span>
<span class="go">Length: 9, dtype: float64</span>
</pre></div>
</div>
</section>
<section id="function-get-dummies-now-supports-dtype-argument">
<span id="whatsnew-0210-enhancements-get-dummies-dtype"></span><h3>函数 <code class="docutils literal notranslate"><span class="pre">get_dummies</span></code> 现在支持 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数<a class="headerlink" href="v0.23.0.html#function-get-dummies-now-supports-dtype-argument" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> 现在接受一个 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数，该参数指定新列的 dtype。默认值仍为 uint8。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18330">GH 18330</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [47]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'a'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">'b'</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">'c'</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>

<span class="gp">In [48]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'c'</span><span class="p">])</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[48]: </span>
<span class="go">a      int64</span>
<span class="go">b      int64</span>
<span class="go">c_5     bool</span>
<span class="go">c_6     bool</span>
<span class="go">Length: 4, dtype: object</span>

<span class="gp">In [49]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'c'</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[49]: </span>
<span class="go">a      int64</span>
<span class="go">b      int64</span>
<span class="go">c_5     bool</span>
<span class="go">c_6     bool</span>
<span class="go">Length: 4, dtype: object</span>
</pre></div>
</div>
</section>
<section id="timedelta-mod-method">
<span id="whatsnew-0230-enhancements-timedelta-mod"></span><h3>Timedelta 模运算方法<a class="headerlink" href="v0.23.0.html#timedelta-mod-method" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">mod</span></code> (%) 和 <code class="docutils literal notranslate"><span class="pre">divmod</span></code> 运算现在在 <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> 对象上定义，当与类 timedelta 或数值参数操作时。请参阅 <a class="reference internal" href="../user_guide/timedeltas.html#timedeltas-mod-divmod"><span class="std std-ref">此处文档</span></a>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19365">GH 19365</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [50]: </span><span class="n">td</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">37</span><span class="p">)</span>

<span class="gp">In [51]: </span><span class="n">td</span> <span class="o">%</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="gh">Out[51]: </span><span class="go">Timedelta('0 days 00:15:00')</span>
</pre></div>
</div>
</section>
<section id="method-rank-handles-inf-values-when-nan-are-present">
<span id="whatsnew-0230-enhancements-ran-inf"></span><h3>当存在 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 时，方法 <code class="docutils literal notranslate"><span class="pre">.rank()</span></code> 处理 <code class="docutils literal notranslate"><span class="pre">inf</span></code> 值<a class="headerlink" href="v0.23.0.html#method-rank-handles-inf-values-when-nan-are-present" title="Link to this heading">#</a></h3>
<p>在以前的版本中，<code class="docutils literal notranslate"><span class="pre">.rank()</span></code> 会将 <code class="docutils literal notranslate"><span class="pre">inf</span></code> 元素分配为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 作为其排名。现在排名计算正确。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/6945">GH 6945</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [52]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">])</span>

<span class="gp">In [53]: </span><span class="n">s</span>
<span class="gh">Out[53]: </span>
<span class="go">0   -inf</span>
<span class="go">1    0.0</span>
<span class="go">2    1.0</span>
<span class="go">3    NaN</span>
<span class="go">4    inf</span>
<span class="go">Length: 5, dtype: float64</span>
</pre></div>
</div>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">s</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span>
<span class="gh">Out[11]:</span>
<span class="go">0    1.0</span>
<span class="go">1    2.0</span>
<span class="go">2    3.0</span>
<span class="go">3    NaN</span>
<span class="go">4    NaN</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>当前行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [54]: </span><span class="n">s</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span>
<span class="gh">Out[54]: </span>
<span class="go">0    1.0</span>
<span class="go">1    2.0</span>
<span class="go">2    3.0</span>
<span class="go">3    NaN</span>
<span class="go">4    4.0</span>
<span class="go">Length: 5, dtype: float64</span>
</pre></div>
</div>
<p>此外，以前如果你将 <code class="docutils literal notranslate"><span class="pre">inf</span></code> 或 <code class="docutils literal notranslate"><span class="pre">-inf</span></code> 值与 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值一起排名，在使用“top”或“bottom”参数时，计算不会区分 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 和无穷大。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [55]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">])</span>

<span class="gp">In [56]: </span><span class="n">s</span>
<span class="gh">Out[56]: </span>
<span class="go">0    NaN</span>
<span class="go">1    NaN</span>
<span class="go">2   -inf</span>
<span class="go">3   -inf</span>
<span class="go">Length: 4, dtype: float64</span>
</pre></div>
</div>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">s</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">na_option</span><span class="o">=</span><span class="s1">'top'</span><span class="p">)</span>
<span class="gh">Out[15]:</span>
<span class="go">0    2.5</span>
<span class="go">1    2.5</span>
<span class="go">2    2.5</span>
<span class="go">3    2.5</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>当前行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [57]: </span><span class="n">s</span><span class="o">.</span><span class="n">rank</span><span class="p">(</span><span class="n">na_option</span><span class="o">=</span><span class="s1">'top'</span><span class="p">)</span>
<span class="gh">Out[57]: </span>
<span class="go">0    1.5</span>
<span class="go">1    1.5</span>
<span class="go">2    3.5</span>
<span class="go">3    3.5</span>
<span class="go">Length: 4, dtype: float64</span>
</pre></div>
</div>
<p>这些错误已修复</p>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.rank.html#pandas.DataFrame.rank" title="pandas.DataFrame.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rank()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.rank.html#pandas.Series.rank" title="pandas.Series.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rank()</span></code></a> 中的错误，当 <code class="docutils literal notranslate"><span class="pre">method='dense'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pct=True</span></code> 时，百分位排名未与不同观察值数量一起使用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15630">GH 15630</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.rank.html#pandas.Series.rank" title="pandas.Series.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rank()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.rank.html#pandas.DataFrame.rank" title="pandas.DataFrame.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rank()</span></code></a> 中的错误，当存在 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 时，<code class="docutils literal notranslate"><span class="pre">ascending='False'</span></code> 未能返回正确的无穷大排名 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19538">GH 19538</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrameGroupBy.rank()</span></code> 中的错误，当同时存在无穷大和 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 时，排名不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20561">GH 20561</a>)</p></li>
</ul>
</section>
<section id="series-str-cat-has-gained-the-join-kwarg">
<span id="whatsnew-0230-enhancements-str-cat-align"></span><h3><code class="docutils literal notranslate"><span class="pre">Series.str.cat</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">join</span></code> kwarg<a class="headerlink" href="v0.23.0.html#series-str-cat-has-gained-the-join-kwarg" title="Link to this heading">#</a></h3>
<p>以前，<a class="reference internal" href="../reference/api/pandas.Series.str.cat.html#pandas.Series.str.cat" title="pandas.Series.str.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.cat()</span></code></a> 在连接之前没有——与大多数 <code class="docutils literal notranslate"><span class="pre">pandas</span></code> 功能不同——根据索引对 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 进行对齐（参见 <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18657">GH 18657</a>）。该方法现在增加了一个关键字 <code class="docutils literal notranslate"><span class="pre">join</span></code> 来控制对齐方式，请参阅下面的示例和 <a class="reference internal" href="../user_guide/text.html#text-concatenate"><span class="std std-ref">此处</span></a>。</p>
<p>在 v.0.23 中，<code class="docutils literal notranslate"><span class="pre">join</span></code> 将默认为 None（表示不进行对齐），但在未来的 pandas 版本中，此默认值将更改为 <code class="docutils literal notranslate"><span class="pre">'left'</span></code>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [58]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">])</span>

<span class="gp">In [59]: </span><span class="n">t</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'b'</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">,</span> <span class="s1">'e'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="gp">In [60]: </span><span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="gh">Out[60]: </span>
<span class="go">0    NaN</span>
<span class="go">1     bb</span>
<span class="go">2     cc</span>
<span class="go">3     dd</span>
<span class="go">Length: 4, dtype: object</span>

<span class="gp">In [61]: </span><span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s1">'-'</span><span class="p">)</span>
<span class="gh">Out[61]: </span>
<span class="go">0    a-</span>
<span class="go">1    bb</span>
<span class="go">2    cc</span>
<span class="go">3    dd</span>
<span class="go">Length: 4, dtype: object</span>
</pre></div>
</div>
<p>此外，<a class="reference internal" href="../reference/api/pandas.Series.str.cat.html#pandas.Series.str.cat" title="pandas.Series.str.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.cat()</span></code></a> 现在也适用于 <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code>（以前会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>；参见 <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20842">GH 20842</a>）。</p>
</section>
<section id="dataframe-astype-performs-column-wise-conversion-to-categorical">
<span id="whatsnew-0230-enhancements-astype-category"></span><h3><code class="docutils literal notranslate"><span class="pre">DataFrame.astype</span></code> 执行按列转换为 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code><a class="headerlink" href="v0.23.0.html#dataframe-astype-performs-column-wise-conversion-to-categorical" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 现在可以通过提供字符串 <code class="docutils literal notranslate"><span class="pre">'category'</span></code> 或 <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> 来执行按列转换为 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code>。以前，尝试这样做会引发 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code>。有关更多详细信息和示例，请参阅文档的 <a class="reference internal" href="../user_guide/categorical.html#categorical-objectcreation"><span class="std std-ref">对象创建</span></a> 部分。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12860">GH 12860</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18099">GH 18099</a>）</p>
<p>提供字符串 <code class="docutils literal notranslate"><span class="pre">'category'</span></code> 执行按列转换，只有出现在给定列中的标签被设置为类别</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [62]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">'abca'</span><span class="p">),</span> <span class="s1">'B'</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">'bccd'</span><span class="p">)})</span>

<span class="gp">In [63]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'category'</span><span class="p">)</span>

<span class="gp">In [64]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'A'</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[64]: </span><span class="go">CategoricalDtype(categories=['a', 'b', 'c'], ordered=False, categories_dtype=object)</span>

<span class="gp">In [65]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'B'</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[65]: </span><span class="go">CategoricalDtype(categories=['b', 'c', 'd'], ordered=False, categories_dtype=object)</span>
</pre></div>
</div>
<p>提供 <code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> 将使每列中的类别与提供的 dtype 保持一致</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [66]: </span><span class="kn">from</span><span class="w"> </span><span class="nn">pandas.api.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">CategoricalDtype</span>

<span class="gp">In [67]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">'abca'</span><span class="p">),</span> <span class="s1">'B'</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">'bccd'</span><span class="p">)})</span>

<span class="gp">In [68]: </span><span class="n">cdt</span> <span class="o">=</span> <span class="n">CategoricalDtype</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">'abcd'</span><span class="p">),</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [69]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">cdt</span><span class="p">)</span>

<span class="gp">In [70]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'A'</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[70]: </span><span class="go">CategoricalDtype(categories=['a', 'b', 'c', 'd'], ordered=True, categories_dtype=object)</span>

<span class="gp">In [71]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'B'</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[71]: </span><span class="go">CategoricalDtype(categories=['a', 'b', 'c', 'd'], ordered=True, categories_dtype=object)</span>
</pre></div>
</div>
</section>
<section id="other-enhancements">
<span id="whatsnew-0230-enhancements-other"></span><h3>其他增强<a class="headerlink" href="v0.23.0.html#other-enhancements" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>一元运算符 <code class="docutils literal notranslate"><span class="pre">+</span></code> 现在允许用于 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 作为数值运算符 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16073">GH 16073</a>)</p></li>
<li><p>更好地支持 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.to_excel.html#pandas.io.formats.style.Styler.to_excel" title="pandas.io.formats.style.Styler.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_excel()</span></code></a> 与 <code class="docutils literal notranslate"><span class="pre">xlsxwriter</span></code> 引擎的输出。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16149">GH 16149</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.tseries.frequencies.to_offset.html#pandas.tseries.frequencies.to_offset" title="pandas.tseries.frequencies.to_offset"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.tseries.frequencies.to_offset()</span></code></a> 现在接受前导的“+”号，例如“+1h”。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18171">GH 18171</a>）</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.unique()</span></code> 现在支持 <code class="docutils literal notranslate"><span class="pre">level=</span></code> 参数，以从特定索引级别获取唯一值（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17896">GH 17896</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.formats.style.Styler</span></code></a> 现在有一个 <code class="docutils literal notranslate"><span class="pre">hide_index()</span></code> 方法来确定索引是否在输出中渲染（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14194">GH 14194</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.formats.style.Styler</span></code></a> 现在有一个 <code class="docutils literal notranslate"><span class="pre">hide_columns()</span></code> 方法来确定列是否在输出中隐藏（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14194">GH 14194</a>）</p></li>
<li><p>改进了在 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中当 <code class="docutils literal notranslate"><span class="pre">unit=</span></code> 传入不可转换值时引发的 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 的措辞。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14350">GH 14350</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a> 现在接受 Series 或字典作为分类 dtype 的 <code class="docutils literal notranslate"><span class="pre">value</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17033">GH 17033</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_clipboard.html#pandas.read_clipboard" title="pandas.read_clipboard"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_clipboard()</span></code></a> 已更新为使用 qtpy，并回退到 PyQt5，然后是 PyQt4，增加了与 Python3 和多个 python-qt 绑定的兼容性。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17722">GH 17722</a>）</p></li>
<li><p>改进了在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中当 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 参数无法匹配所有列时引发的 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 的措辞。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17301">GH 17301</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.corrwith.html#pandas.DataFrame.corrwith" title="pandas.DataFrame.corrwith"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.corrwith()</span></code></a> 现在在传递 Series 时会默默地删除非数值列。在此之前会引发异常。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18570">GH 18570</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 现在支持时区感知 <code class="docutils literal notranslate"><span class="pre">Interval</span></code> 对象（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18537">GH 18537</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18538">GH 18538</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series()</span></code></a> / <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame()</span></code></a> 选项卡补全现在也会返回 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex()</span></code></a> 第一级中的标识符。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16326">GH 16326</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 增加了 <code class="docutils literal notranslate"><span class="pre">nrows</span></code> 参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16645">GH 16645</a>）</p></li>
<li><p>对于子类化的 <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code>，<code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.append()</span></code> 现在在更多情况下可以保留调用 dataframe 列的类型（例如，如果两者都是 <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code>）（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18359">GH 18359</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.to_json.html#pandas.Series.to_json" title="pandas.Series.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_json()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">index</span></code> 参数，允许用户从 JSON 输出中排除索引（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17394">GH 17394</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IntervalIndex.to_tuples()</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">na_tuple</span></code> 参数，用于控制 NA 是作为 NA 的元组返回，还是 NA 本身返回（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18756">GH 18756</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical.rename_categories</span></code>、<code class="docutils literal notranslate"><span class="pre">CategoricalIndex.rename_categories</span></code> 和 <a class="reference internal" href="../reference/api/pandas.Series.cat.rename_categories.html#pandas.Series.cat.rename_categories" title="pandas.Series.cat.rename_categories"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.cat.rename_categories</span></code></a> 现在可以接受可调用对象作为其参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18862">GH 18862</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 增加了 <code class="docutils literal notranslate"><span class="pre">length</span></code> 属性（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18789">GH 18789</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Resampler</span></code> 对象现在具有功能正常的 <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.pipe.html#pandas.core.resample.Resampler.pipe" title="pandas.core.resample.Resampler.pipe"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Resampler.pipe</span></code></a> 方法。以前，对 <code class="docutils literal notranslate"><span class="pre">pipe</span></code> 的调用会被重定向到 <code class="docutils literal notranslate"><span class="pre">mean</span></code> 方法。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17905">GH 17905</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.api.types.is_scalar.html#pandas.api.types.is_scalar" title="pandas.api.types.is_scalar"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_scalar()</span></code></a> 现在对 <code class="docutils literal notranslate"><span class="pre">DateOffset</span></code> 对象返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18943">GH 18943</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.pivot.html#pandas.DataFrame.pivot" title="pandas.DataFrame.pivot"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.pivot()</span></code></a> 现在接受一个列表作为 <code class="docutils literal notranslate"><span class="pre">values=</span></code> kwarg（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17160">GH 17160</a>）。</p></li>
<li><p>添加了 <a class="reference internal" href="../reference/api/pandas.api.extensions.register_dataframe_accessor.html#pandas.api.extensions.register_dataframe_accessor" title="pandas.api.extensions.register_dataframe_accessor"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.api.extensions.register_dataframe_accessor()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.api.extensions.register_series_accessor.html#pandas.api.extensions.register_series_accessor" title="pandas.api.extensions.register_series_accessor"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.api.extensions.register_series_accessor()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.api.extensions.register_index_accessor.html#pandas.api.extensions.register_index_accessor" title="pandas.api.extensions.register_index_accessor"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.api.extensions.register_index_accessor()</span></code></a>，这些访问器允许 pandas 下游库注册自定义访问器，如 pandas 对象上的 <code class="docutils literal notranslate"><span class="pre">.cat</span></code>。更多信息请参阅 <a class="reference internal" href="../development/extending.html#extending-register-accessors"><span class="std std-ref">注册自定义访问器</span></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14781">GH 14781</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IntervalIndex.astype</span></code> 现在在传入 <code class="docutils literal notranslate"><span class="pre">IntervalDtype</span></code> 时支持子类型之间的转换（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19197">GH 19197</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 及其相关的构造方法（<code class="docutils literal notranslate"><span class="pre">from_arrays</span></code>、<code class="docutils literal notranslate"><span class="pre">from_breaks</span></code>、<code class="docutils literal notranslate"><span class="pre">from_tuples</span></code>）增加了 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19262">GH 19262</a>）</p></li>
<li><p>添加了 <code class="xref py py-func docutils literal notranslate"><span class="pre">SeriesGroupBy.is_monotonic_increasing()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">SeriesGroupBy.is_monotonic_decreasing()</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17015">GH 17015</a>）</p></li>
<li><p>对于子类化的 <code class="docutils literal notranslate"><span class="pre">DataFrames</span></code>，<a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 在将数据传递给应用函数时，现在将保留 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 子类（如果已定义）（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19822">GH 19822</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.from_dict.html#pandas.DataFrame.from_dict" title="pandas.DataFrame.from_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.from_dict()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">columns</span></code> 参数，当使用 <code class="docutils literal notranslate"><span class="pre">orient='index'</span></code> 时，该参数可用于指定列名。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18529">GH 18529</a>）</p></li>
<li><p>添加了选项 <code class="docutils literal notranslate"><span class="pre">display.html.use_mathjax</span></code>，以便在 <code class="docutils literal notranslate"><span class="pre">Jupyter</span></code> 笔记本中渲染表格时可以禁用 <a class="reference external" href="https://www.mathjax.org/">MathJax</a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19856">GH 19856</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19824">GH 19824</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.replace.html#pandas.DataFrame.replace" title="pandas.DataFrame.replace"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">method</span></code> 参数，当 <code class="docutils literal notranslate"><span class="pre">to_replace</span></code> 是标量、列表或元组且 <code class="docutils literal notranslate"><span class="pre">value</span></code> 为 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时，该参数可用于指定替换方法。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19632">GH 19632</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.month_name.html#pandas.Timestamp.month_name" title="pandas.Timestamp.month_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.month_name()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.month_name.html#pandas.DatetimeIndex.month_name" title="pandas.DatetimeIndex.month_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.month_name()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.dt.month_name.html#pandas.Series.dt.month_name" title="pandas.Series.dt.month_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.dt.month_name()</span></code></a> 现已可用（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12805">GH 12805</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.day_name.html#pandas.Timestamp.day_name" title="pandas.Timestamp.day_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.day_name()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.day_name.html#pandas.DatetimeIndex.day_name" title="pandas.DatetimeIndex.day_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.day_name()</span></code></a> 现已可用，用于返回指定区域设置的日期名称（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12806">GH 12806</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code></a> 现在执行多值插入，如果底层连接支持，而不是逐行插入。<code class="docutils literal notranslate"><span class="pre">SQLAlchemy</span></code> 方言支持多值插入的包括：<code class="docutils literal notranslate"><span class="pre">mysql</span></code>、<code class="docutils literal notranslate"><span class="pre">postgresql</span></code>、<code class="docutils literal notranslate"><span class="pre">sqlite</span></code> 以及任何具有 <code class="docutils literal notranslate"><span class="pre">supports_multivalues_insert</span></code> 的方言。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14315">GH 14315</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8953">GH 8953</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">displayed_only</span></code> 关键字参数，用于控制是否解析隐藏元素（默认为 <code class="docutils literal notranslate"><span class="pre">True</span></code>）。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20027">GH 20027</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> 现在读取 <code class="docutils literal notranslate"><span class="pre">&lt;table&gt;</span></code> 中的所有 <code class="docutils literal notranslate"><span class="pre">&lt;tbody&gt;</span></code> 元素，而不仅仅是第一个。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20690">GH 20690</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.quantile.html#pandas.core.window.rolling.Rolling.quantile" title="pandas.core.window.rolling.Rolling.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.quantile()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.window.expanding.Expanding.quantile.html#pandas.core.window.expanding.Expanding.quantile" title="pandas.core.window.expanding.Expanding.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Expanding.quantile()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">interpolation</span></code> 关键字，默认为 <code class="docutils literal notranslate"><span class="pre">linear</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20497">GH 20497</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_pickle.html#pandas.DataFrame.to_pickle" title="pandas.DataFrame.to_pickle"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_pickle()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.to_pickle.html#pandas.Series.to_pickle" title="pandas.Series.to_pickle"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.to_pickle()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.to_csv.html#pandas.Series.to_csv" title="pandas.Series.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.to_csv()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.to_json.html#pandas.Series.to_json" title="pandas.Series.to_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.to_json()</span></code></a> 均支持通过 <code class="docutils literal notranslate"><span class="pre">compression=zip</span></code> 进行 zip 压缩。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17778">GH 17778</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.tseries.offsets.WeekOfMonth.html#pandas.tseries.offsets.WeekOfMonth" title="pandas.tseries.offsets.WeekOfMonth"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeekOfMonth</span></code></a> 构造函数现在支持 <code class="docutils literal notranslate"><span class="pre">n=0</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20517">GH 20517</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 现在支持 Python>=3.5 的矩阵乘法 (<code class="docutils literal notranslate"><span class="pre">@</span></code>) 运算符。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10259">GH 10259</a>）</p></li>
<li><p>更新了 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_gbq.html#pandas.DataFrame.to_gbq" title="pandas.DataFrame.to_gbq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_gbq()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_gbq.html#pandas.read_gbq" title="pandas.read_gbq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.read_gbq()</span></code></a> 的签名和文档，以反映 pandas-gbq 库 0.4.0 版本的变更。添加了到 pandas-gbq 库的 intersphinx 映射。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20564">GH 20564</a>）</p></li>
<li><p>添加了新写入器 <code class="docutils literal notranslate"><span class="pre">StataWriter117</span></code>，用于导出 117 版本的 Stata dta 文件。该格式支持导出长度最长达 2,000,000 个字符的字符串。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16450">GH 16450</a>）</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">to_hdf()</span></code> 和 <a class="reference internal" href="../reference/api/pandas.read_hdf.html#pandas.read_hdf" title="pandas.read_hdf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_hdf()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">errors</span></code> 关键字参数来控制编码错误处理（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20835">GH 20835</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a> 增加了 <code class="docutils literal notranslate"><span class="pre">duplicates='raise'|'drop'</span></code> 选项，用于控制是否在重复边界上引发错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20947">GH 20947</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.timedelta_range.html#pandas.timedelta_range" title="pandas.timedelta_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">timedelta_range()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.interval_range.html#pandas.interval_range" title="pandas.interval_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">interval_range()</span></code></a> 现在在指定了 <code class="docutils literal notranslate"><span class="pre">start</span></code>、<code class="docutils literal notranslate"><span class="pre">stop</span></code> 和 <code class="docutils literal notranslate"><span class="pre">periods</span></code> 但未指定 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 时，返回一个线性间隔的索引。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20808">GH 20808</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20983">GH 20983</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20976">GH 20976</a>）</p></li>
</ul>
</section>
</section>
<section id="backwards-incompatible-api-changes">
<span id="whatsnew-0230-api-breaking"></span><h2>向后不兼容的 API 变更<a class="headerlink" href="v0.23.0.html#backwards-incompatible-api-changes" title="Link to this heading">#</a></h2>
<section id="dependencies-have-increased-minimum-versions">
<span id="whatsnew-0230-api-breaking-deps"></span><h3>依赖项的最低版本要求已提高<a class="headerlink" href="v0.23.0.html#dependencies-have-increased-minimum-versions" title="Link to this heading">#</a></h3>
<p>我们已经更新了依赖项的最低支持版本（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15184">GH 15184</a>）。如果已安装，我们现在要求：</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>包</p></th>
<th class="head"><p>最低版本</p></th>
<th class="head"><p>要求</p></th>
<th class="head"><p>问题</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>python-dateutil</p></td>
<td><p>2.5.0</p></td>
<td><p>X</p></td>
<td><p><a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15184">GH 15184</a></p></td>
</tr>
<tr class="row-odd"><td><p>openpyxl</p></td>
<td><p>2.4.0</p></td>
<td></td>
<td><p><a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15184">GH 15184</a></p></td>
</tr>
<tr class="row-even"><td><p>beautifulsoup4</p></td>
<td><p>4.2.1</p></td>
<td></td>
<td><p><a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20082">GH 20082</a></p></td>
</tr>
<tr class="row-odd"><td><p>setuptools</p></td>
<td><p>24.2.0</p></td>
<td></td>
<td><p><a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20698">GH 20698</a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="instantiation-from-dicts-preserves-dict-insertion-order-for-python-3-6">
<span id="whatsnew-0230-api-breaking-dict-insertion-order"></span><h3>Python 3.6+ 中从字典实例化时保留字典插入顺序<a class="headerlink" href="v0.23.0.html#instantiation-from-dicts-preserves-dict-insertion-order-for-python-3-6" title="Link to this heading">#</a></h3>
<p>在 Python 3.6 之前，Python 中的字典没有正式定义的顺序。对于 Python 3.6 及更高版本，字典按插入顺序排序，请参阅 <a class="reference external" href="https://pythonlang.cn/dev/peps/pep-0468/">PEP 468</a>。当您从字典创建 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 或 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 并且使用 Python 3.6 或更高版本时，pandas 将使用字典的插入顺序。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19884">GH 19884</a>）</p>
<p>旧行为（以及 Python < 3.6 时的当前行为）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">({</span><span class="s1">'Income'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
<span class="gp">   ....: </span>           <span class="s1">'Expenses'</span><span class="p">:</span> <span class="o">-</span><span class="mi">1500</span><span class="p">,</span>
<span class="gp">   ....: </span>           <span class="s1">'Taxes'</span><span class="p">:</span> <span class="o">-</span><span class="mi">200</span><span class="p">,</span>
<span class="gp">   ....: </span>           <span class="s1">'Net result'</span><span class="p">:</span> <span class="mi">300</span><span class="p">})</span>
<span class="gh">Out[16]:</span>
<span class="go">Expenses     -1500</span>
<span class="go">Income        2000</span>
<span class="go">Net result     300</span>
<span class="go">Taxes         -200</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>请注意，上面的 Series 按索引值的字母顺序排列。</p>
<p>新行为（适用于 Python >= 3.6）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [72]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">({</span><span class="s1">'Income'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
<span class="gp">   ....: </span>           <span class="s1">'Expenses'</span><span class="p">:</span> <span class="o">-</span><span class="mi">1500</span><span class="p">,</span>
<span class="gp">   ....: </span>           <span class="s1">'Taxes'</span><span class="p">:</span> <span class="o">-</span><span class="mi">200</span><span class="p">,</span>
<span class="gp">   ....: </span>           <span class="s1">'Net result'</span><span class="p">:</span> <span class="mi">300</span><span class="p">})</span>
<span class="gp">   ....: </span>
<span class="gh">Out[72]: </span>
<span class="go">Income        2000</span>
<span class="go">Expenses     -1500</span>
<span class="go">Taxes         -200</span>
<span class="go">Net result     300</span>
<span class="go">Length: 4, dtype: int64</span>
</pre></div>
</div>
<p>请注意，Series 现在按插入顺序排序。此新行为适用于所有相关的 pandas 类型（<code class="docutils literal notranslate"><span class="pre">Series</span></code>、<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>、<code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> 和 <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code>）。</p>
<p>如果您希望在 Python >= 3.6 时保留旧行为，可以使用 <code class="docutils literal notranslate"><span class="pre">.sort_index()</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [73]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">({</span><span class="s1">'Income'</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
<span class="gp">   ....: </span>           <span class="s1">'Expenses'</span><span class="p">:</span> <span class="o">-</span><span class="mi">1500</span><span class="p">,</span>
<span class="gp">   ....: </span>           <span class="s1">'Taxes'</span><span class="p">:</span> <span class="o">-</span><span class="mi">200</span><span class="p">,</span>
<span class="gp">   ....: </span>           <span class="s1">'Net result'</span><span class="p">:</span> <span class="mi">300</span><span class="p">})</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="gp">   ....: </span>
<span class="gh">Out[73]: </span>
<span class="go">Expenses     -1500</span>
<span class="go">Income        2000</span>
<span class="go">Net result     300</span>
<span class="go">Taxes         -200</span>
<span class="go">Length: 4, dtype: int64</span>
</pre></div>
</div>
</section>
<section id="deprecate-panel">
<span id="whatsnew-0230-api-breaking-deprecate-panel"></span><h3>弃用 Panel<a class="headerlink" href="v0.23.0.html#deprecate-panel" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Panel</span></code> 在 0.20.x 版本中已被弃用，并显示为 <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code>。现在使用 <code class="docutils literal notranslate"><span class="pre">Panel</span></code> 将显示 <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code>。表示 3D 数据的推荐方式是使用 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 上的 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 通过 <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_frame()</span></code> 方法，或者使用 <a class="reference external" href="http://xarray.pydata.org/en/stable/">xarray 包</a>。pandas 提供了一个 <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_xarray()</span></code> 方法来自动化此转换（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13563">GH 13563</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18324">GH 18324</a>）。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [75]: </span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas._testing</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tm</span>

<span class="gp">In [76]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">tm</span><span class="o">.</span><span class="n">makePanel</span><span class="p">()</span>

<span class="gp">In [77]: </span><span class="n">p</span>
<span class="gh">Out[77]:</span>
<span class="go">&lt;class 'pandas.core.panel.Panel'&gt;</span>
<span class="go">Dimensions: 3 (items) x 3 (major_axis) x 4 (minor_axis)</span>
<span class="go">Items axis: ItemA to ItemC</span>
<span class="go">Major_axis axis: 2000-01-03 00:00:00 to 2000-01-05 00:00:00</span>
<span class="go">Minor_axis axis: A to D</span>
</pre></div>
</div>
<p>转换为 MultiIndex DataFrame</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [78]: </span><span class="n">p</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
<span class="gh">Out[78]:</span>
<span class="go">                     ItemA     ItemB     ItemC</span>
<span class="go">major      minor</span>
<span class="go">2000-01-03 A      0.469112  0.721555  0.404705</span>
<span class="go">           B     -1.135632  0.271860 -1.039268</span>
<span class="go">           C      0.119209  0.276232 -1.344312</span>
<span class="go">           D     -2.104569  0.113648 -0.109050</span>
<span class="go">2000-01-04 A     -0.282863 -0.706771  0.577046</span>
<span class="go">           B      1.212112 -0.424972 -0.370647</span>
<span class="go">           C     -1.044236 -1.087401  0.844885</span>
<span class="go">           D     -0.494929 -1.478427  1.643563</span>
<span class="go">2000-01-05 A     -1.509059 -1.039575 -1.715002</span>
<span class="go">           B     -0.173215  0.567020 -1.157892</span>
<span class="go">           C     -0.861849 -0.673690  1.075770</span>
<span class="go">           D      1.071804  0.524988 -1.469388</span>

<span class="go">[12 rows x 3 columns]</span>
</pre></div>
</div>
<p>转换为 xarray DataArray</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [79]: </span><span class="n">p</span><span class="o">.</span><span class="n">to_xarray</span><span class="p">()</span>
<span class="gh">Out[79]:</span>
<span class="go">&lt;xarray.DataArray (items: 3, major_axis: 3, minor_axis: 4)&gt;</span>
<span class="go">array([[[ 0.469112, -1.135632,  0.119209, -2.104569],</span>
<span class="go">        [-0.282863,  1.212112, -1.044236, -0.494929],</span>
<span class="go">        [-1.509059, -0.173215, -0.861849,  1.071804]],</span>

<span class="go">       [[ 0.721555,  0.27186 ,  0.276232,  0.113648],</span>
<span class="go">        [-0.706771, -0.424972, -1.087401, -1.478427],</span>
<span class="go">        [-1.039575,  0.56702 , -0.67369 ,  0.524988]],</span>

<span class="go">       [[ 0.404705, -1.039268, -1.344312, -0.10905 ],</span>
<span class="go">        [ 0.577046, -0.370647,  0.844885,  1.643563],</span>
<span class="go">        [-1.715002, -1.157892,  1.07577 , -1.469388]]])</span>
<span class="go">Coordinates:</span>
<span class="go">  * items       (items) object 'ItemA' 'ItemB' 'ItemC'</span>
<span class="go">  * major_axis  (major_axis) datetime64[ns] 2000-01-03 2000-01-04 2000-01-05</span>
<span class="go">  * minor_axis  (minor_axis) object 'A' 'B' 'C' 'D'</span>
</pre></div>
</div>
</section>
<section id="pandas-core-common-removals">
<span id="whatsnew-0230-api-breaking-core-common"></span><h3>移除 pandas.core.common 中的内容<a class="headerlink" href="v0.23.0.html#pandas-core-common-removals" title="Link to this heading">#</a></h3>
<p>以下错误和警告消息已从 <code class="docutils literal notranslate"><span class="pre">pandas.core.common</span></code> 中移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13634">GH 13634</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19769">GH 19769</a>）</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PerformanceWarning</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UnsupportedFunctionCall</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UnsortedIndexError</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AbstractMethodError</span></code></p></li>
</ul>
<p>这些可以从 <code class="docutils literal notranslate"><span class="pre">pandas.errors</span></code> 导入（自 0.19.0 起）。</p>
</section>
<section id="changes-to-make-output-of-dataframe-apply-consistent">
<span id="whatsnew-0230-api-breaking-apply"></span><h3>使 <code class="docutils literal notranslate"><span class="pre">DataFrame.apply</span></code> 输出一致的变更<a class="headerlink" href="v0.23.0.html#changes-to-make-output-of-dataframe-apply-consistent" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 在应用任意用户定义函数返回类列表对象时，当 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 时存在不一致。若干错误和不一致性已得到解决。如果应用函数返回 Series，则 pandas 将返回 DataFrame；否则将返回 Series，这包括返回类列表对象（例如 <code class="docutils literal notranslate"><span class="pre">tuple</span></code> 或 <code class="docutils literal notranslate"><span class="pre">list</span></code>）的情况。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16353">GH 16353</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17437">GH 17437</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17970">GH 17970</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17348">GH 17348</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17892">GH 17892</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18573">GH 18573</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17602">GH 17602</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18775">GH 18775</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18901">GH 18901</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18919">GH 18919</a>）。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [74]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">   ....: </span>                  <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">])</span>
<span class="gp">   ....: </span>

<span class="gp">In [75]: </span><span class="n">df</span>
<span class="gh">Out[75]: </span>
<span class="go">   A  B  C</span>
<span class="go">0  1  2  3</span>
<span class="go">1  1  2  3</span>
<span class="go">2  1  2  3</span>
<span class="go">3  1  2  3</span>
<span class="go">4  1  2  3</span>
<span class="go">5  1  2  3</span>

<span class="go">[6 rows x 3 columns]</span>
</pre></div>
</div>
<p>旧行为：如果返回的形状恰好与原始列的长度匹配，则会返回一个 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>。如果返回的形状不匹配，则会返回一个包含列表的 <code class="docutils literal notranslate"><span class="pre">Series</span></code>。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
   <span class="n">A</span>  <span class="n">B</span>  <span class="n">C</span>
<span class="mi">0</span>  <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>
<span class="mi">1</span>  <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>
<span class="mi">2</span>  <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>
<span class="mi">3</span>  <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>
<span class="mi">4</span>  <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>
<span class="mi">5</span>  <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">4</span><span class="p">]:</span>
<span class="mi">0</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="mi">1</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="mi">2</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="mi">3</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="mi">4</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="mi">5</span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>新行为：当应用函数返回一个类列表对象时，现在将<em>始终</em>返回一个 <code class="docutils literal notranslate"><span class="pre">Series</span></code>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [76]: </span><span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[76]: </span>
<span class="go">0    [1, 2, 3]</span>
<span class="go">1    [1, 2, 3]</span>
<span class="go">2    [1, 2, 3]</span>
<span class="go">3    [1, 2, 3]</span>
<span class="go">4    [1, 2, 3]</span>
<span class="go">5    [1, 2, 3]</span>
<span class="go">Length: 6, dtype: object</span>

<span class="gp">In [77]: </span><span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[77]: </span>
<span class="go">0    [1, 2]</span>
<span class="go">1    [1, 2]</span>
<span class="go">2    [1, 2]</span>
<span class="go">3    [1, 2]</span>
<span class="go">4    [1, 2]</span>
<span class="go">5    [1, 2]</span>
<span class="go">Length: 6, dtype: object</span>
</pre></div>
</div>
<p>要获得扩展列，您可以使用 <code class="docutils literal notranslate"><span class="pre">result_type='expand'</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [78]: </span><span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">result_type</span><span class="o">=</span><span class="s1">'expand'</span><span class="p">)</span>
<span class="gh">Out[78]: </span>
<span class="go">   0  1  2</span>
<span class="go">0  1  2  3</span>
<span class="go">1  1  2  3</span>
<span class="go">2  1  2  3</span>
<span class="go">3  1  2  3</span>
<span class="go">4  1  2  3</span>
<span class="go">5  1  2  3</span>

<span class="go">[6 rows x 3 columns]</span>
</pre></div>
</div>
<p>要将结果广播到原始列（对于正确长度的类列表对象的旧行为），您可以使用 <code class="docutils literal notranslate"><span class="pre">result_type='broadcast'</span></code>。形状必须与原始列匹配。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [79]: </span><span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">result_type</span><span class="o">=</span><span class="s1">'broadcast'</span><span class="p">)</span>
<span class="gh">Out[79]: </span>
<span class="go">   A  B  C</span>
<span class="go">0  1  2  3</span>
<span class="go">1  1  2  3</span>
<span class="go">2  1  2  3</span>
<span class="go">3  1  2  3</span>
<span class="go">4  1  2  3</span>
<span class="go">5  1  2  3</span>

<span class="go">[6 rows x 3 columns]</span>
</pre></div>
</div>
<p>返回 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 允许控制确切的返回结构和列名</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [80]: </span><span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'D'</span><span class="p">,</span> <span class="s1">'E'</span><span class="p">,</span> <span class="s1">'F'</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[80]: </span>
<span class="go">   D  E  F</span>
<span class="go">0  1  2  3</span>
<span class="go">1  1  2  3</span>
<span class="go">2  1  2  3</span>
<span class="go">3  1  2  3</span>
<span class="go">4  1  2  3</span>
<span class="go">5  1  2  3</span>

<span class="go">[6 rows x 3 columns]</span>
</pre></div>
</div>
</section>
<section id="concatenation-will-no-longer-sort">
<span id="whatsnew-0230-api-breaking-concat"></span><h3>连接操作将不再排序<a class="headerlink" href="v0.23.0.html#concatenation-will-no-longer-sort" title="Link to this heading">#</a></h3>
<p>在未来版本的 pandas 中，当非连接轴未对齐时，<a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.concat()</span></code></a> 将不再对其进行排序。当前行为与以前相同（排序），但现在当未指定 <code class="docutils literal notranslate"><span class="pre">sort</span></code> 且非连接轴未对齐时，会发出警告。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/4588">GH 4588</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [81]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"a"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">"b"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]},</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'b'</span><span class="p">,</span> <span class="s1">'a'</span><span class="p">])</span>

<span class="gp">In [82]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"a"</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]})</span>

<span class="gp">In [83]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">])</span>
<span class="gh">Out[83]: </span>
<span class="go">     b  a</span>
<span class="go">0  1.0  1</span>
<span class="go">1  2.0  2</span>
<span class="go">0  NaN  4</span>
<span class="go">1  NaN  5</span>

<span class="go">[4 rows x 2 columns]</span>
</pre></div>
</div>
<p>要保留旧行为（排序）并消除警告，请传入 <code class="docutils literal notranslate"><span class="pre">sort=True</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [84]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">],</span> <span class="n">sort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[84]: </span>
<span class="go">   a    b</span>
<span class="go">0  1  1.0</span>
<span class="go">1  2  2.0</span>
<span class="go">0  4  NaN</span>
<span class="go">1  5  NaN</span>

<span class="go">[4 rows x 2 columns]</span>
</pre></div>
</div>
<p>要接受未来行为（不排序），请传入 <code class="docutils literal notranslate"><span class="pre">sort=False</span></code></p>
<p>请注意，此更改也适用于 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.append()</span></code>，它也增加了用于控制此行为的 <code class="docutils literal notranslate"><span class="pre">sort</span></code> 关键字。</p>
</section>
<section id="build-changes">
<span id="whatsnew-0230-api-breaking-build-changes"></span><h3>构建变更<a class="headerlink" href="v0.23.0.html#build-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>现在，开发 pandas 需要 <code class="docutils literal notranslate"><span class="pre">cython</span> <span class="pre">&gt;=</span> <span class="pre">0.24</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18613">GH 18613</a>）</p></li>
<li><p>从源代码构建现在明确要求在 <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> 中使用 <code class="docutils literal notranslate"><span class="pre">setuptools</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18113">GH 18113</a>）</p></li>
<li><p>更新了 conda recipe 以符合 conda-build 3.0+ 的要求（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18002">GH 18002</a>）</p></li>
</ul>
</section>
<section id="index-division-by-zero-fills-correctly">
<span id="whatsnew-0230-api-breaking-index-division-by-zero"></span><h3>索引除以零的填充现在正确<a class="headerlink" href="v0.23.0.html#index-division-by-zero-fills-correctly" title="Link to this heading">#</a></h3>
<p>对 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 及其子类进行除法运算时，正数除以零将填充 <code class="docutils literal notranslate"><span class="pre">np.inf</span></code>，负数除以零将填充 <code class="docutils literal notranslate"><span class="pre">-np.inf</span></code>，<code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">/</span> <span class="pre">0</span></code> 将填充 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>。这与现有的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 行为一致。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19322">GH 19322</a>，<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19347">GH 19347</a>）</p>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Int64Index</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="gp">In [7]: </span><span class="n">index</span> <span class="o">/</span> <span class="mi">0</span>
<span class="gh">Out[7]: </span><span class="go">Int64Index([0, 0, 0], dtype='int64')</span>

<span class="go"># Previous behavior yielded different results depending on the type of zero in the divisor</span>
<span class="gp">In [8]: </span><span class="n">index</span> <span class="o">/</span> <span class="mf">0.0</span>
<span class="gh">Out[8]: </span><span class="go">Float64Index([-inf, nan, inf], dtype='float64')</span>

<span class="gp">In [9]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">UInt64Index</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="gp">In [10]: </span><span class="n">index</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint64</span><span class="p">)</span>
<span class="gh">Out[10]: </span><span class="go">UInt64Index([0, 0], dtype='uint64')</span>

<span class="gp">In [11]: </span><span class="n">pd</span><span class="o">.</span><span class="n">RangeIndex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">/</span> <span class="mi">0</span>
<span class="go">ZeroDivisionError: integer division or modulo by zero</span>
</pre></div>
</div>
<p>当前行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Int64Index</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="go"># division by zero gives -infinity where negative,</span>
<span class="go"># +infinity where positive, and NaN for 0 / 0</span>
<span class="gp">In [13]: </span><span class="n">index</span> <span class="o">/</span> <span class="mi">0</span>

<span class="go"># The result of division by zero should not depend on</span>
<span class="go"># whether the zero is int or float</span>
<span class="gp">In [14]: </span><span class="n">index</span> <span class="o">/</span> <span class="mf">0.0</span>

<span class="gp">In [15]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">UInt64Index</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">In [16]: </span><span class="n">index</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint64</span><span class="p">)</span>

<span class="gp">In [17]: </span><span class="n">pd</span><span class="o">.</span><span class="n">RangeIndex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">/</span> <span class="mi">0</span>
</pre></div>
</div>
</section>
<section id="extraction-of-matching-patterns-from-strings">
<span id="whatsnew-0230-api-breaking-extract"></span><h3>从字符串中提取匹配模式<a class="headerlink" href="v0.23.0.html#extraction-of-matching-patterns-from-strings" title="Link to this heading">#</a></h3>
<p>默认情况下，使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">str.extract()</span></code> 从字符串中提取匹配模式时，如果只提取一个组，则返回 <code class="docutils literal notranslate"><span class="pre">Series</span></code>（如果提取多个组，则返回 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>）。从 pandas 0.23.0 开始，除非 <code class="docutils literal notranslate"><span class="pre">expand</span></code> 设置为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，否则 <code class="xref py py-func docutils literal notranslate"><span class="pre">str.extract()</span></code> 始终返回 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>。最后，<code class="docutils literal notranslate"><span class="pre">None</span></code> 曾是 <code class="docutils literal notranslate"><span class="pre">expand</span></code> 参数的接受值（等同于 <code class="docutils literal notranslate"><span class="pre">False</span></code>），但现在会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11386">GH 11386</a>）</p>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'number 10'</span><span class="p">,</span> <span class="s1">'12 eggs'</span><span class="p">])</span>

<span class="gp">In [2]: </span><span class="n">extracted</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="sa">r</span><span class="s1">'.*(\d\d).*'</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">extracted</span>
<span class="go">Out [3]:</span>
<span class="go">0    10</span>
<span class="go">1    12</span>
<span class="go">dtype: object</span>

<span class="gp">In [4]: </span><span class="nb">type</span><span class="p">(</span><span class="n">extracted</span><span class="p">)</span>
<span class="go">Out [4]:</span>
<span class="go">pandas.core.series.Series</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [85]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'number 10'</span><span class="p">,</span> <span class="s1">'12 eggs'</span><span class="p">])</span>

<span class="gp">In [86]: </span><span class="n">extracted</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="sa">r</span><span class="s1">'.*(\d\d).*'</span><span class="p">)</span>

<span class="gp">In [87]: </span><span class="n">extracted</span>
<span class="gh">Out[87]: </span>
<span class="go">    0</span>
<span class="go">0  10</span>
<span class="go">1  12</span>

<span class="go">[2 rows x 1 columns]</span>

<span class="gp">In [88]: </span><span class="nb">type</span><span class="p">(</span><span class="n">extracted</span><span class="p">)</span>
<span class="gh">Out[88]: </span><span class="go">pandas.core.frame.DataFrame</span>
</pre></div>
</div>
<p>要恢复之前的行为，只需将 <code class="docutils literal notranslate"><span class="pre">expand</span></code> 设置为 <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [89]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'number 10'</span><span class="p">,</span> <span class="s1">'12 eggs'</span><span class="p">])</span>

<span class="gp">In [90]: </span><span class="n">extracted</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="sa">r</span><span class="s1">'.*(\d\d).*'</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="gp">In [91]: </span><span class="n">extracted</span>
<span class="gh">Out[91]: </span>
<span class="go">0    10</span>
<span class="go">1    12</span>
<span class="go">Length: 2, dtype: object</span>

<span class="gp">In [92]: </span><span class="nb">type</span><span class="p">(</span><span class="n">extracted</span><span class="p">)</span>
<span class="gh">Out[92]: </span><span class="go">pandas.core.series.Series</span>
</pre></div>
</div>
</section>
<section id="default-value-for-the-ordered-parameter-of-categoricaldtype">
<span id="whatsnew-0230-api-breaking-cdt-ordered"></span><h3><code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> 的 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 参数的默认值<a class="headerlink" href="v0.23.0.html#default-value-for-the-ordered-parameter-of-categoricaldtype" title="Link to this heading">#</a></h3>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> 的 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 参数的默认值已从 <code class="docutils literal notranslate"><span class="pre">False</span></code> 更改为 <code class="docutils literal notranslate"><span class="pre">None</span></code>，以允许更新 <code class="docutils literal notranslate"><span class="pre">categories</span></code> 而不影响 <code class="docutils literal notranslate"><span class="pre">ordered</span></code>。下游对象（如 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a>）的行为应保持一致。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18790">GH 18790</a>）</p>
<p>在以前的版本中，<code class="docutils literal notranslate"><span class="pre">ordered</span></code> 参数的默认值为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。这可能导致当用户尝试更新 <code class="docutils literal notranslate"><span class="pre">categories</span></code> 且未明确指定 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 时，<code class="docutils literal notranslate"><span class="pre">ordered</span></code> 参数意外地从 <code class="docutils literal notranslate"><span class="pre">True</span></code> 更改为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，因为它会默默地默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。<code class="docutils literal notranslate"><span class="pre">ordered=None</span></code> 的新行为是保留 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 的现有值。</p>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="kn">from</span><span class="w"> </span><span class="nn">pandas.api.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">CategoricalDtype</span>

<span class="gp">In [3]: </span><span class="n">cat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">'abcaba'</span><span class="p">),</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">categories</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">'cba'</span><span class="p">))</span>

<span class="gp">In [4]: </span><span class="n">cat</span>
<span class="gh">Out[4]:</span>
<span class="go">[a, b, c, a, b, a]</span>
<span class="go">Categories (3, object): [c &lt; b &lt; a]</span>

<span class="gp">In [5]: </span><span class="n">cdt</span> <span class="o">=</span> <span class="n">CategoricalDtype</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">'cbad'</span><span class="p">))</span>

<span class="gp">In [6]: </span><span class="n">cat</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">cdt</span><span class="p">)</span>
<span class="gh">Out[6]:</span>
<span class="go">[a, b, c, a, b, a]</span>
<span class="go">Categories (4, object): [c &lt; b &lt; a &lt; d]</span>
</pre></div>
</div>
<p>注意在上面的示例中，转换后的 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 保留了 <code class="docutils literal notranslate"><span class="pre">ordered=True</span></code>。如果 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 的默认值仍为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，那么转换后的 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 将变为无序的，尽管从未明确指定 <code class="docutils literal notranslate"><span class="pre">ordered=False</span></code>。要更改 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 的值，请将其明确传递给新的 dtype，例如 <code class="docutils literal notranslate"><span class="pre">CategoricalDtype(categories=list('cbad'),</span> <span class="pre">ordered=False)</span></code>。</p>
<p>请注意，上面讨论的 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 的意外转换在以前的版本中并未出现，因为存在单独的错误，阻止了 <code class="docutils literal notranslate"><span class="pre">astype</span></code> 进行任何类型的类别到类别转换（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10696">GH 10696</a>，<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18593">GH 18593</a>）。这些错误已在此版本中修复，并促使更改 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 的默认值。</p>
</section>
<section id="better-pretty-printing-of-dataframes-in-a-terminal">
<span id="whatsnew-0230-api-breaking-pretty-printing"></span><h3>在终端中更好地美化打印 DataFrame<a class="headerlink" href="v0.23.0.html#better-pretty-printing-of-dataframes-in-a-terminal" title="Link to this heading">#</a></h3>
<p>以前，最大列数的默认值为 <code class="docutils literal notranslate"><span class="pre">pd.options.display.max_columns=20</span></code>。这意味着相对较宽的 DataFrame 无法在终端宽度内完全显示，并且 pandas 会引入换行符来显示这20列。这导致输出相对难以阅读</p>
<img alt="../_images/print_df_old.png" src="../_images/print_df_old.png">
<p>如果 Python 在终端中运行，最大列数现在会自动确定，以便打印的 DataFrame 适合当前终端宽度（<code class="docutils literal notranslate"><span class="pre">pd.options.display.max_columns=0</span></code>）（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17023">GH 17023</a>）。如果 Python 作为 Jupyter 内核运行（例如 Jupyter QtConsole 或 Jupyter notebook，以及许多 IDE 中），则无法自动推断此值，因此会像以前的版本一样设置为 <code class="docutils literal notranslate"><span class="pre">20</span></code>。在终端中，这会产生更好的输出</p>
<img alt="../_images/print_df_new.png" src="../_images/print_df_new.png">
<p>请注意，如果您不喜欢新的默认设置，您始终可以自行设置此选项。要恢复旧设置，您可以运行此行</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_columns</span> <span class="o">=</span> <span class="mi">20</span>
</pre></div>
</div>
</section>
<section id="datetimelike-api-changes">
<span id="whatsnew-0230-api-datetimelike"></span><h3>日期时间类 API 更改<a class="headerlink" href="v0.23.0.html#datetimelike-api-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>默认的 <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> 构造函数现在接受 <code class="docutils literal notranslate"><span class="pre">ISO</span> <span class="pre">8601</span> <span class="pre">Duration</span></code> 字符串作为参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19040">GH 19040</a>）</p></li>
<li><p>从 <code class="docutils literal notranslate"><span class="pre">dtype='datetime64[ns]'</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中减去 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 将返回 <code class="docutils literal notranslate"><span class="pre">dtype='timedelta64[ns]'</span></code> 的 <code class="docutils literal notranslate"><span class="pre">Series</span></code>，而不是 <code class="docutils literal notranslate"><span class="pre">dtype='datetime64[ns]'</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18808">GH 18808</a>）</p></li>
<li><p>从 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 中添加或减去 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 将返回 <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code>，而不是 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19124">GH 19124</a>）</p></li>
<li><p>当索引对象频率为 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时，<code class="xref py py-func docutils literal notranslate"><span class="pre">DatetimeIndex.shift()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">TimedeltaIndex.shift()</span></code> 现在将引发 <code class="docutils literal notranslate"><span class="pre">NullFrequencyError</span></code>（它是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 的子类，旧版本中会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>）（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19147">GH 19147</a>）</p></li>
<li><p>从 <code class="docutils literal notranslate"><span class="pre">dtype='timedelta64[ns]'</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中添加和减去 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>，而不是将 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 视为 <code class="docutils literal notranslate"><span class="pre">NaT</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19274">GH 19274</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NaT</span></code> 与 <a class="reference external" href="https://docs.pythonlang.cn/3/library/datetime.html#datetime.timedelta" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.timedelta</span></code></a> 进行除法运算现在将返回 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 而不是引发错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17876">GH 17876</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dtype='datetime64[ns]'</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 与 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 之间的操作将正确引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18850">GH 18850</a>）</p></li>
<li><p>时区不匹配的时区感知 <code class="docutils literal notranslate"><span class="pre">dtype='datetime64[ns]'</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的减法将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18817">GH 18817</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 将不再默默忽略未使用或无效的 <code class="docutils literal notranslate"><span class="pre">tz</span></code> 或 <code class="docutils literal notranslate"><span class="pre">tzinfo</span></code> 关键字参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17690">GH 17690</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 将不再默默忽略无效的 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/5168">GH 5168</a>）</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CacheableOffset</span></code> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">WeekDay</span></code> 不再在 <code class="docutils literal notranslate"><span class="pre">pandas.tseries.offsets</span></code> 模块中可用（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17830">GH 17830</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.tseries.frequencies.get_freq_group()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pandas.tseries.frequencies.DAYS</span></code> 已从公共 API 中移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18034">GH 18034</a>）</p></li>
<li><p>如果索引未排序，<a class="reference internal" href="../reference/api/pandas.Series.truncate.html#pandas.Series.truncate" title="pandas.Series.truncate"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.truncate()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.truncate.html#pandas.DataFrame.truncate" title="pandas.DataFrame.truncate"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.truncate()</span></code></a> 将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>，而不是无用的 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17935">GH 17935</a>）</p></li>
<li><p>当索引不是 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 时，<a class="reference internal" href="../reference/api/pandas.Series.first.html#pandas.Series.first" title="pandas.Series.first"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.first</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.first.html#pandas.DataFrame.first" title="pandas.DataFrame.first"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFrame.first</span></code></a> 现在将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20725">GH 20725</a>）。</p></li>
<li><p>当索引不是 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 时，<a class="reference internal" href="../reference/api/pandas.Series.last.html#pandas.Series.last" title="pandas.Series.last"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.last</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.last.html#pandas.DataFrame.last" title="pandas.DataFrame.last"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFrame.last</span></code></a> 现在将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20725">GH 20725</a>）。</p></li>
<li><p>限制了 <code class="docutils literal notranslate"><span class="pre">DateOffset</span></code> 关键字参数。以前，<code class="docutils literal notranslate"><span class="pre">DateOffset</span></code> 子类允许任意关键字参数，这可能导致意外行为。现在，只接受有效参数。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17176">GH 17176</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18226">GH 18226</a>）。</p></li>
<li><p>当尝试合并时区感知和时区非感知列时，<a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.merge()</span></code></a> 会提供更具信息量的错误消息（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15800">GH 15800</a>）</p></li>
<li><p>对于 <code class="docutils literal notranslate"><span class="pre">freq=None</span></code> 的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a>，整数类型数组或 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 的加法或减法将引发 <code class="docutils literal notranslate"><span class="pre">NullFrequencyError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19895">GH 19895</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 构造函数现在接受 <code class="docutils literal notranslate"><span class="pre">nanosecond</span></code> 关键字或位置参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18898">GH 18898</a>）</p></li>
<li><p>在实例化后设置 <code class="docutils literal notranslate"><span class="pre">tz</span></code> 属性时，<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 现在将引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/3746">GH 3746</a>）</p></li>
<li><p>带有 <code class="docutils literal notranslate"><span class="pre">pytz</span></code> 时区的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 现在将返回一致的 <code class="docutils literal notranslate"><span class="pre">pytz</span></code> 时区（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18595">GH 18595</a>）</p></li>
</ul>
</section>
<section id="other-api-changes">
<span id="whatsnew-0230-api-other"></span><h3>其他 API 更改<a class="headerlink" href="v0.23.0.html#other-api-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>使用不兼容 dtype 的 <a class="reference internal" href="../reference/api/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.astype()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.astype.html#pandas.Index.astype" title="pandas.Index.astype"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.astype()</span></code></a> 现在将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18231">GH 18231</a>）</p></li>
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">object</span></code> 类型且时区感知的 datetime 和指定 <code class="docutils literal notranslate"><span class="pre">dtype=object</span></code> 构建 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 时，现在将返回 <code class="docutils literal notranslate"><span class="pre">object</span></code> 类型的 <code class="docutils literal notranslate"><span class="pre">Series</span></code>，以前会推断为 datetime 类型（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18231">GH 18231</a>）</p></li>
<li><p>从空 <code class="docutils literal notranslate"><span class="pre">dict</span></code> 构建的 <code class="docutils literal notranslate"><span class="pre">dtype=category</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>，其类别现在将是 <code class="docutils literal notranslate"><span class="pre">dtype=object</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">dtype=float64</span></code>，这与传递空列表的情况一致（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18515">GH 18515</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 中所有为 NaN 的级别现在被指定为 <code class="docutils literal notranslate"><span class="pre">float</span></code> 类型而不是 <code class="docutils literal notranslate"><span class="pre">object</span></code> 类型，以提高与 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 的一致性（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17929">GH 17929</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 的级别名称（当不为 None 时）现在必须是唯一的：尝试使用重复名称创建 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18872">GH 18872</a>）</p></li>
<li><p>使用不可哈希的 <code class="docutils literal notranslate"><span class="pre">name</span></code>/<code class="docutils literal notranslate"><span class="pre">names</span></code> 构建和重命名 <code class="docutils literal notranslate"><span class="pre">Index</span></code>/<code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 现在都将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20527">GH 20527</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.map.html#pandas.Index.map" title="pandas.Index.map"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.map()</span></code></a> 现在可以接受 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 和字典输入对象（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12756">GH 12756</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18482">GH 18482</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18509">GH 18509</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.unstack()</span></code></a> 现在将默认为 <code class="docutils literal notranslate"><span class="pre">object</span></code> 列填充 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12815">GH 12815</a>）</p></li>
<li><p>如果 <code class="docutils literal notranslate"><span class="pre">closed</span></code> 参数与输入数据推断的闭合方式冲突，<a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 构造函数将引发错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18421">GH 18421</a>）</p></li>
<li><p>将缺失值插入到索引中将适用于所有类型的索引，并自动插入正确类型的缺失值（<code class="docutils literal notranslate"><span class="pre">NaN</span></code>、<code class="docutils literal notranslate"><span class="pre">NaT</span></code> 等），无论传入的类型是什么（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18295">GH 18295</a>）</p></li>
<li><p>当使用重复标签创建时，<code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 现在会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17464">GH 17464</a>）</p></li>
<li><p>当将列表、元组或 DataFrame 作为 <code class="docutils literal notranslate"><span class="pre">value</span></code> 传入时，<a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a> 现在会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18293">GH 18293</a>）</p></li>
<li><p>当在 <code class="docutils literal notranslate"><span class="pre">int</span></code> 和 <code class="docutils literal notranslate"><span class="pre">float</span></code> 列上合并时，<a class="reference internal" href="../reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge" title="pandas.DataFrame.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.DataFrame.merge()</span></code></a> 不再将 <code class="docutils literal notranslate"><span class="pre">float</span></code> 列转换为 <code class="docutils literal notranslate"><span class="pre">object</span></code> 类型（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16572">GH 16572</a>）</p></li>
<li><p>当尝试合并不兼容的数据类型时，<a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.merge()</span></code></a> 现在会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9780">GH 9780</a>）</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">UInt64Index</span></code> 的默认 NA 值已从 0 更改为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code>，这会影响使用 NA 进行掩码的方法，例如 <code class="docutils literal notranslate"><span class="pre">UInt64Index.where()</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18398">GH 18398</a>）</p></li>
<li><p>重构了 <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>，使用 <code class="docutils literal notranslate"><span class="pre">find_packages</span></code> 而不是显式列出所有子包（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18535">GH 18535</a>）</p></li>
<li><p>重新排列了 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中的关键字参数顺序，使其与 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 对齐（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16672">GH 16672</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.wide_to_long.html#pandas.wide_to_long" title="pandas.wide_to_long"><code class="xref py py-func docutils literal notranslate"><span class="pre">wide_to_long()</span></code></a> 以前将类似数字的后缀保留为 <code class="docutils literal notranslate"><span class="pre">object</span></code> 类型。现在，如果可能，它们会被转换为数字类型（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17627">GH 17627</a>）</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中，<code class="docutils literal notranslate"><span class="pre">comment</span></code> 参数现在作为命名参数公开（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18735">GH 18735</a>）</p></li>
<li><p>重新排列了 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中的关键字参数顺序，使其与 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 对齐（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16672">GH 16672</a>）</p></li>
<li><p>选项 <code class="docutils literal notranslate"><span class="pre">html.border</span></code> 和 <code class="docutils literal notranslate"><span class="pre">mode.use_inf_as_null</span></code> 在之前的版本中已弃用，现在它们将显示 <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19003">GH 19003</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 和 <code class="docutils literal notranslate"><span class="pre">IntervalDtype</span></code> 不再支持 categorical、object 和 string 子类型（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19016">GH 19016</a>）</p></li>
<li><p>无论子类型如何，<code class="docutils literal notranslate"><span class="pre">IntervalDtype</span></code> 现在与 <code class="docutils literal notranslate"><span class="pre">'interval'</span></code> 比较时都返回 <code class="docutils literal notranslate"><span class="pre">True</span></code>，并且 <code class="docutils literal notranslate"><span class="pre">IntervalDtype.name</span></code> 现在无论子类型如何都返回 <code class="docutils literal notranslate"><span class="pre">'interval'</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18980">GH 18980</a>）</p></li>
<li><p>当删除具有重复项的轴中不存在的元素时，<a class="reference internal" href="../reference/api/pandas.DataFrame.drop.html#pandas.DataFrame.drop" title="pandas.DataFrame.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">drop()</span></code></a>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">drop()</span></code>, <a class="reference internal" href="../reference/api/pandas.Series.drop.html#pandas.Series.drop" title="pandas.Series.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">drop()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Index.drop.html#pandas.Index.drop" title="pandas.Index.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">drop()</span></code></a> 现在会引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19186">GH 19186</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.to_csv.html#pandas.Series.to_csv" title="pandas.Series.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.to_csv()</span></code></a> 现在接受一个 <code class="docutils literal notranslate"><span class="pre">compression</span></code> 参数，其工作方式与 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">compression</span></code> 参数相同（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18958">GH 18958</a>）</p></li>
<li><p>对具有不兼容索引类型的 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 执行集合操作（union、difference 等）现在将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19329">GH 19329</a>）</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 对象的渲染更简单，例如 <code class="docutils literal notranslate"><span class="pre">&lt;DateOffset:</span> <span class="pre">days=1&gt;</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">&lt;DateOffset:</span> <span class="pre">kwds={'days':</span> <span class="pre">1}&gt;</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19403">GH 19403</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical.fillna</span></code> 现在会验证其 <code class="docutils literal notranslate"><span class="pre">value</span></code> 和 <code class="docutils literal notranslate"><span class="pre">method</span></code> 关键字参数。当同时指定或均未指定时，它会引发错误，这与 <a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a> 的行为一致（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19682">GH 19682</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.to_datetime('today')</span></code> 现在返回一个 datetime 对象，与 <code class="docutils literal notranslate"><span class="pre">pd.Timestamp('today')</span></code> 一致；以前 <code class="docutils literal notranslate"><span class="pre">pd.to_datetime('today')</span></code> 返回一个 <code class="docutils literal notranslate"><span class="pre">.normalized()</span></code> datetime（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19935">GH 19935</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.replace.html#pandas.Series.str.replace" title="pandas.Series.str.replace"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.str.replace()</span></code></a> 现在接受一个可选的 <code class="docutils literal notranslate"><span class="pre">regex</span></code> 关键字，当设置为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 时，使用字面字符串替换而不是正则表达式替换（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16808">GH 16808</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.strftime.html#pandas.DatetimeIndex.strftime" title="pandas.DatetimeIndex.strftime"><code class="xref py py-func docutils literal notranslate"><span class="pre">DatetimeIndex.strftime()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.strftime.html#pandas.PeriodIndex.strftime" title="pandas.PeriodIndex.strftime"><code class="xref py py-func docutils literal notranslate"><span class="pre">PeriodIndex.strftime()</span></code></a> 现在返回 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 而不是 numpy 数组，以与类似的访问器保持一致（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20127">GH 20127</a>）</p></li>
<li><p>当指定更长的索引时，从长度为1的列表构建 Series 不再广播此列表（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19714">GH 19714</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20391">GH 20391</a>）。</p></li>
<li><p>对于仅包含 int 和 float 列的 DataFrame，使用 <code class="docutils literal notranslate"><span class="pre">orient='index'</span></code> 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict" title="pandas.DataFrame.to_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_dict()</span></code></a> 不再将 int 列转换为 float 类型（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18580">GH 18580</a>）</p></li>
<li><p>传递给 <code class="xref py py-func docutils literal notranslate"><span class="pre">Series.rolling().aggregate()</span></code>、<code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.rolling().aggregate()</span></code> 或其 expanding 对应函数的用户定义函数，现在将<em>总是</em>被传递一个 <code class="docutils literal notranslate"><span class="pre">Series</span></code>，而不是 <code class="docutils literal notranslate"><span class="pre">np.array</span></code>；<code class="docutils literal notranslate"><span class="pre">.apply()</span></code> 只拥有 <code class="docutils literal notranslate"><span class="pre">raw</span></code> 关键字，详见<a class="reference internal" href="v0.23.0.html#whatsnew-0230-enhancements-window-raw"><span class="std std-ref">此处</span></a>。这与 pandas 中 <code class="docutils literal notranslate"><span class="pre">.aggregate()</span></code> 的签名一致（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20584">GH 20584</a>）</p></li>
<li><p>Rolling 和 Expanding 类型在迭代时会引发 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11704">GH 11704</a>）。</p></li>
</ul>
</section>
</section>
<section id="deprecations">
<span id="whatsnew-0230-deprecations"></span><h2>弃用项<a class="headerlink" href="v0.23.0.html#deprecations" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Series.from_array</span></code> 和 <code class="docutils literal notranslate"><span class="pre">SparseSeries.from_array</span></code> 已弃用。请改用常规构造函数 <code class="docutils literal notranslate"><span class="pre">Series(..)</span></code> 和 <code class="docutils literal notranslate"><span class="pre">SparseSeries(..)</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18213">GH 18213</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.as_matrix</span></code> 已弃用。请改用 <code class="docutils literal notranslate"><span class="pre">DataFrame.values</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18458">GH 18458</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.asobject</span></code>、<code class="docutils literal notranslate"><span class="pre">DatetimeIndex.asobject</span></code>、<code class="docutils literal notranslate"><span class="pre">PeriodIndex.asobject</span></code> 和 <code class="docutils literal notranslate"><span class="pre">TimeDeltaIndex.asobject</span></code> 已弃用。请改用 <code class="docutils literal notranslate"><span class="pre">.astype(object)</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18572">GH 18572</a>）</p></li>
<li><p>现在，按键元组进行分组会发出 <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code> 并已弃用。将来，传递给 <code class="docutils literal notranslate"><span class="pre">'by'</span></code> 的元组将始终引用实际的元组作为单个键，而不是将元组视为多个键。要保留以前的行为，请使用列表而不是元组（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18314">GH 18314</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.valid</span></code> 已弃用。请改用 <a class="reference internal" href="../reference/api/pandas.Series.dropna.html#pandas.Series.dropna" title="pandas.Series.dropna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.dropna()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18800">GH 18800</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 已弃用 <code class="docutils literal notranslate"><span class="pre">skip_footer</span></code> 参数。请改用 <code class="docutils literal notranslate"><span class="pre">skipfooter</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18836">GH 18836</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.ExcelFile.parse.html#pandas.ExcelFile.parse" title="pandas.ExcelFile.parse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExcelFile.parse()</span></code></a> 已弃用 <code class="docutils literal notranslate"><span class="pre">sheetname</span></code>，推荐使用 <code class="docutils literal notranslate"><span class="pre">sheet_name</span></code> 以与 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 保持一致（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20920">GH 20920</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_copy</span></code> 属性已弃用，并将在未来版本中移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18801">GH 18801</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IntervalIndex.from_intervals</span></code> 已弃用，推荐使用 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 构造函数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19263">GH 19263</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.from_items</span></code> 已弃用。请改用 <a class="reference internal" href="../reference/api/pandas.DataFrame.from_dict.html#pandas.DataFrame.from_dict" title="pandas.DataFrame.from_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.from_dict()</span></code></a>，如果您希望保留键的顺序，则使用 <code class="docutils literal notranslate"><span class="pre">DataFrame.from_dict(OrderedDict())</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17320">GH 17320</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17312">GH 17312</a>）</p></li>
<li><p>使用包含某些缺失键的列表索引 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 或 <code class="xref py py-class docutils literal notranslate"><span class="pre">FloatIndex</span></code> 现在将显示 <a class="reference external" href="https://docs.pythonlang.cn/3/library/exceptions.html#FutureWarning" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">FutureWarning</span></code></a>，这与其他类型的索引一致（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17758">GH 17758</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.apply()</span></code> 的 <code class="docutils literal notranslate"><span class="pre">broadcast</span></code> 参数已弃用，推荐使用 <code class="docutils literal notranslate"><span class="pre">result_type='broadcast'</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18577">GH 18577</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.apply()</span></code> 的 <code class="docutils literal notranslate"><span class="pre">reduce</span></code> 参数已弃用，推荐使用 <code class="docutils literal notranslate"><span class="pre">result_type='reduce'</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18577">GH 18577</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">order</span></code> 参数已弃用，并将在未来版本中移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19727">GH 19727</a>）</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Timestamp.weekday_name</span></code>、<code class="xref py py-attr docutils literal notranslate"><span class="pre">DatetimeIndex.weekday_name</span></code> 和 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.weekday_name</span></code> 已弃用，推荐使用 <a class="reference internal" href="../reference/api/pandas.Timestamp.day_name.html#pandas.Timestamp.day_name" title="pandas.Timestamp.day_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.day_name()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.day_name.html#pandas.DatetimeIndex.day_name" title="pandas.DatetimeIndex.day_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.day_name()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.dt.day_name.html#pandas.Series.dt.day_name" title="pandas.Series.dt.day_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.dt.day_name()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12806">GH 12806</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.tseries.plotting.tsplot</span></code> 已弃用。请改用 <a class="reference internal" href="../reference/api/pandas.Series.plot.html#pandas.Series.plot" title="pandas.Series.plot"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.plot()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18627">GH 18627</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Index.summary()</span></code> 已弃用，并将在未来版本中移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18217">GH 18217</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NDFrame.get_ftype_counts()</span></code> 已弃用，并将在未来版本中移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18243">GH 18243</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_records.html#pandas.DataFrame.to_records" title="pandas.DataFrame.to_records"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_records()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">convert_datetime64</span></code> 参数已弃用，并将在未来版本中移除。导致此参数的 NumPy 错误已解决。此参数的默认值也已从 <code class="docutils literal notranslate"><span class="pre">True</span></code> 更改为 <code class="docutils literal notranslate"><span class="pre">None</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18160">GH 18160</a>）。</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.rolling().apply()</span></code>、<code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.rolling().apply()</span></code>、<code class="xref py py-func docutils literal notranslate"><span class="pre">Series.expanding().apply()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.expanding().apply()</span></code> 已弃用默认传递 <code class="docutils literal notranslate"><span class="pre">np.array</span></code>。现在需要传递新的 <code class="docutils literal notranslate"><span class="pre">raw</span></code> 参数来明确指定传递的内容（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20584">GH 20584</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 类的 <code class="docutils literal notranslate"><span class="pre">data</span></code>、<code class="docutils literal notranslate"><span class="pre">base</span></code>、<code class="docutils literal notranslate"><span class="pre">strides</span></code>、<code class="docutils literal notranslate"><span class="pre">flags</span></code> 和 <code class="docutils literal notranslate"><span class="pre">itemsize</span></code> 属性已弃用，并将在未来版本中移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20419">GH 20419</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatetimeIndex.offset</span></code> 已弃用。请改用 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex.freq</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20716">GH 20716</a>）</p></li>
<li><p>整数 ndarray 与 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 之间的整除已弃用。请改用 <a class="reference internal" href="../reference/api/pandas.Timedelta.value.html#pandas.Timedelta.value" title="pandas.Timedelta.value"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Timedelta.value</span></code></a> 进行除法运算（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19761">GH 19761</a>）</p></li>
<li><p>设置 <code class="docutils literal notranslate"><span class="pre">PeriodIndex.freq</span></code>（以前不保证能正确工作）已弃用。请改用 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.asfreq.html#pandas.PeriodIndex.asfreq" title="pandas.PeriodIndex.asfreq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.asfreq()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20678">GH 20678</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Index.get_duplicates()</span></code> 已弃用，并将在未来版本中移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20239">GH 20239</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical.take</span></code> 中负数索引的先前默认行为已弃用。在未来版本中，它将从表示缺失值更改为表示从右侧开始的位置索引。未来的行为与 <a class="reference internal" href="../reference/api/pandas.Series.take.html#pandas.Series.take" title="pandas.Series.take"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.take()</span></code></a> 一致（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20664">GH 20664</a>）。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.dropna.html#pandas.DataFrame.dropna" title="pandas.DataFrame.dropna"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.dropna()</span></code></a> 中将多个轴传递给 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 参数已弃用，并将在未来版本中移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20987">GH 20987</a>）</p></li>
</ul>
</section>
<section id="removal-of-prior-version-deprecations-changes">
<span id="whatsnew-0230-prior-deprecations"></span><h2>移除以前版本的弃用/更改<a class="headerlink" href="v0.23.0.html#removal-of-prior-version-deprecations-changes" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>针对已废弃的用法 <code class="docutils literal notranslate"><span class="pre">Categorical(codes,</span> <span class="pre">categories)</span></code> 的警告（例如当 <code class="docutils literal notranslate"><span class="pre">Categorical()</span></code> 的前两个参数具有不同 dtype 时发出，并推荐使用 <code class="docutils literal notranslate"><span class="pre">Categorical.from_codes</span></code>）现已移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8074">GH 8074</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 的 <code class="docutils literal notranslate"><span class="pre">levels</span></code> 和 <code class="docutils literal notranslate"><span class="pre">labels</span></code> 属性不再能直接设置（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/4039">GH 4039</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.tseries.util.pivot_annual</span></code> 已移除（自 v0.19 起弃用）。请改用 <code class="docutils literal notranslate"><span class="pre">pivot_table</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18370">GH 18370</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.tseries.util.isleapyear</span></code> 已移除（自 v0.19 起弃用）。请改用 Datetime-likes 中的 <code class="docutils literal notranslate"><span class="pre">.is_leap_year</span></code> 属性（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18370">GH 18370</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.ordered_merge</span></code> 已移除（自 v0.19 起弃用）。请改用 <code class="docutils literal notranslate"><span class="pre">pd.merge_ordered</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18459">GH 18459</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseList</span></code> 类已移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14007">GH 14007</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.io.wb</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pandas.io.data</span></code> 存根模块已移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13735">GH 13735</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical.from_array</span></code> 已移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13854">GH 13854</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">freq</span></code> 和 <code class="docutils literal notranslate"><span class="pre">how</span></code> 参数已从 DataFrame 和 Series 的 <code class="docutils literal notranslate"><span class="pre">rolling</span></code>/<code class="docutils literal notranslate"><span class="pre">expanding</span></code>/<code class="docutils literal notranslate"><span class="pre">ewm</span></code> 方法中移除（自 v0.18 起弃用）。请改在调用方法之前进行重采样。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18601">GH 18601</a> &amp; <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18668">GH 18668</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatetimeIndex.to_datetime</span></code>、<code class="docutils literal notranslate"><span class="pre">Timestamp.to_datetime</span></code>、<code class="docutils literal notranslate"><span class="pre">PeriodIndex.to_datetime</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Index.to_datetime</span></code> 已移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8254">GH 8254</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14096">GH 14096</a>、<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14113">GH 14113</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 已移除 <code class="docutils literal notranslate"><span class="pre">skip_footer</span></code> 参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13386">GH 13386</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 已移除 <code class="docutils literal notranslate"><span class="pre">as_recarray</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13373">GH 13373</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 已移除 <code class="docutils literal notranslate"><span class="pre">buffer_lines</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13360">GH 13360</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 已移除 <code class="docutils literal notranslate"><span class="pre">compact_ints</span></code> 和 <code class="docutils literal notranslate"><span class="pre">use_unsigned</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13323">GH 13323</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> 类已移除 <code class="docutils literal notranslate"><span class="pre">offset</span></code> 属性，转而使用 <code class="docutils literal notranslate"><span class="pre">freq</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13593">GH 13593</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Series</span></code>、<code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 类已移除 <code class="docutils literal notranslate"><span class="pre">reshape</span></code> 方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13012">GH 13012</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.tseries.frequencies.get_standard_freq</span></code> 已被移除，转而使用 <code class="docutils literal notranslate"><span class="pre">pandas.tseries.frequencies.to_offset(freq).rule_code</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13874">GH 13874</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">freqstr</span></code> 关键字已从 <code class="docutils literal notranslate"><span class="pre">pandas.tseries.frequencies.to_offset</span></code> 中移除，转而使用 <code class="docutils literal notranslate"><span class="pre">freq</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13874">GH 13874</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Panel4D</span></code> 和 <code class="docutils literal notranslate"><span class="pre">PanelND</span></code> 类已被移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13776">GH 13776</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Panel</span></code> 类已移除 <code class="docutils literal notranslate"><span class="pre">to_long</span></code> 和 <code class="docutils literal notranslate"><span class="pre">toLong</span></code> 方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19077">GH 19077</a>)</p></li>
<li><p>The options <code class="docutils literal notranslate"><span class="pre">display.line_with</span></code> 和 <code class="docutils literal notranslate"><span class="pre">display.height</span></code> 已被移除，转而分别使用 <code class="docutils literal notranslate"><span class="pre">display.width</span></code> 和 <code class="docutils literal notranslate"><span class="pre">display.max_rows</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/4391">GH 4391</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19107">GH 19107</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 类的 <code class="docutils literal notranslate"><span class="pre">labels</span></code> 属性已移除，转而使用 <a class="reference internal" href="../reference/api/pandas.Categorical.codes.html#pandas.Categorical.codes" title="pandas.Categorical.codes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Categorical.codes</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7768">GH 7768</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">flavor</span></code> 参数已从 <code class="xref py py-func docutils literal notranslate"><span class="pre">to_sql()</span></code> 方法中移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13611">GH 13611</a>)</p></li>
<li><p>The modules <code class="docutils literal notranslate"><span class="pre">pandas.tools.hashing</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pandas.util.hashing</span></code> 已被移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16223">GH 16223</a>)</p></li>
<li><p>The top-level functions <code class="docutils literal notranslate"><span class="pre">pd.rolling_*</span></code>、<code class="docutils literal notranslate"><span class="pre">pd.expanding_*</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pd.ewm*</span></code> 已被移除（自 v0.18 起已弃用）。请转而使用 DataFrame/Series 方法 <a class="reference internal" href="../reference/api/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-attr docutils literal notranslate"><span class="pre">rolling</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.expanding.html#pandas.DataFrame.expanding" title="pandas.DataFrame.expanding"><code class="xref py py-attr docutils literal notranslate"><span class="pre">expanding</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.ewm.html#pandas.DataFrame.ewm" title="pandas.DataFrame.ewm"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ewm</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18723">GH 18723</a>)</p></li>
<li><p>Imports from <code class="docutils literal notranslate"><span class="pre">pandas.core.common</span></code> for functions such as <code class="docutils literal notranslate"><span class="pre">is_datetime64_dtype</span></code> 现已移除。这些函数位于 <code class="docutils literal notranslate"><span class="pre">pandas.api.types</span></code> 中。(GH 13634, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19769">GH 19769</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">infer_dst</span></code> 关键字在 <a class="reference internal" href="../reference/api/pandas.Series.tz_localize.html#pandas.Series.tz_localize" title="pandas.Series.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.tz_localize()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.tz_localize.html#pandas.DatetimeIndex.tz_localize" title="pandas.DatetimeIndex.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.tz_localize()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 中已移除。<code class="docutils literal notranslate"><span class="pre">infer_dst=True</span></code> 等同于 <code class="docutils literal notranslate"><span class="pre">ambiguous='infer'</span></code>，<code class="docutils literal notranslate"><span class="pre">infer_dst=False</span></code> 等同于 <code class="docutils literal notranslate"><span class="pre">ambiguous='raise'</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7963">GH 7963</a>)。</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">.resample()</span></code> 从急切操作（eager operation）更改为惰性操作（lazy operation），像 v0.18.0 中的 <code class="docutils literal notranslate"><span class="pre">.groupby()</span></code> 一样时，我们为了兼容性（带有 <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code>）而进行了一些调整，以确保操作能够继续进行。现在，此兼容性已完全移除，因此 <code class="docutils literal notranslate"><span class="pre">Resampler</span></code> 将不再转发兼容操作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20554">GH 20554</a>)</p></li>
<li><p>移除 <code class="docutils literal notranslate"><span class="pre">.replace()</span></code> 中长期弃用的 <code class="docutils literal notranslate"><span class="pre">axis=None</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20271">GH 20271</a>)</p></li>
</ul>
</section>
<section id="performance-improvements">
<span id="whatsnew-0230-performance"></span><h2>性能改进<a class="headerlink" href="v0.23.0.html#performance-improvements" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Indexers on <code class="docutils literal notranslate"><span class="pre">Series</span></code> 或 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 不再创建引用循环 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17956">GH 17956</a>)</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 添加了一个关键字参数 <code class="docutils literal notranslate"><span class="pre">cache</span></code>，它改进了转换重复 datetime 参数的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11665">GH 11665</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 算术运算性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18218">GH 18218</a>)</p></li>
<li><p>将 <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> 对象的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 转换为天、秒等的操作通过底层方法的向量化而加速 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18092">GH 18092</a>)</p></li>
<li><p>改进了 <code class="docutils literal notranslate"><span class="pre">.map()</span></code> 在 <code class="docutils literal notranslate"><span class="pre">Series/dict</span></code> 输入下的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15081">GH 15081</a>)</p></li>
<li><p>已移除被重写的 <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> 天、秒和微秒属性，转而利用其内置的 Python 版本 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18242">GH 18242</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> 的构造将减少输入数据在某些情况下的复制数量 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17449">GH 17449</a>)</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.Series.dt.date.html#pandas.Series.dt.date" title="pandas.Series.dt.date"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.dt.date()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.date.html#pandas.DatetimeIndex.date" title="pandas.DatetimeIndex.date"><code class="xref py py-func docutils literal notranslate"><span class="pre">DatetimeIndex.date()</span></code></a> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18058">GH 18058</a>)</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.Series.dt.time.html#pandas.Series.dt.time" title="pandas.Series.dt.time"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.dt.time()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.time.html#pandas.DatetimeIndex.time" title="pandas.DatetimeIndex.time"><code class="xref py py-func docutils literal notranslate"><span class="pre">DatetimeIndex.time()</span></code></a> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18461">GH 18461</a>)</p></li>
<li><p>改进了 <code class="xref py py-func docutils literal notranslate"><span class="pre">IntervalIndex.symmetric_difference()</span></code> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18475">GH 18475</a>)</p></li>
<li><p>改进了 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 在商业月和商业季度频率下的算术运算性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18489">GH 18489</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series()</span></code></a> / <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame()</span></code></a> 的 Tab 自动补全限制为 100 个值，以获得更好的性能。(GH 18587)</p></li>
<li><p>改进了当未安装 bottleneck 时，<a class="reference internal" href="../reference/api/pandas.DataFrame.median.html#pandas.DataFrame.median" title="pandas.DataFrame.median"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.median()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 下的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16468">GH 16468</a>)</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.MultiIndex.get_loc.html#pandas.MultiIndex.get_loc" title="pandas.MultiIndex.get_loc"><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.get_loc()</span></code></a> 对大型索引的性能，但代价是小型索引的性能有所下降 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18519">GH 18519</a>)</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.MultiIndex.remove_unused_levels.html#pandas.MultiIndex.remove_unused_levels" title="pandas.MultiIndex.remove_unused_levels"><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.remove_unused_levels()</span></code></a> 在没有未使用的级别时的性能，但代价是在存在未使用的级别时性能有所下降 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19289">GH 19289</a>)</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.Index.get_loc.html#pandas.Index.get_loc" title="pandas.Index.get_loc"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.get_loc()</span></code></a> 对非唯一索引的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19478">GH 19478</a>)</p></li>
<li><p>改进了成对的 <code class="docutils literal notranslate"><span class="pre">.rolling()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.expanding()</span></code> 搭配 <code class="docutils literal notranslate"><span class="pre">.cov()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.corr()</span></code> 操作的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17917">GH 17917</a>)</p></li>
<li><p>改进了 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.rank()</span></code> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15779">GH 15779</a>)</p></li>
<li><p>改进了 <code class="docutils literal notranslate"><span class="pre">.rolling()</span></code> 在 <code class="docutils literal notranslate"><span class="pre">.min()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.max()</span></code> 上的可变性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19521">GH 19521</a>)</p></li>
<li><p>改进了 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.ffill()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.bfill()</span></code> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11296">GH 11296</a>)</p></li>
<li><p>改进了 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.any()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.all()</span></code> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15435">GH 15435</a>)</p></li>
<li><p>改进了 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.pct_change()</span></code> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19165">GH 19165</a>)</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.Series.isin.html#pandas.Series.isin" title="pandas.Series.isin"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.isin()</span></code></a> 在分类 dtype 情况下的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20003">GH 20003</a>)</p></li>
<li><p>改进了 <code class="docutils literal notranslate"><span class="pre">getattr(Series,</span> <span class="pre">attr)</span></code> 在 Series 具有某些索引类型时的性能。这表现为 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> 的大型 Series 打印缓慢的问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19764">GH 19764</a>)</p></li>
<li><p>修复了 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.nth()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.last()</span></code> 在某些对象列上的性能回归问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19283">GH 19283</a>)</p></li>
<li><p>改进了 <code class="xref py py-func docutils literal notranslate"><span class="pre">Categorical.from_codes()</span></code> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18501">GH 18501</a>)</p></li>
</ul>
</section>
<section id="documentation-changes">
<span id="whatsnew-0230-docs"></span><h2>文档变更<a class="headerlink" href="v0.23.0.html#documentation-changes" title="Link to this heading">#</a></h2>
<p>感谢所有参与 3 月 10 日 pandas 文档冲刺活动的贡献者。我们有来自全球 30 多个地点的约 500 名参与者。您应该会注意到许多 <a class="reference internal" href="../reference/index.html#api"><span class="std std-ref">API docstrings</span></a> 已得到极大改进。</p>
<p>同时进行的贡献太多，无法为每项改进都包含发布说明，但此 <a class="reference external" href="https://github.com/pandas-dev/pandas/pulls?utf8=%E2%9C%93&amp;q=is%3Apr+label%3ADocs+created%3A2018-03-10..2018-03-15+">GitHub search</a> 能让您了解有多少文档字符串得到了改进。</p>
<p>特别感谢 <a class="reference external" href="https://github.com/datapythonista">Marc Garcia</a> 组织了这次冲刺活动。欲了解更多信息，请阅读 <a class="reference external" href="https://www.numfocus.org/blog/worldwide-pandas-sprint/">NumFOCUS blogpost</a>，该文章总结了本次冲刺活动。</p>
<ul class="simple">
<li><p>将“numpy”的拼写更改为“NumPy”，将“python”更改为“Python”。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19017">GH 19017</a>)</p></li>
<li><p>引入代码示例时保持一致性，使用冒号或句号。重写了一些句子以提高清晰度，增加了对函数、方法和类的更多动态引用。(GH 18941, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18948">GH 18948</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18973">GH 18973</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19017">GH 19017</a>)</p></li>
<li><p>在合并文档的 concatenate 部分添加了对 <a class="reference internal" href="../reference/api/pandas.DataFrame.assign.html#pandas.DataFrame.assign" title="pandas.DataFrame.assign"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.assign()</span></code></a> 的引用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18665">GH 18665</a>)</p></li>
</ul>
</section>
<section id="bug-fixes">
<span id="whatsnew-0230-bug-fixes"></span><h2>缺陷修复<a class="headerlink" href="v0.23.0.html#bug-fixes" title="Link to this heading">#</a></h2>
<section id="categorical">
<h3>Categorical<a class="headerlink" href="v0.23.0.html#categorical" title="Link to this heading">#</a></h3>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>pandas 0.21 中引入了一类与 <code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> 相关的缺陷，影响了 <code class="docutils literal notranslate"><span class="pre">merge</span></code>、<code class="docutils literal notranslate"><span class="pre">concat</span></code> 和索引等操作的正确性，尤其是在比较多个具有相同类别但顺序不同的无序 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 数组时。我们强烈建议在执行这些操作之前升级或手动对齐您的类别。</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical.equals</span></code> 的缺陷：当比较两个具有相同类别但顺序不同的无序 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 数组时，返回错误结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16603">GH 16603</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.api.types.union_categoricals.html#pandas.api.types.union_categoricals" title="pandas.api.types.union_categoricals"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.api.types.union_categoricals()</span></code></a> 的缺陷：对于类别顺序不同的无序分类数据，返回错误结果。这影响了 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.concat()</span></code></a> 处理 Categorical 数据时的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19096">GH 19096</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.merge()</span></code></a> 的缺陷：当基于具有相同类别但顺序不同的无序 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 进行连接时，返回错误结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19551">GH 19551</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex.get_indexer()</span></code> 的缺陷：当 <code class="docutils literal notranslate"><span class="pre">target</span></code> 是一个与 <code class="docutils literal notranslate"><span class="pre">self</span></code> 具有相同类别但顺序不同的无序 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 时，返回错误结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19551">GH 19551</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.astype.html#pandas.Index.astype" title="pandas.Index.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.astype()</span></code></a> 的缺陷：当使用分类 dtype 时，生成的索引未对所有类型的索引都转换为 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> (GH 18630)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.astype()</span></code></a> 和 <code class="docutils literal notranslate"><span class="pre">Categorical.astype()</span></code> 的缺陷：现有分类数据未更新 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10696">GH 10696</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18593">GH 18593</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.split.html#pandas.Series.str.split" title="pandas.Series.str.split"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.split()</span></code></a> 的缺陷：当 <code class="docutils literal notranslate"><span class="pre">expand=True</span></code> 时，在空字符串上错误地引发 IndexError (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20002">GH 20002</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 构造函数的缺陷：当使用 <code class="docutils literal notranslate"><span class="pre">dtype=CategoricalDtype(...)</span></code> 时，<code class="docutils literal notranslate"><span class="pre">categories</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 未被保留 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19032">GH 19032</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 构造函数的缺陷：当使用标量和 <code class="docutils literal notranslate"><span class="pre">dtype=CategoricalDtype(...)</span></code> 时，<code class="docutils literal notranslate"><span class="pre">categories</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 未被保留 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19565">GH 19565</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical.__iter__</span></code> 的缺陷：未转换为 Python 类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19909">GH 19909</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.factorize()</span></code></a> 的缺陷：返回 <code class="docutils literal notranslate"><span class="pre">uniques</span></code> 的唯一编码。现在返回一个与输入具有相同 dtype 的 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19721">GH 19721</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.factorize()</span></code></a> 的缺陷：在 <code class="docutils literal notranslate"><span class="pre">uniques</span></code> 返回值中包含了缺失值项 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19721">GH 19721</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.take.html#pandas.Series.take" title="pandas.Series.take"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.take()</span></code></a> 的缺陷：当处理分类数据时，错误地将 <code class="docutils literal notranslate"><span class="pre">-1</span></code> 在 <code class="docutils literal notranslate"><span class="pre">indices</span></code> 中解释为缺失值标记，而非 Series 的最后一个元素 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20664">GH 20664</a>)</p></li>
</ul>
</section>
<section id="datetimelike">
<h3>日期时间类 (Datetimelike)<a class="headerlink" href="v0.23.0.html#datetimelike" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.__sub__()</span></code> 的缺陷：从 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 中减去非纳秒 <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code> 对象时，结果不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7996">GH 7996</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a>、<a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 的缺陷：添加和减去零维整数数组时，结果不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19012">GH 19012</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 的缺陷：添加或减去类数组的 <code class="docutils literal notranslate"><span class="pre">DateOffset</span></code> 对象时，要么引发异常（<code class="docutils literal notranslate"><span class="pre">np.array</span></code>，<code class="docutils literal notranslate"><span class="pre">pd.Index</span></code>），要么广播不正确（<code class="docutils literal notranslate"><span class="pre">pd.Series</span></code>）(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18849">GH 18849</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.__add__()</span></code> 的缺陷：将 dtype 为 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> 的 Series 添加到时区感知 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> 时，错误地丢失了时区信息 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13905">GH 13905</a>)</p></li>
<li><p>将 <code class="docutils literal notranslate"><span class="pre">Period</span></code> 对象添加到 <code class="docutils literal notranslate"><span class="pre">datetime</span></code> 或 <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> 对象时，现在将正确地引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17983">GH 17983</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 的缺陷：与 <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> 对象数组进行比较时，会导致 <code class="docutils literal notranslate"><span class="pre">RecursionError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15183">GH 15183</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 整除的缺陷：对标量 <code class="docutils literal notranslate"><span class="pre">timedelta</span></code> 进行操作时会引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18846">GH 18846</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 的缺陷：在一天结束时 (例如 23:59:59.999999999) repr 未显示高精度时间值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19030">GH 19030</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.astype()</span></code> 的缺陷：转换为非纳秒 timedelta 单位时，会保留不正确的 dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19176">GH 19176</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19223">GH 19223</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12425">GH 12425</a>)</p></li>
<li><p>从 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 中减去 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时的缺陷：错误地返回 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19158">GH 19158</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.truncate.html#pandas.Series.truncate" title="pandas.Series.truncate"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.truncate()</span></code></a> 的缺陷：在单调 <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 下引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17717">GH 17717</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.pct_change.html#pandas.DataFrame.pct_change" title="pandas.DataFrame.pct_change"><code class="xref py py-func docutils literal notranslate"><span class="pre">pct_change()</span></code></a> 的缺陷：使用 <code class="docutils literal notranslate"><span class="pre">periods</span></code> 和 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 时返回不同长度的输出 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7292">GH 7292</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 比较的缺陷：与 <code class="docutils literal notranslate"><span class="pre">None</span></code> 或 <code class="docutils literal notranslate"><span class="pre">datetime.date</span></code> 对象进行 <code class="docutils literal notranslate"><span class="pre">==</span></code> 和 <code class="docutils literal notranslate"><span class="pre">!=</span></code> 比较时，错误地引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>，而非分别返回全 <code class="docutils literal notranslate"><span class="pre">False</span></code> 和全 <code class="docutils literal notranslate"><span class="pre">True</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19301">GH 19301</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 的缺陷：表示略微超出范围的时间戳字符串会被错误地向下舍入，而非引发 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19382">GH 19382</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.floor.html#pandas.Timestamp.floor" title="pandas.Timestamp.floor"><code class="xref py py-func docutils literal notranslate"><span class="pre">Timestamp.floor()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.floor.html#pandas.DatetimeIndex.floor" title="pandas.DatetimeIndex.floor"><code class="xref py py-func docutils literal notranslate"><span class="pre">DatetimeIndex.floor()</span></code></a> 的缺陷：遥远未来和过去的时间戳未正确舍入 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19206">GH 19206</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 的缺陷：当传递超出范围的 datetime 且设置 <code class="docutils literal notranslate"><span class="pre">errors='coerce'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">utc=True</span></code> 时，会引发 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> 而非解析为 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19612">GH 19612</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 的缺陷：在加减运算中，返回对象的名称并非始终一致地设置 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19744">GH 19744</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 的缺陷：与 numpy 数组进行加减运算时引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19847">GH 19847</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 的缺陷：设置 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 属性未得到完全支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20678">GH 20678</a>)</p></li>
</ul>
</section>
<section id="timedelta">
<h3>Timedelta<a class="headerlink" href="v0.23.0.html#timedelta" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">Timedelta.__mul__()</span></code> 的缺陷：乘以 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 时，返回 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 而非引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19819">GH 19819</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的缺陷：当 dtype 为 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> 时，与 <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 进行加减运算的结果被强制转换为 <code class="docutils literal notranslate"><span class="pre">dtype='int64'</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17250">GH 17250</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的缺陷：当 dtype 为 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> 时，与 <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 进行加减运算可能会返回一个名称不正确的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19043">GH 19043</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">Timedelta.__floordiv__()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">Timedelta.__rfloordiv__()</span></code> 的缺陷：错误地允许除以许多不兼容的 numpy 对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18846">GH 18846</a>)</p></li>
<li><p>缺陷：用 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 除以标量 timedelta 类对象时，执行了倒数运算 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19125">GH 19125</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 的缺陷：除以 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 时会返回 <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 而非 <code class="docutils literal notranslate"><span class="pre">Series</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19042">GH 19042</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">Timedelta.__add__()</span></code>、<code class="xref py py-func docutils literal notranslate"><span class="pre">Timedelta.__sub__()</span></code> 的缺陷：添加或减去 <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> 对象时，会返回另一个 <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> 而非 <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19738">GH 19738</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">Timedelta.__floordiv__()</span></code>、<code class="xref py py-func docutils literal notranslate"><span class="pre">Timedelta.__rfloordiv__()</span></code> 的缺陷：与 <code class="docutils literal notranslate"><span class="pre">Tick</span></code> 对象进行操作时会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而非返回数值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19738">GH 19738</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Period.asfreq.html#pandas.Period.asfreq" title="pandas.Period.asfreq"><code class="xref py py-func docutils literal notranslate"><span class="pre">Period.asfreq()</span></code></a> 的缺陷：接近 <code class="docutils literal notranslate"><span class="pre">datetime(1,</span> <span class="pre">1,</span> <span class="pre">1)</span></code> 的周期可能会被错误转换 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19643">GH 19643</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19834">GH 19834</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timedelta.total_seconds.html#pandas.Timedelta.total_seconds" title="pandas.Timedelta.total_seconds"><code class="xref py py-func docutils literal notranslate"><span class="pre">Timedelta.total_seconds()</span></code></a> 的缺陷：导致精度错误，例如 <code class="docutils literal notranslate"><span class="pre">Timedelta('30S').total_seconds()==30.000000000000004</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19458">GH 19458</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">Timedelta.__rmod__()</span></code> 的缺陷：与 <code class="docutils literal notranslate"><span class="pre">numpy.timedelta64</span></code> 进行操作时，返回 <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> 对象而非 <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19820">GH 19820</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 乘以 <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 现在将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>，而非在长度不匹配时引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19333">GH 19333</a>)</p></li>
<li><p>索引 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 与 <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> 对象时的缺陷：会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20393">GH 20393</a>)</p></li>
</ul>
</section>
<section id="timezones">
<h3>时区 (Timezones)<a class="headerlink" href="v0.23.0.html#timezones" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>从包含时区天真（tz-naive）和时区感知（tz-aware）值的数组创建 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 时的缺陷：将导致 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 的 dtype 为时区感知，而非对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16406">GH 16406</a>)</p></li>
<li><p>时区感知 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 与 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 比较时的缺陷：错误地引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19276">GH 19276</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.astype()</span></code> 的缺陷：在时区感知 dtype 之间转换时，以及从时区感知转换为天真时区时出现问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18951">GH 18951</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 比较的缺陷：尝试比较时区感知和时区天真日期时间类对象时，未能引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18162">GH 18162</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> 构造函数中使用 <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> dtype 对天真时区日期时间字符串进行本地化时的缺陷 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/174151">GH 174151</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.replace.html#pandas.Timestamp.replace" title="pandas.Timestamp.replace"><code class="xref py py-func docutils literal notranslate"><span class="pre">Timestamp.replace()</span></code></a> 现在将优雅地处理夏令时转换 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18319">GH 18319</a>)</p></li>
<li><p>时区感知 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 的缺陷：与 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 或 dtype 为 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> 的数组进行加减运算不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17558">GH 17558</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">DatetimeIndex.insert()</span></code> 的缺陷：将 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 插入时区感知索引时错误地引发了异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16357">GH 16357</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数的缺陷：当使用时区感知 Datetimeindex 和给定列名时，会导致一个空的 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19157">GH 19157</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.tz_localize.html#pandas.Timestamp.tz_localize" title="pandas.Timestamp.tz_localize"><code class="xref py py-func docutils literal notranslate"><span class="pre">Timestamp.tz_localize()</span></code></a> 的缺陷：本地化接近最小或最大有效值的时间戳时，可能会溢出并返回一个具有不正确纳秒值的时间戳 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12677">GH 12677</a>)</p></li>
<li><p>迭代通过固定时区偏移量进行本地化，并将其纳秒精度舍入为微秒的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 时的缺陷 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19603">GH 19603</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.diff.html#pandas.DataFrame.diff" title="pandas.DataFrame.diff"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.diff()</span></code></a> 的缺陷：使用时区感知值时引发 <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18578">GH 18578</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.melt.html#pandas.melt" title="pandas.melt"><code class="xref py py-func docutils literal notranslate"><span class="pre">melt()</span></code></a> 的缺陷：将时区感知 dtype 转换为时区天真 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15785">GH 15785</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">Dataframe.count()</span></code> 的缺陷：如果对具有时区感知值的单列调用 <code class="xref py py-func docutils literal notranslate"><span class="pre">Dataframe.dropna()</span></code>，则会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13407">GH 13407</a>)。</p></li>
</ul>
</section>
<section id="offsets">
<h3>偏移量 (Offsets)<a class="headerlink" href="v0.23.0.html#offsets" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">WeekOfMonth</span></code> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">Week</span></code> 的缺陷：加减运算未正确滚动 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18510">GH 18510</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18672">GH 18672</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18864">GH 18864</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">WeekOfMonth</span></code> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">LastWeekOfMonth</span></code> 的缺陷：构造函数的默认关键字参数引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19142">GH 19142</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">FY5253Quarter</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">LastWeekOfMonth</span></code> 的缺陷：回滚和前滚行为与加减行为不一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18854">GH 18854</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">FY5253</span></code> 的缺陷：年末日期但未规范化到午夜的 <code class="docutils literal notranslate"><span class="pre">datetime</span></code> 加减运算递增不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18854">GH 18854</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">FY5253</span></code> 的缺陷：日期偏移量在算术运算中可能错误地引发 <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14774">GH 14774</a>)</p></li>
</ul>
</section>
<section id="numeric">
<h3>数值 (Numeric)<a class="headerlink" href="v0.23.0.html#numeric" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 构造函数的缺陷：当使用整数或浮点数列表并指定 <code class="docutils literal notranslate"><span class="pre">dtype=str</span></code>、<code class="docutils literal notranslate"><span class="pre">dtype='str'</span></code> 或 <code class="docutils literal notranslate"><span class="pre">dtype='U'</span></code> 时，未能将数据元素转换为字符串 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16605">GH 16605</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 乘法和除法方法的缺陷：与 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 进行操作时，会返回 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 对象而非 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19042">GH 19042</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数的缺陷：包含非常大正数或非常大负数的数据导致 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18584">GH 18584</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 构造函数的缺陷：当 <code class="docutils literal notranslate"><span class="pre">dtype='uint64'</span></code> 时，类整数浮点数未被强制转换为 <code class="xref py py-class docutils literal notranslate"><span class="pre">UInt64Index</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18400">GH 18400</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 灵活算术运算（例如 <code class="docutils literal notranslate"><span class="pre">df.add(other,</span> <span class="pre">fill_value=foo)</span></code>）的缺陷：当 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> 不为 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时，在 frame 或 <code class="docutils literal notranslate"><span class="pre">other</span></code> 长度为零的极端情况下未能引发 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19522">GH 19522</a>)</p></li>
<li><p>数值型 dtype 的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 对象与 timedelta 类标量进行乘法和除法运算时，返回 <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 而非引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19333">GH 19333</a>)</p></li>
<li><p>缺陷：当 <code class="docutils literal notranslate"><span class="pre">fill_method</span></code> 不为 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时，<a class="reference internal" href="../reference/api/pandas.Series.pct_change.html#pandas.Series.pct_change" title="pandas.Series.pct_change"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.pct_change()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.pct_change.html#pandas.DataFrame.pct_change" title="pandas.DataFrame.pct_change"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.pct_change()</span></code></a> 返回 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 而非 0 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19873">GH 19873</a>)</p></li>
</ul>
</section>
<section id="strings">
<h3>字符串 (Strings)<a class="headerlink" href="v0.23.0.html#strings" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.get.html#pandas.Series.str.get" title="pandas.Series.str.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.str.get()</span></code></a> 的缺陷：当值中包含字典且索引不在键中时，引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20671">GH 20671</a>)</p></li>
</ul>
</section>
<section id="indexing">
<h3>索引 (Indexing)<a class="headerlink" href="v0.23.0.html#indexing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 从混合类型元组列表构造时的缺陷 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18505">GH 18505</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.drop.html#pandas.Index.drop" title="pandas.Index.drop"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.drop()</span></code></a> 的缺陷：当传入元组和非元组的混合列表时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18304">GH 18304</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.drop.html#pandas.DataFrame.drop" title="pandas.DataFrame.drop"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.drop()</span></code></a>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">Panel.drop()</span></code>、<a class="reference internal" href="../reference/api/pandas.Series.drop.html#pandas.Series.drop" title="pandas.Series.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.drop()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Index.drop.html#pandas.Index.drop" title="pandas.Index.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.drop()</span></code></a> 的缺陷：当从包含重复项的轴中删除不存在的元素时，未引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19186">GH 19186</a>)</p></li>
<li><p>索引日期时间类 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 时的缺陷：引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而非 <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18386">GH 18386</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.to_series.html#pandas.Index.to_series" title="pandas.Index.to_series"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.to_series()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">index</span></code> 和 <code class="docutils literal notranslate"><span class="pre">name</span></code> 关键字参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18699">GH 18699</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.to_series.html#pandas.DatetimeIndex.to_series" title="pandas.DatetimeIndex.to_series"><code class="xref py py-func docutils literal notranslate"><span class="pre">DatetimeIndex.to_series()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">index</span></code> 和 <code class="docutils literal notranslate"><span class="pre">name</span></code> 关键字参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18699">GH 18699</a>)</p></li>
<li><p>索引非唯一 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 中的非标量值时，会返回扁平化后的值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17610">GH 17610</a>)</p></li>
<li><p>索引仅包含缺失键的迭代器时的缺陷：未引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20748">GH 20748</a>)</p></li>
<li><p>修复了当索引具有整数 dtype 且不包含所需键时，<code class="docutils literal notranslate"><span class="pre">.ix</span></code> 在列表键和标量键之间不一致的问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20753">GH 20753</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__setitem__</span></code> 的缺陷：当使用二维布尔型 ndarray 索引 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18582">GH 18582</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">str.extractall</span></code> 的缺陷：当没有匹配项时，返回空的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 而非适当的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19034">GH 19034</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 的缺陷：空数据和纯 NA 数据的构造方法不一致，取决于具体的构造方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18421">GH 18421</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">IntervalIndex.symmetric_difference()</span></code> 的缺陷：与非 <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> 的对称差未引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18475">GH 18475</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 的缺陷：返回空 <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> 的集合操作具有错误的 dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19101">GH 19101</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.drop_duplicates.html#pandas.DataFrame.drop_duplicates" title="pandas.DataFrame.drop_duplicates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.drop_duplicates()</span></code></a> 的缺陷：当传入 DataFrame 中不存在的列时，未引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19726">GH 19726</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Index</span></code> 子类构造函数的缺陷：忽略了意外的关键字参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19348">GH 19348</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.difference.html#pandas.Index.difference" title="pandas.Index.difference"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.difference()</span></code></a> 的缺陷：当 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 与自身取差集时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20040">GH 20040</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.first_valid_index.html#pandas.DataFrame.first_valid_index" title="pandas.DataFrame.first_valid_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.first_valid_index()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.last_valid_index.html#pandas.DataFrame.last_valid_index" title="pandas.DataFrame.last_valid_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.last_valid_index()</span></code></a> 的缺陷：当值中间存在整行 NaN 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20499">GH 20499</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 的缺陷：某些索引操作不支持重叠或非单调的 <code class="docutils literal notranslate"><span class="pre">uint64</span></code> 数据 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20636">GH 20636</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.is_unique</span></code> 的缺陷：如果 Series 包含定义了 <code class="docutils literal notranslate"><span class="pre">__ne__</span></code> 的对象，则会在 stderr 中显示额外输出 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20661">GH 20661</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.loc</span></code> 赋值的缺陷：使用单元素类列表错误地赋值为列表 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19474">GH 19474</a>)</p></li>
<li><p>在具有单调递减 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> 的 <code class="docutils literal notranslate"><span class="pre">Series/DataFrame</span></code> 上进行部分字符串索引时的缺陷 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19362">GH 19362</a>)</p></li>
<li><p>对具有重复 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 的 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 执行原地操作时的缺陷 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17105">GH 17105</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.get_loc.html#pandas.IntervalIndex.get_loc" title="pandas.IntervalIndex.get_loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.get_loc()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.get_indexer.html#pandas.IntervalIndex.get_indexer" title="pandas.IntervalIndex.get_indexer"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.get_indexer()</span></code></a> 的缺陷：当与包含单个区间的 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 一起使用时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17284">GH 17284</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20921">GH 20921</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.loc</span></code> 赋值的缺陷：当使用 <code class="docutils literal notranslate"><span class="pre">uint64</span></code> 索引器时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20722">GH 20722</a>)</p></li>
</ul>
</section>
<section id="multiindex">
<h3>MultiIndex<a class="headerlink" href="v0.23.0.html#multiindex" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.__contains__()</span></code> 的缺陷：非元组键即使已被删除也会返回 <code class="docutils literal notranslate"><span class="pre">True</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19027">GH 19027</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.set_labels()</span></code> 的缺陷：如果 <code class="docutils literal notranslate"><span class="pre">level</span></code> 参数不是 0 或 [0, 1, …] 这样的列表，则会导致新标签的类型转换（以及潜在的剪裁）(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19057">GH 19057</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.get_level_values.html#pandas.MultiIndex.get_level_values" title="pandas.MultiIndex.get_level_values"><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.get_level_values()</span></code></a> 的缺陷：在整数级别上，当存在缺失值时会返回无效索引 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17924">GH 17924</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.unique()</span></code> 的缺陷：当在空的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 上调用时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20568">GH 20568</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.unique()</span></code> 的缺陷：未保留级别名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20570">GH 20570</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.remove_unused_levels.html#pandas.MultiIndex.remove_unused_levels" title="pandas.MultiIndex.remove_unused_levels"><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.remove_unused_levels()</span></code></a> 的缺陷：会填充 NaN 值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18417">GH 18417</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.from_tuples.html#pandas.MultiIndex.from_tuples" title="pandas.MultiIndex.from_tuples"><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.from_tuples()</span></code></a> 的缺陷：在 Python 3 中未能接受压缩的元组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18434">GH 18434</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.get_loc.html#pandas.MultiIndex.get_loc" title="pandas.MultiIndex.get_loc"><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.get_loc()</span></code></a> 的缺陷：未能自动将浮点数和整数之间的值进行类型转换 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18818">GH 18818</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15994">GH 15994</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.get_loc.html#pandas.MultiIndex.get_loc" title="pandas.MultiIndex.get_loc"><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.get_loc()</span></code></a> 的缺陷：将布尔值转换为整数标签 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19086">GH 19086</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.get_loc.html#pandas.MultiIndex.get_loc" title="pandas.MultiIndex.get_loc"><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.get_loc()</span></code></a> 的缺陷：未能定位包含 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 的键 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18485">GH 18485</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.get_loc.html#pandas.MultiIndex.get_loc" title="pandas.MultiIndex.get_loc"><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.get_loc()</span></code></a> 在大型 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 中的缺陷：当级别具有不同 dtype 时会失败 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18520">GH 18520</a>)</p></li>
<li><p>索引的缺陷：仅包含 numpy 数组的嵌套索引器处理不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19686">GH 19686</a>)</p></li>
</ul>
</section>
<section id="io">
<h3>IO<a class="headerlink" href="v0.23.0.html#io" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> 现在在解析失败后、尝试使用新解析器解析之前，会倒回可查找的 IO 对象。如果解析器出错且对象不可查找，则会引发一个信息性错误，建议使用不同的解析器 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17975">GH 17975</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 现在提供一个选项，可以在开头的 <code class="docutils literal notranslate"><span class="pre">&lt;table&gt;</span></code> 标签中添加 id (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8496">GH 8496</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">read_msgpack()</span></code> 的缺陷：在 Python 2 中传入不存在的文件时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15296">GH 15296</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 的缺陷：具有重复列的 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 未被正确处理 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18062">GH 18062</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 的缺陷：当 <code class="docutils literal notranslate"><span class="pre">keep_default_na=False</span></code> 且使用字典 <code class="docutils literal notranslate"><span class="pre">na_values</span></code> 时，缺失值未被正确处理 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19227">GH 19227</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 的缺陷：在 32 位大端架构上导致堆损坏 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20785">GH 20785</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 的缺陷：变量数为 0 的文件错误地引发了 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>。现在会引发 <code class="docutils literal notranslate"><span class="pre">EmptyDataError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18184">GH 18184</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_latex.html#pandas.DataFrame.to_latex" title="pandas.DataFrame.to_latex"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_latex()</span></code></a> 中存在一个错误，旨在用作隐形占位符的花括号对被转义 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18667">GH 18667</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_latex.html#pandas.DataFrame.to_latex" title="pandas.DataFrame.to_latex"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_latex()</span></code></a> 中存在一个错误，当 `MultiIndex` 中存在 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 时会导致 <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> 或不正确输出 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14249">GH 14249</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_latex.html#pandas.DataFrame.to_latex" title="pandas.DataFrame.to_latex"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_latex()</span></code></a> 中存在一个错误，当索引级别名称为非字符串时会导致 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19981">GH 19981</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_latex.html#pandas.DataFrame.to_latex" title="pandas.DataFrame.to_latex"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_latex()</span></code></a> 中存在一个错误，索引名称与 <code class="docutils literal notranslate"><span class="pre">index_names=False</span></code> 选项的组合会导致不正确输出 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18326">GH 18326</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_latex.html#pandas.DataFrame.to_latex" title="pandas.DataFrame.to_latex"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_latex()</span></code></a> 中存在一个错误，当 `MultiIndex` 的名称为空字符串时会导致不正确输出 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18669">GH 18669</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_latex.html#pandas.DataFrame.to_latex" title="pandas.DataFrame.to_latex"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_latex()</span></code></a> 中存在一个错误，缺失的空格字符导致错误的转义，并在某些情况下生成无效的LaTeX (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20859">GH 20859</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_json()</span></code></a> 中存在一个错误，大数值会导致 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18842">GH 18842</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" title="pandas.DataFrame.to_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_parquet()</span></code></a> 中存在一个错误，如果写入目标是 S3 则会引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19134">GH 19134</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 现在在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_excel()</span></code></a> 中支持所有 Excel 文件类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19242">GH 19242</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 现在在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_excel()</span></code></a> 中支持所有 Excel 文件类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19242">GH 19242</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9155">GH 9155</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19900">GH 19900</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.io.stata.StataReader.value_labels.html#pandas.io.stata.StataReader.value_labels" title="pandas.io.stata.StataReader.value_labels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.io.stata.StataReader.value_labels()</span></code></a> 中存在一个错误，在处理非常旧的文件时会引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>。现在返回一个空字典 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19417">GH 19417</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_pickle.html#pandas.read_pickle" title="pandas.read_pickle"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_pickle()</span></code></a> 中存在一个错误，当解封使用 pandas 0.20 版本之前创建的包含 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 或 <code class="xref py py-class docutils literal notranslate"><span class="pre">Float64Index</span></code> 的对象时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19939">GH 19939</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.io.json.json_normalize()</span></code> 中存在一个错误，当任何子记录的值为 NoneType 时，子记录无法正确规范化 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20030">GH 20030</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 参数中存在一个错误，传递字符串时未正确引发错误。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20529">GH 20529</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.HDFStore.keys.html#pandas.HDFStore.keys" title="pandas.HDFStore.keys"><code class="xref py py-func docutils literal notranslate"><span class="pre">HDFStore.keys()</span></code></a> 中存在一个错误，读取包含软链接的文件时导致异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20523">GH 20523</a>)</p></li>
<li><p>在 <code class="xref py py-func docutils literal notranslate"><span class="pre">HDFStore.select_column()</span></code> 中存在一个错误，当键不是有效存储时，引发了 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17912">GH 17912</a>)</p></li>
</ul>
</section>
<section id="plotting">
<h3>绘图<a class="headerlink" href="v0.23.0.html#plotting" title="指向此标题的链接">#</a></h3>
<ul class="simple">
<li><p>当尝试绘图但未安装matplotlib时，显示更友好的错误消息 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19810">GH 19810</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a> 现在在 <code class="docutils literal notranslate"><span class="pre">x</span></code> 或 <code class="docutils literal notranslate"><span class="pre">y</span></code> 参数格式不正确时会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18671">GH 18671</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">x</span></code> 和 <code class="docutils literal notranslate"><span class="pre">y</span></code> 参数以位置形式给出时，导致折线图、条形图和面积图的引用列不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20056">GH 20056</a>)</p></li>
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">datetime.time()</span></code> 和小数秒格式化刻度标签时出错 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18478">GH 18478</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.plot.kde.html#pandas.Series.plot.kde" title="pandas.Series.plot.kde"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.plot.kde()</span></code></a> 在文档字符串中公开了参数 <code class="docutils literal notranslate"><span class="pre">ind</span></code> 和 <code class="docutils literal notranslate"><span class="pre">bw_method</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18461">GH 18461</a>)。参数 <code class="docutils literal notranslate"><span class="pre">ind</span></code> 现在也可以是整数（样本点数量）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">y</span></code> 参数接收多列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19699">GH 19699</a>)</p></li>
</ul>
</section>
<section id="groupby-resample-rolling">
<h3>GroupBy/重采样/滚动<a class="headerlink" href="v0.23.0.html#groupby-resample-rolling" title="指向此标题的链接">#</a></h3>
<ul class="simple">
<li><p>按单列分组并使用 <code class="docutils literal notranslate"><span class="pre">list</span></code> 或 <code class="docutils literal notranslate"><span class="pre">tuple</span></code> 等类进行聚合时出错 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18079">GH 18079</a>)</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 中的回归问题，该问题在调用时使用不在索引中的元组键不会发出错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18798">GH 18798</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 中存在一个错误，它默默地忽略了 <code class="docutils literal notranslate"><span class="pre">label</span></code>、<code class="docutils literal notranslate"><span class="pre">closed</span></code> 和 <code class="docutils literal notranslate"><span class="pre">convention</span></code> 的（不受支持或拼写错误的）选项 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19303">GH 19303</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 中存在一个错误，元组被解释为键列表而不是单个键 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17979">GH 17979</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18249">GH 18249</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 中存在一个错误，通过 <code class="docutils literal notranslate"><span class="pre">first</span></code>/<code class="docutils literal notranslate"><span class="pre">last</span></code>/<code class="docutils literal notranslate"><span class="pre">min</span></code>/<code class="docutils literal notranslate"><span class="pre">max</span></code> 聚合导致时间戳精度丢失 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19526">GH 19526</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.transform.html#pandas.DataFrame.transform" title="pandas.DataFrame.transform"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.transform()</span></code></a> 中存在一个错误，某些聚合函数被错误地转换为匹配分组数据的dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19200">GH 19200</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 中存在一个错误，在传递 <code class="docutils literal notranslate"><span class="pre">on=</span></code> 关键字参数后，随即使用 <code class="docutils literal notranslate"><span class="pre">.apply()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17813">GH 17813</a>)</p></li>
<li><p>在 <code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.resample().aggregate</span></code> 中存在一个错误，当聚合不存在的列时未引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16766">GH 16766</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19566">GH 19566</a>)</p></li>
<li><p>在 <code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrameGroupBy.cumsum()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrameGroupBy.cumprod()</span></code> 中存在一个错误，当传递 <code class="docutils literal notranslate"><span class="pre">skipna</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19806">GH 19806</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 中存在一个错误，它丢失了时区信息 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13238">GH 13238</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 中存在一个错误，使用 <code class="docutils literal notranslate"><span class="pre">np.all</span></code> 和 <code class="docutils literal notranslate"><span class="pre">np.any</span></code> 进行转换时引发了 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20653">GH 20653</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 中存在一个错误，<code class="docutils literal notranslate"><span class="pre">ffill</span></code>、<code class="docutils literal notranslate"><span class="pre">bfill</span></code>、<code class="docutils literal notranslate"><span class="pre">pad</span></code>、<code class="docutils literal notranslate"><span class="pre">backfill</span></code>、<code class="docutils literal notranslate"><span class="pre">fillna</span></code>、<code class="docutils literal notranslate"><span class="pre">interpolate</span></code> 和 <code class="docutils literal notranslate"><span class="pre">asfreq</span></code> 忽略了 <code class="docutils literal notranslate"><span class="pre">loffset</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20744">GH 20744</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 中存在一个错误，当应用一个包含混合数据类型的函数，并且用户提供的函数可能在分组列上失败时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20949">GH 20949</a>)</p></li>
<li><p>在 <code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrameGroupBy.rolling().apply()</span></code> 中存在一个错误，针对关联的 <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameGroupBy</span></code> 对象执行的操作可能会影响分组项在结果中的包含 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14013">GH 14013</a>)</p></li>
</ul>
</section>
<section id="sparse">
<h3>稀疏<a class="headerlink" href="v0.23.0.html#sparse" title="指向此标题的链接">#</a></h3>
<ul class="simple">
<li><p>创建 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> 时存在一个错误，从密集的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 或不支持的类型创建时会引发未受控制的异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19374">GH 19374</a>)</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDataFrame.to_csv</span></code> 中存在一个错误，导致异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19384">GH 19384</a>)</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseSeries.memory_usage</span></code> 中存在一个错误，通过访问非稀疏元素导致段错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19368">GH 19368</a>)</p></li>
<li><p>在构建 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseArray</span></code> 时存在一个错误：如果 <code class="docutils literal notranslate"><span class="pre">data</span></code> 是标量且 <code class="docutils literal notranslate"><span class="pre">index</span></code> 已定义，则无论标量的 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 如何，它都会强制转换为 <code class="docutils literal notranslate"><span class="pre">float64</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19163">GH 19163</a>)</p></li>
</ul>
</section>
<section id="reshaping">
<h3>重塑<a class="headerlink" href="v0.23.0.html#reshaping" title="指向此标题的链接">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge" title="pandas.DataFrame.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.merge()</span></code></a> 中存在一个错误，通过名称引用 <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code> 时，<code class="docutils literal notranslate"><span class="pre">by</span></code> 关键字参数会引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20777">GH 20777</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a> 中存在一个错误，它在 Python 3 下尝试对混合类型级别进行排序时失败 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18310">GH 18310</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.unstack()</span></code></a> 中存在一个错误，如果 <code class="docutils literal notranslate"><span class="pre">columns</span></code> 是一个包含未使用级别的 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code>，则将整数转换为浮点数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17845">GH 17845</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.unstack()</span></code></a> 中存在一个错误，如果 <code class="docutils literal notranslate"><span class="pre">index</span></code> 是一个 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code>，且在 unstack 级别上存在未使用的标签，则会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18562">GH 18562</a>)</p></li>
<li><p>修复了从包含 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 作为键的 <code class="docutils literal notranslate"><span class="pre">dict</span></code> 构建 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18480">GH 18480</a>)</p></li>
<li><p>修复了从包含 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 作为键的 <code class="docutils literal notranslate"><span class="pre">dict</span></code> 构建 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18455">GH 18455</a>)</p></li>
<li><p>禁用了当 len(index) > len(data) = 1 时构建 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>，之前会广播数据项，现在会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18819">GH 18819</a>)</p></li>
<li><p>抑制了从包含标量值的 <code class="docutils literal notranslate"><span class="pre">dict</span></code> 构建 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时，当传入的索引中不包含相应的键时出现的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18600">GH 18600</a>)</p></li>
<li><p>修复了初始化时带有轴、无数据且 <code class="docutils literal notranslate"><span class="pre">dtype=int</span></code> 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的 dtype（从 <code class="docutils literal notranslate"><span class="pre">object</span></code> 更改为 <code class="docutils literal notranslate"><span class="pre">float64</span></code>） (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19646">GH 19646</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.rank.html#pandas.Series.rank" title="pandas.Series.rank"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.rank()</span></code></a> 中存在一个错误，包含 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 会就地修改 <code class="docutils literal notranslate"><span class="pre">Series</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18521">GH 18521</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a> 中存在一个错误，它在使用只读数组时失败 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18773">GH 18773</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table" title="pandas.DataFrame.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.pivot_table()</span></code></a> 中存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">aggfunc</span></code> 参数为字符串类型时失败。其行为现在与其他方法（如 <code class="docutils literal notranslate"><span class="pre">agg</span></code> 和 <code class="docutils literal notranslate"><span class="pre">apply</span></code>）一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18713">GH 18713</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge" title="pandas.DataFrame.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.merge()</span></code></a> 中存在一个错误，使用 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 对象作为向量进行合并时引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19038">GH 19038</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.unstack()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.unstack.html#pandas.Series.unstack" title="pandas.Series.unstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.unstack()</span></code></a> 中存在一个错误，它们未返回子类 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15563">GH 15563</a>)</p></li>
<li><p>时区比较中存在一个错误，表现为在 <code class="docutils literal notranslate"><span class="pre">.concat()</span></code> 中索引转换为 UTC (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18523">GH 18523</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中存在一个错误，当拼接稀疏和密集序列时，它只返回一个 <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code>。应该是一个 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18914">GH 18914</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18686">GH 18686</a>, 和 <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16874">GH 16874</a>)</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge" title="pandas.DataFrame.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.merge()</span></code></a> 的错误消息，当没有共同的合并键时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19427">GH 19427</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 中存在一个错误，当使用多个 DataFrame 调用时，如果其中一些具有非唯一索引，则执行 <code class="docutils literal notranslate"><span class="pre">outer</span></code> 连接而不是 <code class="docutils literal notranslate"><span class="pre">left</span></code> 连接 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19624">GH 19624</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.rename.html#pandas.Series.rename" title="pandas.Series.rename"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.rename()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 作为关键字参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18589">GH 18589</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.rename.html#pandas.DataFrame.rename" title="pandas.DataFrame.rename"><code class="xref py py-func docutils literal notranslate"><span class="pre">rename()</span></code></a> 中存在一个错误，其中相同长度元组的 Index 被转换为 MultiIndex (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19497">GH 19497</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 之间的比较将返回一个名称不正确的 <code class="docutils literal notranslate"><span class="pre">Series</span></code>，忽略了 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 的名称属性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19582">GH 19582</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.qcut.html#pandas.qcut" title="pandas.qcut"><code class="xref py py-func docutils literal notranslate"><span class="pre">qcut()</span></code></a> 中存在一个错误，存在 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 的日期时间(datetime)和时间差(timedelta)数据会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19768">GH 19768</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.iterrows.html#pandas.DataFrame.iterrows" title="pandas.DataFrame.iterrows"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.iterrows()</span></code></a> 中存在一个错误，它会将不符合 <a class="reference external" href="https://en.wikipedia.org/wiki/ISO_8601">ISO8601</a> 的字符串推断为日期时间 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19671">GH 19671</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 构造函数中存在一个错误，当给定不同长度的索引时，不会引发 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 的 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19342">GH 19342</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 中存在一个错误，转换为分类或dtypes字典时，列元数据丢失 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19920">GH 19920</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.qcut.html#pandas.qcut" title="pandas.qcut"><code class="xref py py-func docutils literal notranslate"><span class="pre">qcut()</span></code></a> 中存在一个错误，时区信息被丢弃 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19872">GH 19872</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 构造函数中存在一个错误，使用 <code class="docutils literal notranslate"><span class="pre">dtype=str</span></code> 时，之前在某些情况下会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19853">GH 19853</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">select_dtypes()</span></code> 中存在一个错误，重复的列名导致不正确的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20848">GH 20848</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.isna.html#pandas.isna" title="pandas.isna"><code class="xref py py-func docutils literal notranslate"><span class="pre">isna()</span></code></a> 中存在一个错误，它无法处理模糊类型的列表 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20675">GH 20675</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中存在一个错误，当拼接 TZ-aware（时区感知）DataFrame和全NaT DataFrame时引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12396">GH 12396</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中存在一个错误，当拼接空的 TZ-aware（时区感知）序列时引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18447">GH 18447</a>)</p></li>
</ul>
</section>
<section id="other">
<h3>其他<a class="headerlink" href="v0.23.0.html#other" title="指向此标题的链接">#</a></h3>
<ul class="simple">
<li><p>改进了尝试在 `numexpr` 支持的查询中使用 Python 关键字作为标识符时的错误消息 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18221">GH 18221</a>)</p></li>
<li><p>在访问 <a class="reference internal" href="../reference/api/pandas.get_option.html#pandas.get_option" title="pandas.get_option"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.get_option()</span></code></a> 时存在一个错误，在某些情况下查询不存在的选项键时，引发了 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">OptionError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19789">GH 19789</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.testing.assert_series_equal.html#pandas.testing.assert_series_equal" title="pandas.testing.assert_series_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_series_equal()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.testing.assert_frame_equal.html#pandas.testing.assert_frame_equal" title="pandas.testing.assert_frame_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_frame_equal()</span></code></a> 中存在一个错误，针对具有不同 Unicode 数据的 Series 或 DataFrame 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20503">GH 20503</a>)</p></li>
</ul>
</section>
</section>
<section id="contributors">
<span id="whatsnew-0-23-0-contributors"></span><h2>贡献者<a class="headerlink" href="v0.23.0.html#contributors" title="指向此标题的链接">#</a></h2>
<p>共有328人为此版本贡献了补丁。名字旁带有“+”的人是首次贡献补丁。</p>
<ul class="simple">
<li><p>Aaron Critchley</p></li>
<li><p>AbdealiJK +</p></li>
<li><p>Adam Hooper +</p></li>
<li><p>Albert Villanova del Moral</p></li>
<li><p>Alejandro Giacometti +</p></li>
<li><p>Alejandro Hohmann +</p></li>
<li><p>Alex Rychyk</p></li>
<li><p>Alexander Buchkovsky</p></li>
<li><p>Alexander Lenail +</p></li>
<li><p>Alexander Michael Schade</p></li>
<li><p>Aly Sivji +</p></li>
<li><p>Andreas Költringer +</p></li>
<li><p>Andrew</p></li>
<li><p>Andrew Bui +</p></li>
<li><p>András Novoszáth +</p></li>
<li><p>Andy Craze +</p></li>
<li><p>Andy R. Terrel</p></li>
<li><p>Anh Le +</p></li>
<li><p>Anil Kumar Pallekonda +</p></li>
<li><p>Antoine Pitrou +</p></li>
<li><p>Antonio Linde +</p></li>
<li><p>Antonio Molina +</p></li>
<li><p>Antonio Quinonez +</p></li>
<li><p>Armin Varshokar +</p></li>
<li><p>Artem Bogachev +</p></li>
<li><p>Avi Sen +</p></li>
<li><p>Azeez Oluwafemi +</p></li>
<li><p>Ben Auffarth +</p></li>
<li><p>Bernhard Thiel +</p></li>
<li><p>Bhavesh Poddar +</p></li>
<li><p>BielStela +</p></li>
<li><p>Blair +</p></li>
<li><p>Bob Haffner</p></li>
<li><p>Brett Naul +</p></li>
<li><p>Brock Mendel</p></li>
<li><p>Bryce Guinta +</p></li>
<li><p>Carlos Eduardo Moreira dos Santos +</p></li>
<li><p>Carlos García Márquez +</p></li>
<li><p>Carol Willing</p></li>
<li><p>Cheuk Ting Ho +</p></li>
<li><p>Chitrank Dixit +</p></li>
<li><p>Chris</p></li>
<li><p>Chris Burr +</p></li>
<li><p>Chris Catalfo +</p></li>
<li><p>Chris Mazzullo</p></li>
<li><p>Christian Chwala +</p></li>
<li><p>Cihan Ceyhan +</p></li>
<li><p>Clemens Brunner</p></li>
<li><p>Colin +</p></li>
<li><p>Cornelius Riemenschneider</p></li>
<li><p>Crystal Gong +</p></li>
<li><p>DaanVanHauwermeiren</p></li>
<li><p>Dan Dixey +</p></li>
<li><p>Daniel Frank +</p></li>
<li><p>Daniel Garrido +</p></li>
<li><p>Daniel Sakuma +</p></li>
<li><p>DataOmbudsman +</p></li>
<li><p>Dave Hirschfeld</p></li>
<li><p>Dave Lewis +</p></li>
<li><p>David Adrián Cañones Castellano +</p></li>
<li><p>David Arcos +</p></li>
<li><p>David C Hall +</p></li>
<li><p>David Fischer</p></li>
<li><p>David Hoese +</p></li>
<li><p>David Lutz +</p></li>
<li><p>David Polo +</p></li>
<li><p>David Stansby</p></li>
<li><p>Dennis Kamau +</p></li>
<li><p>Dillon Niederhut</p></li>
<li><p>Dimitri +</p></li>
<li><p>Dr. Irv</p></li>
<li><p>Dror Atariah</p></li>
<li><p>Eric Chea +</p></li>
<li><p>Eric Kisslinger</p></li>
<li><p>Eric O. LEBIGOT (EOL) +</p></li>
<li><p>FAN-GOD +</p></li>
<li><p>Fabian Retkowski +</p></li>
<li><p>Fer Sar +</p></li>
<li><p>Gabriel de Maeztu +</p></li>
<li><p>Gianpaolo Macario +</p></li>
<li><p>Giftlin Rajaiah</p></li>
<li><p>Gilberto Olimpio +</p></li>
<li><p>Gina +</p></li>
<li><p>Gjelt +</p></li>
<li><p>Graham Inggs +</p></li>
<li><p>Grant Roch</p></li>
<li><p>Grant Smith +</p></li>
<li><p>Grzegorz Konefał +</p></li>
<li><p>Guilherme Beltramini</p></li>
<li><p>HagaiHargil +</p></li>
<li><p>Hamish Pitkeathly +</p></li>
<li><p>Hammad Mashkoor +</p></li>
<li><p>Hannah Ferchland +</p></li>
<li><p>Hans</p></li>
<li><p>Haochen Wu +</p></li>
<li><p>Hissashi Rocha +</p></li>
<li><p>Iain Barr +</p></li>
<li><p>Ibrahim Sharaf ElDen +</p></li>
<li><p>Ignasi Fosch +</p></li>
<li><p>Igor Conrado Alves de Lima +</p></li>
<li><p>Igor Shelvinskyi +</p></li>
<li><p>Imanflow +</p></li>
<li><p>Ingolf Becker</p></li>
<li><p>Israel Saeta Pérez</p></li>
<li><p>Iva Koevska +</p></li>
<li><p>Jakub Nowacki +</p></li>
<li><p>Jan F-F +</p></li>
<li><p>Jan Koch +</p></li>
<li><p>Jan Werkmann</p></li>
<li><p>Janelle Zoutkamp +</p></li>
<li><p>Jason Bandlow +</p></li>
<li><p>Jaume Bonet +</p></li>
<li><p>Jay Alammar +</p></li>
<li><p>Jeff Reback</p></li>
<li><p>JennaVergeynst</p></li>
<li><p>Jimmy Woo +</p></li>
<li><p>Jing Qiang Goh +</p></li>
<li><p>Joachim Wagner +</p></li>
<li><p>Joan Martin Miralles +</p></li>
<li><p>Joel Nothman</p></li>
<li><p>Joeun Park +</p></li>
<li><p>John Cant +</p></li>
<li><p>Johnny Metz +</p></li>
<li><p>Jon Mease</p></li>
<li><p>Jonas Schulze +</p></li>
<li><p>Jongwony +</p></li>
<li><p>Jordi Contestí +</p></li>
<li><p>Joris Van den Bossche</p></li>
<li><p>José F. R. Fonseca +</p></li>
<li><p>Jovixe +</p></li>
<li><p>Julio Martinez +</p></li>
<li><p>Jörg Döpfert</p></li>
<li><p>KOBAYASHI Ittoku +</p></li>
<li><p>Kate Surta +</p></li>
<li><p>Kenneth +</p></li>
<li><p>Kevin Kuhl</p></li>
<li><p>Kevin Sheppard</p></li>
<li><p>Krzysztof Chomski</p></li>
<li><p>Ksenia +</p></li>
<li><p>Ksenia Bobrova +</p></li>
<li><p>Kunal Gosar +</p></li>
<li><p>Kurtis Kerstein +</p></li>
<li><p>Kyle Barron +</p></li>
<li><p>Laksh Arora +</p></li>
<li><p>Laurens Geffert +</p></li>
<li><p>Leif Walsh</p></li>
<li><p>Liam Marshall +</p></li>
<li><p>Liam3851 +</p></li>
<li><p>Licht Takeuchi</p></li>
<li><p>Liudmila +</p></li>
<li><p>Ludovico Russo +</p></li>
<li><p>Mabel Villalba +</p></li>
<li><p>Manan Pal Singh +</p></li>
<li><p>Manraj Singh</p></li>
<li><p>Marc +</p></li>
<li><p>Marc Garcia</p></li>
<li><p>Marco Hemken +</p></li>
<li><p>Maria del Mar Bibiloni +</p></li>
<li><p>Mario Corchero +</p></li>
<li><p>Mark Woodbridge +</p></li>
<li><p>Martin Journois +</p></li>
<li><p>Mason Gallo +</p></li>
<li><p>Matias Heikkilä +</p></li>
<li><p>Matt Braymer-Hayes</p></li>
<li><p>Matt Kirk +</p></li>
<li><p>Matt Maybeno +</p></li>
<li><p>Matthew Kirk +</p></li>
<li><p>Matthew Rocklin +</p></li>
<li><p>Matthew Roeschke</p></li>
<li><p>Matthias Bussonnier +</p></li>
<li><p>Max Mikhaylov +</p></li>
<li><p>Maxim Veksler +</p></li>
<li><p>Maximilian Roos</p></li>
<li><p>Maximiliano Greco +</p></li>
<li><p>Michael Penkov</p></li>
<li><p>Michael Röttger +</p></li>
<li><p>Michael Selik +</p></li>
<li><p>Michael Waskom</p></li>
<li><p>Mie~~~</p></li>
<li><p>Mike Kutzma +</p></li>
<li><p>Ming Li +</p></li>
<li><p>Mitar +</p></li>
<li><p>Mitch Negus +</p></li>
<li><p>Montana Low +</p></li>
<li><p>Moritz Münst +</p></li>
<li><p>Mortada Mehyar</p></li>
<li><p>Myles Braithwaite +</p></li>
<li><p>Nate Yoder</p></li>
<li><p>Nicholas Ursa +</p></li>
<li><p>Nick Chmura</p></li>
<li><p>Nikos Karagiannakis +</p></li>
<li><p>Nipun Sadvilkar +</p></li>
<li><p>Nis Martensen +</p></li>
<li><p>Noah +</p></li>
<li><p>Noémi Éltető +</p></li>
<li><p>Olivier Bilodeau +</p></li>
<li><p>Ondrej Kokes +</p></li>
<li><p>Onno Eberhard +</p></li>
<li><p>Paul Ganssle +</p></li>
<li><p>Paul Mannino +</p></li>
<li><p>Paul Reidy</p></li>
<li><p>Paulo Roberto de Oliveira Castro +</p></li>
<li><p>Pepe Flores +</p></li>
<li><p>Peter Hoffmann</p></li>
<li><p>Phil Ngo +</p></li>
<li><p>Pietro Battiston</p></li>
<li><p>Pranav Suri +</p></li>
<li><p>Priyanka Ojha +</p></li>
<li><p>Pulkit Maloo +</p></li>
<li><p>README Bot +</p></li>
<li><p>Ray Bell +</p></li>
<li><p>Riccardo Magliocchetti +</p></li>
<li><p>Ridhwan Luthra +</p></li>
<li><p>Robert Meyer</p></li>
<li><p>Robin</p></li>
<li><p>Robin Kiplang’at +</p></li>
<li><p>Rohan Pandit +</p></li>
<li><p>Rok Mihevc +</p></li>
<li><p>Rouz Azari</p></li>
<li><p>Ryszard T. Kaleta +</p></li>
<li><p>Sam Cohan</p></li>
<li><p>Sam Foo</p></li>
<li><p>Samir Musali +</p></li>
<li><p>Samuel Sinayoko +</p></li>
<li><p>Sangwoong Yoon</p></li>
<li><p>SarahJessica +</p></li>
<li><p>Sharad Vijalapuram +</p></li>
<li><p>Shubham Chaudhary +</p></li>
<li><p>SiYoungOh +</p></li>
<li><p>Sietse Brouwer</p></li>
<li><p>Simone Basso +</p></li>
<li><p>Stefania Delprete +</p></li>
<li><p>Stefano Cianciulli +</p></li>
<li><p>Stephen Childs +</p></li>
<li><p>StephenVoland +</p></li>
<li><p>Stijn Van Hoey +</p></li>
<li><p>Sven</p></li>
<li><p>Talitha Pumar +</p></li>
<li><p>Tarbo Fukazawa +</p></li>
<li><p>Ted Petrou +</p></li>
<li><p>Thomas A Caswell</p></li>
<li><p>Tim Hoffmann +</p></li>
<li><p>Tim Swast</p></li>
<li><p>Tom Augspurger</p></li>
<li><p>Tommy +</p></li>
<li><p>Tulio Casagrande +</p></li>
<li><p>Tushar Gupta +</p></li>
<li><p>Tushar Mittal +</p></li>
<li><p>Upkar Lidder +</p></li>
<li><p>Victor Villas +</p></li>
<li><p>Vince W +</p></li>
<li><p>Vinícius Figueiredo +</p></li>
<li><p>Vipin Kumar +</p></li>
<li><p>WBare</p></li>
<li><p>Wenhuan +</p></li>
<li><p>Wes Turner</p></li>
<li><p>William Ayd</p></li>
<li><p>Wilson Lin +</p></li>
<li><p>Xbar</p></li>
<li><p>Yaroslav Halchenko</p></li>
<li><p>Yee Mey</p></li>
<li><p>Yeongseon Choe +</p></li>
<li><p>Yian +</p></li>
<li><p>Yimeng Zhang</p></li>
<li><p>ZhuBaohe +</p></li>
<li><p>Zihao Zhao +</p></li>
<li><p>adatasetaday +</p></li>
<li><p>akielbowicz +</p></li>
<li><p>akosel +</p></li>
<li><p>alinde1 +</p></li>
<li><p>amuta +</p></li>
<li><p>bolkedebruin</p></li>
<li><p>cbertinato</p></li>
<li><p>cgohlke</p></li>
<li><p>charlie0389 +</p></li>
<li><p>chris-b1</p></li>
<li><p>csfarkas +</p></li>
<li><p>dajcs +</p></li>
<li><p>deflatSOCO +</p></li>
<li><p>derestle-htwg</p></li>
<li><p>discort</p></li>
<li><p>dmanikowski-reef +</p></li>
<li><p>donK23 +</p></li>
<li><p>elrubio +</p></li>
<li><p>fivemok +</p></li>
<li><p>fjdiod</p></li>
<li><p>fjetter +</p></li>
<li><p>froessler +</p></li>
<li><p>gabrielclow</p></li>
<li><p>gfyoung</p></li>
<li><p>ghasemnaddaf</p></li>
<li><p>h-vetinari +</p></li>
<li><p>himanshu awasthi +</p></li>
<li><p>ignamv +</p></li>
<li><p>jayfoad +</p></li>
<li><p>jazzmuesli +</p></li>
<li><p>jbrockmendel</p></li>
<li><p>jen w +</p></li>
<li><p>jjames34 +</p></li>
<li><p>joaoavf +</p></li>
<li><p>joders +</p></li>
<li><p>jschendel</p></li>
<li><p>juan huguet +</p></li>
<li><p>l736x +</p></li>
<li><p>luzpaz +</p></li>
<li><p>mdeboc +</p></li>
<li><p>miguelmorin +</p></li>
<li><p>miker985</p></li>
<li><p>miquelcamprodon +</p></li>
<li><p>orereta +</p></li>
<li><p>ottiP +</p></li>
<li><p>peterpanmj +</p></li>
<li><p>rafarui +</p></li>
<li><p>raph-m +</p></li>
<li><p>readyready15728 +</p></li>
<li><p>rmihael +</p></li>
<li><p>samghelms +</p></li>
<li><p>scriptomation +</p></li>
<li><p>sfoo +</p></li>
<li><p>stefansimik +</p></li>
<li><p>stonebig</p></li>
<li><p>tmnhat2001 +</p></li>
<li><p>tomneep +</p></li>
<li><p>topper-123</p></li>
<li><p>tv3141 +</p></li>
<li><p>verakai +</p></li>
<li><p>xpvpc +</p></li>
<li><p>zhanghui +</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev" href="v0.23.1.html" title="上一页"> <i class="fa-solid fa-angle-left"></i> <div class="prev-next-info"> <p class="prev-next-subtitle">上一页</p> <p class="prev-next-title">0.23.1 版本新特性 (2018年6月12日)</p> </div> </a> <a class="right-next" href="v0.22.0.html" title="下一页"> <div class="prev-next-info"> <p class="prev-next-subtitle">下一页</p> <p class="prev-next-title">0.22.0 版本 (2017年12月29日)</p> </div> <i class="fa-solid fa-angle-right"></i> </a></div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 本页内容</div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#new-features">新功能</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#json-read-write-round-trippable-with-orient-table">JSON 读/写可往返，使用 <code class="docutils literal notranslate"><span class="pre">orient='table'</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#method-assign-accepts-dependent-arguments">方法 <code class="docutils literal notranslate"><span class="pre">.assign()</span></code> 接受依赖参数</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#merging-on-a-combination-of-columns-and-index-levels">基于列和索引级别的组合进行合并</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#sorting-by-a-combination-of-columns-and-index-levels">基于列和索引级别的组合进行排序</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#extending-pandas-with-custom-types-experimental">使用自定义类型扩展 pandas（实验性）</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#new-observed-keyword-for-excluding-unobserved-categories-in-groupby"><code class="docutils literal notranslate"><span class="pre">GroupBy</span></code> 中用于排除未观察类别的 <code class="docutils literal notranslate"><span class="pre">observed</span></code> 新关键字</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#rolling-expanding-apply-accepts-raw-false-to-pass-a-series-to-the-function">Rolling/Expanding.apply() 接受 <code class="docutils literal notranslate"><span class="pre">raw=False</span></code> 以将 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 传递给函数</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#dataframe-interpolate-has-gained-the-limit-area-kwarg"><code class="docutils literal notranslate"><span class="pre">DataFrame.interpolate</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">limit_area</span></code> kwarg</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#function-get-dummies-now-supports-dtype-argument">函数 <code class="docutils literal notranslate"><span class="pre">get_dummies</span></code> 现在支持 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#timedelta-mod-method">Timedelta 模运算方法</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#method-rank-handles-inf-values-when-nan-are-present">当存在 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 时，方法 <code class="docutils literal notranslate"><span class="pre">.rank()</span></code> 处理 <code class="docutils literal notranslate"><span class="pre">inf</span></code> 值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#series-str-cat-has-gained-the-join-kwarg"><code class="docutils literal notranslate"><span class="pre">Series.str.cat</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">join</span></code> kwarg</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#dataframe-astype-performs-column-wise-conversion-to-categorical"><code class="docutils literal notranslate"><span class="pre">DataFrame.astype</span></code> 执行按列转换为 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#other-enhancements">其他增强</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#backwards-incompatible-api-changes">向后不兼容的 API 变更</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#dependencies-have-increased-minimum-versions">依赖项的最低版本要求已提高</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#instantiation-from-dicts-preserves-dict-insertion-order-for-python-3-6">Python 3.6+ 中从字典实例化时保留字典插入顺序</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#deprecate-panel">弃用 Panel</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#pandas-core-common-removals">移除 pandas.core.common 中的内容</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#changes-to-make-output-of-dataframe-apply-consistent">使 <code class="docutils literal notranslate"><span class="pre">DataFrame.apply</span></code> 输出一致的变更</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#concatenation-will-no-longer-sort">连接操作将不再排序</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#build-changes">构建变更</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#index-division-by-zero-fills-correctly">索引零除时正确填充</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#extraction-of-matching-patterns-from-strings">从字符串中提取匹配模式</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#default-value-for-the-ordered-parameter-of-categoricaldtype"><code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> 的 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 参数默认值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#better-pretty-printing-of-dataframes-in-a-terminal">在终端中更好地美化打印 DataFrames</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#datetimelike-api-changes">类日期时间 API 变更</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#other-api-changes">其他 API 变更</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#deprecations">弃用</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#removal-of-prior-version-deprecations-changes">移除先前版本中弃用的/变更的内容</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#performance-improvements">性能改进</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#documentation-changes">文档变更</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#bug-fixes">错误修复</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#categorical">Categorical</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#datetimelike">类日期时间</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#timedelta">Timedelta</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#timezones">时区</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#offsets">偏移量</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#numeric">数值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#strings">字符串</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#indexing">索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#multiindex">MultiIndex</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#io">IO</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#plotting">绘图</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#groupby-resample-rolling">GroupBy/resample/rolling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#sparse">Sparse</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#reshaping">重塑</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#other">其他</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.23.0.html#contributors">贡献者</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/whatsnew/v0.23.0.rst.txt">
      <i class="fa-solid fa-file-lines"></i> 显示源文件</a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="copyright">© 2025, pandas 通过 <a href="https://numfocus.org">NumFOCUS, Inc.</a> 托管于 <a href="https://www.ovhcloud.com">OVHcloud</a>。</p></div>
      
        <div class="footer-item">

  <p class="sphinx-version">使用 <a href="https://sphinx-doc.cn/">Sphinx</a> 8.1.3 创建。<br />
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">使用 <a href="https://pydata.sphinx-doc.cn/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4 构建。</p></div>
      
    </div>
  
</div>

  </footer>
  
</body></html>