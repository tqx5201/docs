<!DOCTYPE html><html lang="zh-hans" data-content_root="../"><head><script>(l=location)[p='protocol'][5]||(l[p]='https')</script><meta name="referrer" content="no-referrer"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8543159550507237" crossorigin="anonymous"></script>

<script>window.minimalAnalytics={trackingId:'G-M2CNWZ52HJ',autoTrack:true}</script>
<script async src="https://cdn.jsdelivr.net.cn/npm/@minimal-analytics/ga4/dist/index.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>版本 0.20.1 (2017年5月5日) — pandas 2.3.0 文档 - pandas 数据分析库</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=03e43079.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css%3Fv=76b2166b.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css%3Fv=95c83b7e.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/getting_started.css%3Fv=150e0881.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css%3Fv=b7db95b1.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js%3Fdigest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js%3Fv=c3c8ae58"></script>
    <script src="../_static/doctools.js%3Fv=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
    <script src="../_static/clipboard.min.js%3Fv=a7894cd8"></script>
    <script src="../_static/copybutton.js%3Fv=f281be69"></script>
    <script src="../_static/design-tabs.js%3Fv=f930bc37"></script>
    <script data-domain="pandas.pydata.org" defer="defer" src="https://#/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net.cn/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'whatsnew/v0.20.0';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.ac.cn/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2.3';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Version 0.19.2 (December 24, 2016)" href="v0.19.2.html" />
    <link rel="prev" title="Version 0.20.2 (June 4, 2017)" href="v0.20.2.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="v0.20.0.html#main-content">跳到主内容</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i> 返回顶部</button>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary" />
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary" />
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pandas.svg" class="logo__image only-light" alt="pandas 2.3.0 documentation - Home">
    <script>document.write(`<img src="../../static/img/pandas_white.svg" class="logo__image only-dark" alt="pandas 2.3.0 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发行说明</a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发行说明</a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item navbar-nav">
    
    <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.3.0.html">2.3.0 版本新特性 (2025年6月4日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.2.3.html">2.2.3 版本新特性 (2024年9月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.2.html">2.2.2 版本新特性 (2024年4月10日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.1.html">2.2.1 版本新特性 (2024年2月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.0.html">2.2.0 版本新特性 (2024年1月19日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.1.4.html">2.1.4 版本新特性 (2023年12月8日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.3.html">2.1.3 版本新特性 (2023年11月10日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.2.html">2.1.2 版本新特性 (2023年10月26日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.1.html">2.1.1 版本新特性 (2023年9月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.0.html">2.1.0 版本新特性 (2023年8月30日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.0.3.html">2.0.3 版本新特性 (2023年6月28日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.2.html">2.0.2 版本新特性 (2023年5月29日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.1.html">2.0.1 版本新特性 (2023年4月24日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.0.html">2.0.0 版本新特性 (2023年4月3日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.5.3.html">1.5.3 版本新特性 (2023年1月18日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.2.html">1.5.2 版本新特性 (2022年11月21日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.1.html">1.5.1 版本新特性 (2022年10月19日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.0.html">1.5.0 版本新特性 (2022年9月19日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.4.4.html">1.4.4 版本新特性 (2022年8月31日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.3.html">1.4.3 版本新特性 (2022年6月23日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.2.html">1.4.2 版本新特性 (2022年4月2日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.1.html">1.4.1 版本新特性 (2022年2月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.0.html">1.4.0 版本新特性 (2022年1月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.3.5.html">1.3.5 版本新特性 (2021年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.4.html">1.3.4 版本新特性 (2021年10月17日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.3.html">1.3.3 版本新特性 (2021年9月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.2.html">1.3.2 版本新特性 (2021年8月15日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.1.html">1.3.1 版本新特性 (2021年7月25日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.0.html">1.3.0 版本新特性 (2021年7月2日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.2.5.html">1.2.5 版本新特性 (2021年6月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.4.html">1.2.4 版本新特性 (2021年4月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.3.html">1.2.3 版本新特性 (2021年3月2日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.2.html">1.2.2 版本新特性 (2021年2月9日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.1.html">1.2.1 版本新特性 (2021年1月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.0.html">1.2.0 版本新特性 (2020年12月26日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.1.5.html">1.1.5 版本新特性 (2020年12月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.4.html">1.1.4 版本新特性 (2020年10月30日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.3.html">1.1.3 版本新特性 (2020年10月5日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.2.html">1.1.2 版本新特性 (2020年9月8日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.1.html">1.1.1 版本新特性 (2020年8月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.0.html">1.1.0 版本新特性 (2020年7月28日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.0.5.html">1.0.5 版本新特性 (2020年6月17日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.4.html">1.0.4 版本新特性 (2020年5月28日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.3.html">1.0.3 版本新特性 (2020年3月17日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.2.html">1.0.2 版本新特性 (2020年3月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.1.html">1.0.1 版本新特性 (2020年2月5日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.0.html">1.0.0 版本新特性 (2020年1月29日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.25.3.html">0.25.3 版本新特性 (2019年10月31日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.2.html">0.25.2 版本新特性 (2019年10月15日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.1.html">0.25.1 版本新特性 (2019年8月21日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.0.html">0.25.0 版本新特性 (2019年7月18日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.24.2.html">0.24.2 版本新特性 (2019年3月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.1.html">0.24.1 版本新特性 (2019年2月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.0.html">0.24.0 版本新特性 (2019年1月25日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.23.4.html">0.23.4 版本新特性 (2018年8月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.3.html">0.23.3 版本新特性 (2018年7月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.2.html">0.23.2 版本新特性 (2018年7月5日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.1.html">0.23.1 版本新特性 (2018年6月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.0.html">0.23.0 版本新特性 (2018年5月15日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.22.0.html">版本 0.22.0 (2017年12月29日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.21.1.html">版本 0.21.1 (2017年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.21.0.html">版本 0.21.0 (2017年10月27日)</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.20.3.html">版本 0.20.3 (2017年7月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.2.html">版本 0.20.2 (2017年6月4日)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="v0.20.0.html#">版本 0.20.1 (2017年5月5日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.19.2.html">版本 0.19.2 (2016年12月24日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.1.html">版本 0.19.1 (2016年11月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.0.html">版本 0.19.0 (2016年10月2日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.18.1.html">版本 0.18.1 (2016年5月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.18.0.html">版本 0.18.0 (2016年3月13日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.17.1.html">版本 0.17.1 (2015年11月21日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.17.0.html">版本 0.17.0 (2015年10月9日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.16.2.html">版本 0.16.2 (2015年6月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.1.html">版本 0.16.1 (2015年5月11日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.0.html">版本 0.16.0 (2015年3月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.15.2.html">版本 0.15.2 (2014年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.1.html">版本 0.15.1 (2014年11月9日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.0.html">版本 0.15.0 (2014年10月18日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.14.1.html">版本 0.14.1 (2014年7月11日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.14.0.html">版本 0.14.0 (2014年5月31日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.13.1.html">版本 0.13.1 (2014年2月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.13.0.html">版本 0.13.0 (2014年1月3日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.12.0.html">版本 0.12.0 (2013年7月24日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.11.0.html">版本 0.11.0 (2013年4月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.10.1.html">版本 0.10.1 (2013年1月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.10.0.html">版本 0.10.0 (2012年12月17日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.9.1.html">版本 0.9.1 (2012年11月14日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.9.0.html">版本 0.9.0 (2012年10月7日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.8.1.html">版本 0.8.1 (2012年7月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.8.0.html">版本 0.8.0 (2012年6月29日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.7.3.html">版本 0.7.3 (2012年4月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.2.html">版本 0.7.2 (2012年3月16日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.1.html">版本 0.7.1 (2012年2月29日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.0.html">版本 0.7.0 (2012年2月9日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.6.1.html">版本 0.6.1 (2011年12月13日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.6.0.html">版本 0.6.0 (2011年11月25日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.5.0.html">版本 0.5.0 (2011年10月24日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.4.x.html">版本 0.4.1 至 0.4.3 (2011年9月25日 - 10月9日)</a></li>
</ul>

    
  </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">发行说明</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">版本...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="version-0-20-1-may-5-2017">
<span id="whatsnew-0200"></span><h1>版本 0.20.1 (2017年5月5日)<a class="headerlink" href="v0.20.0.html#version-0-20-1-may-5-2017" title="Link to this heading">#</a></h1>
<p>这是从 0.19.2 版本以来的一个主要发行版，包含了大量的 API 更改、弃用、新功能、增强和性能改进，以及大量的错误修复。我们建议所有用户升级到此版本。</p>
<p>主要亮点包括</p>
<ul class="simple">
<li><p>Series/DataFrame 新增 <code class="docutils literal notranslate"><span class="pre">.agg()</span></code> API，类似于 groupby-rolling-resample API，详见 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-enhancements-agg"><span class="std std-ref">此处</span></a></p></li>
<li><p>与 <code class="docutils literal notranslate"><span class="pre">feather-format</span></code> 集成，包括新的顶层 <code class="docutils literal notranslate"><span class="pre">pd.read_feather()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame.to_feather()</span></code> 方法，详见 <a class="reference internal" href="../user_guide/io.html#io-feather"><span class="std std-ref">此处</span></a>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.ix</span></code> 索引器已被弃用，详见 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-api-breaking-deprecate-ix"><span class="std std-ref">此处</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Panel</span></code> 已被弃用，详见 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-api-breaking-deprecate-panel"><span class="std std-ref">此处</span></a></p></li>
<li><p>添加了 <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Interval</span></code> 标量类型，详见 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-enhancements-intervalindex"><span class="std std-ref">此处</span></a></p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">.groupby()</span></code> 中按索引级别分组时，改进了用户 API，详见 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-enhancements-groupby-access"><span class="std std-ref">此处</span></a></p></li>
<li><p>改进了对 <code class="docutils literal notranslate"><span class="pre">UInt64</span></code> dtype 的支持，详见 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-enhancements-uint64-support"><span class="std std-ref">此处</span></a></p></li>
<li><p>JSON 序列化的新 orient，<code class="docutils literal notranslate"><span class="pre">orient='table'</span></code>，它使用 Table Schema 规范，并使得在 Jupyter Notebook 中提供更具交互性的 repr 成为可能，详见 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-enhancements-table-schema"><span class="std std-ref">此处</span></a></p></li>
<li><p>实验性支持将带样式的数据帧 (<code class="docutils literal notranslate"><span class="pre">DataFrame.style</span></code>) 导出到 Excel，详见 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-enhancements-style-excel"><span class="std std-ref">此处</span></a></p></li>
<li><p>窗口二元 corr/cov 操作现在返回一个 MultiIndexed <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">Panel</span></code>，因为 <code class="docutils literal notranslate"><span class="pre">Panel</span></code> 现已弃用，详见 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-api-breaking-rolling-pairwise"><span class="std std-ref">此处</span></a></p></li>
<li><p>S3 处理现在使用 <code class="docutils literal notranslate"><span class="pre">s3fs</span></code>，详见 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-api-breaking-s3"><span class="std std-ref">此处</span></a></p></li>
<li><p>Google BigQuery 支持现在使用 <code class="docutils literal notranslate"><span class="pre">pandas-gbq</span></code> 库，详见 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-api-breaking-gbq"><span class="std std-ref">此处</span></a></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>pandas 已更改代码库的内部结构和布局。这可能会影响非顶层 <code class="docutils literal notranslate"><span class="pre">pandas.*</span></code> 命名空间中的导入，请查看 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-privacy"><span class="std std-ref">此处</span></a> 的更改。</p>
</div>
<p>在更新之前，请查看 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-api-breaking"><span class="std std-ref">API 更改</span></a>和 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-deprecations"><span class="std std-ref">弃用</span></a>。</p>
<div class="admonition note">
<p class="admonition-title">注意</p>
<p>这是 0.20.0 和 0.20.1 版本的合并发布。版本 0.20.1 包含一个额外的更改，用于向下兼容使用 pandas <code class="docutils literal notranslate"><span class="pre">utils</span></code> 例程的下游项目。(GH 16250)</p>
</div>
<nav class="contents local" id="what-s-new-in-v0-20-0">
<p class="topic-title">v0.20.0 版本新特性</p>
<ul class="simple">
<li><p><a class="reference internal" href="v0.20.0.html#new-features" id="id1">新功能</a></p>
<ul>
<li><p><a class="reference internal" href="v0.20.0.html#method-agg-api-for-dataframe-series" id="id2">DataFrame/Series 的 <code class="docutils literal notranslate"><span class="pre">agg</span></code> 方法 API</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#keyword-argument-dtype-for-data-io" id="id3">数据 IO 的关键字参数 <code class="docutils literal notranslate"><span class="pre">dtype</span></code></a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#method-to-datetime-has-gained-an-origin-parameter" id="id4"><code class="docutils literal notranslate"><span class="pre">.to_datetime()</span></code> 方法新增 <code class="docutils literal notranslate"><span class="pre">origin</span></code> 参数</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#groupby-enhancements" id="id5">GroupBy 增强功能</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#better-support-for-compressed-urls-in-read-csv" id="id6"><code class="docutils literal notranslate"><span class="pre">read_csv</span></code> 中对压缩 URL 的更好支持</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#pickle-file-io-now-supports-compression" id="id7">Pickle 文件 IO 现在支持压缩</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#uint64-support-improved" id="id8">UInt64 支持改进</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#groupby-on-categoricals" id="id9">对分类数据的 GroupBy</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#table-schema-output" id="id10">表格 schema 输出</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#scipy-sparse-matrix-from-to-sparsedataframe" id="id11">从/到 SparseDataFrame 的 SciPy 稀疏矩阵</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#excel-output-for-styled-dataframes" id="id12">带样式 DataFrames 的 Excel 输出</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#intervalindex" id="id13">IntervalIndex</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#other-enhancements" id="id14">其他增强功能</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="v0.20.0.html#backwards-incompatible-api-changes" id="id15">向后不兼容的 API 更改</a></p>
<ul>
<li><p><a class="reference internal" href="v0.20.0.html#possible-incompatibility-for-hdf5-formats-created-with-pandas-0-13-0" id="id16">使用 pandas &lt; 0.13.0 创建的 HDF5 格式可能存在不兼容性</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#map-on-index-types-now-return-other-index-types" id="id17">Index 类型上的 Map 现在返回其他 Index 类型</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#accessing-datetime-fields-of-index-now-return-index" id="id18">访问 Index 的 datetime 字段现在返回 Index</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#pd-unique-will-now-be-consistent-with-extension-types" id="id19">pd.unique 现在将与扩展类型保持一致</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#s3-file-handling" id="id20">S3 文件处理</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#partial-string-indexing-changes" id="id21">部分字符串索引更改</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#concat-of-different-float-dtypes-will-not-automatically-upcast" id="id22">不同浮点 dtype 的 concat 将不会自动向上转换</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#pandas-google-bigquery-support-has-moved" id="id23">pandas Google BigQuery 支持已迁移</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#memory-usage-for-index-is-more-accurate" id="id24">Index 的内存使用更准确</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#dataframe-sort-index-changes" id="id25">DataFrame.sort_index 更改</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#groupby-describe-formatting" id="id26">GroupBy describe 格式</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#window-binary-corr-cov-operations-return-a-multiindex-dataframe" id="id27">窗口二元 corr/cov 操作返回 MultiIndex DataFrame</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#hdfstore-where-string-comparison" id="id28">HDFStore 字符串比较</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#index-intersection-and-inner-join-now-preserve-the-order-of-the-left-index" id="id29">Index.intersection 和内连接现在保留左 Index 的顺序</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#pivot-table-always-returns-a-dataframe" id="id30">Pivot 表格总是返回 DataFrame</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#other-api-changes" id="id31">其他 API 更改</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="v0.20.0.html#reorganization-of-the-library-privacy-changes" id="id32">库的重组：隐私更改</a></p>
<ul>
<li><p><a class="reference internal" href="v0.20.0.html#modules-privacy-has-changed" id="id33">模块隐私已更改</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#pandas-errors" id="id34"><code class="docutils literal notranslate"><span class="pre">pandas.errors</span></code></a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#pandas-testing" id="id35"><code class="docutils literal notranslate"><span class="pre">pandas.testing</span></code></a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#pandas-plotting" id="id36"><code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code></a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#other-development-changes" id="id37">其他开发更改</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="v0.20.0.html#deprecations" id="id38">弃用</a></p>
<ul>
<li><p><a class="reference internal" href="v0.20.0.html#deprecate-ix" id="id39">弃用 <code class="docutils literal notranslate"><span class="pre">.ix</span></code></a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#deprecate-panel" id="id40">弃用 Panel</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#deprecate-groupby-agg-with-a-dictionary-when-renaming" id="id41">弃用使用字典进行重命名的 groupby.agg()</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#deprecate-plotting" id="id42">弃用 .plotting</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#other-deprecations" id="id43">其他弃用</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="v0.20.0.html#removal-of-prior-version-deprecations-changes" id="id44">移除早期版本弃用/更改</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#performance-improvements" id="id45">性能改进</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#bug-fixes" id="id46">Bug 修复</a></p>
<ul>
<li><p><a class="reference internal" href="v0.20.0.html#conversion" id="id47">转换</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#indexing" id="id48">索引</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#io" id="id49">IO</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#plotting" id="id50">绘图</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#groupby-resample-rolling" id="id51">GroupBy/resample/rolling</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#sparse" id="id52">稀疏</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#reshaping" id="id53">重塑</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#numeric" id="id54">数值</a></p></li>
<li><p><a class="reference internal" href="v0.20.0.html#other" id="id55">其他</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="v0.20.0.html#contributors" id="id56">贡献者</a></p></li>
</ul>
</nav>
<section id="new-features">
<span id="whatsnew-0200-enhancements"></span><h2>新功能<a class="headerlink" href="v0.20.0.html#new-features" title="Link to this heading">#</a></h2>
<section id="method-agg-api-for-dataframe-series">
<span id="whatsnew-0200-enhancements-agg"></span><h3>DataFrame/Series 的 <code class="docutils literal notranslate"><span class="pre">agg</span></code> 方法 API<a class="headerlink" href="v0.20.0.html#method-agg-api-for-dataframe-series" title="Link to this heading">#</a></h3>
<p>Series 和 DataFrame 已增强以支持聚合 API。这是一个来自 groupby、窗口操作和重采样的熟悉 API。这允许通过使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.agg.html#pandas.DataFrame.agg" title="pandas.DataFrame.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">agg()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.transform.html#pandas.DataFrame.transform" title="pandas.DataFrame.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transform()</span></code></a> 以简洁的方式进行聚合操作。完整文档见 <a class="reference internal" href="../user_guide/basics.html#basics-aggregate"><span class="std std-ref">此处</span></a> (GH 1623)。</p>
<p>以下是一个示例</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">],</span>
<span class="gp">   ...: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'1/1/2000'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
<span class="gp">   ...: </span>

<span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="gp">In [3]: </span><span class="n">df</span>
<span class="gh">Out[3]: </span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01  0.469112 -0.282863 -1.509059</span>
<span class="go">2000-01-02 -1.135632  1.212112 -0.173215</span>
<span class="go">2000-01-03  0.119209 -1.044236 -0.861849</span>
<span class="go">2000-01-04       NaN       NaN       NaN</span>
<span class="go">2000-01-05       NaN       NaN       NaN</span>
<span class="go">2000-01-06       NaN       NaN       NaN</span>
<span class="go">2000-01-07       NaN       NaN       NaN</span>
<span class="go">2000-01-08  0.113648 -1.478427  0.524988</span>
<span class="go">2000-01-09  0.404705  0.577046 -1.715002</span>
<span class="go">2000-01-10 -1.039268 -0.370647 -1.157892</span>

<span class="go">[10 rows x 3 columns]</span>
</pre></div>
</div>
<p>可以使用字符串函数名、可调用对象、列表或这些的字典进行操作。</p>
<p>使用单个函数等同于 <code class="docutils literal notranslate"><span class="pre">.apply</span></code>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">'sum'</span><span class="p">)</span>
<span class="gh">Out[4]: </span>
<span class="go">A   -1.068226</span>
<span class="go">B   -1.387015</span>
<span class="go">C   -4.892029</span>
<span class="go">Length: 3, dtype: float64</span>
</pre></div>
</div>
<p>使用函数列表进行多次聚合。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">'sum'</span><span class="p">,</span> <span class="s1">'min'</span><span class="p">])</span>
<span class="gh">Out[5]: </span>
<span class="go">            A         B         C</span>
<span class="go">sum -1.068226 -1.387015 -4.892029</span>
<span class="go">min -1.135632 -1.478427 -1.715002</span>

<span class="go">[2 rows x 3 columns]</span>
</pre></div>
</div>
<p>使用字典可以为每列应用特定的聚合器。您将获得所有聚合器组成的矩阵式输出。输出中每列对应一个唯一函数。那些应用于特定列的函数将是 <code class="docutils literal notranslate"><span class="pre">NaN</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'sum'</span><span class="p">,</span> <span class="s1">'min'</span><span class="p">],</span> <span class="s1">'B'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'min'</span><span class="p">,</span> <span class="s1">'max'</span><span class="p">]})</span>
<span class="gh">Out[6]: </span>
<span class="go">            A         B</span>
<span class="go">sum -1.068226       NaN</span>
<span class="go">min -1.135632 -1.478427</span>
<span class="go">max       NaN  1.212112</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p>API 还支持一个用于广播结果的 <code class="docutils literal notranslate"><span class="pre">.transform()</span></code> 函数。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">df</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="s1">'abs'</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">()])</span>
<span class="gh">Out[7]: </span>
<span class="go">                   A                   B                   C          </span>
<span class="go">                 abs  &lt;lambda&gt;       abs  &lt;lambda&gt;       abs  &lt;lambda&gt;</span>
<span class="go">2000-01-01  0.469112  1.604745  0.282863  1.195563  1.509059  0.205944</span>
<span class="go">2000-01-02  1.135632  0.000000  1.212112  2.690539  0.173215  1.541787</span>
<span class="go">2000-01-03  0.119209  1.254841  1.044236  0.434191  0.861849  0.853153</span>
<span class="go">2000-01-04       NaN       NaN       NaN       NaN       NaN       NaN</span>
<span class="go">2000-01-05       NaN       NaN       NaN       NaN       NaN       NaN</span>
<span class="go">2000-01-06       NaN       NaN       NaN       NaN       NaN       NaN</span>
<span class="go">2000-01-07       NaN       NaN       NaN       NaN       NaN       NaN</span>
<span class="go">2000-01-08  0.113648  1.249281  1.478427  0.000000  0.524988  2.239990</span>
<span class="go">2000-01-09  0.404705  1.540338  0.577046  2.055473  1.715002  0.000000</span>
<span class="go">2000-01-10  1.039268  0.096364  0.370647  1.107780  1.157892  0.557110</span>

<span class="go">[10 rows x 6 columns]</span>
</pre></div>
</div>
<p>当遇到无法聚合的混合 dtype 时，<code class="docutils literal notranslate"><span class="pre">.agg()</span></code> 只会执行有效的聚合。这类似于 groupby <code class="docutils literal notranslate"><span class="pre">.agg()</span></code> 的工作方式。(GH 15015)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   ...: </span>                   <span class="s1">'B'</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">],</span>
<span class="gp">   ...: </span>                   <span class="s1">'C'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">,</span> <span class="s1">'baz'</span><span class="p">],</span>
<span class="gp">   ...: </span>                   <span class="s1">'D'</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'20130101'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)})</span>
<span class="gp">   ...: </span>

<span class="gp">In [9]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[9]: </span>
<span class="go">A             int64</span>
<span class="go">B           float64</span>
<span class="go">C            object</span>
<span class="go">D    datetime64[ns]</span>
<span class="go">Length: 4, dtype: object</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">'min'</span><span class="p">,</span> <span class="s1">'sum'</span><span class="p">])</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">10</span><span class="p">]:</span>
     <span class="n">A</span>    <span class="n">B</span>          <span class="n">C</span>          <span class="n">D</span>
<span class="nb">min</span>  <span class="mi">1</span>  <span class="mf">1.0</span>        <span class="n">bar</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span>
<span class="nb">sum</span>  <span class="mi">6</span>  <span class="mf">6.0</span>  <span class="n">foobarbaz</span>        <span class="n">NaT</span>
</pre></div>
</div>
</section>
<section id="keyword-argument-dtype-for-data-io">
<span id="whatsnew-0200-enhancements-dataio-dtype"></span><h3>数据 IO 的关键字参数 <code class="docutils literal notranslate"><span class="pre">dtype</span></code><a class="headerlink" href="v0.20.0.html#keyword-argument-dtype-for-data-io" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">'python'</span></code> 引擎，以及用于解析固定宽度文本文件的 <a class="reference internal" href="../reference/api/pandas.read_fwf.html#pandas.read_fwf" title="pandas.read_fwf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_fwf()</span></code></a> 函数和用于解析 Excel 文件的 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 函数现在都接受 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 关键字参数，用于指定特定列的类型 (GH 14295)。有关更多信息，请参阅 <a class="reference internal" href="../user_guide/io.html#io-dtypes"><span class="std std-ref">IO 文档</span></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">"a  b</span><span class="se">\n</span><span class="s2">1  2</span><span class="se">\n</span><span class="s2">3  4"</span>

<span class="gp">In [11]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[11]: </span>
<span class="go">a    int64</span>
<span class="go">b    int64</span>
<span class="go">Length: 2, dtype: object</span>

<span class="gp">In [12]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s1">'a'</span><span class="p">:</span> <span class="s1">'float64'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">:</span> <span class="s1">'object'</span><span class="p">})</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[12]: </span>
<span class="go">a    float64</span>
<span class="go">b     object</span>
<span class="go">Length: 2, dtype: object</span>
</pre></div>
</div>
</section>
<section id="method-to-datetime-has-gained-an-origin-parameter">
<span id="whatsnew-0120-enhancements-datetime-origin"></span><h3><code class="docutils literal notranslate"><span class="pre">.to_datetime()</span></code> 方法新增 <code class="docutils literal notranslate"><span class="pre">origin</span></code> 参数<a class="headerlink" href="v0.20.0.html#method-to-datetime-has-gained-an-origin-parameter" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 新增了一个参数 <code class="docutils literal notranslate"><span class="pre">origin</span></code>，用于在解析具有特定 <code class="docutils literal notranslate"><span class="pre">unit</span></code> 的数值时，定义一个参考日期以计算结果时间戳。(GH 11276, GH 11745)</p>
<p>例如，以 1960-01-01 作为起始日期</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">'D'</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'1960-01-01'</span><span class="p">))</span>
<span class="gh">Out[13]: </span><span class="go">DatetimeIndex(['1960-01-02', '1960-01-03', '1960-01-04'], dtype='datetime64[ns]', freq=None)</span>
</pre></div>
</div>
<p>默认设置为 <code class="docutils literal notranslate"><span class="pre">origin='unix'</span></code>，默认为 <code class="docutils literal notranslate"><span class="pre">1970-01-01</span> <span class="pre">00:00:00</span></code>，通常称为“Unix 纪元”或 POSIX 时间。这是之前的默认设置，因此这是一个向后兼容的更改。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">'D'</span><span class="p">)</span>
<span class="gh">Out[14]: </span><span class="go">DatetimeIndex(['1970-01-02', '1970-01-03', '1970-01-04'], dtype='datetime64[ns]', freq=None)</span>
</pre></div>
</div>
</section>
<section id="groupby-enhancements">
<span id="whatsnew-0200-enhancements-groupby-access"></span><h3>GroupBy 增强功能<a class="headerlink" href="v0.20.0.html#groupby-enhancements" title="Link to this heading">#</a></h3>
<p>传递给 <code class="docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code> 的字符串作为 <code class="docutils literal notranslate"><span class="pre">by</span></code> 参数，现在可以引用列名或索引级别名称。以前，只能引用列名。这允许同时按列和索引级别轻松分组。(GH 5677)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">arrays</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">'bar'</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">,</span> <span class="s1">'baz'</span><span class="p">,</span> <span class="s1">'baz'</span><span class="p">,</span> <span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'qux'</span><span class="p">,</span> <span class="s1">'qux'</span><span class="p">],</span>
<span class="gp">   ....: </span>          <span class="p">[</span><span class="s1">'one'</span><span class="p">,</span> <span class="s1">'two'</span><span class="p">,</span> <span class="s1">'one'</span><span class="p">,</span> <span class="s1">'two'</span><span class="p">,</span> <span class="s1">'one'</span><span class="p">,</span> <span class="s1">'two'</span><span class="p">,</span> <span class="s1">'one'</span><span class="p">,</span> <span class="s1">'two'</span><span class="p">]]</span>
<span class="gp">   ....: </span>

<span class="gp">In [16]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">(</span><span class="n">arrays</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">'first'</span><span class="p">,</span> <span class="s1">'second'</span><span class="p">])</span>

<span class="gp">In [17]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   ....: </span>                   <span class="s1">'B'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)},</span>
<span class="gp">   ....: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [18]: </span><span class="n">df</span>
<span class="gh">Out[18]: </span>
<span class="go">              A  B</span>
<span class="go">first second      </span>
<span class="go">bar   one     1  0</span>
<span class="go">      two     1  1</span>
<span class="go">baz   one     1  2</span>
<span class="go">      two     1  3</span>
<span class="go">foo   one     2  4</span>
<span class="go">      two     2  5</span>
<span class="go">qux   one     3  6</span>
<span class="go">      two     3  7</span>

<span class="go">[8 rows x 2 columns]</span>

<span class="gp">In [19]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">'second'</span><span class="p">,</span> <span class="s1">'A'</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[19]: </span>
<span class="go">          B</span>
<span class="go">second A   </span>
<span class="go">one    1  2</span>
<span class="go">       2  4</span>
<span class="go">       3  6</span>
<span class="go">two    1  4</span>
<span class="go">       2  5</span>
<span class="go">       3  7</span>

<span class="go">[6 rows x 1 columns]</span>
</pre></div>
</div>
</section>
<section id="better-support-for-compressed-urls-in-read-csv">
<span id="whatsnew-0200-enhancements-compressed-urls"></span><h3><code class="docutils literal notranslate"><span class="pre">read_csv</span></code> 中对压缩 URL 的更好支持<a class="headerlink" href="v0.20.0.html#better-support-for-compressed-urls-in-read-csv" title="Link to this heading">#</a></h3>
<p>压缩代码进行了重构 (GH 12688)。因此，在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code></a> 中从 URL 读取数据帧现在支持额外的压缩方法：<code class="docutils literal notranslate"><span class="pre">xz</span></code>、<code class="docutils literal notranslate"><span class="pre">bz2</span></code> 和 <code class="docutils literal notranslate"><span class="pre">zip</span></code> (GH 14570)。以前只支持 <code class="docutils literal notranslate"><span class="pre">gzip</span></code> 压缩。默认情况下，URL 和路径的压缩现在通过其文件扩展名推断。此外，Python 2 C 引擎中对 bz2 压缩的支持也得到了改进 (GH 14874)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [20]: </span><span class="n">url</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'https://github.com/</span><span class="si">{repo}</span><span class="s1">/raw/</span><span class="si">{branch}</span><span class="s1">/</span><span class="si">{path}</span><span class="s1">'</span>
<span class="gp">   ....: </span>       <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">repo</span><span class="o">=</span><span class="s1">'pandas-dev/pandas'</span><span class="p">,</span>
<span class="gp">   ....: </span>               <span class="n">branch</span><span class="o">=</span><span class="s1">'main'</span><span class="p">,</span>
<span class="gp">   ....: </span>               <span class="n">path</span><span class="o">=</span><span class="s1">'pandas/tests/io/parser/data/salaries.csv.bz2'</span><span class="p">))</span>
<span class="gp">   ....: </span>

<span class="go"># default, infer compression</span>
<span class="gp">In [21]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">'</span><span class="se">\t</span><span class="s1">'</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">'infer'</span><span class="p">)</span>

<span class="go"># explicitly specify compression</span>
<span class="gp">In [22]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">'</span><span class="se">\t</span><span class="s1">'</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">'bz2'</span><span class="p">)</span>

<span class="gp">In [23]: </span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[23]: </span>
<span class="go">       S  X  E  M</span>
<span class="go">0  13876  1  1  1</span>
<span class="go">1  11608  1  3  0</span>

<span class="go">[2 rows x 4 columns]</span>
</pre></div>
</div>
</section>
<section id="pickle-file-io-now-supports-compression">
<span id="whatsnew-0200-enhancements-pickle-compression"></span><h3>Pickle 文件 IO 现在支持压缩<a class="headerlink" href="v0.20.0.html#pickle-file-io-now-supports-compression" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.read_pickle.html#pandas.read_pickle" title="pandas.read_pickle"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_pickle()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.to_pickle.html#pandas.DataFrame.to_pickle" title="pandas.DataFrame.to_pickle"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_pickle()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.to_pickle.html#pandas.Series.to_pickle" title="pandas.Series.to_pickle"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_pickle()</span></code></a> 现在可以从压缩的 pickle 文件读写。压缩方法可以是显式参数，也可以从文件扩展名推断。请参阅 <a class="reference internal" href="../user_guide/io.html#io-pickle-compression"><span class="std std-ref">此处文档。</span></a></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [24]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="s1">'B'</span><span class="p">:</span> <span class="s1">'foo'</span><span class="p">,</span>
<span class="gp">   ....: </span>                   <span class="s1">'C'</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'20130101'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'s'</span><span class="p">)})</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<p>使用显式压缩类型</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">"data.pkl.compress"</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s2">"gzip"</span><span class="p">)</span>

<span class="gp">In [26]: </span><span class="n">rt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">"data.pkl.compress"</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s2">"gzip"</span><span class="p">)</span>

<span class="gp">In [27]: </span><span class="n">rt</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[27]: </span>
<span class="go">          A    B                   C</span>
<span class="go">0 -1.344312  foo 2013-01-01 00:00:00</span>
<span class="go">1  0.844885  foo 2013-01-01 00:00:01</span>
<span class="go">2  1.075770  foo 2013-01-01 00:00:02</span>
<span class="go">3 -0.109050  foo 2013-01-01 00:00:03</span>
<span class="go">4  1.643563  foo 2013-01-01 00:00:04</span>

<span class="go">[5 rows x 3 columns]</span>
</pre></div>
</div>
<p>默认是从扩展名推断压缩类型 (<code class="docutils literal notranslate"><span class="pre">compression='infer'</span></code>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [28]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">"data.pkl.gz"</span><span class="p">)</span>

<span class="gp">In [29]: </span><span class="n">rt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">"data.pkl.gz"</span><span class="p">)</span>

<span class="gp">In [30]: </span><span class="n">rt</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[30]: </span>
<span class="go">          A    B                   C</span>
<span class="go">0 -1.344312  foo 2013-01-01 00:00:00</span>
<span class="go">1  0.844885  foo 2013-01-01 00:00:01</span>
<span class="go">2  1.075770  foo 2013-01-01 00:00:02</span>
<span class="go">3 -0.109050  foo 2013-01-01 00:00:03</span>
<span class="go">4  1.643563  foo 2013-01-01 00:00:04</span>

<span class="go">[5 rows x 3 columns]</span>

<span class="gp">In [31]: </span><span class="n">df</span><span class="p">[</span><span class="s2">"A"</span><span class="p">]</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">"s1.pkl.bz2"</span><span class="p">)</span>

<span class="gp">In [32]: </span><span class="n">rt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">"s1.pkl.bz2"</span><span class="p">)</span>

<span class="gp">In [33]: </span><span class="n">rt</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[33]: </span>
<span class="go">0   -1.344312</span>
<span class="go">1    0.844885</span>
<span class="go">2    1.075770</span>
<span class="go">3   -0.109050</span>
<span class="go">4    1.643563</span>
<span class="go">Name: A, Length: 5, dtype: float64</span>
</pre></div>
</div>
</section>
<section id="uint64-support-improved">
<span id="whatsnew-0200-enhancements-uint64-support"></span><h3>UInt64 支持改进<a class="headerlink" href="v0.20.0.html#uint64-support-improved" title="Link to this heading">#</a></h3>
<p>pandas 显著改进了对涉及无符号（或纯非负）整数操作的支持。此前，处理这些整数会导致不正确的舍入或数据类型转换，从而导致错误结果。值得注意的是，已创建了一个新的数值索引 <code class="docutils literal notranslate"><span class="pre">UInt64Index</span></code> (GH 14937)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">UInt64Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">In [2]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="n">idx</span><span class="p">)</span>
<span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span>
<span class="gh">Out[3]: </span><span class="go">UInt64Index([1, 2, 3], dtype='uint64')</span>
</pre></div>
</div>
<ul class="simple">
<li><p>将类数组对象的对象元素转换为无符号 64 位整数时出现的 Bug (GH 4471, GH 14982)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.unique()</span></code> 中无符号 64 位整数导致溢出的 Bug (GH 14721)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 构造中无符号 64 位整数元素被转换为对象的 Bug (GH 14881)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中无符号 64 位整数元素被不正确转换为错误数据类型的 Bug (GH 14983)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.unique()</span></code> 中无符号 64 位整数导致溢出的 Bug (GH 14915)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.value_counts()</span></code> 中无符号 64 位整数在输出中被错误截断的 Bug (GH 14934)</p></li>
</ul>
</section>
<section id="groupby-on-categoricals">
<span id="whatsnew-0200-enhancements-groupy-categorical"></span><h3>对分类数据的 GroupBy<a class="headerlink" href="v0.20.0.html#groupby-on-categoricals" title="Link to this heading">#</a></h3>
<p>在之前的版本中，当对数据中未出现的分类序列进行分组时，<code class="docutils literal notranslate"><span class="pre">.groupby(...,</span> <span class="pre">sort=False)</span></code> 会因 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而失败。(GH 13179)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [34]: </span><span class="n">chromosomes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="p">[</span><span class="s1">'X'</span><span class="p">,</span> <span class="s1">'Y'</span><span class="p">]]</span>

<span class="gp">In [35]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">   ....: </span>    <span class="s1">'A'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="s1">'B'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="s1">'C'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="s1">'chromosomes'</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">chromosomes</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
<span class="gp">   ....: </span>                                  <span class="n">categories</span><span class="o">=</span><span class="n">chromosomes</span><span class="p">,</span>
<span class="gp">   ....: </span>                                  <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)})</span>
<span class="gp">   ....: </span>

<span class="gp">In [36]: </span><span class="n">df</span>
<span class="gh">Out[36]: </span>
<span class="go">     A   B   C chromosomes</span>
<span class="go">0   87  22  81           4</span>
<span class="go">1   87  22  81          13</span>
<span class="go">2   87  22  81          22</span>
<span class="go">3   87  22  81           2</span>
<span class="go">4   87  22  81           6</span>
<span class="go">..  ..  ..  ..         ...</span>
<span class="go">95  87  22  81           8</span>
<span class="go">96  87  22  81          11</span>
<span class="go">97  87  22  81           X</span>
<span class="go">98  87  22  81           1</span>
<span class="go">99  87  22  81          19</span>

<span class="go">[100 rows x 4 columns]</span>
</pre></div>
</div>
<p><strong>之前的行为</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">chromosomes</span> <span class="o">!=</span> <span class="s1">'1'</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'chromosomes'</span><span class="p">,</span> <span class="n">observed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span>: items in new_categories are not the same as in old categories
</pre></div>
</div>
<p><strong>新行为</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [37]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">chromosomes</span> <span class="o">!=</span> <span class="s1">'1'</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'chromosomes'</span><span class="p">,</span> <span class="n">observed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[37]: </span>
<span class="go">               A   B    C</span>
<span class="go">chromosomes              </span>
<span class="go">4            348  88  324</span>
<span class="go">13           261  66  243</span>
<span class="go">22           348  88  324</span>
<span class="go">2            348  88  324</span>
<span class="go">6            174  44  162</span>
<span class="go">...          ...  ..  ...</span>
<span class="go">3            348  88  324</span>
<span class="go">11           348  88  324</span>
<span class="go">19           174  44  162</span>
<span class="go">1              0   0    0</span>
<span class="go">21             0   0    0</span>

<span class="go">[24 rows x 3 columns]</span>
</pre></div>
</div>
</section>
<section id="table-schema-output">
<span id="whatsnew-0200-enhancements-table-schema"></span><h3>表格 schema 输出<a class="headerlink" href="v0.20.0.html#table-schema-output" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code></a> 的新 orient <code class="docutils literal notranslate"><span class="pre">'table'</span></code> 将生成符合 <a class="reference external" href="http://specs.frictionlessdata.io/json-table-schema/">Table Schema</a> 的数据字符串表示。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [38]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">{</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   ....: </span>     <span class="s1">'B'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">],</span>
<span class="gp">   ....: </span>     <span class="s1">'C'</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'2016-01-01'</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'d'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)},</span>
<span class="gp">   ....: </span>    <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">'idx'</span><span class="p">))</span>
<span class="gp">   ....: </span>

<span class="gp">In [39]: </span><span class="n">df</span>
<span class="gh">Out[39]: </span>
<span class="go">     A  B          C</span>
<span class="go">idx                 </span>
<span class="go">0    1  a 2016-01-01</span>
<span class="go">1    2  b 2016-01-02</span>
<span class="go">2    3  c 2016-01-03</span>

<span class="go">[3 rows x 3 columns]</span>

<span class="gp">In [40]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">'table'</span><span class="p">)</span>
<span class="gh">Out[40]: </span><span class="go">'{"schema":{"fields":[{"name":"idx","type":"integer"},{"name":"A","type":"integer"},{"name":"B","type":"string"},{"name":"C","type":"datetime"}],"primaryKey":["idx"],"pandas_version":"1.4.0"},"data":[{"idx":0,"A":1,"B":"a","C":"2016-01-01T00:00:00.000"},{"idx":1,"A":2,"B":"b","C":"2016-01-02T00:00:00.000"},{"idx":2,"A":3,"B":"c","C":"2016-01-03T00:00:00.000"}]}'</span>
</pre></div>
</div>
<p>有关更多信息，请参阅 <a class="reference internal" href="../user_guide/io.html#io-table-schema"><span class="std std-ref">IO: Table Schema</span></a>。</p>
<p>此外，如果您使用 IPython（或使用 Jupyter 消息协议的其他前端，如 <a class="reference external" href="https://nteract.io/">nteract</a>），<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 的 repr 现在可以发布 Series 或 DataFrame 的 JSON 表模式表示。这使得 Jupyter notebook 和 <a class="reference external" href="https://nteract.io/">nteract</a> 等前端在显示 pandas 对象时具有更大的灵活性，因为它们拥有更多关于数据的信息。您必须通过将 <code class="docutils literal notranslate"><span class="pre">display.html.table_schema</span></code> 选项设置为 <code class="docutils literal notranslate"><span class="pre">True</span></code> 来启用此功能。</p>
</section>
<section id="scipy-sparse-matrix-from-to-sparsedataframe">
<span id="whatsnew-0200-enhancements-scipy-sparse"></span><h3>从/到 SparseDataFrame 的 SciPy 稀疏矩阵<a class="headerlink" href="v0.20.0.html#scipy-sparse-matrix-from-to-sparsedataframe" title="Link to this heading">#</a></h3>
<p>pandas 现在支持直接从 <code class="docutils literal notranslate"><span class="pre">scipy.sparse.spmatrix</span></code> 实例创建稀疏数据帧。有关更多信息，请参阅 <a class="reference internal" href="../user_guide/sparse.html#sparse-scipysparse"><span class="std std-ref">文档</span></a>。(GH 4343)</p>
<p>支持所有稀疏格式，但如果矩阵不是 <a class="reference external" href="https://docs.scipy.org.cn/doc/scipy/reference/sparse.html#module-scipy.sparse" title="(in SciPy v1.15.3)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">COOrdinate</span></code></a> 格式，则会进行转换，并根据需要复制数据。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy.sparse</span><span class="w"> </span><span class="kn">import</span> <span class="n">csr_matrix</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">arr</span><span class="p">[</span><span class="n">arr</span> <span class="o">&lt;</span> <span class="mf">.9</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sp_arr</span> <span class="o">=</span> <span class="n">csr_matrix</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="n">sp_arr</span>
<span class="n">sdf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">SparseDataFrame</span><span class="p">(</span><span class="n">sp_arr</span><span class="p">)</span>
<span class="n">sdf</span>
</pre></div>
</div>
<p>要将 <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> 转换回 COO 格式的稀疏 SciPy 矩阵，您可以使用</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sdf</span><span class="o">.</span><span class="n">to_coo</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="excel-output-for-styled-dataframes">
<span id="whatsnew-0200-enhancements-style-excel"></span><h3>带样式 DataFrames 的 Excel 输出<a class="headerlink" href="v0.20.0.html#excel-output-for-styled-dataframes" title="Link to this heading">#</a></h3>
<p>已添加实验性支持，允许使用 <code class="docutils literal notranslate"><span class="pre">openpyxl</span></code> 引擎将 <code class="docutils literal notranslate"><span class="pre">DataFrame.style</span></code> 格式导出到 Excel。(GH 15530)</p>
<p>例如，运行以下代码后，<code class="docutils literal notranslate"><span class="pre">styled.xlsx</span></code> 呈现如下</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [41]: </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>

<span class="gp">In [42]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)})</span>

<span class="gp">In [43]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">   ....: </span>                                 <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">'BCDE'</span><span class="p">))],</span>
<span class="gp">   ....: </span>               <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [44]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="gp">In [45]: </span><span class="n">df</span>
<span class="gh">Out[45]: </span>
<span class="go">      A         B         C         D         E</span>
<span class="go">0   1.0  1.329212       NaN -0.316280 -0.990810</span>
<span class="go">1   2.0 -1.070816 -1.438713  0.564417  0.295722</span>
<span class="go">2   3.0 -1.626404  0.219565  0.678805  1.889273</span>
<span class="go">3   4.0  0.961538  0.104011 -0.481165  0.850229</span>
<span class="go">4   5.0  1.453425  1.057737  0.165562  0.515018</span>
<span class="go">5   6.0 -1.336936  0.562861  1.392855 -0.063328</span>
<span class="go">6   7.0  0.121668  1.207603 -0.002040  1.627796</span>
<span class="go">7   8.0  0.354493  1.037528 -0.385684  0.519818</span>
<span class="go">8   9.0  1.686583 -1.325963  1.428984 -2.089354</span>
<span class="go">9  10.0 -0.129820  0.631523 -0.586538  0.290720</span>

<span class="go">[10 rows x 5 columns]</span>

<span class="gp">In [46]: </span><span class="n">styled</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">style</span>
<span class="gp">   ....: </span>          <span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">val</span><span class="p">:</span> <span class="s1">'color:red;'</span> <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">'color:black;'</span><span class="p">)</span>
<span class="gp">   ....: </span>          <span class="o">.</span><span class="n">highlight_max</span><span class="p">())</span>
<span class="gp">   ....: </span>

<span class="gp">In [47]: </span><span class="n">styled</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">'styled.xlsx'</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">'openpyxl'</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/style-excel.png" src="../_images/style-excel.png">
<p>有关更多详细信息，请参阅 <a class="reference internal" href="../user_guide/style.html#Export-to-Excel"><span class="std std-ref">样式文档</span></a>。</p>
</section>
<section id="intervalindex">
<span id="whatsnew-0200-enhancements-intervalindex"></span><h3>IntervalIndex<a class="headerlink" href="v0.20.0.html#intervalindex" title="Link to this heading">#</a></h3>
<p>pandas 获得了一个 <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> 及其自己的 dtype <code class="docutils literal notranslate"><span class="pre">interval</span></code>，以及 <code class="docutils literal notranslate"><span class="pre">Interval</span></code> 标量类型。这些使得区间表示法得到一流支持，特别是作为 <a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.qcut.html#pandas.qcut" title="pandas.qcut"><code class="xref py py-func docutils literal notranslate"><span class="pre">qcut()</span></code></a> 中类别的返回类型。<code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> 允许一些独特的索引，请参阅 <a class="reference internal" href="../user_guide/advanced.html#advanced-intervalindex"><span class="std std-ref">文档</span></a>。(GH 7640, GH 8625)</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>IntervalIndex 的这些索引行为是暂定的，可能会在未来的 pandas 版本中更改。欢迎提供使用反馈。</p>
</div>
<p>之前的行为</p>
<p>返回的类别是字符串，表示区间</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">c</span>
<span class="gh">Out[2]:</span>
<span class="go">[(-0.003, 1.5], (-0.003, 1.5], (1.5, 3], (1.5, 3]]</span>
<span class="go">Categories (2, object): [(-0.003, 1.5] &lt; (1.5, 3]]</span>

<span class="gp">In [3]: </span><span class="n">c</span><span class="o">.</span><span class="n">categories</span>
<span class="gh">Out[3]: </span><span class="go">Index(['(-0.003, 1.5]', '(1.5, 3]'], dtype='object')</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [48]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="gp">In [49]: </span><span class="n">c</span>
<span class="gh">Out[49]: </span>
<span class="go">[(-0.003, 1.5], (-0.003, 1.5], (1.5, 3.0], (1.5, 3.0]]</span>
<span class="go">Categories (2, interval[float64, right]): [(-0.003, 1.5] &lt; (1.5, 3.0]]</span>

<span class="gp">In [50]: </span><span class="n">c</span><span class="o">.</span><span class="n">categories</span>
<span class="gh">Out[50]: </span><span class="go">IntervalIndex([(-0.003, 1.5], (1.5, 3.0]], dtype='interval[float64, right]')</span>
</pre></div>
</div>
<p>此外，这允许使用相同的 bin 来分箱*其他*数据，其中 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 表示缺失值，类似于其他 dtype。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [51]: </span><span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>
<span class="gh">Out[51]: </span>
<span class="go">[(-0.003, 1.5], (1.5, 3.0], NaN, (-0.003, 1.5]]</span>
<span class="go">Categories (2, interval[float64, right]): [(-0.003, 1.5] &lt; (1.5, 3.0]]</span>
</pre></div>
</div>
<p>一个 <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> 也可以用作 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 的索引。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [52]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="s1">'B'</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>
<span class="gp">   ....: </span>                   <span class="p">})</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">'B'</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [53]: </span><span class="n">df</span>
<span class="gh">Out[53]: </span>
<span class="go">               A</span>
<span class="go">B               </span>
<span class="go">(-0.003, 1.5]  0</span>
<span class="go">(1.5, 3.0]     1</span>
<span class="go">(-0.003, 1.5]  2</span>
<span class="go">(-0.003, 1.5]  3</span>

<span class="go">[4 rows x 1 columns]</span>
</pre></div>
</div>
<p>通过特定区间进行选择</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [54]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)]</span>
<span class="gh">Out[54]: </span>
<span class="go">A    1</span>
<span class="go">Name: (1.5, 3.0], Length: 1, dtype: int64</span>
</pre></div>
</div>
<p>通过包含在区间内的标量值进行选择。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [55]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[55]: </span>
<span class="go">               A</span>
<span class="go">B               </span>
<span class="go">(-0.003, 1.5]  0</span>
<span class="go">(-0.003, 1.5]  2</span>
<span class="go">(-0.003, 1.5]  3</span>

<span class="go">[3 rows x 1 columns]</span>
</pre></div>
</div>
</section>
<section id="other-enhancements">
<span id="whatsnew-0200-enhancements-other"></span><h3>其他增强功能<a class="headerlink" href="v0.20.0.html#other-enhancements" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code> 现在接受参数 <code class="docutils literal notranslate"><span class="pre">closed='right'|'left'|'both'|'neither'</span></code> 来选择滚动窗口的闭合性。详见 <a class="reference internal" href="../user_guide/window.html#window-endpoints"><span class="std std-ref">文档</span></a> (GH 13965)</p></li>
<li><p>与 <code class="docutils literal notranslate"><span class="pre">feather-format</span></code> 集成，包括新的顶层 <code class="docutils literal notranslate"><span class="pre">pd.read_feather()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame.to_feather()</span></code> 方法，详见 <a class="reference internal" href="../user_guide/io.html#io-feather"><span class="std std-ref">此处</span></a>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.str.replace()</span></code> 现在接受一个可调用对象作为替换，该对象会传递给 <code class="docutils literal notranslate"><span class="pre">re.sub</span></code> (GH 15055)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.str.replace()</span></code> 现在接受编译后的正则表达式作为模式 (GH 15446)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.sort_index</span></code> 接受参数 <code class="docutils literal notranslate"><span class="pre">kind</span></code> 和 <code class="docutils literal notranslate"><span class="pre">na_position</span></code> (GH 13589, GH 14444)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">nunique()</span></code> 方法，用于计算轴上的不同值 (GH 14336, GH 15197)。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">melt()</span></code> 方法，等同于 <code class="docutils literal notranslate"><span class="pre">pd.melt()</span></code>，用于将宽格式转换为长格式 (GH 12640)。</p></li>
<li><p>当使用 <code class="docutils literal notranslate"><span class="pre">sheetname=None</span></code> 时，<code class="docutils literal notranslate"><span class="pre">pd.read_excel()</span></code> 现在会保留工作表的顺序 (GH 9930)</p></li>
<li><p>现在支持带有小数点的多个偏移量别名（例如，<code class="docutils literal notranslate"><span class="pre">0.5min</span></code> 被解析为 <code class="docutils literal notranslate"><span class="pre">30s</span></code>）(GH 8419)</p></li>
<li><p>已将 <code class="docutils literal notranslate"><span class="pre">.isnull()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.notnull()</span></code> 添加到 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 对象，使其与 <code class="docutils literal notranslate"><span class="pre">Series</span></code> API 更一致 (GH 15300)</p></li>
<li><p>当索引/切片到未排序的 MultiIndex 时，会抛出新的 <code class="docutils literal notranslate"><span class="pre">UnsortedIndexError</span></code>（<code class="docutils literal notranslate"><span class="pre">KeyError</span></code> 的子类）(GH 11897)。这允许区分由于未排序或键错误引起的错误。详见 <a class="reference internal" href="../user_guide/advanced.html#advanced-unsorted"><span class="std std-ref">此处</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">.to_frame()</span></code> 方法，用于转换为 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> (GH 12397)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.cut</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pd.qcut</span></code> 现在支持 datetime64 和 timedelta64 dtypes (GH 14714, GH 14798)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.qcut</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">duplicates='raise'|'drop'</span></code> 选项，用于控制是否在重复边界处抛出错误 (GH 7751)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> 提供 <code class="docutils literal notranslate"><span class="pre">to_excel</span></code> 方法以输出 Excel 文件 (GH 8825)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 参数现在接受可调用函数作为值 (GH 14154)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> 参数现在接受可调用函数作为值 (GH 10882)</p></li>
<li><p>如果 <code class="docutils literal notranslate"><span class="pre">nrows</span></code> 和 <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> 参数在 <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中同时传入，则支持这两个参数 (GH 6774, GH 15755)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.plot</span></code> 现在会在每个子图上方打印标题，如果 <code class="docutils literal notranslate"><span class="pre">subplots=True</span></code> 且 <code class="docutils literal notranslate"><span class="pre">title</span></code> 是字符串列表 (GH 14753)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.plot</span></code> 可以将 matplotlib 2.0 默认颜色循环作为单个字符串作为颜色参数传递，详见 <a class="reference external" href="https://matplotlib.net.cn/2.0.0/users/colors.html#cn-color-selection">此处</a>。(GH 15516)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.interpolate()</span></code> 现在支持以 timedelta 作为索引类型并使用 <code class="docutils literal notranslate"><span class="pre">method='time'</span></code> (GH 6424)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame/Series.rename</span></code> 新增 <code class="docutils literal notranslate"><span class="pre">level</span></code> 关键字，用于重命名 MultiIndex 中指定级别的标签 (GH 4160)。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.reset_index()</span></code> 现在将元组 <code class="docutils literal notranslate"><span class="pre">index.name</span></code> 解释为跨越 <code class="docutils literal notranslate"><span class="pre">columns</span></code> 级别的键，如果 <code class="docutils literal notranslate"><span class="pre">columns</span></code> 是 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> (GH 16164)</p></li>
<li><p>新增 <code class="docutils literal notranslate"><span class="pre">Timedelta.isoformat</span></code> 方法，用于将 Timedelta 格式化为 <a class="reference external" href="https://en.wikipedia.org/wiki/ISO_8601#Durations">ISO 8601 持续时间</a>。详见 <a class="reference internal" href="../user_guide/timedeltas.html#timedeltas-isoformat"><span class="std std-ref">Timedelta 文档</span></a> (GH 15136)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.select_dtypes()</span></code> 现在允许使用字符串 <code class="docutils literal notranslate"><span class="pre">datetimetz</span></code> 来通用选择带有时区的日期时间 (GH 14910)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.to_latex()</span></code> 方法现在将接受 <code class="docutils literal notranslate"><span class="pre">multicolumn</span></code> 和 <code class="docutils literal notranslate"><span class="pre">multirow</span></code> 参数，以使用附带的 LaTeX 增强功能</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.merge_asof()</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">direction='backward'|'forward'|'nearest'</span></code> 选项 (GH 14887)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series/DataFrame.asfreq()</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> 参数，用于填充缺失值 (GH 3715)。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series/DataFrame.resample.asfreq</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> 参数，用于在重采样期间填充缺失值 (GH 3715)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.util.hash_pandas_object.html#pandas.util.hash_pandas_object" title="pandas.util.hash_pandas_object"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.util.hash_pandas_object()</span></code></a> 获得了对 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 进行哈希的能力 (GH 15224)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series/DataFrame.squeeze()</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 参数。(GH 15339)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_excel()</span></code> 有一个新的 <code class="docutils literal notranslate"><span class="pre">freeze_panes</span></code> 参数，用于在导出到 Excel 时打开“冻结窗格”功能 (GH 15160)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_html()</span></code> 将解析多个标题行，创建一个 MultiIndex 标题。(GH 13434)。</p></li>
<li><p>HTML 表格输出如果 <code class="docutils literal notranslate"><span class="pre">colspan</span></code> 或 <code class="docutils literal notranslate"><span class="pre">rowspan</span></code> 属性等于 1 则跳过。(GH 15403)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.formats.style.Styler</span></code></a> 模板现在包含块，以便更轻松地扩展，请参阅 <a class="reference internal" href="../user_guide/style.html#Subclassing"><span class="std std-ref">示例 Notebook</span></a> (GH 15649)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.render()</span></code> 现在接受 <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> 以允许在模板中使用用户定义的变量 (GH 15649)</p></li>
<li><p>与 Jupyter notebook 5.0 兼容；MultiIndex 列标签左对齐，MultiIndex 行标签顶对齐 (GH 15379)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 现在有一个自定义日期刻度格式器，专门为纳秒级精度设计 (GH 8711)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.api.types.union_categoricals</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">ignore_ordered</span></code> 参数，以允许忽略合并分类的有序属性 (GH 13410)。有关更多信息，请参阅 <a class="reference internal" href="../user_guide/categorical.html#categorical-union"><span class="std std-ref">分类联合文档</span></a>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_latex()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code> 现在允许可选的标题别名。(GH 15536)</p></li>
<li><p>重新启用 <code class="docutils literal notranslate"><span class="pre">pd.read_excel()</span></code> 的 <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> 关键字，以将字符串列解析为日期 (GH 14326)</p></li>
<li><p>向 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 的子类添加了 <code class="docutils literal notranslate"><span class="pre">.empty</span></code> 属性。(GH 15270)</p></li>
<li><p>启用 <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> 和 <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 的地板除法 (GH 15828)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.io.json.json_normalize()</span></code> 增加了 <code class="docutils literal notranslate"><span class="pre">errors='ignore'|'raise'</span></code> 选项；默认值为 <code class="docutils literal notranslate"><span class="pre">errors='raise'</span></code>，这是向后兼容的。(GH 14583)</p></li>
<li><p>带有空 <code class="docutils literal notranslate"><span class="pre">list</span></code> 的 <code class="docutils literal notranslate"><span class="pre">pandas.io.json.json_normalize()</span></code> 将返回一个空的 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> (GH 15534)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.io.json.json_normalize()</span></code> 增加了一个 <code class="docutils literal notranslate"><span class="pre">sep</span></code> 选项，接受 <code class="docutils literal notranslate"><span class="pre">str</span></code> 用于分隔连接字段；默认值为“.”，这是向后兼容的。(GH 14883)</p></li>
<li><p>已添加 <a class="reference internal" href="../reference/api/pandas.MultiIndex.remove_unused_levels.html#pandas.MultiIndex.remove_unused_levels" title="pandas.MultiIndex.remove_unused_levels"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.remove_unused_levels()</span></code></a> 以方便 <a class="reference internal" href="../user_guide/advanced.html#advanced-shown-levels"><span class="std std-ref">移除未使用的级别</span></a>。(GH 15694)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 现在会在发生任何解析错误时抛出 <code class="docutils literal notranslate"><span class="pre">ParserError</span></code> 错误 (GH 15913, GH 15925)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 现在支持 Python 解析器的 <code class="docutils literal notranslate"><span class="pre">error_bad_lines</span></code> 和 <code class="docutils literal notranslate"><span class="pre">warn_bad_lines</span></code> 参数 (GH 15925)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">display.show_dimensions</span></code> 选项现在也可以用于指定 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 的长度是否应在其 repr 中显示 (GH 7117)。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parallel_coordinates()</span></code> 增加了一个 <code class="docutils literal notranslate"><span class="pre">sort_labels</span></code> 关键字参数，用于对类别标签及其分配的颜色进行排序 (GH 15908)</p></li>
<li><p>添加了选项，允许打开/关闭使用 <code class="docutils literal notranslate"><span class="pre">bottleneck</span></code> 和 <code class="docutils literal notranslate"><span class="pre">numexpr</span></code>，详见 <a class="reference internal" href="../user_guide/basics.html#basics-accelerate"><span class="std std-ref">此处</span></a> (GH 16157)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.style.bar()</span></code> 现在接受另外两个选项来进一步自定义条形图。条形对齐方式设置为 <code class="docutils literal notranslate"><span class="pre">align='left'|'mid'|'zero'</span></code>，默认值为“left”，这是向后兼容的；您现在可以传递一个 <code class="docutils literal notranslate"><span class="pre">color=[color_negative,</span> <span class="pre">color_positive]</span></code> 列表。(GH 14757)</p></li>
</ul>
</section>
</section>
<section id="backwards-incompatible-api-changes">
<span id="whatsnew-0200-api-breaking"></span><h2>向后不兼容的 API 更改<a class="headerlink" href="v0.20.0.html#backwards-incompatible-api-changes" title="Link to this heading">#</a></h2>
<section id="possible-incompatibility-for-hdf5-formats-created-with-pandas-0-13-0">
<span id="whatsnew-api-breaking-io-compat"></span><h3>使用 pandas &lt; 0.13.0 创建的 HDF5 格式可能存在不兼容性<a class="headerlink" href="v0.20.0.html#possible-incompatibility-for-hdf5-formats-created-with-pandas-0-13-0" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">pd.TimeSeries</span></code> 在 0.17.0 版本中已正式弃用，尽管自 0.13.0 版本以来它一直是别名。它已被删除，转而使用 <code class="docutils literal notranslate"><span class="pre">pd.Series</span></code>。(GH 15098)。</p>
<p>这*可能*会导致早期版本中创建的 HDF5 文件在使用了 <code class="docutils literal notranslate"><span class="pre">pd.TimeSeries</span></code> 的情况下无法读取。这种情况最有可能发生在 pandas &lt; 0.13.0 版本。如果您遇到此情况，可以使用最近的早期 pandas 版本读取 HDF5 文件，然后在应用以下过程后重新写入。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">TimeSeries</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'20130101'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>

<span class="gp">In [3]: </span><span class="n">s</span>
<span class="gh">Out[3]:</span>
<span class="go">2013-01-01    1</span>
<span class="go">2013-01-02    2</span>
<span class="go">2013-01-03    3</span>
<span class="go">Freq: D, dtype: int64</span>

<span class="gp">In [4]: </span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gh">Out[4]: </span><span class="go">pandas.core.series.TimeSeries</span>

<span class="gp">In [5]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">s</span>
<span class="gh">Out[6]:</span>
<span class="go">2013-01-01    1</span>
<span class="go">2013-01-02    2</span>
<span class="go">2013-01-03    3</span>
<span class="go">Freq: D, dtype: int64</span>

<span class="gp">In [7]: </span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gh">Out[7]: </span><span class="go">pandas.core.series.Series</span>
</pre></div>
</div>
</section>
<section id="map-on-index-types-now-return-other-index-types">
<span id="whatsnew-0200-api-breaking-index-map"></span><h3>Index 类型上的 Map 现在返回其他 Index 类型<a class="headerlink" href="v0.20.0.html#map-on-index-types-now-return-other-index-types" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Index</span></code> 上的 <code class="docutils literal notranslate"><span class="pre">map</span></code> 现在返回 <code class="docutils literal notranslate"><span class="pre">Index</span></code>，而不是 numpy 数组 (GH 12766)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [56]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="gp">In [57]: </span><span class="n">idx</span>
<span class="gh">Out[57]: </span><span class="go">Index([1, 2], dtype='int64')</span>

<span class="gp">In [58]: </span><span class="n">mi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span>

<span class="gp">In [59]: </span><span class="n">mi</span>
<span class="gh">Out[59]: </span>
<span class="go">MultiIndex([(1, 2),</span>
<span class="go">            (2, 4)],</span>
<span class="go">           )</span>
</pre></div>
</div>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">idx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[5]: </span><span class="go">array([2, 4])</span>

<span class="gp">In [6]: </span><span class="n">idx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
<span class="gh">Out[6]: </span><span class="go">array([(1, 2), (2, 4)], dtype=object)</span>

<span class="gp">In [7]: </span><span class="n">mi</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span>
<span class="gh">Out[7]: </span><span class="go">array([(1, 2), (2, 4)], dtype=object)</span>

<span class="gp">In [8]: </span><span class="n">mi</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[8]: </span><span class="go">array([1, 2])</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [60]: </span><span class="n">idx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[60]: </span><span class="go">Index([2, 4], dtype='int64')</span>

<span class="gp">In [61]: </span><span class="n">idx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
<span class="gh">Out[61]: </span>
<span class="go">MultiIndex([(1, 2),</span>
<span class="go">            (2, 4)],</span>
<span class="go">           )</span>

<span class="gp">In [62]: </span><span class="n">mi</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span>
<span class="gh">Out[62]: </span>
<span class="go">MultiIndex([(1, 2),</span>
<span class="go">            (2, 4)],</span>
<span class="go">           )</span>

<span class="gp">In [63]: </span><span class="n">mi</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[63]: </span><span class="go">Index([1, 2], dtype='int64')</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Series</span></code> 上具有 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 值时，<code class="docutils literal notranslate"><span class="pre">map</span></code> 可能会返回 <code class="docutils literal notranslate"><span class="pre">int64</span></code> dtypes 而不是 <code class="docutils literal notranslate"><span class="pre">int32</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [64]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'2011-01-02T00:00'</span><span class="p">,</span> <span class="s1">'2011-01-02T02:00'</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'H'</span><span class="p">)</span>
<span class="gp">   ....: </span>              <span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">'Asia/Tokyo'</span><span class="p">))</span>
<span class="gp">   ....:</span>

<span class="gp">In [65]: </span><span class="n">s</span>
<span class="gh">Out[65]:</span>
<span class="go">0   2011-01-02 00:00:00+09:00</span>
<span class="go">1   2011-01-02 01:00:00+09:00</span>
<span class="go">2   2011-01-02 02:00:00+09:00</span>
<span class="go">Length: 3, dtype: datetime64[ns, Asia/Tokyo]</span>
</pre></div>
</div>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>
<span class="gh">Out[9]:</span>
<span class="go">0    0</span>
<span class="go">1    1</span>
<span class="go">2    2</span>
<span class="go">dtype: int32</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [66]: </span><span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>
<span class="gh">Out[66]:</span>
<span class="go">0    0</span>
<span class="go">1    1</span>
<span class="go">2    2</span>
<span class="go">Length: 3, dtype: int64</span>
</pre></div>
</div>
</section>
<section id="accessing-datetime-fields-of-index-now-return-index">
<span id="whatsnew-0200-api-breaking-index-dt-field"></span><h3>访问 Index 的 datetime 字段现在返回 Index<a class="headerlink" href="v0.20.0.html#accessing-datetime-fields-of-index-now-return-index" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code>、<code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 和 <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 的日期时间相关属性（概述见 <a class="reference internal" href="../user_guide/timeseries.html#timeseries-components"><span class="std std-ref">此处</span></a>）以前返回 numpy 数组。它们现在将返回一个新的 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 对象，除了布尔字段的情况，结果仍将是布尔 ndarray。(GH 15022)</p>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">"2015-01-01"</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'10H'</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">idx</span><span class="o">.</span><span class="n">hour</span>
<span class="gh">Out[2]: </span><span class="go">array([ 0, 10, 20,  6, 16], dtype=int32)</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [67]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">"2015-01-01"</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'10H'</span><span class="p">)</span>

<span class="gp">In [68]: </span><span class="n">idx</span><span class="o">.</span><span class="n">hour</span>
<span class="gh">Out[68]: </span><span class="go">Index([0, 10, 20, 6, 16], dtype='int32')</span>
</pre></div>
</div>
<p>这样做的好处是，特定的 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 方法在结果上仍然可用。另一方面，这可能会导致向后不兼容：例如，与 numpy 数组相比，<code class="docutils literal notranslate"><span class="pre">Index</span></code> 对象是不可变的。要获取原始 ndarray，您始终可以使用 <code class="docutils literal notranslate"><span class="pre">np.asarray(idx.hour)</span></code> 进行显式转换。</p>
</section>
<section id="pd-unique-will-now-be-consistent-with-extension-types">
<span id="whatsnew-0200-api-breaking-unique"></span><h3>pd.unique 现在将与扩展类型保持一致<a class="headerlink" href="v0.20.0.html#pd-unique-will-now-be-consistent-with-extension-types" title="Link to this heading">#</a></h3>
<p>在之前的版本中，在 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 和带时区感知的数据类型上使用 <a class="reference internal" href="../reference/api/pandas.Series.unique.html#pandas.Series.unique" title="pandas.Series.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.unique()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.unique.html#pandas.unique" title="pandas.unique"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.unique()</span></code></a> 会产生不同的返回类型。现在这些都已保持一致。(GH 15903)</p>
<ul>
<li><p>带时区的日期时间</p>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Series</span>
<span class="gp">In [5]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">),</span>
<span class="gp">   ...: </span>           <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">)])</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[5]: </span><span class="go">array([Timestamp('2016-01-01 00:00:00-0500', tz='US/Eastern')], dtype=object)</span>

<span class="gp">In [6]: </span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">),</span>
<span class="gp">   ...: </span>                     <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">)]))</span>
<span class="gh">Out[6]: </span><span class="go">array(['2016-01-01T05:00:00.000000000'], dtype='datetime64[ns]')</span>

<span class="go"># Index</span>
<span class="gp">In [7]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">),</span>
<span class="gp">   ...: </span>          <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">)])</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[7]: </span><span class="go">DatetimeIndex(['2016-01-01 00:00:00-05:00'], dtype='datetime64[ns, US/Eastern]', freq=None)</span>

<span class="gp">In [8]: </span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">),</span>
<span class="gp">   ...: </span>           <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">)])</span>
<span class="gh">Out[8]: </span><span class="go">array(['2016-01-01T05:00:00.000000000'], dtype='datetime64[ns]')</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Series, returns an array of Timestamp tz-aware</span>
<span class="gp">In [64]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="sa">r</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="sa">r</span><span class="s1">'US/Eastern'</span><span class="p">),</span>
<span class="gp">   ....: </span>           <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="sa">r</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="sa">r</span><span class="s1">'US/Eastern'</span><span class="p">)])</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gp">   ....: </span>
<span class="gh">Out[64]: </span>
<span class="go">&lt;DatetimeArray&gt;</span>
<span class="go">['2016-01-01 00:00:00-05:00']</span>
<span class="go">Length: 1, dtype: datetime64[ns, US/Eastern]</span>

<span class="gp">In [65]: </span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">),</span>
<span class="gp">   ....: </span>          <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">)]))</span>
<span class="gp">   ....: </span>
<span class="gh">Out[65]: </span>
<span class="go">&lt;DatetimeArray&gt;</span>
<span class="go">['2016-01-01 00:00:00-05:00']</span>
<span class="go">Length: 1, dtype: datetime64[ns, US/Eastern]</span>

<span class="go"># Index, returns a DatetimeIndex</span>
<span class="gp">In [66]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">),</span>
<span class="gp">   ....: </span>          <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">)])</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gp">   ....: </span>
<span class="gh">Out[66]: </span><span class="go">DatetimeIndex(['2016-01-01 00:00:00-05:00'], dtype='datetime64[ns, US/Eastern]', freq=None)</span>

<span class="gp">In [67]: </span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">),</span>
<span class="gp">   ....: </span>                    <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'US/Eastern'</span><span class="p">)]))</span>
<span class="gp">   ....: </span>
<span class="gh">Out[67]: </span><span class="go">DatetimeIndex(['2016-01-01 00:00:00-05:00'], dtype='datetime64[ns, US/Eastern]', freq=None)</span>
</pre></div>
</div>
</li>
<li><p>分类</p>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">'baabc'</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'category'</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[1]:</span>
<span class="go">[b, a, c]</span>
<span class="go">Categories (3, object): [b, a, c]</span>

<span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">'baabc'</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'category'</span><span class="p">))</span>
<span class="gh">Out[2]: </span><span class="go">array(['b', 'a', 'c'], dtype=object)</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># returns a Categorical</span>
<span class="gp">In [68]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">'baabc'</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'category'</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[68]: </span>
<span class="go">['b', 'a', 'c']</span>
<span class="go">Categories (3, object): ['a', 'b', 'c']</span>

<span class="gp">In [69]: </span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">'baabc'</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'category'</span><span class="p">))</span>
<span class="gh">Out[69]: </span>
<span class="go">['b', 'a', 'c']</span>
<span class="go">Categories (3, object): ['a', 'b', 'c']</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="s3-file-handling">
<span id="whatsnew-0200-api-breaking-s3"></span><h3>S3 文件处理<a class="headerlink" href="v0.20.0.html#s3-file-handling" title="Link to this heading">#</a></h3>
<p>pandas 现在使用 <a class="reference external" href="http://s3fs.readthedocs.io/">s3fs</a> 来处理 S3 连接。这应该不会破坏任何代码。然而，由于 <code class="docutils literal notranslate"><span class="pre">s3fs</span></code> 不是必需的依赖项，您需要单独安装它，就像以前版本的 pandas 中的 <code class="docutils literal notranslate"><span class="pre">boto</span></code> 一样。(GH 11915)。</p>
</section>
<section id="partial-string-indexing-changes">
<span id="whatsnew-0200-api-breaking-partial-string-indexing"></span><h3>部分字符串索引更改<a class="headerlink" href="v0.20.0.html#partial-string-indexing-changes" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../user_guide/timeseries.html#timeseries-partialindexing"><span class="std std-ref">DatetimeIndex 部分字符串索引</span></a> 现在作为精确匹配工作，前提是字符串分辨率与索引分辨率一致，包括两者都为秒的情况 (GH 14826)。有关详细信息，请参阅 <a class="reference internal" href="../user_guide/timeseries.html#timeseries-slice-vs-exact-match"><span class="std std-ref">切片与精确匹配</span></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [70]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'a'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]},</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">'2011-12-31 23:59:59'</span><span class="p">,</span>
<span class="gp">   ....: </span>                                                      <span class="s1">'2012-01-01 00:00:00'</span><span class="p">,</span>
<span class="gp">   ....: </span>                                                      <span class="s1">'2012-01-01 00:00:01'</span><span class="p">]))</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'2011-12-31 23:59:59'</span><span class="p">]</span>
<span class="gh">Out[4]:</span>
<span class="go">                       a</span>
<span class="go">2011-12-31 23:59:59  1</span>

<span class="gp">In [5]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'a'</span><span class="p">][</span><span class="s1">'2011-12-31 23:59:59'</span><span class="p">]</span>
<span class="gh">Out[5]:</span>
<span class="go">2011-12-31 23:59:59    1</span>
<span class="go">Name: a, dtype: int64</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'2011-12-31 23:59:59'</span><span class="p">]</span>
<span class="go">KeyError: '2011-12-31 23:59:59'</span>

<span class="gp">In [5]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'a'</span><span class="p">][</span><span class="s1">'2011-12-31 23:59:59'</span><span class="p">]</span>
<span class="gh">Out[5]: </span><span class="go">1</span>
</pre></div>
</div>
</section>
<section id="concat-of-different-float-dtypes-will-not-automatically-upcast">
<span id="whatsnew-0200-api-breaking-concat-dtypes"></span><h3>不同浮点 dtype 的 concat 将不会自动向上转换<a class="headerlink" href="v0.20.0.html#concat-of-different-float-dtypes-will-not-automatically-upcast" title="Link to this heading">#</a></h3>
<p>以前，<code class="docutils literal notranslate"><span class="pre">concat</span></code> 多个具有不同 <code class="docutils literal notranslate"><span class="pre">float</span></code> dtype 的对象会自动将结果向上转换为 <code class="docutils literal notranslate"><span class="pre">float64</span></code> dtype。现在将使用最小的可接受 dtype (GH 13247)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [71]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="n">ndmin</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>

<span class="gp">In [72]: </span><span class="n">df1</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[72]: </span>
<span class="go">0    float32</span>
<span class="go">Length: 1, dtype: object</span>

<span class="gp">In [73]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="n">ndmin</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>

<span class="gp">In [74]: </span><span class="n">df2</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[74]: </span>
<span class="go">0    float32</span>
<span class="go">Length: 1, dtype: object</span>
</pre></div>
</div>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">])</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[7]:</span>
<span class="go">0    float64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [75]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">])</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[75]: </span>
<span class="go">0    float32</span>
<span class="go">Length: 1, dtype: object</span>
</pre></div>
</div>
</section>
<section id="pandas-google-bigquery-support-has-moved">
<span id="whatsnew-0200-api-breaking-gbq"></span><h3>pandas Google BigQuery 支持已迁移<a class="headerlink" href="v0.20.0.html#pandas-google-bigquery-support-has-moved" title="Link to this heading">#</a></h3>
<p>pandas 已将 Google BigQuery 支持分拆到单独的软件包 <code class="docutils literal notranslate"><span class="pre">pandas-gbq</span></code> 中。您可以通过 <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">pandas-gbq</span> <span class="pre">-c</span> <span class="pre">conda-forge</span></code> 或 <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pandas-gbq</span></code> 来获取它。<a class="reference internal" href="../reference/api/pandas.read_gbq.html#pandas.read_gbq" title="pandas.read_gbq"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_gbq()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_gbq.html#pandas.DataFrame.to_gbq" title="pandas.DataFrame.to_gbq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_gbq()</span></code></a> 的功能在当前发布的 <code class="docutils literal notranslate"><span class="pre">pandas-gbq=0.1.4</span></code> 版本中保持不变。文档现已托管在 <a class="reference external" href="https://pandas-gbq.readthedocs.io/">此处</a> (GH 15347)。</p>
</section>
<section id="memory-usage-for-index-is-more-accurate">
<span id="whatsnew-0200-api-breaking-memory-usage"></span><h3>Index 的内存使用更准确<a class="headerlink" href="v0.20.0.html#memory-usage-for-index-is-more-accurate" title="Link to this heading">#</a></h3>
<p>在以前的版本中，在带有索引的 pandas 结构上显示 <code class="docutils literal notranslate"><span class="pre">.memory_usage()</span></code> 只会包含实际的索引值，而不包括用于快速索引的结构。这对于 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 和 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 通常会有所不同，而对于其他索引类型则差异较小。(GH 15237)</p>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">,</span> <span class="s1">'baz'</span><span class="p">])</span>

<span class="gp">In [9]: </span><span class="n">index</span><span class="o">.</span><span class="n">memory_usage</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[9]: </span><span class="go">180</span>

<span class="gp">In [10]: </span><span class="n">index</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span>
<span class="gh">Out[10]: </span><span class="go">0</span>

<span class="gp">In [11]: </span><span class="n">index</span><span class="o">.</span><span class="n">memory_usage</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[11]: </span><span class="go">180</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">,</span> <span class="s1">'baz'</span><span class="p">])</span>

<span class="gp">In [9]: </span><span class="n">index</span><span class="o">.</span><span class="n">memory_usage</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[9]: </span><span class="go">180</span>

<span class="gp">In [10]: </span><span class="n">index</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span>
<span class="gh">Out[10]: </span><span class="go">0</span>

<span class="gp">In [11]: </span><span class="n">index</span><span class="o">.</span><span class="n">memory_usage</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[11]: </span><span class="go">260</span>
</pre></div>
</div>
</section>
<section id="dataframe-sort-index-changes">
<span id="whatsnew-0200-api-breaking-sort-index"></span><h3>DataFrame.sort_index 更改<a class="headerlink" href="v0.20.0.html#dataframe-sort-index-changes" title="Link to this heading">#</a></h3>
<p>在某些情况下，在 MultiIndexed DataFrame 上调用 <code class="docutils literal notranslate"><span class="pre">.sort_index()</span></code> 会返回*相同的* DataFrame，而似乎没有排序。这会在 <code class="docutils literal notranslate"><span class="pre">lexsorted</span></code> 但非单调级别的情况下发生。(GH 15622, GH 15687, GH 14015, GH 13431, GH 15797)</p>
<p>这与以前的版本*未改变*，但为了说明目的而显示</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">81</span><span class="p">]:</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'value'</span><span class="p">],</span>
   <span class="o">....</span><span class="p">:</span>                   <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="s1">'BA'</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]))</span>
   <span class="o">....</span><span class="p">:</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">82</span><span class="p">]:</span> <span class="n">df</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">82</span><span class="p">]:</span>
     <span class="n">value</span>
<span class="n">B</span> <span class="mi">0</span>      <span class="mi">0</span>
  <span class="mi">1</span>      <span class="mi">1</span>
  <span class="mi">2</span>      <span class="mi">2</span>
<span class="n">A</span> <span class="mi">0</span>      <span class="mi">3</span>
  <span class="mi">1</span>      <span class="mi">4</span>
  <span class="mi">2</span>      <span class="mi">5</span>

<span class="p">[</span><span class="mi">6</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">1</span> <span class="n">columns</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">87</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_lexsorted</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">87</span><span class="p">]:</span> <span class="kc">False</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">88</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_monotonic</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">88</span><span class="p">]:</span> <span class="kc">False</span>
</pre></div>
</div>
<p>排序按预期工作</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [76]: </span><span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="gh">Out[76]: </span>
<span class="go">                     a</span>
<span class="go">2011-12-31 23:59:59  1</span>
<span class="go">2012-01-01 00:00:00  2</span>
<span class="go">2012-01-01 00:00:01  3</span>

<span class="go">[3 rows x 1 columns]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">90</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_lexsorted</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">90</span><span class="p">]:</span> <span class="kc">True</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">91</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_monotonic</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">91</span><span class="p">]:</span> <span class="kc">True</span>
</pre></div>
</div>
<p>然而，这个例子，它的第二个级别不是单调的，行为不如预期。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [77]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'value'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]},</span>
<span class="gp">   ....: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="p">([[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">],</span> <span class="p">[</span><span class="s1">'bb'</span><span class="p">,</span> <span class="s1">'aa'</span><span class="p">]],</span>
<span class="gp">   ....: </span>                                      <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]))</span>
<span class="gp">   ....: </span>

<span class="gp">In [78]: </span><span class="n">df</span>
<span class="gh">Out[78]: </span>
<span class="go">      value</span>
<span class="go">a bb      1</span>
<span class="go">  aa      2</span>
<span class="go">b bb      3</span>
<span class="go">  aa      4</span>

<span class="go">[4 rows x 1 columns]</span>
</pre></div>
</div>
<p>之前的行为</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">11</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">11</span><span class="p">]:</span>
      <span class="n">value</span>
<span class="n">a</span> <span class="n">bb</span>      <span class="mi">1</span>
  <span class="n">aa</span>      <span class="mi">2</span>
<span class="n">b</span> <span class="n">bb</span>      <span class="mi">3</span>
  <span class="n">aa</span>      <span class="mi">4</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_lexsorted</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="kc">True</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_monotonic</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="kc">False</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">94</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">94</span><span class="p">]:</span>
      <span class="n">value</span>
<span class="n">a</span> <span class="n">aa</span>      <span class="mi">2</span>
  <span class="n">bb</span>      <span class="mi">1</span>
<span class="n">b</span> <span class="n">aa</span>      <span class="mi">4</span>
  <span class="n">bb</span>      <span class="mi">3</span>

<span class="p">[</span><span class="mi">4</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">1</span> <span class="n">columns</span><span class="p">]</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">95</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_lexsorted</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">95</span><span class="p">]:</span> <span class="kc">True</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">96</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_monotonic</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">96</span><span class="p">]:</span> <span class="kc">True</span>
</pre></div>
</div>
</section>
<section id="groupby-describe-formatting">
<span id="whatsnew-0200-api-breaking-groupby-describe"></span><h3>GroupBy describe 格式<a class="headerlink" href="v0.20.0.html#groupby-describe-formatting" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">groupby.describe()</span></code> 的输出格式现在在列中而不是索引中标记 <code class="docutils literal notranslate"><span class="pre">describe()</span></code> 指标。这种格式与 <code class="docutils literal notranslate"><span class="pre">groupby.agg()</span></code> 在一次应用多个函数时保持一致。(GH 4792)</p>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">'B'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'A'</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="gh">Out[2]:</span>
<span class="go">                B</span>
<span class="go">A</span>
<span class="go">1 count  2.000000</span>
<span class="go">  mean   1.500000</span>
<span class="go">  std    0.707107</span>
<span class="go">  min    1.000000</span>
<span class="go">  25%    1.250000</span>
<span class="go">  50%    1.500000</span>
<span class="go">  75%    1.750000</span>
<span class="go">  max    2.000000</span>
<span class="go">2 count  2.000000</span>
<span class="go">  mean   3.500000</span>
<span class="go">  std    0.707107</span>
<span class="go">  min    3.000000</span>
<span class="go">  25%    3.250000</span>
<span class="go">  50%    3.500000</span>
<span class="go">  75%    3.750000</span>
<span class="go">  max    4.000000</span>

<span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'A'</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s2">"mean"</span><span class="p">,</span> <span class="s2">"std"</span><span class="p">,</span> <span class="s2">"min"</span><span class="p">,</span> <span class="s2">"max"</span><span class="p">])</span>
<span class="gh">Out[3]:</span>
<span class="go">     B</span>
<span class="go">  mean       std amin amax</span>
<span class="go">A</span>
<span class="go">1  1.5  0.707107    1    2</span>
<span class="go">2  3.5  0.707107    3    4</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [79]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">'B'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="gp">In [80]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'A'</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="gh">Out[80]: </span>
<span class="go">      B                                          </span>
<span class="go">  count mean       std  min   25%  50%   75%  max</span>
<span class="go">A                                                </span>
<span class="go">1   2.0  1.5  0.707107  1.0  1.25  1.5  1.75  2.0</span>
<span class="go">2   2.0  3.5  0.707107  3.0  3.25  3.5  3.75  4.0</span>

<span class="go">[2 rows x 8 columns]</span>

<span class="gp">In [81]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'A'</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s2">"mean"</span><span class="p">,</span> <span class="s2">"std"</span><span class="p">,</span> <span class="s2">"min"</span><span class="p">,</span> <span class="s2">"max"</span><span class="p">])</span>
<span class="gh">Out[81]: </span>
<span class="go">     B                  </span>
<span class="go">  mean       std min max</span>
<span class="go">A                       </span>
<span class="go">1  1.5  0.707107   1   2</span>
<span class="go">2  3.5  0.707107   3   4</span>

<span class="go">[2 rows x 4 columns]</span>
</pre></div>
</div>
</section>
<section id="window-binary-corr-cov-operations-return-a-multiindex-dataframe">
<span id="whatsnew-0200-api-breaking-rolling-pairwise"></span><h3>窗口二元 corr/cov 操作返回 MultiIndex DataFrame<a class="headerlink" href="v0.20.0.html#window-binary-corr-cov-operations-return-a-multiindex-dataframe" title="Link to this heading">#</a></h3>
<p>当对 <code class="docutils literal notranslate"><span class="pre">.rolling(..)</span></code>、<code class="docutils literal notranslate"><span class="pre">.expanding(..)</span></code> 或 <code class="docutils literal notranslate"><span class="pre">.ewm(..)</span></code> 对象进行二元窗口操作（如 <code class="docutils literal notranslate"><span class="pre">.corr()</span></code> 或 <code class="docutils literal notranslate"><span class="pre">.cov()</span></code>）时，现在将返回一个 2 级 <code class="docutils literal notranslate"><span class="pre">MultiIndexed</span> <span class="pre">DataFrame</span></code>，而不是 <code class="docutils literal notranslate"><span class="pre">Panel</span></code>，因为 <code class="docutils literal notranslate"><span class="pre">Panel</span></code> 现已弃用，详见 <a class="reference internal" href="v0.20.0.html#whatsnew-0200-api-breaking-deprecate-panel"><span class="std std-ref">此处</span></a>。它们在功能上等效，但 MultiIndexed <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 在 pandas 中获得更多支持。有关更多信息，请参阅 <a class="reference internal" href="../user_guide/window.html#window-cov-corr"><span class="std std-ref">窗口二元操作</span></a> 部分。(GH 15677)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [82]: </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>

<span class="gp">In [83]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">   ....: </span>                  <span class="n">columns</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">'bar'</span><span class="p">),</span>
<span class="gp">   ....: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'20160101'</span><span class="p">,</span>
<span class="gp">   ....: </span>                                      <span class="n">periods</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'D'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'foo'</span><span class="p">))</span>
<span class="gp">   ....: </span>

<span class="gp">In [84]: </span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
<span class="gh">Out[84]: </span>
<span class="go">bar                A         B</span>
<span class="go">foo                           </span>
<span class="go">2016-04-05  0.640880  0.126205</span>
<span class="go">2016-04-06  0.171465  0.737086</span>
<span class="go">2016-04-07  0.127029  0.369650</span>
<span class="go">2016-04-08  0.604334  0.103104</span>
<span class="go">2016-04-09  0.802374  0.945553</span>

<span class="go">[5 rows x 2 columns]</span>
</pre></div>
</div>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="gh">Out[2]:</span>
<span class="go">&lt;class 'pandas.core.panel.Panel'&gt;</span>
<span class="go">Dimensions: 100 (items) x 2 (major_axis) x 2 (minor_axis)</span>
<span class="go">Items axis: 2016-01-01 00:00:00 to 2016-04-09 00:00:00</span>
<span class="go">Major_axis axis: A to B</span>
<span class="go">Minor_axis axis: A to B</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [85]: </span><span class="n">res</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>

<span class="gp">In [86]: </span><span class="n">res</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
<span class="gh">Out[86]: </span>
<span class="go">bar                    A         B</span>
<span class="go">foo        bar                    </span>
<span class="go">2016-04-07 B   -0.132090  1.000000</span>
<span class="go">2016-04-08 A    1.000000 -0.145775</span>
<span class="go">           B   -0.145775  1.000000</span>
<span class="go">2016-04-09 A    1.000000  0.119645</span>
<span class="go">           B    0.119645  1.000000</span>

<span class="go">[5 rows x 2 columns]</span>
</pre></div>
</div>
<p>检索横截面的相关矩阵</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [87]: </span><span class="n">df</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">'2016-04-07'</span><span class="p">]</span>
<span class="gh">Out[87]: </span>
<span class="go">bar        A        B</span>
<span class="go">bar                  </span>
<span class="go">A    1.00000 -0.13209</span>
<span class="go">B   -0.13209  1.00000</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
</section>
<section id="hdfstore-where-string-comparison">
<span id="whatsnew-0200-api-breaking-hdfstore-where"></span><h3>HDFStore 字符串比较<a class="headerlink" href="v0.20.0.html#hdfstore-where-string-comparison" title="Link to this heading">#</a></h3>
<p>在以前的版本中，大多数类型可以与 <code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> 中的字符串列进行比较，通常会导致无效比较，返回一个空结果帧。这些比较现在将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (GH 15492)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [88]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'unparsed_date'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'2014-01-01'</span><span class="p">,</span> <span class="s1">'2014-01-01'</span><span class="p">]})</span>

<span class="gp">In [89]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">'store.h5'</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s1">'key'</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">'table'</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [90]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[90]: </span>
<span class="go">unparsed_date    object</span>
<span class="go">Length: 1, dtype: object</span>
</pre></div>
</div>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">'store.h5'</span><span class="p">,</span> <span class="s1">'key'</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s1">'unparsed_date &gt; ts'</span><span class="p">)</span>
<span class="go">File "&lt;string&gt;", line 1</span>
<span class="go">  (unparsed_date &gt; 1970-01-01 00:00:01.388552400)</span>
<span class="go">                        ^</span>
<span class="go">SyntaxError: invalid token</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'2014-01-01'</span><span class="p">)</span>

<span class="gp">In [19]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">'store.h5'</span><span class="p">,</span> <span class="s1">'key'</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s1">'unparsed_date &gt; ts'</span><span class="p">)</span>
<span class="go">TypeError: Cannot compare 2014-01-01 00:00:00 of</span>
<span class="go">type &lt;class 'pandas.tslib.Timestamp'&gt; to string column</span>
</pre></div>
</div>
</section>
<section id="index-intersection-and-inner-join-now-preserve-the-order-of-the-left-index">
<span id="whatsnew-0200-api-breaking-index-order"></span><h3>Index.intersection 和内连接现在保留左 Index 的顺序<a class="headerlink" href="v0.20.0.html#index-intersection-and-inner-join-now-preserve-the-order-of-the-left-index" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.Index.intersection.html#pandas.Index.intersection" title="pandas.Index.intersection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.intersection()</span></code></a> 现在保留调用 <code class="docutils literal notranslate"><span class="pre">Index</span></code>（左侧）的顺序，而不是另一个 <code class="docutils literal notranslate"><span class="pre">Index</span></code>（右侧）的顺序 (GH 15582)。这会影响内连接、<a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a>，以及 <code class="docutils literal notranslate"><span class="pre">.align</span></code> 方法。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Index.intersection</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [91]: </span><span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="gp">In [92]: </span><span class="n">left</span>
<span class="gh">Out[92]: </span><span class="go">Index([2, 1, 0], dtype='int64')</span>

<span class="gp">In [93]: </span><span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [94]: </span><span class="n">right</span>
<span class="gh">Out[94]: </span><span class="go">Index([1, 2, 3], dtype='int64')</span>
</pre></div>
</div>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">left</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
<span class="gh">Out[4]: </span><span class="go">Int64Index([1, 2], dtype='int64')</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [95]: </span><span class="n">left</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
<span class="gh">Out[95]: </span><span class="go">Index([2, 1], dtype='int64')</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.join</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pd.merge</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [96]: </span><span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'a'</span><span class="p">:</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="gp">In [97]: </span><span class="n">left</span>
<span class="gh">Out[97]: </span>
<span class="go">    a</span>
<span class="go">2  20</span>
<span class="go">1  10</span>
<span class="go">0   0</span>

<span class="go">[3 rows x 1 columns]</span>

<span class="gp">In [98]: </span><span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'b'</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [99]: </span><span class="n">right</span>
<span class="gh">Out[99]: </span>
<span class="go">     b</span>
<span class="go">1  100</span>
<span class="go">2  200</span>
<span class="go">3  300</span>

<span class="go">[3 rows x 1 columns]</span>
</pre></div>
</div>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">left</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">'inner'</span><span class="p">)</span>
<span class="gh">Out[4]:</span>
<span class="go">   a    b</span>
<span class="go">1  10  100</span>
<span class="go">2  20  200</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [100]: </span><span class="n">left</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">'inner'</span><span class="p">)</span>
<span class="gh">Out[100]: </span>
<span class="go">    a    b</span>
<span class="go">2  20  200</span>
<span class="go">1  10  100</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="pivot-table-always-returns-a-dataframe">
<span id="whatsnew-0200-api-breaking-pivot-table"></span><h3>Pivot 表格总是返回 DataFrame<a class="headerlink" href="v0.20.0.html#pivot-table-always-returns-a-dataframe" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pivot_table()</span></code></a> 的文档声明它*总是*返回一个 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>。这里修复了一个错误，该错误允许它在某些情况下返回一个 <code class="docutils literal notranslate"><span class="pre">Series</span></code>。(GH 4386)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [101]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'col1'</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="gp">   .....: </span>                   <span class="s1">'col2'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'C'</span><span class="p">,</span> <span class="s1">'D'</span><span class="p">,</span> <span class="s1">'E'</span><span class="p">],</span>
<span class="gp">   .....: </span>                   <span class="s1">'col3'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">]})</span>
<span class="gp">   .....: </span>

<span class="gp">In [102]: </span><span class="n">df</span>
<span class="gh">Out[102]: </span>
<span class="go">   col1 col2  col3</span>
<span class="go">0     3    C     1</span>
<span class="go">1     4    D     3</span>
<span class="go">2     5    E     9</span>

<span class="go">[3 rows x 3 columns]</span>
</pre></div>
</div>
<p>之前的行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="s1">'col1'</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'col3'</span><span class="p">,</span> <span class="s1">'col2'</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s2">"sum"</span><span class="p">)</span>
<span class="gh">Out[2]:</span>
<span class="go">col3  col2</span>
<span class="go">1     C       3</span>
<span class="go">3     D       4</span>
<span class="go">9     E       5</span>
<span class="go">Name: col1, dtype: int64</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [103]: </span><span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="s1">'col1'</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'col3'</span><span class="p">,</span> <span class="s1">'col2'</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s2">"sum"</span><span class="p">)</span>
<span class="gh">Out[103]: </span>
<span class="go">           col1</span>
<span class="go">col3 col2      </span>
<span class="go">1    C        3</span>
<span class="go">3    D        4</span>
<span class="go">9    E        5</span>

<span class="go">[3 rows x 1 columns]</span>
</pre></div>
</div>
</section>
<section id="other-api-changes">
<span id="whatsnew-0200-api"></span><h3>其他 API 更改<a class="headerlink" href="v0.20.0.html#other-api-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numexpr</span></code> 版本现在要求 >= 2.4.6，如果不满足此要求，将完全不使用它 (GH 15213)。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CParserError</span></code> 在 <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中已重命名为 <code class="docutils literal notranslate"><span class="pre">ParserError</span></code>，并将在未来移除 (GH 12665)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseArray.cumsum()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">SparseSeries.cumsum()</span></code> 现在将分别始终返回 <code class="docutils literal notranslate"><span class="pre">SparseArray</span></code> 和 <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> (GH 12855)</p></li>
<li><p>带有空 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 的 <code class="docutils literal notranslate"><span class="pre">DataFrame.applymap()</span></code> 将返回空 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 的副本，而不是 <code class="docutils literal notranslate"><span class="pre">Series</span></code> (GH 8222)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.map()</span></code> 现在尊重具有 <code class="docutils literal notranslate"><span class="pre">__missing__</span></code> 方法的字典子类的默认值，例如 <code class="docutils literal notranslate"><span class="pre">collections.Counter</span></code> (GH 15999)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.loc</span></code> 与 <code class="docutils literal notranslate"><span class="pre">.ix</span></code> 兼容，可以接受迭代器和具名元组 (GH 15120)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interpolate()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">fillna()</span></code> 如果 <code class="docutils literal notranslate"><span class="pre">limit</span></code> 关键字参数不大于 0，将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>。(GH 9217)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 现在将在 <code class="docutils literal notranslate"><span class="pre">dialect</span></code> 参数和用户提供的值发生冲突时发出 <code class="docutils literal notranslate"><span class="pre">ParserWarning</span></code> (GH 14898)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 对于 C 引擎，如果引号字符大于一个字节，现在将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (GH 11592)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inplace</span></code> 参数现在需要一个布尔值，否则会抛出 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (GH 14189)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.api.types.is_datetime64_ns_dtype</span></code> 现在将对时区感知 dtype 报告 <code class="docutils literal notranslate"><span class="pre">True</span></code>，类似于 <code class="docutils literal notranslate"><span class="pre">pandas.api.types.is_datetime64_any_dtype</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.asof()</span></code> 如果未找到匹配项，将返回一个填充了空值的 <code class="docutils literal notranslate"><span class="pre">Series</span></code>，而不是标量 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (GH 15118)</p></li>
<li><p>对 NDFrame 对象的 <code class="docutils literal notranslate"><span class="pre">copy.copy()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">copy.deepcopy()</span></code> 函数的特定支持 (GH 15444)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.sort_values()</span></code> 接受一个包含一个布尔值的列表，以与 <code class="docutils literal notranslate"><span class="pre">DataFrame.sort_values()</span></code> 的行为保持一致 (GH 15604)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.merge()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.join()</span></code> 在 <code class="docutils literal notranslate"><span class="pre">category</span></code> dtype 列上操作时，现在会尽可能保留 category dtype (GH 10409)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseDataFrame.default_fill_value</span></code> 将为 0，以前从 <code class="docutils literal notranslate"><span class="pre">pd.get_dummies(...,</span> <span class="pre">sparse=True)</span></code> 返回时为 <code class="docutils literal notranslate"><span class="pre">nan</span></code> (GH 15594)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.str.match</span></code> 的默认行为已从提取组更改为匹配模式。提取行为自 pandas 0.13.0 版本以来已弃用，可以通过 <code class="docutils literal notranslate"><span class="pre">Series.str.extract</span></code> 方法完成 (GH 5224)。因此，<code class="docutils literal notranslate"><span class="pre">as_indexer</span></code> 关键字被忽略（不再需要指定新行为）并被弃用。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NaT</span></code> 现在将正确地报告日期时间布尔操作（如 <code class="docutils literal notranslate"><span class="pre">is_month_start</span></code>）的 <code class="docutils literal notranslate"><span class="pre">False</span></code> (GH 15781)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NaT</span></code> 现在将为 <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Period</span></code> 访问器（如 <code class="docutils literal notranslate"><span class="pre">days</span></code> 和 <code class="docutils literal notranslate"><span class="pre">quarter</span></code>）正确返回 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> (GH 15782)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NaT</span></code> 现在将为 <code class="docutils literal notranslate"><span class="pre">tz_localize</span></code> 和 <code class="docutils literal notranslate"><span class="pre">tz_convert</span></code> 方法返回 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> (GH 15830)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Panel</span></code> 构造函数在输入无效且未指定轴时，现在将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">PandasError</span></code> (GH 15541)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Panel</span></code> 构造函数在输入无效且未指定轴时，现在将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">pandas.core.common.PandasError</span></code>；异常 <code class="docutils literal notranslate"><span class="pre">PandasError</span></code> 也被移除。(GH 15541)</p></li>
<li><p>异常 <code class="docutils literal notranslate"><span class="pre">pandas.core.common.AmbiguousIndexError</span></code> 已被移除，因为它未被引用 (GH 15541)</p></li>
</ul>
</section>
</section>
<section id="reorganization-of-the-library-privacy-changes">
<span id="whatsnew-0200-privacy"></span><h2>库的重组：隐私更改<a class="headerlink" href="v0.20.0.html#reorganization-of-the-library-privacy-changes" title="Link to this heading">#</a></h2>
<section id="modules-privacy-has-changed">
<span id="whatsnew-0200-privacy-extensions"></span><h3>模块隐私已更改<a class="headerlink" href="v0.20.0.html#modules-privacy-has-changed" title="Link to this heading">#</a></h3>
<p>一些以前的公共 python/c/c++/cython 扩展模块已被移动和/或重命名。这些都已从公共 API 中移除。此外，<code class="docutils literal notranslate"><span class="pre">pandas.core</span></code>、<code class="docutils literal notranslate"><span class="pre">pandas.compat</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pandas.util</span></code> 顶级模块现在被视为私有。如果指示，引用这些模块将发出弃用警告。(GH 12588)</p>
<table class="table">
<colgroup>
<col style="width: 46.9%" />
<col style="width: 46.9%" />
<col style="width: 6.2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>旧位置</p></th>
<th class="head"><p>新位置</p></th>
<th class="head"><p>已弃用</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pandas.lib</p></td>
<td><p>pandas._libs.lib</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pandas.tslib</p></td>
<td><p>pandas._libs.tslib</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pandas.computation</p></td>
<td><p>pandas.core.computation</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pandas.msgpack</p></td>
<td><p>pandas.io.msgpack</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas.index</p></td>
<td><p>pandas._libs.index</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas.algos</p></td>
<td><p>pandas._libs.algos</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas.hashtable</p></td>
<td><p>pandas._libs.hashtable</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas.indexes</p></td>
<td><p>pandas.core.indexes</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas.json</p></td>
<td><p>pandas._libs.json / pandas.io.json</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pandas.parser</p></td>
<td><p>pandas._libs.parsers</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pandas.formats</p></td>
<td><p>pandas.io.formats</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas.sparse</p></td>
<td><p>pandas.core.sparse</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas.tools</p></td>
<td><p>pandas.core.reshape</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pandas.types</p></td>
<td><p>pandas.core.dtypes</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pandas.io.sas.saslib</p></td>
<td><p>pandas.io.sas._sas</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas._join</p></td>
<td><p>pandas._libs.join</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas._hash</p></td>
<td><p>pandas._libs.hashing</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas._period</p></td>
<td><p>pandas._libs.period</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas._sparse</p></td>
<td><p>pandas._libs.sparse</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas._testing</p></td>
<td><p>pandas._libs.testing</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas._window</p></td>
<td><p>pandas._libs.window</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>创建了一些新的子包，它们具有未直接在顶级命名空间中公开的公共功能：<code class="docutils literal notranslate"><span class="pre">pandas.errors</span></code>、<code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pandas.testing</span></code>（更多详细信息见下文）。连同 <code class="docutils literal notranslate"><span class="pre">pandas.api.types</span></code> 以及 <code class="docutils literal notranslate"><span class="pre">pandas.io</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pandas.tseries</span></code> 子模块中的某些函数，这些现在是公共子包。</p>
<p>进一步更改</p>
<ul class="simple">
<li><p>函数 <a class="reference internal" href="../reference/api/pandas.api.types.union_categoricals.html#pandas.api.types.union_categoricals" title="pandas.api.types.union_categoricals"><code class="xref py py-func docutils literal notranslate"><span class="pre">union_categoricals()</span></code></a> 现在可以从 <code class="docutils literal notranslate"><span class="pre">pandas.api.types</span></code> 导入，以前是从 <code class="docutils literal notranslate"><span class="pre">pandas.types.concat</span></code> 导入 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15998">GH 15998</a>)</p></li>
<li><p>类型导入 <code class="docutils literal notranslate"><span class="pre">pandas.tslib.NaTType</span></code> 已弃用，可以使用 <code class="docutils literal notranslate"><span class="pre">type(pandas.NaT)</span></code> 代替 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16146">GH 16146</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.tools.hashing</span></code> 中的公共函数已从该位置弃用，但现在可以从 <code class="docutils literal notranslate"><span class="pre">pandas.util</span></code> 导入 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16223">GH 16223</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.util</span></code> 中的模块：<code class="docutils literal notranslate"><span class="pre">decorators</span></code>、<code class="docutils literal notranslate"><span class="pre">print_versions</span></code>、<code class="docutils literal notranslate"><span class="pre">doctools</span></code>、<code class="docutils literal notranslate"><span class="pre">validators</span></code>、<code class="docutils literal notranslate"><span class="pre">depr_module</span></code> 现已设为私有。只有在 <code class="docutils literal notranslate"><span class="pre">pandas.util</span></code> 本身中公开的函数才是公共的 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16223">GH 16223</a>)</p></li>
</ul>
</section>
<section id="pandas-errors">
<span id="whatsnew-0200-privacy-errors"></span><h3><code class="docutils literal notranslate"><span class="pre">pandas.errors</span></code><a class="headerlink" href="v0.20.0.html#pandas-errors" title="Link to this heading">#</a></h3>
<p>我们正在为所有 pandas 异常和警告添加一个标准的公共模块 <code class="docutils literal notranslate"><span class="pre">pandas.errors</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14800">GH 14800</a>)。以前，这些异常和警告可以从 <code class="docutils literal notranslate"><span class="pre">pandas.core.common</span></code> 或 <code class="docutils literal notranslate"><span class="pre">pandas.io.common</span></code> 导入。这些异常和警告将在未来的版本中从 <code class="docutils literal notranslate"><span class="pre">*.common</span></code> 位置移除。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15541">GH 15541</a>)</p>
<p>以下现在是此 API 的一部分</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">'DtypeWarning'</span><span class="p">,</span>
 <span class="s1">'EmptyDataError'</span><span class="p">,</span>
 <span class="s1">'OutOfBoundsDatetime'</span><span class="p">,</span>
 <span class="s1">'ParserError'</span><span class="p">,</span>
 <span class="s1">'ParserWarning'</span><span class="p">,</span>
 <span class="s1">'PerformanceWarning'</span><span class="p">,</span>
 <span class="s1">'UnsortedIndexError'</span><span class="p">,</span>
 <span class="s1">'UnsupportedFunctionCall'</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="pandas-testing">
<span id="whatsnew-0200-privacy-testing"></span><h3><code class="docutils literal notranslate"><span class="pre">pandas.testing</span></code><a class="headerlink" href="v0.20.0.html#pandas-testing" title="Link to this heading">#</a></h3>
<p>我们正在添加一个标准模块，用于公开 <code class="docutils literal notranslate"><span class="pre">pandas.testing</span></code> 中的公共测试函数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9895">GH 9895</a>)。这些函数可以在为使用 pandas 对象的函数编写测试时使用。</p>
<p>以下测试函数现在是此 API 的一部分</p>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.testing.assert_frame_equal.html#pandas.testing.assert_frame_equal" title="pandas.testing.assert_frame_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_frame_equal()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.testing.assert_series_equal.html#pandas.testing.assert_series_equal" title="pandas.testing.assert_series_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_series_equal()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.testing.assert_index_equal.html#pandas.testing.assert_index_equal" title="pandas.testing.assert_index_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_index_equal()</span></code></a></p></li>
</ul>
</section>
<section id="pandas-plotting">
<span id="whatsnew-0200-privacy-plotting"></span><h3><code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code><a class="headerlink" href="v0.20.0.html#pandas-plotting" title="Link to this heading">#</a></h3>
<p>已添加一个新的公共 <code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code> 模块，其中包含以前位于 <code class="docutils literal notranslate"><span class="pre">pandas.tools.plotting</span></code> 或顶层命名空间中的绘图功能。有关更多详细信息，请参阅<a class="reference internal" href="v0.20.0.html#whatsnew-0200-privacy-deprecate-plotting"><span class="std std-ref">弃用部分</span></a>。</p>
</section>
<section id="other-development-changes">
<span id="whatsnew-0200-privacy-development"></span><h3>其他开发变更<a class="headerlink" href="v0.20.0.html#other-development-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>现在，开发 pandas 需要 <code class="docutils literal notranslate"><span class="pre">cython</span> <span class="pre">&gt;=</span> <span class="pre">0.23</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14831">GH 14831</a>)</p></li>
<li><p>要求 cython 版本至少为 0.23，以避免字符编码问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14699">GH 14699</a>)</p></li>
<li><p>测试框架已切换为使用 <a class="reference external" href="http://doc.pytest.org/en/latest">pytest</a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13097">GH 13097</a>)</p></li>
<li><p>测试目录布局重组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14854">GH 14854</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15707">GH 15707</a>)。</p></li>
</ul>
</section>
</section>
<section id="deprecations">
<span id="whatsnew-0200-deprecations"></span><h2>弃用<a class="headerlink" href="v0.20.0.html#deprecations" title="Link to this heading">#</a></h2>
<section id="deprecate-ix">
<span id="whatsnew-0200-api-breaking-deprecate-ix"></span><h3>弃用 <code class="docutils literal notranslate"><span class="pre">.ix</span></code><a class="headerlink" href="v0.20.0.html#deprecate-ix" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">.ix</span></code> 索引器已弃用，取而代之的是更严格的 <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.loc</span></code> 索引器。<code class="docutils literal notranslate"><span class="pre">.ix</span></code> 在推断用户想要做什么方面提供了很多“魔法”。更具体地说，<code class="docutils literal notranslate"><span class="pre">.ix</span></code> 可以根据索引的数据类型决定是按<em>位置</em>索引还是通过<em>标签</em>索引。多年来，这导致了相当多的用户困惑。完整的索引文档请参阅<a class="reference internal" href="../user_guide/indexing.html#indexing"><span class="std std-ref">此处</span></a>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14218">GH 14218</a>)</p>
<p>推荐的索引方法是</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.loc</span></code> 如果您想进行<em>标签</em>索引</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.iloc</span></code> 如果您想进行<em>位置</em>索引。</p></li>
</ul>
<p>现在使用 <code class="docutils literal notranslate"><span class="pre">.ix</span></code> 将显示一个 <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code>，并附有如何转换代码的一些示例的链接<a class="reference external" href="https://pandas.ac.cn/pandas-docs/version/1.0/user_guide/indexing.html#ix-indexer-is-deprecated">此处</a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [104]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   .....: </span>                   <span class="s1">'B'</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]},</span>
<span class="gp">   .....: </span>                  <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">'abc'</span><span class="p">))</span>
<span class="gp">   .....: </span>

<span class="gp">In [105]: </span><span class="n">df</span>
<span class="gh">Out[105]: </span>
<span class="go">   A  B</span>
<span class="go">a  1  4</span>
<span class="go">b  2  5</span>
<span class="go">c  3  6</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p>以前的行为，如果您希望从索引的“A”列中获取第0个和第2个元素。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">'A'</span><span class="p">]</span>
<span class="gh">Out[3]:</span>
<span class="go">a    1</span>
<span class="go">c    3</span>
<span class="go">Name: A, dtype: int64</span>
</pre></div>
</div>
<p>使用 <code class="docutils literal notranslate"><span class="pre">.loc</span></code>。这里我们将从索引中选择适当的索引，然后使用<em>标签</em>索引。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [106]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span> <span class="s1">'A'</span><span class="p">]</span>
<span class="gh">Out[106]: </span>
<span class="go">a    1</span>
<span class="go">c    3</span>
<span class="go">Name: A, Length: 2, dtype: int64</span>
</pre></div>
</div>
<p>使用 <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>。这里我们将获取“A”列的位置，然后使用<em>位置</em>索引来选择内容。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [107]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="s1">'A'</span><span class="p">)]</span>
<span class="gh">Out[107]: </span>
<span class="go">a    1</span>
<span class="go">c    3</span>
<span class="go">Name: A, Length: 2, dtype: int64</span>
</pre></div>
</div>
</section>
<section id="deprecate-panel">
<span id="whatsnew-0200-api-breaking-deprecate-panel"></span><h3>弃用 Panel<a class="headerlink" href="v0.20.0.html#deprecate-panel" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Panel</span></code> 已弃用，并将在未来版本中移除。表示 3 维数据的推荐方式是通过 <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_frame()</span></code> 方法在 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 上使用 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code>，或者使用 <a class="reference external" href="http://xarray.pydata.org/en/stable/">xarray 包</a>。pandas 提供了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_xarray()</span></code> 方法来自动化此转换 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13563">GH 13563</a>)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [133]: </span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas._testing</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tm</span>

<span class="gp">In [134]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">tm</span><span class="o">.</span><span class="n">makePanel</span><span class="p">()</span>

<span class="gp">In [135]: </span><span class="n">p</span>
<span class="gh">Out[135]:</span>
<span class="go">&lt;class 'pandas.core.panel.Panel'&gt;</span>
<span class="go">Dimensions: 3 (items) x 3 (major_axis) x 4 (minor_axis)</span>
<span class="go">Items axis: ItemA to ItemC</span>
<span class="go">Major_axis axis: 2000-01-03 00:00:00 to 2000-01-05 00:00:00</span>
<span class="go">Minor_axis axis: A to D</span>
</pre></div>
</div>
<p>转换为 MultiIndex DataFrame</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [136]: </span><span class="n">p</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
<span class="gh">Out[136]:</span>
<span class="go">                     ItemA     ItemB     ItemC</span>
<span class="go">major      minor</span>
<span class="go">2000-01-03 A      0.628776 -1.409432  0.209395</span>
<span class="go">           B      0.988138 -1.347533 -0.896581</span>
<span class="go">           C     -0.938153  1.272395 -0.161137</span>
<span class="go">           D     -0.223019 -0.591863 -1.051539</span>
<span class="go">2000-01-04 A      0.186494  1.422986 -0.592886</span>
<span class="go">           B     -0.072608  0.363565  1.104352</span>
<span class="go">           C     -1.239072 -1.449567  0.889157</span>
<span class="go">           D      2.123692 -0.414505 -0.319561</span>
<span class="go">2000-01-05 A      0.952478 -2.147855 -1.473116</span>
<span class="go">           B     -0.550603 -0.014752 -0.431550</span>
<span class="go">           C      0.139683 -1.195524  0.288377</span>
<span class="go">           D      0.122273 -1.425795 -0.619993</span>

<span class="go">[12 rows x 3 columns]</span>
</pre></div>
</div>
<p>转换为 xarray DataArray</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [137]: </span><span class="n">p</span><span class="o">.</span><span class="n">to_xarray</span><span class="p">()</span>
<span class="gh">Out[137]:</span>
<span class="go">&lt;xarray.DataArray (items: 3, major_axis: 3, minor_axis: 4)&gt;</span>
<span class="go">array([[[ 0.628776,  0.988138, -0.938153, -0.223019],</span>
<span class="go">        [ 0.186494, -0.072608, -1.239072,  2.123692],</span>
<span class="go">        [ 0.952478, -0.550603,  0.139683,  0.122273]],</span>

<span class="go">       [[-1.409432, -1.347533,  1.272395, -0.591863],</span>
<span class="go">        [ 1.422986,  0.363565, -1.449567, -0.414505],</span>
<span class="go">        [-2.147855, -0.014752, -1.195524, -1.425795]],</span>

<span class="go">       [[ 0.209395, -0.896581, -0.161137, -1.051539],</span>
<span class="go">        [-0.592886,  1.104352,  0.889157, -0.319561],</span>
<span class="go">        [-1.473116, -0.43155 ,  0.288377, -0.619993]]])</span>
<span class="go">Coordinates:</span>
<span class="go">  * items       (items) object 'ItemA' 'ItemB' 'ItemC'</span>
<span class="go">  * major_axis  (major_axis) datetime64[ns] 2000-01-03 2000-01-04 2000-01-05</span>
<span class="go">  * minor_axis  (minor_axis) object 'A' 'B' 'C' 'D'</span>
</pre></div>
</div>
</section>
<section id="deprecate-groupby-agg-with-a-dictionary-when-renaming">
<span id="whatsnew-0200-api-breaking-deprecate-group-agg-dict"></span><h3>弃用 groupby.agg() 在重命名时使用字典<a class="headerlink" href="v0.20.0.html#deprecate-groupby-agg-with-a-dictionary-when-renaming" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">.groupby(..).agg(..)</span></code>、<code class="docutils literal notranslate"><span class="pre">.rolling(..).agg(..)</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.resample(..).agg(..)</span></code> 语法可以接受多种输入，包括标量、列表以及将列名映射到标量或列表的字典。这提供了一种有用的语法，用于构建多个（可能不同）聚合。</p>
<p>然而，<code class="docutils literal notranslate"><span class="pre">.agg(..)</span></code> <em>也</em>可以接受一个允许对结果列进行“重命名”的字典。这是一种复杂且令人困惑的语法，并且在 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 之间不一致。我们正在弃用此“重命名”功能。</p>
<ul class="simple">
<li><p>我们正在弃用向分组/滚动/重采样的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 传递字典。这允许用户 <code class="docutils literal notranslate"><span class="pre">rename</span></code> 结果聚合，但这与向分组的 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 传递字典具有完全不同的含义，后者接受列到聚合的映射。</p></li>
<li><p>我们以类似的方式弃用向分组/滚动/重采样的 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 传递字典的字典。</p></li>
</ul>
<p>这是一个说明性示例</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [108]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">   .....: </span>                   <span class="s1">'B'</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">   .....: </span>                   <span class="s1">'C'</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)})</span>
<span class="gp">   .....: </span>

<span class="gp">In [109]: </span><span class="n">df</span>
<span class="gh">Out[109]: </span>
<span class="go">   A  B  C</span>
<span class="go">0  1  0  0</span>
<span class="go">1  1  1  1</span>
<span class="go">2  1  2  2</span>
<span class="go">3  2  3  3</span>
<span class="go">4  2  4  4</span>

<span class="go">[5 rows x 3 columns]</span>
</pre></div>
</div>
<p>这是一个计算不同列的不同聚合的典型有用语法。这是一种自然且有用的语法。我们通过获取指定列并应用函数列表来从字典到列表进行聚合。这会为列返回一个 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code>（这<em>未</em>弃用）。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [110]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'A'</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">'B'</span><span class="p">:</span> <span class="s1">'sum'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">:</span> <span class="s1">'min'</span><span class="p">})</span>
<span class="gh">Out[110]: </span>
<span class="go">   B  C</span>
<span class="go">A      </span>
<span class="go">1  3  0</span>
<span class="go">2  7  3</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
<p>这是第一个弃用示例，将字典传递给分组的 <code class="docutils literal notranslate"><span class="pre">Series</span></code>。这是聚合和重命名的组合</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'A'</span><span class="p">)</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">'foo'</span><span class="p">:</span> <span class="s1">'count'</span><span class="p">})</span>
<span class="go">FutureWarning: using a dict on a Series for aggregation</span>
<span class="go">is deprecated and will be removed in a future version</span>

<span class="gh">Out[6]:</span>
<span class="go">   foo</span>
<span class="go">A</span>
<span class="go">1    3</span>
<span class="go">2    2</span>
</pre></div>
</div>
<p>您可以更地道地完成相同的操作，方法是</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [111]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'A'</span><span class="p">)</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">'count'</span><span class="p">])</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">'count'</span><span class="p">:</span> <span class="s1">'foo'</span><span class="p">})</span>
<span class="gh">Out[111]: </span>
<span class="go">   foo</span>
<span class="go">A     </span>
<span class="go">1    3</span>
<span class="go">2    2</span>

<span class="go">[2 rows x 1 columns]</span>
</pre></div>
</div>
<p>这是第二个弃用示例，将字典的字典传递给分组的 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">23</span><span class="p">]:</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'A'</span><span class="p">)</span>
    <span class="o">...</span><span class="p">:</span>    <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">'B'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'foo'</span><span class="p">:</span> <span class="s1">'sum'</span><span class="p">},</span> <span class="s1">'C'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'bar'</span><span class="p">:</span> <span class="s1">'min'</span><span class="p">}})</span>
    <span class="o">...</span><span class="p">:</span>  <span class="p">)</span>
<span class="ne">FutureWarning</span><span class="p">:</span> <span class="n">using</span> <span class="n">a</span> <span class="nb">dict</span> <span class="k">with</span> <span class="n">renaming</span> <span class="ow">is</span> <span class="n">deprecated</span> <span class="ow">and</span>
<span class="n">will</span> <span class="n">be</span> <span class="n">removed</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">future</span> <span class="n">version</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">23</span><span class="p">]:</span>
     <span class="n">B</span>   <span class="n">C</span>
   <span class="n">foo</span> <span class="n">bar</span>
<span class="n">A</span>
<span class="mi">1</span>   <span class="mi">3</span>   <span class="mi">0</span>
<span class="mi">2</span>   <span class="mi">7</span>   <span class="mi">3</span>
</pre></div>
</div>
<p>您可以通过以下方式实现几乎相同的效果</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [112]: </span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'A'</span><span class="p">)</span>
<span class="gp">   .....: </span>   <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">'B'</span><span class="p">:</span> <span class="s1">'sum'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">:</span> <span class="s1">'min'</span><span class="p">})</span>
<span class="gp">   .....: </span>   <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">'B'</span><span class="p">:</span> <span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">:</span> <span class="s1">'bar'</span><span class="p">})</span>
<span class="gp">   .....: </span> <span class="p">)</span>
<span class="gp">   .....: </span>
<span class="gh">Out[112]: </span>
<span class="go">   foo  bar</span>
<span class="go">A          </span>
<span class="go">1    3    0</span>
<span class="go">2    7    3</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
</section>
<section id="deprecate-plotting">
<span id="whatsnew-0200-privacy-deprecate-plotting"></span><h3>弃用 .plotting<a class="headerlink" href="v0.20.0.html#deprecate-plotting" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">pandas.tools.plotting</span></code> 模块已弃用，取而代之的是顶层 <code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code> 模块。所有公共绘图函数现在都可以从 <code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code> 获得 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12548">GH 12548</a>)。</p>
<p>此外，顶层 <code class="docutils literal notranslate"><span class="pre">pandas.scatter_matrix</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pandas.plot_params</span></code> 已弃用。用户也可以从 <code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code> 导入这些。</p>
<p>以前的脚本</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">scatter_matrix</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">scatter_matrix</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<p>应改为</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">scatter_matrix</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="other-deprecations">
<span id="whatsnew-0200-deprecations-other"></span><h3>其他弃用<a class="headerlink" href="v0.20.0.html#other-deprecations" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SparseArray.to_dense()</span></code> 已弃用 <code class="docutils literal notranslate"><span class="pre">fill</span></code> 参数，因为该参数未被遵守 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14647">GH 14647</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseSeries.to_dense()</span></code> 已弃用 <code class="docutils literal notranslate"><span class="pre">sparse_only</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14647">GH 14647</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.repeat()</span></code> 已弃用 <code class="docutils literal notranslate"><span class="pre">reps</span></code> 参数，转而使用 <code class="docutils literal notranslate"><span class="pre">repeats</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12662">GH 12662</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> 构造函数和 <code class="docutils literal notranslate"><span class="pre">.astype</span></code> 方法已弃用接受没有频率的时间戳 dtypes（例如 <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code>）作为 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15524">GH 15524</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Index.repeat()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">MultiIndex.repeat()</span></code> 已弃用 <code class="docutils literal notranslate"><span class="pre">n</span></code> 参数，转而使用 <code class="docutils literal notranslate"><span class="pre">repeats</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12662">GH 12662</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical.searchsorted()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Series.searchsorted()</span></code> 已弃用 <code class="docutils literal notranslate"><span class="pre">v</span></code> 参数，转而使用 <code class="docutils literal notranslate"><span class="pre">value</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12662">GH 12662</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TimedeltaIndex.searchsorted()</span></code>、<code class="docutils literal notranslate"><span class="pre">DatetimeIndex.searchsorted()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">PeriodIndex.searchsorted()</span></code> 已弃用 <code class="docutils literal notranslate"><span class="pre">key</span></code> 参数，转而使用 <code class="docutils literal notranslate"><span class="pre">value</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12662">GH 12662</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code> 已弃用 <code class="docutils literal notranslate"><span class="pre">raise_on_error</span></code> 参数，转而使用 <code class="docutils literal notranslate"><span class="pre">errors</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14878">GH 14878</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.sortlevel</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame.sortlevel</span></code> 已弃用，转而使用 <code class="docutils literal notranslate"><span class="pre">Series.sort_index</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame.sort_index</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15099">GH 15099</a>)</p></li>
<li><p>从 <code class="docutils literal notranslate"><span class="pre">pandas.tools.merge</span></code> 导入 <code class="docutils literal notranslate"><span class="pre">concat</span></code> 已弃用，转而支持从 <code class="docutils literal notranslate"><span class="pre">pandas</span></code> 命名空间导入。这只应影响显式导入 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15358">GH 15358</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series/DataFrame/Panel.consolidate()</span></code> 已作为公共方法弃用。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15483">GH 15483</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.str.match()</span></code> 的 <code class="docutils literal notranslate"><span class="pre">as_indexer</span></code> 关键字已弃用（被忽略的关键字） (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15257">GH 15257</a>)。</p></li>
<li><p>以下顶层 pandas 函数已弃用，并将在未来版本中移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13790">GH 13790</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15940">GH 15940</a>)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.pnow()</span></code>，已被 <code class="docutils literal notranslate"><span class="pre">Period.now()</span></code> 替换</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.Term</span></code> 已移除，因为它不适用于用户代码。在 HDFStore 中搜索时，请改用 where 子句中的内联字符串表达式</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.Expr</span></code> 已移除，因为它不适用于用户代码。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.match()</span></code> 已移除。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.groupby()</span></code>，已被直接在 <code class="docutils literal notranslate"><span class="pre">Series/DataFrame</span></code> 上使用 <code class="docutils literal notranslate"><span class="pre">.groupby()</span></code> 方法替换</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.get_store()</span></code>，已被直接调用 <code class="docutils literal notranslate"><span class="pre">pd.HDFStore(...)</span></code> 替换</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_any_int_dtype</span></code>、<code class="docutils literal notranslate"><span class="pre">is_floating_dtype</span></code> 和 <code class="docutils literal notranslate"><span class="pre">is_sequence</span></code> 已从 <code class="docutils literal notranslate"><span class="pre">pandas.api.types</span></code> 弃用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16042">GH 16042</a>)</p></li>
</ul>
</section>
</section>
<section id="removal-of-prior-version-deprecations-changes">
<span id="whatsnew-0200-prior-deprecations"></span><h2>移除先前版本的弃用/更改<a class="headerlink" href="v0.20.0.html#removal-of-prior-version-deprecations-changes" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.rpy</span></code> 模块已移除。类似功能可通过 <a class="reference external" href="https://rpy2.readthedocs.io/">rpy2</a> 项目访问。更多详情请参阅 <a class="reference external" href="https://pandas.ac.cn/pandas-docs/version/0.20/r_interface.html">R 接口文档</a>。</p></li>
<li><p>带有 <code class="docutils literal notranslate"><span class="pre">google-analytics</span></code> 接口的 <code class="docutils literal notranslate"><span class="pre">pandas.io.ga</span></code> 模块已移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11308">GH 11308</a>)。类似功能可在 <a class="reference external" href="https://github.com/panalysis/Google2Pandas">Google2Pandas</a> 包中找到。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.to_datetime</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pd.to_timedelta</span></code> 已弃用 <code class="docutils literal notranslate"><span class="pre">coerce</span></code> 参数，转而使用 <code class="docutils literal notranslate"><span class="pre">errors</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13602">GH 13602</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.stats.fama_macbeth</span></code>、<code class="docutils literal notranslate"><span class="pre">pandas.stats.ols</span></code>、<code class="docutils literal notranslate"><span class="pre">pandas.stats.plm</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pandas.stats.var</span></code>，以及顶层例程 <code class="docutils literal notranslate"><span class="pre">pandas.fama_macbeth</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pandas.ols</span></code> 已移除。类似功能可在 <a class="reference external" href="https://statsmodels.cn/dev/">statsmodels</a> 包中找到。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11898">GH 11898</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> 和 <code class="docutils literal notranslate"><span class="pre">SparseTimeSeries</span></code> 类，即 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 和 <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> 的别名，已移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10890">GH 10890</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15098">GH 15098</a>)。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.is_time_series</span></code> 已弃用，转而使用 <code class="docutils literal notranslate"><span class="pre">Series.index.is_all_dates</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15098">GH 15098</a>)</p></li>
<li><p>已弃用的 <code class="docutils literal notranslate"><span class="pre">irow</span></code>、<code class="docutils literal notranslate"><span class="pre">icol</span></code>、<code class="docutils literal notranslate"><span class="pre">iget</span></code> 和 <code class="docutils literal notranslate"><span class="pre">iget_value</span></code> 方法已移除，转而使用 <code class="docutils literal notranslate"><span class="pre">iloc</span></code> 和 <code class="docutils literal notranslate"><span class="pre">iat</span></code>，如 <a class="reference internal" href="v0.17.0.html#whatsnew-0170-deprecations"><span class="std std-ref">此处</span></a> 所述 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10711">GH 10711</a>)。</p></li>
<li><p>已弃用的 <code class="docutils literal notranslate"><span class="pre">DataFrame.iterkv()</span></code> 已移除，转而使用 <code class="docutils literal notranslate"><span class="pre">DataFrame.iteritems()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10711">GH 10711</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 构造函数已弃用 <code class="docutils literal notranslate"><span class="pre">name</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10632">GH 10632</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 已放弃对 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 类别dtypes的支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10748">GH 10748</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">take_last</span></code> 参数已从 <code class="docutils literal notranslate"><span class="pre">duplicated()</span></code>、<code class="docutils literal notranslate"><span class="pre">drop_duplicates()</span></code>、<code class="docutils literal notranslate"><span class="pre">nlargest()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">nsmallest()</span></code> 方法中移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10236">GH 10236</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10792">GH 10792</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10920">GH 10920</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code>、<code class="docutils literal notranslate"><span class="pre">Index</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 已移除 <code class="docutils literal notranslate"><span class="pre">sort</span></code> 和 <code class="docutils literal notranslate"><span class="pre">order</span></code> 方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10726">GH 10726</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pytables</span></code> 中的 where 子句仅接受字符串和表达式类型，而不接受其他数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12027">GH 12027</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 已移除 <code class="docutils literal notranslate"><span class="pre">combineAdd</span></code> 和 <code class="docutils literal notranslate"><span class="pre">combineMult</span></code> 方法，转而分别使用 <code class="docutils literal notranslate"><span class="pre">add</span></code> 和 <code class="docutils literal notranslate"><span class="pre">mul</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10735">GH 10735</a>)</p></li>
</ul>
</section>
<section id="performance-improvements">
<span id="whatsnew-0200-performance"></span><h2>性能改进<a class="headerlink" href="v0.20.0.html#performance-improvements" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>改进了 <code class="docutils literal notranslate"><span class="pre">pd.wide_to_long()</span></code> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14779">GH 14779</a>)</p></li>
<li><p>通过在 <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype 被推断为字符串时释放 GIL，改进了 <code class="docutils literal notranslate"><span class="pre">pd.factorize()</span></code> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14859">GH 14859</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16057">GH 16057</a>)</p></li>
<li><p>改进了使用不规则 DatetimeIndex（或 <code class="docutils literal notranslate"><span class="pre">compat_x=True</span></code>）进行时间序列绘图的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15073">GH 15073</a>)。</p></li>
<li><p>改进了 <code class="docutils literal notranslate"><span class="pre">groupby().cummin()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">groupby().cummax()</span></code> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15048">GH 15048</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15109">GH 15109</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15561">GH 15561</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15635">GH 15635</a>)</p></li>
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 索引时，性能得到改进，内存使用减少 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15245">GH 15245</a>)</p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">read_sas()</span></code> 方法中读取缓冲区对象时，如果未指定格式，则推断文件路径字符串而不是缓冲区对象。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14947">GH 14947</a>)</p></li>
<li><p>改进了分类数据的 <code class="docutils literal notranslate"><span class="pre">.rank()</span></code> 性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15498">GH 15498</a>)</p></li>
<li><p>改进了使用 <code class="docutils literal notranslate"><span class="pre">.unstack()</span></code> 时的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15503">GH 15503</a>)</p></li>
<li><p>改进了 <code class="docutils literal notranslate"><span class="pre">category</span></code> 列的合并/连接性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10409">GH 10409</a>)</p></li>
<li><p>改进了 <code class="docutils literal notranslate"><span class="pre">bool</span></code> 列的 <code class="docutils literal notranslate"><span class="pre">drop_duplicates()</span></code> 性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12963">GH 12963</a>)</p></li>
<li><p>改进了 <code class="docutils literal notranslate"><span class="pre">pd.core.groupby.GroupBy.apply</span></code> 在应用函数使用 group DataFrame 的 <code class="docutils literal notranslate"><span class="pre">.name</span></code> 属性时的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15062">GH 15062</a>)。</p></li>
<li><p>改进了使用列表或数组进行 <code class="docutils literal notranslate"><span class="pre">iloc</span></code> 索引的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15504">GH 15504</a>)。</p></li>
<li><p>改进了具有单调索引的 <code class="docutils literal notranslate"><span class="pre">Series.sort_index()</span></code> 性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15694">GH 15694</a>)</p></li>
<li><p>在某些平台使用缓冲读取时，<code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 的性能得到改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16039">GH 16039</a>)</p></li>
</ul>
</section>
<section id="bug-fixes">
<span id="whatsnew-0200-bug-fixes"></span><h2>Bug 修复<a class="headerlink" href="v0.20.0.html#bug-fixes" title="Link to this heading">#</a></h2>
<section id="conversion">
<h3>转换<a class="headerlink" href="v0.20.0.html#conversion" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Timestamp.replace</span></code> 中的一个 bug，现在在给定不正确的参数名称时会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>；以前会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15240">GH 15240</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Timestamp.replace</span></code> 中与传递长整型的兼容性 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15030">GH 15030</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> 在提供了时区时返回基于 UTC 的时间/日期属性的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13303">GH 13303</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/6538">GH 6538</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> 在构造期间错误地本地化时区的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11481">GH 11481</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15777">GH 15777</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 加法中允许溢出而不报错的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14816">GH 14816</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 在使用 <code class="docutils literal notranslate"><span class="pre">loc</span></code> 进行布尔索引时引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14946">GH 14946</a>)</p></li>
<li><p>捕获 <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> + <code class="docutils literal notranslate"><span class="pre">Timedelta/Offset</span></code> 操作中溢出的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15126">GH 15126</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DatetimeIndex.round()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Timestamp.round()</span></code> 在以毫秒或更小单位进行舍入时浮点精度问题的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14440">GH 14440</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15578">GH 15578</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">astype()</span></code> 中 <code class="docutils literal notranslate"><span class="pre">inf</span></code> 值被错误转换为整数的 bug。现在，对 Series 和 DataFrames 使用 <code class="docutils literal notranslate"><span class="pre">astype()</span></code> 时会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14265">GH 14265</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame(..).apply(to_numeric)</span></code> 在值类型为 decimal.Decimal 时的 bug。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14827">GH 14827</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">describe()</span></code> 中，当传递一个不包含中位数的 numpy 数组到 <code class="docutils literal notranslate"><span class="pre">percentiles</span></code> 关键字参数时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14908">GH 14908</a>)</p></li>
<li><p>清理了 <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 构造函数，包括更一致地对浮点数引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13277">GH 13277</a>)</p></li>
<li><p>在空 NDFrame 对象上使用 <code class="docutils literal notranslate"><span class="pre">__deepcopy__</span></code> 的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15370">GH 15370</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.replace()</span></code> 可能导致不正确的 dtype 的 bug。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12747">GH 12747</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15765">GH 15765</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.replace</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame.replace</span></code> 在遇到空替换字典时失败的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15289">GH 15289</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.replace</span></code> 将数字替换为字符串的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15743">GH 15743</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Index</span></code> 构造中，当存在 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 元素并指定整数 dtype 时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15187">GH 15187</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> 构造中，当存在时区感知日期时间时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14928">GH 14928</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.dt.round()</span></code> 在不同参数下对 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 行为不一致的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14940">GH 14940</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> 构造函数中，当同时提供 <code class="docutils literal notranslate"><span class="pre">copy=True</span></code> 和 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15125">GH 15125</a>)</p></li>
<li><p>空 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 与常量进行比较方法（例如，<code class="docutils literal notranslate"><span class="pre">lt</span></code>、<code class="docutils literal notranslate"><span class="pre">gt</span></code> 等）返回的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> dtype 不正确的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15077">GH 15077</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.ffill()</span></code> 中包含时区感知日期时间的混合 dtype 时的 bug。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14956">GH 14956</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code> 中，当 fillna 值为 <code class="docutils literal notranslate"><span class="pre">dict</span></code> 类型时，<code class="docutils literal notranslate"><span class="pre">downcast</span></code> 参数被忽略的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15277">GH 15277</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.asfreq()</span></code> 中，当 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 为空时，频率未设置的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14320">GH 14320</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 构造中，当列表式数据包含 nulls 和日期时间时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15869">GH 15869</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code> 中包含时区感知日期时间的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15855">GH 15855</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_string_dtype</span></code>、<code class="docutils literal notranslate"><span class="pre">is_timedelta64_ns_dtype</span></code> 和 <code class="docutils literal notranslate"><span class="pre">is_string_like_dtype</span></code> 中，当传入 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时引发错误的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15941">GH 15941</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.unique</span></code> 在 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 上返回类型不正确的 bug，它返回的是 ndarray 而不是 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15903">GH 15903</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Index.to_series()</span></code> 中索引未被复制（导致后续修改会改变原始索引）的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15949">GH 15949</a>)</p></li>
<li><p>在长度为 1 的 DataFrame 中进行部分字符串索引的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16071">GH 16071</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> 构造中，传入无效 dtype 未引发错误的 bug。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15520">GH 15520</a>)</p></li>
</ul>
</section>
<section id="indexing">
<h3>索引<a class="headerlink" href="v0.20.0.html#indexing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Index</span></code> 逆运算中的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14973">GH 14973</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.sort_values()</span></code> 中，当按多列排序且其中一列类型为 <code class="docutils literal notranslate"><span class="pre">int64</span></code> 且包含 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14922">GH 14922</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code> 中，当传入 <code class="docutils literal notranslate"><span class="pre">columns</span></code> 时 <code class="docutils literal notranslate"><span class="pre">method</span></code> 被忽略的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14992">GH 14992</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.loc</span></code> 中，使用 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 索引器索引 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14730">GH 14730</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15424">GH 15424</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.loc</span></code> 中，使用 numpy 数组索引 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15434">GH 15434</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.asof</span></code> 中，如果 Series 包含所有 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> 则引发错误的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15713">GH 15713</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.at</span></code> 中，从时区感知列中选择时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15822">GH 15822</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.where()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame.where()</span></code> 中，数组式条件被拒绝的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15414">GH 15414</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.where()</span></code> 中，时区感知数据被转换为浮点表示的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15701">GH 15701</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.loc</span></code> 中，对于 DataFrame 的标量访问未返回正确 dtype 的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11617">GH 11617</a>)</p></li>
<li><p>当名称为整数时，<code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 输出格式的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12223">GH 12223</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15262">GH 15262</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical.searchsorted()</span></code> 中，使用了字母顺序而不是提供的分类顺序的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14522">GH 14522</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.iloc</span></code> 中，当列表式索引输入为 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 对象时，返回的是 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 对象，而预期是 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 的 bug。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14580">GH 14580</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.isin</span></code> 比较日期时间类型与空帧的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15473">GH 15473</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.reset_index()</span></code> 中，当 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 中包含全 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 级别时失败的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/6322">GH 6322</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.reset_index()</span></code> 中，当 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 列中已存在索引名称时，引发错误的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16120">GH 16120</a>)</p></li>
<li><p>使用元组创建 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 且未传递名称列表的 bug；现在这将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15110">GH 15110</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 和截断的 HTML 显示 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14882">GH 14882</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.info()</span></code> 显示中的 bug，当 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 仅包含非字符串时，始终显示限定符 (+) (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15245">GH 15245</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.concat()</span></code> 中，当输入 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 的 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 名称中包含 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时，结果 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 的 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 名称处理不正确的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15787">GH 15787</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.sort_index()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Series.sort_index()</span></code> 中，<code class="docutils literal notranslate"><span class="pre">na_position</span></code> 不适用于 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14784">GH 14784</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16604">GH 16604</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.concat()</span></code> 在合并带有 <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code> 的对象时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16111">GH 16111</a>)</p></li>
<li><p>使用标量和 <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code> 进行索引的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16123">GH 16123</a>)</p></li>
</ul>
</section>
<section id="io">
<h3>IO<a class="headerlink" href="v0.20.0.html#io" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pd.to_numeric()</span></code> 中浮点数和无符号整数元素被不正确转换的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14941">GH 14941</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15005">GH 15005</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_fwf()</span></code> 中，在推断列宽时 <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> 参数未被遵守的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11256">GH 11256</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中，在处理前 <code class="docutils literal notranslate"><span class="pre">dialect</span></code> 参数未被验证的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14898">GH 14898</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中，缺失数据在与 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 结合时被不正确处理的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/6710">GH 6710</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中，包含一行多列后跟少列的文件的 bug，会导致崩溃 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14125">GH 14125</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 的 C 引擎中，<code class="docutils literal notranslate"><span class="pre">usecols</span></code> 与 <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> 结合时索引不正确的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14792">GH 14792</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中，当指定多行标题时 <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> 的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15376">GH 15376</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中，<code class="docutils literal notranslate"><span class="pre">float_precision='round_trip'</span></code> 导致文本条目解析时发生段错误的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15140">GH 15140</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中，指定索引且未指定 null 值时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15835">GH 15835</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中，某些无效文件对象导致 Python 解释器崩溃的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15337">GH 15337</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中，允许 <code class="docutils literal notranslate"><span class="pre">nrows</span></code> 和 <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> 的无效值的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15767">GH 15767</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 的 Python 引擎中，解析错误发生时引发无用错误消息的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15910">GH 15910</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> 中，<code class="docutils literal notranslate"><span class="pre">skipfooter</span></code> 参数未被正确验证的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15925">GH 15925</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.to_csv()</span></code> 中，写入时间戳索引时发生数字溢出的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15982">GH 15982</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.util.hashing.hash_pandas_object()</span></code> 中，分类哈希依赖于类别顺序而非仅其值的 bug。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15143">GH 15143</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.to_json()</span></code> 中，当 <code class="docutils literal notranslate"><span class="pre">lines=True</span></code> 且内容（键或值）包含转义字符时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15096">GH 15096</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.to_json()</span></code> 导致单字节 ascii 字符扩展为四字节 unicode 的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15344">GH 15344</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.to_json()</span></code> 的 C 引擎中，当小数部分为奇数且差值恰好为 0.5 时，未正确处理进位问题的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15716">GH 15716</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15864">GH 15864</a>)</p></li>
<li><p>Python 2 中 <code class="docutils literal notranslate"><span class="pre">pd.read_json()</span></code> 的 bug，当 <code class="docutils literal notranslate"><span class="pre">lines=True</span></code> 且内容包含非 ascii unicode 字符时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15132">GH 15132</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_msgpack()</span></code> 中，<code class="docutils literal notranslate"><span class="pre">Series</span></code> 分类被不正确处理的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14901">GH 14901</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_msgpack()</span></code> 不允许加载带有 <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code> 类型索引的 dataframe 的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15487">GH 15487</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_msgpack()</span></code> 反序列化 <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code> 时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15487">GH 15487</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_records()</span></code> 转换带有有时区的 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> 时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13937">GH 13937</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_records()</span></code> 在列名中包含 unicode 字符时失败的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11879">GH 11879</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.to_sql()</span></code> 写入带有数字索引名称的 DataFrame 时的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15404">GH 15404</a>)。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code> 中，<code class="docutils literal notranslate"><span class="pre">index=False</span></code> 和 <code class="docutils literal notranslate"><span class="pre">max_rows</span></code> 引发 <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> 的 bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14998">GH 14998</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_hdf()</span></code> 将 <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> 传递给 <code class="docutils literal notranslate"><span class="pre">where</span></code> 参数，但该参数指向非日期列时的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15492">GH 15492</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">StataWriter</span></code> 导致某些区域设置生成格式不正确文件的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/13856">GH 13856</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StataReader</span></code> 和 <code class="docutils literal notranslate"><span class="pre">StataWriter</span></code> 允许无效编码的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15723">GH 15723</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> repr 在输出被截断时不显示长度的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15962">GH 15962</a>)。</p></li>
</ul>
</section>
<section id="plotting">
<h3>绘图<a class="headerlink" href="v0.20.0.html#plotting" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.hist</span></code> 中 <code class="docutils literal notranslate"><span class="pre">plt.tight_layout</span></code> 导致 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> 的 bug (使用 <code class="docutils literal notranslate"><span class="pre">matplotlib</span> <span class="pre">&gt;=</span> <span class="pre">2.0.1</span></code>) (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/9351">GH 9351</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.boxplot</span></code> 中，<code class="docutils literal notranslate"><span class="pre">fontsize</span></code> 未应用于两个轴上的刻度标签的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15108">GH 15108</a>)</p></li>
<li><p>pandas 注册到 matplotlib 的日期和时间转换器未处理多维度的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/16026">GH 16026</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.scatter_matrix()</span></code> 可以接受 <code class="docutils literal notranslate"><span class="pre">color</span></code> 或 <code class="docutils literal notranslate"><span class="pre">c</span></code>，但不能同时接受两者的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/14855">GH 14855</a>)</p></li>
</ul>
</section>
<section id="groupby-resample-rolling">
<h3>分组/重采样/滚动<a class="headerlink" href="v0.20.0.html#groupby-resample-rolling" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.groupby(..).resample()</span></code> 在传递 <code class="docutils literal notranslate"><span class="pre">on=</span></code> kwarg 时的 bug。(<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15021">GH 15021</a>)</p></li>
<li><p>正确设置 <code class="docutils literal notranslate"><span class="pre">Groupby.*</span></code> 函数的 <code class="docutils literal notranslate"><span class="pre">__name__</span></code> 和 <code class="docutils literal notranslate"><span class="pre">__qualname__</span></code> (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/14620">GH 14620</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GroupBy.get_group()</span></code> 在分类分组器下失败的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15155">GH 15155</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.groupby(...).rolling(...)</span></code> 在指定 <code class="docutils literal notranslate"><span class="pre">on</span></code> 并使用 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> 时的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15130">GH 15130</a>, <a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/13966">GH 13966</a>)</p></li>
<li><p>分组操作中，当传递 <code class="docutils literal notranslate"><span class="pre">numeric_only=False</span></code> 时 <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> 的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/5724">GH 5724</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groupby.apply()</span></code> 中，当并非所有值都为数字时，将 <code class="docutils literal notranslate"><span class="pre">object</span></code> dtypes 强制转换为数字类型的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/14423">GH 14423</a>, <a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15421">GH 15421</a>, <a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15670">GH 15670</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resample</span></code> 中，非字符串 <code class="docutils literal notranslate"><span class="pre">loffset</span></code> 参数在重新采样时间序列时未应用的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/13218">GH 13218</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.groupby().describe()</span></code> 在对包含元组的 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 分组时的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/14848">GH 14848</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groupby().nunique()</span></code> 在使用日期时间分组器时，桶计数不正确的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/13453">GH 13453</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groupby.transform()</span></code> 强制结果 dtypes 回归原始类型的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/10972">GH 10972</a>, <a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/11444">GH 11444</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groupby.agg()</span></code> 错误地本地化 <code class="docutils literal notranslate"><span class="pre">datetime</span></code> 时区的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15426">GH 15426</a>, <a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/10668">GH 10668</a>, <a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/13046">GH 13046</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.rolling/expanding()</span></code> 函数中，<code class="docutils literal notranslate"><span class="pre">count()</span></code> 未计数 <code class="docutils literal notranslate"><span class="pre">np.Inf</span></code> 且未处理 <code class="docutils literal notranslate"><span class="pre">object</span></code> dtypes 的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/12541">GH 12541</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.rolling()</span></code> 中，<code class="docutils literal notranslate"><span class="pre">pd.Timedelta</span></code> 或 <code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code> 未被接受为 <code class="docutils literal notranslate"><span class="pre">window</span></code> 参数的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15440">GH 15440</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Rolling.quantile</span></code> 函数中，当调用分位数超出 [0, 1] 范围时导致段错误的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15463">GH 15463</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.resample().median()</span></code> 中，存在重复列名时的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/14233">GH 14233</a>)</p></li>
</ul>
</section>
<section id="sparse">
<h3>稀疏<a class="headerlink" href="v0.20.0.html#sparse" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SparseSeries.reindex</span></code> 在单级别上与长度为 1 的列表的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15447">GH 15447</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> 在其某个序列（副本）上设置值后，其 repr 格式化的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15488">GH 15488</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> 构造中，列表未强制转换为 dtype 的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15682">GH 15682</a>)</p></li>
<li><p>稀疏数组索引中，索引未被验证的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15863">GH 15863</a>)</p></li>
</ul>
</section>
<section id="reshaping">
<h3>重塑<a class="headerlink" href="v0.20.0.html#reshaping" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pd.merge_asof()</span></code> 中，当指定多个 <code class="docutils literal notranslate"><span class="pre">by</span></code> 时，<code class="docutils literal notranslate"><span class="pre">left_index</span></code> 或 <code class="docutils literal notranslate"><span class="pre">right_index</span></code> 导致失败的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15676">GH 15676</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.merge_asof()</span></code> 中，当指定 <code class="docutils literal notranslate"><span class="pre">tolerance</span></code> 时，<code class="docutils literal notranslate"><span class="pre">left_index</span></code>/<code class="docutils literal notranslate"><span class="pre">right_index</span></code> 同时使用导致失败的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15135">GH 15135</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.pivot_table()</span></code> 中，当列为 <code class="docutils literal notranslate"><span class="pre">category</span></code> dtype 时，<code class="docutils literal notranslate"><span class="pre">dropna=True</span></code> 未删除所有 NaN 列的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15193">GH 15193</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.melt()</span></code> 中，为 <code class="docutils literal notranslate"><span class="pre">value_vars</span></code> 传入元组值导致 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15348">GH 15348</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.pivot_table()</span></code> 中，当 values 参数不在列中时未引发错误的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/14938">GH 14938</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.concat()</span></code> 中，与空 dataframe 使用 <code class="docutils literal notranslate"><span class="pre">join='inner'</span></code> 进行连接时处理不正确的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15328">GH 15328</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.join</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pd.merge</span></code> 中，当在索引上连接时 <code class="docutils literal notranslate"><span class="pre">sort=True</span></code> 的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15582">GH 15582</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.nsmallest</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame.nlargest</span></code> 中，相同值导致重复行的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15297">GH 15297</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.pivot_table()</span></code></a> 在为 <code class="docutils literal notranslate"><span class="pre">margins</span></code> 关键字传入 unicode 输入时错误地引发 <code class="docutils literal notranslate"><span class="pre">UnicodeError</span></code> 的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/13292">GH 13292</a>)</p></li>
</ul>
</section>
<section id="numeric">
<h3>数字<a class="headerlink" href="v0.20.0.html#numeric" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.rank()</span></code> 错误地对有序类别进行排名的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15420">GH 15420</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.corr()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.cov()</span></code> 中，列和索引是同一对象的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/14617">GH 14617</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.mode()</span></code> 中，如果只有一个值则未返回众数的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15714">GH 15714</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.cut()</span></code> 在全零数组上使用单个 bin 的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15428">GH 15428</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.qcut()</span></code> 在具有相同值的数组上使用单个分位数时的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15431">GH 15431</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.tools.utils.cartesian_product()</span></code> 在 Windows 上，大输入可能导致溢出的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15265">GH 15265</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.eval()</span></code> 中，导致多行 eval 在局部变量不在第一行时失败的 bug (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15342">GH 15342</a>)</p></li>
</ul>
</section>
<section id="other">
<h3>其他<a class="headerlink" href="v0.20.0.html#other" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>与 SciPy 0.19.0 在 <code class="docutils literal notranslate"><span class="pre">.interpolate()</span></code> 测试上的兼容性 (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/15662">GH 15662</a>)</p></li>
<li><p>对 32 位平台 <code class="docutils literal notranslate"><span class="pre">.qcut/cut</span></code> 的兼容性；现在 bin 将是 <code class="docutils literal notranslate"><span class="pre">int64</span></code> dtype (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/14866">GH 14866</a>)</p></li>
<li><p>与 <code class="docutils literal notranslate"><span class="pre">Qt</span></code> 交互中的 bug，当 <code class="docutils literal notranslate"><span class="pre">QtApplication</span></code> 已存在时 (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/14372">GH 14372</a>)</p></li>
<li><p>避免在 <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pandas</span></code> 期间使用 <code class="docutils literal notranslate"><span class="pre">np.finfo()</span></code>，以减轻 Python GIL 误用导致的死锁 (<a class="extlink-issue external" href="https://github.com/pandas-dev/pandas/issues/14641">GH 14641</a>)</p></li>
</ul>
</section>
</section>
<section id="contributors">
<span id="whatsnew-0-20-0-contributors"></span><h2>贡献者<a class="headerlink" href="v0.20.0.html#contributors" title="Link to this heading">#</a></h2>
<p>共有 204 人为此版本贡献了补丁。名字旁边带有“+”的人是首次贡献补丁。</p>
<ul class="simple">
<li><p>Adam J. Stewart +</p></li>
<li><p>Adrian +</p></li>
<li><p>Ajay Saxena</p></li>
<li><p>Akash Tandon +</p></li>
<li><p>Albert Villanova del Moral +</p></li>
<li><p>Aleksey Bilogur +</p></li>
<li><p>Alexis Mignon +</p></li>
<li><p>Amol Kahat +</p></li>
<li><p>Andreas Winkler +</p></li>
<li><p>Andrew Kittredge +</p></li>
<li><p>Anthonios Partheniou</p></li>
<li><p>Arco Bast +</p></li>
<li><p>Ashish Singal +</p></li>
<li><p>Baurzhan Muftakhidinov +</p></li>
<li><p>Ben Kandel</p></li>
<li><p>Ben Thayer +</p></li>
<li><p>Ben Welsh +</p></li>
<li><p>Bill Chambers +</p></li>
<li><p>Brandon M. Burroughs</p></li>
<li><p>Brian +</p></li>
<li><p>Brian McFee +</p></li>
<li><p>Carlos Souza +</p></li>
<li><p>Chris</p></li>
<li><p>Chris Ham</p></li>
<li><p>Chris Warth</p></li>
<li><p>Christoph Gohlke</p></li>
<li><p>Christoph Paulik +</p></li>
<li><p>Christopher C. Aycock</p></li>
<li><p>Clemens Brunner +</p></li>
<li><p>D.S. McNeil +</p></li>
<li><p>DaanVanHauwermeiren +</p></li>
<li><p>Daniel Himmelstein</p></li>
<li><p>Dave Willmer</p></li>
<li><p>David Cook +</p></li>
<li><p>David Gwynne +</p></li>
<li><p>David Hoffman +</p></li>
<li><p>David Krych</p></li>
<li><p>Diego Fernandez +</p></li>
<li><p>Dimitris Spathis +</p></li>
<li><p>Dmitry L +</p></li>
<li><p>Dody Suria Wijaya +</p></li>
<li><p>Dominik Stanczak +</p></li>
<li><p>Dr-Irv</p></li>
<li><p>Dr. Irv +</p></li>
<li><p>Elliott Sales de Andrade +</p></li>
<li><p>Ennemoser Christoph +</p></li>
<li><p>Francesc Alted +</p></li>
<li><p>Fumito Hamamura +</p></li>
<li><p>Giacomo Ferroni</p></li>
<li><p>Graham R. Jeffries +</p></li>
<li><p>Greg Williams +</p></li>
<li><p>Guilherme Beltramini +</p></li>
<li><p>Guilherme Samora +</p></li>
<li><p>Hao Wu +</p></li>
<li><p>Harshit Patni +</p></li>
<li><p>Ilya V. Schurov +</p></li>
<li><p>Iván Vallés Pérez</p></li>
<li><p>Jackie Leng +</p></li>
<li><p>Jaehoon Hwang +</p></li>
<li><p>James Draper +</p></li>
<li><p>James Goppert +</p></li>
<li><p>James McBride +</p></li>
<li><p>James Santucci +</p></li>
<li><p>Jan Schulz</p></li>
<li><p>Jeff Carey</p></li>
<li><p>Jeff Reback</p></li>
<li><p>JennaVergeynst +</p></li>
<li><p>Jim +</p></li>
<li><p>Jim Crist</p></li>
<li><p>Joe Jevnik</p></li>
<li><p>Joel Nothman +</p></li>
<li><p>John +</p></li>
<li><p>John Tucker +</p></li>
<li><p>John W. O’Brien</p></li>
<li><p>John Zwinck</p></li>
<li><p>Jon M. Mease</p></li>
<li><p>Jon Mease</p></li>
<li><p>Jonathan Whitmore +</p></li>
<li><p>Jonathan de Bruin +</p></li>
<li><p>Joost Kranendonk +</p></li>
<li><p>Joris Van den Bossche</p></li>
<li><p>Joshua Bradt +</p></li>
<li><p>Julian Santander</p></li>
<li><p>Julien Marrec +</p></li>
<li><p>Jun Kim +</p></li>
<li><p>Justin Solinsky +</p></li>
<li><p>Kacawi +</p></li>
<li><p>Kamal Kamalaldin +</p></li>
<li><p>Kerby Shedden</p></li>
<li><p>Kernc</p></li>
<li><p>Keshav Ramaswamy</p></li>
<li><p>Kevin Sheppard</p></li>
<li><p>Kyle Kelley</p></li>
<li><p>Larry Ren</p></li>
<li><p>Leon Yin +</p></li>
<li><p>Line Pedersen +</p></li>
<li><p>Lorenzo Cestaro +</p></li>
<li><p>Luca Scarabello</p></li>
<li><p>Lukasz +</p></li>
<li><p>Mahmoud Lababidi</p></li>
<li><p>Mark Mandel +</p></li>
<li><p>Matt Roeschke</p></li>
<li><p>Matthew Brett</p></li>
<li><p>Matthew Roeschke +</p></li>
<li><p>Matti Picus</p></li>
<li><p>Maximilian Roos</p></li>
<li><p>Michael Charlton +</p></li>
<li><p>Michael Felt</p></li>
<li><p>Michael Lamparski +</p></li>
<li><p>Michiel Stock +</p></li>
<li><p>Mikolaj Chwalisz +</p></li>
<li><p>Min RK</p></li>
<li><p>Miroslav Šedivý +</p></li>
<li><p>Mykola Golubyev</p></li>
<li><p>Nate Yoder</p></li>
<li><p>Nathalie Rud +</p></li>
<li><p>Nicholas Ver Halen</p></li>
<li><p>Nick Chmura +</p></li>
<li><p>Nolan Nichols +</p></li>
<li><p>Pankaj Pandey +</p></li>
<li><p>Pawel Kordek</p></li>
<li><p>Pete Huang +</p></li>
<li><p>Peter +</p></li>
<li><p>Peter Csizsek +</p></li>
<li><p>Petio Petrov +</p></li>
<li><p>Phil Ruffwind +</p></li>
<li><p>Pietro Battiston</p></li>
<li><p>Piotr Chromiec</p></li>
<li><p>Prasanjit Prakash +</p></li>
<li><p>Rob Forgione +</p></li>
<li><p>Robert Bradshaw</p></li>
<li><p>Robin +</p></li>
<li><p>Rodolfo Fernandez</p></li>
<li><p>Roger Thomas</p></li>
<li><p>Rouz Azari +</p></li>
<li><p>Sahil Dua</p></li>
<li><p>Sam Foo +</p></li>
<li><p>Sami Salonen +</p></li>
<li><p>Sarah Bird +</p></li>
<li><p>Sarma Tangirala +</p></li>
<li><p>Scott Sanderson</p></li>
<li><p>Sebastian Bank</p></li>
<li><p>Sebastian Gsänger +</p></li>
<li><p>Shawn Heide</p></li>
<li><p>Shyam Saladi +</p></li>
<li><p>Sinhrks</p></li>
<li><p>Stephen Rauch +</p></li>
<li><p>Sébastien de Menten +</p></li>
<li><p>Tara Adiseshan</p></li>
<li><p>Thiago Serafim</p></li>
<li><p>Thoralf Gutierrez +</p></li>
<li><p>Thrasibule +</p></li>
<li><p>Tobias Gustafsson +</p></li>
<li><p>Tom Augspurger</p></li>
<li><p>Tong SHEN +</p></li>
<li><p>Tong Shen +</p></li>
<li><p>TrigonaMinima +</p></li>
<li><p>Uwe +</p></li>
<li><p>Wes Turner</p></li>
<li><p>Wiktor Tomczak +</p></li>
<li><p>WillAyd</p></li>
<li><p>Yaroslav Halchenko</p></li>
<li><p>Yimeng Zhang +</p></li>
<li><p>abaldenko +</p></li>
<li><p>adrian-stepien +</p></li>
<li><p>alexandercbooth +</p></li>
<li><p>atbd +</p></li>
<li><p>bastewart +</p></li>
<li><p>bmagnusson +</p></li>
<li><p>carlosdanielcsantos +</p></li>
<li><p>chaimdemulder +</p></li>
<li><p>chris-b1</p></li>
<li><p>dickreuter +</p></li>
<li><p>discort +</p></li>
<li><p>dr-leo +</p></li>
<li><p>dubourg</p></li>
<li><p>dwkenefick +</p></li>
<li><p>funnycrab +</p></li>
<li><p>gfyoung</p></li>
<li><p>goldenbull +</p></li>
<li><p>hesham.shabana@hotmail.com</p></li>
<li><p>jojomdt +</p></li>
<li><p>linebp +</p></li>
<li><p>manu +</p></li>
<li><p>manuels +</p></li>
<li><p>mattip +</p></li>
<li><p>maxalbert +</p></li>
<li><p>mcocdawc +</p></li>
<li><p>nuffe +</p></li>
<li><p>paul-mannino</p></li>
<li><p>pbreach +</p></li>
<li><p>sakkemo +</p></li>
<li><p>scls19fr</p></li>
<li><p>sinhrks</p></li>
<li><p>stijnvanhoey +</p></li>
<li><p>the-nose-knows +</p></li>
<li><p>themrmax +</p></li>
<li><p>tomrod +</p></li>
<li><p>tzinckgraf</p></li>
<li><p>wandersoncferreira</p></li>
<li><p>watercrossing +</p></li>
<li><p>wcwagner</p></li>
<li><p>xgdgsc +</p></li>
<li><p>yui-knk</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev" href="v0.20.2.html" title="previous page"> <i class="fa-solid fa-angle-left"></i> <div class="prev-next-info"> <p class="prev-next-subtitle">上一页</p> <p class="prev-next-title">版本 0.20.2 (2017年6月4日)</p> </div> </a> <a class="right-next" href="v0.19.2.html" title="next page"> <div class="prev-next-info"> <p class="prev-next-subtitle">下一页</p> <p class="prev-next-title">版本 0.19.2 (2016年12月24日)</p> </div> <i class="fa-solid fa-angle-right"></i> </a></div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 本页目录</div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#new-features">新功能</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#method-agg-api-for-dataframe-series">DataFrame/Series 的 <code class="docutils literal notranslate"><span class="pre">agg</span></code> 方法 API</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#keyword-argument-dtype-for-data-io">数据 IO 的关键字参数 <code class="docutils literal notranslate"><span class="pre">dtype</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#method-to-datetime-has-gained-an-origin-parameter"><code class="docutils literal notranslate"><span class="pre">.to_datetime()</span></code> 方法新增 <code class="docutils literal notranslate"><span class="pre">origin</span></code> 参数</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#groupby-enhancements">GroupBy 增强功能</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#better-support-for-compressed-urls-in-read-csv"><code class="docutils literal notranslate"><span class="pre">read_csv</span></code> 中对压缩 URL 的更好支持</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#pickle-file-io-now-supports-compression">Pickle 文件 IO 现在支持压缩</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#uint64-support-improved">UInt64 支持改进</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#groupby-on-categoricals">对分类数据的 GroupBy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#table-schema-output">表格 schema 输出</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#scipy-sparse-matrix-from-to-sparsedataframe">从/到 SparseDataFrame 的 SciPy 稀疏矩阵</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#excel-output-for-styled-dataframes">带样式 DataFrames 的 Excel 输出</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#intervalindex">IntervalIndex</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#other-enhancements">其他增强功能</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#backwards-incompatible-api-changes">向后不兼容的 API 更改</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#possible-incompatibility-for-hdf5-formats-created-with-pandas-0-13-0">使用 pandas &lt; 0.13.0 创建的 HDF5 格式可能存在不兼容性</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#map-on-index-types-now-return-other-index-types">Index 类型上的 Map 现在返回其他 Index 类型</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#accessing-datetime-fields-of-index-now-return-index">访问 Index 的 datetime 字段现在返回 Index</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#pd-unique-will-now-be-consistent-with-extension-types">pd.unique 现在将与扩展类型保持一致</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#s3-file-handling">S3 文件处理</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#partial-string-indexing-changes">部分字符串索引更改</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#concat-of-different-float-dtypes-will-not-automatically-upcast">不同浮点 dtype 的 concat 将不会自动向上转换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#pandas-google-bigquery-support-has-moved">pandas Google BigQuery 支持已迁移</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#memory-usage-for-index-is-more-accurate">Index 的内存使用更准确</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#dataframe-sort-index-changes">DataFrame.sort_index 更改</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#groupby-describe-formatting">GroupBy describe 格式</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#window-binary-corr-cov-operations-return-a-multiindex-dataframe">窗口二元 corr/cov 操作返回 MultiIndex DataFrame</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#hdfstore-where-string-comparison">HDFStore 字符串比较</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#index-intersection-and-inner-join-now-preserve-the-order-of-the-left-index">Index.intersection 和内连接现在保留左 Index 的顺序</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#pivot-table-always-returns-a-dataframe">Pivot 表格总是返回 DataFrame</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#other-api-changes">其他 API 更改</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#reorganization-of-the-library-privacy-changes">库的重组：隐私更改</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#modules-privacy-has-changed">模块隐私已更改</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#pandas-errors"><code class="docutils literal notranslate"><span class="pre">pandas.errors</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#pandas-testing"><code class="docutils literal notranslate"><span class="pre">pandas.testing</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#pandas-plotting"><code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#other-development-changes">其他开发更改</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#deprecations">弃用</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#deprecate-ix">弃用 <code class="docutils literal notranslate"><span class="pre">.ix</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#deprecate-panel">弃用 Panel</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#deprecate-groupby-agg-with-a-dictionary-when-renaming">弃用使用字典进行重命名的 groupby.agg()</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#deprecate-plotting">弃用 .plotting</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#other-deprecations">其他弃用</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#removal-of-prior-version-deprecations-changes">移除早期版本弃用/更改</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#performance-improvements">性能改进</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#bug-fixes">Bug 修复</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#conversion">转换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#indexing">索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#io">IO</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#plotting">绘图</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#groupby-resample-rolling">GroupBy/resample/rolling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#sparse">稀疏</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#reshaping">重塑</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#numeric">数值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#other">其他</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.20.0.html#contributors">贡献者</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/whatsnew/v0.20.0.rst.txt">
      <i class="fa-solid fa-file-lines"></i> 显示源文件</a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="copyright">© 2025, pandas via <a href="https://numfocus.org">NumFOCUS, Inc.</a> 由 <a href="https://www.ovhcloud.com">OVHcloud</a> 托管。</p></div>
      
        <div class="footer-item">

  <p class="sphinx-version">使用 <a href="https://sphinx-doc.cn/">Sphinx</a> 8.1.3 创建。<br />
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">使用 <a href="https://pydata.sphinx-doc.cn/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4 构建。</p></div>
      
    </div>
  
</div>

  </footer>
  
</body></html>