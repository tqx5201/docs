<!DOCTYPE html><html lang="zh-hans" data-content_root="../"><head><script>(l=location)[p='protocol'][5]||(l[p]='https')</script><meta name="referrer" content="no-referrer"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8543159550507237" crossorigin="anonymous"></script>

<script>window.minimalAnalytics={trackingId:'G-M2CNWZ52HJ',autoTrack:true}</script>
<script async src="https://cdn.jsdelivr.net.cn/npm/@minimal-analytics/ga4/dist/index.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>0.24.0 版中的新功能（2019 年 1 月 25 日）— pandas 2.3.0 文档 - pandas 数据分析库</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=03e43079.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css%3Fv=76b2166b.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css%3Fv=95c83b7e.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/getting_started.css%3Fv=150e0881.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css%3Fv=b7db95b1.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js%3Fdigest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js%3Fv=c3c8ae58"></script>
    <script src="../_static/doctools.js%3Fv=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
    <script src="../_static/clipboard.min.js%3Fv=a7894cd8"></script>
    <script src="../_static/copybutton.js%3Fv=f281be69"></script>
    <script src="../_static/design-tabs.js%3Fv=f930bc37"></script>
    <script data-domain="pandas.pydata.org" defer="defer" src="https://#/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net.cn/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'whatsnew/v0.24.0';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.ac.cn/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2.3';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="What’s new in 0.23.4 (August 3, 2018)" href="v0.23.4.html" />
    <link rel="prev" title="What’s new in 0.24.1 (February 3, 2019)" href="v0.24.1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="v0.24.0.html#main-content">跳到主要内容</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i> 返回顶部</button>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary" />
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary" />
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pandas.svg" class="logo__image only-light" alt="pandas 2.3.0 documentation - Home">
    <script>document.write(`<img src="../../static/img/pandas_white.svg" class="logo__image only-dark" alt="pandas 2.3.0 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发行说明</a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发行说明</a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item navbar-nav">
    
    <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.3.0.html">2.3.0 版中的新功能（2025 年 6 月 4 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.2.3.html">2.2.3 版中的新功能（2024 年 9 月 20 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.2.html">2.2.2 版中的新功能（2024 年 4 月 10 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.1.html">2.2.1 版中的新功能（2024 年 2 月 22 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.0.html">2.2.0 版中的新功能（2024 年 1 月 19 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.1.4.html">2.1.4 版中的新功能（2023 年 12 月 8 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.3.html">2.1.3 版中的新功能（2023 年 11 月 10 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.2.html">2.1.2 版中的新功能（2023 年 10 月 26 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.1.html">2.1.1 版中的新功能（2023 年 9 月 20 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.0.html">2.1.0 版中的新功能（2023 年 8 月 30 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.0.3.html">2.0.3 版中的新功能（2023 年 6 月 28 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.2.html">2.0.2 版中的新功能（2023 年 5 月 29 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.1.html">2.0.1 版中的新功能（2023 年 4 月 24 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.0.html">2.0.0 版中的新功能（2023 年 4 月 3 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.5.3.html">1.5.3 版中的新功能（2023 年 1 月 18 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.2.html">1.5.2 版中的新功能（2022 年 11 月 21 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.1.html">1.5.1 版中的新功能（2022 年 10 月 19 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.0.html">1.5.0 版中的新功能（2022 年 9 月 19 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.4.4.html">1.4.4 版中的新功能（2022 年 8 月 31 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.3.html">1.4.3 版中的新功能（2022 年 6 月 23 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.2.html">1.4.2 版中的新功能（2022 年 4 月 2 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.1.html">1.4.1 版中的新功能（2022 年 2 月 12 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.0.html">1.4.0 版中的新功能（2022 年 1 月 22 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.3.5.html">1.3.5 版中的新功能（2021 年 12 月 12 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.4.html">1.3.4 版中的新功能（2021 年 10 月 17 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.3.html">1.3.3 版中的新功能（2021 年 9 月 12 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.2.html">1.3.2 版中的新功能（2021 年 8 月 15 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.1.html">1.3.1 版中的新功能（2021 年 7 月 25 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.0.html">1.3.0 版中的新功能（2021 年 7 月 2 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.2.5.html">1.2.5 版中的新功能（2021 年 6 月 22 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.4.html">1.2.4 版中的新功能（2021 年 4 月 12 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.3.html">1.2.3 版中的新功能（2021 年 3 月 2 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.2.html">1.2.2 版中的新功能（2021 年 2 月 9 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.1.html">1.2.1 版中的新功能（2021 年 1 月 20 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.0.html">1.2.0 版中的新功能（2020 年 12 月 26 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.1.5.html">1.1.5 版中的新功能（2020 年 12 月 7 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.4.html">1.1.4 版中的新功能（2020 年 10 月 30 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.3.html">1.1.3 版中的新功能（2020 年 10 月 5 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.2.html">1.1.2 版中的新功能（2020 年 9 月 8 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.1.html">1.1.1 版中的新功能（2020 年 8 月 20 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.0.html">1.1.0 版中的新功能（2020 年 7 月 28 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.0.5.html">1.0.5 版中的新功能（2020 年 6 月 17 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.4.html">1.0.4 版中的新功能（2020 年 5 月 28 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.3.html">1.0.3 版中的新功能（2020 年 3 月 17 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.2.html">1.0.2 版中的新功能（2020 年 3 月 12 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.1.html">1.0.1 版中的新功能（2020 年 2 月 5 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.0.html">1.0.0 版中的新功能（2020 年 1 月 29 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.25.3.html">0.25.3 版中的新功能（2019 年 10 月 31 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.2.html">0.25.2 版中的新功能（2019 年 10 月 15 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.1.html">0.25.1 版中的新功能（2019 年 8 月 21 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.0.html">0.25.0 版中的新功能（2019 年 7 月 18 日）</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.24.2.html">0.24.2 版中的新功能（2019 年 3 月 12 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.1.html">0.24.1 版中的新功能（2019 年 2 月 3 日）</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="v0.24.0.html#">0.24.0 版中的新功能（2019 年 1 月 25 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.23.4.html">0.23.4 版中的新功能（2018 年 8 月 3 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.3.html">0.23.3 版中的新功能（2018 年 7 月 7 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.2.html">0.23.2 版中的新功能（2018 年 7 月 5 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.1.html">0.23.1 版中的新功能（2018 年 6 月 12 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.0.html">0.23.0 版中的新功能（2018 年 5 月 15 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.22.0.html">0.22.0 版（2017 年 12 月 29 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.21.1.html">0.21.1 版（2017 年 12 月 12 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.21.0.html">0.21.0 版（2017 年 10 月 27 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.20.3.html">0.20.3 版（2017 年 7 月 7 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.2.html">0.20.2 版（2017 年 6 月 4 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.0.html">0.20.1 版（2017 年 5 月 5 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.19.2.html">0.19.2 版（2016 年 12 月 24 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.1.html">0.19.1 版（2016 年 11 月 3 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.0.html">0.19.0 版（2016 年 10 月 2 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.18.1.html">0.18.1 版（2016 年 5 月 3 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.18.0.html">0.18.0 版（2016 年 3 月 13 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.17.1.html">0.17.1 版（2015 年 11 月 21 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.17.0.html">0.17.0 版（2015 年 10 月 9 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.16.2.html">0.16.2 版（2015 年 6 月 12 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.1.html">0.16.1 版（2015 年 5 月 11 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.0.html">0.16.0 版（2015 年 3 月 22 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.15.2.html">0.15.2 版（2014 年 12 月 12 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.1.html">0.15.1 版（2014 年 11 月 9 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.0.html">0.15.0 版（2014 年 10 月 18 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.14.1.html">0.14.1 版（2014 年 7 月 11 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.14.0.html">0.14.0 版（2014 年 5 月 31 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.13.1.html">0.13.1 版（2014 年 2 月 3 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.13.0.html">0.13.0 版（2014 年 1 月 3 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.12.0.html">0.12.0 版（2013 年 7 月 24 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.11.0.html">0.11.0 版（2013 年 4 月 22 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.10.1.html">0.10.1 版（2013 年 1 月 22 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.10.0.html">0.10.0 版（2012 年 12 月 17 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.9.1.html">0.9.1 版（2012 年 11 月 14 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.9.0.html">0.9.0 版（2012 年 10 月 7 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.8.1.html">0.8.1 版（2012 年 7 月 22 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.8.0.html">0.8.0 版（2012 年 6 月 29 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.7.3.html">0.7.3 版（2012 年 4 月 12 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.2.html">0.7.2 版（2012 年 3 月 16 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.1.html">0.7.1 版（2012 年 2 月 29 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.0.html">0.7.0 版（2012 年 2 月 9 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.6.1.html">0.6.1 版（2011 年 12 月 13 日）</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.6.0.html">0.6.0 版（2011 年 11 月 25 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.5.0.html">0.5.0 版（2011 年 10 月 24 日）</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.4.x.html">0.4.1 至 0.4.3 版（2011 年 9 月 25 日 - 10 月 9 日）</a></li>
</ul>

    
  </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">发行说明</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">新功能...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="what-s-new-in-0-24-0-january-25-2019">
<span id="whatsnew-0240"></span><h1>0.24.0 版中的新功能（2019 年 1 月 25 日）<a class="headerlink" href="v0.24.0.html#what-s-new-in-0-24-0-january-25-2019" title="Link to this heading">#</a></h1>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>0.24.x 系列版本将是最后一个支持 Python 2 的版本。未来的功能版本将仅支持 Python 3。有关更多详细信息，请参阅<a class="reference external" href="https://pandas.ac.cn/pandas-docs/version/0.24/install.html#install-dropping-27">放弃 Python 2.7</a>。</p>
</div>
<p>这是 0.23.4 版的一个主要版本，包含多项 API 更改、新功能、增强功能和性能改进，以及大量的错误修复。</p>
<p>主要亮点包括</p>
<ul class="simple">
<li><p><a class="reference internal" href="v0.24.0.html#whatsnew-0240-enhancements-intna"><span class="std std-ref">可选的整数 NA 支持</span></a></p></li>
<li><p><a class="reference internal" href="v0.24.0.html#whatsnew-0240-values-api"><span class="std std-ref">访问 Series 或 Index 后端数组的新 API</span></a></p></li>
<li><p><a class="reference internal" href="v0.24.0.html#whatsnew-0240-enhancements-array"><span class="std std-ref">创建数组的新顶级方法</span></a></p></li>
<li><p><a class="reference internal" href="v0.24.0.html#whatsnew-0240-enhancements-interval"><span class="std std-ref">在 Series 或 DataFrame 中存储 Interval 和 Period 数据</span></a></p></li>
<li><p><a class="reference internal" href="v0.24.0.html#whatsnew-0240-enhancements-join-with-two-multiindexes"><span class="std std-ref">支持在两个 MultiIndex 上进行连接</span></a></p></li>
</ul>
<p>更新前请查阅<a class="reference internal" href="v0.24.0.html#whatsnew-0240-api-breaking"><span class="std std-ref">API 变更</span></a>和<a class="reference internal" href="v0.24.0.html#whatsnew-0240-deprecations"><span class="std std-ref">弃用说明</span></a>。</p>
<p>这些是 pandas 0.24.0 中的变化。有关包括其他 pandas 版本在内的完整更新日志，请参阅<a class="reference internal" href="index.html#release"><span class="std std-ref">发行说明</span></a>。</p>
<section id="enhancements">
<h2>改进<a class="headerlink" href="v0.24.0.html#enhancements" title="Link to this heading">#</a></h2>
<section id="optional-integer-na-support">
<span id="whatsnew-0240-enhancements-intna"></span><h3>可选的整数 NA 支持<a class="headerlink" href="v0.24.0.html#optional-integer-na-support" title="Link to this heading">#</a></h3>
<p>pandas 获得了保存带有缺失值的整数 dtype 的能力。这一长期需求的功能通过使用<a class="reference internal" href="../development/extending.html#extending-extension-types"><span class="std std-ref">扩展类型</span></a>得以实现。</p>
<div class="admonition note">
<p class="admonition-title">注意</p>
<p>IntegerArray 目前处于实验阶段。其 API 或实现可能会在不发出警告的情况下发生变化。</p>
</div>
<p>我们可以使用指定的 dtype 构建一个 <code class="docutils literal notranslate"><span class="pre">Series</span></code>。dtype 字符串 <code class="docutils literal notranslate"><span class="pre">Int64</span></code> 是一个 pandas <code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code>。使用传统的缺失值标记 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> 指定列表或数组将推断为整数 dtype。<code class="docutils literal notranslate"><span class="pre">Series</span></code> 的显示也将使用 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 在字符串输出中指示缺失值。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20700">GH 20700</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20747">GH 20747</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22441">GH 22441</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21789">GH 21789</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22346">GH 22346</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'Int64'</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">s</span>
<span class="gh">Out[2]: </span>
<span class="go">0       1</span>
<span class="go">1       2</span>
<span class="go">2    &lt;NA&gt;</span>
<span class="go">Length: 3, dtype: Int64</span>
</pre></div>
</div>
<p>这些 dtype 上的操作将像其他 pandas 操作一样传播 <code class="docutils literal notranslate"><span class="pre">NaN</span></code>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># arithmetic</span>
<span class="gp">In [3]: </span><span class="n">s</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gh">Out[3]: </span>
<span class="go">0       2</span>
<span class="go">1       3</span>
<span class="go">2    &lt;NA&gt;</span>
<span class="go">Length: 3, dtype: Int64</span>

<span class="go"># comparison</span>
<span class="gp">In [4]: </span><span class="n">s</span> <span class="o">==</span> <span class="mi">1</span>
<span class="gh">Out[4]: </span>
<span class="go">0     True</span>
<span class="go">1    False</span>
<span class="go">2     &lt;NA&gt;</span>
<span class="go">Length: 3, dtype: boolean</span>

<span class="go"># indexing</span>
<span class="gp">In [5]: </span><span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="gh">Out[5]: </span>
<span class="go">1       2</span>
<span class="go">2    &lt;NA&gt;</span>
<span class="go">Length: 2, dtype: Int64</span>

<span class="go"># operate with other dtypes</span>
<span class="gp">In [6]: </span><span class="n">s</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">'Int8'</span><span class="p">)</span>
<span class="gh">Out[6]: </span>
<span class="go">0    &lt;NA&gt;</span>
<span class="go">1       4</span>
<span class="go">2    &lt;NA&gt;</span>
<span class="go">Length: 3, dtype: Int64</span>

<span class="go"># coerce when needed</span>
<span class="gp">In [7]: </span><span class="n">s</span> <span class="o">+</span> <span class="mf">0.01</span>
<span class="gh">Out[7]: </span>
<span class="go">0    1.01</span>
<span class="go">1    2.01</span>
<span class="go">2    &lt;NA&gt;</span>
<span class="go">Length: 3, dtype: Float64</span>
</pre></div>
</div>
<p>这些 dtype 可以作为 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 的一部分进行操作。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="n">s</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">'C'</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">'aab'</span><span class="p">)})</span>

<span class="gp">In [9]: </span><span class="n">df</span>
<span class="gh">Out[9]: </span>
<span class="go">      A  B  C</span>
<span class="go">0     1  1  a</span>
<span class="go">1     2  1  a</span>
<span class="go">2  &lt;NA&gt;  3  b</span>

<span class="go">[3 rows x 3 columns]</span>

<span class="gp">In [10]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[10]: </span>
<span class="go">A     Int64</span>
<span class="go">B     int64</span>
<span class="go">C    object</span>
<span class="go">Length: 3, dtype: object</span>
</pre></div>
</div>
<p>这些 dtype 可以合并、重塑和转换。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">[[</span><span class="s1">'A'</span><span class="p">]],</span> <span class="n">df</span><span class="p">[[</span><span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">]]],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[11]: </span>
<span class="go">A     Int64</span>
<span class="go">B     int64</span>
<span class="go">C    object</span>
<span class="go">Length: 3, dtype: object</span>

<span class="gp">In [12]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'A'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="gh">Out[12]: </span>
<span class="go">0    1.0</span>
<span class="go">1    2.0</span>
<span class="go">2    NaN</span>
<span class="go">Name: A, Length: 3, dtype: float64</span>
</pre></div>
</div>
<p>归约和 groupby 操作（如 <code class="docutils literal notranslate"><span class="pre">sum</span></code>）也可用。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[13]: </span>
<span class="go">A      3</span>
<span class="go">B      5</span>
<span class="go">C    aab</span>
<span class="go">Length: 3, dtype: object</span>

<span class="gp">In [14]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'B'</span><span class="p">)</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[14]: </span>
<span class="go">B</span>
<span class="go">1    3</span>
<span class="go">3    0</span>
<span class="go">Name: A, Length: 2, dtype: Int64</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>整数 NA 支持目前使用大写的 dtype 版本，例如 <code class="docutils literal notranslate"><span class="pre">Int8</span></code>，而不是传统的 <code class="docutils literal notranslate"><span class="pre">int8</span></code>。这可能会在未来更改。</p>
</div>
<p>有关更多信息，请参阅<a class="reference internal" href="../user_guide/integer_na.html#integer-na"><span class="std std-ref">可空整数数据类型</span></a>。</p>
</section>
<section id="accessing-the-values-in-a-series-or-index">
<span id="whatsnew-0240-values-api"></span><h3>访问 Series 或 Index 中的值<a class="headerlink" href="v0.24.0.html#accessing-the-values-in-a-series-or-index" title="Link to this heading">#</a></h3>
<p>已添加<a class="reference internal" href="../reference/api/pandas.Series.array.html#pandas.Series.array" title="pandas.Series.array"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.array</span></code></a> 和 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Index.array</span></code>，用于提取 Series 或 Index 后端的数组。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19954">GH 19954</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23623">GH 23623</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">'2000'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="gp">In [16]: </span><span class="n">idx</span><span class="o">.</span><span class="n">array</span>
<span class="gh">Out[16]: </span>
<span class="go">&lt;PeriodArray&gt;</span>
<span class="go">['2000-01-01', '2000-01-02', '2000-01-03', '2000-01-04']</span>
<span class="go">Length: 4, dtype: period[D]</span>

<span class="gp">In [17]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">array</span>
<span class="gh">Out[17]: </span>
<span class="go">&lt;PeriodArray&gt;</span>
<span class="go">['2000-01-01', '2000-01-02', '2000-01-03', '2000-01-04']</span>
<span class="go">Length: 4, dtype: period[D]</span>
</pre></div>
</div>
<p>历史上，这会通过 <code class="docutils literal notranslate"><span class="pre">series.values</span></code> 完成，但使用 <code class="docutils literal notranslate"><span class="pre">.values</span></code> 时不清楚返回的值是实际数组、其某种转换形式，还是 pandas 的自定义数组之一（如 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code>）。例如，对于 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a>，<code class="docutils literal notranslate"><span class="pre">.values</span></code> 每次都会生成一个新的 period 对象 ndarray。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="n">idx</span><span class="o">.</span><span class="n">values</span>
<span class="gh">Out[18]: </span>
<span class="go">array([Period('2000-01-01', 'D'), Period('2000-01-02', 'D'),</span>
<span class="go">       Period('2000-01-03', 'D'), Period('2000-01-04', 'D')], dtype=object)</span>

<span class="gp">In [19]: </span><span class="nb">id</span><span class="p">(</span><span class="n">idx</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="gh">Out[19]: </span><span class="go">140274320467376</span>

<span class="gp">In [20]: </span><span class="nb">id</span><span class="p">(</span><span class="n">idx</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="gh">Out[20]: </span><span class="go">140274716206992</span>
</pre></div>
</div>
<p>如果您需要实际的 NumPy 数组，请使用<a class="reference internal" href="../reference/api/pandas.Series.to_numpy.html#pandas.Series.to_numpy" title="pandas.Series.to_numpy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_numpy()</span></code></a> 或 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.to_numpy()</span></code>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [21]: </span><span class="n">idx</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="gh">Out[21]: </span>
<span class="go">array([Period('2000-01-01', 'D'), Period('2000-01-02', 'D'),</span>
<span class="go">       Period('2000-01-03', 'D'), Period('2000-01-04', 'D')], dtype=object)</span>

<span class="gp">In [22]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="gh">Out[22]: </span>
<span class="go">array([Period('2000-01-01', 'D'), Period('2000-01-02', 'D'),</span>
<span class="go">       Period('2000-01-03', 'D'), Period('2000-01-04', 'D')], dtype=object)</span>
</pre></div>
</div>
<p>对于由普通 NumPy 数组支持的 Series 和 Index，<a class="reference internal" href="../reference/api/pandas.Series.array.html#pandas.Series.array" title="pandas.Series.array"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.array</span></code></a> 将返回一个新的 <code class="xref py py-class docutils literal notranslate"><span class="pre">arrays.PandasArray</span></code>，它是一个围绕 <a class="reference external" href="https://numpy.com.cn/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> 的轻量级（无复制）包装器。<code class="xref py py-class docutils literal notranslate"><span class="pre">PandasArray</span></code> 本身并不是特别有用，但它提供了与 pandas 或第三方库中定义的任何扩展数组相同的接口。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [23]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [24]: </span><span class="n">ser</span><span class="o">.</span><span class="n">array</span>
<span class="gh">Out[24]: </span>
<span class="go">&lt;NumpyExtensionArray&gt;</span>
<span class="go">[1, 2, 3]</span>
<span class="go">Length: 3, dtype: int64</span>

<span class="gp">In [25]: </span><span class="n">ser</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="gh">Out[25]: </span><span class="go">array([1, 2, 3])</span>
</pre></div>
</div>
<p>我们没有移除或弃用<a class="reference internal" href="../reference/api/pandas.Series.values.html#pandas.Series.values" title="pandas.Series.values"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.values</span></code></a> 或<a class="reference internal" href="../reference/api/pandas.DataFrame.values.html#pandas.DataFrame.values" title="pandas.DataFrame.values"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFrame.values</span></code></a>，但我们强烈建议改用 <code class="docutils literal notranslate"><span class="pre">.array</span></code> 或 <code class="docutils literal notranslate"><span class="pre">.to_numpy()</span></code>。</p>
<p>有关更多信息，请参阅<a class="reference internal" href="../user_guide/basics.html#basics-dtypes"><span class="std std-ref">Dtypes</span></a> 和<a class="reference internal" href="../user_guide/basics.html#basics-attrs"><span class="std std-ref">Attributes and Underlying Data</span></a>。</p>
</section>
<section id="pandas-array-a-new-top-level-method-for-creating-arrays">
<span id="whatsnew-0240-enhancements-array"></span><h3><code class="docutils literal notranslate"><span class="pre">pandas.array</span></code>: 创建数组的新顶级方法<a class="headerlink" href="v0.24.0.html#pandas-array-a-new-top-level-method-for-creating-arrays" title="Link to this heading">#</a></h3>
<p>已添加一个新的顶级方法 <a class="reference internal" href="../reference/api/pandas.array.html#pandas.array" title="pandas.array"><code class="xref py py-func docutils literal notranslate"><span class="pre">array()</span></code></a>，用于创建一维数组（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22860">GH 22860</a>）。这可用于创建任何<a class="reference internal" href="../development/extending.html#extending-extension-types"><span class="std std-ref">扩展数组</span></a>，包括由<a class="reference external" href="https://pandas.ac.cn/community/ecosystem.html">第三方库</a>注册的扩展数组。有关扩展数组的更多信息，请参阅<a class="reference internal" href="../user_guide/basics.html#basics-dtypes"><span class="std std-ref">dtypes 文档</span></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [26]: </span><span class="n">pd</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'Int64'</span><span class="p">)</span>
<span class="gh">Out[26]: </span>
<span class="go">&lt;IntegerArray&gt;</span>
<span class="go">[1, 2, &lt;NA&gt;]</span>
<span class="go">Length: 3, dtype: Int64</span>

<span class="gp">In [27]: </span><span class="n">pd</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'category'</span><span class="p">)</span>
<span class="gh">Out[27]: </span>
<span class="go">['a', 'b', 'c']</span>
<span class="go">Categories (3, object): ['a', 'b', 'c']</span>
</pre></div>
</div>
<p>传递没有专用扩展类型（例如 float、integer 等）的数据将返回一个新的 <code class="xref py py-class docutils literal notranslate"><span class="pre">arrays.PandasArray</span></code>，它只是一个围绕 <a class="reference external" href="https://numpy.com.cn/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> 的轻量级（无复制）包装器，满足 pandas 扩展数组接口。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [28]: </span><span class="n">pd</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gh">Out[28]: </span>
<span class="go">&lt;IntegerArray&gt;</span>
<span class="go">[1, 2, 3]</span>
<span class="go">Length: 3, dtype: Int64</span>
</pre></div>
</div>
<p>PandasArray 本身并不是一个非常有用的对象。但如果您需要编写适用于任何 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code></a> 的底层通用代码，<code class="xref py py-class docutils literal notranslate"><span class="pre">PandasArray</span></code> 可以满足该需求。</p>
<p>请注意，默认情况下，如果未指定 <code class="docutils literal notranslate"><span class="pre">dtype</span></code>，则返回数组的 dtype 将从数据中推断。特别需要注意的是，第一个示例 <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">np.nan]</span></code> 将返回一个浮点数组，因为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 是一个浮点数。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="n">pd</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
<span class="gh">Out[29]: </span>
<span class="go">&lt;IntegerArray&gt;</span>
<span class="go">[1, 2, &lt;NA&gt;]</span>
<span class="go">Length: 3, dtype: Int64</span>
</pre></div>
</div>
</section>
<section id="storing-interval-and-period-data-in-series-and-dataframe">
<span id="whatsnew-0240-enhancements-interval"></span><h3>在 Series 和 DataFrame 中存储 Interval 和 Period 数据<a class="headerlink" href="v0.24.0.html#storing-interval-and-period-data-in-series-and-dataframe" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 数据现在可以存储在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中，除了以前的 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19453">GH 19453</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22862">GH 22862</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [30]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="gp">In [31]: </span><span class="n">ser</span>
<span class="gh">Out[31]: </span>
<span class="go">0    (0, 1]</span>
<span class="go">1    (1, 2]</span>
<span class="go">2    (2, 3]</span>
<span class="go">3    (3, 4]</span>
<span class="go">4    (4, 5]</span>
<span class="go">Length: 5, dtype: interval</span>

<span class="gp">In [32]: </span><span class="n">ser</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[32]: </span><span class="go">interval[int64, right]</span>
</pre></div>
</div>
<p>对于 Period</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [33]: </span><span class="n">pser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s2">"2000"</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">"D"</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>

<span class="gp">In [34]: </span><span class="n">pser</span>
<span class="gh">Out[34]: </span>
<span class="go">0    2000-01-01</span>
<span class="go">1    2000-01-02</span>
<span class="go">2    2000-01-03</span>
<span class="go">3    2000-01-04</span>
<span class="go">4    2000-01-05</span>
<span class="go">Length: 5, dtype: period[D]</span>

<span class="gp">In [35]: </span><span class="n">pser</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[35]: </span><span class="go">period[D]</span>
</pre></div>
</div>
<p>以前，这些数据会被转换为具有对象 dtype 的 NumPy 数组。总的来说，当在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的列中存储 Interval 或 Period 数组时，这应该会带来更好的性能。</p>
<p>使用<a class="reference internal" href="../reference/api/pandas.Series.array.html#pandas.Series.array" title="pandas.Series.array"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.array</span></code></a> 从 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 中提取 Interval 或 Period 的底层数组</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [36]: </span><span class="n">ser</span><span class="o">.</span><span class="n">array</span>
<span class="gh">Out[36]: </span>
<span class="go">&lt;IntervalArray&gt;</span>
<span class="go">[(0, 1], (1, 2], (2, 3], (3, 4], (4, 5]]</span>
<span class="go">Length: 5, dtype: interval[int64, right]</span>

<span class="gp">In [37]: </span><span class="n">pser</span><span class="o">.</span><span class="n">array</span>
<span class="gh">Out[37]: </span>
<span class="go">&lt;PeriodArray&gt;</span>
<span class="go">['2000-01-01', '2000-01-02', '2000-01-03', '2000-01-04', '2000-01-05']</span>
<span class="go">Length: 5, dtype: period[D]</span>
</pre></div>
</div>
<p>这些返回 <a class="reference internal" href="../reference/api/pandas.arrays.IntervalArray.html#pandas.arrays.IntervalArray" title="pandas.arrays.IntervalArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">arrays.IntervalArray</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.arrays.PeriodArray.html#pandas.arrays.PeriodArray" title="pandas.arrays.PeriodArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">arrays.PeriodArray</span></code></a> 的实例，它们是支持 Interval 和 Period 数据的新扩展数组。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>为了向后兼容，<a class="reference internal" href="../reference/api/pandas.Series.values.html#pandas.Series.values" title="pandas.Series.values"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.values</span></code></a> 继续为 Interval 和 Period 数据返回 NumPy 对象数组。当您需要 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 中存储的数据数组时，我们建议使用<a class="reference internal" href="../reference/api/pandas.Series.array.html#pandas.Series.array" title="pandas.Series.array"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.array</span></code></a>；当您确定需要 NumPy 数组时，建议使用<a class="reference internal" href="../reference/api/pandas.Series.to_numpy.html#pandas.Series.to_numpy" title="pandas.Series.to_numpy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_numpy()</span></code></a>。</p>
<p>有关更多信息，请参阅<a class="reference internal" href="../user_guide/basics.html#basics-dtypes"><span class="std std-ref">Dtypes</span></a> 和<a class="reference internal" href="../user_guide/basics.html#basics-attrs"><span class="std std-ref">Attributes and Underlying Data</span></a>。</p>
</div>
</section>
<section id="joining-with-two-multi-indexes">
<span id="whatsnew-0240-enhancements-join-with-two-multiindexes"></span><h3>与两个 MultiIndex 进行连接<a class="headerlink" href="v0.24.0.html#joining-with-two-multi-indexes" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge" title="pandas.DataFrame.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.merge()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 现在可用于在重叠的索引级别上连接多索引的 <code class="docutils literal notranslate"><span class="pre">Dataframe</span></code> 实例（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/6360">GH 6360</a>）</p>
<p>请参阅<a class="reference internal" href="../user_guide/merging.html#merging-join-with-two-multi-indexes"><span class="std std-ref">合并、连接和拼接</span></a>文档部分。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [38]: </span><span class="n">index_left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="s1">'K0'</span><span class="p">,</span> <span class="s1">'X0'</span><span class="p">),</span> <span class="p">(</span><span class="s1">'K0'</span><span class="p">,</span> <span class="s1">'X1'</span><span class="p">),</span>
<span class="gp">   ....: </span>                                       <span class="p">(</span><span class="s1">'K1'</span><span class="p">,</span> <span class="s1">'X2'</span><span class="p">)],</span>
<span class="gp">   ....: </span>                                       <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">'key'</span><span class="p">,</span> <span class="s1">'X'</span><span class="p">])</span>
<span class="gp">   ....: </span>

<span class="gp">In [39]: </span><span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'A0'</span><span class="p">,</span> <span class="s1">'A1'</span><span class="p">,</span> <span class="s1">'A2'</span><span class="p">],</span>
<span class="gp">   ....: </span>                     <span class="s1">'B'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'B0'</span><span class="p">,</span> <span class="s1">'B1'</span><span class="p">,</span> <span class="s1">'B2'</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="n">index_left</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [40]: </span><span class="n">index_right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="s1">'K0'</span><span class="p">,</span> <span class="s1">'Y0'</span><span class="p">),</span> <span class="p">(</span><span class="s1">'K1'</span><span class="p">,</span> <span class="s1">'Y1'</span><span class="p">),</span>
<span class="gp">   ....: </span>                                        <span class="p">(</span><span class="s1">'K2'</span><span class="p">,</span> <span class="s1">'Y2'</span><span class="p">),</span> <span class="p">(</span><span class="s1">'K2'</span><span class="p">,</span> <span class="s1">'Y3'</span><span class="p">)],</span>
<span class="gp">   ....: </span>                                        <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">'key'</span><span class="p">,</span> <span class="s1">'Y'</span><span class="p">])</span>
<span class="gp">   ....: </span>

<span class="gp">In [41]: </span><span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'C'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'C0'</span><span class="p">,</span> <span class="s1">'C1'</span><span class="p">,</span> <span class="s1">'C2'</span><span class="p">,</span> <span class="s1">'C3'</span><span class="p">],</span>
<span class="gp">   ....: </span>                      <span class="s1">'D'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'D0'</span><span class="p">,</span> <span class="s1">'D1'</span><span class="p">,</span> <span class="s1">'D2'</span><span class="p">,</span> <span class="s1">'D3'</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="n">index_right</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [42]: </span><span class="n">left</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
<span class="gh">Out[42]: </span>
<span class="go">            A   B   C   D</span>
<span class="go">key X  Y                 </span>
<span class="go">K0  X0 Y0  A0  B0  C0  D0</span>
<span class="go">    X1 Y0  A1  B1  C0  D0</span>
<span class="go">K1  X2 Y1  A2  B2  C1  D1</span>

<span class="go">[3 rows x 4 columns]</span>
</pre></div>
</div>
<p>对于早期版本，可以使用以下方法完成。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [43]: </span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">right</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span>
<span class="gp">   ....: </span>         <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">'key'</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s1">'inner'</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s1">'key'</span><span class="p">,</span> <span class="s1">'X'</span><span class="p">,</span> <span class="s1">'Y'</span><span class="p">])</span>
<span class="gp">   ....: </span>
<span class="gh">Out[43]: </span>
<span class="go">            A   B   C   D</span>
<span class="go">key X  Y                 </span>
<span class="go">K0  X0 Y0  A0  B0  C0  D0</span>
<span class="go">    X1 Y0  A1  B1  C0  D0</span>
<span class="go">K1  X2 Y1  A2  B2  C1  D1</span>

<span class="go">[3 rows x 4 columns]</span>
</pre></div>
</div>
</section>
<section id="function-read-html-enhancements">
<span id="whatsnew-0240-enhancements-read-html"></span><h3><code class="docutils literal notranslate"><span class="pre">read_html</span></code> 函数的改进<a class="headerlink" href="v0.24.0.html#function-read-html-enhancements" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> 以前会忽略 <code class="docutils literal notranslate"><span class="pre">colspan</span></code> 和 <code class="docutils literal notranslate"><span class="pre">rowspan</span></code> 属性。现在它能理解这些属性，并将它们视为具有相同值的一系列单元格。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17054">GH 17054</a>）</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [44]: </span><span class="kn">from</span><span class="w"> </span><span class="nn">io</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringIO</span>

<span class="gp">In [45]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="s2">"""</span>
<span class="gp">   ....: </span><span class="s2">  &lt;table&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;thead&gt;</span>
<span class="gp">   ....: </span><span class="s2">      &lt;tr&gt;</span>
<span class="gp">   ....: </span><span class="s2">        &lt;th&gt;A&lt;/th&gt;&lt;th&gt;B&lt;/th&gt;&lt;th&gt;C&lt;/th&gt;</span>
<span class="gp">   ....: </span><span class="s2">      &lt;/tr&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;/thead&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;tbody&gt;</span>
<span class="gp">   ....: </span><span class="s2">      &lt;tr&gt;</span>
<span class="gp">   ....: </span><span class="s2">        &lt;td colspan="2"&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;</span>
<span class="gp">   ....: </span><span class="s2">      &lt;/tr&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;/tbody&gt;</span>
<span class="gp">   ....: </span><span class="s2">  &lt;/table&gt;"""</span><span class="p">))</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">result</span>
<span class="go">Out [13]:</span>
<span class="go">[   A  B   C</span>
<span class="go"> 0  1  2 NaN]</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [46]: </span><span class="n">result</span>
<span class="gh">Out[46]: </span>
<span class="go">[   A  B  C</span>
<span class="go"> 0  1  1  2</span>
<span class="go"> </span>
<span class="go"> [1 rows x 3 columns]]</span>
</pre></div>
</div>
</section>
<section id="new-styler-pipe-method">
<h3>新的 <code class="docutils literal notranslate"><span class="pre">Styler.pipe()</span></code> 方法<a class="headerlink" href="v0.24.0.html#new-styler-pipe-method" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> 类新增了 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.pipe.html#pandas.io.formats.style.Styler.pipe" title="pandas.io.formats.style.Styler.pipe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pipe()</span></code></a> 方法。这提供了一种方便的方式来应用用户预定义样式函数，并有助于减少在 Notebook 中重复使用 DataFrame 样式功能时的“样板代码”。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23229">GH 23229</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [47]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'N'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1250</span><span class="p">,</span> <span class="mi">1500</span><span class="p">,</span> <span class="mi">1750</span><span class="p">],</span> <span class="s1">'X'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.50</span><span class="p">]})</span>

<span class="gp">In [48]: </span><span class="k">def</span><span class="w"> </span><span class="nf">format_and_align</span><span class="p">(</span><span class="n">styler</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="k">return</span> <span class="p">(</span><span class="n">styler</span><span class="o">.</span><span class="n">format</span><span class="p">({</span><span class="s1">'N'</span><span class="p">:</span> <span class="s1">'</span><span class="si">{:,}</span><span class="s1">'</span><span class="p">,</span> <span class="s1">'X'</span><span class="p">:</span> <span class="s1">'</span><span class="si">{:.1%}</span><span class="s1">'</span><span class="p">})</span>
<span class="gp">   ....: </span>                  <span class="o">.</span><span class="n">set_properties</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'text-align'</span><span class="p">:</span> <span class="s1">'right'</span><span class="p">}))</span>
<span class="gp">   ....: </span>

<span class="gp">In [49]: </span><span class="n">df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">format_and_align</span><span class="p">)</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s1">'Summary of results.'</span><span class="p">)</span>
<span class="gh">Out[49]: </span><span class="go">&lt;pandas.io.formats.style.Styler at 0x7f9425e40c40&gt;</span>
</pre></div>
</div>
<p>pandas 中的其他类已存在类似方法，包括<a class="reference internal" href="../reference/api/pandas.DataFrame.pipe.html#pandas.DataFrame.pipe" title="pandas.DataFrame.pipe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pipe()</span></code></a>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">GroupBy.pipe()</span></code> 和<a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.pipe.html#pandas.core.resample.Resampler.pipe" title="pandas.core.resample.Resampler.pipe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.pipe()</span></code></a>。</p>
</section>
<section id="renaming-names-in-a-multiindex">
<span id="whatsnew-0240-enhancements-rename-axis"></span><h3>重命名 MultiIndex 中的名称<a class="headerlink" href="v0.24.0.html#renaming-names-in-a-multiindex" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.rename_axis.html#pandas.DataFrame.rename_axis" title="pandas.DataFrame.rename_axis"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.rename_axis()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">index</span></code> 和 <code class="docutils literal notranslate"><span class="pre">columns</span></code> 参数，<a class="reference internal" href="../reference/api/pandas.Series.rename_axis.html#pandas.Series.rename_axis" title="pandas.Series.rename_axis"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.rename_axis()</span></code></a> 支持 <code class="docutils literal notranslate"><span class="pre">index</span></code> 参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19978">GH 19978</a>）。</p>
<p>此更改允许传递字典，以便可以更改 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 的某些名称。</p>
<p>示例</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [50]: </span><span class="n">mi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="s1">'AB'</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s1">'CD'</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s1">'EF'</span><span class="p">)],</span>
<span class="gp">   ....: </span>                                <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">'AB'</span><span class="p">,</span> <span class="s1">'CD'</span><span class="p">,</span> <span class="s1">'EF'</span><span class="p">])</span>
<span class="gp">   ....: </span>

<span class="gp">In [51]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mi</span><span class="p">))),</span> <span class="n">index</span><span class="o">=</span><span class="n">mi</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'N'</span><span class="p">])</span>

<span class="gp">In [52]: </span><span class="n">df</span>
<span class="gh">Out[52]: </span>
<span class="go">          N</span>
<span class="go">AB CD EF   </span>
<span class="go">A  C  E   0</span>
<span class="go">      F   1</span>
<span class="go">   D  E   2</span>
<span class="go">      F   3</span>
<span class="go">B  C  E   4</span>
<span class="go">      F   5</span>
<span class="go">   D  E   6</span>
<span class="go">      F   7</span>

<span class="go">[8 rows x 1 columns]</span>

<span class="gp">In [53]: </span><span class="n">df</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">{</span><span class="s1">'CD'</span><span class="p">:</span> <span class="s1">'New'</span><span class="p">})</span>
<span class="gh">Out[53]: </span>
<span class="go">           N</span>
<span class="go">AB New EF   </span>
<span class="go">A  C   E   0</span>
<span class="go">       F   1</span>
<span class="go">   D   E   2</span>
<span class="go">       F   3</span>
<span class="go">B  C   E   4</span>
<span class="go">       F   5</span>
<span class="go">   D   E   6</span>
<span class="go">       F   7</span>

<span class="go">[8 rows x 1 columns]</span>
</pre></div>
</div>
<p>有关更多详细信息，请参阅<a class="reference internal" href="../user_guide/advanced.html#advanced-index-names"><span class="std std-ref">高级文档中的重命名部分</span></a>。</p>
</section>
<section id="other-enhancements">
<span id="whatsnew-0240-enhancements-other"></span><h3>其他改进<a class="headerlink" href="v0.24.0.html#other-enhancements" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 现在直接允许 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 类型对象和命名 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 之间的合并，无需事先将 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 对象转换为 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21220">GH 21220</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ExcelWriter</span></code> 现在接受 <code class="docutils literal notranslate"><span class="pre">mode</span></code> 作为关键字参数，在使用 <code class="docutils literal notranslate"><span class="pre">openpyxl</span></code> 引擎时，可以追加到现有工作簿（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/3441">GH 3441</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FrozenList</span></code> 获得了 <code class="docutils literal notranslate"><span class="pre">.union()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.difference()</span></code> 方法。此功能大大简化了依赖于明确排除某些列的 groupby 操作。有关更多信息，请参阅<a class="reference internal" href="../user_guide/groupby.html#groupby-split"><span class="std std-ref">将对象拆分为组</span></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15475">GH 15475</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15506">GH 15506</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" title="pandas.DataFrame.to_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_parquet()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">index</span></code> 作为参数，允许用户覆盖引擎的默认行为，以在生成的 Parquet 文件中包含或省略 DataFrame 的索引。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20768">GH 20768</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_feather.html#pandas.read_feather" title="pandas.read_feather"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_feather()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">columns</span></code> 作为参数，允许用户指定应读取哪些列。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24025">GH 24025</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.corr.html#pandas.DataFrame.corr" title="pandas.DataFrame.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corr()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.corr.html#pandas.Series.corr" title="pandas.Series.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.corr()</span></code></a> 现在接受可调用对象，用于相关性的通用计算方法，例如直方图交集（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22684">GH 22684</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">decimal</span></code> 作为参数，允许用户指定输出中应使用的小数分隔符。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23614">GH 23614</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">render_links</span></code> 作为参数，允许用户生成包含 DataFrame 中出现的任何 URL 链接的 HTML。有关示例用法，请参阅 IO 文档中<a class="reference internal" href="../user_guide/io.html#io-html"><span class="std std-ref">关于写入 HTML</span></a> 的部分。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/2679">GH 2679</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_csv()</span></code></a> 现在支持将 pandas 扩展类型作为 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 的参数，允许用户在读取 CSV 时使用 pandas 扩展类型。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23228">GH 23228</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.shift.html#pandas.DataFrame.shift" title="pandas.DataFrame.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shift()</span></code></a> 方法现在接受 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> 作为参数，允许用户指定一个值，该值将在空期间替换 NA/NaT。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15486">GH 15486</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 现在支持将 <code class="docutils literal notranslate"><span class="pre">%Z</span></code> 和 <code class="docutils literal notranslate"><span class="pre">%z</span></code> 指令传递到 <code class="docutils literal notranslate"><span class="pre">format</span></code> 参数中（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13486">GH 13486</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.mode.html#pandas.Series.mode" title="pandas.Series.mode"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.mode()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.mode.html#pandas.DataFrame.mode" title="pandas.DataFrame.mode"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.mode()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">dropna</span></code> 参数，可用于指定是否应考虑 <code class="docutils literal notranslate"><span class="pre">NaN</span></code>/<code class="docutils literal notranslate"><span class="pre">NaT</span></code> 值（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17534">GH 17534</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.to_csv.html#pandas.Series.to_csv" title="pandas.Series.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.to_csv()</span></code></a> 在传递文件句柄时，现在支持 <code class="docutils literal notranslate"><span class="pre">compression</span></code> 关键字。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21227">GH 21227</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.droplevel.html#pandas.Index.droplevel" title="pandas.Index.droplevel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.droplevel()</span></code></a> 现在也为扁平索引实现，以便与 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 兼容（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21115">GH 21115</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.droplevel.html#pandas.Series.droplevel" title="pandas.Series.droplevel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.droplevel()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.droplevel.html#pandas.DataFrame.droplevel" title="pandas.DataFrame.droplevel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.droplevel()</span></code></a> 现在已实现（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20342">GH 20342</a>）</p></li>
<li><p>通过 <code class="docutils literal notranslate"><span class="pre">gcsfs</span></code> 库增加了对 Google Cloud Storage 读写的支持（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19454">GH 19454</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23094">GH 23094</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_gbq.html#pandas.DataFrame.to_gbq" title="pandas.DataFrame.to_gbq"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_gbq()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_gbq.html#pandas.read_gbq" title="pandas.read_gbq"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_gbq()</span></code></a> 的签名和文档已更新，以反映 <a class="reference external" href="https://pandas-gbq.readthedocs.io/en/latest/changelog.html#changelog-0-8-0">pandas-gbq 库 0.8.0 版本</a>的更改。增加了 <code class="docutils literal notranslate"><span class="pre">credentials</span></code> 参数，可启用任何类型的 <a class="reference external" href="https://google-auth.readthedocs.io/en/latest/">google-auth 凭据</a>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21627">GH 21627</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22557">GH 22557</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23662">GH 23662</a>）</p></li>
<li><p>新方法 <a class="reference internal" href="../reference/api/pandas.HDFStore.walk.html#pandas.HDFStore.walk" title="pandas.HDFStore.walk"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HDFStore.walk()</span></code></a> 将递归遍历 HDF5 文件的组层次结构（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10932">GH 10932</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> 会跨 <code class="docutils literal notranslate"><span class="pre">colspan</span></code> 和 <code class="docutils literal notranslate"><span class="pre">rowspan</span></code> 复制单元格数据，并且在未提供 <code class="docutils literal notranslate"><span class="pre">header</span></code> 关键字参数且没有 <code class="docutils literal notranslate"><span class="pre">thead</span></code> 时，会将所有 <code class="docutils literal notranslate"><span class="pre">th</span></code> 表行视为标题（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17054">GH 17054</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.nlargest.html#pandas.Series.nlargest" title="pandas.Series.nlargest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.nlargest()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.nsmallest.html#pandas.Series.nsmallest" title="pandas.Series.nsmallest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.nsmallest()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.nlargest.html#pandas.DataFrame.nlargest" title="pandas.DataFrame.nlargest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.nlargest()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.nsmallest.html#pandas.DataFrame.nsmallest" title="pandas.DataFrame.nsmallest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.nsmallest()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">keep</span></code> 参数的 <code class="docutils literal notranslate"><span class="pre">"all"</span></code> 值。这会保留第 n 大/小值的所有并列项（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16818">GH 16818</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 获得了 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.set_closed.html#pandas.IntervalIndex.set_closed" title="pandas.IntervalIndex.set_closed"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_closed()</span></code></a> 方法，用于更改现有的 <code class="docutils literal notranslate"><span class="pre">closed</span></code> 值（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21670">GH 21670</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_csv()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.to_csv.html#pandas.Series.to_csv" title="pandas.Series.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_csv()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_json()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.to_json.html#pandas.Series.to_json" title="pandas.Series.to_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_json()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">compression='infer'</span></code> 以根据文件名扩展名推断压缩（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15008">GH 15008</a>）。<code class="docutils literal notranslate"><span class="pre">to_csv</span></code>、<code class="docutils literal notranslate"><span class="pre">to_json</span></code> 和 <code class="docutils literal notranslate"><span class="pre">to_pickle</span></code> 方法的默认压缩已更新为 <code class="docutils literal notranslate"><span class="pre">'infer'</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22004">GH 22004</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code></a> 现在支持为受支持的数据库写入 <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code> 类型。对于不支持时区的数据库，日期时间数据将存储为不带时区信息的本地时间戳。请参阅<a class="reference internal" href="../user_guide/io.html#io-sql-datetime-data"><span class="std std-ref">日期时间数据类型</span></a>以了解其影响（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9086">GH 9086</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_timedelta()</span></code></a> 现在支持 ISO 格式的 timedelta 字符串（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21877">GH 21877</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 现在支持构造函数中的 <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code> 对象（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/2193">GH 2193</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 获得了 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.timetz.html#pandas.DatetimeIndex.timetz" title="pandas.DatetimeIndex.timetz"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DatetimeIndex.timetz</span></code></a> 属性。这会返回带有时区信息的本地时间。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21358">GH 21358</a>）</p></li>
<li><p>对于 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a>，<a class="reference internal" href="../reference/api/pandas.Timestamp.round.html#pandas.Timestamp.round" title="pandas.Timestamp.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">round()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Timestamp.ceil.html#pandas.Timestamp.ceil" title="pandas.Timestamp.ceil"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ceil()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Timestamp.floor.html#pandas.Timestamp.floor" title="pandas.Timestamp.floor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">floor()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">ambiguous</span></code> 参数以处理四舍五入到模糊时间的日期时间（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18946">GH 18946</a>），以及 <code class="docutils literal notranslate"><span class="pre">nonexistent</span></code> 参数以处理四舍五入到不存在时间的日期时间。请参阅<a class="reference internal" href="../user_guide/timeseries.html#timeseries-timezone-nonexistent"><span class="std std-ref">本地化时不存在的时间</span></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22647">GH 22647</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">resample()</span></code></a> 的结果现在是可迭代的，类似于 <code class="docutils literal notranslate"><span class="pre">groupby()</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15314">GH 15314</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 获得了 <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.quantile.html#pandas.core.resample.Resampler.quantile" title="pandas.core.resample.Resampler.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.quantile()</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15023">GH 15023</a>）。</p></li>
<li><p>带有 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> 现在将像 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 一样遵守 <code class="docutils literal notranslate"><span class="pre">base</span></code> 参数。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23882">GH 23882</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.api.types.is_list_like.html#pandas.api.types.is_list_like" title="pandas.api.types.is_list_like"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.api.types.is_list_like()</span></code></a> 获得了一个关键字 <code class="docutils literal notranslate"><span class="pre">allow_sets</span></code>，默认情况下为 <code class="docutils literal notranslate"><span class="pre">True</span></code>；如果为 <code class="docutils literal notranslate"><span class="pre">False</span></code>，则 <code class="docutils literal notranslate"><span class="pre">set</span></code> 的所有实例将不再被视为“列表式”（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23061">GH 23061</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.to_frame.html#pandas.Index.to_frame" title="pandas.Index.to_frame"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.to_frame()</span></code></a> 现在支持覆盖列名（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22580">GH 22580</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes" title="pandas.Categorical.from_codes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.from_codes()</span></code></a> 现在可以接受 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数，作为传递 <code class="docutils literal notranslate"><span class="pre">categories</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 的替代方案（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24398">GH 24398</a>）。</p></li>
<li><p>新属性 <code class="docutils literal notranslate"><span class="pre">__git_version__</span></code> 将返回当前构建的 git 提交 SHA（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21295">GH 21295</a>）。</p></li>
<li><p>与 Matplotlib 3.0 的兼容性（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22790">GH 22790</a>）。</p></li>
<li><p>添加了 <a class="reference internal" href="../reference/api/pandas.Interval.overlaps.html#pandas.Interval.overlaps" title="pandas.Interval.overlaps"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Interval.overlaps()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.arrays.IntervalArray.overlaps.html#pandas.arrays.IntervalArray.overlaps" title="pandas.arrays.IntervalArray.overlaps"><code class="xref py py-meth docutils literal notranslate"><span class="pre">arrays.IntervalArray.overlaps()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.overlaps.html#pandas.IntervalIndex.overlaps" title="pandas.IntervalIndex.overlaps"><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.overlaps()</span></code></a>，用于确定类区间对象之间的重叠（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21998">GH 21998</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_fwf.html#pandas.read_fwf" title="pandas.read_fwf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_fwf()</span></code></a> 现在接受关键字 <code class="docutils literal notranslate"><span class="pre">infer_nrows</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15138">GH 15138</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" title="pandas.DataFrame.to_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_parquet()</span></code></a> 现在支持在 <code class="docutils literal notranslate"><span class="pre">engine</span> <span class="pre">=</span> <span class="pre">'pyarrow'</span></code> 时，将 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 写入为按列子集分区的 parquet 文件目录（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23283">GH 23283</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.tz_localize.html#pandas.Timestamp.tz_localize" title="pandas.Timestamp.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.tz_localize()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.tz_localize.html#pandas.DatetimeIndex.tz_localize" title="pandas.DatetimeIndex.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.tz_localize()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.tz_localize.html#pandas.Series.tz_localize" title="pandas.Series.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.tz_localize()</span></code></a> 获得了 <code class="docutils literal notranslate"><span class="pre">nonexistent</span></code> 参数，用于替代处理不存在的时间。请参阅<a class="reference internal" href="../user_guide/timeseries.html#timeseries-timezone-nonexistent"><span class="std std-ref">本地化时不存在的时间</span></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8917">GH 8917</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24466">GH 24466</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.difference.html#pandas.Index.difference" title="pandas.Index.difference"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.difference()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Index.intersection.html#pandas.Index.intersection" title="pandas.Index.intersection"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.intersection()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Index.union.html#pandas.Index.union" title="pandas.Index.union"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.union()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.symmetric_difference.html#pandas.Index.symmetric_difference" title="pandas.Index.symmetric_difference"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.symmetric_difference()</span></code></a> 现在有一个可选的 <code class="docutils literal notranslate"><span class="pre">sort</span></code> 参数，用于控制结果是否应尽可能排序（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17839">GH 17839</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24471">GH 24471</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 作为列名列表或可调用对象（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18273">GH 18273</a>）</p></li>
<li><p>已添加 <a class="reference internal" href="../reference/api/pandas.MultiIndex.to_flat_index.html#pandas.MultiIndex.to_flat_index" title="pandas.MultiIndex.to_flat_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.to_flat_index()</span></code></a>，用于将多个级别展平为单级别 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 对象。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_stata.html#pandas.DataFrame.to_stata" title="pandas.DataFrame.to_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code></a> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.stata.StataWriter117</span></code> 可以将混合字符串列写入 Stata strl 格式（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23633">GH 23633</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.between_time.html#pandas.DataFrame.between_time" title="pandas.DataFrame.between_time"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.between_time()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.at_time.html#pandas.DataFrame.at_time" title="pandas.DataFrame.at_time"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.at_time()</span></code></a> 获得了 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8839">GH 8839</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_records.html#pandas.DataFrame.to_records" title="pandas.DataFrame.to_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_records()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">index_dtypes</span></code> 和 <code class="docutils literal notranslate"><span class="pre">column_dtypes</span></code> 参数，以允许存储的列和索引记录中使用不同的数据类型（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18146">GH 18146</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 获得了 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.is_overlapping.html#pandas.IntervalIndex.is_overlapping" title="pandas.IntervalIndex.is_overlapping"><code class="xref py py-attr docutils literal notranslate"><span class="pre">is_overlapping</span></code></a> 属性，用于指示 <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> 是否包含任何重叠的区间（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23309">GH 23309</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.DataFrame.to_sql()</span></code></a> 获得了 <code class="docutils literal notranslate"><span class="pre">method</span></code> 参数，用于控制 SQL 插入子句。请参阅文档中的<a class="reference internal" href="../user_guide/io.html#io-sql-method"><span class="std std-ref">插入方法</span></a>部分。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8953">GH 8953</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.corrwith.html#pandas.DataFrame.corrwith" title="pandas.DataFrame.corrwith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corrwith()</span></code></a> 现在支持 Spearman 秩相关、Kendall tau 以及可调用相关方法。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21925">GH 21925</a>）</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.to_pickle.html#pandas.DataFrame.to_pickle" title="pandas.DataFrame.to_pickle"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_pickle()</span></code></a> 和其他导出方法现在支持路径参数中的波浪号（<code class="docutils literal notranslate"><span class="pre">~</span></code>）。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23473">GH 23473</a>）</p></li>
</ul>
</section>
</section>
<section id="backwards-incompatible-api-changes">
<span id="whatsnew-0240-api-breaking"></span><h2>向后不兼容的 API 更改<a class="headerlink" href="v0.24.0.html#backwards-incompatible-api-changes" title="Link to this heading">#</a></h2>
<p>pandas 0.24.0 包含多项 API 破坏性变更。</p>
<section id="increased-minimum-versions-for-dependencies">
<span id="whatsnew-0240-api-breaking-deps"></span><h3>依赖项的最低版本要求提高<a class="headerlink" href="v0.24.0.html#increased-minimum-versions-for-dependencies" title="Link to this heading">#</a></h3>
<p>我们已更新了依赖项的最低支持版本（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21242">GH 21242</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18742">GH 18742</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23774">GH 23774</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24767">GH 24767</a>）。如果已安装，我们现在要求：</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>包</p></th>
<th class="head"><p>最低版本</p></th>
<th class="head"><p>必需</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>numpy</p></td>
<td><p>1.12.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>bottleneck</p></td>
<td><p>1.2.0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>fastparquet</p></td>
<td><p>0.2.1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>matplotlib</p></td>
<td><p>2.0.0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>numexpr</p></td>
<td><p>2.6.1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas-gbq</p></td>
<td><p>0.8.0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pyarrow</p></td>
<td><p>0.9.0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pytables</p></td>
<td><p>3.4.2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>scipy</p></td>
<td><p>0.18.1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>xlrd</p></td>
<td><p>1.0.0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pytest (开发版)</p></td>
<td><p>3.6</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>此外，我们不再依赖 <code class="docutils literal notranslate"><span class="pre">feather-format</span></code> 进行基于 feather 的存储，并将其替换为对 <code class="docutils literal notranslate"><span class="pre">pyarrow</span></code> 的引用（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21639">GH 21639</a> 和 <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23053">GH 23053</a>）。</p>
</section>
<section id="os-linesep-is-used-for-line-terminator-of-dataframe-to-csv">
<span id="whatsnew-0240-api-breaking-csv-line-terminator"></span><h3><code class="docutils literal notranslate"><span class="pre">os.linesep</span></code> 用于 <code class="docutils literal notranslate"><span class="pre">DataFrame.to_csv</span></code> 的 <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code><a class="headerlink" href="v0.24.0.html#os-linesep-is-used-for-line-terminator-of-dataframe-to-csv" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> 现在使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">os.linesep()</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">'\n'</span></code> 作为默认的行终止符（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20353">GH 20353</a>）。此更改仅影响在 Windows 上运行时，即使在 <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code> 中传递 <code class="docutils literal notranslate"><span class="pre">'\n'</span></code>，Windows 上也使用 <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code> 作为行终止符。</p>
<p>Windows 上的旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"string_with_lf"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"a</span><span class="se">\n</span><span class="s2">bc"</span><span class="p">],</span>
<span class="gp">   ...: </span>                     <span class="s2">"string_with_crlf"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"a</span><span class="se">\r\n</span><span class="s2">bc"</span><span class="p">]})</span>

<span class="gp">In [2]: </span><span class="c1"># When passing file PATH to to_csv,</span>
<span class="gp">   ...: </span><span class="c1"># line_terminator does not work, and csv is saved with '\r\n'.</span>
<span class="gp">   ...: </span><span class="c1"># Also, this converts all '\n's in the data to '\r\n'.</span>
<span class="gp">   ...: </span><span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">"test.csv"</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">line_terminator</span><span class="o">=</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"test.csv"</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   ...: </span>    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gh">Out[3]: </span><span class="go">b'string_with_lf,string_with_crlf\r\n"a\r\nbc","a\r\r\nbc"\r\n'</span>

<span class="gp">In [4]: </span><span class="c1"># When passing file OBJECT with newline option to</span>
<span class="gp">   ...: </span><span class="c1"># to_csv, line_terminator works.</span>
<span class="gp">   ...: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"test2.csv"</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">'w'</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   ...: </span>    <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">line_terminator</span><span class="o">=</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>

<span class="gp">In [5]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"test2.csv"</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   ...: </span>    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gh">Out[5]: </span><span class="go">b'string_with_lf,string_with_crlf\n"a\nbc","a\r\nbc"\n'</span>
</pre></div>
</div>
<p>Windows 上的新行为</p>
<p>显式传递 <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code>，将行终止符设置为该字符。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"string_with_lf"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"a</span><span class="se">\n</span><span class="s2">bc"</span><span class="p">],</span>
<span class="gp">   ...: </span>                     <span class="s2">"string_with_crlf"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"a</span><span class="se">\r\n</span><span class="s2">bc"</span><span class="p">]})</span>

<span class="gp">In [2]: </span><span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">"test.csv"</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">line_terminator</span><span class="o">=</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"test.csv"</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   ...: </span>    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gh">Out[3]: </span><span class="go">b'string_with_lf,string_with_crlf\n"a\nbc","a\r\nbc"\n'</span>
</pre></div>
</div>
<p>在 Windows 上，<code class="docutils literal notranslate"><span class="pre">os.linesep</span></code> 的值为 <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code>，因此如果未设置 <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code>，则使用 <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code> 作为行终止符。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"string_with_lf"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"a</span><span class="se">\n</span><span class="s2">bc"</span><span class="p">],</span>
<span class="gp">   ...: </span>                     <span class="s2">"string_with_crlf"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"a</span><span class="se">\r\n</span><span class="s2">bc"</span><span class="p">]})</span>

<span class="gp">In [2]: </span><span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">"test.csv"</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"test.csv"</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   ...: </span>    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gh">Out[3]: </span><span class="go">b'string_with_lf,string_with_crlf\r\n"a\nbc","a\r\nbc"\r\n'</span>
</pre></div>
</div>
<p>对于文件对象，指定 <code class="docutils literal notranslate"><span class="pre">newline</span></code> 不足以设置行终止符。即使在这种情况下，您也必须显式传入 <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"string_with_lf"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"a</span><span class="se">\n</span><span class="s2">bc"</span><span class="p">],</span>
<span class="gp">   ...: </span>                     <span class="s2">"string_with_crlf"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"a</span><span class="se">\r\n</span><span class="s2">bc"</span><span class="p">]})</span>

<span class="gp">In [2]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"test2.csv"</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">'w'</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   ...: </span>    <span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"test2.csv"</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   ...: </span>    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gh">Out[3]: </span><span class="go">b'string_with_lf,string_with_crlf\r\n"a\nbc","a\r\nbc"\r\n'</span>
</pre></div>
</div>
</section>
<section id="proper-handling-of-np-nan-in-a-string-data-typed-column-with-the-python-engine">
<span id="whatsnew-0240-bug-fixes-nan-with-str-dtype"></span><h3>Python 引擎下字符串数据类型列中 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> 的正确处理<a class="headerlink" href="v0.24.0.html#proper-handling-of-np-nan-in-a-string-data-typed-column-with-the-python-engine" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 在 Python 引擎下存在一个错误，当 <code class="docutils literal notranslate"><span class="pre">dtype=str</span></code> 且 <code class="docutils literal notranslate"><span class="pre">na_filter=True</span></code> 时，缺失值会变为 <code class="docutils literal notranslate"><span class="pre">'nan'</span></code>。现在，这些缺失值被转换为字符串缺失指示符 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20377">GH 20377</a>）</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">'a,b,c</span><span class="se">\n</span><span class="s1">1,,3</span><span class="se">\n</span><span class="s1">4,5,6'</span>
<span class="gp">In [6]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">engine</span><span class="o">=</span><span class="s1">'python'</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">na_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">In [7]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">]</span>
<span class="gh">Out[7]:</span>
<span class="go">'nan'</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [54]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">'a,b,c</span><span class="se">\n</span><span class="s1">1,,3</span><span class="se">\n</span><span class="s1">4,5,6'</span>

<span class="gp">In [55]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">engine</span><span class="o">=</span><span class="s1">'python'</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">na_filter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [56]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">]</span>
<span class="gh">Out[56]: </span><span class="go">nan</span>
</pre></div>
</div>
<p>请注意，我们现在输出的是 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> 本身，而不是其字符串形式。</p>
</section>
<section id="parsing-datetime-strings-with-timezone-offsets">
<span id="whatsnew-0240-api-timezone-offset-parsing"></span><h3>解析带时区偏移的日期时间字符串<a class="headerlink" href="v0.24.0.html#parsing-datetime-strings-with-timezone-offsets" title="Link to this heading">#</a></h3>
<p>以前，使用 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 解析带 UTC 偏移的日期时间字符串时，会自动将日期时间转换为 UTC，而不会进行时区本地化。这与使用 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 解析相同的日期时间字符串不一致，后者会保留 <code class="docutils literal notranslate"><span class="pre">tz</span></code> 属性中的 UTC 偏移。现在，当所有日期时间字符串都具有相同的 UTC 偏移时，<a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 会在 <code class="docutils literal notranslate"><span class="pre">tz</span></code> 属性中保留 UTC 偏移（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17697">GH 17697</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11736">GH 11736</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22457">GH 22457</a>）</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2015-11-18 15:30:00+05:30"</span><span class="p">)</span>
<span class="gh">Out[2]: </span><span class="go">Timestamp('2015-11-18 10:00:00')</span>

<span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">"2015-11-18 15:30:00+05:30"</span><span class="p">)</span>
<span class="gh">Out[3]: </span><span class="go">Timestamp('2015-11-18 15:30:00+0530', tz='pytz.FixedOffset(330)')</span>

<span class="go"># Different UTC offsets would automatically convert the datetimes to UTC (without a UTC timezone)</span>
<span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s2">"2015-11-18 15:30:00+05:30"</span><span class="p">,</span> <span class="s2">"2015-11-18 16:30:00+06:30"</span><span class="p">])</span>
<span class="gh">Out[4]: </span><span class="go">DatetimeIndex(['2015-11-18 10:00:00', '2015-11-18 10:00:00'], dtype='datetime64[ns]', freq=None)</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [57]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">"2015-11-18 15:30:00+05:30"</span><span class="p">)</span>
<span class="gh">Out[57]: </span><span class="go">Timestamp('2015-11-18 15:30:00+0530', tz='UTC+05:30')</span>

<span class="gp">In [58]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">"2015-11-18 15:30:00+05:30"</span><span class="p">)</span>
<span class="gh">Out[58]: </span><span class="go">Timestamp('2015-11-18 15:30:00+0530', tz='UTC+05:30')</span>
</pre></div>
</div>
<p>解析具有相同 UTC 偏移的日期时间字符串将保留 <code class="docutils literal notranslate"><span class="pre">tz</span></code> 中的 UTC 偏移。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [59]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s2">"2015-11-18 15:30:00+05:30"</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[59]: </span><span class="go">DatetimeIndex(['2015-11-18 15:30:00+05:30', '2015-11-18 15:30:00+05:30'], dtype='datetime64[ns, UTC+05:30]', freq=None)</span>
</pre></div>
</div>
<p>解析具有不同 UTC 偏移的日期时间字符串现在将创建具有不同 UTC 偏移的 <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> 对象的索引。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [59]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s2">"2015-11-18 15:30:00+05:30"</span><span class="p">,</span>
<span class="go">                               "2015-11-18 16:30:00+06:30"])</span>

<span class="go">In[60]: idx</span>
<span class="gh">Out[60]: </span><span class="go">Index([2015-11-18 15:30:00+05:30, 2015-11-18 16:30:00+06:30], dtype='object')</span>

<span class="go">In[61]: idx[0]</span>
<span class="gh">Out[61]: </span><span class="go">Timestamp('2015-11-18 15:30:00+0530', tz='UTC+05:30')</span>

<span class="go">In[62]: idx[1]</span>
<span class="gh">Out[62]: </span><span class="go">Timestamp('2015-11-18 16:30:00+0630', tz='UTC+06:30')</span>
</pre></div>
</div>
<p>传递 <code class="docutils literal notranslate"><span class="pre">utc=True</span></code> 将模拟以前的行为，但会正确指示日期已转换为 UTC。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [60]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s2">"2015-11-18 15:30:00+05:30"</span><span class="p">,</span>
<span class="gp">   ....: </span>                <span class="s2">"2015-11-18 16:30:00+06:30"</span><span class="p">],</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="gh">Out[60]: </span><span class="go">DatetimeIndex(['2015-11-18 10:00:00+00:00', '2015-11-18 10:00:00+00:00'], dtype='datetime64[ns, UTC]', freq=None)</span>
</pre></div>
</div>
</section>
<section id="parsing-mixed-timezones-with-read-csv">
<span id="whatsnew-0240-api-breaking-read-csv-mixed-tz"></span><h3>使用 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 解析混合时区<a class="headerlink" href="v0.24.0.html#parsing-mixed-timezones-with-read-csv" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 不再静默地将混合时区列转换为 UTC（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24987">GH 24987</a>）。</p>
<p><em>旧行为</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">io</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">content</span> <span class="o">=</span> <span class="s2">"""</span><span class="se">\</span>
<span class="gp">... </span><span class="s2">a</span>
<span class="gp">... </span><span class="s2">2000-01-01T00:00:00+05:00</span>
<span class="gp">... </span><span class="s2">2000-01-01T00:00:00+06:00"""</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">content</span><span class="p">),</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">a</span>
<span class="go">0   1999-12-31 19:00:00</span>
<span class="go">1   1999-12-31 18:00:00</span>
<span class="go">Name: a, dtype: datetime64[ns]</span>
</pre></div>
</div>
<p><em>新行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="n">In</span><span class="p">[</span><span class="mi">64</span><span class="p">]:</span> <span class="kn">import</span><span class="w"> </span><span class="nn">io</span>

<span class="n">In</span><span class="p">[</span><span class="mi">65</span><span class="p">]:</span> <span class="n">content</span> <span class="o">=</span> <span class="s2">"""</span><span class="se">\</span>
<span class="s2">   ...: a</span>
<span class="s2">   ...: 2000-01-01T00:00:00+05:00</span>
<span class="s2">   ...: 2000-01-01T00:00:00+06:00"""</span>

<span class="n">In</span><span class="p">[</span><span class="mi">66</span><span class="p">]:</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">content</span><span class="p">),</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">])</span>

<span class="n">In</span><span class="p">[</span><span class="mi">67</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">a</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">67</span><span class="p">]:</span>
<span class="mi">0</span>   <span class="mi">2000</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="o">+</span><span class="mi">05</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">1</span>   <span class="mi">2000</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="o">+</span><span class="mi">06</span><span class="p">:</span><span class="mi">00</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">a</span><span class="p">,</span> <span class="n">Length</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>可以看出，<code class="docutils literal notranslate"><span class="pre">dtype</span></code> 是 object；列中的每个值都是一个字符串。要将字符串转换为日期时间数组，请使用 <code class="docutils literal notranslate"><span class="pre">date_parser</span></code> 参数。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
<span class="gp">   ...: </span>    <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">content</span><span class="p">),</span>
<span class="gp">   ...: </span>    <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">],</span>
<span class="gp">   ...: </span>    <span class="n">date_parser</span><span class="o">=</span><span class="k">lambda</span> <span class="n">col</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">   ...: </span><span class="p">)</span>

<span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">a</span>
<span class="gh">Out[4]:</span>
<span class="go">0   1999-12-31 19:00:00+00:00</span>
<span class="go">1   1999-12-31 18:00:00+00:00</span>
<span class="go">Name: a, dtype: datetime64[ns, UTC]</span>
</pre></div>
</div>
<p>有关更多信息，请参阅<a class="reference internal" href="v0.24.0.html#whatsnew-0240-api-timezone-offset-parsing"><span class="std std-ref">解析带时区偏移的日期时间字符串</span></a>。</p>
</section>
<section id="time-values-in-dt-end-time-and-to-timestamp-how-end">
<span id="whatsnew-0240-api-breaking-period-end-time"></span><h3><code class="docutils literal notranslate"><span class="pre">dt.end_time</span></code> 和 <code class="docutils literal notranslate"><span class="pre">to_timestamp(how='end')</span></code> 中的时间值<a class="headerlink" href="v0.24.0.html#time-values-in-dt-end-time-and-to-timestamp-how-end" title="Link to this heading">#</a></h3>
<p>在调用<a class="reference internal" href="../reference/api/pandas.Series.dt.end_time.html#pandas.Series.dt.end_time" title="pandas.Series.dt.end_time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.end_time</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Period.end_time.html#pandas.Period.end_time" title="pandas.Period.end_time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Period.end_time</span></code></a>、<a class="reference internal" href="../reference/api/pandas.PeriodIndex.end_time.html#pandas.PeriodIndex.end_time" title="pandas.PeriodIndex.end_time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">PeriodIndex.end_time</span></code></a>、使用 <code class="docutils literal notranslate"><span class="pre">how='end'</span></code> 调用<a class="reference internal" href="../reference/api/pandas.Period.to_timestamp.html#pandas.Period.to_timestamp" title="pandas.Period.to_timestamp"><code class="xref py py-func docutils literal notranslate"><span class="pre">Period.to_timestamp()</span></code></a>，或使用 <code class="docutils literal notranslate"><span class="pre">how='end'</span></code> 调用<a class="reference internal" href="../reference/api/pandas.PeriodIndex.to_timestamp.html#pandas.PeriodIndex.to_timestamp" title="pandas.PeriodIndex.to_timestamp"><code class="xref py py-func docutils literal notranslate"><span class="pre">PeriodIndex.to_timestamp()</span></code></a> 时，<a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 对象中的时间值现在设置为“23:59:59.999999999”（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17157">GH 17157</a>）</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">'2017-01-01'</span><span class="p">,</span> <span class="s1">'D'</span><span class="p">)</span>
<span class="gp">In [3]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">([</span><span class="n">p</span><span class="p">])</span>

<span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">end_time</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[4]: </span><span class="go">Timestamp(2017-01-01 00:00:00)</span>

<span class="gp">In [5]: </span><span class="n">p</span><span class="o">.</span><span class="n">end_time</span>
<span class="gh">Out[5]: </span><span class="go">Timestamp(2017-01-01 23:59:59.999999999)</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<p>例如，调用<a class="reference internal" href="../reference/api/pandas.Series.dt.end_time.html#pandas.Series.dt.end_time" title="pandas.Series.dt.end_time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.end_time</span></code></a> 现在将得到时间“23:59:59.999999999”，与<a class="reference internal" href="../reference/api/pandas.Period.end_time.html#pandas.Period.end_time" title="pandas.Period.end_time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Period.end_time</span></code></a> 的情况相同。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [61]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">'2017-01-01'</span><span class="p">,</span> <span class="s1">'D'</span><span class="p">)</span>

<span class="gp">In [62]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">([</span><span class="n">p</span><span class="p">])</span>

<span class="gp">In [63]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">end_time</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[63]: </span><span class="go">Timestamp('2017-01-01 23:59:59.999999999')</span>

<span class="gp">In [64]: </span><span class="n">p</span><span class="o">.</span><span class="n">end_time</span>
<span class="gh">Out[64]: </span><span class="go">Timestamp('2017-01-01 23:59:59.999999999')</span>
</pre></div>
</div>
</section>
<section id="series-unique-for-timezone-aware-data">
<span id="whatsnew-0240-api-breaking-datetime-unique"></span><h3>时区感知数据的 Series.unique<a class="headerlink" href="v0.24.0.html#series-unique-for-timezone-aware-data" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.Series.unique.html#pandas.Series.unique" title="pandas.Series.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.unique()</span></code></a> 对于带时区值的日期时间的返回类型已从 <a class="reference external" href="https://numpy.com.cn/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 对象更改为 <a class="reference internal" href="../reference/api/pandas.arrays.DatetimeArray.html#pandas.arrays.DatetimeArray" title="pandas.arrays.DatetimeArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">arrays.DatetimeArray</span></code></a>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24024">GH 24024</a>）。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [65]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'2000'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'UTC'</span><span class="p">),</span>
<span class="gp">   ....: </span>                 <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'2000'</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">'UTC'</span><span class="p">)])</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">ser</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[3]: </span><span class="go">array([Timestamp('2000-01-01 00:00:00+0000', tz='UTC')], dtype=object)</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [66]: </span><span class="n">ser</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[66]: </span>
<span class="go">&lt;DatetimeArray&gt;</span>
<span class="go">['2000-01-01 00:00:00+00:00']</span>
<span class="go">Length: 1, dtype: datetime64[ns, UTC]</span>
</pre></div>
</div>
</section>
<section id="sparse-data-structure-refactor">
<span id="whatsnew-0240-api-breaking-sparse-values"></span><h3>稀疏数据结构重构<a class="headerlink" href="v0.24.0.html#sparse-data-structure-refactor" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">SparseArray</span></code>（<code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> 的后端数组以及 <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> 中的列）现在是一个扩展数组（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21978">GH 21978</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19056">GH 19056</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22835">GH 22835</a>）。为了符合此接口并与 pandas 的其余部分保持一致，进行了一些 API 破坏性更改。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SparseArray</span></code> 不再是 <a class="reference external" href="https://numpy.com.cn/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a> 的子类。要将 <code class="docutils literal notranslate"><span class="pre">SparseArray</span></code> 转换为 NumPy 数组，请使用 <a class="reference external" href="https://numpy.com.cn/doc/stable/reference/generated/numpy.asarray.html#numpy.asarray" title="(in NumPy v2.2)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.asarray()</span></code></a>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseArray.dtype</span></code> 和 <code class="docutils literal notranslate"><span class="pre">SparseSeries.dtype</span></code> 现在是 <a class="reference internal" href="../reference/api/pandas.SparseDtype.html#pandas.SparseDtype" title="pandas.SparseDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDtype</span></code></a> 的实例，而不是 <code class="docutils literal notranslate"><span class="pre">np.dtype</span></code>。使用 <code class="docutils literal notranslate"><span class="pre">SparseDtype.subtype</span></code> 访问底层 dtype。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy.asarray(sparse_array)</span></code> 现在返回包含所有值的稠密数组，而不仅仅是非填充值的值（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14167">GH 14167</a>）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseArray.take</span></code> 现在与 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.take.html#pandas.api.extensions.ExtensionArray.take" title="pandas.api.extensions.ExtensionArray.take"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.api.extensions.ExtensionArray.take()</span></code></a> 的 API 匹配（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19506">GH 19506</a>）</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">allow_fill</span></code> 的默认值已从 <code class="docutils literal notranslate"><span class="pre">False</span></code> 更改为 <code class="docutils literal notranslate"><span class="pre">True</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out</span></code> 和 <code class="docutils literal notranslate"><span class="pre">mode</span></code> 参数现在不再被接受（以前，如果指定它们会引发错误）。</p></li>
<li><p>不再允许为 <code class="docutils literal notranslate"><span class="pre">indices</span></code> 传递标量。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">concat()</span></code> 将稀疏和密集 Series 混合后的结果是一个带有稀疏值的 Series，而不是 <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code>。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseDataFrame.combine</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame.combine_first</span></code> 不再支持在保留稀疏子类型的同时将稀疏列与密集列组合。结果将是一个对象 dtype 的 SparseArray。</p></li>
<li><p>现在允许将 <code class="docutils literal notranslate"><span class="pre">SparseArray.fill_value</span></code> 设置为具有不同 dtype 的填充值。</p></li>
<li><p>当切片带有稀疏值的单列时，<code class="docutils literal notranslate"><span class="pre">DataFrame[column]</span></code> 现在是带有稀疏值的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>，而不是 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseSeries</span></code>。（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23559">GH 23559</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.where()</span></code></a> 的结果现在是带有稀疏值的 <code class="docutils literal notranslate"><span class="pre">Series</span></code>，就像其他扩展数组一样（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24077">GH 24077</a>）</p></li>
</ul>
<p>对于需要或可能具体化大型稠密数组的操作，会发出一些新的警告。</p>
<ul class="simple">
<li><p>当使用带 <code class="docutils literal notranslate"><span class="pre">method</span></code> 的 fillna 时，会发出 <a class="reference internal" href="../reference/api/pandas.errors.PerformanceWarning.html#pandas.errors.PerformanceWarning" title="pandas.errors.PerformanceWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">errors.PerformanceWarning</span></code></a> 警告，因为会构建一个稠密数组来创建填充数组。使用 <code class="docutils literal notranslate"><span class="pre">value</span></code> 填充是填充稀疏数组的有效方式。</p></li>
<li><p>当连接具有不同填充值的稀疏 Series 时，现在会发出 <a class="reference internal" href="../reference/api/pandas.errors.PerformanceWarning.html#pandas.errors.PerformanceWarning" title="pandas.errors.PerformanceWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">errors.PerformanceWarning</span></code></a> 警告。将继续使用第一个稀疏数组的填充值。</p></li>
</ul>
<p>除了这些 API 破坏性更改之外，还进行了许多<a class="reference internal" href="v0.24.0.html#whatsnew-0240-bug-fixes-sparse"><span class="std std-ref">性能改进和错误修复</span></a>。</p>
<p>最后，添加了一个 <code class="docutils literal notranslate"><span class="pre">Series.sparse</span></code> 访问器，以提供稀疏数据特有的方法，例如 <a class="reference internal" href="../reference/api/pandas.Series.sparse.from_coo.html#pandas.Series.sparse.from_coo" title="pandas.Series.sparse.from_coo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.sparse.from_coo()</span></code></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [67]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'Sparse[int]'</span><span class="p">)</span>

<span class="gp">In [68]: </span><span class="n">s</span><span class="o">.</span><span class="n">sparse</span><span class="o">.</span><span class="n">density</span>
<span class="gh">Out[68]: </span><span class="go">0.6</span>
</pre></div>
</div>
</section>
<section id="get-dummies-always-returns-a-dataframe">
<span id="whatsnew-0240-api-breaking-get-dummies"></span><h3><a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> 始终返回一个 DataFrame<a class="headerlink" href="v0.24.0.html#get-dummies-always-returns-a-dataframe" title="Link to this heading">#</a></h3>
<p>以前，当 `sparse=True` 传递给 <a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> 时，返回值可能是 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 或 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDataFrame</span></code>，具体取决于所有列还是仅部分列进行了独热编码。现在，始终返回 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24284">GH 24284</a>)。</p>
<p><em>旧行为</em></p>
<p>第一个 <a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> 返回 `DataFrame`，因为列 `A` 未进行独热编码。当只将 `["B", "C"]` 传递给 `get_dummies` 时，所有列都进行了独热编码，并返回 `SparseDataFrame`。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">"B"</span><span class="p">:</span> <span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">],</span> <span class="s2">"C"</span><span class="p">:</span> <span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'a'</span><span class="p">]})</span>

<span class="gp">In [3]: </span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">sparse</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="gh">Out[3]: </span><span class="go">pandas.core.frame.DataFrame</span>

<span class="gp">In [4]: </span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">]],</span> <span class="n">sparse</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="gh">Out[4]: </span><span class="go">pandas.core.sparse.frame.SparseDataFrame</span>
</pre></div>
</div>
<p><em>新行为</em></p>
<p>现在，返回类型始终是 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [69]: </span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">sparse</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="gh">Out[69]: </span><span class="go">pandas.core.frame.DataFrame</span>

<span class="gp">In [70]: </span><span class="nb">type</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">]],</span> <span class="n">sparse</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="gh">Out[70]: </span><span class="go">pandas.core.frame.DataFrame</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注意</p>
<p>`SparseDataFrame` 和具有稀疏值的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 之间的内存使用没有区别。内存使用将与以前版本的 pandas 相同。</p>
</div>
</section>
<section id="raise-valueerror-in-dataframe-to-dict-orient-index">
<span id="whatsnew-0240-api-breaking-frame-to-dict-index-orient"></span><h3>在 <code class="docutils literal notranslate"><span class="pre">DataFrame.to_dict(orient='index')</span></code> 中引发 ValueError<a class="headerlink" href="v0.24.0.html#raise-valueerror-in-dataframe-to-dict-orient-index" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict" title="pandas.DataFrame.to_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_dict()</span></code></a> 中的错误在与 `orient='index'` 和非唯一索引一起使用时，会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而不是丢失数据 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22801">GH 22801</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [71]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'a'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">'b'</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'A'</span><span class="p">])</span>

<span class="gp">In [72]: </span><span class="n">df</span>
<span class="gh">Out[72]: </span>
<span class="go">   a     b</span>
<span class="go">A  1  0.50</span>
<span class="go">A  2  0.75</span>

<span class="go">[2 rows x 2 columns]</span>

<span class="gp">In [73]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">'index'</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">73</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">'index'</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/util/_decorators.py:333,</span> in <span class="ni">deprecate_nonkeyword_arguments.&lt;locals&gt;.decorate.&lt;locals&gt;.wrapper</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">327</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">num_allow_args</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">328</span>     <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">329</span>         <span class="n">msg</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">arguments</span><span class="o">=</span><span class="n">_format_argument_list</span><span class="p">(</span><span class="n">allow_args</span><span class="p">)),</span>
<span class="g g-Whitespace">    </span><span class="mi">330</span>         <span class="ne">FutureWarning</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">331</span>         <span class="n">stacklevel</span><span class="o">=</span><span class="n">find_stack_level</span><span class="p">(),</span>
<span class="g g-Whitespace">    </span><span class="mi">332</span>     <span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">333</span> <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/frame.py:2183,</span> in <span class="ni">DataFrame.to_dict</span><span class="nt">(self, orient, into, index)</span>
<span class="g g-Whitespace">   </span><span class="mi">2080</span><span class="w"> </span><span class="sd">"""</span>
<span class="g g-Whitespace">   </span><span class="mi">2081</span><span class="sd"> Convert the DataFrame to a dictionary.</span>
<span class="g g-Whitespace">   </span><span class="mi">2082</span><span class="sd"> </span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">   </span><span class="mi">2179</span><span class="sd">  defaultdict(&lt;class 'list'&gt;, {'col1': 2, 'col2': 0.75})]</span>
<span class="g g-Whitespace">   </span><span class="mi">2180</span><span class="sd"> """</span>
<span class="g g-Whitespace">   </span><span class="mi">2181</span> <span class="kn">from</span><span class="w"> </span><span class="nn">pandas.core.methods.to_dict</span><span class="w"> </span><span class="kn">import</span> <span class="n">to_dict</span>
<span class="ne">-&gt; </span><span class="mi">2183</span> <span class="k">return</span> <span class="n">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orient</span><span class="p">,</span> <span class="n">into</span><span class="o">=</span><span class="n">into</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>

<span class="nn">File ~/work/pandas/pandas/pandas/core/methods/to_dict.py:242,</span> in <span class="ni">to_dict</span><span class="nt">(df, orient, into, index)</span>
<span class="g g-Whitespace">    </span><span class="mi">240</span> <span class="k">elif</span> <span class="n">orient</span> <span class="o">==</span> <span class="s2">"index"</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">241</span>     <span class="k">if</span> <span class="ow">not</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_unique</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">242</span>         <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"DataFrame index must be unique for orient='index'."</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">243</span>     <span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">244</span>     <span class="k">if</span> <span class="n">are_all_object_dtype_cols</span><span class="p">:</span>

<span class="ne">ValueError</span>: DataFrame index must be unique for orient='index'.
</pre></div>
</div>
</section>
<section id="tick-dateoffset-normalize-restrictions">
<span id="whatsnew-0240-api-datetimelike-normalize"></span><h3>Tick DateOffset 规范化限制<a class="headerlink" href="v0.24.0.html#tick-dateoffset-normalize-restrictions" title="Link to this heading">#</a></h3>
<p>不再支持使用 `normalize=True` 创建 <code class="docutils literal notranslate"><span class="pre">Tick</span></code> 对象（<code class="xref py py-class docutils literal notranslate"><span class="pre">Day</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">Hour</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">Minute</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">Second</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">Milli</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">Micro</span></code>、<code class="xref py py-class docutils literal notranslate"><span class="pre">Nano</span></code>）。这可以防止加法操作未能保持单调性或结合律的意外行为。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21427">GH 21427</a>)</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'2018-06-11 18:01:14'</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">ts</span>
<span class="gh">Out[3]: </span><span class="go">Timestamp('2018-06-11 18:01:14')</span>

<span class="gp">In [4]: </span><span class="n">tic</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">Hour</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">   ...:</span>

<span class="gp">In [5]: </span><span class="n">tic</span>
<span class="gh">Out[5]: </span><span class="go">&lt;2 * Hours&gt;</span>

<span class="gp">In [6]: </span><span class="n">ts</span> <span class="o">+</span> <span class="n">tic</span>
<span class="gh">Out[6]: </span><span class="go">Timestamp('2018-06-11 00:00:00')</span>

<span class="gp">In [7]: </span><span class="n">ts</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">==</span> <span class="n">ts</span> <span class="o">+</span> <span class="p">(</span><span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span><span class="p">)</span>
<span class="gh">Out[7]: </span><span class="go">False</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [74]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'2018-06-11 18:01:14'</span><span class="p">)</span>

<span class="gp">In [75]: </span><span class="n">tic</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">Hour</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="gp">In [76]: </span><span class="n">ts</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">==</span> <span class="n">ts</span> <span class="o">+</span> <span class="p">(</span><span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span><span class="p">)</span>
<span class="gh">Out[76]: </span><span class="go">True</span>
</pre></div>
</div>
</section>
<section id="period-subtraction">
<span id="whatsnew-0240-api-period-subtraction"></span><span id="whatsnew-0240-api-datetimelike"></span><h3>周期相减<a class="headerlink" href="v0.24.0.html#period-subtraction" title="Link to this heading">#</a></h3>
<p>一个 <code class="docutils literal notranslate"><span class="pre">Period</span></code> 减去另一个 <code class="docutils literal notranslate"><span class="pre">Period</span></code> 将得到一个 <code class="docutils literal notranslate"><span class="pre">DateOffset</span></code>，而不是一个整数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21314">GH 21314</a>)</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">june</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">'June 2018'</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">april</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">'April 2018'</span><span class="p">)</span>

<span class="gp">In [4]: </span><span class="n">june</span> <span class="o">-</span> <span class="n">april</span>
<span class="go">Out [4]: 2</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [77]: </span><span class="n">june</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">'June 2018'</span><span class="p">)</span>

<span class="gp">In [78]: </span><span class="n">april</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">'April 2018'</span><span class="p">)</span>

<span class="gp">In [79]: </span><span class="n">june</span> <span class="o">-</span> <span class="n">april</span>
<span class="gh">Out[79]: </span><span class="go">&lt;2 * MonthEnds&gt;</span>
</pre></div>
</div>
<p>类似地，从 <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 中减去一个 <code class="docutils literal notranslate"><span class="pre">Period</span></code> 现在将返回一个 <code class="docutils literal notranslate"><span class="pre">DateOffset</span></code> 对象的 <code class="docutils literal notranslate"><span class="pre">Index</span></code>，而不是 <code class="docutils literal notranslate"><span class="pre">Int64Index</span></code></p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">'June 2018'</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'M'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">pi</span> <span class="o">-</span> <span class="n">pi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[3]: </span><span class="go">Int64Index([0, 1, 2], dtype='int64')</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [80]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">'June 2018'</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'M'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="gp">In [81]: </span><span class="n">pi</span> <span class="o">-</span> <span class="n">pi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[81]: </span><span class="go">Index([&lt;0 * MonthEnds&gt;, &lt;MonthEnd&gt;, &lt;2 * MonthEnds&gt;], dtype='object')</span>
</pre></div>
</div>
</section>
<section id="addition-subtraction-of-nan-from-dataframe">
<span id="whatsnew-0240-api-timedelta64-subtract-nan"></span><h3>DataFrame 中 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 的加法/减法<a class="headerlink" href="v0.24.0.html#addition-subtraction-of-nan-from-dataframe" title="Link to this heading">#</a></h3>
<p>对具有 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 列添加或减去 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 现在将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>，而不是返回全 <code class="docutils literal notranslate"><span class="pre">NaT</span></code>。这是为了与 <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 的行为兼容 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH 22163</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [82]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)])</span>

<span class="gp">In [83]: </span><span class="n">df</span>
<span class="gh">Out[83]: </span>
<span class="go">       0</span>
<span class="go">0 1 days</span>

<span class="go">[1 rows x 1 columns]</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)])</span>

<span class="gp">In [5]: </span><span class="n">df</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gh">Out[5]:</span>
<span class="go">    0</span>
<span class="go">0 NaT</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">df</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="go">...</span>
<span class="go">TypeError: unsupported operand type(s) for -: 'TimedeltaIndex' and 'float'</span>
</pre></div>
</div>
</section>
<section id="dataframe-comparison-operations-broadcasting-changes">
<span id="whatsnew-0240-api-dataframe-cmp-broadcasting"></span><h3>DataFrame 比较操作的广播更改<a class="headerlink" href="v0.24.0.html#dataframe-comparison-operations-broadcasting-changes" title="Link to this heading">#</a></h3>
<p>以前，<a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 比较操作（`==`、`!=` 等）的广播行为与算术操作（`+`、`-` 等）的行为不一致。在这些情况下，比较操作的行为已更改为与算术操作匹配。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22880">GH 22880</a>)</p>
<p>受影响的情况有</p>
<ul class="simple">
<li><p>对只有 1 行或 1 列的二维 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> 进行操作时，现在会以与 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> 相同的方式进行广播 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23000">GH 23000</a>)。</p></li>
<li><p>长度与 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 行数匹配的列表或元组现在将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>，而不是按列操作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22880">GH 22880</a>)。</p></li>
<li><p>长度与 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 列数匹配的列表或元组现在将按行操作，而不是引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22880">GH 22880</a>)。</p></li>
</ul>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [84]: </span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="gp">In [85]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

<span class="gp">In [86]: </span><span class="n">df</span>
<span class="gh">Out[86]: </span>
<span class="go">   0  1</span>
<span class="go">0  0  1</span>
<span class="go">1  2  3</span>
<span class="go">2  4  5</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">df</span> <span class="o">==</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
<span class="go">    ...: # comparison previously broadcast where arithmetic would raise</span>
<span class="gh">Out[5]:</span>
<span class="go">       0      1</span>
<span class="go">0   True   True</span>
<span class="go">1  False  False</span>
<span class="go">2  False  False</span>
<span class="gp">In [6]: </span><span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
<span class="go">...</span>
<span class="go">ValueError: Unable to coerce to DataFrame, shape must be (3, 2): given (1, 2)</span>

<span class="gp">In [7]: </span><span class="n">df</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">    ...: # length matches number of columns;</span>
<span class="go">    ...: # comparison previously raised where arithmetic would broadcast</span>
<span class="go">...</span>
<span class="go">ValueError: Invalid broadcasting comparison [(1, 2)] with block values</span>
<span class="gp">In [8]: </span><span class="n">df</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[8]:</span>
<span class="go">   0  1</span>
<span class="go">0  1  3</span>
<span class="go">1  3  5</span>
<span class="go">2  5  7</span>

<span class="gp">In [9]: </span><span class="n">df</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">    ...:  # length matches number of rows</span>
<span class="go">    ...:  # comparison previously broadcast where arithmetic would raise</span>
<span class="gh">Out[9]:</span>
<span class="go">       0      1</span>
<span class="go">0  False   True</span>
<span class="go">1   True  False</span>
<span class="go">2  False  False</span>
<span class="gp">In [10]: </span><span class="n">df</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">...</span>
<span class="go">ValueError: Unable to coerce to Series, length must be 2: given 3</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Comparison operations and arithmetic operations both broadcast.</span>
<span class="gp">In [87]: </span><span class="n">df</span> <span class="o">==</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
<span class="gh">Out[87]: </span>
<span class="go">       0      1</span>
<span class="go">0   True   True</span>
<span class="go">1  False  False</span>
<span class="go">2  False  False</span>

<span class="go">[3 rows x 2 columns]</span>

<span class="gp">In [88]: </span><span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
<span class="gh">Out[88]: </span>
<span class="go">   0  1</span>
<span class="go">0  0  2</span>
<span class="go">1  2  4</span>
<span class="go">2  4  6</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Comparison operations and arithmetic operations both broadcast.</span>
<span class="gp">In [89]: </span><span class="n">df</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[89]: </span>
<span class="go">       0      1</span>
<span class="go">0  False  False</span>
<span class="go">1  False  False</span>
<span class="go">2  False  False</span>

<span class="go">[3 rows x 2 columns]</span>

<span class="gp">In [90]: </span><span class="n">df</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[90]: </span>
<span class="go">   0  1</span>
<span class="go">0  1  3</span>
<span class="go">1  3  5</span>
<span class="go">2  5  7</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Comparison operations and arithmetic operations both raise ValueError.</span>
<span class="gp">In [6]: </span><span class="n">df</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">...</span>
<span class="go">ValueError: Unable to coerce to Series, length must be 2: given 3</span>

<span class="gp">In [7]: </span><span class="n">df</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">...</span>
<span class="go">ValueError: Unable to coerce to Series, length must be 2: given 3</span>
</pre></div>
</div>
</section>
<section id="dataframe-arithmetic-operations-broadcasting-changes">
<span id="whatsnew-0240-api-dataframe-arithmetic-broadcasting"></span><h3>DataFrame 算术操作的广播更改<a class="headerlink" href="v0.24.0.html#dataframe-arithmetic-operations-broadcasting-changes" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 算术操作在使用二维 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> 对象进行操作时，现在会以与 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> 广播相同的方式进行广播。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23000">GH 23000</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [91]: </span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="gp">In [92]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

<span class="gp">In [93]: </span><span class="n">df</span>
<span class="gh">Out[93]: </span>
<span class="go">   0  1</span>
<span class="go">0  0  1</span>
<span class="go">1  2  3</span>
<span class="go">2  4  5</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>   <span class="c1"># 1 row, 2 columns</span>
<span class="go">...</span>
<span class="go">ValueError: Unable to coerce to DataFrame, shape must be (3, 2): given (1, 2)</span>
<span class="gp">In [6]: </span><span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">]]</span>   <span class="c1"># 1 column, 3 rows</span>
<span class="go">...</span>
<span class="go">ValueError: Unable to coerce to DataFrame, shape must be (3, 2): given (3, 1)</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [94]: </span><span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>   <span class="c1"># 1 row, 2 columns</span>
<span class="gh">Out[94]: </span>
<span class="go">   0  1</span>
<span class="go">0  0  2</span>
<span class="go">1  2  4</span>
<span class="go">2  4  6</span>

<span class="go">[3 rows x 2 columns]</span>

<span class="gp">In [95]: </span><span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">]]</span>   <span class="c1"># 1 column, 3 rows</span>
<span class="gh">Out[95]: </span>
<span class="go">   0   1</span>
<span class="go">0  1   2</span>
<span class="go">1  5   6</span>
<span class="go">2  9  10</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
</section>
<section id="series-and-index-data-dtype-incompatibilities">
<span id="whatsnew-0240-api-incompatibilities"></span><h3>Series 和 Index 数据类型不兼容<a class="headerlink" href="v0.24.0.html#series-and-index-data-dtype-incompatibilities" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Series</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 构造函数现在在数据与传入的 `dtype=` 不兼容时会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15832">GH 15832</a>)</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"uint64"</span><span class="p">)</span>
<span class="go">Out [4]:</span>
<span class="go">0    18446744073709551615</span>
<span class="go">dtype: uint64</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"uint64"</span><span class="p">)</span>
<span class="go">Out [4]:</span>
<span class="go">...</span>
<span class="go">OverflowError: Trying to coerce negative values to unsigned integers</span>
</pre></div>
</div>
</section>
<section id="concatenation-changes">
<span id="whatsnew-0240-api-concat-categorical"></span><h3>连接更改<a class="headerlink" href="v0.24.0.html#concatenation-changes" title="Link to this heading">#</a></h3>
<p>现在，在对带有 NA 值的整数 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 调用 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.concat()</span></code></a> 时，如果与非另一个整数 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 进行连接，它们将被作为对象处理 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19214">GH 19214</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [96]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>

<span class="gp">In [97]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"category"</span><span class="p">)</span>
</pre></div>
</div>
<p><em>旧行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">s</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>
<span class="gh">Out[3]:</span>
<span class="go">0    0.0</span>
<span class="go">1    1.0</span>
<span class="go">2    NaN</span>
<span class="go">0    0.0</span>
<span class="go">1    1.0</span>
<span class="go">2    NaN</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p><em>新行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [98]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">s</span><span class="p">,</span> <span class="n">c</span><span class="p">])</span>
<span class="gh">Out[98]: </span>
<span class="go">0    0.0</span>
<span class="go">1    1.0</span>
<span class="go">2    NaN</span>
<span class="go">0    0.0</span>
<span class="go">1    1.0</span>
<span class="go">2    NaN</span>
<span class="go">Length: 6, dtype: float64</span>
</pre></div>
</div>
</section>
<section id="datetimelike-api-changes">
<h3>日期时间型 API 更改<a class="headerlink" href="v0.24.0.html#datetimelike-api-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>对于具有非 `None` `freq` 属性的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a>，整数类型数组或 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 的加减法将返回相同类的对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19959">GH 19959</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 对象现在是不可变的。尝试修改这些对象将引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21341">GH 21341</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 减去另一个 <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 现在将返回一个对象类型的 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 对象的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>，而不是引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20049">GH 20049</a>)</p></li>
<li><p>当输入分别为日期时间或时间差 dtype 且 `retbins=True` 时，<a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.qcut.html#pandas.qcut" title="pandas.qcut"><code class="xref py py-func docutils literal notranslate"><span class="pre">qcut()</span></code></a> 现在返回 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 分箱 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19891">GH 19891</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.to_period.html#pandas.DatetimeIndex.to_period" title="pandas.DatetimeIndex.to_period"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.to_period()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Timestamp.to_period.html#pandas.Timestamp.to_period" title="pandas.Timestamp.to_period"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.to_period()</span></code></a> 在时区信息将丢失时会发出警告 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21333">GH 21333</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.tz_convert()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.tz_localize()</span></code> 已被移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21781">GH 21781</a>)</p></li>
</ul>
</section>
<section id="other-api-changes">
<span id="whatsnew-0240-api-other"></span><h3>其他 API 更改<a class="headerlink" href="v0.24.0.html#other-api-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>新构造的以整数作为 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 的空 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 现在只有在指定 `index` 时才会被转换为 <code class="docutils literal notranslate"><span class="pre">float64</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22858">GH 22858</a>)</p></li>
<li><p>如果 `others` 是一个 <code class="docutils literal notranslate"><span class="pre">set</span></code>，<a class="reference internal" href="../reference/api/pandas.Series.str.cat.html#pandas.Series.str.cat" title="pandas.Series.str.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.cat()</span></code></a> 现在将引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23009">GH 23009</a>)</p></li>
<li><p>将标量值传递给 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 现在将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23539">GH 23539</a>)</p></li>
<li><p>由于截断现在由 <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameFormatter</span></code> 处理，<code class="xref py py-class docutils literal notranslate"><span class="pre">HTMLFormatter</span></code> 中的 `max_rows` 和 `max_cols` 参数已被移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23818">GH 23818</a>)</p></li>
<li><p>如果包含缺失值的列被声明为 `bool` 数据类型，<a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 现在将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20591">GH 20591</a>)</p></li>
<li><p>从 <a class="reference internal" href="../reference/api/pandas.MultiIndex.to_frame.html#pandas.MultiIndex.to_frame" title="pandas.MultiIndex.to_frame"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.to_frame()</span></code></a> 生成的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的列顺序现在保证与 <a class="reference internal" href="../reference/api/pandas.MultiIndex.names.html#pandas.MultiIndex.names" title="pandas.MultiIndex.names"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MultiIndex.names</span></code></a> 的顺序匹配。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22420">GH 22420</a>)</p></li>
<li><p>错误地将 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 而不是元组序列传递给 <a class="reference internal" href="../reference/api/pandas.MultiIndex.from_tuples.html#pandas.MultiIndex.from_tuples" title="pandas.MultiIndex.from_tuples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.from_tuples()</span></code></a> 现在会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24024">GH 24024</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">pd.offsets.generate_range()</span></code> 的参数 `time_rule` 已被移除；请改用 `offset` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24157">GH 24157</a>)</p></li>
<li><p>在 0.23.x 版本中，pandas 在合并数值列（例如 `int` 类型列）和 `object` 类型列时会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9780">GH 9780</a>)。我们已重新启用合并 `object` 和其他数据类型的能力；但是，当合并数值列和仅由字符串组成的 `object` 类型列时，pandas 仍然会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21681">GH 21681</a>)</p></li>
<li><p>现在，访问 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 中具有重复名称的级别（例如在 <a class="reference internal" href="../reference/api/pandas.MultiIndex.get_level_values.html#pandas.MultiIndex.get_level_values" title="pandas.MultiIndex.get_level_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_level_values()</span></code></a> 中）会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21678">GH 21678</a>)。</p></li>
<li><p>如果子数据类型无效，`IntervalDtype` 的无效构造现在将始终引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21185">GH 21185</a>)</p></li>
<li><p>尝试使用非唯一 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 重新索引 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 现在会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">Exception</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21770">GH 21770</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 减法将尝试按元素操作，而不是引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19369">GH 19369</a>)</p></li>
<li><p>当使用 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.to_excel.html#pandas.io.formats.style.Styler.to_excel" title="pandas.io.formats.style.Styler.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_excel()</span></code></a> 时，<a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.formats.style.Styler</span></code></a> 支持 `number-format` 属性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22015">GH 22015</a>)</p></li>
<li><p>当提供无效方法时，<a class="reference internal" href="../reference/api/pandas.DataFrame.corr.html#pandas.DataFrame.corr" title="pandas.DataFrame.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corr()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.corr.html#pandas.Series.corr" title="pandas.Series.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.corr()</span></code></a> 现在会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 并附带一条有用的错误消息，而不是 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22298">GH 22298</a>)</p></li>
<li><p>`shift()` 现在将始终返回一个副本，而不是以前当偏移量为 0 时返回自身的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22397">GH 22397</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.set_index.html#pandas.DataFrame.set_index" title="pandas.DataFrame.set_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.set_index()</span></code></a> 现在提供了更好的（且较少出现的）KeyError，对不正确的类型会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>，并且在使用 `drop=True` 时不会因重复的列名而失败。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22484">GH 22484</a>)</p></li>
<li><p>现在，对包含多个相同类型 ExtensionArray 的 DataFrame 进行单行切片时，会保留其数据类型，而不是强制转换为对象类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22784">GH 22784</a>)</p></li>
<li><p>`DateOffset` 的属性 `_cacheable` 和方法 `_should_cache` 已被移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23118">GH 23118</a>)</p></li>
<li><p>当提供标量值进行搜索时，<a class="reference internal" href="../reference/api/pandas.Series.searchsorted.html#pandas.Series.searchsorted" title="pandas.Series.searchsorted"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.searchsorted()</span></code></a> 现在返回一个标量而不是一个数组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23801">GH 23801</a>)。</p></li>
<li><p>当提供标量值进行搜索时，<code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.searchsorted()</span></code> 现在返回一个标量而不是一个数组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23466">GH 23466</a>)。</p></li>
<li><p>如果搜索的键在其类别中未找到，<code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.searchsorted()</span></code> 现在将引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23466">GH 23466</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.hasnans.html#pandas.Index.hasnans" title="pandas.Index.hasnans"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.hasnans()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.hasnans.html#pandas.Series.hasnans" title="pandas.Series.hasnans"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.hasnans()</span></code></a> 现在始终返回 Python 布尔值。以前，根据情况可能会返回 Python 或 NumPy 布尔值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23294">GH 23294</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> 的参数顺序已重新排列，以便相互保持一致。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23614">GH 23614</a>)</p></li>
<li><p>如果目标索引非唯一且不等于当前索引，<code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex.reindex()</span></code> 现在会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>。它以前只在目标索引不是分类数据类型时才引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23963">GH 23963</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.to_list.html#pandas.Series.to_list" title="pandas.Series.to_list"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.to_list()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.to_list.html#pandas.Index.to_list" title="pandas.Index.to_list"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.to_list()</span></code></a> 现在分别是 `Series.tolist` 和 `Index.tolist` 的别名 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8826">GH 8826</a>)</p></li>
<li><p>`SparseSeries.unstack` 的结果现在是一个具有稀疏值的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>，而不是 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24372">GH 24372</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 不再忽略 dtype 精度。传递非纳秒分辨率的 dtype 将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24753">GH 24753</a>)</p></li>
</ul>
</section>
</section>
<section id="extension-type-changes">
<span id="whatsnew-0240-api-extension"></span><h2>扩展类型更改<a class="headerlink" href="v0.24.0.html#extension-type-changes" title="Link to this heading">#</a></h2>
<p><strong>相等性和可哈希性</strong></p>
<p>pandas 现在要求扩展数据类型是可哈希的（即相应的 <code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 对象；可哈希性不是相应 <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 值的要求）。基类实现了一个默认的 `__eq__` 和 `__hash__`。如果您的数据类型是参数化的，则应更新 `ExtensionDtype._metadata` 元组以匹配 `__init__` 方法的签名。更多信息请参见 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionDtype.html#pandas.api.extensions.ExtensionDtype" title="pandas.api.extensions.ExtensionDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.api.extensions.ExtensionDtype</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22476">GH 22476</a>)。</p>
<p><strong>新增和更改的方法</strong></p>
<ul class="simple">
<li><p>已添加 <code class="xref py py-meth docutils literal notranslate"><span class="pre">dropna()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21185">GH 21185</a>)</p></li>
<li><p>已添加 <code class="xref py py-meth docutils literal notranslate"><span class="pre">repeat()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24349">GH 24349</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 构造函数 <code class="docutils literal notranslate"><span class="pre">_from_sequence</span></code> 现在接受关键字参数 `copy=False` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21185">GH 21185</a>)</p></li>
<li><p>作为基本 <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 接口的一部分，已添加 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.shift.html#pandas.api.extensions.ExtensionArray.shift" title="pandas.api.extensions.ExtensionArray.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.api.extensions.ExtensionArray.shift()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22387">GH 22387</a>)。</p></li>
<li><p>已添加 <code class="xref py py-meth docutils literal notranslate"><span class="pre">searchsorted()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24350">GH 24350</a>)</p></li>
<li><p>通过选择性基类方法重写支持 `sum`、`mean` 等归约操作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22762">GH 22762</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">ExtensionArray.isna()</span></code> 允许返回一个 <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22325">GH 22325</a>)。</p></li>
</ul>
<p><strong>数据类型更改</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 获得了从字符串数据类型实例化的能力，例如 `decimal` 将实例化一个注册的 <code class="docutils literal notranslate"><span class="pre">DecimalDtype</span></code>；此外，<code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 获得了方法 `construct_array_type` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21185">GH 21185</a>)</p></li>
<li><p>添加了 `ExtensionDtype._is_numeric` 以控制扩展数据类型是否被视为数值型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22290">GH 22290</a>)。</p></li>
<li><p>添加了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.api.types.register_extension_dtype()</span></code> 用于向 pandas 注册扩展类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22664">GH 22664</a>)</p></li>
<li><p>已更新 <code class="docutils literal notranslate"><span class="pre">PeriodDtype</span></code>、<code class="docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code> 和 <code class="docutils literal notranslate"><span class="pre">IntervalDtype</span></code> 的 `.type` 属性，使其成为相应数据类型的实例（分别为 `Period`、`Timestamp` 和 `Interval`）(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22938">GH 22938</a>)</p></li>
</ul>
<p id="whatsnew-0240-enhancements-extension-array-operators"><strong>运算符支持</strong></p>
<p>基于 <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 现在支持算术和比较运算符 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19577">GH 19577</a>)。为 <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 提供运算符支持有两种方法</p>
<ol class="arabic simple">
<li><p>在您的 <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 子类上定义每个运算符。</p></li>
<li><p>使用 pandas 中依赖于 `ExtensionArray` 基础元素（标量）上已定义运算符的运算符实现。</p></li>
</ol>
<p>有关添加运算符支持的两种方法的详细信息，请参阅<a class="reference internal" href="../development/extending.html#extending-extension-operator"><span class="std std-ref">扩展数组运算符支持</span></a>文档部分。</p>
<p><strong>其他更改</strong></p>
<ul class="simple">
<li><p>现在为 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.api.extensions.ExtensionArray</span></code></a> 提供了一个默认的 repr (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23601">GH 23601</a>)。</p></li>
<li><p>`ExtensionArray._formatting_values()` 已弃用。请改用 <code class="xref py py-attr docutils literal notranslate"><span class="pre">ExtensionArray._formatter</span></code>。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23601">GH 23601</a>)</p></li>
<li><p>具有布尔数据类型的 <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 现在可以正确地用作布尔索引器。<a class="reference internal" href="../reference/api/pandas.api.types.is_bool_dtype.html#pandas.api.types.is_bool_dtype" title="pandas.api.types.is_bool_dtype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.api.types.is_bool_dtype()</span></code></a> 现在正确地将它们视为布尔值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22326">GH 22326</a>)</p></li>
</ul>
<p><strong>错误修复</strong></p>
<ul class="simple">
<li><p>在使用 <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 和整数索引的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 中 <a class="reference internal" href="../reference/api/pandas.Series.get.html#pandas.Series.get" title="pandas.Series.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.get()</span></code></a> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21257">GH 21257</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.shift.html#pandas.Series.shift" title="pandas.Series.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shift()</span></code></a> 现在调度到 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray.shift()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22386">GH 22386</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.combine.html#pandas.Series.combine" title="pandas.Series.combine"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.combine()</span></code></a> 在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 内部与 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code></a> 协同工作正常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20825">GH 20825</a>)</p></li>
<li><p>带有标量参数的 <a class="reference internal" href="../reference/api/pandas.Series.combine.html#pandas.Series.combine" title="pandas.Series.combine"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.combine()</span></code></a> 现在适用于任何函数类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21248">GH 21248</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.astype()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 现在调度到 <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray.astype()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21185">GH 21185</a>)。</p></li>
<li><p>现在，对包含多个相同类型 ExtensionArray 的 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 进行单行切片时，会保留其数据类型，而不是强制转换为对象类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22784">GH 22784</a>)</p></li>
<li><p>连接具有不同扩展数据类型的多个 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 时未转换为对象数据类型的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22994">GH 22994</a>)</p></li>
<li><p>由 <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 支持的 Series 现在可与 <a class="reference internal" href="../reference/api/pandas.util.hash_pandas_object.html#pandas.util.hash_pandas_object" title="pandas.util.hash_pandas.object"><code class="xref py py-func docutils literal notranslate"><span class="pre">util.hash_pandas_object()</span></code></a> 配合使用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23066">GH 23066</a>)</p></li>
<li><p>对于每列具有相同扩展数据类型的 DataFrame，<a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a> 不再转换为对象数据类型。输出 Series 将具有与列相同的数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23077">GH 23077</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.unstack.html#pandas.Series.unstack" title="pandas.Series.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.unstack()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.unstack()</span></code></a> 不再将扩展数组转换为对象数据类型的 ndarray。输出 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 中的每个列现在将具有与输入相同的数据类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23077">GH 23077</a>)。</p></li>
<li><p>在对 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataframe.groupby()</span></code> 进行分组并在 <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 上进行聚合时，未能返回实际 <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> 数据类型的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23227">GH 23227</a>)。</p></li>
<li><p>在合并扩展数组支持的列时 <a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.merge()</span></code></a> 中的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23020">GH 23020</a>)。</p></li>
</ul>
</section>
<section id="deprecations">
<span id="whatsnew-0240-deprecations"></span><h2>弃用<a class="headerlink" href="v0.24.0.html#deprecations" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">MultiIndex.labels</span></code> 已弃用，并已由 <a class="reference internal" href="../reference/api/pandas.MultiIndex.codes.html#pandas.MultiIndex.codes" title="pandas.MultiIndex.codes"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MultiIndex.codes</span></code></a> 替代。功能保持不变。新名称更好地反映了这些代码的性质，并使 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> API 更类似于 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 的 API (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13443">GH 13443</a>)。因此，<code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 中 `labels` 名称的其他用法也已弃用并替换为 `codes`</p>
<ul>
<li><p>您应该使用名为 `codes` 而不是 `labels` 的参数来初始化 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 实例。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MultiIndex.set_labels</span></code> 已弃用，取而代之的是 <a class="reference internal" href="../reference/api/pandas.MultiIndex.set_codes.html#pandas.MultiIndex.set_codes" title="pandas.MultiIndex.set_codes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.set_codes()</span></code></a>。</p></li>
<li><p>对于方法 <a class="reference internal" href="../reference/api/pandas.MultiIndex.copy.html#pandas.MultiIndex.copy" title="pandas.MultiIndex.copy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.copy()</span></code></a>，`labels` 参数已弃用，并已由 `codes` 参数替代。</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_stata.html#pandas.DataFrame.to_stata" title="pandas.DataFrame.to_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_stata()</span></code></a>、<code class="xref py py-class docutils literal notranslate"><span class="pre">StataReader</span></code> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">StataWriter</span></code> 已弃用 `encoding` 参数。Stata dta 文件的编码由文件类型决定，无法更改 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21244">GH 21244</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.to_hierarchical()</span></code> 已弃用，并将在未来版本中移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21613">GH 21613</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.ptp()</span></code> 已弃用。请改用 `numpy.ptp` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21614">GH 21614</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.compress()</span></code> 已弃用。请改用 `Series[condition]` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18262">GH 18262</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.to_csv.html#pandas.Series.to_csv" title="pandas.Series.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_csv()</span></code></a> 的签名已统一为 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> 的签名：第一个参数的名称现在是 `path_or_buf`，后续参数的顺序已更改，`header` 参数现在默认为 `True`。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19715">GH 19715</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes" title="pandas.Categorical.from_codes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.from_codes()</span></code></a> 已弃用为 `codes` 参数提供浮点值。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21767">GH 21767</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_table()</span></code></a> 已弃用。请改为使用 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a>，如有必要，请传递 `sep='\t'`。此弃用已在 0.25.0 版本中移除。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21948">GH 21948</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.cat.html#pandas.Series.str.cat" title="pandas.Series.str.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.cat()</span></code></a> 已弃用在列表类内部使用任意列表类。列表类容器仍然可以包含许多 <code class="docutils literal notranslate"><span class="pre">Series</span></code>、<code class="docutils literal notranslate"><span class="pre">Index</span></code> 或一维 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code>，或者只包含标量值。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21950">GH 21950</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">FrozenNDArray.searchsorted()</span></code> 已弃用 `v` 参数，改用 `value` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14645">GH 14645</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">DatetimeIndex.shift()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">PeriodIndex.shift()</span></code> 现在接受 `periods` 参数而不是 `n`，以与 <a class="reference internal" href="../reference/api/pandas.Index.shift.html#pandas.Index.shift" title="pandas.Index.shift"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.shift()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.shift.html#pandas.Series.shift" title="pandas.Series.shift"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.shift()</span></code></a> 保持一致。使用 `n` 会引发弃用警告 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22458">GH 22458</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22912">GH 22912</a>)</p></li>
<li><p>不同 Index 构造函数的 `fastpath` 关键字已弃用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23110">GH 23110</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.tz_localize.html#pandas.Timestamp.tz_localize" title="pandas.Timestamp.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.tz_localize()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.tz_localize.html#pandas.DatetimeIndex.tz_localize" title="pandas.DatetimeIndex.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.tz_localize()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.tz_localize.html#pandas.Series.tz_localize" title="pandas.Series.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.tz_localize()</span></code></a> 已弃用 `errors` 参数，改用 `nonexistent` 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8917">GH 8917</a>)</p></li>
<li><p>`FrozenNDArray` 类已弃用。一旦此类别被移除，`FrozenNDArray` 在反序列化时将被反序列化为 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9031">GH 9031</a>)</p></li>
<li><p>方法 <a class="reference internal" href="../reference/api/pandas.DataFrame.update.html#pandas.DataFrame.update" title="pandas.DataFrame.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.update()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Panel.update()</span></code> 已弃用 `raise_conflict=False|True` 关键字，改用 `errors='ignore'|'raise'` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23585">GH 23585</a>)</p></li>
<li><p>方法 <a class="reference internal" href="../reference/api/pandas.Series.str.partition.html#pandas.Series.str.partition" title="pandas.Series.str.partition"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.partition()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.str.rpartition.html#pandas.Series.str.rpartition" title="pandas.Series.str.rpartition"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.rpartition()</span></code></a> 已弃用 `pat` 关键字，改用 `sep` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22676">GH 22676</a>)</p></li>
<li><p>已弃用 <a class="reference internal" href="../reference/api/pandas.read_feather.html#pandas.read_feather" title="pandas.read_feather"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_feather()</span></code></a> 的 `nthreads` 关键字，改用 `use_threads` 以反映 `pyarrow&gt;=0.11.0` 中的更改。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23053">GH 23053</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_excel()</span></code></a> 已弃用接受整数作为 `usecols`。请改为传入一个从 0 到 `usecols`（包括）的整数列表 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23527">GH 23527</a>)</p></li>
<li><p>从具有 `datetime64` 数据类型的数据构造 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 已弃用，将在未来版本中引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23539">GH 23539</a>)</p></li>
<li><p>从具有 `timedelta64` 数据类型的数据构造 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 已弃用，将在未来版本中引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23675">GH 23675</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.to_series.html#pandas.DatetimeIndex.to_series" title="pandas.DatetimeIndex.to_series"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.to_series()</span></code></a> 的 `keep_tz` 关键字的 `keep_tz=False` 选项（默认值）已弃用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17832">GH 17832</a>)。</p></li>
<li><p>现在，使用 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 和 `tz` 参数将带时区的 `datetime.datetime` 或 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 转换为不同时区已弃用。请改用 <a class="reference internal" href="../reference/api/pandas.Timestamp.tz_convert.html#pandas.Timestamp.tz_convert" title="pandas.Timestamp.tz_convert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.tz_convert()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23579">GH 23579</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.api.types.is_period()</span></code> 已弃用，取而代之的是 `pandas.api.types.is_period_dtype` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23917">GH 23917</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.api.types.is_datetimetz()</span></code> 已弃用，取而代之的是 `pandas.api.types.is_datetime64tz` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23917">GH 23917</a>)</p></li>
<li><p>通过传递范围参数 `start`、`end` 和 `periods` 来创建 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 已弃用，建议改用 <a class="reference internal" href="../reference/api/pandas.timedelta_range.html#pandas.timedelta_range" title="pandas.timedelta_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">timedelta_range()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.period_range.html#pandas.period_range" title="pandas.period_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">period_range()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23919">GH 23919</a>)</p></li>
<li><p>将 `'datetime64[ns, UTC]'` 等字符串别名作为 `unit` 参数传递给 <a class="reference internal" href="../reference/api/pandas.DatetimeTZDtype.html#pandas.DatetimeTZDtype" title="pandas.DatetimeTZDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code></a> 已弃用。请改用 `DatetimeTZDtype.construct_from_string` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23990">GH 23990</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.api.types.infer_dtype.html#pandas.api.types.infer_dtype" title="pandas.api.types.infer_dtype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">infer_dtype()</span></code></a> 的 `skipna` 参数在 pandas 的未来版本中将默认为 `True` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17066">GH 17066</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24050">GH 24050</a>)</p></li>
<li><p>在带有分类数据的 <a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.where()</span></code></a> 中，提供一个不在类别中的 `other` 值已弃用。请先将分类数据转换为不同的数据类型或将 `other` 添加到类别中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24077">GH 24077</a>)。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.clip_lower()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.clip_upper()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.clip_lower()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.clip_upper()</span></code> 已弃用，并将在未来版本中移除。请改用 `Series.clip(lower=threshold)`、`Series.clip(upper=threshold)` 和等效的 `DataFrame` 方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24203">GH 24203</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.nonzero()</span></code> 已弃用，并将在未来版本中移除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18262">GH 18262</a>)</p></li>
<li><p>将整数传递给带有 `timedelta64[ns]` 数据类型的 <a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a> 已弃用，在未来版本中将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>。请改用 `obj.fillna(pd.Timedelta(...))` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24694">GH 24694</a>)</p></li>
<li><p>`Series.cat.categorical`、`Series.cat.name` 和 `Series.cat.index` 已弃用。请直接使用 `Series.cat` 或 `Series` 上的属性。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24751">GH 24751</a>)。</p></li>
<li><p>现在，将没有精度的 dtype（例如 `np.dtype('datetime64')` 或 `timedelta64`）传递给 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 已弃用。请改用纳秒精度的 dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24753">GH 24753</a>)。</p></li>
</ul>
<section id="integer-addition-subtraction-with-datetimes-and-timedeltas-is-deprecated">
<span id="whatsnew-0240-deprecations-datetimelike-int-ops"></span><h3>整数与日期时间/时间差的加减法已弃用<a class="headerlink" href="v0.24.0.html#integer-addition-subtraction-with-datetimes-and-timedeltas-is-deprecated" title="Link to this heading">#</a></h3>
<p>过去，用户在某些情况下可以对 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 进行整数或整数类型数组的加减法运算。</p>
<p>此用法现已弃用。请改为添加或减去对象 `freq` 属性的整数倍 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21939">GH 21939</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23878">GH 23878</a>)。</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'1994-05-06 12:15:16'</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">Hour</span><span class="p">())</span>
<span class="gp">In [6]: </span><span class="n">ts</span> <span class="o">+</span> <span class="mi">2</span>
<span class="gh">Out[6]: </span><span class="go">Timestamp('1994-05-06 14:15:16', freq='H')</span>

<span class="gp">In [7]: </span><span class="n">tdi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">timedelta_range</span><span class="p">(</span><span class="s1">'1D'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">In [8]: </span><span class="n">tdi</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gh">Out[8]: </span><span class="go">TimedeltaIndex(['-1 days', '1 days'], dtype='timedelta64[ns]', freq=None)</span>

<span class="gp">In [9]: </span><span class="n">dti</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'2001-01-01'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'7D'</span><span class="p">)</span>
<span class="gp">In [10]: </span><span class="n">dti</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gh">Out[10]: </span><span class="go">DatetimeIndex(['2001-01-08', '2001-01-22'], dtype='datetime64[ns]', freq=None)</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [108]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'1994-05-06 12:15:16'</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">Hour</span><span class="p">())</span>

<span class="go">In[109]: ts + 2 * ts.freq</span>
<span class="gh">Out[109]: </span><span class="go">Timestamp('1994-05-06 14:15:16', freq='H')</span>

<span class="gp">In [110]: </span><span class="n">tdi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">timedelta_range</span><span class="p">(</span><span class="s1">'1D'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="gp">In [111]: </span><span class="n">tdi</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span> <span class="o">*</span> <span class="n">tdi</span><span class="o">.</span><span class="n">freq</span><span class="p">,</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">tdi</span><span class="o">.</span><span class="n">freq</span><span class="p">])</span>
<span class="gh">Out[111]: </span><span class="go">TimedeltaIndex(['-1 days', '1 days'], dtype='timedelta64[ns]', freq=None)</span>

<span class="gp">In [112]: </span><span class="n">dti</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'2001-01-01'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'7D'</span><span class="p">)</span>

<span class="gp">In [113]: </span><span class="n">dti</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span> <span class="o">*</span> <span class="n">dti</span><span class="o">.</span><span class="n">freq</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">dti</span><span class="o">.</span><span class="n">freq</span><span class="p">])</span>
<span class="gh">Out[113]: </span><span class="go">DatetimeIndex(['2001-01-08', '2001-01-22'], dtype='datetime64[ns]', freq=None)</span>
</pre></div>
</div>
</section>
<section id="passing-integer-data-and-a-timezone-to-datetimeindex">
<span id="whatsnew-0240-deprecations-integer-tz"></span><h3>向 DatetimeIndex 传递整数数据和时区<a class="headerlink" href="v0.24.0.html#passing-integer-data-and-a-timezone-to-datetimeindex" title="Link to this heading">#</a></h3>
<p>在未来版本的 pandas 中，<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 在传入整数数据和时区时的行为将发生变化。以前，这些数据被解释为所需时区中的“墙上时间”（wall times）。未来，它们将被解释为 UTC 中的“墙上时间”，然后转换为所需时区（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24559">GH 24559</a>）。</p>
<p>默认行为保持不变，但会发出警告。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="mi">946684800000000000</span><span class="p">],</span> <span class="n">tz</span><span class="o">=</span><span class="s2">"US/Central"</span><span class="p">)</span>
<span class="go">/bin/ipython:1: FutureWarning:</span>
<span class="go">    Passing integer-dtype data and a timezone to DatetimeIndex. Integer values</span>
<span class="go">    will be interpreted differently in a future version of pandas. Previously,</span>
<span class="go">    these were viewed as datetime64[ns] values representing the wall time</span>
<span class="go">    *in the specified timezone*. In the future, these will be viewed as</span>
<span class="go">    datetime64[ns] values representing the wall time *in UTC*. This is similar</span>
<span class="go">    to a nanosecond-precision UNIX epoch. To accept the future behavior, use</span>

<span class="go">        pd.to_datetime(integer_data, utc=True).tz_convert(tz)</span>

<span class="go">    To keep the previous behavior, use</span>

<span class="go">        pd.to_datetime(integer_data).tz_localize(tz)</span>

<span class="go"> #!/bin/python3</span>
<span class="go"> Out[3]: DatetimeIndex(['2000-01-01 00:00:00-06:00'], dtype='datetime64[ns, US/Central]', freq=None)</span>
</pre></div>
</div>
<p>正如警告信息所解释的，通过指定整数值为 UTC，然后转换为最终时区，可以选择启用未来行为。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [99]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">946684800000000000</span><span class="p">],</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">'US/Central'</span><span class="p">)</span>
<span class="gh">Out[99]: </span><span class="go">DatetimeIndex(['1999-12-31 18:00:00-06:00'], dtype='datetime64[ns, US/Central]', freq=None)</span>
</pre></div>
</div>
<p>旧的行为可以通过直接本地化到最终时区来保留。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [100]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">946684800000000000</span><span class="p">])</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">'US/Central'</span><span class="p">)</span>
<span class="gh">Out[100]: </span><span class="go">DatetimeIndex(['2000-01-01 00:00:00-06:00'], dtype='datetime64[ns, US/Central]', freq=None)</span>
</pre></div>
</div>
</section>
<section id="converting-timezone-aware-series-and-index-to-numpy-arrays">
<span id="whatsnew-0240-deprecations-tz-aware-array"></span><h3>将时区感知 Series 和 Index 转换为 NumPy 数组<a class="headerlink" href="v0.24.0.html#converting-timezone-aware-series-and-index-to-numpy-arrays" title="Link to this heading">#</a></h3>
<p>默认情况下，从包含时区感知日期时间数据的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 转换为 NumPy 数组的行为将发生变化，以保留时区（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23569">GH 23569</a>）。</p>
<p>NumPy 没有专门用于时区感知日期时间的 dtype。过去，将包含时区感知日期时间数据的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 转换为 NumPy 数组会通过以下方式进行：</p>
<ol class="arabic simple">
<li><p>将时区感知数据转换为 UTC</p></li>
<li><p>删除时区信息</p></li>
<li><p>返回一个具有 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype 的 <a class="reference external" href="https://numpy.com.cn/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a></p></li>
</ol>
<p>未来版本的 pandas 将通过返回一个对象 dtype 的 NumPy 数组来保留时区信息，其中每个值都是一个附加了正确时区的 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [101]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">'2000'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s2">"CET"</span><span class="p">))</span>

<span class="gp">In [102]: </span><span class="n">ser</span>
<span class="gh">Out[102]: </span>
<span class="go">0   2000-01-01 00:00:00+01:00</span>
<span class="go">1   2000-01-02 00:00:00+01:00</span>
<span class="go">Length: 2, dtype: datetime64[ns, CET]</span>
</pre></div>
</div>
<p>默认行为保持不变，但会发出警告。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">ser</span><span class="p">)</span>
<span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">ipython</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span> <span class="ne">FutureWarning</span><span class="p">:</span> <span class="n">Converting</span> <span class="n">timezone</span><span class="o">-</span><span class="n">aware</span> <span class="n">DatetimeArray</span> <span class="n">to</span> <span class="n">timezone</span><span class="o">-</span><span class="n">naive</span>
      <span class="n">ndarray</span> <span class="k">with</span> <span class="s1">'datetime64[ns]'</span> <span class="n">dtype</span><span class="o">.</span> <span class="n">In</span> <span class="n">the</span> <span class="n">future</span><span class="p">,</span> <span class="n">this</span> <span class="n">will</span> <span class="k">return</span> <span class="n">an</span> <span class="n">ndarray</span>
      <span class="k">with</span> <span class="s1">'object'</span> <span class="n">dtype</span> <span class="n">where</span> <span class="n">each</span> <span class="n">element</span> <span class="ow">is</span> <span class="n">a</span> <span class="s1">'pandas.Timestamp'</span> <span class="k">with</span> <span class="n">the</span> <span class="n">correct</span> <span class="s1">'tz'</span><span class="o">.</span>

        <span class="n">To</span> <span class="n">accept</span> <span class="n">the</span> <span class="n">future</span> <span class="n">behavior</span><span class="p">,</span> <span class="k">pass</span> <span class="s1">'dtype=object'</span><span class="o">.</span>
        <span class="n">To</span> <span class="n">keep</span> <span class="n">the</span> <span class="n">old</span> <span class="n">behavior</span><span class="p">,</span> <span class="k">pass</span> <span class="s1">'dtype="datetime64[ns]"'</span><span class="o">.</span>
  <span class="c1">#!/bin/python3</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">8</span><span class="p">]:</span>
<span class="n">array</span><span class="p">([</span><span class="s1">'1999-12-31T23:00:00.000000000'</span><span class="p">,</span> <span class="s1">'2000-01-01T23:00:00.000000000'</span><span class="p">],</span>
      <span class="n">dtype</span><span class="o">=</span><span class="s1">'datetime64[ns]'</span><span class="p">)</span>
</pre></div>
</div>
<p>通过指定 <code class="docutils literal notranslate"><span class="pre">dtype</span></code>，可以在不发出任何警告的情况下获得以前或将来的行为。</p>
<p><em>旧行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [103]: </span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">ser</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'datetime64[ns]'</span><span class="p">)</span>
<span class="gh">Out[103]: </span>
<span class="go">array(['1999-12-31T23:00:00.000000000', '2000-01-01T23:00:00.000000000'],</span>
<span class="go">      dtype='datetime64[ns]')</span>
</pre></div>
</div>
<p><em>未来行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># New behavior</span>
<span class="gp">In [104]: </span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">ser</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>
<span class="gh">Out[104]: </span>
<span class="go">array([Timestamp('2000-01-01 00:00:00+0100', tz='CET'),</span>
<span class="go">       Timestamp('2000-01-02 00:00:00+0100', tz='CET')], dtype=object)</span>
</pre></div>
</div>
<p>或者通过使用 <a class="reference internal" href="../reference/api/pandas.Series.to_numpy.html#pandas.Series.to_numpy" title="pandas.Series.to_numpy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_numpy()</span></code></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [105]: </span><span class="n">ser</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="gh">Out[105]: </span>
<span class="go">array([Timestamp('2000-01-01 00:00:00+0100', tz='CET'),</span>
<span class="go">       Timestamp('2000-01-02 00:00:00+0100', tz='CET')], dtype=object)</span>

<span class="gp">In [106]: </span><span class="n">ser</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="s2">"datetime64[ns]"</span><span class="p">)</span>
<span class="gh">Out[106]: </span>
<span class="go">array(['1999-12-31T23:00:00.000000000', '2000-01-01T23:00:00.000000000'],</span>
<span class="go">      dtype='datetime64[ns]')</span>
</pre></div>
</div>
<p>以上所有内容也适用于包含时区感知值的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a>。</p>
</section>
</section>
<section id="removal-of-prior-version-deprecations-changes">
<span id="whatsnew-0240-prior-deprecations"></span><h2>移除先前版本的弃用/更改<a class="headerlink" href="v0.24.0.html#removal-of-prior-version-deprecations-changes" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LongPanel</span></code> 和 <code class="docutils literal notranslate"><span class="pre">WidePanel</span></code> 类已被移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10892">GH 10892</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.repeat.html#pandas.Series.repeat" title="pandas.Series.repeat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.repeat()</span></code></a> 已将 <code class="docutils literal natranslate"><span class="pre">reps</span></code> 参数重命名为 <code class="docutils literal notranslate"><span class="pre">repeats</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14645">GH 14645</a>）。</p></li>
<li><p>一些私有函数已从（非公共）模块 <code class="docutils literal notranslate"><span class="pre">pandas.core.common</span></code> 中移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22001">GH 22001</a>）。</p></li>
<li><p>先前已弃用的模块 <code class="docutils literal ntranslatetspan class="pre">pandas.core.datetools</span></code> 已移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14105">GH 14105</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14094">GH 14094</a>）。</p></li>
<li><p>传入 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 且同时引用列和索引级别的字符串将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14432">GH 14432</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.repeat.html#pandas.Index.repeat" title="pandas.Index.repeat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.repeat()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.repeat()</span></code> 已将 <code class="docutils literal notranslate"><span class="pre">n</span></code> 参数重命名为 <code class="docutils literal notranslate"><span class="pre">repeats</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14645">GH 14645</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> 构造函数和 <code class="docutils literal notranslate"><span class="pre">.astype</span></code> 方法现在将在 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数传入没有单位的时间戳 dtype（例如 <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code>）时引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15987">GH 15987</a>）。</p></li>
<li><p>已从 <code class="docutils literal notranslate"><span class="pre">str.match()</span></code> 中完全移除先前已弃用的 <code class="docutils literal notranslate"><span class="pre">as_indexer</span></code> 关键字（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22356">GH 22356</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/6581">GH 6581</a>）。</p></li>
<li><p>模块 <code class="docutils literal notranslate"><span class="pre">pandas.types</span></code>、<code class="docutils literal notranslate"><span class="pre">pandas.computation</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pandas.util.decorators</span></code> 已被移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16157">GH 16157</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16250">GH 16250</a>）。</p></li>
<li><p>移除了 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.formats.style.Styler</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">pandas.formats.style</span></code> shim（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16059">GH 16059</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.pnow</span></code>、<code class="docutils literal notranslate"><span class="pre">pandas.match</span></code>、<code class="docutils literal notranslate"><span class="pre">pandas.groupby</span></code>、<code class="docutils literal notranslate"><span class="pre">pd.get_store</span></code>、<code class="docutils literal notranslate"><span class="pre">pd.Expr</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pd.Term</span></code> 已被移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15538">GH 15538</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15940">GH 15940</a>）。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.searchsorted()</span></code> 和 <a class="reference internal" href="../reference/api/pandas.Series.searchsorted.html#pandas.Series.searchsorted" title="pandas.Series.searchsorted"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.searchsorted()</span></code></a> 已将 <code class="docutils literal notranslate"><span class="pre">v</span></code> 参数重命名为 <code class="docutils literal notranslate"><span class="pre">value</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14645">GH 14645</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.parser</span></code>、<code class="docutils literal notranslate"><span class="pre">pandas.lib</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pandas.tslib</span></code> 已被移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15537">GH 15537</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.searchsorted.html#pandas.Index.searchsorted" title="pandas.Index.searchsorted"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.searchsorted()</span></code></a> 已将 <code class="docutils literal notranslate"><span class="pre">key</span></code> 参数重命名为 <code class="docutils literal notranslate"><span class="pre">value</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14645">GH 14645</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.consolidate</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Series.consolidate</span></code> 已被移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15501">GH 15501</a>）。</p></li>
<li><p>先前已弃用的模块 <code class="docutils literal notranslate"><span class="pre">pandas.json</span></code> 已移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19944">GH 19944</a>）。</p></li>
<li><p>模块 <code class="docutils literal notranslate"><span class="pre">pandas.tools</span></code> 已被移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15358">GH 15358</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16005">GH 16005</a>）。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArray.get_values()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArray.to_dense()</span></code> 已删除 <code class="docutils literal notranslate"><span class="pre">fill</span></code> 参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14686">GH 14686</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.sortlevel</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Series.sortlevel</span></code> 已被移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15099">GH 15099</a>）。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseSeries.to_dense()</span></code> 已删除 <code class="docutils literal notranslate"><span class="pre">sparse_only</span></code> 参数（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14686">GH 14686</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.astype()</span></code></a> 已将 <code class="docutils literal notranslate"><span class="pre">raise_on_error</span></code> 参数重命名为 <code class="docutils literal notranslate"><span class="pre">errors</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14967">GH 14967</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_sequence</span></code>、<code class="docutils literal notranslate"><span class="pre">is_any_int_dtype</span></code> 和 <code class="docutils literal notranslate"><span class="pre">is_floating_dtype</span></code> 已从 <code class="docutils literal notranslate"><span class="pre">pandas.api.types</span></code> 中移除（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16163">GH 16163</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16189">GH 16189</a>）。</p></li>
</ul>
</section>
<section id="performance-improvements">
<span id="whatsnew-0240-performance"></span><h2>性能改进<a class="headerlink" href="v0.24.0.html#performance-improvements" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>使用单调递增的 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 对 Series 和 DataFrames 进行切片现在非常快，速度可与使用 <code class="docutils literal notranslate"><span class="pre">Int64Index</span></code> 进行切片相媲美。无论按标签（使用 .loc）还是按位置（.iloc）索引，速度都有所提升（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20395">GH 20395</a>）。对单调递增的 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 本身进行切片（即 <code class="docutils literal notranslate"><span class="pre">ci[1000:2000]</span></code>）也显示出类似的速度提升（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21659">GH 21659</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.equals.html#pandas.CategoricalIndex.equals" title="pandas.CategoricalIndex.equals"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex.equals()</span></code></a> 在与另一个 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 比较时的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24023">GH 24023</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.Series.describe.html#pandas.Series.describe" title="pandas.Series.describe"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.describe()</span></code></a> 在数值 dtpyes 情况下的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21274">GH 21274</a>）。</p></li>
<li><p>改进了 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.rank()</span></code> 在处理并列排名时的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21237">GH 21237</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.DataFrame.set_index.html#pandas.DataFrame.set_index" title="pandas.DataFrame.set_index"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.set_index()</span></code></a> 在列包含 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 对象时的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21582">GH 21582</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21606">GH 21606</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.Series.at.html#pandas.Series.at" title="pandas.Series.at"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.at()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.get_value()</span></code> 对于扩展数组值（例如 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a>）的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24204">GH 24204</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 中成员资格检查的性能（即 <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">cat</span></code> 风格的检查速度快得多）。<code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex.contains()</span></code> 也因此快得多（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21369">GH 21369</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21508">GH 21508</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.HDFStore.groups.html#pandas.HDFStore.groups" title="pandas.HDFStore.groups"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HDFStore.groups()</span></code></a> （以及 <a class="reference internal" href="../reference/api/pandas.HDFStore.keys.html#pandas.HDFStore.keys" title="pandas.HDFStore.keys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HDFStore.keys()</span></code></a> 等相关函数）的性能。（即 <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">store</span></code> 检查速度快得多）（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21372">GH 21372</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.get_dummies()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">sparse=True</span></code> 时的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21997">GH 21997</a>）。</p></li>
<li><p>改进了 <code class="xref py py-func docutils literal notranslate"><span class="pre">IndexEngine.get_indexer_non_unique()</span></code> 对于已排序、非唯一索引的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9466">GH 9466</a>）。</p></li>
<li><p>改进了 <code class="xref py py-func docutils literal notranslate"><span class="pre">PeriodIndex.unique()</span></code> 的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23083">GH 23083</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 对于 <code class="docutils literal ntranslatetspan class="pre">Series</span></code> 对象的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23404">GH 23404</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.normalize.html#pandas.DatetimeIndex.normalize" title="pandas.DatetimeIndex.normalize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.normalize()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Timestamp.normalize.html#pandas.Timestamp.normalize" title="pandas.Timestamp.normalize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.normalize()</span></code></a> 对于时区无关或 UTC 日期时间的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23634">GH 23634</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.tz_localize.html#pandas.DatetimeIndex.tz_localize" title="pandas.DatetimeIndex.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.tz_localize()</span></code></a> 以及 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> 多个属性在 dateutil UTC 时区时的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23772">GH 23772</a>）。</p></li>
<li><p>修复了 Windows Python 3.7 上 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 的性能回归问题（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23516">GH 23516</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 构造函数对于 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 对象的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23814">GH 23814</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">where()</span></code></a> 对于分类数据的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24077">GH 24077</a>）。</p></li>
<li><p>改进了遍历 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的性能。<a class="reference internal" href="../reference/api/pandas.DataFrame.itertuples.html#pandas.DataFrame.itertuples" title="pandas.DataFrame.itertuples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.itertuples()</span></code></a> 现在创建迭代器时不再在内部分配所有元素的列表（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20783">GH 20783</a>）。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 构造函数的性能，同时也有利于 <code class="docutils literal notranslate"><span class="pre">PeriodArray</span></code> 和 <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 的创建（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24084">GH 24084</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24118">GH 24118</a>）。</p></li>
<li><p>改进了时区感知 <code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeArray</span></code> 二元操作的性能（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24491">GH 24491</a>）。</p></li>
</ul>
</section>
<section id="bug-fixes">
<span id="whatsnew-0240-bug-fixes"></span><h2>Bug 修复<a class="headerlink" href="v0.24.0.html#bug-fixes" title="Link to this heading">#</a></h2>
<section id="categorical">
<h3>分类数据（Categorical）<a class="headerlink" href="v0.24.0.html#categorical" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes" title="pandas.Categorical.from_codes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.from_codes()</span></code></a> 中的一个 bug，其中 <code class="docutils literal notranslate"><span class="pre">codes</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值被静默转换为 <code class="docutils literal notranslate"><span class="pre">0</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21767">GH 21767</a>）。将来这将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>。同时也改变了 <code class="docutils literal notranslate"><span class="pre">.from_codes([1.1,</span> <span class="pre">2.0])</span></code> 的行为。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.sort_values()</span></code> 中的一个 bug，其中 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值总是位于前面，无论 <code class="docutils literal notranslate"><span class="pre">na_position</span></code> 值如何（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22556">GH 22556</a>）。</p></li>
<li><p>使用布尔值 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 进行索引时的一个 bug。现在，布尔值 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 被视为布尔掩码（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22665">GH 22665</a>）。</p></li>
<li><p>在 dtype 强制转换更改后，使用空值和布尔类别构造 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22702">GH 22702</a>）。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.take()</span></code> 中的一个 bug，其中用户提供的 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> 未编码 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code>，这可能导致 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>、不正确的结果或分段错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23296">GH 23296</a>）。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.unstack.html#pandas.Series.unstack" title="pandas.Series.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.unstack()</span></code></a> 中，指定类别中不存在的 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> 现在会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>，而不是忽略 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23284">GH 23284</a>）。</p></li>
<li><p>在重采样 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 并对分类数据进行聚合时，分类 dtype 会丢失的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23227">GH 23227</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.str</span></code> 访问器的许多方法中的一个 bug，它们在调用 <code class="docutils literal notranslate"><span class="pre">CategoricalIndex.str</span></code> 构造函数时总是失败（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23555">GH 23555</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23556">GH 23556</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.where()</span></code></a> 在分类数据上丢失分类 dtype 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24077">GH 24077</a>）。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.apply()</span></code> 中的一个 bug，其中 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值可能会被不可预测地处理。它们现在保持不变（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24241">GH 24241</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 比较方法中的一个 bug，在与 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 操作时错误地引发 <code class="docutils literal ntranslatetspan class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24630">GH 24630</a>）。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.set_categories()</span></code> 中的一个 bug，其中当 <code class="docutils literal notranslate"><span class="pre">rename=True</span></code> 时设置更少的新类别会导致分段错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24675">GH 24675</a>）。</p></li>
</ul>
</section>
<section id="datetimelike">
<h3>日期时间类（Datetimelike）<a class="headerlink" href="v0.24.0.html#datetimelike" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>修复了两个具有不同 <code class="docutils literal notranslate"><span class="pre">normalize</span></code> 属性的 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 对象可能评估为相等的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21404">GH 21404</a>）。</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.Timestamp.resolution.html#pandas.Timestamp.resolution" title="pandas.Timestamp.resolution"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.resolution()</span></code></a> 错误地返回 1 微秒 <code class="docutils literal notranslate"><span class="pre">timedelta</span></code> 而不是 1 纳秒 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21336">GH 21336</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21365">GH 21365</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的一个 bug，在指定 <code class="docutils literal notranslate"><span class="pre">box=True</span></code> 时未能始终返回 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21864">GH 21864</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 比较中的一个 bug，其中字符串比较错误地引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22074">GH 22074</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 与 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype 数组比较时的一个 bug；在某些情况下错误地引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>，在另一些情况下则错误地未能引发（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22074">GH 22074</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 与对象 dtype 数组比较时的一个 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22074">GH 22074</a>）。</p></li>
<li><p>具有 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 与 <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> 类似对象进行加减运算时的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22005">GH 22005</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH 22163</a>）。</p></li>
<li><p>具有 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 与 <code class="docutils literal notranslate"><span class="pre">DateOffset</span></code> 对象进行加减运算时返回 <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype 而不是 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21610">GH 21610</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH 22163</a>）。</p></li>
<li><p>具有 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 错误地与 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 进行比较的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22242">GH 22242</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH 22163</a>）。</p></li>
<li><p>具有 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 减去 <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> 类似对象时错误地返回 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype 而不是 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8554">GH 8554</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH 22163</a>）。</p></li>
<li><p>具有 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 减去非纳秒单位的 <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code> 对象时未能转换为纳秒的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18874">GH 18874</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH 22163</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 与 <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> 类似对象进行比较时，对于类型不匹配的不等式检查未能引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8932">GH 8932</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH 22163</a>）。</p></li>
<li><p>包含 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> 的混合 dtype 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 在进行相等比较时错误地引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13128">GH 13128</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH 22163</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.values.html#pandas.DataFrame.values" title="pandas.DataFrame.values"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFrame.values</span></code></a> 对于包含时区感知日期时间值的单列 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 错误地返回 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 的 bug。现在返回一个由 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 对象组成的 2-D <a class="reference external" href="https://numpy.com.cn/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24024">GH 24024</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.eq.html#pandas.DataFrame.eq" title="pandas.DataFrame.eq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.eq()</span></code></a> 与 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 比较时错误地返回 <code class="docutils literal notranslate"><span class="pre">True</span></code> 或 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15697">GH 15697</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH 22163</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 减法中错误地未能引发 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22492">GH 22492</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22508">GH 22508</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 错误地允许使用 <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> 对象进行索引的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20464">GH 20464</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 中，如果原始频率为 <code class="docutils literal ntranslatetspan class="pre">None</span></code>，则频率被设置的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22150">GH 22150</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 的舍入方法（<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.round.html#pandas.DatetimeIndex.round" title="pandas.DatetimeIndex.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">round()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.ceil.html#pandas.DatetimeIndex.ceil" title="pandas.DatetimeIndex.ceil"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ceil()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DatetimeIndex.floor.html#pandas.DatetimeIndex.floor" title="pandas.DatetimeIndex.floor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">floor()</span></code></a>）和 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 的舍入方法（<a class="reference internal" href="../reference/api/pandas.Timestamp.round.html#pandas.Timestamp.round" title="pandas.Timestamp.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">round()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Timestamp.ceil.html#pandas.Timestamp.ceil" title="pandas.Timestamp.ceil"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ceil()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Timestamp.floor.html#pandas.Timestamp.floor" title="pandas.Timestamp.floor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">floor()</span></code></a>）可能导致精度损失的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22591">GH 22591</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 传入 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 参数时，结果会丢失 <code class="docutils literal notranslate"><span class="pre">name</span></code> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21697">GH 21697</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 中，添加或减去 <code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code> 或 <code class="xref py py-class docutils literal notranslate"><span class="pre">Tick</span></code> 对象会产生不正确结果的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22988">GH 22988</a>）。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的 repr 中，period-dtype 数据之前缺少空格的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23601">GH 23601</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> 中，当起始日期通过负频率递减到过去的结束日期时，会产生 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23270">GH 23270</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.min.html#pandas.Series.min" title="pandas.Series.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.min()</span></code></a> 在对包含 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 的序列调用时返回 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23282">GH 23282</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.combine_first.html#pandas.Series.combine_first" title="pandas.Series.combine_first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.combine_first()</span></code></a> 未正确对齐分类数据，导致 <code class="docutils literal notranslate"><span class="pre">self</span></code> 中的缺失值未被 <code class="docutils literal notranslate"><span class="pre">other</span></code> 中的有效值填充的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24147">GH 24147</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.combine.html#pandas.DataFrame.combine" title="pandas.DataFrame.combine"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.combine()</span></code></a> 在处理日期时间类值时引发 TypeError 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23079">GH 23079</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> 中，当频率为 <code class="docutils literal notranslate"><span class="pre">Day</span></code> 或更高，且日期足够远未来时，可能回绕到过去而不是引发 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14187">GH 14187</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.period_range.html#pandas.period_range" title="pandas.period_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">period_range()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">start</span></code> 和 <code class="docutils literal notranslate"><span class="pre">end</span></code> 作为 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 对象提供时，会忽略其频率的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20535">GH 20535</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 中，当属性 <code class="docutils literal notranslate"><span class="pre">freq.n</span></code> 大于 1 时，添加 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 对象会返回不正确结果的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23215">GH 23215</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中的一个 bug，当设置日期时间类值时，会将字符串索引解释为字符列表（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23451">GH 23451</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中的一个 bug，从具有时区的 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 对象数组创建新列时，创建的是 object-dtype 列，而不是带时区的 datetime 列（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23932">GH 23932</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 构造函数中的一个 bug，它会删除输入 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 的频率（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22311">GH 22311</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 中的一个 bug，其中调用 <code class="docutils literal notranslate"><span class="pre">np.array(dtindex,</span> <span class="pre">dtype=object)</span></code> 会错误地返回一个 <code class="docutils literal notranslate"><span class="pre">long</span></code> 对象数组（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23524">GH 23524</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 中的一个 bug，其中传入时区感知 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <code class="docutils literal notranslate"><span class="pre">dtype=object</span></code> 会错误地引发 <code class="docutils literal ntranslatetspan class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23524">GH 23524</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 中的一个 bug，其中在时区无关 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 上调用 <code class="docutils literal notranslate"><span class="pre">np.array(dtindex,</span> <span class="pre">dtype=object)</span></code> 会返回一个 <code class="docutils literal notranslate"><span class="pre">datetime</span></code> 对象数组，而不是 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 对象数组，可能导致时间戳的纳秒部分丢失（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23524">GH 23524</a>）。</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical.__setitem__</span></code> 不允许在两个无序但具有相同类别（但顺序不同）的 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 之间进行设置的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24142">GH 24142</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> 中的一个 bug，其中使用毫秒或更高分辨率的日期可能会返回不正确的值或索引中错误数量的值（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24110">GH 24110</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 中的一个 bug，其中从 <a class="reference internal" href="../reference/api/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 构造 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 会错误地丢失时区信息（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18664">GH 18664</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 中的一个 bug，其中使用 <code class="docutils literal notranslate"><span class="pre">Ellipsis</span></code> 进行索引会错误地丢失索引的 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 属性（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21282">GH 21282</a>）。</p></li>
<li><p>澄清了当向 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 传入的数据首个条目为 <code class="docutils literal ntranslatetspan class="pre">NaT</span></code> 时，且 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 参数不正确时产生的错误消息（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11587">GH 11587</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的一个 bug，当传入 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 或单位映射的 <code class="docutils literal notranslate"><span class="pre">dict</span></code> 时，<code class="docutils literal notranslate"><span class="pre">box</span></code> 和 <code class="docutils literal notranslate"><span class="pre">utc</span></code> 参数会被忽略（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23760">GH 23760</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.dt.html#pandas.Series.dt" title="pandas.Series.dt"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt</span></code></a> 中的一个 bug，其中缓存在就地操作后不会正确更新（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24408">GH 24408</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 中的一个 bug，其中与长度为 1 的类数组对象进行比较时未能引发 <code class="docutils literal ntranslatetspan class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23078">GH 23078</a>）。</p></li>
<li><p>修复了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.astype()</span></code>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.astype()</span></code> 和 <code class="xref py py-meth docutils literal ntranslatetspan class="pre">TimedeltaIndex.astype()</span></code> 忽略无符号整数 dtype 符号的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24405">GH 24405</a>）。</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.Series.max.html#pandas.Series.max" title="pandas.Series.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.max()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code>-dtype 情况下，当存在空值且传入 <code class="docutils literal notranslate"><span class="pre">skipna=False</span></code> 时未能返回 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24265">GH 24265</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的一个 bug，其中包含时区感知和时区无关 <code class="docutils literal ntranslatetspan class="pre">datetime</span></code> 对象的数组未能引发 <code class="docutils literal ntranslatetspan class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24569">GH 24569</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的一个 bug，其中无效的日期时间格式即使 <code class="docutils literal notranslate"><span class="pre">errors='coerce'</span></code> 也不会将输入强制转换为 <code class="docutils literal ntranslatetspan class="pre">NaT</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24763">GH 24763</a>）。</p></li>
</ul>
</section>
<section id="timedelta">
<h3>时间差（Timedelta）<a class="headerlink" href="v0.24.0.html#timedelta" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>具有 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 除以 <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> 类似标量时，错误地返回 <code class="docutils literal ntranslatetspan class="pre">timedelta64[ns]</span></code> dtype 而不是 <code class="docutils literal notranslate"><span class="pre">float64</span></code> dtype 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20088">GH 20088</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH 22163</a>）。</p></li>
<li><p>将具有 object dtype 的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 添加到具有 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时错误地引发异常的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22390">GH 22390</a>）。</p></li>
<li><p>将具有数值 dtype 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 乘以 <code class="docutils literal notranslate"><span class="pre">timedelta</span></code> 对象时的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22390">GH 22390</a>）。</p></li>
<li><p>具有数值 dtype 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 在添加或减去具有 <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> dtype 的数组或 <code class="docutils literal ntranslatetspan class="pre">Series</span></code> 时的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22390">GH 22390</a>）。</p></li>
<li><p>具有数值 dtype 的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 在乘以或除以 dtype 为 <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> 的数组时的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22390">GH 22390</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 错误地允许使用 <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> 对象进行索引的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20464">GH 20464</a>）。</p></li>
<li><p>修复了从对象 dtype 数组中减去 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 时引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21980">GH 21980</a>）。</p></li>
<li><p>修复了将一个全 <cite>timedelta64[ns]</cite> dtypes 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 添加到一个全整数 dtypes 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时，返回不正确结果而不是引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22696">GH 22696</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 中的一个 bug，其中添加时区感知日期时间标量会错误地返回时区无关的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23215">GH 23215</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 中的一个 bug，其中添加 <code class="docutils literal notranslate"><span class="pre">np.timedelta64('NaT')</span></code> 会错误地返回一个全 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a>，而不是一个全 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 的 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23215">GH 23215</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_timedelta()</span></code></a> 在支持的单位字符串中存在不一致性的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21762">GH 21762</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 除法中的一个 bug，其中除以另一个 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 会引发 <code class="docutils literal ntranslatetspan class="pre">TypeError</span></code> 而不是返回 <code class="xref py py-class docutils literal notranslate"><span class="pre">Float64Index</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23829">GH 23829</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22631">GH 22631</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 比较操作中的一个 bug，其中与非 <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> 类似对象进行比较会引发 <code class="docutils literal ntranslatetspan class="pre">TypeError</span></code>，而不是对于 <code class="docutils literal notranslate"><span class="pre">__eq__</span></code> 返回全 <code class="docutils literal notranslate"><span class="pre">False</span></code>，对于 <code class="docutils literal notranslate"><span class="pre">__ne__</span></code> 返回全 <code class="docutils literal notranslate"><span class="pre">True</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24056">GH 24056</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 与 <code class="docutils literal notranslate"><span class="pre">Tick</span></code> 对象比较时错误地引发 <code class="docutils literal ntranslatetspan class="pre">TypeError</span></code> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24710">GH 24710</a>）。</p></li>
</ul>
</section>
<section id="timezones">
<h3>时区（Timezones）<a class="headerlink" href="v0.24.0.html#timezones" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Index.shift.html#pandas.Index.shift" title="pandas.Index.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.shift()</span></code></a> 中的一个 bug，其中在夏令时转换时会引发 <code class="docutils literal ntranslatetspan class="pre">AssertionError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8616">GH 8616</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 构造函数中的一个 bug，其中传入无效时区偏移指定符（<code class="docutils literal notranslate"><span class="pre">Z</span></code>）不会引发 <code class="docutils literal ntranslatetspan class="pre">ValueError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8910">GH 8910</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.replace.html#pandas.Timestamp.replace" title="pandas.Timestamp.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.replace()</span></code></a> 中的一个 bug，其中在夏令时边界替换会保留不正确的偏移量（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7825">GH 7825</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.replace.html#pandas.Series.replace" title="pandas.Series.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.replace()</span></code></a> 在 <code class="docutils literal ntranslatetspan class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> 数据中替换 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 时的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11792">GH 11792</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 中的一个 bug，其中传入带有不同时区偏移的不同字符串日期格式会产生不同的时区偏移（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12064">GH 12064</a>）。</p></li>
<li><p>比较时区无关的 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 与时区感知的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 时，后者会被强制转换为时区无关的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12601">GH 12601</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.truncate.html#pandas.Series.truncate" title="pandas.Series.truncate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.truncate()</span></code></a> 在使用时区感知 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 时，可能导致核心转储的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9243">GH 9243</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 构造函数中的一个 bug，它会将时区感知和时区无关的 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 强制转换为时区感知（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13051">GH 13051</a>）。</p></li>
<li><p>具有 <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> dtype 的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 未正确本地化整数数据的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20964">GH 20964</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 中，使用整数和时区构造时未正确本地化的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12619">GH 12619</a>）。</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.DataFrame.describe.html#pandas.DataFrame.describe" title="pandas.DataFrame.describe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.describe()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.describe.html#pandas.Series.describe" title="pandas.Series.describe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.describe()</span></code></a> 在时区感知日期时间上未显示 <code class="docutils literal notranslate"><span class="pre">first</span></code> 和 <code class="docutils literal notranslate"><span class="pre">last</span></code> 结果的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21328">GH 21328</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 比较中，当比较时区感知 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> 与 <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code> 时，未能引发 <code class="docutils literal ntranslatetspan class="pre">TypeError</span></code> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22074">GH 22074</a>）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 使用时区感知标量进行赋值时的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19843">GH 19843</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.asof.html#pandas.DataFrame.asof" title="pandas.DataFrame.asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.asof()</span></code></a> 中的一个 bug，当尝试比较时区无关和时区感知时间戳时引发 <code class="docutils literal ntranslatetspan class="pre">TypeError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21194">GH 21194</a>）。</p></li>
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">replace</span></code> 方法在夏令时转换时构造 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a>，其中 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 构造时出现 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18785">GH 18785</a>）。</p></li>
<li><p>使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 设置新值时，当 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 存在夏令时转换时出现的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18308">GH 18308</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20724">GH 20724</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.unique.html#pandas.Index.unique" title="pandas.Index.unique"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.unique()</span></code></a> 未正确重新本地化时区感知日期的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21737">GH 21737</a>）。</p></li>
<li><p>在夏令时转换时索引 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21846">GH 21846</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> 中的一个 bug，如果时区感知时间序列在夏令时转换处结束，会引发 <code class="docutils literal notranslate"><span class="pre">AmbiguousTimeError</span></code> 或 <code class="docutils literal ntranslatetspan class="pre">NonExistentTimeError</span></code>（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19375">GH 19375</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10117">GH 10117</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.drop.html#pandas.DataFrame.drop" title="pandas.DataFrame.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.drop()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.drop.html#pandas.Series.drop" title="pandas.Series.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.drop()</span></code></a> 中的一个 bug，当指定时区感知 Timestamp 键从具有夏令时转换的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 中删除时（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21761">GH 21761</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 构造函数中的一个 bug，其中 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 和 <code class="docutils literal notranslate"><span class="pre">dateutil.tz.tzlocal</span></code> 会引发 <code class="docutils literal ntranslatetspan class="pre">OutOfBoundsDatetime</span></code> 错误（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23807">GH 23807</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.tz_localize.html#pandas.DatetimeIndex.tz_localize" title="pandas.DatetimeIndex.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.tz_localize()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Timestamp.tz_localize.html#pandas.Timestamp.tz_localize" title="pandas.Timestamp.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.tz_localize()</span></code></a> 在夏令时转换附近使用 <code class="docutils literal notranslate"><span class="pre">dateutil.tz.tzlocal</span></code> 时，会返回不正确本地化的日期时间的 bug（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23807">GH 23807</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 构造函数中的一个 bug，其中传入带有 <code class="docutils literal ntranslatetspan class="pre">datetime.datetime</span></code> 参数的 <code class="docutils literal notranslate"><span class="pre">dateutil.tz.tzutc</span></code> 时区会被转换为 <code class="docutils literal notranslate"><span class="pre">pytz.UTC</span></code> 时区（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23807">GH 23807</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的一个 bug，当指定 <code class="docutils literal notranslate"><span class="pre">unit</span></code> 和 <code class="docutils literal notranslate"><span class="pre">errors='ignore'</span></code> 时，<code class="docutils literal notranslate"><span class="pre">utc=True</span></code> 未被尊重（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23758">GH 23758</a>）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中的一个 bug，当传入 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 时，<code class="docutils literal notranslate"><span class="pre">utc=True</span></code> 未被尊重（<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24415">GH 24415</a>）。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.any.html#pandas.DataFrame.any" title="pandas.DataFrame.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.any()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 且数据为日期时间类型时，会返回错误值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23070">GH 23070</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.to_period.html#pandas.DatetimeIndex.to_period" title="pandas.DatetimeIndex.to_period"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.to_period()</span></code></a> 中存在错误，其中时区感知的索引在创建 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 之前首先被转换为 UTC 时间 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22905">GH 22905</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.tz_localize.html#pandas.DataFrame.tz_localize" title="pandas.DataFrame.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.tz_localize()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.tz_convert.html#pandas.DataFrame.tz_convert" title="pandas.DataFrame.tz_convert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.tz_convert()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.tz_localize.html#pandas.Series.tz_localize" title="pandas.Series.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.tz_localize()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.tz_convert.html#pandas.Series.tz_convert" title="pandas.Series.tz_convert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.tz_convert()</span></code></a> 中存在错误，其中 <code class="docutils literal notranslate"><span class="pre">copy=False</span></code> 会就地修改原始参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/6326">GH 6326</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.max.html#pandas.DataFrame.max" title="pandas.DataFrame.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.max()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.min.html#pandas.DataFrame.min" title="pandas.DataFrame.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.min()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 且所有列包含相同 timezone 时，会返回带有 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10390">GH 10390</a>)</p></li>
</ul>
</section>
<section id="offsets">
<h3>偏移量<a class="headerlink" href="v0.24.0.html#offsets" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">FY5253</span></code> 中存在错误，其中日期偏移量在算术运算中可能错误地引发 <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14774">GH 14774</a>)</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 中存在错误，其中关键字参数 <code class="docutils literal notranslate"><span class="pre">week</span></code> 和 <code class="docutils literal notranslate"><span class="pre">milliseconds</span></code> 被接受但被忽略。现在传递这些参数将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19398">GH 19398</a>)</p></li>
<li><p>在向 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 添加 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 时存在错误，错误地引发了 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23215">GH 23215</a>)</p></li>
<li><p>在将 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 对象与非 DateOffset 对象（尤其是字符串）进行比较时存在错误，会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>，而不是在相等性检查时返回 <code class="docutils literal notranslate"><span class="pre">False</span></code> 并在不等性检查时返回 <code class="docutils literal notranslate"><span class="pre">True</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23524">GH 23524</a>)</p></li>
</ul>
</section>
<section id="numeric">
<h3>数值<a class="headerlink" href="v0.24.0.html#numeric" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">__rmatmul__</span></code> 中存在错误，不支持矩阵向量乘法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21530">GH 21530</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a> 中存在错误，在只读数组下会失败 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12813">GH 12813</a>)</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.unique.html#pandas.unique" title="pandas.unique"><code class="xref py py-func docutils literal notranslate"><span class="pre">unique()</span></code></a> 处理带符号零不一致的错误：对于某些输入，0.0 和 -0.0 被视为相等，对于另一些输入则被视为不同。现在对于所有输入，它们都被视为相等 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21866">GH 21866</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.agg.html#pandas.DataFrame.agg" title="pandas.DataFrame.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.agg()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.transform.html#pandas.DataFrame.transform" title="pandas.DataFrame.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.transform()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 中存在错误，其中，当提供函数列表和 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 时（例如 <code class="docutils literal notranslate"><span class="pre">df.apply(['sum',</span> <span class="pre">'mean'],</span> <span class="pre">axis=1)</span></code>），会错误地引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>。现在这三种方法都可以正确执行此类计算。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16679">GH 16679</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 与日期时间类型标量和数组进行比较时存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22074">GH 22074</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的布尔型 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 和整数相乘时存在错误，返回 <code class="docutils literal notranslate"><span class="pre">object</span></code> <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 而非整数 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22047">GH 22047</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH 22163</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 中存在错误，其中，当提供字符串参数和额外的位置或关键字参数时（例如 <code class="docutils literal notranslate"><span class="pre">df.apply('sum',</span> <span class="pre">min_count=1)</span></code>），会错误地引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22376">GH 22376</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 中存在错误，转换为扩展 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 时可能引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22578">GH 22578</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中存在错误，当包含 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> `dtype` 时，与整数 `dtype` 的 <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> 进行算术运算会错误地将 `narray` 视为 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> `dtype` (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23114">GH 23114</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.rpow.html#pandas.Series.rpow" title="pandas.Series.rpow"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rpow()</span></code></a> 中存在错误，当对象 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 时，<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">**</span> <span class="pre">NA</span></code> 的结果为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">1</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22922">GH 22922</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.agg.html#pandas.Series.agg" title="pandas.Series.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.agg()</span></code></a> 现在可以处理 NumPy 中感知 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 的方法，例如 <a class="reference external" href="https://numpy.com.cn/doc/stable/reference/generated/numpy.nansum.html#numpy.nansum" title="(in NumPy v2.2)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.nansum()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19629">GH 19629</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.rank.html#pandas.Series.rank" title="pandas.Series.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rank()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.rank.html#pandas.DataFrame.rank" title="pandas.DataFrame.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rank()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">pct=True</span></code> 且行数超过 2<sup>24</sup> 时，导致百分比大于 1.0 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18271">GH 18271</a>)</p></li>
<li><p>现在，使用非唯一 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex()</span></code></a> 调用 <a class="reference internal" href="../reference/api/pandas.DataFrame.round.html#pandas.DataFrame.round" title="pandas.DataFrame.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.round()</span></code></a> 等方法会返回预期数据。以前，数据会被错误地复制 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21809">GH 21809</a>)。</p></li>
<li><p>将 <code class="docutils literal notranslate"><span class="pre">log10</span></code>、<code class="docutils literal notranslate"><span class="pre">floor</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ceil</span></code> 添加到 <a class="reference internal" href="../reference/api/pandas.DataFrame.eval.html#pandas.DataFrame.eval" title="pandas.DataFrame.eval"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.eval()</span></code></a> 支持的函数列表中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24139">GH 24139</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24353">GH 24353</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 之间的逻辑运算 <code class="docutils literal notranslate"><span class="pre">&amp;,</span> <span class="pre">|,</span> <span class="pre">^</span></code> 将不再引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22092">GH 22092</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.api.types.is_scalar.html#pandas.api.types.is_scalar" title="pandas.api.types.is_scalar"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_scalar()</span></code></a> 函数中检查 PEP 3141 数字会返回 <code class="docutils literal notranslate"><span class="pre">True</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22903">GH 22903</a>)</p></li>
<li><p>像 <a class="reference internal" href="../reference/api/pandas.Series.sum.html#pandas.Series.sum" title="pandas.Series.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.sum()</span></code></a> 这样的归约方法，现在从 NumPy ufunc 调用时，接受 <code class="docutils literal notranslate"><span class="pre">keepdims=False</span></code> 的默认值，而不是引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>。尚未完全实现对 <code class="docutils literal notranslate"><span class="pre">keepdims</span></code> 的支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24356">GH 24356</a>)。</p></li>
</ul>
</section>
<section id="conversion">
<h3>转换<a class="headerlink" href="v0.24.0.html#conversion" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.combine_first.html#pandas.DataFrame.combine_first" title="pandas.DataFrame.combine_first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.combine_first()</span></code></a> 中存在错误，其中列类型意外地转换为浮点型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20699">GH 20699</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.clip.html#pandas.DataFrame.clip" title="pandas.DataFrame.clip"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.clip()</span></code></a> 中存在错误，其中列类型未保留并转换为浮点型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24162">GH 24162</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.clip.html#pandas.DataFrame.clip" title="pandas.DataFrame.clip"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.clip()</span></code></a> 中存在错误，当数据帧的列顺序不匹配时，观察到的数值结果不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20911">GH 20911</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 中存在错误，其中当存在重复列名时，转换为扩展 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 会导致 <code class="docutils literal notranslate"><span class="pre">RecursionError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24704">GH 24704</a>)</p></li>
</ul>
</section>
<section id="strings">
<h3>字符串<a class="headerlink" href="v0.24.0.html#strings" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.str.partition()</span></code> 中存在错误，它不是 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 安全的 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23558">GH 23558</a>)。</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.str.split()</span></code> 中存在错误，它不是 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 安全的 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23677">GH 23677</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.str.contains.html#pandas.Series.str.contains" title="pandas.Series.str.contains"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.str.contains()</span></code></a> 中存在错误，对于 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 的 <code class="docutils literal notranslate"><span class="pre">Series</span></code>，不遵守 <code class="docutils literal notranslate"><span class="pre">na</span></code> 参数的规定 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22158">GH 22158</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.str.cat()</span></code> 中存在错误，当结果只包含 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24044">GH 24044</a>)</p></li>
</ul>
</section>
<section id="interval">
<h3>区间<a class="headerlink" href="v0.24.0.html#interval" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 构造函数中存在错误，其中 <code class="docutils literal notranslate"><span class="pre">closed</span></code> 参数并非总是覆盖推断的 <code class="docutils literal notranslate"><span class="pre">closed</span></code> 值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19370">GH 19370</a>)</p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> 的 repr 中存在错误，其中在区间列表后缺少了一个逗号 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20611">GH 20611</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 中存在错误，其中标量算术运算没有保留 <code class="docutils literal notranslate"><span class="pre">closed</span></code> 值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22313">GH 22313</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 中存在错误，其中使用日期时间类型值进行索引时引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20636">GH 20636</a>)</p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">IntervalTree</span></code> 中存在错误，其中包含 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 的数据触发了警告，并导致使用 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 进行不正确的索引查询 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23352">GH 23352</a>)</p></li>
</ul>
</section>
<section id="indexing">
<h3>索引<a class="headerlink" href="v0.24.0.html#indexing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.ne.html#pandas.DataFrame.ne" title="pandas.DataFrame.ne"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.ne()</span></code></a> 中存在错误，如果列中包含列名“dtype”则会失败 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22383">GH 22383</a>)</p></li>
<li><p>现在，当 <code class="docutils literal notranslate"><span class="pre">.loc</span></code> 请求单个缺失标签时，<code class="docutils literal notranslate"><span class="pre">KeyError</span></code> 的回溯信息更短、更清晰 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21557">GH 21557</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 现在在查找格式错误的字符串时会发出 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>，这与 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 的行为一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22803">GH 22803</a>)</p></li>
<li><p>当对 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a>（其中第一级为整数类型）中的 <code class="docutils literal notranslate"><span class="pre">.ix</span></code> 请求缺失整数标签时，现在会引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>，这与扁平 <code class="xref py py-class docutils literal notranslate"><span class="pre">Int64Index</span></code> 的情况一致，而不再回退到位置索引 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21593">GH 21593</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Index.reindex.html#pandas.Index.reindex" title="pandas.Index.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.reindex()</span></code></a> 中存在错误，当重新索引一个时区非感知和时区感知 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8306">GH 8306</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.reindex.html#pandas.Series.reindex" title="pandas.Series.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.reindex()</span></code></a> 中存在错误，当使用 <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 重新索引空序列时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20869">GH 20869</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中存在错误，当使用 <code class="docutils literal notranslate"><span class="pre">.loc</span></code> 和时区感知 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 设置值时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11365">GH 11365</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.__getitem__</span></code> 现在接受字典和字典键作为标签的列表式对象，与 <code class="docutils literal notranslate"><span class="pre">Series.__getitem__</span></code> 的行为一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21294">GH 21294</a>)</p></li>
<li><p>修复了当列非唯一时 <code class="docutils literal notranslate"><span class="pre">DataFrame[np.nan]</span></code> 的问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21428">GH 21428</a>)</p></li>
<li><p>当使用纳秒分辨率日期和时区索引 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 时存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11679">GH 11679</a>)</p></li>
<li><p>其中使用包含负值的 Numpy 数组进行索引会修改索引器，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21867">GH 21867</a>)</p></li>
<li><p>其中混合索引不允许 <code class="docutils literal notranslate"><span class="pre">.at</span></code> 使用整数，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19860">GH 19860</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Float64Index.get_loc</span></code> 现在在传递布尔键时引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19087">GH 19087</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 中存在错误，当使用 <a class="reference internal" href="../reference/api/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> 进行索引时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19977">GH 19977</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 不再破坏 <code class="docutils literal notranslate"><span class="pre">None</span></code>、<code class="docutils literal notranslate"><span class="pre">NaN</span></code> 和 <code class="docutils literal notranslate"><span class="pre">NaT</span></code>，即它们被视为三个不同的键。但是，对于数值型 `Index`，这三者仍然被强制转换为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22332">GH 22332</a>)</p></li>
<li><p>如果标量是浮点型而 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 是整数 `dtype`，则 <code class="docutils literal notranslate"><span class="pre">scalar</span> <span class="pre">in</span> <span class="pre">Index</span></code> 中存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22085">GH 22085</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.MultiIndex.set_levels.html#pandas.MultiIndex.set_levels" title="pandas.MultiIndex.set_levels"><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.set_levels()</span></code></a> 中存在错误，当 `levels` 值不可索引时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23273">GH 23273</a>)</p></li>
<li><p>其中通过 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 设置 timedelta 列会导致其被强制转换为双精度浮点型，从而丢失精度，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23511">GH 23511</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Index.union.html#pandas.Index.union" title="pandas.Index.union"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.union()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.intersection.html#pandas.Index.intersection" title="pandas.Index.intersection"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.intersection()</span></code></a> 中存在错误，其中在某些情况下，结果的 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 名称计算不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9943">GH 9943</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9862">GH 9862</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 中存在错误，使用布尔 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 进行切片时可能引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22533">GH 22533</a>)</p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">PeriodArray.__setitem__</span></code> 中存在错误，当接受切片和列表式值时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23978">GH 23978</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a>、<a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 中存在错误，其中使用 <code class="docutils literal notranslate"><span class="pre">Ellipsis</span></code> 索引会导致它们丢失 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 属性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21282">GH 21282</a>)</p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">iat</span></code> 中存在错误，其中使用它赋值不兼容的值会创建一个新列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23236">GH 23236</a>)</p></li>
</ul>
</section>
<section id="missing">
<h3>缺失值<a class="headerlink" href="v0.24.0.html#missing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a> 中存在错误，其中当某一列包含 <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 时会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15522">GH 15522</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.hasnans.html#pandas.Series.hasnans" title="pandas.Series.hasnans"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.hasnans()</span></code></a> 中存在错误，如果初次调用后引入空元素，则可能被错误缓存并返回不正确结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19700">GH 19700</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.isin.html#pandas.Series.isin" title="pandas.Series.isin"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.isin()</span></code></a> 现在将所有 `NaN` 浮点数视为相等，也适用于 <code class="docutils literal notranslate"><span class="pre">np.object_</span></code>-dtype。此行为与 float64 的行为一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22119">GH 22119</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.unique.html#pandas.unique" title="pandas.unique"><code class="xref py py-func docutils literal notranslate"><span class="pre">unique()</span></code></a> 不再破坏 <code class="docutils literal notranslate"><span class="pre">np.object_</span></code>-dtype 的 `NaN` 浮点数和 <code class="docutils literal notranslate"><span class="pre">NaT</span></code>-object，即 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 不再被强制转换为 `NaN` 值并被视为不同的实体。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22295">GH 22295</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 现在可以正确处理带硬掩码的 NumPy 掩码数组。以前，从带硬掩码的掩码数组构造 DataFrame 或 Series 会创建一个包含底层值而不是预期 `NaN` 的 pandas 对象。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24574">GH 24574</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数中存在错误，其中在处理 NumPy 掩码记录数组时，<code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数未被遵守。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24874">GH 24874</a>)</p></li>
</ul>
</section>
<section id="multiindex">
<h3>多层索引<a class="headerlink" href="v0.24.0.html#multiindex" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <code class="xref py py-func docutils literal notranslate"><span class="pre">io.formats.style.Styler.applymap()</span></code> 中存在错误，其中 <code class="docutils literal notranslate"><span class="pre">subset=</span></code> 与 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 切片会简化为 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19861">GH 19861</a>)</p></li>
<li><p>移除了对 0.8.0 版本之前 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> pickle 文件的兼容性；维护了与 0.13 版本及更高版本的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> pickle 文件的兼容性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21654">GH 21654</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.get_loc_level.html#pandas.MultiIndex.get_loc_level" title="pandas.MultiIndex.get_loc_level"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.get_loc_level()</span></code></a>（以及因此，<a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 上带有 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 索引的 <code class="docutils literal notranslate"><span class="pre">.loc</span></code>）现在在请求一个存在于 <code class="docutils literal notranslate"><span class="pre">levels</span></code> 但未使用的标签时，会引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>，而不是返回一个空 <code class="docutils literal notranslate"><span class="pre">slice</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22221">GH 22221</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 新增了 <a class="reference internal" href="../reference/api/pandas.MultiIndex.from_frame.html#pandas.MultiIndex.from_frame" title="pandas.MultiIndex.from_frame"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.from_frame()</span></code></a> 方法，它允许从 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22420">GH 22420</a>)</p></li>
<li><p>修复了 Python 3 中创建 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时，如果某些级别具有混合类型（例如某些标签是元组）则会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15457">GH 15457</a>)</p></li>
</ul>
</section>
<section id="io">
<h3>输入/输出<a class="headerlink" href="v0.24.0.html#io" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，其中使用布尔类别的 <code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> 指定的列未能从字符串值正确强制转换为布尔值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20498">GH 20498</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，其中在 Python 2.x 中，Unicode 列名未能被正确识别 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13253">GH 13253</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code></a> 中存在错误，当写入时区感知数据（<code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> <code class="docutils literal notranslate"><span class="pre">dtype</span></code>）时会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9086">GH 9086</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code></a> 中存在错误，其中幼稚（naive）的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 在支持的数据库（例如 PostgreSQL）中会被写入为 <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">TIMEZONE</span></code> 类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23510">GH 23510</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在错误，当使用空数据集指定 <code class="docutils literal notranslate"><span class="pre">parse_cols</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9208">GH 9208</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> 在考虑 <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> 和 <code class="docutils literal notranslate"><span class="pre">header</span></code> 参数时，不再忽略 <code class="docutils literal notranslate"><span class="pre"><thead></span></code> 中只包含空白字符的 <code class="docutils literal notranslate"><span class="pre"><tr></span></code>。以前，用户必须在此类表格中减小 <code class="docutils literal notranslate"><span class="pre">header</span></code> 和 <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> 的值以解决此问题。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21641">GH 21641</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 将正确显示先前已弃用的 <code class="docutils literal notranslate"><span class="pre">sheetname</span></code> 的弃用警告 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17994">GH 17994</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code></a> 将在遇到编码错误的字符串时抛出 <code class="docutils literal notranslate"><span class="pre">UnicodeError</span></code> 而不会导致核心转储 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22748">GH 22748</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 将正确解析时区感知日期时间 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22256">GH 22256</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，其中当数据分块读取时，C 引擎的内存管理被过早优化 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23509">GH 23509</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，其中在提取多索引时，未命名的列被错误地识别 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23687">GH 23687</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 将正确解析宽度小于 8 字节的 sas7bdat 文件中的数字。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21616">GH 21616</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 将正确解析包含多列的 sas7bdat 文件 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22628">GH 22628</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 将正确解析数据页类型设置了位 7 的 sas7bdat 文件（因此页类型为 128 + 256 = 384） (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16615">GH 16615</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 中存在错误，其中在文件格式无效时，引发了不正确的错误。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24548">GH 24548</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">detect_client_encoding()</span></code> 中存在错误，其中在 mod_wsgi 进程中导入时，由于对 stdout 的访问受限，潜在的 <code class="docutils literal notranslate"><span class="pre">IOError</span></code> 未被处理。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21552">GH 21552</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">index=False</span></code> 时，在截断的 DataFrame 上缺少截断指示符（…） (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15019">GH 15019</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22783">GH 22783</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">index=False</span></code> 且列和行索引都是 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22579">GH 22579</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">index_names=False</span></code> 时显示索引名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22747">GH 22747</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">header=False</span></code> 时不显示行索引名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23788">GH 23788</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">sparsify=False</span></code> 时导致引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22887">GH 22887</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">index=False</span></code> 且第一列值的宽度大于第一列标题的宽度时，导致列对齐被破坏 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16839">GH 16839</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13032">GH 13032</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> 中存在错误，导致 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的表示未能占据整个窗口 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22984">GH 22984</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> 中存在错误，其中单层 MultiIndex 错误地写入了元组。现在只写入索引的值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19589">GH 19589</a>)。</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">HDFStore</span></code> 将在 <code class="docutils literal notranslate"><span class="pre">format</span></code> 关键字参数传递给构造函数时引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13291">GH 13291</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.HDFStore.append.html#pandas.HDFStore.append" title="pandas.HDFStore.append"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HDFStore.append()</span></code></a> 中存在错误，当附加一个包含空字符串列且 <code class="docutils literal notranslate"><span class="pre">min_itemsize</span></code> &lt; 8 的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12242">GH 12242</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，其中在解析 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值时，由于完成或出错时清理不足，C 引擎发生内存泄漏 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21353">GH 21353</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，其中当 <code class="docutils literal notranslate"><span class="pre">skipfooter</span></code> 与 <code class="docutils literal notranslate"><span class="pre">nrows</span></code>、<code class="docutils literal notranslate"><span class="pre">iterator</span></code> 或 <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> 一起传递时，会引发不正确的错误消息 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23711">GH 23711</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，其中在未提供 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 索引名称的情况下，它们被错误地处理 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23484">GH 23484</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，其中当方言的值与默认参数冲突时，会引发不必要的警告 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23761">GH 23761</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> 中存在错误，其中当提供了无效的风格时，错误消息未显示有效的风格 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23549">GH 23549</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在错误，其中提取了多余的标题名称，即使未指定任何标题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11733">GH 11733</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在错误，其中在 Python 2.x 中，列名有时未能正确转换为字符串 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23874">GH 23874</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在错误，其中 <code class="docutils literal notranslate"><span class="pre">index_col=None</span></code> 未被遵守，仍然解析了索引列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18792">GH 18792</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20480">GH 20480</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中存在错误，其中当 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 作为字符串传入时，未对其进行有效列名验证 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20480">GH 20480</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict" title="pandas.DataFrame.to_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_dict()</span></code></a> 中存在错误，当结果字典在数值数据情况下包含非 Python 标量时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23753">GH 23753</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.to_latex.html#pandas.DataFrame.to_latex" title="pandas.DataFrame.to_latex"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_latex()</span></code></a> 在将字符串作为 <code class="docutils literal notranslate"><span class="pre">float_format</span></code> 参数传递时，将正确格式化输出 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21625">GH 21625</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22270">GH 22270</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，当尝试将 ‘inf’ 用作整数索引列的 <code class="docutils literal notranslate"><span class="pre">na_value</span></code> 时，导致引发 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17128">GH 17128</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中存在错误，导致 Python 3.6+ 在 Windows 上的 C 引擎无法正确读取带有重音或特殊字符的 CSV 文件名 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15086">GH 15086</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.read_fwf.html#pandas.read_fwf" title="pandas.read_fwf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_fwf()</span></code></a> 中存在错误，其中文件压缩类型未能被正确推断 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22199">GH 22199</a>)</p></li>
<li><p>在 <code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.io.json.json_normalize()</span></code> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">record_path</span></code> 的两个连续元素都是字典时，导致引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22706">GH 22706</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_stata.html#pandas.DataFrame.to_stata" title="pandas.DataFrame.to_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code></a>、<code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.stata.StataWriter</span></code> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.stata.StataWriter117</span></code> 中存在错误，其中异常会导致写入部分且无效的 dta 文件 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23573">GH 23573</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_stata.html#pandas.DataFrame.to_stata" title="pandas.DataFrame.to_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code></a> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.stata.StataWriter117</span></code> 中存在错误，当使用包含非 ASCII 字符的 strLs 时，会生成无效文件 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23573">GH 23573</a>)</p></li>
<li><p>在 <code class="xref py py-class docutils literal notranslate"><span class="pre">HDFStore</span></code> 中存在错误，当 Python 3 从 Python 2 写入的固定格式读取 DataFrame 时，导致引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24510">GH 24510</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> 以及更普遍地在浮点型 <code class="docutils literal notranslate"><span class="pre">repr</span></code> 格式化程序中存在错误。如果列中存在 <code class="docutils literal notranslate"><span class="pre">inf</span></code>，则零不会被截断，而对于 <code class="docutils literal notranslate"><span class="pre">NA</span></code> 值则会截断。现在，当存在 <code class="docutils literal notranslate"><span class="pre">NA</span></code> 时，零也会被截断 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24861">GH 24861</a>)。</p></li>
<li><p>当截断列数且最后一列较宽时，<code class="docutils literal notranslate"><span class="pre">repr</span></code> 中存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24849">GH 24849</a>)。</p></li>
</ul>
</section>
<section id="plotting">
<h3>绘图<a class="headerlink" href="v0.24.0.html#plotting" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.scatter.html#pandas.DataFrame.plot.scatter" title="pandas.DataFrame.plot.scatter"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.plot.scatter()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.hexbin.html#pandas.DataFrame.plot.hexbin" title="pandas.DataFrame.plot.hexbin"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.plot.hexbin()</span></code></a> 中存在错误，在 IPython 内联后端中，当颜色条开启时，导致 X 轴标签和刻度标签消失 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10611">GH 10611</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10678">GH 10678</a>, 和 <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20455">GH 20455</a>)</p></li>
<li><p>在使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">matplotlib.axes.Axes.scatter()</span></code> 绘制包含日期时间的 Series 时存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22039">GH 22039</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.bar.html#pandas.DataFrame.plot.bar" title="pandas.DataFrame.plot.bar"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.plot.bar()</span></code></a> 中存在错误，导致条形图使用多种颜色而不是单一颜色 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20585">GH 20585</a>)</p></li>
<li><p>在验证颜色参数时存在错误，导致额外的颜色被附加到给定的颜色数组中。这发生在多个使用 matplotlib 的绘图函数中。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20726">GH 20726</a>)</p></li>
</ul>
</section>
<section id="groupby-resample-rolling">
<h3>分组/重采样/滚动<a class="headerlink" href="v0.24.0.html#groupby-resample-rolling" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <code class="xref py py-func docutils literal notranslate"><span class="pre">Rolling.min()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">Rolling.max()</span></code> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">closed='left'</span></code>、索引为日期时间类型且序列中仅有一个条目时，导致段错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24718">GH 24718</a>)</p></li>
<li><p>在 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.first()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">GroupBy.last()</span></code> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">as_index=False</span></code> 时，导致时区信息丢失 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15884">GH 15884</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DateFrame.resample()</span></code> 中存在错误，当跨 DST 边界降采样时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/8531">GH 8531</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DateFrame.resample()</span></code> 的日期锚定中存在错误，当偏移量为 <code class="xref py py-class docutils literal notranslate"><span class="pre">Day</span></code> 且 n > 1 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24127">GH 24127</a>)</p></li>
<li><p>当分组变量只包含 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 且 NumPy 版本小于 1.13 时，调用 <code class="docutils literal notranslate"><span class="pre">SeriesGroupBy</span></code> 的 <code class="xref py py-func docutils literal notranslate"><span class="pre">SeriesGroupBy.count()</span></code> 方法会错误地引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21956">GH 21956</a>)。</p></li>
<li><p>在 <code class="xref py py-func docutils literal notranslate"><span class="pre">Rolling.min()</span></code> 中存在多个错误，当 <code class="docutils literal notranslate"><span class="pre">closed='left'</span></code> 且索引为日期时间类型时，导致结果不正确以及段错误。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21704">GH 21704</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.apply.html#pandas.core.resample.Resampler.apply" title="pandas.core.resample.Resampler.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.apply()</span></code></a> 中存在错误，当向应用的函数传递位置参数时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14615">GH 14615</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> 中存在错误，当向 <code class="docutils literal notranslate"><span class="pre">loffset</span></code> 关键字参数传递 <code class="docutils literal notranslate"><span class="pre">numpy.timedelta64</span></code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7687">GH 7687</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.asfreq.html#pandas.core.resample.Resampler.asfreq" title="pandas.core.resample.Resampler.asfreq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.asfreq()</span></code></a> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 的频率是新频率的子周期时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13022">GH 13022</a>)。</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.mean.html#pandas.core.groupby.SeriesGroupBy.mean" title="pandas.core.groupby.SeriesGroupBy.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.mean()</span></code></a> 中存在错误，当值为整数但无法适应 int64 而发生溢出时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22487">GH 22487</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">RollingGroupby.agg()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">ExpandingGroupby.agg()</span></code> 现在支持将多个聚合函数作为参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15072">GH 15072</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> 中存在错误，当通过每周偏移量 (<code class="docutils literal notranslate"><span class="pre">'W'</span></code>) 跨 DST 转换进行重采样时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9119">GH 9119</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21459">GH 21459</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.expanding.html#pandas.DataFrame.expanding" title="pandas.DataFrame.expanding"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.expanding()</span></code></a> 中存在错误，其中在聚合期间未遵守 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23372">GH 23372</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">GroupBy.transform()</span></code> 中存在错误，当输入函数可以接受 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 但将其重命名时，导致缺失值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23455">GH 23455</a>)。</p></li>
<li><p><code>GroupBy.nth()</code> 中的一个错误，导致列顺序并非总能保留 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20760">GH 20760</a>)</p></li>
<li><p><code>GroupBy.rank()</code> 在使用 <code>method='dense'</code> 和 <code>pct=True</code> 模式时的一个错误，当组中只有一个成员时会引发 <code>ZeroDivisionError</code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23666">GH 23666</a>)。</p></li>
<li><p>调用 <code>GroupBy.rank()</code> 时，如果组为空且 <code>pct=True</code>，会引发 <code>ZeroDivisionError</code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22519">GH 22519</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 在对 <code>TimeDeltaIndex</code> 中的 <code>NaT</code> 进行重采样时的一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13223">GH 13223</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 中的一个错误，在选择列时未遵循 <code>observed</code> 参数，而是始终使用 <code>observed=False</code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23970">GH 23970</a>)</p></li>
<li><p><code>SeriesGroupBy.pct_change()</code> 或 <code>DataFrameGroupBy.pct_change()</code> 中的一个错误，以前在计算百分比变化时会跨组工作，而现在它能正确地按组工作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21200">GH 21200</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21235">GH 21235</a>)。</p></li>
<li><p>一个阻止创建哈希表的错误，当行数非常大 (2^32) 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22805">GH 22805</a>)</p></li>
<li><p>groupby 中的一个错误，当对分类数据进行分组时，如果 <code>observed=True</code> 且分类列中存在 <code>nan</code>，会引发 <code>ValueError</code> 并导致不正确的分组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24740">GH 24740</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21151">GH 21151</a>)。</p></li>
</ul>
</section>
<section id="reshaping">
<h3>重塑<a class="headerlink" href="v0.24.0.html#reshaping" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.concat()</span></code></a> 在连接具有时区感知索引的重采样DataFrame时的一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13783">GH 13783</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.concat()</span></code></a> 在仅连接 <code>Series</code> 时的一个错误，现在 <code>concat</code> 的 <code>names</code> 参数不再被忽略 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23490">GH 23490</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.combine_first.html#pandas.Series.combine_first" title="pandas.Series.combine_first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.combine_first()</span></code></a> 对于 <code>datetime64[ns, tz]</code> 数据类型的一个错误，它会返回时区-不感知的结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21469">GH 21469</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.where()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> 对于 <code>datetime64[ns, tz]</code> 数据类型的一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21546">GH 21546</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> 在DataFrame为空且 <code>cond</code> 为空且具有非布尔数据类型时的一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21947">GH 21947</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.mask.html#pandas.Series.mask" title="pandas.Series.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mask()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.mask.html#pandas.DataFrame.mask" title="pandas.DataFrame.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mask()</span></code></a> 在使用 <code>list</code> 条件时的一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21891">GH 21891</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.replace.html#pandas.DataFrame.replace" title="pandas.DataFrame.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code></a> 中的一个错误，在转换超出范围的 <code>datetime64[ns, tz]</code> 时会引发 RecursionError (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20380">GH 20380</a>)</p></li>
<li><p><code>GroupBy.rank()</code> 现在在为参数 <code>na_option</code> 传递无效值时会引发 <code>ValueError</code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22124">GH 22124</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> 在 Python 2 中处理 Unicode 属性时的一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22084">GH 22084</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.replace.html#pandas.DataFrame.replace" title="pandas.DataFrame.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code></a> 中的一个错误，在替换空列表时会引发 <code>RecursionError</code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22083">GH 22083</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.replace.html#pandas.Series.replace" title="pandas.Series.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.replace()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.replace.html#pandas.DataFrame.replace" title="pandas.DataFrame.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code></a> 中的一个错误，当字典作为 <code>to_replace</code> 值使用且字典中的一个键是另一个键的值时，使用整数键和使用字符串键的结果不一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20656">GH 20656</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.drop_duplicates.html#pandas.DataFrame.drop_duplicates" title="pandas.DataFrame.drop_duplicates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.drop_duplicates()</span></code></a> 对于空的 <code>DataFrame</code> 错误地引发了错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20516">GH 20516</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.wide_to_long.html#pandas.wide_to_long" title="pandas.wide_to_long"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.wide_to_long()</span></code></a> 中的一个错误，当字符串作为 <code>stubnames</code> 参数传递且列名是该 <code>stubname</code> 的子字符串时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22468">GH 22468</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 中的一个错误，在合并包含夏令时 (DST) 转换的 <code>datetime64[ns, tz]</code> 数据时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18885">GH 18885</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 在定义容差内合并浮点值时的一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22981">GH 22981</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.concat()</span></code></a> 中的一个错误，在将具有时区感知数据的多列DataFrame与列数不同的DataFrame进行连接时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22796">GH 22796</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 中的一个错误，以前在尝试合并缺失值时会引发令人困惑的错误消息 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23189">GH 23189</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.nsmallest.html#pandas.DataFrame.nsmallest" title="pandas.DataFrame.nsmallest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.nsmallest()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.nlargest.html#pandas.DataFrame.nlargest" title="pandas.DataFrame.nlargest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.nlargest()</span></code></a> 对于列中包含 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 的DataFrame的一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23033">GH 23033</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.melt.html#pandas.melt" title="pandas.melt"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.melt()</span></code></a> 在传递DataFrame中不存在的列名时的一个错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23575">GH 23575</a>)</p></li>
<li><p><code>DataFrame.append()</code> 中的一个错误，当附加一个带有 <code>dateutil</code> 时区的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时会引发 <code>TypeError</code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23682">GH 23682</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 构造函数中的一个错误，在不传递数据且 <code>dtype=str</code> 时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22477">GH 22477</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a> 中的一个错误，当 <code>bins</code> 是一个重叠的 <code>IntervalIndex</code> 时，每个项目返回多个bin，而不是引发 <code>ValueError</code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23980">GH 23980</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.concat()</span></code></a> 中的一个错误，在连接 <code>Series</code> datetimetz 与 <code>Series</code> category 时会丢失时区 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23816">GH 23816</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 中的一个错误，在部分MultiIndex上连接时会丢失名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20452">GH 20452</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.nlargest.html#pandas.DataFrame.nlargest" title="pandas.DataFrame.nlargest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.nlargest()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.nsmallest.html#pandas.DataFrame.nsmallest" title="pandas.DataFrame.nsmallest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.nsmallest()</span></code></a> 现在会在 <code>keep != 'all'</code> 时返回正确的n值，即使在第一列上存在平局 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22752">GH 22752</a>)</p></li>
<li><p>构造一个DataFrame时，如果索引参数不是 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 的实例，就会出现问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22227">GH 22227</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中的一个错误，阻止了列表子类用于构造 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21226">GH 21226</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.unstack()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table" title="pandas.DataFrame.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.pivot_table()</span></code></a> 中的一个错误，当结果DataFrame的元素数量超过int32可处理范围时会返回一个误导性错误消息。现在，错误消息已改进，指向实际问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20601">GH 20601</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.unstack()</span></code></a> 中的一个错误，在unstacking时区感知值时会引发 <code>ValueError</code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18338">GH 18338</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a> 中的一个错误，其中时区感知值被转换为时区不感知值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19420">GH 19420</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> 中的一个错误，当 <code>by_col</code> 是时区感知值时会引发 <code>TypeError</code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21184">GH 21184</a>)</p></li>
<li><p>一个错误，在 <code>DataFrame</code> 构造过程中抛出错误时显示不正确的形状。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20742">GH 20742</a>)</p></li>
</ul>
</section>
<section id="sparse">
<span id="whatsnew-0240-bug-fixes-sparse"></span><h3>稀疏<a class="headerlink" href="v0.24.0.html#sparse" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>将布尔、日期时间或时间差列更新为稀疏现在可以正常工作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22367">GH 22367</a>)</p></li>
<li><p><code>Series.to_sparse()</code> 中的一个错误，当Series已经包含稀疏数据但未能正确构造时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22389">GH 22389</a>)</p></li>
<li><p>向SparseArray构造函数提供 <code>sparse_index</code> 不再将所有数据类型的na值默认为 <code>np.nan</code>。现在使用 <code>data.dtype</code> 的正确na值。</p></li>
<li><p><code>SparseArray.nbytes</code> 中的一个错误，通过未包含其稀疏索引的大小而低估了其内存使用量。</p></li>
<li><p>提高了 <a class="reference internal" href="../reference/api/pandas.Series.shift.html#pandas.Series.shift" title="pandas.Series.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.shift()</span></code></a> 对于非NA的 <code>fill_value</code> 的性能，因为值不再转换为密集数组。</p></li>
<li><p><code>DataFrame.groupby</code> 中的一个错误，当按稀疏列分组时，未在组中包含非NA <code>fill_value</code> 的 <code>fill_value</code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/5078">GH 5078</a>)</p></li>
<li><p>一元反转运算符 (<code>~</code>) 在具有布尔值的 <code>SparseSeries</code> 上的一个错误。其性能也得到了改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22835">GH 22835</a>)</p></li>
<li><p><code>SparseArary.unique()</code> 中的一个错误，未返回唯一值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19595">GH 19595</a>)</p></li>
<li><p><code>SparseArray.nonzero()</code> 和 <code>SparseDataFrame.dropna()</code> 中的一个错误，返回了偏移/不正确的结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21172">GH 21172</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 中的一个错误，其中数据类型会失去稀疏性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23744">GH 23744</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中的一个错误，在连接包含全稀疏值的 <code>Series</code> 列表时，改变了 <code>fill_value</code> 并转换为密集Series (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24371">GH 24371</a>)</p></li>
</ul>
</section>
<section id="style">
<h3>样式<a class="headerlink" href="v0.24.0.html#style" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.background_gradient.html#pandas.io.formats.style.Styler.background_gradient" title="pandas.io.formats.style.Styler.background_gradient"><code class="xref py py-meth docutils literal notranslate"><span class="pre">background_gradient()</span></code></a> 现在接受 <code>text_color_threshold</code> 参数，根据背景颜色的亮度自动调整文本颜色使其变亮。这在深色背景下提高了可读性，而无需限制背景颜色映射范围。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21258">GH 21258</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.background_gradient.html#pandas.io.formats.style.Styler.background_gradient" title="pandas.io.formats.style.Styler.background_gradient"><code class="xref py py-meth docutils literal notranslate"><span class="pre">background_gradient()</span></code></a> 现在也支持表格范围的应用 (除了行向和列向)，通过设置 <code>axis=None</code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15204">GH 15204</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.bar.html#pandas.io.formats.style.Styler.bar" title="pandas.io.formats.style.Styler.bar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bar()</span></code></a> 现在也支持表格范围的应用 (除了行向和列向)，通过设置 <code>axis=None</code> 以及使用 <code>vmin</code> 和 <code>vmax</code> 设置剪裁范围 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21548">GH 21548</a> 和 <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21526">GH 21526</a>)。<code>NaN</code> 值也得到了正确处理。</p></li>
</ul>
</section>
<section id="build-changes">
<h3>构建变更<a class="headerlink" href="v0.24.0.html#build-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>开发时构建pandas现在需要 <code>cython &gt;= 0.28.2</code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21688">GH 21688</a>)</p></li>
<li><p>测试pandas现在需要 <code>hypothesis&gt;=3.58</code>。您可以在<a class="reference external" href="https://hypothesis.readthedocs.io/en/latest/index.html">此处</a>找到 Hypothesis 文档，以及<a class="reference internal" href="../development/contributing_codebase.html#using-hypothesis"><span class="std std-ref">在贡献指南中</span></a>找到pandas特有的介绍。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/22280">GH 22280</a>)</p></li>
<li><p>在macOS上构建pandas现在目标最低macOS 10.9，如果其在macOS 10.9或更高版本上运行 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/23424">GH 23424</a>)</p></li>
</ul>
</section>
<section id="other">
<h3>其他<a class="headerlink" href="v0.24.0.html#other" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>一个错误，C变量被声明为外部链接，如果在pandas之前导入了某些其他C库，则会导致导入错误。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24113">GH 24113</a>)</p></li>
</ul>
</section>
</section>
<section id="contributors">
<span id="whatsnew-0-24-0-contributors"></span><h2>贡献者<a class="headerlink" href="v0.24.0.html#contributors" title="Link to this heading">#</a></h2>
<p>共有337人为此版本贡献了补丁。名字旁带有“+”的人是首次贡献补丁。</p>
<ul class="simple">
<li><p>AJ Dyka +</p></li>
<li><p>AJ Pryor, Ph.D +</p></li>
<li><p>Aaron Critchley</p></li>
<li><p>Adam Hooper</p></li>
<li><p>Adam J. Stewart</p></li>
<li><p>Adam Kim</p></li>
<li><p>Adam Klimont +</p></li>
<li><p>Addison Lynch +</p></li>
<li><p>Alan Hogue +</p></li>
<li><p>Alex Radu +</p></li>
<li><p>Alex Rychyk</p></li>
<li><p>Alex Strick van Linschoten +</p></li>
<li><p>Alex Volkov +</p></li>
<li><p>Alexander Buchkovsky</p></li>
<li><p>Alexander Hess +</p></li>
<li><p>Alexander Ponomaroff +</p></li>
<li><p>Allison Browne +</p></li>
<li><p>Aly Sivji</p></li>
<li><p>Andrew</p></li>
<li><p>Andrew Gross +</p></li>
<li><p>Andrew Spott +</p></li>
<li><p>Andy +</p></li>
<li><p>Aniket uttam +</p></li>
<li><p>Anjali2019 +</p></li>
<li><p>Anjana S +</p></li>
<li><p>Antti Kaihola +</p></li>
<li><p>Anudeep Tubati +</p></li>
<li><p>Arjun Sharma +</p></li>
<li><p>Armin Varshokar</p></li>
<li><p>Artem Bogachev</p></li>
<li><p>ArtinSarraf +</p></li>
<li><p>Barry Fitzgerald +</p></li>
<li><p>Bart Aelterman +</p></li>
<li><p>Ben James +</p></li>
<li><p>Ben Nelson +</p></li>
<li><p>Benjamin Grove +</p></li>
<li><p>Benjamin Rowell +</p></li>
<li><p>Benoit Paquet +</p></li>
<li><p>Boris Lau +</p></li>
<li><p>Brett Naul</p></li>
<li><p>Brian Choi +</p></li>
<li><p>C.A.M. Gerlach +</p></li>
<li><p>Carl Johan +</p></li>
<li><p>Chalmer Lowe</p></li>
<li><p>Chang She</p></li>
<li><p>Charles David +</p></li>
<li><p>Cheuk Ting Ho</p></li>
<li><p>Chris</p></li>
<li><p>Chris Roberts +</p></li>
<li><p>Christopher Whelan</p></li>
<li><p>Chu Qing Hao +</p></li>
<li><p>Da Cheezy Mobsta +</p></li>
<li><p>Damini Satya</p></li>
<li><p>Daniel Himmelstein</p></li>
<li><p>Daniel Saxton +</p></li>
<li><p>Darcy Meyer +</p></li>
<li><p>DataOmbudsman</p></li>
<li><p>David Arcos</p></li>
<li><p>David Krych</p></li>
<li><p>Dean Langsam +</p></li>
<li><p>Diego Argueta +</p></li>
<li><p>Diego Torres +</p></li>
<li><p>Dobatymo +</p></li>
<li><p>Doug Latornell +</p></li>
<li><p>Dr. Irv</p></li>
<li><p>Dylan Dmitri Gray +</p></li>
<li><p>Eric Boxer +</p></li>
<li><p>Eric Chea</p></li>
<li><p>Erik +</p></li>
<li><p>Erik Nilsson +</p></li>
<li><p>Fabian Haase +</p></li>
<li><p>Fabian Retkowski</p></li>
<li><p>Fabien Aulaire +</p></li>
<li><p>Fakabbir Amin +</p></li>
<li><p>Fei Phoon +</p></li>
<li><p>Fernando Margueirat +</p></li>
<li><p>Florian Müller +</p></li>
<li><p>Fábio Rosado +</p></li>
<li><p>Gabe Fernando</p></li>
<li><p>Gabriel Reid +</p></li>
<li><p>Giftlin Rajaiah</p></li>
<li><p>Gioia Ballin +</p></li>
<li><p>Gjelt</p></li>
<li><p>Gosuke Shibahara +</p></li>
<li><p>Graham Inggs</p></li>
<li><p>Guillaume Gay</p></li>
<li><p>Guillaume Lemaitre +</p></li>
<li><p>Hannah Ferchland</p></li>
<li><p>Haochen Wu</p></li>
<li><p>Hubert +</p></li>
<li><p>HubertKl +</p></li>
<li><p>HyunTruth +</p></li>
<li><p>Iain Barr</p></li>
<li><p>Ignacio Vergara Kausel +</p></li>
<li><p>Irv Lustig +</p></li>
<li><p>IsvenC +</p></li>
<li><p>Jacopo Rota</p></li>
<li><p>Jakob Jarmar +</p></li>
<li><p>James Bourbeau +</p></li>
<li><p>James Myatt +</p></li>
<li><p>James Winegar +</p></li>
<li><p>Jan Rudolph</p></li>
<li><p>Jared Groves +</p></li>
<li><p>Jason Kiley +</p></li>
<li><p>Javad Noorbakhsh +</p></li>
<li><p>Jay Offerdahl +</p></li>
<li><p>Jeff Reback</p></li>
<li><p>Jeongmin Yu +</p></li>
<li><p>Jeremy Schendel</p></li>
<li><p>Jerod Estapa +</p></li>
<li><p>Jesper Dramsch +</p></li>
<li><p>Jim Jeon +</p></li>
<li><p>Joe Jevnik</p></li>
<li><p>Joel Nothman</p></li>
<li><p>Joel Ostblom +</p></li>
<li><p>Jordi Contestí</p></li>
<li><p>Jorge López Fueyo +</p></li>
<li><p>Joris Van den Bossche</p></li>
<li><p>Jose Quinones +</p></li>
<li><p>Jose Rivera-Rubio +</p></li>
<li><p>Josh</p></li>
<li><p>Jun +</p></li>
<li><p>Justin Zheng +</p></li>
<li><p>Kaiqi Dong +</p></li>
<li><p>Kalyan Gokhale</p></li>
<li><p>Kang Yoosam +</p></li>
<li><p>Karl Dunkle Werner +</p></li>
<li><p>Karmanya Aggarwal +</p></li>
<li><p>Kevin Markham +</p></li>
<li><p>Kevin Sheppard</p></li>
<li><p>Kimi Li +</p></li>
<li><p>Koustav Samaddar +</p></li>
<li><p>Krishna +</p></li>
<li><p>Kristian Holsheimer +</p></li>
<li><p>Ksenia Gueletina +</p></li>
<li><p>Kyle Prestel +</p></li>
<li><p>LJ +</p></li>
<li><p>LeakedMemory +</p></li>
<li><p>Li Jin +</p></li>
<li><p>Licht Takeuchi</p></li>
<li><p>Luca Donini +</p></li>
<li><p>Luciano Viola +</p></li>
<li><p>Mak Sze Chun +</p></li>
<li><p>Marc Garcia</p></li>
<li><p>Marius Potgieter +</p></li>
<li><p>Mark Sikora +</p></li>
<li><p>Markus Meier +</p></li>
<li><p>Marlene Silva Marchena +</p></li>
<li><p>Martin Babka +</p></li>
<li><p>MatanCohe +</p></li>
<li><p>Mateusz Woś +</p></li>
<li><p>Mathew Topper +</p></li>
<li><p>Matt Boggess +</p></li>
<li><p>Matt Cooper +</p></li>
<li><p>Matt Williams +</p></li>
<li><p>Matthew Gilbert</p></li>
<li><p>Matthew Roeschke</p></li>
<li><p>Max Kanter</p></li>
<li><p>Michael Odintsov</p></li>
<li><p>Michael Silverstein +</p></li>
<li><p>Michael-J-Ward +</p></li>
<li><p>Mickaël Schoentgen +</p></li>
<li><p>Miguel Sánchez de León Peque +</p></li>
<li><p>Ming Li</p></li>
<li><p>Mitar</p></li>
<li><p>Mitch Negus</p></li>
<li><p>Monson Shao +</p></li>
<li><p>Moonsoo Kim +</p></li>
<li><p>Mortada Mehyar</p></li>
<li><p>Myles Braithwaite</p></li>
<li><p>Nehil Jain +</p></li>
<li><p>Nicholas Musolino +</p></li>
<li><p>Nicolas Dickreuter +</p></li>
<li><p>Nikhil Kumar Mengani +</p></li>
<li><p>Nikoleta Glynatsi +</p></li>
<li><p>Ondrej Kokes</p></li>
<li><p>Pablo Ambrosio +</p></li>
<li><p>Pamela Wu +</p></li>
<li><p>Parfait G +</p></li>
<li><p>Patrick Park +</p></li>
<li><p>Paul</p></li>
<li><p>Paul Ganssle</p></li>
<li><p>Paul Reidy</p></li>
<li><p>Paul van Mulbregt +</p></li>
<li><p>Phillip Cloud</p></li>
<li><p>Pietro Battiston</p></li>
<li><p>Piyush Aggarwal +</p></li>
<li><p>Prabakaran Kumaresshan +</p></li>
<li><p>Pulkit Maloo</p></li>
<li><p>Pyry Kovanen</p></li>
<li><p>Rajib Mitra +</p></li>
<li><p>Redonnet Louis +</p></li>
<li><p>Rhys Parry +</p></li>
<li><p>Rick +</p></li>
<li><p>Robin</p></li>
<li><p>Roei.r +</p></li>
<li><p>RomainSa +</p></li>
<li><p>Roman Imankulov +</p></li>
<li><p>Roman Yurchak +</p></li>
<li><p>Ruijing Li +</p></li>
<li><p>Ryan +</p></li>
<li><p>Ryan Nazareth +</p></li>
<li><p>Rüdiger Busche +</p></li>
<li><p>SEUNG HOON, SHIN +</p></li>
<li><p>Sandrine Pataut +</p></li>
<li><p>Sangwoong Yoon</p></li>
<li><p>Santosh Kumar +</p></li>
<li><p>Saurav Chakravorty +</p></li>
<li><p>Scott McAllister +</p></li>
<li><p>Sean Chan +</p></li>
<li><p>Shadi Akiki +</p></li>
<li><p>Shengpu Tang +</p></li>
<li><p>Shirish Kadam +</p></li>
<li><p>Simon Hawkins +</p></li>
<li><p>Simon Riddell +</p></li>
<li><p>Simone Basso</p></li>
<li><p>Sinhrks</p></li>
<li><p>Soyoun(Rose) Kim +</p></li>
<li><p>Srinivas Reddy Thatiparthy (శ్రీనివాస్ రెడ్డి తాటిపర్తి) +</p></li>
<li><p>Stefaan Lippens +</p></li>
<li><p>Stefano Cianciulli</p></li>
<li><p>Stefano Miccoli +</p></li>
<li><p>Stephen Childs</p></li>
<li><p>Stephen Pascoe</p></li>
<li><p>Steve Baker +</p></li>
<li><p>Steve Cook +</p></li>
<li><p>Steve Dower +</p></li>
<li><p>Stéphan Taljaard +</p></li>
<li><p>Sumin Byeon +</p></li>
<li><p>Sören +</p></li>
<li><p>Tamas Nagy +</p></li>
<li><p>Tanya Jain +</p></li>
<li><p>Tarbo Fukazawa</p></li>
<li><p>Thein Oo +</p></li>
<li><p>Thiago Cordeiro da Fonseca +</p></li>
<li><p>Thierry Moisan</p></li>
<li><p>Thiviyan Thanapalasingam +</p></li>
<li><p>Thomas Lentali +</p></li>
<li><p>Tim D. Smith +</p></li>
<li><p>Tim Swast</p></li>
<li><p>Tom Augspurger</p></li>
<li><p>Tomasz Kluczkowski +</p></li>
<li><p>Tony Tao +</p></li>
<li><p>Triple0 +</p></li>
<li><p>Troels Nielsen +</p></li>
<li><p>Tuhin Mahmud +</p></li>
<li><p>Tyler Reddy +</p></li>
<li><p>Uddeshya Singh</p></li>
<li><p>Uwe L. Korn +</p></li>
<li><p>Vadym Barda +</p></li>
<li><p>Varad Gunjal +</p></li>
<li><p>Victor Maryama +</p></li>
<li><p>Victor Villas</p></li>
<li><p>Vincent La</p></li>
<li><p>Vitória Helena +</p></li>
<li><p>Vu Le</p></li>
<li><p>Vyom Jain +</p></li>
<li><p>Weiwen Gu +</p></li>
<li><p>Wenhuan</p></li>
<li><p>Wes Turner</p></li>
<li><p>Wil Tan +</p></li>
<li><p>William Ayd</p></li>
<li><p>Yeojin Kim +</p></li>
<li><p>Yitzhak Andrade +</p></li>
<li><p>Yuecheng Wu +</p></li>
<li><p>Yuliya Dovzhenko +</p></li>
<li><p>Yury Bayda +</p></li>
<li><p>Zac Hatfield-Dodds +</p></li>
<li><p>aberres +</p></li>
<li><p>aeltanawy +</p></li>
<li><p>ailchau +</p></li>
<li><p>alimcmaster1</p></li>
<li><p>alphaCTzo7G +</p></li>
<li><p>amphy +</p></li>
<li><p>araraonline +</p></li>
<li><p>azure-pipelines[bot] +</p></li>
<li><p>benarthur91 +</p></li>
<li><p>bk521234 +</p></li>
<li><p>cgangwar11 +</p></li>
<li><p>chris-b1</p></li>
<li><p>cxl923cc +</p></li>
<li><p>dahlbaek +</p></li>
<li><p>dannyhyunkim +</p></li>
<li><p>darke-spirits +</p></li>
<li><p>david-liu-brattle-1</p></li>
<li><p>davidmvalente +</p></li>
<li><p>deflatSOCO</p></li>
<li><p>doosik_bae +</p></li>
<li><p>dylanchase +</p></li>
<li><p>eduardo naufel schettino +</p></li>
<li><p>euri10 +</p></li>
<li><p>evangelineliu +</p></li>
<li><p>fengyqf +</p></li>
<li><p>fjdiod</p></li>
<li><p>fl4p +</p></li>
<li><p>fleimgruber +</p></li>
<li><p>gfyoung</p></li>
<li><p>h-vetinari</p></li>
<li><p>harisbal +</p></li>
<li><p>henriqueribeiro +</p></li>
<li><p>himanshu awasthi</p></li>
<li><p>hongshaoyang +</p></li>
<li><p>igorfassen +</p></li>
<li><p>jalazbe +</p></li>
<li><p>jbrockmendel</p></li>
<li><p>jh-wu +</p></li>
<li><p>justinchan23 +</p></li>
<li><p>louispotok</p></li>
<li><p>marcosrullan +</p></li>
<li><p>miker985</p></li>
<li><p>nicolab100 +</p></li>
<li><p>nprad</p></li>
<li><p>nsuresh +</p></li>
<li><p>ottiP</p></li>
<li><p>pajachiet +</p></li>
<li><p>raguiar2 +</p></li>
<li><p>ratijas +</p></li>
<li><p>realead +</p></li>
<li><p>robbuckley +</p></li>
<li><p>saurav2608 +</p></li>
<li><p>sideeye +</p></li>
<li><p>ssikdar1</p></li>
<li><p>svenharris +</p></li>
<li><p>syutbai +</p></li>
<li><p>testvinder +</p></li>
<li><p>thatneat</p></li>
<li><p>tmnhat2001</p></li>
<li><p>tomascassidy +</p></li>
<li><p>tomneep</p></li>
<li><p>topper-123</p></li>
<li><p>vkk800 +</p></li>
<li><p>winlu +</p></li>
<li><p>ym-pett +</p></li>
<li><p>yrhooke +</p></li>
<li><p>ywpark1 +</p></li>
<li><p>zertrin</p></li>
<li><p>zhezherun +</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev" href="v0.24.1.html" title="previous page"> <i class="fa-solid fa-angle-left"></i> <div class="prev-next-info"> <p class="prev-next-subtitle">上一个</p> <p class="prev-next-title">0.24.1 版的新功能 (2019年2月3日)</p> </div> </a> <a class="right-next" href="v0.23.4.html" title="next page"> <div class="prev-next-info"> <p class="prev-next-subtitle">下一个</p> <p class="prev-next-title">0.23.4 版的新功能 (2018年8月3日)</p> </div> <i class="fa-solid fa-angle-right"></i> </a></div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 本页内容</div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#enhancements">改进</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#optional-integer-na-support">可选的整数NA支持</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#accessing-the-values-in-a-series-or-index">访问Series或Index中的值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#pandas-array-a-new-top-level-method-for-creating-arrays"><code>pandas.array</code>: 一个用于创建数组的新顶级方法</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#storing-interval-and-period-data-in-series-and-dataframe">在Series和DataFrame中存储Interval和Period数据</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#joining-with-two-multi-indexes">与两个多重索引连接</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#function-read-html-enhancements"><code>read_html</code>函数改进</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#new-styler-pipe-method">新的 <code>Styler.pipe()</code> 方法</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#renaming-names-in-a-multiindex">重命名MultiIndex中的名称</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#other-enhancements">其他改进</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#backwards-incompatible-api-changes">不向后兼容的API变更</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#increased-minimum-versions-for-dependencies">提高依赖项的最低版本</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#os-linesep-is-used-for-line-terminator-of-dataframe-to-csv"><code>os.linesep</code>用于<code>DataFrame.to_csv</code>的<code>line_terminator</code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#proper-handling-of-np-nan-in-a-string-data-typed-column-with-the-python-engine">Python引擎中字符串数据类型列的<code>np.nan</code>的正确处理</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#parsing-datetime-strings-with-timezone-offsets">解析带有时区偏移量的日期时间字符串</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#parsing-mixed-timezones-with-read-csv">使用 <code>read_csv()</code> 解析混合时区</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#time-values-in-dt-end-time-and-to-timestamp-how-end"><code>dt.end_time</code> 和 <code>to_timestamp(how='end')</code> 中的时间值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#series-unique-for-timezone-aware-data">时区感知数据的Series.unique</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#sparse-data-structure-refactor">稀疏数据结构重构</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#get-dummies-always-returns-a-dataframe"><code>get_dummies()</code> 始终返回DataFrame</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#raise-valueerror-in-dataframe-to-dict-orient-index">在<code>DataFrame.to_dict(orient='index')</code>中引发ValueError</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#tick-dateoffset-normalize-restrictions">Tick DateOffset 规范化限制</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#period-subtraction">周期减法</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#addition-subtraction-of-nan-from-dataframe">从<code>DataFrame</code>中加减<code>NaN</code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#dataframe-comparison-operations-broadcasting-changes">DataFrame比较操作广播变更</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#dataframe-arithmetic-operations-broadcasting-changes">DataFrame算术操作广播变更</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#series-and-index-data-dtype-incompatibilities">Series和Index数据类型不兼容</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#concatenation-changes">连接变更</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#datetimelike-api-changes">日期时间类API变更</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#other-api-changes">其他API变更</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#extension-type-changes">扩展类型变更</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#deprecations">弃用</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#integer-addition-subtraction-with-datetimes-and-timedeltas-is-deprecated">整数与日期时间/时间差的加减运算已弃用</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#passing-integer-data-and-a-timezone-to-datetimeindex">将整数数据和时区传递给DatetimeIndex</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#converting-timezone-aware-series-and-index-to-numpy-arrays">将时区感知Series和Index转换为NumPy数组</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#removal-of-prior-version-deprecations-changes">移除先前版本的弃用/变更</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#performance-improvements">性能改进</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#bug-fixes">错误修复</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#categorical">分类</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#datetimelike">日期时间类</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#timedelta">时间差</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#timezones">时区</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#offsets">偏移量</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#numeric">数值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#conversion">转换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#strings">字符串</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#interval">区间</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#indexing">索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#missing">缺失值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#multiindex">多重索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#io">输入/输出</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#plotting">绘图</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#groupby-resample-rolling">分组/重采样/滚动</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#reshaping">重塑</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#sparse">稀疏</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#style">样式</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#build-changes">构建变更</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#other">其他</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.24.0.html#contributors">贡献者</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/whatsnew/v0.24.0.rst.txt">
      <i class="fa-solid fa-file-lines"></i> 显示源代码</a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="copyright">© 2025, pandas 经由 <a href="https://numfocus.org">NumFOCUS, Inc.</a> 托管于 <a href="https://www.ovhcloud.com">OVHcloud</a>。</p></div>
      
        <div class="footer-item">

  <p class="sphinx-version">使用 <a href="https://sphinx-doc.cn/">Sphinx</a> 8.1.3 创建。<br />
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">使用 <a href="https://pydata.sphinx-doc.cn/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4 构建。</p></div>
      
    </div>
  
</div>

  </footer>
  
</body></html>