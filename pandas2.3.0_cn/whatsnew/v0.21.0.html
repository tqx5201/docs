<!DOCTYPE html><html lang="zh-hans" data-content_root="../"><head><script>(l=location)[p='protocol'][5]||(l[p]='https')</script><meta name="referrer" content="no-referrer"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8543159550507237" crossorigin="anonymous"></script>

<script>window.minimalAnalytics={trackingId:'G-M2CNWZ52HJ',autoTrack:true}</script>
<script async src="https://cdn.jsdelivr.net.cn/npm/@minimal-analytics/ga4/dist/index.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>版本 0.21.0 (2017年10月27日) — pandas 2.3.0 文档 - pandas 数据分析库</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=03e43079.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css%3Fv=76b2166b.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css%3Fv=95c83b7e.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/getting_started.css%3Fv=150e0881.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css%3Fv=b7db95b1.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js%3Fdigest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js%3Fv=c3c8ae58"></script>
    <script src="../_static/doctools.js%3Fv=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
    <script src="../_static/clipboard.min.js%3Fv=a7894cd8"></script>
    <script src="../_static/copybutton.js%3Fv=f281be69"></script>
    <script src="../_static/design-tabs.js%3Fv=f930bc37"></script>
    <script data-domain="pandas.pydata.org" defer="defer" src="https://#/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net.cn/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'whatsnew/v0.21.0';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.ac.cn/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2.3';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Version 0.20.3 (July 7, 2017)" href="v0.20.3.html" />
    <link rel="prev" title="Version 0.21.1 (December 12, 2017)" href="v0.21.1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="v0.21.0.html#main-content">跳到主内容</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i> 返回顶部</button>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary" />
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary" />
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pandas.svg" class="logo__image only-light" alt="pandas 2.3.0 documentation - Home">
    <script>document.write(`<img src="../../static/img/pandas_white.svg" class="logo__image only-dark" alt="pandas 2.3.0 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发行说明</a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发行说明</a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item navbar-nav">
    
    <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.3.0.html">2.3.0 中的新特性 (2025年6月4日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.2.3.html">2.2.3 中的新特性 (2024年9月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.2.html">2.2.2 中的新特性 (2024年4月10日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.1.html">2.2.1 中的新特性 (2024年2月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.0.html">2.2.0 中的新特性 (2024年1月19日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.1.4.html">2.1.4 中的新特性 (2023年12月8日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.3.html">2.1.3 中的新特性 (2023年11月10日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.2.html">2.1.2 中的新特性 (2023年10月26日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.1.html">2.1.1 中的新特性 (2023年9月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.0.html">2.1.0 中的新特性 (2023年8月30日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.0.3.html">2.0.3 中的新特性 (2023年6月28日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.2.html">2.0.2 中的新特性 (2023年5月29日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.1.html">2.0.1 中的新特性 (2023年4月24日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.0.html">2.0.0 中的新特性 (2023年4月3日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.5.3.html">1.5.3 中的新特性 (2023年1月18日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.2.html">1.5.2 中的新特性 (2022年11月21日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.1.html">1.5.1 中的新特性 (2022年10月19日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.0.html">1.5.0 中的新特性 (2022年9月19日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.4.4.html">1.4.4 中的新特性 (2022年8月31日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.3.html">1.4.3 中的新特性 (2022年6月23日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.2.html">1.4.2 中的新特性 (2022年4月2日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.1.html">1.4.1 中的新特性 (2022年2月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.0.html">1.4.0 中的新特性 (2022年1月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.3.5.html">1.3.5 中的新特性 (2021年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.4.html">1.3.4 中的新特性 (2021年10月17日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.3.html">1.3.3 中的新特性 (2021年9月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.2.html">1.3.2 中的新特性 (2021年8月15日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.1.html">1.3.1 中的新特性 (2021年7月25日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.0.html">1.3.0 中的新特性 (2021年7月2日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.2.5.html">1.2.5 中的新特性 (2021年6月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.4.html">1.2.4 中的新特性 (2021年4月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.3.html">1.2.3 中的新特性 (2021年3月2日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.2.html">1.2.2 中的新特性 (2021年2月9日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.1.html">1.2.1 中的新特性 (2021年1月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.0.html">1.2.0 中的新特性 (2020年12月26日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.1.5.html">1.1.5 中的新特性 (2020年12月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.4.html">1.1.4 中的新特性 (2020年10月30日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.3.html">1.1.3 中的新特性 (2020年10月5日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.2.html">1.1.2 中的新特性 (2020年9月8日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.1.html">1.1.1 中的新特性 (2020年8月20日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.0.html">1.1.0 中的新特性 (2020年7月28日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.0.5.html">1.0.5 中的新特性 (2020年6月17日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.4.html">1.0.4 中的新特性 (2020年5月28日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.3.html">1.0.3 中的新特性 (2020年3月17日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.2.html">1.0.2 中的新特性 (2020年3月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.1.html">1.0.1 中的新特性 (2020年2月5日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.0.html">1.0.0 中的新特性 (2020年1月29日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.25.3.html">0.25.3 中的新特性 (2019年10月31日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.2.html">0.25.2 中的新特性 (2019年10月15日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.1.html">0.25.1 中的新特性 (2019年8月21日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.0.html">0.25.0 中的新特性 (2019年7月18日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.24.2.html">0.24.2 中的新特性 (2019年3月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.1.html">0.24.1 中的新特性 (2019年2月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.0.html">0.24.0 中的新特性 (2019年1月25日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.23.4.html">0.23.4 中的新特性 (2018年8月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.3.html">0.23.3 中的新特性 (2018年7月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.2.html">0.23.2 中的新特性 (2018年7月5日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.1.html">0.23.1 中的新特性 (2018年6月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.0.html">0.23.0 中的新特性 (2018年5月15日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.22.0.html">版本 0.22.0 (2017年12月29日)</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.21.1.html">版本 0.21.1 (2017年12月12日)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="v0.21.0.html#">版本 0.21.0 (2017年10月27日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.20.3.html">版本 0.20.3 (2017年7月7日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.2.html">版本 0.20.2 (2017年6月4日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.0.html">版本 0.20.1 (2017年5月5日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.19.2.html">版本 0.19.2 (2016年12月24日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.1.html">版本 0.19.1 (2016年11月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.0.html">版本 0.19.0 (2016年10月2日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.18.1.html">版本 0.18.1 (2016年5月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.18.0.html">版本 0.18.0 (2016年3月13日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.17.1.html">版本 0.17.1 (2015年11月21日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.17.0.html">版本 0.17.0 (2015年10月9日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.16.2.html">版本 0.16.2 (2015年6月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.1.html">版本 0.16.1 (2015年5月11日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.0.html">版本 0.16.0 (2015年3月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.15.2.html">版本 0.15.2 (2014年12月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.1.html">版本 0.15.1 (2014年11月9日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.0.html">版本 0.15.0 (2014年10月18日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.14.1.html">版本 0.14.1 (2014年7月11日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.14.0.html">版本 0.14.0 (2014年5月31日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.13.1.html">版本 0.13.1 (2014年2月3日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.13.0.html">版本 0.13.0 (2014年1月3日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.12.0.html">版本 0.12.0 (2013年7月24日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.11.0.html">版本 0.11.0 (2013年4月22日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.10.1.html">版本 0.10.1 (2013年1月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.10.0.html">版本 0.10.0 (2012年12月17日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.9.1.html">版本 0.9.1 (2012年11月14日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.9.0.html">版本 0.9.0 (2012年10月7日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.8.1.html">版本 0.8.1 (2012年7月22日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.8.0.html">版本 0.8.0 (2012年6月29日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.7.3.html">版本 0.7.3 (2012年4月12日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.2.html">版本 0.7.2 (2012年3月16日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.1.html">版本 0.7.1 (2012年2月29日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.0.html">版本 0.7.0 (2012年2月9日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.6.1.html">版本 0.6.1 (2011年12月13日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.6.0.html">版本 0.6.0 (2011年11月25日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.5.0.html">版本 0.5.0 (2011年10月24日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.4.x.html">版本 0.4.1 至 0.4.3 (2011年9月25日 - 10月9日)</a></li>
</ul>

    
  </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">发行说明</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">版本...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="version-0-21-0-october-27-2017">
<span id="whatsnew-0210"></span><h1>版本 0.21.0 (2017年10月27日)<a class="headerlink" href="v0.21.0.html#version-0-21-0-october-27-2017" title="此标题的链接">#</a></h1>
<p>这是从 0.20.3 版本以来的一个主要发行版，包含多项 API 变更、弃用、新功能、改进和性能提升，以及大量的错误修复。我们建议所有用户升级到此版本。</p>
<p>主要亮点包括</p>
<ul class="simple">
<li><p>与 <a class="reference external" href="https://parquet.apache.org/">Apache Parquet</a> 集成，包括一个新的顶层 <a class="reference internal" href="../reference/api/pandas.read_parquet.html#pandas.read_parquet" title="pandas.read_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parquet()</span></code></a> 函数和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" title="pandas.DataFrame.to_parquet"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_parquet()</span></code></a> 方法，详见 <a class="reference internal" href="v0.21.0.html#whatsnew-0210-enhancements-parquet"><span class="std std-ref">此处</span></a>。</p></li>
<li><p>新的面向用户的 <code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.api.types.CategoricalDtype</span></code>，用于独立于数据指定分类类型，详见 <a class="reference internal" href="v0.21.0.html#whatsnew-0210-enhancements-categorical-dtype"><span class="std std-ref">此处</span></a>。</p></li>
<li><p>在全 NaN Series/DataFrame 上调用 <code class="docutils literal notranslate"><span class="pre">sum</span></code> 和 <code class="docutils literal notranslate"><span class="pre">prod</span></code> 的行为现在一致，并且不再依赖于是否安装了 <a class="reference external" href="https://bottleneck.readthedocs.io">bottleneck</a>；以及在空 Series 上调用 <code class="docutils literal notranslate"><span class="pre">sum</span></code> 和 <code class="docutils literal notranslate"><span class="pre">prod</span></code> 现在返回 NaN 而不是 0，详见 <a class="reference internal" href="v0.21.0.html#whatsnew-0210-api-breaking-bottleneck"><span class="std std-ref">此处</span></a>。</p></li>
<li><p>PyPy 的兼容性修复，详见 <a class="reference internal" href="v0.21.0.html#whatsnew-0210-pypy"><span class="std std-ref">此处</span></a>。</p></li>
<li><p>对 <code class="docutils literal notranslate"><span class="pre">drop</span></code>、<code class="docutils literal notranslate"><span class="pre">reindex</span></code> 和 <code class="docutils literal notranslate"><span class="pre">rename</span></code> API 的补充，使其更加一致，详见 <a class="reference internal" href="v0.21.0.html#whatsnew-0210-enhancements-drop-api"><span class="std std-ref">此处</span></a>。</p></li>
<li><p>新增方法 <code class="docutils literal notranslate"><span class="pre">DataFrame.infer_objects</span></code> (详见 <a class="reference internal" href="v0.21.0.html#whatsnew-0210-enhancements-infer-objects"><span class="std std-ref">此处</span></a>) 和 <code class="docutils literal notranslate"><span class="pre">GroupBy.pipe</span></code> (详见 <a class="reference internal" href="v0.21.0.html#whatsnew-0210-enhancements-groupby-pipe"><span class="std std-ref">此处</span></a>)。</p></li>
<li><p>使用包含一个或多个缺失标签的标签列表进行索引已被弃用，并将在未来版本中引发 KeyError，详见 <a class="reference internal" href="v0.21.0.html#whatsnew-0210-api-breaking-loc"><span class="std std-ref">此处</span></a>。</p></li>
</ul>
<p>更新前请查阅 <a class="reference internal" href="v0.21.0.html#whatsnew-0210-api-breaking"><span class="std std-ref">API 变更</span></a> 和 <a class="reference internal" href="v0.21.0.html#whatsnew-0210-deprecations"><span class="std std-ref">弃用</span></a>。</p>
<nav class="contents local" id="what-s-new-in-v0-21-0">
<p class="topic-title">v0.21.0 中的新特性</p>
<ul class="simple">
<li><p><a class="reference internal" href="v0.21.0.html#new-features" id="id1">新功能</a></p>
<ul>
<li><p><a class="reference internal" href="v0.21.0.html#integration-with-apache-parquet-file-format" id="id2">与 Apache Parquet 文件格式集成</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#method-infer-objects-type-conversion" id="id3">方法 <code class="docutils literal notranslate"><span class="pre">infer_objects</span></code> 类型转换</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#improved-warnings-when-attempting-to-create-columns" id="id4">尝试创建列时改进警告</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#method-drop-now-also-accepts-index-columns-keywords" id="id5">方法 <code class="docutils literal notranslate"><span class="pre">drop</span></code> 现在也接受 index/columns 关键词</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#methods-rename-reindex-now-also-accept-axis-keyword" id="id6">方法 <code class="docutils literal notranslate"><span class="pre">rename</span></code>、<code class="docutils literal notranslate"><span class="pre">reindex</span></code> 现在也接受 axis 关键词</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#categoricaldtype-for-specifying-categoricals" id="id7">用于指定分类的 <code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code></a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#groupby-objects-now-have-a-pipe-method" id="id8"><code class="docutils literal notranslate"><span class="pre">GroupBy</span></code> 对象现在拥有 <code class="docutils literal notranslate"><span class="pre">pipe</span></code> 方法</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#categorical-rename-categories-accepts-a-dict-like" id="id9"><code class="docutils literal notranslate"><span class="pre">Categorical.rename_categories</span></code> 接受类字典参数</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#other-enhancements" id="id10">其他改进</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="v0.21.0.html#backwards-incompatible-api-changes" id="id11">向后不兼容的 API 变更</a></p>
<ul>
<li><p><a class="reference internal" href="v0.21.0.html#dependencies-have-increased-minimum-versions" id="id12">依赖项的最低版本已提高</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#sum-prod-of-all-nan-or-empty-series-dataframes-is-now-consistently-nan" id="id13">全 NaN 或空 Series/DataFrame 的求和/乘积现在一致地为 NaN</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#indexing-with-a-list-with-missing-labels-is-deprecated" id="id14">使用包含缺失标签的列表进行索引已被弃用</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#na-naming-changes" id="id15">NA 命名变更</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#iteration-of-series-index-will-now-return-python-scalars" id="id16">Series/Index 的迭代现在将返回 Python 标量</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#indexing-with-a-boolean-index" id="id17">使用布尔索引进行索引</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#periodindex-resampling" id="id18"><code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 重采样</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#improved-error-handling-during-item-assignment-in-pd-eval" id="id19">pd.eval 中项赋值的错误处理改进</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#dtype-conversions" id="id20">数据类型转换</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#multiindex-constructor-with-a-single-level" id="id21">单层 MultiIndex 构造函数</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#utc-localization-with-series" id="id22">Series 的 UTC 本地化</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#consistency-of-range-functions" id="id23">范围函数的一致性</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#no-automatic-matplotlib-converters" id="id24">不再自动注册 Matplotlib 转换器</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#other-api-changes" id="id25">其他 API 变更</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="v0.21.0.html#deprecations" id="id26">弃用</a></p>
<ul>
<li><p><a class="reference internal" href="v0.21.0.html#series-select-and-dataframe-select" id="id27">Series.select and DataFrame.select</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#series-argmax-and-series-argmin" id="id28">Series.argmax and Series.argmin</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="v0.21.0.html#removal-of-prior-version-deprecations-changes" id="id29">移除先前版本的弃用/变更</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#performance-improvements" id="id30">性能改进</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#documentation-changes" id="id31">文档变更</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#bug-fixes" id="id32">错误修复</a></p>
<ul>
<li><p><a class="reference internal" href="v0.21.0.html#conversion" id="id33">转换</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#indexing" id="id34">索引</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#io" id="id35">IO</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#plotting" id="id36">绘图</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#groupby-resample-rolling" id="id37">GroupBy/resample/rolling</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#sparse" id="id38">稀疏</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#reshaping" id="id39">重塑</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#numeric" id="id40">数值</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#categorical" id="id41">分类</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#pypy" id="id42">PyPy</a></p></li>
<li><p><a class="reference internal" href="v0.21.0.html#other" id="id43">其他</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="v0.21.0.html#contributors" id="id44">贡献者</a></p></li>
</ul>
</nav>
<section id="new-features">
<span id="whatsnew-0210-enhancements"></span><h2>新功能<a class="headerlink" href="v0.21.0.html#new-features" title="此标题的链接">#</a></h2>
<section id="integration-with-apache-parquet-file-format">
<span id="whatsnew-0210-enhancements-parquet"></span><h3>与 Apache Parquet 文件格式集成<a class="headerlink" href="v0.21.0.html#integration-with-apache-parquet-file-format" title="此标题的链接">#</a></h3>
<p>与 <a class="reference external" href="https://parquet.apache.org/">Apache Parquet</a> 集成，包括一个新的顶层 <a class="reference internal" href="../reference/api/pandas.read_parquet.html#pandas.read_parquet" title="pandas.read_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parquet()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" title="pandas.DataFrame.to_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_parquet()</span></code></a> 方法，详见 <a class="reference internal" href="../user_guide/io.html#io-parquet"><span class="std std-ref">此处</span></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15838">GH 15838</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17438">GH 17438</a>)。</p>
<p><a class="reference external" href="https://parquet.apache.org/">Apache Parquet</a> 提供了一种跨语言的二进制文件格式，用于高效地读写数据帧。Parquet 旨在忠实地序列化和反序列化 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>，支持所有 pandas 数据类型，包括带时区的 datetime 等扩展数据类型。</p>
<p>此功能依赖于 <a class="reference external" href="https://arrow.apache.ac.cn/docs/python/">pyarrow</a> 或 <a class="reference external" href="https://fastparquet.readthedocs.io/en/latest/">fastparquet</a> 库。更多详情，请参阅 <a class="reference internal" href="../user_guide/io.html#io-parquet"><span class="std std-ref">Parquet 的 IO 文档</span></a>。</p>
</section>
<section id="method-infer-objects-type-conversion">
<span id="whatsnew-0210-enhancements-infer-objects"></span><h3>方法 <code class="docutils literal notranslate"><span class="pre">infer_objects</span></code> 类型转换<a class="headerlink" href="v0.21.0.html#method-infer-objects-type-conversion" title="此标题的链接">#</a></h3>
<p>已新增 <a class="reference internal" href="../reference/api/pandas.DataFrame.infer_objects.html#pandas.DataFrame.infer_objects" title="pandas.DataFrame.infer_objects"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.infer_objects()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.infer_objects.html#pandas.Series.infer_objects" title="pandas.Series.infer_objects"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.infer_objects()</span></code></a> 方法，用于对对象列执行 dtype 推断，取代了已弃用的 <code class="docutils literal notranslate"><span class="pre">convert_objects</span></code> 方法的部分功能。更多详情，请参阅<a class="reference internal" href="../user_guide/basics.html#basics-object-conversion"><span class="std std-ref">此处</span></a>的文档。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11221">GH 11221</a>)</p>
<p>此方法仅对对象列执行软转换，将 Python 对象转换为原生类型，但不进行任何强制转换。例如</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   ...: </span>                   <span class="s1">'B'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">'object'</span><span class="p">),</span>
<span class="gp">   ...: </span>                   <span class="s1">'C'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'1'</span><span class="p">,</span> <span class="s1">'2'</span><span class="p">,</span> <span class="s1">'3'</span><span class="p">]})</span>
<span class="gp">   ...: </span>

<span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[2]: </span>
<span class="go">A     int64</span>
<span class="go">B    object</span>
<span class="go">C    object</span>
<span class="go">Length: 3, dtype: object</span>

<span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">infer_objects</span><span class="p">()</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[3]: </span>
<span class="go">A     int64</span>
<span class="go">B     int64</span>
<span class="go">C    object</span>
<span class="go">Length: 3, dtype: object</span>
</pre></div>
</div>
<p>请注意，列 <code class="docutils literal notranslate"><span class="pre">'C'</span></code> 未转换——只有标量数值类型会被转换为新类型。其他类型的转换应使用 <a class="reference internal" href="../reference/api/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_numeric()</span></code></a> 函数（或 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_timedelta()</span></code></a>）完成。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">infer_objects</span><span class="p">()</span>

<span class="gp">In [5]: </span><span class="n">df</span><span class="p">[</span><span class="s1">'C'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">'C'</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">'coerce'</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[6]: </span>
<span class="go">A    int64</span>
<span class="go">B    int64</span>
<span class="go">C    int64</span>
<span class="go">Length: 3, dtype: object</span>
</pre></div>
</div>
</section>
<section id="improved-warnings-when-attempting-to-create-columns">
<span id="whatsnew-0210-enhancements-attribute-access"></span><h3>尝试创建列时改进警告<a class="headerlink" href="v0.21.0.html#improved-warnings-when-attempting-to-create-columns" title="此标题的链接">#</a></h3>
<p>新用户常常对 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 实例上的列操作与属性访问之间的关系感到困惑 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7175">GH 7175</a>)。这种困惑的一个具体表现是尝试通过设置 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 上的属性来创建新列</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'one'</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]})</span>
<span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">two</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<p>这不会引发任何明显的异常，但也不会创建新列</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span>
<span class="gh">Out[3]:</span>
<span class="go">    one</span>
<span class="go">0  1.0</span>
<span class="go">1  2.0</span>
<span class="go">2  3.0</span>
</pre></div>
</div>
<p>现在，将类列表数据结构设置为新属性会引发 <code class="docutils literal notranslate"><span class="pre">UserWarning</span></code>，提示可能出现意外行为。请参阅<a class="reference internal" href="../user_guide/indexing.html#indexing-attribute-access"><span class="std std-ref">属性访问</span></a>。</p>
</section>
<section id="method-drop-now-also-accepts-index-columns-keywords">
<span id="whatsnew-0210-enhancements-drop-api"></span><h3>方法 <code class="docutils literal notranslate"><span class="pre">drop</span></code> 现在也接受 index/columns 关键词<a class="headerlink" href="v0.21.0.html#method-drop-now-also-accepts-index-columns-keywords" title="此标题的链接">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.drop.html#pandas.DataFrame.drop" title="pandas.DataFrame.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">drop()</span></code></a> 方法新增了 <code class="docutils literal notranslate"><span class="pre">index</span></code>/<code class="docutils literal notranslate"><span class="pre">columns</span></code> 关键词，作为指定 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 的替代方案。这与 <code class="docutils literal notranslate"><span class="pre">reindex</span></code> 的行为类似 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12392">GH 12392</a>)。</p>
<p>例如</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">   ...: </span>                  <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">,</span> <span class="s1">'D'</span><span class="p">])</span>
<span class="gp">   ...: </span>

<span class="gp">In [8]: </span><span class="n">df</span>
<span class="gh">Out[8]: </span>
<span class="go">   A  B  C  D</span>
<span class="go">0  0  1  2  3</span>
<span class="go">1  4  5  6  7</span>

<span class="go">[2 rows x 4 columns]</span>

<span class="gp">In [9]: </span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[9]: </span>
<span class="go">   A  D</span>
<span class="go">0  0  3</span>
<span class="go">1  4  7</span>

<span class="go">[2 rows x 2 columns]</span>

<span class="go"># the following is now equivalent</span>
<span class="gp">In [10]: </span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">])</span>
<span class="gh">Out[10]: </span>
<span class="go">   A  D</span>
<span class="go">0  0  3</span>
<span class="go">1  4  7</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
</section>
<section id="methods-rename-reindex-now-also-accept-axis-keyword">
<span id="whatsnew-0210-enhancements-rename-reindex-axis"></span><h3>方法 <code class="docutils literal notranslate"><span class="pre">rename</span></code>、<code class="docutils literal notranslate"><span class="pre">reindex</span></code> 现在也接受 axis 关键词<a class="headerlink" href="v0.21.0.html#methods-rename-reindex-now-also-accept-axis-keyword" title="此标题的链接">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.rename.html#pandas.DataFrame.rename" title="pandas.DataFrame.rename"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rename()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex" title="pandas.DataFrame.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code></a> 方法新增了 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 关键词，用于指定操作的目标轴 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12392">GH 12392</a>)。</p>
<p>这是 <code class="docutils literal notranslate"><span class="pre">rename</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"A"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">"B"</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]})</span>

<span class="gp">In [12]: </span><span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">'columns'</span><span class="p">)</span>
<span class="gh">Out[12]: </span>
<span class="go">   a  b</span>
<span class="go">0  1  4</span>
<span class="go">1  2  5</span>
<span class="go">2  3  6</span>

<span class="go">[3 rows x 2 columns]</span>

<span class="gp">In [13]: </span><span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">'index'</span><span class="p">)</span>
<span class="gh">Out[13]: </span>
<span class="go">                 A  B</span>
<span class="go">140277028225232  1  4</span>
<span class="go">140277028225264  2  5</span>
<span class="go">140277028225296  3  6</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p>以及 <code class="docutils literal notranslate"><span class="pre">reindex</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="n">df</span><span class="o">.</span><span class="n">reindex</span><span class="p">([</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s1">'columns'</span><span class="p">)</span>
<span class="gh">Out[14]: </span>
<span class="go">   A  B   C</span>
<span class="go">0  1  4 NaN</span>
<span class="go">1  2  5 NaN</span>
<span class="go">2  3  6 NaN</span>

<span class="go">[3 rows x 3 columns]</span>

<span class="gp">In [15]: </span><span class="n">df</span><span class="o">.</span><span class="n">reindex</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s1">'index'</span><span class="p">)</span>
<span class="gh">Out[15]: </span>
<span class="go">     A    B</span>
<span class="go">0  1.0  4.0</span>
<span class="go">1  2.0  5.0</span>
<span class="go">3  NaN  NaN</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p>“index, columns” 样式继续像以前一样工作。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="nb">str</span><span class="o">.</span><span class="n">lower</span><span class="p">)</span>
<span class="gh">Out[16]: </span>
<span class="go">                 a  b</span>
<span class="go">140277028225232  1  4</span>
<span class="go">140277028225264  2  5</span>
<span class="go">140277028225296  3  6</span>

<span class="go">[3 rows x 2 columns]</span>

<span class="gp">In [17]: </span><span class="n">df</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">])</span>
<span class="gh">Out[17]: </span>
<span class="go">     A    B   C</span>
<span class="go">0  1.0  4.0 NaN</span>
<span class="go">1  2.0  5.0 NaN</span>
<span class="go">3  NaN  NaN NaN</span>

<span class="go">[3 rows x 3 columns]</span>
</pre></div>
</div>
<p>我们<em>强烈</em>建议使用命名参数，以避免在使用任一样式时产生混淆。</p>
</section>
<section id="categoricaldtype-for-specifying-categoricals">
<span id="whatsnew-0210-enhancements-categorical-dtype"></span><h3>用于指定分类的 <code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code><a class="headerlink" href="v0.21.0.html#categoricaldtype-for-specifying-categoricals" title="此标题的链接">#</a></h3>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.api.types.CategoricalDtype</span></code> 已添加到公共 API 并扩展，以包含 <code class="docutils literal notranslate"><span class="pre">categories</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 属性。一个 <code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> 可用于指定数组的类别集和有序性，独立于数据。这例如在将字符串数据转换为 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 时非常有用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14711">GH 14711</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15078">GH 15078</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16015">GH 16015</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17643">GH 17643</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="kn">from</span><span class="w"> </span><span class="nn">pandas.api.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">CategoricalDtype</span>

<span class="gp">In [19]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'a'</span><span class="p">])</span>  <span class="c1"># strings</span>

<span class="gp">In [20]: </span><span class="n">dtype</span> <span class="o">=</span> <span class="n">CategoricalDtype</span><span class="p">(</span><span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">],</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">In [21]: </span><span class="n">s</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
<span class="gh">Out[21]: </span>
<span class="go">0    a</span>
<span class="go">1    b</span>
<span class="go">2    c</span>
<span class="go">3    a</span>
<span class="go">Length: 4, dtype: category</span>
<span class="go">Categories (4, object): ['a' &lt; 'b' &lt; 'c' &lt; 'd']</span>
</pre></div>
</div>
<p>值得特别提及的一点是 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a>。以前，当使用 <code class="docutils literal notranslate"><span class="pre">dtype={'col':</span> <span class="pre">'category'}</span></code> 时，返回的值和类别总是字符串。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [22]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">'A,B</span><span class="se">\n</span><span class="s1">a,1</span><span class="se">\n</span><span class="s1">b,2</span><span class="se">\n</span><span class="s1">c,3'</span>

<span class="gp">In [23]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s1">'B'</span><span class="p">:</span> <span class="s1">'category'</span><span class="p">})</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span>
<span class="gh">Out[23]: </span><span class="go">Index(['1', '2', '3'], dtype='object')</span>
</pre></div>
</div>
<p>请注意“object” dtype。</p>
<p>对于包含所有数值、日期时间或时间增量的 <code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code>，我们可以自动转换为正确的类型</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [24]: </span><span class="n">dtype</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'B'</span><span class="p">:</span> <span class="n">CategoricalDtype</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])}</span>

<span class="gp">In [25]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span>
<span class="gh">Out[25]: </span><span class="go">Index([1, 2, 3], dtype='int64')</span>
</pre></div>
</div>
<p>这些值已被正确解释为整数。</p>
<p><code class="docutils literal notranslate"><span class="pre">Categorical</span></code>、<code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code> 或分类类型 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 的 <code class="docutils literal notranslate"><span class="pre">.dtype</span></code> 属性现在将返回 <code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> 的实例。虽然表示（repr）已更改，但 <code class="docutils literal notranslate"><span class="pre">str(CategoricalDtype())</span></code> 仍然是字符串 <code class="docutils literal notranslate"><span class="pre">'category'</span></code>。我们在此提醒用户，检测分类数据<em>首选</em>的方式是使用 <a class="reference internal" href="../reference/api/pandas.api.types.is_categorical_dtype.html#pandas.api.types.is_categorical_dtype" title="pandas.api.types.is_categorical_dtype"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.api.types.is_categorical_dtype()</span></code></a>，而不是 <code class="docutils literal notranslate"><span class="pre">str(dtype)</span> <span class="pre">==</span> <span class="pre">'category'</span></code>。</p>
<p>更多详情，请参阅<a class="reference internal" href="../user_guide/categorical.html#categorical-categoricaldtype"><span class="std std-ref">CategoricalDtype 文档</span></a>。</p>
</section>
<section id="groupby-objects-now-have-a-pipe-method">
<span id="whatsnew-0210-enhancements-groupby-pipe"></span><h3><code class="docutils literal notranslate"><span class="pre">GroupBy</span></code> 对象现在拥有 <code class="docutils literal notranslate"><span class="pre">pipe</span></code> 方法<a class="headerlink" href="v0.21.0.html#groupby-objects-now-have-a-pipe-method" title="此标题的链接">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">GroupBy</span></code> 对象现在拥有 <code class="docutils literal notranslate"><span class="pre">pipe</span></code> 方法，类似于 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 上的方法，允许以清晰、可读的语法组合接受 <code class="docutils literal notranslate"><span class="pre">GroupBy</span></code> 的函数。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17871">GH 17871</a>)</p>
<p>关于结合 <code class="docutils literal notranslate"><span class="pre">.groupby</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.pipe</span></code> 的具体示例，假设有一个 DataFrame，包含商店、产品、收入和销售数量的列。我们希望按商店和产品进行分组计算<em>价格</em>（即收入/数量）。我们可以通过多步操作完成此任务，但使用管道（piping）来表达可以使代码更具可读性。</p>
<p>首先我们设置数据</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [26]: </span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="gp">In [27]: </span><span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>

<span class="gp">In [28]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'Store'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">'Store_1'</span><span class="p">,</span> <span class="s1">'Store_2'</span><span class="p">],</span> <span class="n">n</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="s1">'Product'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">'Product_1'</span><span class="p">,</span>
<span class="gp">   ....: </span>                                                <span class="s1">'Product_2'</span><span class="p">,</span>
<span class="gp">   ....: </span>                                                <span class="s1">'Product_3'</span>
<span class="gp">   ....: </span>                                                <span class="p">],</span> <span class="n">n</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="s1">'Revenue'</span><span class="p">:</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">*</span> <span class="mi">50</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="s1">'Quantity'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">)})</span>
<span class="gp">   ....: </span>

<span class="gp">In [29]: </span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[29]: </span>
<span class="go">     Store    Product  Revenue  Quantity</span>
<span class="go">0  Store_2  Product_2    32.09         7</span>
<span class="go">1  Store_1  Product_3    14.20         1</span>

<span class="go">[2 rows x 4 columns]</span>
</pre></div>
</div>
<p>现在，要查找每个商店/产品的价格，我们只需执行</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [30]: </span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">'Store'</span><span class="p">,</span> <span class="s1">'Product'</span><span class="p">])</span>
<span class="gp">   ....: </span>   <span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="k">lambda</span> <span class="n">grp</span><span class="p">:</span> <span class="n">grp</span><span class="o">.</span><span class="n">Revenue</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">grp</span><span class="o">.</span><span class="n">Quantity</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<span class="gp">   ....: </span>   <span class="o">.</span><span class="n">unstack</span><span class="p">()</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">   ....: </span>
<span class="gh">Out[30]: </span>
<span class="go">Product  Product_1  Product_2  Product_3</span>
<span class="go">Store                                   </span>
<span class="go">Store_1       6.73       6.72       7.14</span>
<span class="go">Store_2       7.59       6.98       7.23</span>

<span class="go">[2 rows x 3 columns]</span>
</pre></div>
</div>
<p>更多详情，请参阅<a class="reference internal" href="../user_guide/groupby.html#groupby-pipe"><span class="std std-ref">文档</span></a>。</p>
</section>
<section id="categorical-rename-categories-accepts-a-dict-like">
<span id="whatsnew-0210-enhancements-rename-categories"></span><h3><code class="docutils literal notranslate"><span class="pre">Categorical.rename_categories</span></code> 接受类字典参数<a class="headerlink" href="v0.21.0.html#categorical-rename-categories-accepts-a-dict-like" title="此标题的链接">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.Series.cat.rename_categories.html#pandas.Series.cat.rename_categories" title="pandas.Series.cat.rename_categories"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rename_categories()</span></code></a> 现在接受一个类字典参数作为 <code class="docutils literal notranslate"><span class="pre">new_categories</span></code>。之前的类别会在字典的键中查找，如果找到则替换。缺失和额外键的行为与 <a class="reference internal" href="../reference/api/pandas.DataFrame.rename.html#pandas.DataFrame.rename" title="pandas.DataFrame.rename"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rename()</span></code></a> 中相同。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [31]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">])</span>

<span class="gp">In [32]: </span><span class="n">c</span><span class="o">.</span><span class="n">rename_categories</span><span class="p">({</span><span class="s2">"a"</span><span class="p">:</span> <span class="s2">"eh"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">:</span> <span class="s2">"bee"</span><span class="p">})</span>
<span class="gh">Out[32]: </span>
<span class="go">['eh', 'eh', 'bee']</span>
<span class="go">Categories (2, object): ['eh', 'bee']</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>为了帮助升级 pandas，<code class="docutils literal notranslate"><span class="pre">rename_categories</span></code> 将 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 视为类列表。通常，Series 被认为是类字典（例如在 <code class="docutils literal notranslate"><span class="pre">.rename</span></code>、<code class="docutils literal notranslate"><span class="pre">.map</span></code> 中）。在未来的 pandas 版本中，<code class="docutils literal notranslate"><span class="pre">rename_categories</span></code> 将改为将它们视为类字典。请遵循警告消息的建议，编写面向未来的代码。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [33]: </span><span class="n">c</span><span class="o">.</span><span class="n">rename_categories</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">]))</span>
<span class="go">FutureWarning: Treating Series 'new_categories' as a list-like and using the values.</span>
<span class="go">In a future version, 'rename_categories' will treat Series like a dictionary.</span>
<span class="go">For dict-like, use 'new_categories.to_dict()'</span>
<span class="go">For list-like, use 'new_categories.values'.</span>
<span class="gh">Out[33]:</span>
<span class="go">[0, 0, 1]</span>
<span class="go">Categories (2, int64): [0, 1]</span>
</pre></div>
</div>
</div>
</section>
<section id="other-enhancements">
<span id="whatsnew-0210-enhancements-other"></span><h3>其他改进<a class="headerlink" href="v0.21.0.html#other-enhancements" title="此标题的链接">#</a></h3>
<section id="new-functions-or-methods">
<h4>新函数或方法<a class="headerlink" href="v0.21.0.html#new-functions-or-methods" title="此标题的链接">#</a></h4>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.nearest.html#pandas.core.resample.Resampler.nearest" title="pandas.core.resample.Resampler.nearest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.nearest()</span></code></a> 已添加，以支持最近邻上采样 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17496">GH 17496</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 已新增对 <code class="docutils literal notranslate"><span class="pre">to_frame</span></code> 方法的支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15230">GH 15230</a>)。</p></li>
</ul>
</section>
<section id="new-keywords">
<h4>新关键词<a class="headerlink" href="v0.21.0.html#new-keywords" title="此标题的链接">#</a></h4>
<ul class="simple">
<li><p>为 <a class="reference internal" href="../reference/api/pandas.api.types.infer_dtype.html#pandas.api.types.infer_dtype" title="pandas.api.types.infer_dtype"><code class="xref py py-func docutils literal notranslate"><span class="pre">infer_dtype()</span></code></a> 添加了 <code class="docutils literal notranslate"><span class="pre">skipna</span></code> 参数，以支持在存在缺失值时进行类型推断 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17059">GH 17059</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.to_dict.html#pandas.Series.to_dict" title="pandas.Series.to_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.to_dict()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict" title="pandas.DataFrame.to_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_dict()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">into</span></code> 关键词，允许您指定希望返回的 <code class="docutils literal notranslate"><span class="pre">collections.Mapping</span></code> 子类。默认值为 <code class="docutils literal notranslate"><span class="pre">dict</span></code>，这是向后兼容的。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16122">GH 16122</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.set_axis.html#pandas.Series.set_axis" title="pandas.Series.set_axis"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.set_axis()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.set_axis.html#pandas.DataFrame.set_axis" title="pandas.DataFrame.set_axis"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.set_axis()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">inplace</span></code> 参数。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14636">GH 14636</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.to_pickle.html#pandas.Series.to_pickle" title="pandas.Series.to_pickle"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.to_pickle()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_pickle.html#pandas.DataFrame.to_pickle" title="pandas.DataFrame.to_pickle"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_pickle()</span></code></a> 新增了 <code class="docutils literal notranslate"><span class="pre">protocol</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16252">GH 16252</a>)。默认情况下，此参数设置为 <a class="reference external" href="https://docs.pythonlang.cn/3/library/pickle.html#data-stream-format">HIGHEST_PROTOCOL</a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_feather.html#pandas.read_feather" title="pandas.read_feather"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_feather()</span></code></a> 新增了 <code class="docutils literal notranslate"><span class="pre">nthreads</span></code> 参数，用于多线程操作 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16359">GH 16359</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.clip.html#pandas.DataFrame.clip" title="pandas.DataFrame.clip"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.clip()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.clip.html#pandas.Series.clip" title="pandas.Series.clip"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.clip()</span></code></a> 新增了 <code class="docutils literal notranslate"><span class="pre">inplace</span></code> 参数。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15388">GH 15388</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.crosstab.html#pandas.crosstab" title="pandas.crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a> 新增了 <code class="docutils literal notranslate"><span class="pre">margins_name</span></code> 参数，用于定义当 <code class="docutils literal notranslate"><span class="pre">margins=True</span></code> 时包含总计的行/列的名称。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15972">GH 15972</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_json()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> 参数，该参数可在 <code class="docutils literal notranslate"><span class="pre">lines=True</span></code> 时使用。如果传入 <code class="docutils literal notranslate"><span class="pre">chunksize</span></code>，read_json 现在返回一个迭代器，每次迭代读取 <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> 行。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17048">GH 17048</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_json()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_json()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">compression</span></code> 参数，允许它们透明地处理压缩文件。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17798">GH 17798</a>)</p></li>
</ul>
</section>
<section id="various-enhancements">
<h4>各项改进<a class="headerlink" href="v0.21.0.html#various-enhancements" title="此标题的链接">#</a></h4>
<ul class="simple">
<li><p>将 pandas 的导入时间提高了约 2.25 倍。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16764">GH 16764</a>)</p></li>
<li><p>在大多数读取器（例如 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a>）和写入器（例如 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a>）上支持 <a class="reference external" href="https://pythonlang.cn/dev/peps/pep-0519/">PEP 519 – 添加文件系统路径协议</a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13823">GH 13823</a>)。</p></li>
<li><p>为 <code class="docutils literal notranslate"><span class="pre">pd.HDFStore</span></code>、<code class="docutils literal notranslate"><span class="pre">pd.ExcelFile</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pd.ExcelWriter</span></code> 添加了 <code class="docutils literal notranslate"><span class="pre">__fspath__</span></code> 方法，以便正确支持文件系统路径协议 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13823">GH 13823</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">validate</span></code> 参数现在会检查合并是否为一对一、一对多、多对一或多对多。如果发现合并不属于指定合并类型，将引发 <code class="docutils literal notranslate"><span class="pre">MergeError</span></code> 类型的异常。更多详情，请参阅<a class="reference internal" href="../user_guide/merging.html#merging-validation"><span class="std std-ref">此处</span></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16270">GH 16270</a>)</p></li>
<li><p>在构建系统中添加了对 <a class="reference external" href="https://pythonlang.cn/dev/peps/pep-0518/">PEP 518</a> (<code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>) 的支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16745">GH 16745</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">RangeIndex.append()</span></code> 现在在可能的情况下返回一个 <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> 对象 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16212">GH 16212</a>)</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code> 时，<a class="reference internal" href="../reference/api/pandas.Series.rename_axis.html#pandas.Series.rename_axis" title="pandas.Series.rename_axis"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.rename_axis()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.rename_axis.html#pandas.DataFrame.rename_axis" title="pandas.DataFrame.rename_axis"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.rename_axis()</span></code></a> 在原地重命名轴时现在返回 <code class="docutils literal notranslate"><span class="pre">None</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15704">GH 15704</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.api.types.infer_dtype.html#pandas.api.types.infer_dtype" title="pandas.api.types.infer_dtype"><code class="xref py py-func docutils literal notranslate"><span class="pre">api.types.infer_dtype()</span></code></a> 现在可以推断小数。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15690">GH 15690</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.select_dtypes.html#pandas.DataFrame.select_dtypes" title="pandas.DataFrame.select_dtypes"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.select_dtypes()</span></code></a> 现在接受标量值以及类列表值作为 include/exclude 参数。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16855">GH 16855</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> 现在除了‘AS’之外，还接受‘YS’作为年初的别名。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9313">GH 9313</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> 现在除了‘A’之外，还接受‘Y’作为年末的别名。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9313">GH 9313</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.add_prefix.html#pandas.DataFrame.add_prefix" title="pandas.DataFrame.add_prefix"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.add_prefix()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.add_suffix.html#pandas.DataFrame.add_suffix" title="pandas.DataFrame.add_suffix"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.add_suffix()</span></code></a> 现在接受包含‘%’字符的字符串。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17151">GH 17151</a>)</p></li>
<li><p>能够推断压缩格式的读/写方法（<a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.read_pickle.html#pandas.read_pickle" title="pandas.read_pickle"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_pickle()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_pickle.html#pandas.DataFrame.to_pickle" title="pandas.DataFrame.to_pickle"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_pickle()</span></code></a>）现在可以从类路径对象（例如 <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code>）推断。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17206">GH 17206</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 现在能够识别 SAS7BDAT 文件中更常用的大部分日期（datetime）格式。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15871">GH 15871</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.items.html#pandas.DataFrame.items" title="pandas.DataFrame.items"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.items()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.items.html#pandas.Series.items" title="pandas.Series.items"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.items()</span></code></a> 现在同时存在于 Python 2 和 3 中，并且在所有情况下都为惰性求值。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13918">GH 13918</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17213">GH 17213</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.io.formats.style.Styler.where()</span></code> 已实现，作为 <code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.io.formats.style.Styler.applymap()</span></code> 的一个便利方法。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17474">GH 17474</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.is_monotonic_decreasing()</span></code> 已实现。之前在所有情况下都返回 <code class="docutils literal notranslate"><span class="pre">False</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16554">GH 16554</a>)</p></li>
<li><p>如果未安装 <code class="docutils literal notranslate"><span class="pre">xlrd</span></code>，<a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 现在会引发带有更好消息的 <code class="docutils literal notranslate"><span class="pre">ImportError</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17613">GH 17613</a>)</p></li>
<li><p>对于 Python 3.6+ 用户，<a class="reference internal" href="../reference/api/pandas.DataFrame.assign.html#pandas.DataFrame.assign" title="pandas.DataFrame.assign"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.assign()</span></code></a> 将保留 <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> 的原始顺序，而不是对列名进行排序。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14207">GH 14207</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.reindex.html#pandas.Series.reindex" title="pandas.Series.reindex"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.reindex()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex" title="pandas.DataFrame.reindex"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Index.get_indexer.html#pandas.Index.get_indexer" title="pandas.Index.get_indexer"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.get_indexer()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">tolerance</span></code> 的类列表参数。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17367">GH 17367</a>)</p></li>
</ul>
</section>
</section>
</section>
<section id="backwards-incompatible-api-changes">
<span id="whatsnew-0210-api-breaking"></span><h2>向后不兼容的 API 变更<a class="headerlink" href="v0.21.0.html#backwards-incompatible-api-changes" title="此标题的链接">#</a></h2>
<section id="dependencies-have-increased-minimum-versions">
<span id="whatsnew-0210-api-breaking-deps"></span><h3>依赖项的最低版本已提高<a class="headerlink" href="v0.21.0.html#dependencies-have-increased-minimum-versions" title="此标题的链接">#</a></h3>
<p>我们已更新了依赖项的最低支持版本 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15206">GH 15206</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15543">GH 15543</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15214">GH 15214</a>)。如果已安装，我们现在要求</p>
<blockquote>
<div><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>包</p></th>
<th class="head"><p>最低版本</p></th>
<th class="head"><p>必需</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Numpy</p></td>
<td><p>1.9.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>Matplotlib</p></td>
<td><p>1.4.3</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Scipy</p></td>
<td><p>0.14.0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Bottleneck</p></td>
<td><p>1.0.0</p></td>
<td></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>此外，已停止对 Python 3.4 的支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15251">GH 15251</a>)。</p>
</section>
<section id="sum-prod-of-all-nan-or-empty-series-dataframes-is-now-consistently-nan">
<span id="whatsnew-0210-api-breaking-bottleneck"></span><h3>全 NaN 或空 Series/DataFrame 的求和/乘积现在一致地为 NaN<a class="headerlink" href="v0.21.0.html#sum-prod-of-all-nan-or-empty-series-dataframes-is-now-consistently-nan" title="此标题的链接">#</a></h3>
<div class="admonition note">
<p class="admonition-title">注意</p>
<p>此处描述的更改已部分恢复。更多详情，请参阅<a class="reference internal" href="v0.22.0.html#whatsnew-0220"><span class="std std-ref">v0.22.0 新特性</span></a>。</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">sum</span></code> 和 <code class="docutils literal notranslate"><span class="pre">prod</span></code> 在全 NaN Series/DataFrame 上的行为不再依赖于是否安装了 <a class="reference external" href="https://bottleneck.readthedocs.io">bottleneck</a>，并且在空 Series 上调用 <code class="docutils literal notranslate"><span class="pre">sum</span></code> 和 <code class="docutils literal notranslate"><span class="pre">prod</span></code> 的返回值已更改 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9422">GH 9422</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15507">GH 15507</a>)。</p>
<p>在空或全 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 或 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 列上调用 <code class="docutils literal notranslate"><span class="pre">sum</span></code> 或 <code class="docutils literal notranslate"><span class="pre">prod</span></code> 将导致 <code class="docutils literal notranslate"><span class="pre">NaN</span></code>。详见<a class="reference internal" href="../user_guide/missing_data.html#missing-data-calculations"><span class="std std-ref">文档</span></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [33]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
</pre></div>
</div>
<p>以前，在未安装 <code class="docutils literal notranslate"><span class="pre">bottleneck</span></code> 的情况下</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">s</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[2]: </span><span class="go">np.nan</span>
</pre></div>
</div>
<p>以前，在安装了 <code class="docutils literal notranslate"><span class="pre">bottleneck</span></code> 的情况下</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">s</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[2]: </span><span class="go">0.0</span>
</pre></div>
</div>
<p>新行为，不考虑 bottleneck 的安装情况</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [34]: </span><span class="n">s</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[34]: </span><span class="go">0.0</span>
</pre></div>
</div>
<p>请注意，这也会改变空 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 的求和结果。以前，无论是否安装 <code class="docutils literal notranslate"><span class="pre">bottleneck</span></code>，这总是返回 0</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[1]: </span><span class="go">0</span>
</pre></div>
</div>
<p>但为了与全 NaN 情况保持一致，这也已更改为返回 NaN。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[2]: </span><span class="go">0</span>
</pre></div>
</div>
</section>
<section id="indexing-with-a-list-with-missing-labels-is-deprecated">
<span id="whatsnew-0210-api-breaking-loc"></span><h3>使用包含缺失标签的列表进行索引已被弃用<a class="headerlink" href="v0.21.0.html#indexing-with-a-list-with-missing-labels-is-deprecated" title="此标题的链接">#</a></h3>
<p>以前，使用包含一个或多个缺失标签的标签列表进行选择总是会成功，并为缺失的标签返回 <code class="docutils literal notranslate"><span class="pre">NaN</span></code>。现在，这会显示一个 <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code>。未来这将引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15747">GH 15747</a>)。当使用包含至少 1 个缺失标签的标签列表时，此警告将在对 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 或 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 使用 <code class="docutils literal notranslate"><span class="pre">.loc[]</span></code> 或 <code class="docutils literal notranslate"><span class="pre">[[]]</span></code> 时触发。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [35]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [36]: </span><span class="n">s</span>
<span class="gh">Out[36]: </span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">Length: 3, dtype: int64</span>
</pre></div>
</div>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="gh">Out[4]:</span>
<span class="go">1    2.0</span>
<span class="go">2    3.0</span>
<span class="go">3    NaN</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>当前行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span>
<span class="go">Passing list-likes to .loc or [] with any missing label will raise</span>
<span class="go">KeyError in the future, you can use .reindex() as an alternative.</span>

<span class="go">See the documentation here:</span>
<span class="go">https://pandas.ac.cn/pandas-docs/stable/indexing.html#deprecate-loc-reindex-listlike</span>

<span class="gh">Out[4]:</span>
<span class="go">1    2.0</span>
<span class="go">2    3.0</span>
<span class="go">3    NaN</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>选择可能不存在的元素的惯用方法是通过 <code class="docutils literal notranslate"><span class="pre">.reindex()</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [37]: </span><span class="n">s</span><span class="o">.</span><span class="n">reindex</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gh">Out[37]: </span>
<span class="go">1    2.0</span>
<span class="go">2    3.0</span>
<span class="go">3    NaN</span>
<span class="go">Length: 3, dtype: float64</span>
</pre></div>
</div>
<p>所有键都存在的选择行为不变。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [38]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
<span class="gh">Out[38]: </span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">Length: 2, dtype: int64</span>
</pre></div>
</div>
</section>
<section id="na-naming-changes">
<span id="whatsnew-0210-api-na-changes"></span><h3>NA 命名变更<a class="headerlink" href="v0.21.0.html#na-naming-changes" title="此标题的链接">#</a></h3>
<p>为了提高 pandas API 的一致性，我们添加了额外的顶级函数 <a class="reference internal" href="../reference/api/pandas.isna.html#pandas.isna" title="pandas.isna"><code class="xref py py-func docutils literal notranslate"><span class="pre">isna()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.notna.html#pandas.notna" title="pandas.notna"><code class="xref py py-func docutils literal notranslate"><span class="pre">notna()</span></code></a>，它们是 <a class="reference internal" href="../reference/api/pandas.isnull.html#pandas.isnull" title="pandas.isnull"><code class="xref py py-func docutils literal notranslate"><span class="pre">isnull()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.notnull.html#pandas.notnull" title="pandas.notnull"><code class="xref py py-func docutils literal notranslate"><span class="pre">notnull()</span></code></a> 的别名。命名方案现在与 <code class="docutils literal notranslate"><span class="pre">.dropna()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.fillna()</span></code> 等方法更加一致。此外，在所有定义了 <code class="docutils literal notranslate"><span class="pre">.isnull()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.notnull()</span></code> 方法的情况下，这些方法都新增了名为 <code class="docutils literal notranslate"><span class="pre">.isna()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.notna()</span></code> 的方法，它们已包含在 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code>、<code class="docutils literal notranslate"><span class="pre">Index</span></code>、<code class="docutils literal notranslate"><span class="pre">Series</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 类中。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15001">GH 15001</a>)。</p>
<p>配置选项 <code class="docutils literal notranslate"><span class="pre">pd.options.mode.use_inf_as_null</span></code> 已被弃用，并新增 <code class="docutils literal notranslate"><span class="pre">pd.options.mode.use_inf_as_na</span></code> 作为替代。</p>
</section>
<section id="iteration-of-series-index-will-now-return-python-scalars">
<span id="whatsnew-0210-api-breaking-iteration-scalars"></span><h3>Series/Index 的迭代现在将返回 Python 标量<a class="headerlink" href="v0.21.0.html#iteration-of-series-index-will-now-return-python-scalars" title="此标题的链接">#</a></h3>
<p>以前，当对 dtype 为 <code class="docutils literal notranslate"><span class="pre">int</span></code> 或 <code class="docutils literal notranslate"><span class="pre">float</span></code> 的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 使用某些迭代方法时，您会收到一个 <code class="docutils literal notranslate"><span class="pre">numpy</span></code> 标量（例如 <code class="docutils literal notranslate"><span class="pre">np.int64</span></code>），而不是 Python <code class="docutils literal notranslate"><span class="pre">int</span></code>。问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10904">GH 10904</a>) 修复了 <code class="docutils literal notranslate"><span class="pre">Series.tolist()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">list(Series)</span></code> 的此问题。此更改使得所有迭代方法保持一致，特别是对于 <code class="docutils literal notranslate"><span class="pre">__iter__()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.map()</span></code>；请注意，这仅影响 int/float 数据类型。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13236">GH 13236</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13258">GH 13258</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14216">GH 14216</a>)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [39]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [40]: </span><span class="n">s</span>
<span class="gh">Out[40]: </span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">Length: 3, dtype: int64</span>
</pre></div>
</div>
<p>以前</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="nb">type</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[2]: </span><span class="go">numpy.int64</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [41]: </span><span class="nb">type</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[41]: </span><span class="go">int</span>
</pre></div>
</div>
<p>此外，这现在还会正确地将 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict" title="pandas.DataFrame.to_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_dict()</span></code></a> 的迭代结果进行装箱。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [42]: </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'a'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">'b'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'b'</span><span class="p">]}</span>

<span class="gp">In [43]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
<p>以前</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="nb">type</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span><span class="s1">'a'</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[8]: </span><span class="go">numpy.int64</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [44]: </span><span class="nb">type</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span><span class="s1">'a'</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[44]: </span><span class="go">int</span>
</pre></div>
</div>
</section>
<section id="indexing-with-a-boolean-index">
<span id="whatsnew-0210-api-breaking-loc-with-index"></span><h3>使用布尔索引进行索引<a class="headerlink" href="v0.21.0.html#indexing-with-a-boolean-index" title="此标题的链接">#</a></h3>
<p>以前，当将布尔型 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 传递给 <code class="docutils literal notranslate"><span class="pre">.loc</span></code> 时，如果 <code class="docutils literal notranslate"><span class="pre">Series/DataFrame</span></code> 的索引具有 <code class="docutils literal notranslate"><span class="pre">boolean</span></code> 标签，您将获得基于标签的选择，可能会重复结果标签，而不是布尔索引选择（其中 <code class="docutils literal notranslate"><span class="pre">True</span></code> 选择元素），这与布尔型 numpy 数组索引的方式不一致。新行为是像布尔型 numpy 数组索引器那样操作。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17738">GH 17738</a>)</p>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [45]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span>

<span class="gp">In [46]: </span><span class="n">s</span>
<span class="gh">Out[46]: </span>
<span class="go">False    1</span>
<span class="go">True     2</span>
<span class="go">False    3</span>
<span class="go">Length: 3, dtype: int64</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [59]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">])]</span>
<span class="gh">Out[59]:</span>
<span class="go">True     2</span>
<span class="go">False    1</span>
<span class="go">False    3</span>
<span class="go">True     2</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>当前行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [47]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">])]</span>
<span class="gh">Out[47]: </span>
<span class="go">False    1</span>
<span class="go">False    3</span>
<span class="go">Length: 2, dtype: int64</span>
</pre></div>
</div>
<p>此外，以前如果您有一个非数值型索引（例如字符串），那么布尔型 Index 将引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>。现在，这将视为一个布尔索引器。</p>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [48]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">])</span>

<span class="gp">In [49]: </span><span class="n">s</span>
<span class="gh">Out[49]: </span>
<span class="go">a    1</span>
<span class="go">b    2</span>
<span class="go">c    3</span>
<span class="go">Length: 3, dtype: int64</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [39]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">])]</span>
<span class="go">KeyError: "None of [Index([True, False, True], dtype='object')] are in the [index]"</span>
</pre></div>
</div>
<p>当前行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [50]: </span><span class="n">s</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">])]</span>
<span class="gh">Out[50]: </span>
<span class="go">a    1</span>
<span class="go">c    3</span>
<span class="go">Length: 2, dtype: int64</span>
</pre></div>
</div>
</section>
<section id="periodindex-resampling">
<span id="whatsnew-0210-api-breaking-period-index-resampling"></span><h3><code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 重采样<a class="headerlink" href="v0.21.0.html#periodindex-resampling" title="此标题的链接">#</a></h3>
<p>在以前的 pandas 版本中，对由 <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 索引的 <code class="docutils literal notranslate"><span class="pre">Series</span></code>/<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 进行重采样在某些情况下会返回 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12884">GH 12884</a>)。现在，重采样到倍数频率会返回一个 <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15944">GH 15944</a>)。作为一个小改进，<code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 的重采样现在可以处理 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13224">GH 13224</a>)</p>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">'2017-01'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'M'</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">pi</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">resampled</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'2Q'</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="gp">In [4]: </span><span class="n">resampled</span>
<span class="gh">Out[4]:</span>
<span class="go">2017-03-31     1.0</span>
<span class="go">2017-09-30     5.5</span>
<span class="go">2018-03-31    10.0</span>
<span class="go">Freq: 2Q-DEC, dtype: float64</span>

<span class="gp">In [5]: </span><span class="n">resampled</span><span class="o">.</span><span class="n">index</span>
<span class="gh">Out[5]: </span><span class="go">DatetimeIndex(['2017-03-31', '2017-09-30', '2018-03-31'], dtype='datetime64[ns]', freq='2Q-DEC')</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">'2017-01'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'M'</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">pi</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">resampled</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'2Q'</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="gp">In [4]: </span><span class="n">resampled</span>
<span class="gh">Out[4]:</span>
<span class="go">2017Q1    2.5</span>
<span class="go">2017Q3    8.5</span>
<span class="go">Freq: 2Q-DEC, dtype: float64</span>

<span class="gp">In [5]: </span><span class="n">resampled</span><span class="o">.</span><span class="n">index</span>
<span class="gh">Out[5]: </span><span class="go">PeriodIndex(['2017Q1', '2017Q3'], dtype='period[2Q-DEC]')</span>
</pre></div>
</div>
<p>上采样并调用 <code class="docutils literal notranslate"><span class="pre">.ohlc()</span></code> 以前返回一个 <code class="docutils literal notranslate"><span class="pre">Series</span></code>，基本上与调用 <code class="docutils literal notranslate"><span class="pre">.asfreq()</span></code> 相同。OHLC 上采样现在返回一个包含 <code class="docutils literal notranslate"><span class="pre">open</span></code>、<code class="docutils literal notranslate"><span class="pre">high</span></code>、<code class="docutils literal notranslate"><span class="pre">low</span></code> 和 <code class="docutils literal notranslate"><span class="pre">close</span></code> 列的 DataFrame (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13083">GH 13083</a>)。这与下采样和 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> 的行为一致。</p>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">'2000-01-01'</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'D'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">pi</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">s</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'H'</span><span class="p">)</span><span class="o">.</span><span class="n">ohlc</span><span class="p">()</span>
<span class="gh">Out[3]:</span>
<span class="go">2000-01-01 00:00    0.0</span>
<span class="go">                ...</span>
<span class="go">2000-01-10 23:00    NaN</span>
<span class="go">Freq: H, Length: 240, dtype: float64</span>

<span class="gp">In [4]: </span><span class="n">s</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'M'</span><span class="p">)</span><span class="o">.</span><span class="n">ohlc</span><span class="p">()</span>
<span class="gh">Out[4]:</span>
<span class="go">         open  high  low  close</span>
<span class="go">2000-01     0     9    0      9</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [56]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">'2000-01-01'</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'D'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="gp">In [57]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">pi</span><span class="p">)</span>

<span class="gp">In [58]: </span><span class="n">s</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'H'</span><span class="p">)</span><span class="o">.</span><span class="n">ohlc</span><span class="p">()</span>
<span class="gh">Out[58]:</span>
<span class="go">                  open  high  low  close</span>
<span class="go">2000-01-01 00:00   0.0   0.0  0.0    0.0</span>
<span class="go">2000-01-01 01:00   NaN   NaN  NaN    NaN</span>
<span class="go">2000-01-01 02:00   NaN   NaN  NaN    NaN</span>
<span class="go">2000-01-01 03:00   NaN   NaN  NaN    NaN</span>
<span class="go">2000-01-01 04:00   NaN   NaN  NaN    NaN</span>
<span class="go">...                ...   ...  ...    ...</span>
<span class="go">2000-01-10 19:00   NaN   NaN  NaN    NaN</span>
<span class="go">2000-01-10 20:00   NaN   NaN  NaN    NaN</span>
<span class="go">2000-01-10 21:00   NaN   NaN  NaN    NaN</span>
<span class="go">2000-01-10 22:00   NaN   NaN  NaN    NaN</span>
<span class="go">2000-01-10 23:00   NaN   NaN  NaN    NaN</span>

<span class="go">[240 rows x 4 columns]</span>

<span class="gp">In [59]: </span><span class="n">s</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">'M'</span><span class="p">)</span><span class="o">.</span><span class="n">ohlc</span><span class="p">()</span>
<span class="gh">Out[59]:</span>
<span class="go">         open  high  low  close</span>
<span class="go">2000-01     0     9    0      9</span>

<span class="go">[1 rows x 4 columns]</span>
</pre></div>
</div>
</section>
<section id="improved-error-handling-during-item-assignment-in-pd-eval">
<span id="whatsnew-0210-api-breaking-pandas-eval"></span><h3>pd.eval 中项赋值的错误处理改进<a class="headerlink" href="v0.21.0.html#improved-error-handling-during-item-assignment-in-pd-eval" title="此标题的链接">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.eval.html#pandas.eval" title="pandas.eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a> 现在会在项赋值出错或指定原地操作但表达式中没有项赋值时引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16732">GH 16732</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [51]: </span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<p>以前，如果您尝试以下表达式，您会得到一个不太有用的错误消息</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s2">"a = 1 + 2"</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">arr</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">...</span>
<span class="go">IndexError: only integers, slices (`:`), ellipsis (`...`), numpy.newaxis (`None`)</span>
<span class="go">and integer or boolean arrays are valid indices</span>
</pre></div>
</div>
<p>这是一种非常冗长的方式来说明 numpy 数组不支持字符串项索引。通过此更改，错误消息现在是这样</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">pd</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s2">"a = 1 + 2"</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">arr</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="o">...</span>
<span class="ne">ValueError</span><span class="p">:</span> <span class="n">Cannot</span> <span class="n">assign</span> <span class="n">expression</span> <span class="n">output</span> <span class="n">to</span> <span class="n">target</span>
</pre></div>
</div>
<p>以前，即使没有项赋值，也可以原地（inplace）评估表达式。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s2">"1 + 2"</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">arr</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[4]: </span><span class="go">3</span>
</pre></div>
</div>
<p>然而，这种输入意义不大，因为输出未被赋值给目标。现在，当传入此类输入时，将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s2">"1 + 2"</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">arr</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">...</span>
<span class="go">ValueError: Cannot operate inplace if there is no assignment</span>
</pre></div>
</div>
</section>
<section id="dtype-conversions">
<span id="whatsnew-0210-api-breaking-dtype-conversions"></span><h3>数据类型转换<a class="headerlink" href="v0.21.0.html#dtype-conversions" title="此标题的链接">#</a></h3>
<p>以前，带有 <code class="docutils literal notranslate"><span class="pre">bool</span></code> 赋值的赋值操作、<code class="docutils literal notranslate"><span class="pre">.where()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.fillna()</span></code> 会强制转换为相同的类型（例如 int / float），或者对日期时间类型引发错误。现在，这些操作将保留布尔值，并将其 dtype 设置为 <code class="docutils literal notranslate"><span class="pre">object</span></code>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16821">GH 16821</a>)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [52]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">s</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">6</span><span class="p">]:</span>
<span class="mi">0</span>    <span class="mi">1</span>
<span class="mi">1</span>    <span class="mi">1</span>
<span class="mi">2</span>    <span class="mi">3</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">int64</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

<span class="gp">In [8]: </span><span class="n">s</span>
<span class="gh">Out[8]:</span>
<span class="go">0       1</span>
<span class="go">1    True</span>
<span class="go">2       3</span>
<span class="go">Length: 3, dtype: object</span>
</pre></div>
</div>
<p>以前，将非日期时间类型赋值给日期时间类型时，会被强制转换 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14145">GH 14145</a>)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [53]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'2011-01-01'</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">'2012-01-01'</span><span class="p">)])</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">s</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
<span class="mi">0</span>   <span class="mi">2011</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000000000</span>
<span class="mi">1</span>   <span class="mi">1970</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mf">00.000000001</span>
<span class="n">dtype</span><span class="p">:</span> <span class="n">datetime64</span><span class="p">[</span><span class="n">ns</span><span class="p">]</span>
</pre></div>
</div>
<p>这些现在会被强制转换为 <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">s</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
<span class="mi">0</span>    <span class="mi">2011</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
<span class="mi">1</span>                      <span class="mi">1</span>
<span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.where()</span></code> 在处理日期时间类型时存在不一致行为，会引发错误而不是强制转换为 <code class="docutils literal notranslate"><span class="pre">object</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16402">GH 16402</a>)</p></li>
<li><p>将 <code class="docutils literal notranslate"><span class="pre">float64</span></code> dtype 的 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> 赋值给 <code class="docutils literal notranslate"><span class="pre">int64</span></code> 数据时可能保留 <code class="docutils literal notranslate"><span class="pre">int64</span></code> dtype 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14001">GH 14001</a>)</p></li>
</ul>
</section>
<section id="multiindex-constructor-with-a-single-level">
<span id="whatsnew-210-api-multiindex-single"></span><h3>单层 MultiIndex 构造函数<a class="headerlink" href="v0.21.0.html#multiindex-constructor-with-a-single-level" title="此标题的链接">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 构造函数不再将所有长度为一的 MultiIndex 压缩为常规 <code class="docutils literal notranslate"><span class="pre">Index</span></code>。这会影响所有的 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 构造函数。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17178">GH 17178</a>)</p>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="s1">'a'</span><span class="p">,),</span> <span class="p">(</span><span class="s1">'b'</span><span class="p">,)])</span>
<span class="gh">Out[2]: </span><span class="go">Index(['a', 'b'], dtype='object')</span>
</pre></div>
</div>
<p>长度为 1 的层不再作为特殊情况处理。它们的行为与长度为 2+ 的层完全相同，因此所有 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 构造函数都将始终返回 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [54]: </span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="s1">'a'</span><span class="p">,),</span> <span class="p">(</span><span class="s1">'b'</span><span class="p">,)])</span>
<span class="gh">Out[54]: </span>
<span class="go">MultiIndex([('a',),</span>
<span class="go">            ('b',)],</span>
<span class="go">           )</span>
</pre></div>
</div>
</section>
<section id="utc-localization-with-series">
<span id="whatsnew-0210-api-utc-localization-with-series"></span><h3>Series 的 UTC 本地化<a class="headerlink" href="v0.21.0.html#utc-localization-with-series" title="此标题的链接">#</a></h3>
<p>以前，当传递 <code class="docutils literal notranslate"><span class="pre">utc=True</span></code> 时，<a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 不会对日期时间 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 数据进行本地化。现在，<a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 将正确地将具有 <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">UTC]</span></code> dtype 的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 本地化，以与类列表和 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 数据的处理方式保持一致。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/6415">GH 6415</a>)。</p>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [55]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">'20130101 00:00:00'</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[12]:</span>
<span class="go">0   2013-01-01</span>
<span class="go">1   2013-01-01</span>
<span class="go">2   2013-01-01</span>
<span class="go">dtype: datetime64[ns]</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [56]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gh">Out[56]: </span>
<span class="go">0   2013-01-01 00:00:00+00:00</span>
<span class="go">1   2013-01-01 00:00:00+00:00</span>
<span class="go">2   2013-01-01 00:00:00+00:00</span>
<span class="go">Length: 3, dtype: datetime64[ns, UTC]</span>
</pre></div>
</div>
<p>此外，由 <a class="reference internal" href="../reference/api/pandas.read_sql_table.html#pandas.read_sql_table" title="pandas.read_sql_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_table()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_sql_query.html#pandas.read_sql_query" title="pandas.read_sql_query"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sql_query()</span></code></a> 解析的带有日期时间列的 DataFrame 也将仅在原始 SQL 列是时区感知日期时间列时才本地化为 UTC。</p>
</section>
<section id="consistency-of-range-functions">
<span id="whatsnew-0210-api-consistency-of-range-functions"></span><h3>范围函数的一致性<a class="headerlink" href="v0.21.0.html#consistency-of-range-functions" title="此标题的链接">#</a></h3>
<p>在以前的版本中，各种范围函数之间存在一些不一致性：<a class="reference internal" href="../reference/api/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.bdate_range.html#pandas.bdate_range" title="pandas.bdate_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">bdate_range()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.period_range.html#pandas.period_range" title="pandas.period_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">period_range()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.timedelta_range.html#pandas.timedelta_range" title="pandas.timedelta_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">timedelta_range()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.interval_range.html#pandas.interval_range" title="pandas.interval_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">interval_range()</span></code></a>。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17471">GH 17471</a>)。</p>
<p>当同时指定 <code class="docutils literal notranslate"><span class="pre">start</span></code>、<code class="docutils literal notranslate"><span class="pre">end</span></code> 和 <code class="docutils literal notranslate"><span class="pre">period</span></code> 参数时，可能导致范围模糊，这是不一致行为之一。当传递所有三个参数时，<code class="docutils literal notranslate"><span class="pre">interval_range</span></code> 会忽略 <code class="docutils literal notranslate"><span class="pre">period</span></code> 参数，<code class="docutils literal notranslate"><span class="pre">period_range</span></code> 会忽略 <code class="docutils literal notranslate"><span class="pre">end</span></code> 参数，而其他范围函数则会引发错误。为了提高范围函数之间的一致性并避免潜在的模糊范围，当传递所有三个参数时，<code class="docutils literal notranslate"><span class="pre">interval_range</span></code> 和 <code class="docutils literal notranslate"><span class="pre">period_range</span></code> 现在将引发错误。</p>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"> In [2]: pd.interval_range(start=0, end=4, periods=6)</span>
<span class="go"> Out[2]:</span>
<span class="go"> IntervalIndex([(0, 1], (1, 2], (2, 3]]</span>
<span class="go">               closed='right',</span>
<span class="go">               dtype='interval[int64]')</span>

<span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">'2017Q1'</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">'2017Q4'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'Q'</span><span class="p">)</span>
<span class="gh">Out[3]: </span><span class="go">PeriodIndex(['2017Q1', '2017Q2', '2017Q3', '2017Q4', '2018Q1', '2018Q2'], dtype='period[Q-DEC]', freq='Q-DEC')</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span>: Of the three parameters: start, end, and periods, exactly two must be specified

<span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">'2017Q1'</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">'2017Q4'</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">'Q'</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span>: Of the three parameters: start, end, and periods, exactly two must be specified
</pre></div>
</div>
<p>此外，<code class="docutils literal notranslate"><span class="pre">interval_range</span></code> 生成的区间不包含端点参数 <code class="docutils literal notranslate"><span class="pre">end</span></code>。然而，所有其他范围函数都在其输出中包含 <code class="docutils literal notranslate"><span class="pre">end</span></code>。为了促进范围函数之间的一致性，<code class="docutils literal notranslate"><span class="pre">interval_range</span></code> 现在将把 <code class="docutils literal notranslate"><span class="pre">end</span></code> 作为最终区间的右端点包含在内，除非 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 的指定方式跳过了 <code class="docutils literal notranslate"><span class="pre">end</span></code>。</p>
<p>旧行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gh">Out[4]:</span>
<span class="go">IntervalIndex([(0, 1], (1, 2], (2, 3]]</span>
<span class="go">              closed='right',</span>
<span class="go">              dtype='interval[int64]')</span>
</pre></div>
</div>
<p>新行为</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [57]: </span><span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gh">Out[57]: </span><span class="go">IntervalIndex([(0, 1], (1, 2], (2, 3], (3, 4]], dtype='interval[int64, right]')</span>
</pre></div>
</div>
</section>
<section id="no-automatic-matplotlib-converters">
<span id="whatsnew-0210-api-mpl-converters"></span><h3>不再自动注册 Matplotlib 转换器<a class="headerlink" href="v0.21.0.html#no-automatic-matplotlib-converters" title="此标题的链接">#</a></h3>
<p>pandas 在导入时不再自动注册我们针对 matplotlib 的 <code class="docutils literal notranslate"><span class="pre">date</span></code>、<code class="docutils literal notranslate"><span class="pre">time</span></code>、<code class="docutils literal notranslate"><span class="pre">datetime</span></code>、<code class="docutils literal notranslate"><span class="pre">datetime64</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Period</span></code> 转换器。Matplotlib 绘图方法（<code class="docutils literal notranslate"><span class="pre">plt.plot</span></code>, <code class="docutils literal notranslate"><span class="pre">ax.plot</span></code>, …）将不会为 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> 或 <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 值提供漂亮的 X 轴格式。您必须显式注册这些方法</p>
<p>pandas 内置的 <code class="docutils literal notranslate"><span class="pre">Series.plot</span></code> 和 <code class="docutils literal notranslate"><span class="pre">DataFrame.plot</span></code> <em>将</em>在首次使用时注册这些转换器 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17710">GH 17710</a>)。</p>
<div class="admonition note">
<p class="admonition-title">注意</p>
<p>此更改已在 pandas 0.21.1 中暂时恢复，更多详情请参阅<a class="reference internal" href="v0.21.1.html#whatsnew-0211-converters"><span class="std std-ref">此处</span></a>。</p>
</div>
</section>
<section id="other-api-changes">
<span id="whatsnew-0210-api"></span><h3>其他 API 变更<a class="headerlink" href="v0.21.0.html#other-api-changes" title="此标题的链接">#</a></h3>
<ul class="simple">
<li><p>Categorical 构造函数不再接受标量作为 <code class="docutils literal notranslate"><span class="pre">categories</span></code> 关键词。 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16022">GH 16022</a>)</p></li>
<li><p>在已关闭的 <code class="xref py py-class docutils literal notranslate"><span class="pre">HDFStore</span></code> 上访问不存在的属性现在将引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>，而不是 <code class="docutils literal notranslate"><span class="pre">ClosedFileError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16301">GH 16301</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 现在会在 <code class="docutils literal notranslate"><span class="pre">names</span></code> 参数包含重复项时发出 <code class="docutils literal notranslate"><span class="pre">UserWarning</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17095">GH 17095</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 现在默认将字符串 <code class="docutils literal notranslate"><span class="pre">'null'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">'n/a'</span></code> 视为空值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16471">GH 16471</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16078">GH 16078</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.HDFStore</span></code> 的字符串表示现在更快，且细节更少。如需之前的行为，请使用 <code class="docutils literal notranslate"><span class="pre">pandas.HDFStore.info()</span></code>。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16503">GH 16503</a>)。</p></li>
<li><p>HDF 存储中的压缩默认值现在遵循 pytables 标准。默认不压缩，如果缺少 <code class="docutils literal notranslate"><span class="pre">complib</span></code> 且 <code class="docutils literal notranslate"><span class="pre">complevel</span></code> &gt; 0，则使用 <code class="docutils literal notranslate"><span class="pre">zlib</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15943">GH 15943</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Index.get_indexer_non_unique()</span></code> 现在返回一个 ndarray 索引器而不是 <code class="docutils literal notranslate"><span class="pre">Index</span></code>；这与 <code class="docutils literal notranslate"><span class="pre">Index.get_indexer()</span></code> 保持一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16819">GH 16819</a>)</p></li>
<li><p>从 <code class="docutils literal notranslate"><span class="pre">pandas._testing</span></code> 中移除了 <code class="docutils literal notranslate"><span class="pre">@slow</span></code> 装饰器，该装饰器导致一些下游包的测试套件出现问题。请改用 <code class="docutils literal notranslate"><span class="pre">@pytest.mark.slow</span></code>，它能实现相同的功能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16850">GH 16850</a>)</p></li>
<li><p>将 <code class="docutils literal notranslate"><span class="pre">MergeError</span></code> 的定义移至 <code class="docutils literal notranslate"><span class="pre">pandas.errors</span></code> 模块。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.set_axis.html#pandas.Series.set_axis" title="pandas.Series.set_axis"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.set_axis()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.set_axis.html#pandas.DataFrame.set_axis" title="pandas.DataFrame.set_axis"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.set_axis()</span></code></a> 的签名已从 <code class="docutils literal notranslate"><span class="pre">set_axis(axis,</span> <span class="pre">labels)</span></code> 更改为 <code class="docutils literal notranslate"><span class="pre">set_axis(labels,</span> <span class="pre">axis=0)</span></code>，以与 API 的其余部分保持一致。旧签名已被弃用，并将显示 <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14636">GH 14636</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.argmin.html#pandas.Series.argmin" title="pandas.Series.argmin"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.argmin()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.argmax.html#pandas.Series.argmax" title="pandas.Series.argmax"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.argmax()</span></code></a> 在与 <code class="docutils literal notranslate"><span class="pre">object</span></code> dtypes 一起使用时，现在将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>，而不是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13595">GH 13595</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 现在是不可变的，当用户尝试为 <code class="docutils literal notranslate"><span class="pre">ordinal</span></code> 或 <code class="docutils literal notranslate"><span class="pre">freq</span></code> 属性赋值时，将引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17116">GH 17116</a>)。</p></li>
<li><p>当 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 传入时区感知的 <code class="docutils literal notranslate"><span class="pre">origin=</span></code> 关键字参数时，现在将引发更具信息量的 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>，而不是 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16842">GH 16842</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 现在在格式包含 <code class="docutils literal notranslate"><span class="pre">%W</span></code> 或 <code class="docutils literal notranslate"><span class="pre">%U</span></code> 但没有同时包含星期几和日历年份时，会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16774">GH 16774</a>)</p></li>
<li><p>为提高 API 一致性，已将 <a class="reference internal" href="../reference/api/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_stata()</span></code></a> 中非功能的 <code class="docutils literal notranslate"><span class="pre">index</span></code> 重命名为 <code class="docutils literal notranslate"><span class="pre">index_col</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16342">GH 16342</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.drop.html#pandas.DataFrame.drop" title="pandas.DataFrame.drop"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.drop()</span></code></a> 中的一个错误导致在从数字索引中删除索引时，布尔标签 <code class="docutils literal notranslate"><span class="pre">False</span></code> 和 <code class="docutils literal notranslate"><span class="pre">True</span></code> 分别被视为标签 0 和 1。现在这将引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16877">GH 16877</a>)</p></li>
<li><p>限制了 DateOffset 关键字参数。以前，<code class="docutils literal notranslate"><span class="pre">DateOffset</span></code> 子类允许任意关键字参数，这可能导致意外行为。现在，只接受有效参数。( <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17176">GH 17176</a>)。</p></li>
</ul>
</section>
</section>
<section id="deprecations">
<span id="whatsnew-0210-deprecations"></span><h2>弃用<a class="headerlink" href="v0.21.0.html#deprecations" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.from_csv()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.from_csv()</span></code> 已被弃用，取而代之的是 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/4191">GH 4191</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 已弃用 <code class="docutils literal notranslate"><span class="pre">sheetname</span></code>，取而代之的是 <code class="docutils literal notranslate"><span class="pre">sheet_name</span></code>，以与 <code class="docutils literal notranslate"><span class="pre">.to_excel()</span></code> 保持一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10559">GH 10559</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 已弃用 <code class="docutils literal notranslate"><span class="pre">parse_cols</span></code>，取而代之的是 <code class="docutils literal notranslate"><span class="pre">usecols</span></code>，以与 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 保持一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/4988">GH 4988</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 已弃用 <code class="docutils literal notranslate"><span class="pre">tupleize_cols</span></code> 参数。列元组将始终转换为 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17060">GH 17060</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> 已弃用 <code class="docutils literal notranslate"><span class="pre">tupleize_cols</span></code> 参数。MultiIndex 列将始终以行形式写入 CSV 文件 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17060">GH 17060</a>)</p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">.take()</span></code> 方法中，<code class="docutils literal notranslate"><span class="pre">convert</span></code> 参数已被弃用，因为它未被遵守 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16948">GH 16948</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.options.html.border</span></code> 已弃用，取而代之的是 <code class="docutils literal notranslate"><span class="pre">pd.options.display.html.border</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15793">GH 15793</a>)。</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">SeriesGroupBy.nth()</span></code> 已弃用 <code class="docutils literal notranslate"><span class="pre">True</span></code>，取而代之的是 <code class="docutils literal notranslate"><span class="pre">'all'</span></code> 作为其 kwarg <code class="docutils literal notranslate"><span class="pre">dropna</span></code> 的值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11038">GH 11038</a>)。</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.as_blocks()</span></code> 已弃用，因为它暴露了内部实现 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17302">GH 17302</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.TimeGrouper</span></code> 已弃用，取而代之的是 <a class="reference internal" href="../reference/api/pandas.Grouper.html#pandas.Grouper" title="pandas.Grouper"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.Grouper</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16747">GH 16747</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cdate_range</span></code> 已弃用，取而代之的是 <a class="reference internal" href="../reference/api/pandas.bdate_range.html#pandas.bdate_range" title="pandas.bdate_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">bdate_range()</span></code></a>，后者增加了 <code class="docutils literal notranslate"><span class="pre">weekmask</span></code> 和 <code class="docutils literal notranslate"><span class="pre">holidays</span></code> 参数，用于构建自定义频率日期范围。详情请参阅<a class="reference internal" href="../user_guide/timeseries.html#timeseries-custom-freq-ranges"><span class="std std-ref">文档</span></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17596">GH 17596</a>)</p></li>
<li><p>已弃用向 <a class="reference internal" href="../reference/api/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.astype()</span></code></a> 传递 <code class="docutils literal notranslate"><span class="pre">categories</span></code> 或 <code class="docutils literal notranslate"><span class="pre">ordered</span></code> 关键字参数，取而代之的是传递 <a class="reference internal" href="v0.21.0.html#whatsnew-0210-enhancements-categorical-dtype"><span class="std std-ref">CategoricalDtype</span></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17636">GH 17636</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code>、<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>、<code class="docutils literal notranslate"><span class="pre">Panel</span></code>、<code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> 和 <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> 上的 <code class="docutils literal notranslate"><span class="pre">.get_value</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.set_value</span></code> 已弃用，取而代之的是使用 <code class="docutils literal notranslate"><span class="pre">.iat[]</span></code> 或 <code class="docutils literal notranslate"><span class="pre">.at[]</span></code> 访问器 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15269">GH 15269</a>)</p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">.to_excel(...,</span> <span class="pre">columns=)</span></code> 中传入不存在的列已被弃用，将来会引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17295">GH 17295</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.where()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.mask.html#pandas.Series.mask" title="pandas.Series.mask"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.mask()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.mask.html#pandas.DataFrame.mask" title="pandas.DataFrame.mask"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.mask()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">raise_on_error</span></code> 参数已弃用，取而代之的是 <code class="docutils literal notranslate"><span class="pre">errors=</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14968">GH 14968</a>)</p></li>
<li><p>使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.rename_axis.html#pandas.DataFrame.rename_axis" title="pandas.DataFrame.rename_axis"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rename_axis()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.rename_axis.html#pandas.Series.rename_axis" title="pandas.Series.rename_axis"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rename_axis()</span></code></a> 更改索引或列的<em>标签</em>现在已被弃用，取而代之的是使用 <code class="docutils literal notranslate"><span class="pre">.rename</span></code>。<code class="docutils literal notranslate"><span class="pre">rename_axis</span></code> 仍可用于更改索引或列的名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17833">GH 17833</a>)。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">reindex_axis()</span></code> 已弃用，取而代之的是 <a class="reference internal" href="../reference/api/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex" title="pandas.DataFrame.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reindex()</span></code></a>。更多详情请参阅 <a class="reference internal" href="v0.21.0.html#whatsnew-0210-enhancements-rename-reindex-axis"><span class="std std-ref">此处</span></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17833">GH 17833</a>)。</p></li>
</ul>
<section id="series-select-and-dataframe-select">
<span id="whatsnew-0210-deprecations-select"></span><h3>Series.select 和 DataFrame.select<a class="headerlink" href="v0.21.0.html#series-select-and-dataframe-select" title="Link to this heading">#</a></h3>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.select()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.select()</span></code> 方法已弃用，取而代之的是使用 <code class="docutils literal notranslate"><span class="pre">df.loc[labels.map(crit)]</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12401">GH 12401</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [58]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'A'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">,</span> <span class="s1">'baz'</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'bar'</span><span class="p">,</span> <span class="s1">'baz'</span><span class="p">])</span>
<span class="go">FutureWarning: select is deprecated and will be removed in a future release. You can use .loc[crit] as a replacement</span>
<span class="gh">Out[3]:</span>
<span class="go">     A</span>
<span class="go">bar  2</span>
<span class="go">baz  3</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [59]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'bar'</span><span class="p">,</span> <span class="s1">'baz'</span><span class="p">])]</span>
<span class="gh">Out[59]: </span>
<span class="go">     A</span>
<span class="go">bar  2</span>
<span class="go">baz  3</span>

<span class="go">[2 rows x 1 columns]</span>
</pre></div>
</div>
</section>
<section id="series-argmax-and-series-argmin">
<span id="whatsnew-0210-deprecations-argmin-min"></span><h3>Series.argmax 和 Series.argmin<a class="headerlink" href="v0.21.0.html#series-argmax-and-series-argmin" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.Series.argmax.html#pandas.Series.argmax" title="pandas.Series.argmax"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.argmax()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.argmin.html#pandas.Series.argmin" title="pandas.Series.argmin"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.argmin()</span></code></a> 的行为已被弃用，取而代之的是 <a class="reference internal" href="../reference/api/pandas.Series.idxmax.html#pandas.Series.idxmax" title="pandas.Series.idxmax"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.idxmax()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.idxmin.html#pandas.Series.idxmin" title="pandas.Series.idxmin"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.idxmin()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16830">GH 16830</a>)。</p>
<p>为了与 NumPy 数组兼容，<code class="docutils literal notranslate"><span class="pre">pd.Series</span></code> 实现了 <code class="docutils literal notranslate"><span class="pre">argmax</span></code> 和 <code class="docutils literal notranslate"><span class="pre">argmin</span></code>。自 pandas 0.13.0 以来，<code class="docutils literal notranslate"><span class="pre">argmax</span></code> 一直是 <a class="reference internal" href="../reference/api/pandas.Series.idxmax.html#pandas.Series.idxmax" title="pandas.Series.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.Series.idxmax()</span></code></a> 的别名，<code class="docutils literal notranslate"><span class="pre">argmin</span></code> 一直是 <a class="reference internal" href="../reference/api/pandas.Series.idxmin.html#pandas.Series.idxmin" title="pandas.Series.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.Series.idxmin()</span></code></a> 的别名。它们返回最大值或最小值的<em>标签</em>，而不是<em>位置</em>。</p>
<p>我们已弃用 <code class="docutils literal notranslate"><span class="pre">Series.argmax</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Series.argmin</span></code> 的当前行为。使用它们中的任何一个都将发出 <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code>。如果您想要最大值的标签，请使用 <a class="reference internal" href="../reference/api/pandas.Series.idxmax.html#pandas.Series.idxmax" title="pandas.Series.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.idxmax()</span></code></a>。如果您想要最大值的位置，请使用 <code class="docutils literal notranslate"><span class="pre">Series.values.argmax()</span></code>。最小值同理。在未来的版本中，<code class="docutils literal notranslate"><span class="pre">Series.argmax</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Series.argmin</span></code> 将返回最大值或最小值的位置。</p>
</section>
</section>
<section id="removal-of-prior-version-deprecations-changes">
<span id="whatsnew-0210-prior-deprecations"></span><h2>移除以前版本中弃用的功能/更改<a class="headerlink" href="v0.21.0.html#removal-of-prior-version-deprecations-changes" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 已删除 <code class="docutils literal notranslate"><span class="pre">has_index_names</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/10967">GH 10967</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.options.display.height</span></code> 配置已被删除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/3663">GH 3663</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.options.display.line_width</span></code> 配置已被删除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/2881">GH 2881</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.options.display.mpl_style</span></code> 配置已被删除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12190">GH 12190</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Index</span></code> 已删除 <code class="docutils literal notranslate"><span class="pre">.sym_diff()</span></code> 方法，取而代之的是 <code class="docutils literal notranslate"><span class="pre">.symmetric_difference()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12591">GH 12591</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical</span></code> 已删除 <code class="docutils literal notranslate"><span class="pre">.order()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.sort()</span></code> 方法，取而代之的是 <code class="docutils literal notranslate"><span class="pre">.sort_values()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12882">GH 12882</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.eval.html#pandas.eval" title="pandas.eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.eval.html#pandas.DataFrame.eval" title="pandas.DataFrame.eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.eval()</span></code></a> 已将 <code class="docutils literal notranslate"><span class="pre">inplace</span></code> 的默认值从 <code class="docutils literal notranslate"><span class="pre">None</span></code> 更改为 <code class="docutils literal notranslate"><span class="pre">False</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11149">GH 11149</a>)</p></li>
<li><p>函数 <code class="docutils literal notranslate"><span class="pre">get_offset_name</span></code> 已被删除，取而代之的是偏移量的 <code class="docutils literal notranslate"><span class="pre">.freqstr</span></code> 属性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11834">GH 11834</a>)</p></li>
<li><p>pandas 不再测试与 pandas &lt; 0.11 创建的 hdf5 文件的兼容性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17404">GH 17404</a>)。</p></li>
</ul>
</section>
<section id="performance-improvements">
<span id="whatsnew-0210-performance"></span><h2>性能改进<a class="headerlink" href="v0.21.0.html#performance-improvements" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>改进了 <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> 实例化的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16773">GH 16773</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.dt.html#pandas.Series.dt" title="pandas.Series.dt"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt</span></code></a> 不再执行频率推断，从而在访问属性时大大提高了速度 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17210">GH 17210</a>)</p></li>
<li><p>通过不实体化值，改进了 <a class="reference internal" href="../reference/api/pandas.Series.cat.set_categories.html#pandas.Series.cat.set_categories" title="pandas.Series.cat.set_categories"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_categories()</span></code></a> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17508">GH 17508</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Timestamp.microsecond.html#pandas.Timestamp.microsecond" title="pandas.Timestamp.microsecond"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Timestamp.microsecond</span></code></a> 不再在属性访问时重新计算 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17331">GH 17331</a>)</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 对已是分类 dtype 的数据的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17513">GH 17513</a>)</p></li>
<li><p>通过使用 <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> 属性执行计算，改进了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">RangeIndex.min()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">RangeIndex.max()</span></code> 的性能 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17607">GH 17607</a>)</p></li>
</ul>
</section>
<section id="documentation-changes">
<span id="whatsnew-0210-docs"></span><h2>文档更改<a class="headerlink" href="v0.21.0.html#documentation-changes" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>一些 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 方法的文档字符串（例如 <code class="xref py py-func docutils literal notranslate"><span class="pre">NaT.ctime()</span></code>）不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17327">GH 17327</a>)</p></li>
<li><p>文档已移除并清理了对版本 &lt; v0.17 的引用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17442">GH 17442</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17442">GH 17442</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17404">GH 17404</a> &amp; <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17504">GH 17504</a>)</p></li>
</ul>
</section>
<section id="bug-fixes">
<span id="whatsnew-0210-bug-fixes"></span><h2>Bug 修复<a class="headerlink" href="v0.21.0.html#bug-fixes" title="Link to this heading">#</a></h2>
<section id="conversion">
<h3>转换<a class="headerlink" href="v0.21.0.html#conversion" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在对 datetime-like 数据使用 <code class="docutils literal notranslate"><span class="pre">int</span></code> 进行赋值时，可能错误地转换为 datetime-like 类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14145">GH 14145</a>)</p></li>
<li><p>将 <code class="docutils literal notranslate"><span class="pre">float64</span></code> dtype 的 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> 赋值给 <code class="docutils literal notranslate"><span class="pre">int64</span></code> 数据时可能保留 <code class="docutils literal notranslate"><span class="pre">int64</span></code> dtype 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14001">GH 14001</a>)</p></li>
<li><p>修复了 <code class="docutils literal notranslate"><span class="pre">IntervalIndex.is_non_overlapping_monotonic</span></code> 的返回类型，使其成为 Python 的 <code class="docutils literal notranslate"><span class="pre">bool</span></code>，以与类似属性/方法保持一致。以前返回 <code class="docutils literal notranslate"><span class="pre">numpy.bool_</span></code>。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17237">GH 17237</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IntervalIndex.is_non_overlapping_monotonic</span></code> 中的一个错误，当区间两端都封闭并在一个点重叠时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16560">GH 16560</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a> 中的一个错误，当 <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code> 且 <code class="docutils literal notranslate"><span class="pre">value</span></code> 是字典时，会返回 DataFrame (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16156">GH 16156</a>)</p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Timestamp.weekday_name</span></code> 中的一个错误，在本地化到时区时返回基于 UTC 的星期几名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17354">GH 17354</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Timestamp.replace</span></code> 中替换 <code class="docutils literal notranslate"><span class="pre">tzinfo</span></code> 遇到夏令时变更时的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15683">GH 15683</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> 构造和算术中的一个错误，该错误不会传播 <code class="docutils literal notranslate"><span class="pre">Overflow</span></code> 异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17367">GH 17367</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">astype()</span></code></a> 中的一个错误，当传递扩展类型类（<code class="docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code>、<code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code>）而不是实例时，会转换为 object dtype。现在，当传递类时会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17780">GH 17780</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_numeric()</span></code></a> 中的一个错误，其中当 <code class="docutils literal notranslate"><span class="pre">errors='coerce'</span></code> 时，元素并不总是强制转换为数字类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17007">GH 17007</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17125">GH 17125</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 构造函数中的一个错误，其中 <code class="docutils literal notranslate"><span class="pre">range</span></code> 对象在 Windows 上被转换为 <code class="docutils literal notranslate"><span class="pre">int32</span></code> dtype 而不是 <code class="docutils literal notranslate"><span class="pre">int64</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16804">GH 16804</a>)</p></li>
</ul>
</section>
<section id="indexing">
<h3>索引<a class="headerlink" href="v0.21.0.html#indexing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>当使用空切片（例如 <code class="docutils literal notranslate"><span class="pre">df.iloc[:]</span></code>）调用时，<code class="docutils literal notranslate"><span class="pre">.iloc</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.loc</span></code> 索引器返回原始对象的浅拷贝。以前它们返回原始对象。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13873">GH 13873</a>)。</p></li>
<li><p>当在未排序的 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 上调用时，<code class="docutils literal notranslate"><span class="pre">loc</span></code> 索引器现在仅在非排序级别上使用适当的切片时才会引发 <code class="docutils literal notranslate"><span class="pre">UnsortedIndexError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16734">GH 16734</a>)。</p></li>
<li><p>修复了 0.20.3 中使用字符串对 <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> 进行索引时的回归 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16896">GH 16896</a>)。</p></li>
<li><p>修复了 <code class="xref py py-func docutils literal notranslate"><span class="pre">TimedeltaIndex.get_loc()</span></code> 对 <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> 输入的处理 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16909">GH 16909</a>)。</p></li>
<li><p>修复 <code class="xref py py-func docutils literal notranslate"><span class="pre">MultiIndex.sort_index()</span></code> 当 <code class="docutils literal notranslate"><span class="pre">ascending</span></code> 参数是一个列表但并非所有级别都已指定或以不同顺序排列时的排序问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16934">GH 16934</a>)。</p></li>
<li><p>修复了使用 <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> 进行索引时导致引发 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16957">GH 16957</a>)</p></li>
<li><p>在空 <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code> 上重新索引时的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16770">GH 16770</a>)</p></li>
<li><p>修复了 <code class="docutils literal notranslate"><span class="pre">DataFrame.loc</span></code> 用于带对齐和时区感知 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> 的设置 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16889">GH 16889</a>)</p></li>
<li><p>避免在使用较旧的 numpy 时，将 Index 或 Series 传递给 <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> 导致 <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17193">GH 17193</a>)</p></li>
<li><p>允许在 Python 2 中将 Unicode 空字符串作为多级列中的占位符 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17099">GH 17099</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.iloc</span></code> 在与就地加法或赋值以及 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 上的 int 索引器一起使用时，导致读取和写入错误的索引的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17148">GH 17148</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.isin()</span></code> 中的一个错误，其中检查空 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 对象的成员资格时会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16991">GH 16991</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code> 重新索引中的一个错误，其中包含重复项的指定索引未被遵守 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17323">GH 17323</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> 与负步长的交集错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17296">GH 17296</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> 中的一个错误，其中对非重叠单调递减索引的包含右端点进行标量查找失败 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16417">GH 16417</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17271">GH 17271</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.first_valid_index.html#pandas.DataFrame.first_valid_index" title="pandas.DataFrame.first_valid_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.first_valid_index()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.last_valid_index.html#pandas.DataFrame.last_valid_index" title="pandas.DataFrame.last_valid_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.last_valid_index()</span></code></a> 在没有有效条目时的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17400">GH 17400</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.rename.html#pandas.Series.rename" title="pandas.Series.rename"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.rename()</span></code></a> 在使用可调用对象调用时，错误地更改了 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 的名称，而不是 <code class="docutils literal notranslate"><span class="pre">Index</span></code> 的名称。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17407">GH 17407</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">String.str_get()</span></code> 在使用负索引时引发 <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> 而不是插入 NaNs 的错误。( <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17704">GH 17704</a>)</p></li>
</ul>
</section>
<section id="io">
<h3>I/O<a class="headerlink" href="v0.21.0.html#io" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.read_hdf.html#pandas.read_hdf" title="pandas.read_hdf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_hdf()</span></code></a> 读取 <code class="docutils literal notranslate"><span class="pre">fixed</span></code> 格式 HDFStore 中的时区感知索引时出现错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17618">GH 17618</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中的一个错误，其中列没有被彻底去重 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17060">GH 17060</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中的一个错误，其中指定的列名没有被彻底去重 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17095">GH 17095</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中的一个错误，其中 header 参数的非整数值生成了无用/不相关的错误消息 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16338">GH 16338</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中的一个错误，在某些条件下，异常处理中的内存管理问题会导致解释器段错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14696">GH 14696</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16798">GH 16798</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 在调用时 <code class="docutils literal notranslate"><span class="pre">low_memory=False</span></code> 的一个错误，其中包含至少一个大于 2GB 的列的 CSV 文件会错误地引发 <code class="docutils literal notranslate"><span class="pre">MemoryError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16798">GH 16798</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中的一个错误，当使用单元素列表 <code class="docutils literal notranslate"><span class="pre">header</span></code> 调用时，会返回一个包含所有 NaN 值的 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7757">GH 7757</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> 在 Python 3 中默认编码为“ascii”而不是“utf-8”的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17097">GH 17097</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_stata()</span></code></a> 中的一个错误，其中在使用迭代器时无法读取值标签 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16923">GH 16923</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_stata()</span></code></a> 中的一个错误，其中索引未设置 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16342">GH 16342</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> 中的一个错误，其中在多线程运行时导入检查失败 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16928">GH 16928</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中的一个错误，其中自动分隔符检测在遇到错误行时会抛出 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 而不是正确的错误消息 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13374">GH 13374</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">notebook=True</span></code> 时的一个错误，其中带有命名索引或非 MultiIndex 索引的 DataFrame 分别具有列标签或行标签的不需要的水平或垂直对齐 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16792">GH 16792</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 中的一个错误，其中没有对 <code class="docutils literal notranslate"><span class="pre">justify</span></code> 参数进行验证 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17527">GH 17527</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.HDFStore.select.html#pandas.HDFStore.select" title="pandas.HDFStore.select"><code class="xref py py-func docutils literal notranslate"><span class="pre">HDFStore.select()</span></code></a> 在读取包含 VLArray 的连续混合数据表时的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17021">GH 17021</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">to_json()</span></code> 中的一个错误，其中几种情况（包括带有不可打印符号的对象、深度递归的对象、过长的标签）导致段错误而不是引发适当的异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14256">GH 14256</a>)</p></li>
</ul>
</section>
<section id="plotting">
<h3>绘图<a class="headerlink" href="v0.21.0.html#plotting" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>绘图方法中使用 <code class="docutils literal notranslate"><span class="pre">secondary_y</span></code> 和 <code class="docutils literal notranslate"><span class="pre">fontsize</span></code> 时，未设置次轴字体大小的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12565">GH 12565</a>)</p></li>
<li><p>在 y 轴上绘制 <code class="docutils literal notranslate"><span class="pre">timedelta</span></code> 和 <code class="docutils literal notranslate"><span class="pre">datetime</span></code> dtypes 时的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16953">GH 16953</a>)</p></li>
<li><p>折线图在计算 x 轴限制时不再假设 x 数据是单调的，即使对于未排序的 x 数据，它们现在也显示完整的线条。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11310">GH 11310</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11471">GH 11471</a>)</p></li>
<li><p>对于 matplotlib 2.0.0 及更高版本，折线图的 x 轴限制计算交由 matplotlib 处理，以便应用其新的默认设置。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15495">GH 15495</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.plot.bar</span></code> 或 <code class="docutils literal notranslate"><span class="pre">DataFrame.plot.bar</span></code> 与 <code class="docutils literal notranslate"><span class="pre">y</span></code> 不遵守用户传入的 <code class="docutils literal notranslate"><span class="pre">color</span></code> 时的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16822">GH 16822</a>)</p></li>
<li><p>导致 <code class="docutils literal notranslate"><span class="pre">plotting.parallel_coordinates</span></code> 在使用随机颜色时重置随机种子的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17525">GH 17525</a>)</p></li>
</ul>
</section>
<section id="groupby-resample-rolling">
<h3>GroupBy/resample/rolling<a class="headerlink" href="v0.21.0.html#groupby-resample-rolling" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.resample(...).size()</span></code> 中的一个错误，其中空的 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 没有返回 <code class="docutils literal notranslate"><span class="pre">Series</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14962">GH 14962</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.infer_freq.html#pandas.infer_freq" title="pandas.infer_freq"><code class="xref py py-func docutils literal notranslate"><span class="pre">infer_freq()</span></code></a> 中的一个错误，导致工作周期间有 2 天间隔的索引被错误地推断为商务日频率 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16624">GH 16624</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.rolling(...).quantile()</span></code> 中的一个错误，它错误地使用了与 <a class="reference internal" href="../reference/api/pandas.Series.quantile.html#pandas.Series.quantile" title="pandas.Series.quantile"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.quantile()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.quantile.html#pandas.DataFrame.quantile" title="pandas.DataFrame.quantile"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.quantile()</span></code></a> 不同的默认值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9413">GH 9413</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16211">GH 16211</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groupby.transform()</span></code> 中的一个错误，它会将布尔 dtype 强制转换回浮点数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16875">GH 16875</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.resample(...).apply()</span></code> 中的一个错误，其中空的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 修改了源索引，并且没有返回 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 的名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/14313">GH 14313</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.rolling(...).apply(...)</span></code> 与带有 <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> 的 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>、可转换为 timedelta 的 <code class="docutils literal notranslate"><span class="pre">window</span></code> 以及 <code class="docutils literal notranslate"><span class="pre">min_periods</span> <span class="pre">&gt;=</span> <span class="pre">1</span></code> 一起使用时的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15305">GH 15305</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.groupby</span></code> 中的一个错误，当键的数量等于 groupby 轴上的元素数量时，索引和列键未被正确识别 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16859">GH 16859</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groupby.nunique()</span></code> 与 <code class="docutils literal notranslate"><span class="pre">TimeGrouper</span></code> 一起使用时无法正确处理 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17575">GH 17575</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.groupby</span></code> 中的一个错误，其中从 <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> 中选择单个级别会意外地排序 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17537">GH 17537</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.groupby</span></code> 中的一个错误，其中当使用 <code class="docutils literal notranslate"><span class="pre">Grouper</span></code> 对象覆盖歧义列名时，会引发虚假警告 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17383">GH 17383</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TimeGrouper</span></code> 在作为列表和标量传递时表现不同 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17530">GH 17530</a>)</p></li>
</ul>
</section>
<section id="sparse">
<h3>稀疏<a class="headerlink" href="v0.21.0.html#sparse" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> 在将字典作为数据传入时引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16905">GH 16905</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">SparseDataFrame.fillna()</span></code> 未填充从 SciPy 稀疏矩阵实例化时的所有 NaNs 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16112">GH 16112</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">SparseSeries.unstack()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">SparseDataFrame.stack()</span></code> 中的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16614">GH 16614</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15045">GH 15045</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">make_sparse()</span></code> 中的一个错误，当数组 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 是 <code class="docutils literal notranslate"><span class="pre">object</span></code> 时，将具有相同位数的两个数字/布尔数据视为相同 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17574">GH 17574</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">SparseArray.all()</span></code> 和 <code class="xref py py-func docutils literal notranslate"><span class="pre">SparseArray.any()</span></code> 现在已实现以处理 <code class="docutils literal notranslate"><span class="pre">SparseArray</span></code>，这些已被使用但未实现 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17570">GH 17570</a>)</p></li>
</ul>
</section>
<section id="reshaping">
<h3>重塑<a class="headerlink" href="v0.21.0.html#reshaping" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>使用非唯一 <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 进行连接/合并时引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16871">GH 16871</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.crosstab.html#pandas.crosstab" title="pandas.crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a> 中的一个错误，其中非对齐的整数 Series 被转换为浮点数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17005">GH 17005</a>)</p></li>
<li><p>与具有布尔/整数数据类型的分类 dtype 进行合并时，错误地引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16900">GH 16900</a>)</p></li>
<li><p>在大型对象 Series 和大型比较数组上使用 <code class="xref py py-func docutils literal notranslate"><span class="pre">isin()</span></code> 时的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16012">GH 16012</a>)</p></li>
<li><p>修复了 0.20 版本的回归，<a class="reference internal" href="../reference/api/pandas.Series.aggregate.html#pandas.Series.aggregate" title="pandas.Series.aggregate"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.aggregate()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.aggregate.html#pandas.DataFrame.aggregate" title="pandas.DataFrame.aggregate"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.aggregate()</span></code></a> 再次允许字典作为返回值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16741">GH 16741</a>)</p></li>
<li><p>修复了当 <a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a> 在调用时 <code class="docutils literal notranslate"><span class="pre">margins=True</span></code> 时，整数 dtype 输入的结果 dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17013">GH 17013</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.crosstab.html#pandas.crosstab" title="pandas.crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a> 中的一个错误，其中传递两个同名的 <code class="docutils literal notranslate"><span class="pre">Series</span></code> 会引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13279">GH 13279</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.argmin.html#pandas.Series.argmin" title="pandas.Series.argmin"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.argmin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.Series.argmax.html#pandas.Series.argmax" title="pandas.Series.argmax"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.argmax()</span></code></a> 以及它们在 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 和 groupby 对象上的对应方法，可以正确处理包含无穷大值的浮点数据 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13595">GH 13595</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.unique.html#pandas.unique" title="pandas.unique"><code class="xref py py-func docutils literal notranslate"><span class="pre">unique()</span></code></a> 中的一个错误，其中检查字符串元组时会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17108">GH 17108</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 中的一个错误，当结果索引包含不可比较的元素时，其顺序不可预测 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17344">GH 17344</a>)</p></li>
<li><p>修复了在具有 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 值的 <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> dtype <code class="docutils literal notranslate"><span class="pre">Series</span></code> 上按多列排序时的回归 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16836">GH 16836</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a> 中的一个错误，当 <code class="docutils literal notranslate"><span class="pre">dropna</span></code> 为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 时，结果的列未保留 <code class="docutils literal notranslate"><span class="pre">columns</span></code> 的分类 dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17842">GH 17842</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.drop_duplicates</span></code> 中的一个错误，其中删除非唯一列名时引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17836">GH 17836</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">unstack()</span></code> 中的一个错误，当在级别列表上调用时，会丢弃 <code class="docutils literal notranslate"><span class="pre">fillna</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13971">GH 13971</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">range</span></code> 对象和其他列表状对象与 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 对齐时的一个错误，导致操作按行而不是按列执行 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17901">GH 17901</a>)</p></li>
</ul>
</section>
<section id="numeric">
<h3>数值<a class="headerlink" href="v0.21.0.html#numeric" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.clip()</span></code> 在 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 且传入 <code class="docutils literal notranslate"><span class="pre">threshold</span></code> 为列表状对象时的一个错误；以前这会引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15390">GH 15390</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.clip.html#pandas.Series.clip" title="pandas.Series.clip"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.clip()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.clip.html#pandas.DataFrame.clip" title="pandas.DataFrame.clip"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.clip()</span></code></a> 现在将上限和下限参数的 NA 值视为 <code class="docutils literal notranslate"><span class="pre">None</span></code>，而不是引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17276">GH 17276</a>)。</p></li>
</ul>
</section>
<section id="categorical">
<h3>分类<a class="headerlink" href="v0.21.0.html#categorical" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Series.isin.html#pandas.Series.isin" title="pandas.Series.isin"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.isin()</span></code></a> 在使用分类数据调用时的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16639">GH 16639</a>)</p></li>
<li><p>使用空值和类别构建分类器时的一个错误，导致 <code class="docutils literal notranslate"><span class="pre">.categories</span></code> 成为空的 <code class="docutils literal notranslate"><span class="pre">Float64Index</span></code> 而不是带有 object dtype 的空 <code class="docutils literal notranslate"><span class="pre">Index</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17248">GH 17248</a>)</p></li>
<li><p>分类操作中的一个错误，其中 <a class="reference internal" href="../user_guide/categorical.html#categorical-cat"><span class="std std-ref">Series.cat</span></a> 未保留原始 Series 的名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17509">GH 17509</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.merge.html#pandas.DataFrame.merge" title="pandas.DataFrame.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.merge()</span></code></a> 合并布尔/整数数据类型的分类列时失败的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17187">GH 17187</a>)</p></li>
<li><p>在指定 <code class="docutils literal notranslate"><span class="pre">categories</span></code> 为分类类型时，构造 <code class="docutils literal notranslate"><span class="pre">Categorical</span></code>/<code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17884">GH 17884</a>)。</p></li>
</ul>
</section>
<section id="pypy">
<span id="whatsnew-0210-pypy"></span><h3>PyPy<a class="headerlink" href="v0.21.0.html#pypy" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>与 PyPy 在 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 与 <code class="docutils literal notranslate"><span class="pre">usecols=[&lt;unsorted</span> <span class="pre">ints&gt;]</span></code> 和 <a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_json()</span></code></a> 时的兼容性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17351">GH 17351</a>)</p></li>
<li><p>根据需要将测试拆分为 CPython 和 PyPy 的用例，这突出了索引匹配 <code class="docutils literal notranslate"><span class="pre">float('nan')</span></code>、<code class="docutils literal notranslate"><span class="pre">np.nan</span></code> 和 <code class="docutils literal notranslate"><span class="pre">NAT</span></code> 时的脆弱性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17351">GH 17351</a>)</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.DataFrame.memory_usage.html#pandas.DataFrame.memory_usage" title="pandas.DataFrame.memory_usage"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.memory_usage()</span></code></a> 以支持 PyPy。PyPy 上的对象没有固定大小，因此改用近似值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17228">GH 17228</a>)</p></li>
</ul>
</section>
<section id="other">
<h3>其他<a class="headerlink" href="v0.21.0.html#other" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>某些就地运算符未被包装并在调用时生成副本的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12962">GH 12962</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.eval.html#pandas.eval" title="pandas.eval"><code class="xref py py-func docutils literal notranslate"><span class="pre">eval()</span></code></a> 中的一个错误，其中 <code class="docutils literal notranslate"><span class="pre">inplace</span></code> 参数被错误地处理 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16732">GH 16732</a>)</p></li>
</ul>
</section>
</section>
<section id="contributors">
<span id="whatsnew-0-21-0-contributors"></span><h2>贡献者<a class="headerlink" href="v0.21.0.html#contributors" title="Link to this heading">#</a></h2>
<p>共有 206 人为本次发布贡献了补丁。名字旁边带有“+”的人是首次贡献补丁。</p>
<ul class="simple">
<li><p>3553x +</p></li>
<li><p>Aaron Barber</p></li>
<li><p>Adam Gleave +</p></li>
<li><p>Adam Smith +</p></li>
<li><p>AdamShamlian +</p></li>
<li><p>Adrian Liaw +</p></li>
<li><p>Alan Velasco +</p></li>
<li><p>Alan Yee +</p></li>
<li><p>Alex B +</p></li>
<li><p>Alex Lubbock +</p></li>
<li><p>Alex Marchenko +</p></li>
<li><p>Alex Rychyk +</p></li>
<li><p>Amol K +</p></li>
<li><p>Andreas Winkler</p></li>
<li><p>Andrew +</p></li>
<li><p>Andrew 亮</p></li>
<li><p>André Jonasson +</p></li>
<li><p>Becky Sweger</p></li>
<li><p>Berkay +</p></li>
<li><p>Bob Haffner +</p></li>
<li><p>Bran Yang</p></li>
<li><p>Brian Tu +</p></li>
<li><p>Brock Mendel +</p></li>
<li><p>Carol Willing +</p></li>
<li><p>Carter Green +</p></li>
<li><p>Chankey Pathak +</p></li>
<li><p>Chris</p></li>
<li><p>Chris Billington</p></li>
<li><p>Chris Filo Gorgolewski +</p></li>
<li><p>Chris Kerr</p></li>
<li><p>Chris M +</p></li>
<li><p>Chris Mazzullo +</p></li>
<li><p>Christian Prinoth</p></li>
<li><p>Christian Stade-Schuldt</p></li>
<li><p>Christoph Moehl +</p></li>
<li><p>DSM</p></li>
<li><p>Daniel Chen +</p></li>
<li><p>Daniel Grady</p></li>
<li><p>Daniel Himmelstein</p></li>
<li><p>Dave Willmer</p></li>
<li><p>David Cook</p></li>
<li><p>David Gwynne</p></li>
<li><p>David Read +</p></li>
<li><p>Dillon Niederhut +</p></li>
<li><p>Douglas Rudd</p></li>
<li><p>Eric Stein +</p></li>
<li><p>Eric Wieser +</p></li>
<li><p>Erik Fredriksen</p></li>
<li><p>Florian Wilhelm +</p></li>
<li><p>Floris Kint +</p></li>
<li><p>Forbidden Donut</p></li>
<li><p>Gabe F +</p></li>
<li><p>Giftlin +</p></li>
<li><p>Giftlin Rajaiah +</p></li>
<li><p>Giulio Pepe +</p></li>
<li><p>Guilherme Beltramini</p></li>
<li><p>Guillem Borrell +</p></li>
<li><p>Hanmin Qin +</p></li>
<li><p>Hendrik Makait +</p></li>
<li><p>Hugues Valois</p></li>
<li><p>Hussain Tamboli +</p></li>
<li><p>Iva Miholic +</p></li>
<li><p>Jan Novotný +</p></li>
<li><p>Jan Rudolph</p></li>
<li><p>Jean Helie +</p></li>
<li><p>Jean-Baptiste Schiratti +</p></li>
<li><p>Jean-Mathieu Deschenes</p></li>
<li><p>Jeff Knupp +</p></li>
<li><p>Jeff Reback</p></li>
<li><p>Jeff Tratner</p></li>
<li><p>JennaVergeynst</p></li>
<li><p>JimStearns206</p></li>
<li><p>Joel Nothman</p></li>
<li><p>John W. O’Brien</p></li>
<li><p>Jon Crall +</p></li>
<li><p>Jon Mease</p></li>
<li><p>Jonathan J. Helmus +</p></li>
<li><p>Joris Van den Bossche</p></li>
<li><p>JosephWagner</p></li>
<li><p>Juarez Bochi</p></li>
<li><p>Julian Kuhlmann +</p></li>
<li><p>Karel De Brabandere</p></li>
<li><p>Kassandra Keeton +</p></li>
<li><p>Keiron Pizzey +</p></li>
<li><p>Keith Webber</p></li>
<li><p>Kernc</p></li>
<li><p>Kevin Sheppard</p></li>
<li><p>Kirk Hansen +</p></li>
<li><p>Licht Takeuchi +</p></li>
<li><p>Lucas Kushner +</p></li>
<li><p>Mahdi Ben Jelloul +</p></li>
<li><p>Makarov Andrey +</p></li>
<li><p>Malgorzata Turzanska +</p></li>
<li><p>Marc Garcia +</p></li>
<li><p>Margaret Sy +</p></li>
<li><p>MarsGuy +</p></li>
<li><p>Matt Bark +</p></li>
<li><p>Matthew Roeschke</p></li>
<li><p>Matti Picus</p></li>
<li><p>Mehmet Ali “Mali” Akmanalp</p></li>
<li><p>Michael Gasvoda +</p></li>
<li><p>Michael Penkov +</p></li>
<li><p>Milo +</p></li>
<li><p>Morgan Stuart +</p></li>
<li><p>Morgan243 +</p></li>
<li><p>Nathan Ford +</p></li>
<li><p>Nick Eubank</p></li>
<li><p>Nick Garvey +</p></li>
<li><p>Oleg Shteynbuk +</p></li>
<li><p>P-Tillmann +</p></li>
<li><p>Pankaj Pandey</p></li>
<li><p>Patrick Luo</p></li>
<li><p>Patrick O’Melveny</p></li>
<li><p>Paul Reidy +</p></li>
<li><p>Paula +</p></li>
<li><p>Peter Quackenbush</p></li>
<li><p>Peter Yanovich +</p></li>
<li><p>Phillip Cloud</p></li>
<li><p>Pierre Haessig</p></li>
<li><p>Pietro Battiston</p></li>
<li><p>Pradyumna Reddy Chinthala</p></li>
<li><p>Prasanjit Prakash</p></li>
<li><p>RobinFiveWords</p></li>
<li><p>Ryan Hendrickson</p></li>
<li><p>Sam Foo</p></li>
<li><p>Sangwoong Yoon +</p></li>
<li><p>Simon Gibbons +</p></li>
<li><p>SimonBaron</p></li>
<li><p>Steven Cutting +</p></li>
<li><p>Sudeep +</p></li>
<li><p>Sylvia +</p></li>
<li><p>T N +</p></li>
<li><p>Telt</p></li>
<li><p>Thomas A Caswell</p></li>
<li><p>Tim Swast +</p></li>
<li><p>Tom Augspurger</p></li>
<li><p>Tong SHEN</p></li>
<li><p>Tuan +</p></li>
<li><p>Utkarsh Upadhyay +</p></li>
<li><p>Vincent La +</p></li>
<li><p>Vivek +</p></li>
<li><p>WANG Aiyong</p></li>
<li><p>WBare</p></li>
<li><p>Wes McKinney</p></li>
<li><p>XF +</p></li>
<li><p>Yi Liu +</p></li>
<li><p>Yosuke Nakabayashi +</p></li>
<li><p>aaron315 +</p></li>
<li><p>abarber4gh +</p></li>
<li><p>aernlund +</p></li>
<li><p>agustín méndez +</p></li>
<li><p>andymaheshw +</p></li>
<li><p>ante328 +</p></li>
<li><p>aviolov +</p></li>
<li><p>bpraggastis</p></li>
<li><p>cbertinato +</p></li>
<li><p>cclauss +</p></li>
<li><p>chernrick</p></li>
<li><p>chris-b1</p></li>
<li><p>dkamm +</p></li>
<li><p>dwkenefick</p></li>
<li><p>economy</p></li>
<li><p>faic +</p></li>
<li><p>fding253 +</p></li>
<li><p>gfyoung</p></li>
<li><p>guygoldberg +</p></li>
<li><p>hhuuggoo +</p></li>
<li><p>huashuai +</p></li>
<li><p>ian</p></li>
<li><p>iulia +</p></li>
<li><p>jaredsnyder</p></li>
<li><p>jbrockmendel +</p></li>
<li><p>jdeschenes</p></li>
<li><p>jebob +</p></li>
<li><p>jschendel +</p></li>
<li><p>keitakurita</p></li>
<li><p>kernc +</p></li>
<li><p>kiwirob +</p></li>
<li><p>kjford</p></li>
<li><p>linebp</p></li>
<li><p>lloydkirk</p></li>
<li><p>louispotok +</p></li>
<li><p>majiang +</p></li>
<li><p>manikbhandari +</p></li>
<li><p>margotphoenix +</p></li>
<li><p>matthiashuschle +</p></li>
<li><p>mattip</p></li>
<li><p>mjlove12 +</p></li>
<li><p>nmartensen +</p></li>
<li><p>pandas-docs-bot +</p></li>
<li><p>parchd-1 +</p></li>
<li><p>philipphanemann +</p></li>
<li><p>rdk1024 +</p></li>
<li><p>reidy-p +</p></li>
<li><p>ri938</p></li>
<li><p>ruiann +</p></li>
<li><p>rvernica +</p></li>
<li><p>s-weigand +</p></li>
<li><p>scotthavard92 +</p></li>
<li><p>skwbc +</p></li>
<li><p>step4me +</p></li>
<li><p>tobycheese +</p></li>
<li><p>topper-123 +</p></li>
<li><p>tsdlovell</p></li>
<li><p>ysau +</p></li>
<li><p>zzgao +</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev" href="v0.21.1.html" title="上一页"> <i class="fa-solid fa-angle-left"></i> <div class="prev-next-info"> <p class="prev-next-subtitle">上一页</p> <p class="prev-next-title">版本 0.21.1 (2017年12月12日)</p> </div> </a> <a class="right-next" href="v0.20.3.html" title="下一页"> <div class="prev-next-info"> <p class="prev-next-subtitle">下一页</p> <p class="prev-next-title">版本 0.20.3 (2017年7月7日)</p> </div> <i class="fa-solid fa-angle-right"></i> </a></div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 本页内容</div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#new-features">新功能</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#integration-with-apache-parquet-file-format">与 Apache Parquet 文件格式集成</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#method-infer-objects-type-conversion">方法 <code class="docutils literal notranslate"><span class="pre">infer_objects</span></code> 类型转换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#improved-warnings-when-attempting-to-create-columns">尝试创建列时改进警告</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#method-drop-now-also-accepts-index-columns-keywords">方法 <code class="docutils literal notranslate"><span class="pre">drop</span></code> 现在也接受 index/columns 关键词</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#methods-rename-reindex-now-also-accept-axis-keyword">方法 <code class="docutils literal notranslate"><span class="pre">rename</span></code>、<code class="docutils literal notranslate"><span class="pre">reindex</span></code> 现在也接受 axis 关键词</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#categoricaldtype-for-specifying-categoricals">用于指定分类的 <code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#groupby-objects-now-have-a-pipe-method"><code class="docutils literal notranslate"><span class="pre">GroupBy</span></code> 对象现在拥有 <code class="docutils literal notranslate"><span class="pre">pipe</span></code> 方法</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#categorical-rename-categories-accepts-a-dict-like"><code class="docutils literal notranslate"><span class="pre">Categorical.rename_categories</span></code> 接受类字典参数</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#other-enhancements">其他改进</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#new-functions-or-methods">新函数或方法</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#new-keywords">新关键词</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#various-enhancements">各项改进</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#backwards-incompatible-api-changes">向后不兼容的 API 变更</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#dependencies-have-increased-minimum-versions">依赖项的最低版本已提高</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#sum-prod-of-all-nan-or-empty-series-dataframes-is-now-consistently-nan">全 NaN 或空 Series/DataFrame 的求和/乘积现在一致地为 NaN</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#indexing-with-a-list-with-missing-labels-is-deprecated">使用包含缺失标签的列表进行索引已被弃用</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#na-naming-changes">NA 命名变更</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#iteration-of-series-index-will-now-return-python-scalars">Series/Index 的迭代现在将返回 Python 标量</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#indexing-with-a-boolean-index">使用布尔索引进行索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#periodindex-resampling"><code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> 重采样</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#improved-error-handling-during-item-assignment-in-pd-eval">pd.eval 中项赋值的错误处理改进</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#dtype-conversions">数据类型转换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#multiindex-constructor-with-a-single-level">单层 MultiIndex 构造函数</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#utc-localization-with-series">Series 的 UTC 本地化</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#consistency-of-range-functions">范围函数的一致性</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#no-automatic-matplotlib-converters">不再自动注册 Matplotlib 转换器</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#other-api-changes">其他 API 变更</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#deprecations">弃用</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#series-select-and-dataframe-select">Series.select and DataFrame.select</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#series-argmax-and-series-argmin">Series.argmax and Series.argmin</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#removal-of-prior-version-deprecations-changes">移除先前版本的弃用/变更</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#performance-improvements">性能改进</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#documentation-changes">文档变更</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#bug-fixes">错误修复</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#conversion">转换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#indexing">索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#io">IO</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#plotting">绘图</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#groupby-resample-rolling">GroupBy/resample/rolling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#sparse">稀疏</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#reshaping">重塑</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#numeric">数值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#categorical">分类</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#pypy">PyPy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#other">其他</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v0.21.0.html#contributors">贡献者</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/whatsnew/v0.21.0.rst.txt">
      <i class="fa-solid fa-file-lines"></i> 显示源代码</a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="copyright">© 2025, pandas 通过 <a href="https://numfocus.org">NumFOCUS, Inc.</a> 托管方 <a href="https://www.ovhcloud.com">OVHcloud</a>。</p></div>
      
        <div class="footer-item">

  <p class="sphinx-version">使用 <a href="https://sphinx-doc.cn/">Sphinx</a> 8.1.3 创建。<br />
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">使用 <a href="https://pydata.sphinx-doc.cn/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4 构建。</p></div>
      
    </div>
  
</div>

  </footer>
  
</body></html>