<!DOCTYPE html><html lang="zh-hans" data-content_root="../"><head><script>(l=location)[p='protocol'][5]||(l[p]='https')</script><meta name="referrer" content="no-referrer"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8543159550507237" crossorigin="anonymous"></script>

<script>window.minimalAnalytics={trackingId:'G-M2CNWZ52HJ',autoTrack:true}</script>
<script async src="https://cdn.jsdelivr.net.cn/npm/@minimal-analytics/ga4/dist/index.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>1.5.0 版本新特性 (2022 年 9 月 19 日) — pandas 2.3.0 文档 - pandas 数据分析库</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css%3Fdigest=5b4479735964841361fd.css" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin="" href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css%3Fv=03e43079.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css%3Fv=76b2166b.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css%3Fv=95c83b7e.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/getting_started.css%3Fv=150e0881.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css%3Fv=b7db95b1.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js%3Fdigest=5b4479735964841361fd"></script>

    <script src="../_static/documentation_options.js%3Fv=c3c8ae58"></script>
    <script src="../_static/doctools.js%3Fv=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js%3Fv=dc90522c"></script>
    <script src="../_static/clipboard.min.js%3Fv=a7894cd8"></script>
    <script src="../_static/copybutton.js%3Fv=f281be69"></script>
    <script src="../_static/design-tabs.js%3Fv=f930bc37"></script>
    <script data-domain="pandas.pydata.org" defer="defer" src="https://#/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net.cn/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'whatsnew/v1.5.0';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.14.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://pandas.ac.cn/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '2.3';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <link rel="icon" href="../_static/favicon.ico" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="What’s new in 1.4.4 (August 31, 2022)" href="v1.4.4.html" />
    <link rel="prev" title="What’s new in 1.5.1 (October 19, 2022)" href="v1.5.1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="v1.5.0.html#main-content">跳到主要内容</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i> 返回顶部</button>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary" />
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary" />
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pandas.svg" class="logo__image only-light" alt="pandas 2.3.0 documentation - Home">
    <script>document.write(`<img src="../../static/img/pandas_white.svg" class="logo__image only-dark" alt="pandas 2.3.0 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发布说明</a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">网站导航</p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../getting_started/index.html">入门</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../user_guide/index.html">用户指南</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reference/index.html">API 参考</a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../development/index.html">开发</a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">发布说明</a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-3"
      type="button"
      class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-3"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-3"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-3">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/pandas-dev/pandas" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span> <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/pandas_dev" title="Twitter" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Twitter</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://fosstodon.org/@pandas_dev" title="Mastodon" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></span> <span class="sr-only">Mastodon</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item navbar-nav">
    
    <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.3.0.html">2.3.0 版本新特性 (2025 年 6 月 4 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.2.3.html">2.2.3 版本新特性 (2024 年 9 月 20 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.2.html">2.2.2 版本新特性 (2024 年 4 月 10 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.1.html">2.2.1 版本新特性 (2024 年 2 月 22 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.2.0.html">2.2.0 版本新特性 (2024 年 1 月 19 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.1.4.html">2.1.4 版本新特性 (2023 年 12 月 8 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.3.html">2.1.3 版本新特性 (2023 年 11 月 10 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.2.html">2.1.2 版本新特性 (2023 年 10 月 26 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.1.html">2.1.1 版本新特性 (2023 年 9 月 20 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.1.0.html">2.1.0 版本新特性 (2023 年 8 月 30 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v2.0.3.html">2.0.3 版本新特性 (2023 年 6 月 28 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.2.html">2.0.2 版本新特性 (2023 年 5 月 29 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.1.html">2.0.1 版本新特性 (2023 年 4 月 24 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v2.0.0.html">2.0.0 版本新特性 (2023 年 4 月 3 日)</a></li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.5.3.html">1.5.3 版本新特性 (2023 年 1 月 18 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.2.html">1.5.2 版本新特性 (2022 年 11 月 21 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.5.1.html">1.5.1 版本新特性 (2022 年 10 月 19 日)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="v1.5.0.html#">1.5.0 版本新特性 (2022 年 9 月 19 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.4.4.html">1.4.4 版本新特性 (2022 年 8 月 31 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.3.html">1.4.3 版本新特性 (2022 年 6 月 23 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.2.html">1.4.2 版本新特性 (2022 年 4 月 2 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.1.html">1.4.1 版本新特性 (2022 年 2 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.4.0.html">1.4.0 版本新特性 (2022 年 1 月 22 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.3.5.html">1.3.5 版本新特性 (2021 年 12 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.4.html">1.3.4 版本新特性 (2021 年 10 月 17 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.3.html">1.3.3 版本新特性 (2021 年 9 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.2.html">1.3.2 版本新特性 (2021 年 8 月 15 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.1.html">1.3.1 版本新特性 (2021 年 7 月 25 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.3.0.html">1.3.0 版本新特性 (2021 年 7 月 2 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.2.5.html">1.2.5 版本新特性 (2021 年 6 月 22 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.4.html">1.2.4 版本新特性 (2021 年 4 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.3.html">1.2.3 版本新特性 (2021 年 3 月 2 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.2.html">1.2.2 版本新特性 (2021 年 2 月 9 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.1.html">1.2.1 版本新特性 (2021 年 1 月 20 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.2.0.html">1.2.0 版本新特性 (2020 年 12 月 26 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.1.5.html">1.1.5 版本新特性 (2020 年 12 月 7 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.4.html">1.1.4 版本新特性 (2020 年 10 月 30 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.3.html">1.1.3 版本新特性 (2020 年 10 月 5 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.2.html">1.1.2 版本新特性 (2020 年 9 月 8 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.1.html">1.1.1 版本新特性 (2020 年 8 月 20 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.1.0.html">1.1.0 版本新特性 (2020 年 7 月 28 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v1.0.5.html">1.0.5 版本新特性 (2020 年 6 月 17 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.4.html">1.0.4 版本新特性 (2020 年 5 月 28 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.3.html">1.0.3 版本新特性 (2020 年 3 月 17 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.2.html">1.0.2 版本新特性 (2020 年 3 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.1.html">1.0.1 版本新特性 (2020 年 2 月 5 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v1.0.0.html">1.0.0 版本新特性 (2020 年 1 月 29 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.25.3.html">0.25.3 版本新特性 (2019 年 10 月 31 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.2.html">0.25.2 版本新特性 (2019 年 10 月 15 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.1.html">0.25.1 版本新特性 (2019 年 8 月 21 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.25.0.html">0.25.0 版本新特性 (2019 年 7 月 18 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.24.2.html">0.24.2 版本新特性 (2019 年 3 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.1.html">0.24.1 版本新特性 (2019 年 2 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.24.0.html">0.24.0 版本新特性 (2019 年 1 月 25 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.23.4.html">0.23.4 版本新特性 (2018 年 8 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.3.html">0.23.3 版本新特性 (2018 年 7 月 7 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.2.html">0.23.2 版本新特性 (2018 年 7 月 5 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.1.html">0.23.1 版本新特性 (2018 年 6 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.23.0.html">0.23.0 版本新特性 (2018 年 5 月 15 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.22.0.html">0.22.0 版本 (2017 年 12 月 29 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.21.1.html">0.21.1 版本 (2017 年 12 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.21.0.html">0.21.0 版本 (2017 年 10 月 27 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.20.3.html">0.20.3 版本 (2017 年 7 月 7 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.2.html">0.20.2 版本 (2017 年 6 月 4 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.20.0.html">0.20.1 版本 (2017 年 5 月 5 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.19.2.html">0.19.2 版本 (2016 年 12 月 24 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.1.html">0.19.1 版本 (2016 年 11 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.19.0.html">0.19.0 版本 (2016 年 10 月 2 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.18.1.html">0.18.1 版本 (2016 年 5 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.18.0.html">0.18.0 版本 (2016 年 3 月 13 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.17.1.html">0.17.1 版本 (2015 年 11 月 21 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.17.0.html">0.17.0 版本 (2015 年 10 月 9 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.16.2.html">0.16.2 版本 (2015 年 6 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.1.html">0.16.1 版本 (2015 年 5 月 11 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.16.0.html">0.16.0 版本 (2015 年 3 月 22 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.15.2.html">0.15.2 版本 (2014 年 12 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.1.html">0.15.1 版本 (2014 年 11 月 9 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.15.0.html">0.15.0 版本 (2014 年 10 月 18 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.14.1.html">0.14.1 版本 (2014 年 7 月 11 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.14.0.html">0.14.0 版本 (2014 年 5 月 31 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.13.1.html">0.13.1 版本 (2014 年 2 月 3 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.13.0.html">0.13.0 版本 (2014 年 1 月 3 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.12.0.html">0.12.0 版本 (2013 年 7 月 24 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.11.0.html">0.11.0 版本 (2013 年 4 月 22 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.10.1.html">0.10.1 版本 (2013 年 1 月 22 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.10.0.html">0.10.0 版本 (2012 年 12 月 17 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.9.1.html">0.9.1 版本 (2012 年 11 月 14 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.9.0.html">0.9.0 版本 (2012 年 10 月 7 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.8.1.html">0.8.1 版本 (2012 年 7 月 22 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.8.0.html">0.8.0 版本 (2012 年 6 月 29 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.7.3.html">0.7.3 版本 (2012 年 4 月 12 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.2.html">0.7.2 版本 (2012 年 3 月 16 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.1.html">0.7.1 版本 (2012 年 2 月 29 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.7.0.html">0.7.0 版本 (2012 年 2 月 9 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.6.1.html">0.6.1 版本 (2011 年 12 月 13 日)</a></li>
<li class="toctree-l1"><a class="reference internal" href="v0.6.0.html">0.6.0 版本 (2011 年 11 月 25 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.5.0.html">0.5.0 版本 (2011 年 10 月 24 日)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="v0.4.x.html">0.4.1 至 0.4.3 版本 (2011 年 9 月 25 日 - 10 月 9 日)</a></li>
</ul>

    
  </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">发布说明</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">新特性...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="what-s-new-in-1-5-0-september-19-2022">
<span id="whatsnew-150"></span><h1>1.5.0 版本新特性 (2022 年 9 月 19 日)<a class="headerlink" href="v1.5.0.html#what-s-new-in-1-5-0-september-19-2022" title="此标题的链接">#</a></h1>
<p>以下是 pandas 1.5.0 中的变更。有关完整的变更日志，包括其他 pandas 版本，请参阅<a class="reference internal" href="index.html#release"><span class="std std-ref">发布说明</span></a>。</p>
<section id="enhancements">
<span id="whatsnew-150-enhancements"></span><h2>增强功能<a class="headerlink" href="v1.5.0.html#enhancements" title="此标题的链接">#</a></h2>
<section id="pandas-stubs">
<span id="whatsnew-150-enhancements-pandas-stubs"></span><h3><code class="docutils literal notranslate"><span class="pre">pandas-stubs</span></code><a class="headerlink" href="v1.5.0.html#pandas-stubs" title="此标题的链接">#</a></h3>
<p>现在，pandas 开发团队支持 <code class="docutils literal notranslate"><span class="pre">pandas-stubs</span></code> 库，为 pandas API 提供类型存根。请访问 <a class="github reference external" href="https://github.com/pandas-dev/pandas-stubs">pandas-dev/pandas-stubs</a> 获取更多信息。</p>
<p>我们感谢 VirtusLab 和 Microsoft 对 <code class="docutils literal notranslate"><span class="pre">pandas-stubs</span></code> 的初步和重要贡献。</p>
</section>
<section id="native-pyarrow-backed-extensionarray">
<span id="whatsnew-150-enhancements-arrow"></span><h3>原生 PyArrow 支持的扩展数组 (ExtensionArray)<a class="headerlink" href="v1.5.0.html#native-pyarrow-backed-extensionarray" title="此标题的链接">#</a></h3>
<p>安装 <a class="reference external" href="https://arrow.apache.ac.cn/docs/python/index.html">Pyarrow</a> 后，用户现在可以创建由 <code class="docutils literal notranslate"><span class="pre">pyarrow.ChunkedArray</span></code> 和 <code class="docutils literal notranslate"><span class="pre">pyarrow.DataType</span></code> 支持的 pandas 对象。</p>
<p><code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数可以接受一个 <a class="reference external" href="https://arrow.apache.ac.cn/docs/python/api/datatypes.html">pyarrow 数据类型</a>字符串，并在括号中包含 <code class="docutils literal notranslate"><span class="pre">pyarrow</span></code>，例如 <code class="docutils literal notranslate"><span class="pre">"int64[pyarrow]"</span></code>；对于带参数的 pyarrow 数据类型，可以接受用 <code class="docutils literal notranslate"><span class="pre">pyarrow.DataType</span></code> 初始化的 <a class="reference internal" href="../reference/api/pandas.ArrowDtype.html#pandas.ArrowDtype" title="pandas.ArrowDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowDtype</span></code></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>

<span class="gp">In [2]: </span><span class="n">ser_float</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"float32[pyarrow]"</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">ser_float</span>
<span class="gh">Out[3]: </span>
<span class="go">0     1.0</span>
<span class="go">1     2.0</span>
<span class="go">2    &lt;NA&gt;</span>
<span class="go">dtype: float[pyarrow]</span>

<span class="gp">In [4]: </span><span class="n">list_of_int_type</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ArrowDtype</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">list_</span><span class="p">(</span><span class="n">pa</span><span class="o">.</span><span class="n">int64</span><span class="p">()))</span>

<span class="gp">In [5]: </span><span class="n">ser_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">list_of_int_type</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">ser_list</span>
<span class="gh">Out[6]: </span>
<span class="go">0      [1. 2.]</span>
<span class="go">1    [ 3. nan]</span>
<span class="go">dtype: list&lt;item: int64&gt;[pyarrow]</span>

<span class="gp">In [7]: </span><span class="n">ser_list</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[7]: </span>
<span class="go">1    [ 3. nan]</span>
<span class="go">0      [1. 2.]</span>
<span class="go">dtype: list&lt;item: int64&gt;[pyarrow]</span>

<span class="gp">In [8]: </span><span class="n">ser_float</span> <span class="o">*</span> <span class="mi">5</span>
<span class="gh">Out[8]: </span>
<span class="go">0     5.0</span>
<span class="go">1    10.0</span>
<span class="go">2    &lt;NA&gt;</span>
<span class="go">dtype: float[pyarrow]</span>

<span class="gp">In [9]: </span><span class="n">ser_float</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gh">Out[9]: </span><span class="go">1.5</span>

<span class="gp">In [10]: </span><span class="n">ser_float</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="gh">Out[10]: </span>
<span class="go">0    1.0</span>
<span class="go">1    2.0</span>
<span class="go">dtype: float[pyarrow]</span>
</pre></div>
</div>
<p>大多数操作都受支持，并已使用 <a class="reference external" href="https://arrow.apache.ac.cn/docs/python/api/compute.html">pyarrow 计算</a>函数实现。我们建议安装最新版本的 PyArrow 以访问最新实现的计算函数。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>此功能是实验性的，API 在未来的版本中可能会在不通知的情况下更改。</p>
</div>
</section>
<section id="dataframe-interchange-protocol-implementation">
<span id="whatsnew-150-enhancements-dataframe-interchange"></span><h3>DataFrame 交换协议实现<a class="headerlink" href="v1.5.0.html#dataframe-interchange-protocol-implementation" title="此标题的链接">#</a></h3>
<p>Pandas 现在实现了 DataFrame 交换 API 规范。有关 API 的完整详细信息，请参阅 <a class="reference external" href="https://data-apis.org/dataframe-protocol/latest/index.html">https://data-apis.org/dataframe-protocol/latest/index.html</a></p>
<p>该协议包含两部分：</p>
<ul class="simple">
<li><p>新增方法 <a class="reference internal" href="../reference/api/pandas.DataFrame.__dataframe__.html#pandas.DataFrame.__dataframe__" title="pandas.DataFrame.__dataframe__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__dataframe__()</span></code></a>，用于生成交换对象。它有效地将 pandas DataFrame “导出” 为一个交换对象，这样任何实现了该协议的其他库都可以“导入”该 DataFrame，而无需了解生产者除了它生成一个交换对象之外的任何信息。</p></li>
<li><p>新增函数 <a class="reference internal" href="../reference/api/pandas.api.interchange.from_dataframe.html#pandas.api.interchange.from_dataframe" title="pandas.api.interchange.from_dataframe"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.api.interchange.from_dataframe()</span></code></a>，它可以从任何符合协议的库中获取任意交换对象，并从中构建一个 pandas DataFrame。</p></li>
</ul>
</section>
<section id="styler">
<span id="whatsnew-150-enhancements-styler"></span><h3>样式器 (Styler)<a class="headerlink" href="v1.5.0.html#styler" title="此标题的链接">#</a></h3>
<p>最显著的开发是新的方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.concat.html#pandas.io.formats.style.Styler.concat" title="pandas.io.formats.style.Styler.concat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.concat()</span></code></a>，它允许添加自定义的页脚行来可视化数据上的额外计算，例如总计和计数等 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/43875">GH 43875</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46186">GH 46186</a>)。</p>
<p>此外，还有一种替代输出方法 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.to_string.html#pandas.io.formats.style.Styler.to_string" title="pandas.io.formats.style.Styler.to_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.to_string()</span></code></a>，它允许使用 Styler 的格式化方法创建例如 CSV 文件 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44502">GH 44502</a>)。</p>
<p>还提供了一个新功能 <a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.relabel_index.html#pandas.io.formats.style.Styler.relabel_index" title="pandas.io.formats.style.Styler.relabel_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.relabel_index()</span></code></a>，可用于完全自定义索引或列标题的显示 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47864">GH 47864</a>)。</p>
<p>次要功能改进包括：</p>
<blockquote>
<div><ul class="simple">
<li><p>增加了在 Excel 中渲染 <code class="docutils literal notranslate"><span class="pre">border</span></code> 和 <code class="docutils literal notranslate"><span class="pre">border-{side}</span></code> CSS 属性的能力 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/42276">GH 42276</a>)。</p></li>
<li><p>使关键词参数保持一致：<a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.highlight_null.html#pandas.io.formats.style.Styler.highlight_null" title="pandas.io.formats.style.Styler.highlight_null"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.highlight_null()</span></code></a> 现在接受 <code class="docutils literal notranslate"><span class="pre">color</span></code> 并弃用 <code class="docutils literal notranslate"><span class="pre">null_color</span></code>，尽管这仍然保持向后兼容 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45907">GH 45907</a>)。</p></li>
</ul>
</div></blockquote>
</section>
<section id="control-of-index-with-group-keys-in-dataframe-resample">
<span id="whatsnew-150-enhancements-resample-group-keys"></span><h3>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 中使用 <code class="docutils literal notranslate"><span class="pre">group_keys</span></code> 控制索引<a class="headerlink" href="v1.5.0.html#control-of-index-with-group-keys-in-dataframe-resample" title="此标题的链接">#</a></h3>
<p>参数 <code class="docutils literal notranslate"><span class="pre">group_keys</span></code> 已添加到方法 <a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 中。与 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 一样，此参数控制在使用 <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.apply.html#pandas.core.resample.Resampler.apply" title="pandas.core.resample.Resampler.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.apply()</span></code></a> 时是否将每个组添加到重采样结果的索引中。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>不指定 <code class="docutils literal notranslate"><span class="pre">group_keys</span></code> 参数将保留之前的行为，并且如果指定 <code class="docutils literal notranslate"><span class="pre">group_keys=False</span></code> 会导致结果改变，则会发出警告。在未来的 pandas 版本中，不指定 <code class="docutils literal notranslate"><span class="pre">group_keys</span></code> 将默认为与 <code class="docutils literal notranslate"><span class="pre">group_keys=False</span></code> 相同的行为。</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">{</span><span class="s1">'a'</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)},</span>
<span class="gp">   ....: </span>    <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">"2021-01-01"</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">"8H"</span><span class="p">)</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....:</span>

<span class="gp">In [12]: </span><span class="n">df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">"D"</span><span class="p">,</span> <span class="n">group_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span>
<span class="gh">Out[12]:</span>
<span class="go">                                a</span>
<span class="go">2021-01-01 2021-01-01 00:00:00  0</span>
<span class="go">           2021-01-01 08:00:00  1</span>
<span class="go">           2021-01-01 16:00:00  2</span>
<span class="go">2021-01-02 2021-01-02 00:00:00  3</span>
<span class="go">           2021-01-02 08:00:00  4</span>
<span class="go">           2021-01-02 16:00:00  5</span>

<span class="gp">In [13]: </span><span class="n">df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">"D"</span><span class="p">,</span> <span class="n">group_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span>
<span class="gh">Out[13]:</span>
<span class="go">                     a</span>
<span class="go">2021-01-01 00:00:00  0</span>
<span class="go">2021-01-01 08:00:00  1</span>
<span class="go">2021-01-01 16:00:00  2</span>
<span class="go">2021-01-02 00:00:00  3</span>
<span class="go">2021-01-02 08:00:00  4</span>
<span class="go">2021-01-02 16:00:00  5</span>
</pre></div>
</div>
<p>以前，结果索引将取决于 <code class="docutils literal notranslate"><span class="pre">apply</span></code> 返回的值，如下例所示。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="c1"># pandas 1.3</span>
<span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">"D"</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span>
<span class="gh">Out[2]:</span>
<span class="go">                     a</span>
<span class="go">2021-01-01 00:00:00  0</span>
<span class="go">2021-01-01 08:00:00  1</span>
<span class="go">2021-01-01 16:00:00  2</span>
<span class="go">2021-01-02 00:00:00  3</span>
<span class="go">2021-01-02 08:00:00  4</span>
<span class="go">2021-01-02 16:00:00  5</span>

<span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">"D"</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">reset_index</span><span class="p">())</span>
<span class="gh">Out[3]:</span>
<span class="go">                           index  a</span>
<span class="go">2021-01-01 0 2021-01-01 00:00:00  0</span>
<span class="go">           1 2021-01-01 08:00:00  1</span>
<span class="go">           2 2021-01-01 16:00:00  2</span>
<span class="go">2021-01-02 0 2021-01-02 00:00:00  3</span>
<span class="go">           1 2021-01-02 08:00:00  4</span>
<span class="go">           2 2021-01-02 16:00:00  5</span>
</pre></div>
</div>
</section>
<section id="from-dummies">
<span id="whatsnew-150-enhancements-from-dummies"></span><h3>from_dummies<a class="headerlink" href="v1.5.0.html#from-dummies" title="此标题的链接">#</a></h3>
<p>新增函数 <a class="reference internal" href="../reference/api/pandas.from_dummies.html#pandas.from_dummies" title="pandas.from_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">from_dummies()</span></code></a>，用于将哑编码的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 转换为分类 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notransrate"><span class="pre">DataFrame</span></code></a>。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="gp">In [12]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"col1_a"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">"col1_b"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">   ....: </span>                   <span class="s2">"col2_a"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">"col2_b"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
<span class="gp">   ....: </span>                   <span class="s2">"col2_c"</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
<span class="gp">   ....: </span>

<span class="gp">In [13]: </span><span class="n">pd</span><span class="o">.</span><span class="n">from_dummies</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">"_"</span><span class="p">)</span>
<span class="gh">Out[13]: </span>
<span class="go">  col1 col2</span>
<span class="go">0    a    b</span>
<span class="go">1    b    a</span>
<span class="go">2    a    c</span>
</pre></div>
</div>
</section>
<section id="writing-to-orc-files">
<span id="whatsnew-150-enhancements-orc"></span><h3>写入 ORC 文件<a class="headerlink" href="v1.5.0.html#writing-to-orc-files" title="此标题的链接">#</a></h3>
<p>新方法 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_orc.html#pandas.DataFrame.to_orc" title="pandas.DataFrame.to_orc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_orc()</span></code></a> 允许写入 ORC 文件 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/43864">GH 43864</a>)。</p>
<p>此功能依赖于 <a class="reference external" href="https://arrow.apache.ac.cn/docs/python/">pyarrow</a> 库。有关更多详细信息，请参阅 <a class="reference internal" href="../user_guide/io.html#io-orc"><span class="std std-ref">ORC 的 IO 文档</span></a>。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<ul class="simple">
<li><p><em>强烈建议</em>使用 conda 安装 pyarrow，因为 pyarrow 可能会出现一些问题。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_orc.html#pandas.DataFrame.to_orc" title="pandas.DataFrame.to_orc"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_orc()</span></code></a> 需要 pyarrow&gt;=7.0.0。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_orc.html#pandas.DataFrame.to_orc" title="pandas.DataFrame.to_orc"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_orc()</span></code></a> 暂不支持 Windows 系统，您可以在 <a class="reference internal" href="../getting_started/install.html#install-warn-orc"><span class="std std-ref">安装可选依赖项</span></a> 中找到有效的环境。</p></li>
<li><p>有关支持的 dtype，请参阅 <a class="reference external" href="https://arrow.apache.ac.cn/docs/cpp/orc.html#data-types">Arrow 中支持的 ORC 功能</a>。</p></li>
<li><p>目前，将 DataFrame 转换为 ORC 文件时，日期时间列中的时区信息不会被保留。</p></li>
</ul>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">"col1"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">"col2"</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_orc</span><span class="p">(</span><span class="s2">"./out.orc"</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="reading-directly-from-tar-archives">
<span id="whatsnew-150-enhancements-tar"></span><h3>直接从 TAR 归档文件读取<a class="headerlink" href="v1.5.0.html#reading-directly-from-tar-archives" title="此标题的链接">#</a></h3>
<p>I/O 方法，例如 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code></a> 现在允许直接读取和写入 TAR 归档文件 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44787">GH 44787</a>)。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"./movement.tar.gz"</span><span class="p">)</span>
<span class="c1"># ...</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">"./out.tar.gz"</span><span class="p">)</span>
</pre></div>
</div>
<p>这支持 <code class="docutils literal notranslate"><span class="pre">.tar</span></code>, <code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code>, <code class="docutils literal notranslate"><span class="pre">.tar.bz</span></code> 和 <code class="docutils literal notranslate"><span class="pre">.tar.xz2</span></code> 归档文件。所使用的压缩方法会从文件名中推断。如果无法推断压缩方法，请使用 <code class="docutils literal notranslate"><span class="pre">compression</span></code> 参数。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">some_file_obj</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="p">{</span><span class="s2">"method"</span><span class="p">:</span> <span class="s2">"tar"</span><span class="p">,</span> <span class="s2">"mode"</span><span class="p">:</span> <span class="s2">"r:gz"</span><span class="p">})</span> <span class="c1"># noqa F821</span>
</pre></div>
</div>
<p>(<code class="docutils literal notranslate"><span class="pre">mode</span></code> 是 <code class="docutils literal notranslate"><span class="pre">tarfile.open</span></code> 的模式之一：<a class="reference external" href="https://docs.pythonlang.cn/3/library/tarfile.html#tarfile.open">https://docs.pythonlang.cn/3/library/tarfile.html#tarfile.open</a>)</p>
</section>
<section id="read-xml-now-supports-dtype-converters-and-parse-dates">
<span id="whatsnew-150-enhancements-read-xml-dtypes"></span><h3>read_xml 现在支持 <code class="docutils literal notranslate"><span class="pre">dtype</span></code>, <code class="docutils literal notranslate"><span class="pre">converters</span></code> 和 <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code><a class="headerlink" href="v1.5.0.html#read-xml-now-supports-dtype-converters-and-parse-dates" title="此标题的链接">#</a></h3>
<p>与其他 I/O 方法类似，<a class="reference internal" href="../reference/api/pandas.read_xml.html#pandas.read_xml" title="pandas.read_xml"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_xml()</span></code></a> 现在支持为列分配特定的 dtype、应用转换器方法以及解析日期 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/43567">GH 43567</a>)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="kn">from</span><span class="w"> </span><span class="nn">io</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringIO</span>

<span class="gp">In [15]: </span><span class="n">xml_dates</span> <span class="o">=</span> <span class="s2">"""&lt;?xml version='1.0' encoding='utf-8'?&gt;</span>
<span class="gp">   ....: </span><span class="s2">&lt;data&gt;</span>
<span class="gp">   ....: </span><span class="s2">  &lt;row&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;shape&gt;square&lt;/shape&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;degrees&gt;00360&lt;/degrees&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;sides&gt;4.0&lt;/sides&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;date&gt;2020-01-01&lt;/date&gt;</span>
<span class="gp">   ....: </span><span class="s2">   &lt;/row&gt;</span>
<span class="gp">   ....: </span><span class="s2">  &lt;row&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;shape&gt;circle&lt;/shape&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;degrees&gt;00360&lt;/degrees&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;sides/&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;date&gt;2021-01-01&lt;/date&gt;</span>
<span class="gp">   ....: </span><span class="s2">  &lt;/row&gt;</span>
<span class="gp">   ....: </span><span class="s2">  &lt;row&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;shape&gt;triangle&lt;/shape&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;degrees&gt;00180&lt;/degrees&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;sides&gt;3.0&lt;/sides&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;date&gt;2022-01-01&lt;/date&gt;</span>
<span class="gp">   ....: </span><span class="s2">  &lt;/row&gt;</span>
<span class="gp">   ....: </span><span class="s2">&lt;/data&gt;"""</span>
<span class="gp">   ....: </span>

<span class="gp">In [16]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">StringIO</span><span class="p">(</span><span class="n">xml_dates</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s1">'sides'</span><span class="p">:</span> <span class="s1">'Int64'</span><span class="p">},</span>
<span class="gp">   ....: </span>    <span class="n">converters</span><span class="o">=</span><span class="p">{</span><span class="s1">'degrees'</span><span class="p">:</span> <span class="nb">str</span><span class="p">},</span>
<span class="gp">   ....: </span>    <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [17]: </span><span class="n">df</span>
<span class="gh">Out[17]: </span>
<span class="go">      shape degrees  sides       date</span>
<span class="go">0    square   00360      4 2020-01-01</span>
<span class="go">1    circle   00360   &lt;NA&gt; 2021-01-01</span>
<span class="go">2  triangle   00180      3 2022-01-01</span>

<span class="gp">In [18]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[18]: </span>
<span class="go">shape              object</span>
<span class="go">degrees            object</span>
<span class="go">sides               Int64</span>
<span class="go">date       datetime64[ns]</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</section>
<section id="read-xml-now-supports-large-xml-using-iterparse">
<span id="whatsnew-150-enhancements-read-xml-iterparse"></span><h3>read_xml 现在支持使用 <code class="docutils literal notranslate"><span class="pre">iterparse</span></code> 处理大型 XML 文件<a class="headerlink" href="v1.5.0.html#read-xml-now-supports-large-xml-using-iterparse" title="此标题的链接">#</a></h3>
<p>对于大小从数百兆字节到数千兆字节的超大型 XML 文件，<a class="reference internal" href="../reference/api/pandas.read_xml.html#pandas.read_xml" title="pandas.read_xml"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_xml()</span></code></a> 现在支持使用 <a class="reference external" href="https://lxml.de/3.2/parsing.html#iterparse-and-iterwalk">lxml 的 iterparse</a> 和 <a class="reference external" href="https://docs.pythonlang.cn/3/library/xml.etree.ElementTree.html#xml.etree.ElementTree.iterparse">etree 的 iterparse</a> 来解析这些文件，这些方法是内存高效的，可以在不将整个树加载到内存中的情况下遍历 XML 树并提取特定元素和属性 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45442">GH 45442</a>)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span>
<span class="go">...      "/path/to/downloaded/enwikisource-latest-pages-articles.xml",</span>
<span class="go">...      iterparse = {"page": ["title", "ns", "id"]})</span>
<span class="go">...  )</span>
<span class="go">df</span>
<span class="gh">Out[2]:</span>
<span class="go">                                                     title   ns        id</span>
<span class="go">0                                       Gettysburg Address    0     21450</span>
<span class="go">1                                                Main Page    0     42950</span>
<span class="go">2                            Declaration by United Nations    0      8435</span>
<span class="go">3             Constitution of the United States of America    0      8435</span>
<span class="go">4                     Declaration of Independence (Israel)    0     17858</span>
<span class="go">...                                                    ...  ...       ...</span>
<span class="go">3578760               Page:Black cat 1897 07 v2 n10.pdf/17  104    219649</span>
<span class="go">3578761               Page:Black cat 1897 07 v2 n10.pdf/43  104    219649</span>
<span class="go">3578762               Page:Black cat 1897 07 v2 n10.pdf/44  104    219649</span>
<span class="go">3578763      The History of Tom Jones, a Foundling/Book IX    0  12084291</span>
<span class="go">3578764  Page:Shakespeare of Stratford (1926) Yale.djvu/91  104     21450</span>

<span class="go">[3578765 rows x 3 columns]</span>
</pre></div>
</div>
</section>
<section id="copy-on-write">
<span id="whatsnew-150-enhancements-copy-on-write"></span><h3>写时复制 (Copy on Write)<a class="headerlink" href="v1.5.0.html#copy-on-write" title="此标题的链接">#</a></h3>
<p>新增功能 <code class="docutils literal notranslate"><span class="pre">copy_on_write</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46958">GH 46958</a>)。写时复制确保任何以任何方式从另一个 DataFrame 或 Series 派生出来的对象始终表现为副本。写时复制不允许更新除应用方法对象以外的任何其他对象。</p>
<p>写时复制可以通过以下方式启用：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s2">"mode.copy_on_write"</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">copy_on_write</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>或者，写时复制可以在本地通过以下方式启用：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">option_context</span><span class="p">(</span><span class="s2">"mode.copy_on_write"</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>在没有写时复制的情况下，当更新从父 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 派生出的子 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 时，父 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 也会被更新。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [19]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"foo"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">"bar"</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="gp">In [20]: </span><span class="n">view</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">"foo"</span><span class="p">]</span>

<span class="gp">In [21]: </span><span class="n">view</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[21]: </span><span class="go">1</span>

<span class="gp">In [22]: </span><span class="n">df</span>
<span class="gh">Out[22]: </span>
<span class="go">   foo  bar</span>
<span class="go">0    1    1</span>
<span class="go">1    2    1</span>
<span class="go">2    3    1</span>
</pre></div>
</div>
<p>启用写时复制后，df 将不再被更新。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [23]: </span><span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">option_context</span><span class="p">(</span><span class="s2">"mode.copy_on_write"</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"foo"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">"bar"</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="gp">   ....: </span>    <span class="n">view</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">"foo"</span><span class="p">]</span>
<span class="gp">   ....: </span>    <span class="n">view</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">   ....: </span>    <span class="n">df</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<p>更详细的解释可以在<a class="reference external" href="https://phofl.github.io/cow-introduction.html">这里</a>找到。</p>
</section>
<section id="other-enhancements">
<span id="whatsnew-150-enhancements-other"></span><h3>其他增强功能<a class="headerlink" href="v1.5.0.html#other-enhancements" title="此标题的链接">#</a></h3>
<ul class="simple">
<li><p>当 <code class="docutils literal notranslate"><span class="pre">arg</span></code> 为字典但 <code class="docutils literal notranslate"><span class="pre">na_action</span></code> 既不是 <code class="docutils literal notranslate"><span class="pre">None</span></code> 也不是 <code class="docutils literal notranslate"><span class="pre">'ignore'</span></code> 时，<a class="reference internal" href="../reference/api/pandas.Series.map.html#pandas.Series.map" title="pandas.Series.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.map()</span></code></a> 现在会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46588">GH 46588</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.to_frame.html#pandas.MultiIndex.to_frame" title="pandas.MultiIndex.to_frame"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.to_frame()</span></code></a> 现在支持参数 <code class="docutils literal notranslate"><span class="pre">allow_duplicates</span></code>，如果该参数缺失或为 False，则会在遇到重复标签时引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45245">GH 45245</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.arrays.StringArray.html#pandas.arrays.StringArray" title="pandas.arrays.StringArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">StringArray</span></code></a> 现在除了接受字符串和 <a class="reference internal" href="../reference/api/pandas.NA.html#pandas.NA" title="pandas.NA"><code class="xref py py-attr docutils literal notranslate"><span class="pre">pandas.NA</span></code></a> 外，还接受包含 NaN 类似值（<code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>）的类数组对象作为其构造函数的 <code class="docutils literal notranslate"><span class="pre">values</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40839">GH 40839</a>)。</p></li>
<li><p>改进了 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 中 <code class="docutils literal notranslate"><span class="pre">categories</span></code> 的渲染效果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45218">GH 45218</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a> 现在允许 <code class="docutils literal notranslate"><span class="pre">subplots</span></code> 参数为一个可迭代的列表，用于指定列组，以便可以将列分组到同一子图中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/29688">GH 29688</a>)。</p></li>
<li><p>当向下转换会生成 float32 中无法表示的值时，<a class="reference internal" href="../reference/api/pandas.to_numeric.html#pandas.to_numeric" title="pandas.to_numeric"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_numeric()</span></code></a> 现在会保留 float64 数组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/43693">GH 43693</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.reset_index.html#pandas.Series.reset_index" title="pandas.Series.reset_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.reset_index()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.reset_index.html#pandas.DataFrame.reset_index" title="pandas.DataFrame.reset_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reset_index()</span></code></a> 现在支持参数 <code class="docutils literal notranslate"><span class="pre">allow_duplicates</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44410">GH 44410</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.min.html#pandas.core.groupby.DataFrameGroupBy.min" title="pandas.core.groupby.DataFrameGroupBy.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.min()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.min.html#pandas.core.groupby.SeriesGroupBy.min" title="pandas.core.groupby.SeriesGroupBy.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.min()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.max.html#pandas.core.groupby.DataFrameGroupBy.max" title="pandas.core.groupby.DataFrameGroupBy.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.max()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.max.html#pandas.core.groupby.SeriesGroupBy.max" title="pandas.core.groupby.SeriesGroupBy.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.max()</span></code></a> 现在支持使用 <code class="docutils literal notranslate"><span class="pre">engine</span></code> 关键词进行 <a class="reference external" href="https://numba.pydata.org.cn/">Numba</a> 执行 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45428">GH 45428</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 现在支持 <code class="docutils literal notranslate"><span class="pre">defaultdict</span></code> 作为 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41574">GH 41574</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.rolling.html#pandas.Series.rolling" title="pandas.Series.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rolling()</span></code></a> 现在支持带有固定长度窗口的 <code class="docutils literal notranslate"><span class="pre">step</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/15354">GH 15354</a>)。</p></li>
<li><p>实现了 <code class="docutils literal notranslate"><span class="pre">bool</span></code>-dtype 的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>，将 bool-dtype 数组类对象传递给 <code class="docutils literal notranslate"><span class="pre">pd.Index</span></code> 现在将保留 <code class="docutils literal notranslate"><span class="pre">bool</span></code> dtype，而不是转换为 <code class="docutils literal notranslate"><span class="pre">object</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45061">GH 45061</a>)。</p></li>
<li><p>实现了复杂 dtype 的 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a>，将复杂 dtype 数组类对象传递给 <code class="docutils literal notranslate"><span class="pre">pd.Index</span></code> 现在将保留复杂 dtype，而不是转换为 <code class="docutils literal notranslate"><span class="pre">object</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45845">GH 45845</a>)。</p></li>
<li><p>具有 <code class="xref py py-class docutils literal notranslate"><span class="pre">IntegerDtype</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 现在支持位运算 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34463">GH 34463</a>)。</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.tseries.offsets.DateOffset.html#pandas.tseries.offsets.DateOffset" title="pandas.tseries.offsets.DateOffset"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code></a> 添加 <code class="docutils literal notranslate"><span class="pre">milliseconds</span></code> 字段支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/43371">GH 43371</a>)。</p></li>
<li><p>如果填充值可以在不损失精度的情况下进行类型转换，<a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> 会尝试保持 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的 dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45582">GH 45582</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.reset_index.html#pandas.DataFrame.reset_index" title="pandas.DataFrame.reset_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reset_index()</span></code></a> 现在接受一个 <code class="docutils literal notranslate"><span class="pre">names</span></code> 参数，用于重命名索引名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/6878">GH 6878</a>)。</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">levels</span></code> 已给出但 <code class="docutils literal notranslate"><span class="pre">keys</span></code> 为 None 时，<a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 现在会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46653">GH 46653</a>)。</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">levels</span></code> 包含重复值时，<a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 现在会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46653">GH 46653</a>)。</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.DataFrame.corr.html#pandas.DataFrame.corr" title="pandas.DataFrame.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corr()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.corrwith.html#pandas.DataFrame.corrwith" title="pandas.DataFrame.corrwith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corrwith()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.cov.html#pandas.DataFrame.cov" title="pandas.DataFrame.cov"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.cov()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.idxmin.html#pandas.DataFrame.idxmin" title="pandas.DataFrame.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.idxmin()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.idxmax.html#pandas.DataFrame.idxmax" title="pandas.DataFrame.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.idxmax()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmin.html#pandas.core.groupby.DataFrameGroupBy.idxmin" title="pandas.core.groupby.DataFrameGroupBy.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmin()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmax.html#pandas.core.groupby.DataFrameGroupBy.idxmax" title="pandas.core.groupby.DataFrameGroupBy.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmax()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.var.html#pandas.core.groupby.DataFrameGroupBy.var" title="pandas.core.groupby.DataFrameGroupBy.var"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.var()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.var.html#pandas.core.groupby.SeriesGroupBy.var" title="pandas.core.groupby.SeriesGroupBy.var"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.var()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.std.html#pandas.core.groupby.DataFrameGroupBy.std" title="pandas.core.groupby.DataFrameGroupBy.std"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.std()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.std.html#pandas.core.groupby.SeriesGroupBy.std" title="pandas.core.groupby.SeriesGroupBy.std"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.std()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.sem.html#pandas.core.groupby.DataFrameGroupBy.sem" title="pandas.core.groupby.DataFrameGroupBy.sem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.sem()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.sem.html#pandas.core.groupby.SeriesGroupBy.sem" title="pandas.core.groupby.SeriesGroupBy.sem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.sem()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.quantile.html#pandas.core.groupby.DataFrameGroupBy.quantile" title="pandas.core.groupby.DataFrameGroupBy.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.quantile()</span></code></a> 添加了 <code class="docutils literal notranslate"><span class="pre">numeric_only</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46560">GH 46560</a>)。</p></li>
<li><p>当使用 <code class="docutils literal notranslate"><span class="pre">string[pyarrow]</span></code> dtype 的方法不调度到 <code class="docutils literal notranslate"><span class="pre">pyarrow.compute</span></code> 方法时，现在会引发 <a class="reference internal" href="../reference/api/pandas.errors.PerformanceWarning.html#pandas.errors.PerformanceWarning" title="pandas.errors.PerformanceWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">errors.PerformanceWarning</span></code></a> 警告 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/42613">GH 42613</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46725">GH 46725</a>)。</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 添加了 <code class="docutils literal notranslate"><span class="pre">validate</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46622">GH 46622</a>)。</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.sum.html#pandas.core.resample.Resampler.sum" title="pandas.core.resample.Resampler.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.sum()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.prod.html#pandas.core.resample.Resampler.prod" title="pandas.core.resample.Resampler.prod"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.prod()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.min.html#pandas.core.resample.Resampler.min" title="pandas.core.resample.Resampler.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.min()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.max.html#pandas.core.resample.Resampler.max" title="pandas.core.resample.Resampler.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.max()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.first.html#pandas.core.resample.Resampler.first" title="pandas.core.resample.Resampler.first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.first()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.last.html#pandas.core.resample.Resampler.last" title="pandas.core.resample.Resampler.last"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.last()</span></code></a> 添加了 <code class="docutils literal notranslate"><span class="pre">numeric_only</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46442">GH 46442</a>)。</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">ExponentialMovingWindow</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">times</span></code> 参数现在接受 <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47003">GH 47003</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.errors.DataError.html#pandas.errors.DataError" title="pandas.errors.DataError"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataError</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.SpecificationError.html#pandas.errors.SpecificationError" title="pandas.errors.SpecificationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpecificationError</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.SettingWithCopyError.html#pandas.errors.SettingWithCopyError" title="pandas.errors.SettingWithCopyError"><code class="xref py py-class docutils literal notranslate"><span class="pre">SettingWithCopyError</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.SettingWithCopyWarning.html#pandas.errors.SettingWithCopyWarning" title="pandas.errors.SettingWithCopyWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">SettingWithCopyWarning</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.NumExprClobberingError.html#pandas.errors.NumExprClobberingError" title="pandas.errors.NumExprClobberingError"><code class="xref py py-class docutils literal notranslate"><span class="pre">NumExprClobberingError</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.UndefinedVariableError.html#pandas.errors.UndefinedVariableError" title="pandas.errors.UndefinedVariableError"><code class="xref py py-class docutils literal notranslate"><span class="pre">UndefinedVariableError</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.IndexingError.html#pandas.errors.IndexingError" title="pandas.errors.IndexingError"><code class="xref py py-class docutils literal notranslate"><span class="pre">IndexingError</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.PyperclipException.html#pandas.errors.PyperclipException" title="pandas.errors.PyperclipException"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyperclipException</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.PyperclipWindowsException.html#pandas.errors.PyperclipWindowsException" title="pandas.errors.PyperclipWindowsException"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyperclipWindowsException</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.CSSWarning.html#pandas.errors.CSSWarning" title="pandas.errors.CSSWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">CSSWarning</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.PossibleDataLossError.html#pandas.errors.PossibleDataLossError" title="pandas.errors.PossibleDataLossError"><code class="xref py py-class docutils literal notranslate"><span class="pre">PossibleDataLossError</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.ClosedFileError.html#pandas.errors.ClosedFileError" title="pandas.errors.ClosedFileError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClosedFileError</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.IncompatibilityWarning.html#pandas.errors.IncompatibilityWarning" title="pandas.errors.IncompatibilityWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">IncompatibilityWarning</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.AttributeConflictWarning.html#pandas.errors.AttributeConflictWarning" title="pandas.errors.AttributeConflictWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributeConflictWarning</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.DatabaseError.html#pandas.errors.DatabaseError" title="pandas.errors.DatabaseError"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseError</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.PossiblePrecisionLoss.html#pandas.errors.PossiblePrecisionLoss" title="pandas.errors.PossiblePrecisionLoss"><code class="xref py py-class docutils literal notranslate"><span class="pre">PossiblePrecisionLoss</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.ValueLabelTypeMismatch.html#pandas.errors.ValueLabelTypeMismatch" title="pandas.errors.ValueLabelTypeMismatch"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueLabelTypeMismatch</span></code></a>, <a class="reference internal" href="../reference/api/pandas.errors.InvalidColumnName.html#pandas.errors.InvalidColumnName" title="pandas.errors.InvalidColumnName"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvalidColumnName</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.errors.CategoricalConversionWarning.html#pandas.errors.CategoricalConversionWarning" title="pandas.errors.CategoricalConversionWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalConversionWarning</span></code></a> 现在已在 <code class="docutils literal notranslate"><span class="pre">pandas.errors</span></code> 中公开 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27656">GH 27656</a>)。</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.testing.assert_series_equal.html#pandas.testing.assert_series_equal" title="pandas.testing.assert_series_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_series_equal()</span></code></a> 添加了 <code class="docutils literal notranslate"><span class="pre">check_like</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47247">GH 47247</a>)。</p></li>
<li><p>为扩展数组 dtype 添加了对 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.ohlc.html#pandas.core.groupby.DataFrameGroupBy.ohlc" title="pandas.core.groupby.DataFrameGroupBy.ohlc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.ohlc()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.ohlc.html#pandas.core.groupby.SeriesGroupBy.ohlc" title="pandas.core.groupby.SeriesGroupBy.ohlc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.ohlc()</span></code></a> 的支持 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37493">GH 37493</a>)。</p></li>
<li><p>允许使用 <a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 读取压缩的 SAS 文件（例如 <code class="docutils literal notranslate"><span class="pre">.sas7bdat.gz</span></code> 文件）。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_html()</span></code></a> 现在支持从表格单元格中提取链接 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13141">GH 13141</a>)。</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.astype()</span></code> 现在支持将时区不敏感的索引转换为 <code class="docutils literal notranslate"><span class="pre">datetime64[s]</span></code>, <code class="docutils literal notranslate"><span class="pre">datetime64[ms]</span></code> 和 <code class="docutils literal notranslate"><span class="pre">datetime64[us]</span></code>，并将时区敏感的索引转换为相应的 <code class="docutils literal notranslate"><span class="pre">datetime64[unit,</span> <span class="pre">tzname]</span></code> dtypes (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47579">GH 47579</a>)。</p></li>
<li><p>当 dtype 为数值型且提供了 <code class="docutils literal notranslate"><span class="pre">numeric_only=True</span></code> 时，<a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 归约器（例如 <code class="docutils literal notranslate"><span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>, <code class="docutils literal notranslate"><span class="pre">sum</span></code>, <code class="docutils literal notranslate"><span class="pre">mean</span></code>）现在将成功运行；以前这会引发 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> 错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47500">GH 47500</a>)。</p></li>
<li><p>如果结果值等距分布，<code class="xref py py-meth docutils literal notranslate"><span class="pre">RangeIndex.union()</span></code> 现在可以返回一个 <a class="reference internal" href="../reference/api/pandas.RangeIndex.html#pandas.RangeIndex" title="pandas.RangeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeIndex</span></code></a> 而不是 <code class="xref py py-class docutils literal notranslate"><span class="pre">Int64Index</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47557">GH 47557</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/43885">GH 43885</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.compare.html#pandas.DataFrame.compare" title="pandas.DataFrame.compare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.compare()</span></code></a> 现在接受一个 <code class="docutils literal notranslate"><span class="pre">result_names</span></code> 参数，允许用户指定正在比较的左右 DataFrame 的结果名称。默认情况下为 <code class="docutils literal notranslate"><span class="pre">'self'</span></code> 和 <code class="docutils literal notranslate"><span class="pre">'other'</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44354">GH 44354</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.quantile.html#pandas.DataFrame.quantile" title="pandas.DataFrame.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.quantile()</span></code></a> 增加了一个 <code class="docutils literal notranslate"><span class="pre">method</span></code> 参数，可以接受 <code class="docutils literal notranslate"><span class="pre">table</span></code> 以评估多列分位数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/43881">GH 43881</a>)。</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> 现在支持检查一个区间是否包含在另一个区间内 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46613">GH 46613</a>)。</p></li>
<li><p>为 <a class="reference internal" href="../reference/api/pandas.Series.set_axis.html#pandas.Series.set_axis" title="pandas.Series.set_axis"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.set_axis()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.set_axis.html#pandas.DataFrame.set_axis" title="pandas.DataFrame.set_axis"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.set_axis()</span></code></a> 添加了 <code class="docutils literal notranslate"><span class="pre">copy</span></code> 关键词，允许用户在一个新对象上设置轴，而不必复制底层数据 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47932">GH 47932</a>)。</p></li>
<li><p>方法 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.factorize.html#pandas.api.extensions.ExtensionArray.factorize" title="pandas.api.extensions.ExtensionArray.factorize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray.factorize()</span></code></a> 接受 <code class="docutils literal notranslate"><span class="pre">use_na_sentinel=False</span></code> 以确定如何处理空值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46601">GH 46601</a>)。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> 现在为 pandas 开发安装了一个专用的 <code class="docutils literal notranslate"><span class="pre">pandas-dev</span></code> 虚拟环境，而不是使用 <code class="docutils literal notranslate"><span class="pre">base</span></code> 环境 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48427">GH 48427</a>)。</p></li>
</ul>
</section>
</section>
<section id="notable-bug-fixes">
<span id="whatsnew-150-notable-bug-fixes"></span><h2>重要的错误修复<a class="headerlink" href="v1.5.0.html#notable-bug-fixes" title="此标题的链接">#</a></h2>
<p>这些是可能导致显著行为变化的错误修复。</p>
<section id="using-dropna-true-with-groupby-transforms">
<span id="whatsnew-150-notable-bug-fixes-groupby-transform-dropna"></span><h3>在 <code class="docutils literal notranslate"><span class="pre">groupby</span></code> 转换中使用 <code class="docutils literal notranslate"><span class="pre">dropna=True</span></code><a class="headerlink" href="v1.5.0.html#using-dropna-true-with-groupby-transforms" title="此标题的链接">#</a></h3>
<p>转换是一种结果大小与输入相同的操作。当结果是 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时，还要求结果的索引与输入的索引匹配。在 pandas 1.4 中，对包含空值的组使用 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.transform.html#pandas.core.groupby.SeriesGroupBy.transform" title="pandas.core.groupby.SeriesGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.transform()</span></code></a> 并设置 <code class="docutils literal notranslate"><span class="pre">dropna=True</span></code> 会得到不正确的结果。如下例所示，不正确的结果要么包含错误的值，要么结果的索引与输入不匹配。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [24]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'a'</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="s1">'b'</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="c1"># Value in the last row should be np.nan</span>
<span class="go">        df.groupby('a', dropna=True).transform('sum')</span>
<span class="gh">Out[3]:</span>
<span class="go">   b</span>
<span class="go">0  5</span>
<span class="go">1  5</span>
<span class="go">2  5</span>

<span class="gp">In [3]: </span><span class="c1"># Should have one additional row with the value np.nan</span>
<span class="go">        df.groupby('a', dropna=True).transform(lambda x: x.sum())</span>
<span class="gh">Out[3]:</span>
<span class="go">   b</span>
<span class="go">0  5</span>
<span class="go">1  5</span>

<span class="gp">In [3]: </span><span class="c1"># The value in the last row is np.nan interpreted as an integer</span>
<span class="go">        df.groupby('a', dropna=True).transform('ffill')</span>
<span class="gh">Out[3]:</span>
<span class="go">                     b</span>
<span class="go">0                    2</span>
<span class="go">1                    3</span>
<span class="go">2 -9223372036854775808</span>

<span class="gp">In [3]: </span><span class="c1"># Should have one additional row with the value np.nan</span>
<span class="go">        df.groupby('a', dropna=True).transform(lambda x: x)</span>
<span class="gh">Out[3]:</span>
<span class="go">   b</span>
<span class="go">0  2</span>
<span class="go">1  3</span>
</pre></div>
</div>
<p><em>新行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'a'</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">'sum'</span><span class="p">)</span>
<span class="gh">Out[25]: </span>
<span class="go">     b</span>
<span class="go">0  5.0</span>
<span class="go">1  5.0</span>
<span class="go">2  NaN</span>

<span class="gp">In [26]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'a'</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
<span class="gh">Out[26]: </span>
<span class="go">     b</span>
<span class="go">0  5.0</span>
<span class="go">1  5.0</span>
<span class="go">2  NaN</span>

<span class="gp">In [27]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'a'</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">'ffill'</span><span class="p">)</span>
<span class="gh">Out[27]: </span>
<span class="go">     b</span>
<span class="go">0  2.0</span>
<span class="go">1  3.0</span>
<span class="go">2  NaN</span>

<span class="gp">In [28]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'a'</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span>
<span class="gh">Out[28]: </span>
<span class="go">     b</span>
<span class="go">0  2.0</span>
<span class="go">1  3.0</span>
<span class="go">2  NaN</span>
</pre></div>
</div>
</section>
<section id="serializing-tz-naive-timestamps-with-to-json-with-iso-dates-true">
<span id="whatsnew-150-notable-bug-fixes-to-json-incorrectly-localizing-naive-timestamps"></span><h3>使用 <code class="docutils literal notranslate"><span class="pre">iso_dates=True</span></code> 将时区不敏感的 Timestamp 序列化为 JSON<a class="headerlink" href="v1.5.0.html#serializing-tz-naive-timestamps-with-to-json-with-iso-dates-true" title="此标题的链接">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.to_json.html#pandas.Series.to_json" title="pandas.Series.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_json()</span></code></a> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.to_json()</span></code> 会错误地将带有时区不敏感 Timestamp 的 DatetimeArrays/DatetimeIndexes 本地化为 UTC (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38760">GH 38760</a>)。</p>
<p>请注意，此补丁并未修复时区敏感 Timestamp 在序列化时到 UTC 的本地化问题。（相关问题 <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/12997">GH 12997</a>）</p>
<p><em>旧行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [32]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">start</span><span class="o">=</span><span class="s1">'2020-12-28 00:00:00'</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">end</span><span class="o">=</span><span class="s1">'2020-12-28 02:00:00'</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">freq</span><span class="o">=</span><span class="s1">'1H'</span><span class="p">,</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....:</span>

<span class="gp">In [33]: </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">data</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....:</span>

<span class="gp">In [4]: </span><span class="kn">from</span><span class="w"> </span><span class="nn">io</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringIO</span>

<span class="gp">In [5]: </span><span class="n">a</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s1">'iso'</span><span class="p">)</span>
<span class="gh">Out[5]: </span><span class="go">'{"2020-12-28T00:00:00.000Z":0,"2020-12-28T01:00:00.000Z":1,"2020-12-28T02:00:00.000Z":2}'</span>

<span class="gp">In [6]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s1">'iso'</span><span class="p">)),</span> <span class="n">typ</span><span class="o">=</span><span class="s2">"series"</span><span class="p">)</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="n">index</span>
<span class="gh">Out[6]: </span><span class="go">array([False, False, False])</span>
</pre></div>
</div>
<p><em>新行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [34]: </span><span class="kn">from</span><span class="w"> </span><span class="nn">io</span><span class="w"> </span><span class="kn">import</span> <span class="n">StringIO</span>

<span class="gp">In [35]: </span><span class="n">a</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s1">'iso'</span><span class="p">)</span>
<span class="gh">Out[35]: </span><span class="go">'{"2020-12-28T00:00:00.000Z":0,"2020-12-28T01:00:00.000Z":1,"2020-12-28T02:00:00.000Z":2}'</span>

<span class="go"># Roundtripping now works</span>
<span class="gp">In [36]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s1">'iso'</span><span class="p">)),</span> <span class="n">typ</span><span class="o">=</span><span class="s2">"series"</span><span class="p">)</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="n">index</span>
<span class="gh">Out[36]: </span><span class="go">array([ True,  True,  True])</span>
</pre></div>
</div>
</section>
<section id="dataframegroupby-value-counts-with-non-grouping-categorical-columns-and-observed-true">
<span id="whatsnew-150-notable-bug-fixes-groupby-value-counts-categorical"></span><h3>DataFrameGroupBy.value_counts 使用非分组分类列和 <code class="docutils literal notranslate"><span class="pre">observed=True</span></code><a class="headerlink" href="v1.5.0.html#dataframegroupby-value-counts-with-non-grouping-categorical-columns-and-observed-true" title="Link to this heading">#</a></h3>
<p>调用 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.value_counts.html#pandas.core.groupby.DataFrameGroupBy.value_counts" title="pandas.core.groupby.DataFrameGroupBy.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.value_counts()</span></code></a> 并设置 <code class="docutils literal notranslate"><span class="pre">observed=True</span></code> 会错误地删除非分组列中未观察到的类别 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46357">GH 46357</a>)。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="s2">"a"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">"category"</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">In [7]: </span><span class="n">df</span>
<span class="gh">Out[7]:</span>
<span class="go">   0</span>
<span class="go">0  a</span>
<span class="go">1  b</span>
</pre></div>
</div>
<p><em>旧行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">observed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="gh">Out[8]:</span>
<span class="go">0  a    1</span>
<span class="go">1  b    1</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p><em>新行为</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">observed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="gh">Out[9]:</span>
<span class="go">0  a    1</span>
<span class="go">1  a    0</span>
<span class="go">   b    1</span>
<span class="go">0  b    0</span>
<span class="go">   c    0</span>
<span class="go">1  c    0</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
</section>
</section>
<section id="backwards-incompatible-api-changes">
<span id="whatsnew-150-api-breaking"></span><h2>向后不兼容的 API 更改<a class="headerlink" href="v1.5.0.html#backwards-incompatible-api-changes" title="Link to this heading">#</a></h2>
<section id="increased-minimum-versions-for-dependencies">
<span id="whatsnew-150-api-breaking-deps"></span><h3>提高依赖项的最低版本要求<a class="headerlink" href="v1.5.0.html#increased-minimum-versions-for-dependencies" title="Link to this heading">#</a></h3>
<p>部分依赖项的最低支持版本已更新。如果已安装，我们现在要求：</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>包</p></th>
<th class="head"><p>最低版本</p></th>
<th class="head"><p>必需</p></th>
<th class="head"><p>已更改</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>numpy</p></td>
<td><p>1.20.3</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>mypy (dev)</p></td>
<td><p>0.971</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>beautifulsoup4</p></td>
<td><p>4.9.3</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>blosc</p></td>
<td><p>1.21.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>bottleneck</p></td>
<td><p>1.3.2</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>fsspec</p></td>
<td><p>2021.07.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>hypothesis</p></td>
<td><p>6.13.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>gcsfs</p></td>
<td><p>2021.07.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>jinja2</p></td>
<td><p>3.0.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>lxml</p></td>
<td><p>4.6.3</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>numba</p></td>
<td><p>0.53.1</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>numexpr</p></td>
<td><p>2.7.3</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>openpyxl</p></td>
<td><p>3.0.7</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pandas-gbq</p></td>
<td><p>0.15.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>psycopg2</p></td>
<td><p>2.8.6</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pymysql</p></td>
<td><p>1.0.2</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pyreadstat</p></td>
<td><p>1.1.2</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pyxlsb</p></td>
<td><p>1.0.8</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>s3fs</p></td>
<td><p>2021.08.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>scipy</p></td>
<td><p>1.7.1</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>sqlalchemy</p></td>
<td><p>1.4.16</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>tabulate</p></td>
<td><p>0.8.9</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>xarray</p></td>
<td><p>0.19.0</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>xlsxwriter</p></td>
<td><p>1.4.3</p></td>
<td></td>
<td><p>X</p></td>
</tr>
</tbody>
</table>
<p>对于 <a class="reference external" href="../getting_started/install.html">可选库</a>，一般建议使用最新版本。下表列出了 pandas 开发过程中目前测试的每个库的最低版本。低于最低测试版本的可选库可能仍然可用，但不被视为受支持。</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>包</p></th>
<th class="head"><p>最低版本</p></th>
<th class="head"><p>已更改</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>beautifulsoup4</p></td>
<td><p>4.9.3</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>blosc</p></td>
<td><p>1.21.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>bottleneck</p></td>
<td><p>1.3.2</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>brotlipy</p></td>
<td><p>0.7.0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>fastparquet</p></td>
<td><p>0.4.0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fsspec</p></td>
<td><p>2021.08.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>html5lib</p></td>
<td><p>1.1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>hypothesis</p></td>
<td><p>6.13.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>gcsfs</p></td>
<td><p>2021.08.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>jinja2</p></td>
<td><p>3.0.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>lxml</p></td>
<td><p>4.6.3</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>matplotlib</p></td>
<td><p>3.3.2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>numba</p></td>
<td><p>0.53.1</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>numexpr</p></td>
<td><p>2.7.3</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>odfpy</p></td>
<td><p>1.4.1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>openpyxl</p></td>
<td><p>3.0.7</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pandas-gbq</p></td>
<td><p>0.15.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>psycopg2</p></td>
<td><p>2.8.6</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pyarrow</p></td>
<td><p>1.0.1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pymysql</p></td>
<td><p>1.0.2</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pyreadstat</p></td>
<td><p>1.1.2</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pytables</p></td>
<td><p>3.6.1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>python-snappy</p></td>
<td><p>0.6.0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pyxlsb</p></td>
<td><p>1.0.8</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>s3fs</p></td>
<td><p>2021.08.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>scipy</p></td>
<td><p>1.7.1</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>sqlalchemy</p></td>
<td><p>1.4.16</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>tabulate</p></td>
<td><p>0.8.9</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>tzdata</p></td>
<td><p>2022a</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>xarray</p></td>
<td><p>0.19.0</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>xlrd</p></td>
<td><p>2.0.1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>xlsxwriter</p></td>
<td><p>1.4.3</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>xlwt</p></td>
<td><p>1.3.0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>zstandard</p></td>
<td><p>0.15.2</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>更多详情请参阅 <a class="reference internal" href="../getting_started/install.html#install-dependencies"><span class="std std-ref">依赖项</span></a> 和 <a class="reference internal" href="../getting_started/install.html#install-optional-dependencies"><span class="std std-ref">可选依赖项</span></a>。</p>
</section>
<section id="other-api-changes">
<span id="whatsnew-150-api-breaking-other"></span><h3>其他 API 更改<a class="headerlink" href="v1.5.0.html#other-api-changes" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>BigQuery I/O 方法 <a class="reference internal" href="../reference/api/pandas.read_gbq.html#pandas.read_gbq" title="pandas.read_gbq"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_gbq()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_gbq.html#pandas.DataFrame.to_gbq" title="pandas.DataFrame.to_gbq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_gbq()</span></code></a> 默认设置为 <code class="docutils literal notranslate"><span class="pre">auth_local_webserver</span> <span class="pre">=</span> <span class="pre">True</span></code>。Google 已弃用 <code class="docutils literal notranslate"><span class="pre">auth_local_webserver</span> <span class="pre">=</span> <span class="pre">False</span></code> <a class="reference external" href="https://developers.googleblog.com/2022/02/making-oauth-flows-safer.html?m=1#disallowed-oob">“带外”(复制-粘贴) 流程</a>。计划于 2022 年 10 月停止支持 <code class="docutils literal notranslate"><span class="pre">auth_local_webserver</span> <span class="pre">=</span> <span class="pre">False</span></code> 选项。( <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46312">GH 46312</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_json()</span></code></a> 现在在输入字符串以 <code class="docutils literal notranslate"><span class="pre">.json</span></code>, <code class="docutils literal notranslate"><span class="pre">.json.gz</span></code>, <code class="docutils literal notranslate"><span class="pre">.json.bz2</span></code> 等结尾但文件不存在时，会引发 <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> (以前是 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>)。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/29102">GH 29102</a>)</p></li>
<li><p>之前会引发 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 操作，现在改为引发 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> 或 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsTimedelta</span></code>（在适当的情况下）(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47268">GH 47268</a>)</p></li>
<li><p>当 <a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 之前返回 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时，现在会返回一个空的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47410">GH 47410</a>)</p></li>
<li><p>如果 <code class="docutils literal notranslate"><span class="pre">index</span></code> 或 <code class="docutils literal notranslate"><span class="pre">columns</span></code> 参数是集合，则 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 构造函数会引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47215">GH 47215</a>)</p></li>
</ul>
</section>
</section>
<section id="deprecations">
<span id="whatsnew-150-deprecations"></span><h2>弃用<a class="headerlink" href="v1.5.0.html#deprecations" title="Link to this heading">#</a></h2>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>在下一个主要版本 2.0 中，正在考虑进行几项较大的 API 更改，这些更改将不会有正式的弃用通知，例如将标准库 <a class="reference external" href="https://docs.pythonlang.cn/3/library/zoneinfo.html">zoneinfo</a> 作为默认时区实现而不是 <code class="docutils literal notranslate"><span class="pre">pytz</span></code>，让 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 支持所有数据类型而不是拥有多个子类 (<a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Int64Index</span></code> 等)，以及更多。正在考虑的更改已记录在 <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/44823">此 GitHub Issue</a> 中，欢迎任何反馈或疑虑。</p>
</div>
<section id="label-based-integer-slicing-on-a-series-with-an-int64index-or-rangeindex">
<span id="whatsnew-150-deprecations-int-slicing-series"></span><h3>在具有 Int64Index 或 RangeIndex 的 Series 上进行基于标签的整数切片<a class="headerlink" href="v1.5.0.html#label-based-integer-slicing-on-a-series-with-an-int64index-or-rangeindex" title="Link to this heading">#</a></h3>
<p>在未来的版本中，对具有 <code class="xref py py-class docutils literal notranslate"><span class="pre">Int64Index</span></code> 或 <a class="reference internal" href="../reference/api/pandas.RangeIndex.html#pandas.RangeIndex" title="pandas.RangeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeIndex</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 进行整数切片将被视为<em>基于标签</em>，而非基于位置。这将使行为与 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__getitem__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__setitem__()</span></code> 的其他行为保持一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45162">GH 45162</a>)。</p>
<p>例如</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">])</span>
</pre></div>
</div>
<p>在旧行为中，<code class="docutils literal notranslate"><span class="pre">ser[2:4]</span></code> 将切片视为基于位置</p>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">ser</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="gh">Out[3]:</span>
<span class="go">5    3</span>
<span class="go">7    4</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>在未来版本中，这将视为基于标签</p>
<p><em>未来行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">ser</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="gh">Out[4]:</span>
<span class="go">2    1</span>
<span class="go">3    2</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>要保留旧行为，请使用 <code class="docutils literal notranslate"><span class="pre">series.iloc[i:j]</span></code>。要获得未来行为，请使用 <code class="docutils literal notranslate"><span class="pre">series.loc[i:j]</span></code>。</p>
<p>对 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的切片将不受影响。</p>
</section>
<section id="excelwriter-attributes">
<span id="whatsnew-150-deprecations-excel-writer-attributes"></span><h3><a class="reference internal" href="../reference/api/pandas.ExcelWriter.html#pandas.ExcelWriter" title="pandas.ExcelWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExcelWriter</span></code></a> 属性<a class="headerlink" href="v1.5.0.html#excelwriter-attributes" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="../reference/api/pandas.ExcelWriter.html#pandas.ExcelWriter" title="pandas.ExcelWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExcelWriter</span></code></a> 的所有属性之前都已记录为非公开。但是，一些第三方 Excel 引擎记录了访问 <code class="docutils literal notranslate"><span class="pre">ExcelWriter.book</span></code> 或 <code class="docutils literal notranslate"><span class="pre">ExcelWriter.sheets</span></code>，并且用户正在使用这些属性以及可能其他属性。以前这些属性使用不安全；例如，对 <code class="docutils literal notranslate"><span class="pre">ExcelWriter.book</span></code> 的修改不会更新 <code class="docutils literal notranslate"><span class="pre">ExcelWriter.sheets</span></code>，反之亦然。为了支持这一点，pandas 已将一些属性公开并改进了它们的实现，以便现在可以安全使用。( <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45572">GH 45572</a>)</p>
<p>以下属性现在是公开的，并被认为是安全的访问。</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">book</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check_extension</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">close</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">date_format</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">datetime_format</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">engine</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">if_sheet_exists</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sheets</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">supported_extensions</span></code></p></li>
</ul>
</div></blockquote>
<p>以下属性已被弃用。现在访问它们时会引发 <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code>，并将在未来的版本中删除。用户应注意，它们的使用被认为是不安全的，并可能导致意外结果。</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cur_sheet</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">handles</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">save</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_cells</span></code></p></li>
</ul>
</div></blockquote>
<p>有关更多详细信息，请参阅 <a class="reference internal" href="../reference/api/pandas.ExcelWriter.html#pandas.ExcelWriter" title="pandas.ExcelWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExcelWriter</span></code></a> 的文档。</p>
</section>
<section id="using-group-keys-with-transformers-in-dataframegroupby-apply-and-seriesgroupby-apply">
<span id="whatsnew-150-deprecations-group-keys-in-apply"></span><h3>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.apply.html#pandas.core.groupby.DataFrameGroupBy.apply" title="pandas.core.groupby.DataFrameGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.apply()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.apply.html#pandas.core.groupby.SeriesGroupBy.apply" title="pandas.core.groupby.SeriesGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.apply()</span></code></a> 中使用 <code class="docutils literal notranslate"><span class="pre">group_keys</span></code> 与转换器<a class="headerlink" href="v1.5.0.html#using-group-keys-with-transformers-in-dataframegroupby-apply-and-seriesgroupby-apply" title="Link to this heading">#</a></h3>
<p>在 pandas 的早期版本中，如果推断传递给 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.apply.html#pandas.core.groupby.DataFrameGroupBy.apply" title="pandas.core.groupby.DataFrameGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.apply()</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.apply.html#pandas.core.groupby.SeriesGroupBy.apply" title="pandas.core.groupby.SeriesGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.apply()</span></code></a> 的函数是转换器（即，结果索引等于输入索引），则会忽略 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 的 <code class="docutils literal notranslate"><span class="pre">group_keys</span></code> 参数，并且永远不会将组键添加到结果的索引中。将来，当用户指定 <code class="docutils literal notranslate"><span class="pre">group_keys=True</span></code> 时，组键将被添加到索引中。</p>
<p>由于 <code class="docutils literal notranslate"><span class="pre">group_keys=True</span></code> 是 <a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 的默认值，因此在使用转换器时未指定 <code class="docutils literal notranslate"><span class="pre">group_keys</span></code> 将引发 <code class="docutils literal notranslate"><span class="pre">FutureWarning</span></code>。可以通过指定 <code class="docutils literal notranslate"><span class="pre">group_keys=False</span></code> 来抑制此警告并保留之前的行为。</p>
</section>
<section id="inplace-operation-when-setting-values-with-loc-and-iloc">
<h3>使用 <code class="docutils literal notranslate"><span class="pre">loc</span></code> 和 <code class="docutils literal notranslate"><span class="pre">iloc</span></code> 设置值时的原地操作<a class="headerlink" href="v1.5.0.html#inplace-operation-when-setting-values-with-loc-and-iloc" title="Link to this heading">#</a></h3>
<p>大多数情况下，使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.iloc.html#pandas.DataFrame.iloc" title="pandas.DataFrame.iloc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iloc()</span></code></a> 设置值会尝试原地设置，只有在必要时才回退到插入新数组。在某些情况下，此规则不被遵循，例如当从具有不同 dtype 的数组设置整个列时：</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [30]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">'price'</span><span class="p">:</span> <span class="p">[</span><span class="mf">11.1</span><span class="p">,</span> <span class="mf">12.2</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'book1'</span><span class="p">,</span> <span class="s1">'book2'</span><span class="p">])</span>

<span class="gp">In [31]: </span><span class="n">original_prices</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">'price'</span><span class="p">]</span>

<span class="gp">In [32]: </span><span class="n">new_prices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">98</span><span class="p">,</span> <span class="mi">99</span><span class="p">])</span>
</pre></div>
</div>
<p><em>旧行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_prices</span>
<span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[4]:</span>
<span class="go">book1    98</span>
<span class="go">book2    99</span>
<span class="go">Name: price, dtype: int64</span>
<span class="gp">In [5]: </span><span class="n">original_prices</span>
<span class="gh">Out[5]:</span>
<span class="go">book1    11.1</span>
<span class="go">book2    12.2</span>
<span class="go">Name: price, float: 64</span>
</pre></div>
</div>
<p>此行为已弃用。在未来的版本中，使用 iloc 设置整个列将尝试原地操作。</p>
<p><em>未来行为</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_prices</span>
<span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[4]:</span>
<span class="go">book1    98.0</span>
<span class="go">book2    99.0</span>
<span class="go">Name: price, dtype: float64</span>
<span class="gp">In [5]: </span><span class="n">original_prices</span>
<span class="gh">Out[5]:</span>
<span class="go">book1    98.0</span>
<span class="go">book2    99.0</span>
<span class="go">Name: price, dtype: float64</span>
</pre></div>
</div>
<p>要获得旧行为，请直接使用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__setitem__()</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">new_prices</span>
<span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="go">Out[4]</span>
<span class="go">book1    98</span>
<span class="go">book2    99</span>
<span class="go">Name: price, dtype: int64</span>
<span class="gp">In [5]: </span><span class="n">original_prices</span>
<span class="gh">Out[5]:</span>
<span class="go">book1    11.1</span>
<span class="go">book2    12.2</span>
<span class="go">Name: price, dtype: float64</span>
</pre></div>
</div>
<p>当 <code class="docutils literal notranslate"><span class="pre">df.columns</span></code> 不唯一且您想按索引更改单个列时，为了获得旧行为，可以使用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.isetitem()</span></code>，该方法已在 pandas 1.5 中添加。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df_with_duplicated_cols</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">df</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s1">'columns'</span><span class="p">)</span>
<span class="gp">In [3]: </span><span class="n">df_with_duplicated_cols</span><span class="o">.</span><span class="n">isetitem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">new_prices</span><span class="p">)</span>
<span class="gp">In [4]: </span><span class="n">df_with_duplicated_cols</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[4]:</span>
<span class="go">book1    98</span>
<span class="go">book2    99</span>
<span class="go">Name: price, dtype: int64</span>
<span class="gp">In [5]: </span><span class="n">original_prices</span>
<span class="gh">Out[5]:</span>
<span class="go">book1    11.1</span>
<span class="go">book2    12.2</span>
<span class="go">Name: 0, dtype: float64</span>
</pre></div>
</div>
</section>
<section id="numeric-only-default-value">
<span id="whatsnew-150-deprecations-numeric-only-default"></span><h3><code class="docutils literal notranslate"><span class="pre">numeric_only</span></code> 默认值<a class="headerlink" href="v1.5.0.html#numeric-only-default-value" title="Link to this heading">#</a></h3>
<p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>、<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameGroupBy</span></code> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">Resampler</span></code> 操作（如 <code class="docutils literal notranslate"><span class="pre">min</span></code>、<code class="docutils literal notranslate"><span class="pre">sum</span></code> 和 <code class="docutils literal notranslate"><span class="pre">idxmax</span></code>）中，<code class="docutils literal notranslate"><span class="pre">numeric_only</span></code> 参数的默认值（如果存在的话）不一致。此外，使用默认值 <code class="docutils literal notranslate"><span class="pre">None</span></code> 的操作可能导致意外结果。( <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46560">GH 46560</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"a"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">"b"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"y"</span><span class="p">]})</span>

<span class="gp">In [2]: </span><span class="c1"># Reading the next line without knowing the contents of df, one would</span>
<span class="go">        # expect the result to contain the products for both columns a and b.</span>
<span class="go">        df[["a", "b"]].prod()</span>
<span class="gh">Out[2]:</span>
<span class="go">a    2</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>为避免此行为，指定值 <code class="docutils literal notranslate"><span class="pre">numeric_only=None</span></code> 已被弃用，并将在 pandas 的未来版本中删除。将来，所有带有 <code class="docutils literal notranslate"><span class="pre">numeric_only</span></code> 参数的操作都将默认设置为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。用户应仅对可操作的列调用操作，或者指定 <code class="docutils literal notranslate"><span class="pre">numeric_only=True</span></code> 以仅对布尔、整数和浮点列进行操作。</p>
<p>为了支持向新行为的过渡，以下方法已获得 <code class="docutils literal notranslate"><span class="pre">numeric_only</span></code> 参数。</p>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.corr.html#pandas.DataFrame.corr" title="pandas.DataFrame.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corr()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.corrwith.html#pandas.DataFrame.corrwith" title="pandas.DataFrame.corrwith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corrwith()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.cov.html#pandas.DataFrame.cov" title="pandas.DataFrame.cov"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.cov()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.idxmin.html#pandas.DataFrame.idxmin" title="pandas.DataFrame.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.idxmin()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.idxmax.html#pandas.DataFrame.idxmax" title="pandas.DataFrame.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.idxmax()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummin.html#pandas.core.groupby.DataFrameGroupBy.cummin" title="pandas.core.groupby.DataFrameGroupBy.cummin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummin()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummax.html#pandas.core.groupby.DataFrameGroupBy.cummax" title="pandas.core.groupby.DataFrameGroupBy.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummax()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmin.html#pandas.core.groupby.DataFrameGroupBy.idxmin" title="pandas.core.groupby.DataFrameGroupBy.idxmin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmin()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.idxmax.html#pandas.core.groupby.DataFrameGroupBy.idxmax" title="pandas.core.groupby.DataFrameGroupBy.idxmax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.idxmax()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.var.html#pandas.core.groupby.DataFrameGroupBy.var" title="pandas.core.groupby.DataFrameGroupBy.var"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.var()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.std.html#pandas.core.groupby.DataFrameGroupBy.std" title="pandas.core.groupby.DataFrameGroupBy.std"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.std()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.sem.html#pandas.core.groupby.DataFrameGroupBy.sem" title="pandas.core.groupby.DataFrameGroupBy.sem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.sem()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.quantile.html#pandas.core.groupby.DataFrameGroupBy.quantile" title="pandas.core.groupby.DataFrameGroupBy.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.quantile()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.mean.html#pandas.core.resample.Resampler.mean" title="pandas.core.resample.Resampler.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.mean()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.median.html#pandas.core.resample.Resampler.median" title="pandas.core.resample.Resampler.median"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.median()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.sem.html#pandas.core.resample.Resampler.sem" title="pandas.core.resample.Resampler.sem"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.sem()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.std.html#pandas.core.resample.Resampler.std" title="pandas.core.resample.Resampler.std"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.std()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.resample.Resampler.var.html#pandas.core.resample.Resampler.var" title="pandas.core.resample.Resampler.var"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.var()</span></code></a></p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code></a> 操作</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.expanding.html#pandas.DataFrame.expanding" title="pandas.DataFrame.expanding"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.expanding()</span></code></a> 操作</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.ewm.html#pandas.DataFrame.ewm" title="pandas.DataFrame.ewm"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.ewm()</span></code></a> 操作</p></li>
</ul>
</section>
<section id="other-deprecations">
<span id="whatsnew-150-deprecations-other"></span><h3>其他弃用<a class="headerlink" href="v1.5.0.html#other-deprecations" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.to_csv.html#pandas.Series.to_csv" title="pandas.Series.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_csv()</span></code></a> 中弃用了关键字 <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code>，请改用 <code class="docutils literal notranslate"><span class="pre">lineterminator</span></code>；这是为了与 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 和标准库“csv”模块保持一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/9568">GH 9568</a>)</p></li>
<li><p>当传递非稀疏 <code class="docutils literal notranslate"><span class="pre">dtype</span></code> 时，弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArray.astype()</span></code>, <a class="reference internal" href="../reference/api/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.astype()</span></code></a>, 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 与 <a class="reference internal" href="../reference/api/pandas.SparseDtype.html#pandas.SparseDtype" title="pandas.SparseDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDtype</span></code></a> 的行为。在未来的版本中，这将转换为该非稀疏 dtype，而不是将其封装在 <a class="reference internal" href="../reference/api/pandas.SparseDtype.html#pandas.SparseDtype" title="pandas.SparseDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDtype</span></code></a> 中 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34457">GH 34457</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.intersection()</span></code> 和 <code class="xref py py-meth docutils literal notransrate"><span class="pre">DatetimeIndex.symmetric_difference()</span></code>（<code class="docutils literal notranslate"><span class="pre">union</span></code> 行为已在 1.3.0 版本中弃用）与混合时区的行为；在未来的版本中，两者都将转换为 UTC 而不是对象 dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39328">GH 39328</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45357">GH 45357</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iteritems()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.iteritems()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">HDFStore.iteritems()</span></code>，转而使用 <a class="reference internal" href="../reference/api/pandas.DataFrame.items.html#pandas.DataFrame.items" title="pandas.DataFrame.items"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.items()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.items.html#pandas.Series.items" title="pandas.Series.items"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.items()</span></code></a>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">HDFStore.items()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45321">GH 45321</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.is_monotonic()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.is_monotonic()</span></code>，转而使用 <a class="reference internal" href="../reference/api/pandas.Series.is_monotonic_increasing.html#pandas.Series.is_monotonic_increasing" title="pandas.Series.is_monotonic_increasing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.is_monotonic_increasing()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Index.is_monotonic_increasing.html#pandas.Index.is_monotonic_increasing" title="pandas.Index.is_monotonic_increasing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.is_monotonic_increasing()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45422">GH 45422</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/21335">GH 21335</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.astype()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">TimedeltaIndex.astype()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.astype()</span></code> 在转换为除 <code class="docutils literal notranslate"><span class="pre">int64</span></code> 之外的整数 dtype 时的行为。在未来的版本中，这些将精确转换为指定的 dtype（而不是始终转换为 <code class="docutils literal notranslate"><span class="pre">int64</span></code>），并且如果转换溢出将引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45034">GH 45034</a>)</p></li>
<li><p>弃用了 DataFrame 和 Series 的 <code class="docutils literal notranslate"><span class="pre">__array_wrap__</span></code> 方法，改为依赖标准的 numpy ufuncs (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45451">GH 45451</a>)</p></li>
<li><p>当浮点型数据在 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 或 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 中与时区一起传递时，将其视为实际时间（wall-times）的行为已弃用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45573">GH 45573</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype 和不兼容填充值时的行为；在未来的版本中，这将转换为一个通用 dtype（通常是对象）而不是引发错误，与其它 dtype 的行为保持一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45746">GH 45746</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.infer_freq.html#pandas.infer_freq" title="pandas.infer_freq"><code class="xref py py-func docutils literal notranslate"><span class="pre">infer_freq()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">warn</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45947">GH 45947</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.argsort.html#pandas.api.extensions.ExtensionArray.argsort" title="pandas.api.extensions.ExtensionArray.argsort"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray.argsort()</span></code></a> 中允许非关键字参数的用法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46134">GH 46134</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.DataFrame.any.html#pandas.DataFrame.any" title="pandas.DataFrame.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.any()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.all.html#pandas.DataFrame.all" title="pandas.DataFrame.all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.all()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">bool_only=True</span></code> 时将全布尔 <code class="docutils literal notranslate"><span class="pre">object</span></code>-dtype 列视为布尔型的方式，请明确转换为布尔型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46188">GH 46188</a>)</p></li>
<li><p>弃用了方法 <a class="reference internal" href="../reference/api/pandas.DataFrame.quantile.html#pandas.DataFrame.quantile" title="pandas.DataFrame.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.quantile()</span></code></a> 的行为，属性 <code class="docutils literal notranslate"><span class="pre">numeric_only</span></code> 将默认为 False。结果将包括日期时间/时间差列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7308">GH 7308</a>)。</p></li>
<li><p>弃用了 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Timedelta.freq</span></code> 和 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Timedelta.is_populated</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46430">GH 46430</a>)</p></li>
<li><p>弃用了 <code class="xref py py-attr docutils literal notranslate"><span class="pre">Timedelta.delta</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46476">GH 46476</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.DataFrame.any.html#pandas.DataFrame.any" title="pandas.DataFrame.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.any()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.any.html#pandas.Series.any" title="pandas.Series.any"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.any()</span></code></a> 中将参数作为位置参数传递的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44802">GH 44802</a>)</p></li>
<li><p>弃用了除 <code class="docutils literal notranslate"><span class="pre">data</span></code> 外，在 <a class="reference internal" href="../reference/api/pandas.DataFrame.pivot.html#pandas.DataFrame.pivot" title="pandas.DataFrame.pivot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pivot()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.pivot.html#pandas.pivot" title="pandas.pivot"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot()</span></code></a> 中传递位置参数的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/30228">GH 30228</a>)</p></li>
<li><p>弃用了方法 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mad()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mad()</span></code> 以及相应的 groupby 方法 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/11787">GH 11787</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.Index.join.html#pandas.Index.join" title="pandas.Index.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.join()</span></code></a> 中除 <code class="docutils literal notranslate"><span class="pre">other</span></code> 之外的位置参数，请改用仅限关键字的参数而非位置参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46518">GH 46518</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">StringMethods.rsplit()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">StringMethods.split()</span></code> 中除 <code class="docutils literal notranslate"><span class="pre">pat</span></code> 之外的位置参数，请改用仅限关键字的参数而非位置参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47423">GH 47423</a>)</p></li>
<li><p>弃用了对不带时区信息的 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 使用表示带时区信息的日期时间字符串进行索引的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46903">GH 46903</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/36148">GH 36148</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 构造函数中，允许 <code class="docutils literal notranslate"><span class="pre">unit="M"</span></code> 或 <code class="docutils literal notranslate"><span class="pre">unit="Y"</span></code> 与非整数浮点值一起使用 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47267">GH 47267</a>)</p></li>
<li><p>弃用了 <code class="docutils literal notranslate"><span class="pre">display.column_space</span></code> 全局配置选项 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/7576">GH 7576</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Index.factorize.html#pandas.Index.factorize" title="pandas.Index.factorize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.factorize()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.api.extensions.ExtensionArray.factorize.html#pandas.api.extensions.ExtensionArray.factorize" title="pandas.api.extensions.ExtensionArray.factorize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray.factorize()</span></code></a> 中的参数 <code class="docutils literal notranslate"><span class="pre">na_sentinel</span></code>；请改用 <code class="docutils literal notranslate"><span class="pre">use_na_sentinel=True</span></code> 表示 NaN 值使用哨兵值 <code class="docutils literal notranslate"><span class="pre">-1</span></code>，以及 <code class="docutils literal notranslate"><span class="pre">use_na_sentinel=False</span></code>（代替 <code class="docutils literal notranslate"><span class="pre">na_sentinel=None</span></code>）来编码 NaN 值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46910">GH 46910</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 在 UDF 返回 DataFrame 时不进行结果对齐的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45648">GH 45648</a>)</p></li>
<li><p>澄清了 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 在带分隔符的日期无法根据指定的 <code class="docutils literal notranslate"><span class="pre">dayfirst</span></code> 参数解析时发出的警告 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46210">GH 46210</a>)</p></li>
<li><p>当带分隔符的日期无法根据指定的 <code class="docutils literal notranslate"><span class="pre">dayfirst</span></code> 参数解析时，即使对于省略前导零的日期（例如 <code class="docutils literal notranslate"><span class="pre">31/1/2001</span></code>），<a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 也会发出警告 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47880">GH 47880</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">Resampler</span></code> 的归约器（例如 <code class="docutils literal notranslate"><span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>, <code class="docutils literal notranslate"><span class="pre">sum</span></code>, <code class="docutils literal notranslate"><span class="pre">mean</span></code>）在 dtype 为非数值且提供了 <code class="docutils literal notranslate"><span class="pre">numeric_only=True</span></code> 时引发 <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> 的行为；在未来的版本中，这将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47500">GH 47500</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.Series.rank.html#pandas.Series.rank" title="pandas.Series.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rank()</span></code></a> 在 dtype 为非数值且提供了 <code class="docutils literal notranslate"><span class="pre">numeric_only=True</span></code> 时返回空结果的行为；在未来的版本中，这将引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47500">GH 47500</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.Series.mask.html#pandas.Series.mask" title="pandas.Series.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mask()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.where()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.DataFrame.mask.html#pandas.DataFrame.mask" title="pandas.DataFrame.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mask()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> 中的参数 <code class="docutils literal notranslate"><span class="pre">errors</span></code>，因为 <code class="docutils literal notranslate"><span class="pre">errors</span></code> 对这些方法没有影响 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47728">GH 47728</a>)</p></li>
<li><p>弃用了 <code class="xref py py-class docutils literal notranslate"><span class="pre">Rolling</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Expanding</span></code> 和 <code class="xref py py-class docutils literal notranslate"><span class="pre">ExponentialMovingWindow</span></code> 操作中的参数 <code class="docutils literal notranslate"><span class="pre">*args</span></code> 和 <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>。( <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47836">GH 47836</a>)</p></li>
<li><p>弃用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.set_ordered()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.as_ordered()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.as_unordered()</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">inplace</span></code> 关键字 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37643">GH 37643</a>)</p></li>
<li><p>弃用了通过 <code class="docutils literal notranslate"><span class="pre">cat.categories</span> <span class="pre">=</span> <span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c']</span></code> 设置分类变量类别的方式，请改用 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.rename_categories()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37643">GH 37643</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.Series.to_excel.html#pandas.Series.to_excel" title="pandas.Series.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_excel()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_excel()</span></code></a> 中未使用的参数 <code class="docutils literal notranslate"><span class="pre">encoding</span></code> 和 <code class="docutils literal notranslate"><span class="pre">verbose</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47912">GH 47912</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.DataFrame.set_axis.html#pandas.DataFrame.set_axis" title="pandas.DataFrame.set_axis"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.set_axis()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.set_axis.html#pandas.Series.set_axis" title="pandas.Series.set_axis"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.set_axis()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">inplace</span></code> 关键字，请改用 <code class="docutils literal notranslate"><span class="pre">obj</span> <span class="pre">=</span> <span class="pre">obj.set_axis(...,</span> <span class="pre">copy=False)</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48130">GH 48130</a>)</p></li>
<li><p>弃用了对按长度为 1 的列表分组的 <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameGroupBy</span></code> 或 <code class="xref py py-class docutils literal notranslate"><span class="pre">SeriesGroupBy</span></code> 进行迭代时，生成单个元素的情况；将改为返回长度为一的元组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/42795">GH 42795</a>)</p></li>
<li><p>修复了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.lesort_depth()</span></code> 作为公共方法弃用的警告消息，因为该消息之前错误地引用了 <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.is_lexsorted()</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/38701">GH 38701</a>)</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.plot.html#pandas.Series.plot" title="pandas.Series.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.plot()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">sort_columns</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47563">GH 47563</a>)。</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_stata.html#pandas.DataFrame.to_stata" title="pandas.DataFrame.to_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_stata()</span></code></a> 中除第一个参数之外的所有位置参数，请改用关键字参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48128">GH 48128</a>)。</p></li>
<li><p>弃用了 <a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.read_fwf.html#pandas.read_fwf" title="pandas.read_fwf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_fwf()</span></code></a>, <a class="reference internal" href="../reference/api/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中的 <code class="docutils literal notranslate"><span class="pre">mangle_dupe_cols</span></code> 参数。该参数从未实现，取而代之将添加一个可以指定重命名模式的新参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47718">GH 47718</a>)</p></li>
<li><p>弃用了在 <a class="reference internal" href="../reference/api/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.astype()</span></code></a> 中允许 <code class="docutils literal notranslate"><span class="pre">dtype='datetime64'</span></code> 或 <code class="docutils literal notranslate"><span class="pre">dtype=np.datetime64</span></code> 的行为，请改用 “datetime64[ns]” (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47844">GH 47844</a>)</p></li>
</ul>
</section>
</section>
<section id="performance-improvements">
<span id="whatsnew-150-performance"></span><h2>性能改进<a class="headerlink" href="v1.5.0.html#performance-improvements" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>当 other 是 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时，<a class="reference internal" href="../reference/api/pandas.DataFrame.corrwith.html#pandas.DataFrame.corrwith" title="pandas.DataFrame.corrwith"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corrwith()</span></code></a> 在列向 (axis=0) Pearson 和 Spearman 相关性方面的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46174">GH 46174</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.transform.html#pandas.core.groupby.SeriesGroupBy.transform" title="pandas.core.groupby.SeriesGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.transform()</span></code></a> 中，对于某些用户定义的 DataFrame -> Series 函数，性能有所提高 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45387">GH 45387</a>)</p></li>
<li><p>当子集仅包含一列时，<a class="reference internal" href="../reference/api/pandas.DataFrame.duplicated.html#pandas.DataFrame.duplicated" title="pandas.DataFrame.duplicated"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.duplicated()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45236">GH 45236</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.diff.html#pandas.core.groupby.DataFrameGroupBy.diff" title="pandas.core.groupby.DataFrameGroupBy.diff"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.diff()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.diff.html#pandas.core.groupby.SeriesGroupBy.diff" title="pandas.core.groupby.SeriesGroupBy.diff"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.diff()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16706">GH 16706</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.transform.html#pandas.core.groupby.SeriesGroupBy.transform" title="pandas.core.groupby.SeriesGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.transform()</span></code></a> 中，当为用户定义函数广播值时，性能有所提高 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45708">GH 45708</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.transform.html#pandas.core.groupby.SeriesGroupBy.transform" title="pandas.core.groupby.SeriesGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.transform()</span></code></a> 中，当只存在一个组时，用户定义函数的性能有所提高 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44977">GH 44977</a>)</p></li>
<li><p>在非唯一未排序索引上分组时，<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.apply.html#pandas.core.groupby.DataFrameGroupBy.apply" title="pandas.core.groupby.DataFrameGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.apply()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.apply.html#pandas.core.groupby.SeriesGroupBy.apply" title="pandas.core.groupby.SeriesGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.apply()</span></code></a> 的性能有所提高 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46527">GH 46527</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.loc.html#pandas.Series.loc" title="pandas.Series.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.loc()</span></code></a> 中，针对 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 的基于元组的索引性能有所提高 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45681">GH 45681</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46040">GH 46040</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46330">GH 46330</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.var.html#pandas.core.groupby.DataFrameGroupBy.var" title="pandas.core.groupby.DataFrameGroupBy.var"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.var()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.var.html#pandas.core.groupby.SeriesGroupBy.var" title="pandas.core.groupby.SeriesGroupBy.var"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.var()</span></code></a> 中，当 <code class="docutils literal notranslate"><span class="pre">ddof</span></code> 不为 1 时，性能有所提高 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48152">GH 48152</a>)</p></li>
<li><p>当索引是 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时，<a class="reference internal" href="../reference/api/pandas.DataFrame.to_records.html#pandas.DataFrame.to_records" title="pandas.DataFrame.to_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_records()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47263">GH 47263</a>)</p></li>
<li><p>当 MultiIndex 包含 DatetimeIndex、TimedeltaIndex 或 ExtensionDtypes 类型的级别时，<code class="xref py py-attr docutils literal notranslate"><span class="pre">MultiIndex.values</span></code> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46288">GH 46288</a>)</p></li>
<li><p>当左侧和/或右侧为空时，<a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45838">GH 45838</a>)</p></li>
<li><p>当左侧和/或右侧为空时，<a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46015">GH 46015</a>)</p></li>
<li><p>当目标是 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时，<a class="reference internal" href="../reference/api/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex" title="pandas.DataFrame.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.reindex.html#pandas.Series.reindex" title="pandas.Series.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.reindex()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46235">GH 46235</a>)</p></li>
<li><p>在 PyArrow 支持的字符串数组中设置值时的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46400">GH 46400</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46109">GH 46109</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 构造函数对扩展 dtype 标量的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45854">GH 45854</a>)</p></li>
<li><p>当提供了 <code class="docutils literal notranslate"><span class="pre">nrows</span></code> 参数时，<a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/32727">GH 32727</a>)</p></li>
<li><p>当应用重复的 CSS 格式时，<a class="reference internal" href="../reference/api/pandas.io.formats.style.Styler.to_excel.html#pandas.io.formats.style.Styler.to_excel" title="pandas.io.formats.style.Styler.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.to_excel()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47371">GH 47371</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.is_monotonic_increasing()</span></code> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47458">GH 47458</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">BusinessHour</span></code> <code class="docutils literal notranslate"><span class="pre">str</span></code> 和 <code class="docutils literal notranslate"><span class="pre">repr</span></code> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44764">GH 44764</a>)</p></li>
<li><p>当使用默认的 strftime 格式 <code class="docutils literal notranslate"><span class="pre">"%Y-%m-%d</span> <span class="pre">%H:%M:%S"</span></code> 或 <code class="docutils literal notranslate"><span class="pre">"%Y-%m-%d</span> <span class="pre">%H:%M:%S.%f"</span></code> 之一时，日期时间数组字符串格式化的性能改进。( <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44764">GH 44764</a>)</p></li>
<li><p>在处理时间数组时，<a class="reference internal" href="../reference/api/pandas.Series.to_sql.html#pandas.Series.to_sql" title="pandas.Series.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_sql()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">SQLiteTable</span></code>) 的性能改进。( <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44764">GH 44764</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47404">GH 47404</a>)</p></li>
<li><p>对于 <a class="reference internal" href="../reference/api/pandas.arrays.SparseArray.html#pandas.arrays.SparseArray" title="pandas.arrays.SparseArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">arrays.SparseArray</span></code></a>，<code class="docutils literal notranslate"><span class="pre">argmax</span></code> 和 <code class="docutils literal notranslate"><span class="pre">argmin</span></code> 的性能改进 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/34197">GH 34197</a>)</p></li>
</ul>
</section>
<section id="bug-fixes">
<span id="whatsnew-150-bug-fixes"></span><h2>错误修复<a class="headerlink" href="v1.5.0.html#bug-fixes" title="Link to this heading">#</a></h2>
<section id="categorical">
<h3>分类<a class="headerlink" href="v1.5.0.html#categorical" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.view()</span></code> 不接受整数 dtypes 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/25464">GH 25464</a>)</p></li>
<li><p>当索引类别为整数 dtype 且索引包含 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值时，<code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex.union()</span></code> 错误地引发错误而不是转换为 <code class="docutils literal notranslate"><span class="pre">float64</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45362">GH 45362</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">concat()</span></code></a> 在连接两个（或更多）无序 <a class="reference internal" href="../reference/api/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> 变量时，如果其类别是排列，则产生不正确的索引值的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/24845">GH 24845</a>)</p></li>
</ul>
</section>
<section id="datetimelike">
<h3>日期时间类<a class="headerlink" href="v1.5.0.html#datetimelike" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.quantile.html#pandas.DataFrame.quantile" title="pandas.DataFrame.quantile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.quantile()</span></code></a> 在处理日期时间类 dtype 且没有行时，错误地返回 <code class="docutils literal notranslate"><span class="pre">float64</span></code> dtype 而不是保留日期时间类 dtype 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41544">GH 41544</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 在处理 <code class="docutils literal notranslate"><span class="pre">np.str_</span></code> 对象序列时错误地引发错误的 Bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/32264">GH 32264</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 构造中，当将日期时间组件作为位置参数传递，并将 <code class="docutils literal notranslate"><span class="pre">tzinfo</span></code> 作为关键字参数传递时，错误地引发了错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/31929">GH 31929</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Index.astype.html#pandas.Index.astype" title="pandas.Index.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.astype()</span></code></a> 中，当从对象 dtype 转换为 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype 时，错误地将 <code class="docutils literal notranslate"><span class="pre">np.datetime64("NaT")</span></code> 值转换为 <code class="docutils literal notranslate"><span class="pre">np.timedelta64("NaT")</span></code> 而不是引发错误的 Bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45722">GH 45722</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.value_counts.html#pandas.core.groupby.SeriesGroupBy.value_counts" title="pandas.core.groupby.SeriesGroupBy.value_counts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.value_counts()</span></code></a> 的索引中，当传递分类列时，出现的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44324">GH 44324</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DatetimeIndex.tz_localize.html#pandas.DatetimeIndex.tz_localize" title="pandas.DatetimeIndex.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.tz_localize()</span></code></a> 本地化到 UTC 时未能复制底层数据的 Bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46460">GH 46460</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.resolution()</span></code> 错误地返回“day”而不是“nanosecond”的错误，针对纳秒级分辨率的索引 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46903">GH 46903</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 中，当使用整数或浮点值以及 <code class="docutils literal notranslate"><span class="pre">unit="Y"</span></code> 或 <code class="docutils literal notranslate"><span class="pre">unit="M"</span></code> 时，结果略有错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47266">GH 47266</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.arrays.DatetimeArray.html#pandas.arrays.DatetimeArray" title="pandas.arrays.DatetimeArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeArray</span></code></a> 构造中，当传递另一个 <a class="reference internal" href="../reference/api/pandas.arrays.DatetimeArray.html#pandas.arrays.DatetimeArray" title="pandas.arrays.DatetimeArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeArray</span></code></a> 且 <code class="docutils literal notranslate"><span class="pre">freq=None</span></code> 时，错误地从给定数组推断频率的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47296">GH 47296</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> 中，即使 <code class="docutils literal notranslate"><span class="pre">errors=coerce</span></code>，如果行数超过 50 行，也会抛出 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> 的 Bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45319">GH 45319</a>)</p></li>
<li><p>将 <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> 添加到 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时，不添加 <code class="docutils literal notranslate"><span class="pre">nanoseconds</span></code> 字段的 Bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47856">GH 47856</a>)</p></li>
</ul>
</section>
<section id="timedelta">
<h3>时间差<a class="headerlink" href="v1.5.0.html#timedelta" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">astype_nansafe()</span></code> astype(“timedelta64[ns]”) 在包含 np.nan 时失败的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45798">GH 45798</a>)</p></li>
<li><p>在构造 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 时，当传入 <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> 对象和 <code class="docutils literal notranslate"><span class="pre">unit</span></code> 时，有时会静默溢出并返回不正确结果，而不是引发 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsTimedelta</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46827">GH 46827</a>)</p></li>
<li><p>在构造 <a class="reference internal" href="../reference/api/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> 时，当从带有 <code class="docutils literal notranslate"><span class="pre">unit="W"</span></code> 的大整数或浮点数构造时，静默溢出并返回不正确结果，而不是引发 <code class="docutils literal notranslate"><span class="pre">OutOfBoundsTimedelta</span></code> 的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47268">GH 47268</a>)</p></li>
</ul>
</section>
<section id="time-zones">
<h3>时区<a class="headerlink" href="v1.5.0.html#time-zones" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>在 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 构造函数中，当传入 <code class="docutils literal notranslate"><span class="pre">ZoneInfo</span></code> tzinfo 对象时引发错误的 Bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46425">GH 46425</a>)</p></li>
</ul>
</section>
<section id="numeric">
<h3>数值<a class="headerlink" href="v1.5.0.html#numeric" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>当对带有 <code class="docutils literal notranslate"><span class="pre">dtype="boolean"</span></code> 和 <a class="reference internal" href="../reference/api/pandas.NA.html#pandas.NA" title="pandas.NA"><code class="xref py py-attr docutils literal notranslate"><span class="pre">NA</span></code></a> 的类数组执行操作时，错误地原地修改数组的 Bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45421">GH 45421</a>)</p></li>
<li><p>当可空类型没有 <a class="reference internal" href="../reference/api/pandas.NA.html#pandas.NA" title="pandas.NA"><code class="xref py py-attr docutils literal notranslate"><span class="pre">NA</span></code></a> 值时，算术运算与不可空类型的相同运算不匹配的 Bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48223">GH 48223</a>)</p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">floordiv</span></code> 中，当除以 <code class="docutils literal notranslate"><span class="pre">IntegerDtype</span></code> <code class="docutils literal notranslate"><span class="pre">0</span></code> 时，会返回 <code class="docutils literal notranslate"><span class="pre">0</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">inf</span></code> 的 Bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48223">GH 48223</a>)</p></li>
<li><p>在对带有 <code class="docutils literal notranslate"><span class="pre">dtype="boolean"</span></code> 的类数组进行除法、<code class="docutils literal notranslate"><span class="pre">pow</span></code> 和 <code class="docutils literal notranslate"><span class="pre">mod</span></code> 操作时，行为与相应的 <code class="docutils literal notranslate"><span class="pre">np.bool_</span></code> 类型不一致的 Bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46063">GH 46063</a>)</p></li>
<li><p>将带有 <code class="docutils literal notranslate"><span class="pre">IntegerDtype</span></code> 或 <code class="docutils literal notranslate"><span class="pre">FloatingDtype</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 乘以带有 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype 的类数组时，错误地引发错误的 Bug (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45622">GH 45622</a>)</p></li>
<li><p>在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">mean()</span></code> 中，可选依赖项 <code class="docutils literal notranslate"><span class="pre">bottleneck</span></code> 导致精度损失与数组长度呈线性关系。已为 <code class="xref py py-meth docutils literal notranslate"><span class="pre">mean()</span></code> 禁用 <code class="docutils literal notranslate"><span class="pre">bottleneck</span></code>，将损失改进为对数线性，但这可能导致性能下降。( <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/42878">GH 42878</a>)</p></li>
</ul>
</section>
<section id="conversion">
<h3>转换<a class="headerlink" href="v1.5.0.html#conversion" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 未保留子类的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40810">GH 40810</a>)</p></li>
<li><p>从包含浮点数的列表或浮点数dtype的ndarray-like（例如 <code class="docutils literal notranslate"><span class="pre">dask.Array</span></code>）以及整数dtype构造 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时出现错误，抛出异常而不是像处理 <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> 那样进行类型转换 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40110">GH 40110</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Float64Index.astype()</span></code> 将其转换为无符号整数dtype时出现错误，错误地将其转换为 <code class="docutils literal notranslate"><span class="pre">np.int64</span></code> dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45309">GH 45309</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.astype()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> 将浮点数dtype转换为无符号整数dtype时出现错误，在存在负值的情况下未能引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45151">GH 45151</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.array.html#pandas.array" title="pandas.array"><code class="xref py py-func docutils literal notranslate"><span class="pre">array()</span></code></a> 在使用 <code class="docutils literal notranslate"><span class="pre">FloatingDtype</span></code> 且值中包含可转换为浮点数的字符串时，错误地引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45424">GH 45424</a>)</p></li>
<li><p>比较字符串和 datetime64ns 对象时导致 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> 异常的错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45506">GH 45506</a>)</p></li>
<li><p>通用抽象dtypes的元类中的错误导致 <a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.apply.html#pandas.Series.apply" title="pandas.Series.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.apply()</span></code></a> 对内置函数 <code class="docutils literal notranslate"><span class="pre">type</span></code> 引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46684">GH 46684</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_records.html#pandas.DataFrame.to_records" title="pandas.DataFrame.to_records"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_records()</span></code></a> 中的错误：如果索引是 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a>，则返回不一致的 numpy 类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47263">GH 47263</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict" title="pandas.DataFrame.to_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_dict()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">orient="list"</span></code> 或 <code class="docutils literal notranslate"><span class="pre">orient="index"</span></code> 模式下未能返回原生类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46751">GH 46751</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> 中的错误：当应用于空 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 且 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 时，返回 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 而不是 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/39111">GH 39111</a>)</p></li>
<li><p>从一个 <em>不是</em> NumPy <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> 但由所有 NumPy 无符号整数标量组成的 iterable 推断 dtype 时出现错误，未能推断出无符号整数dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47294">GH 47294</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.eval.html#pandas.DataFrame.eval" title="pandas.DataFrame.eval"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.eval()</span></code></a> 中的错误：当 pandas 对象（例如 <code class="docutils literal notranslate"><span class="pre">'Timestamp'</span></code>）作为列名时出现问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44603">GH 44603</a>)</p></li>
</ul>
</section>
<section id="strings">
<h3>字符串<a class="headerlink" href="v1.5.0.html#strings" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.pythonlang.cn/3/library/stdtypes.html#str.startswith" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.startswith()</span></code></a> 和 <a class="reference external" href="https://docs.pythonlang.cn/3/library/stdtypes.html#str.endswith" title="(in Python v3.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">str.endswith()</span></code></a> 在使用其他 Series 作为参数 _pat_ 时出现错误。现在引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/3485">GH 3485</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.str.zfill.html#pandas.Series.str.zfill" title="pandas.Series.str.zfill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.zfill()</span></code></a> 中的错误：当字符串包含前导符号时，在符号字符之前而不是之后填充 '0'，与标准库的 <code class="docutils literal notranslate"><span class="pre">str.zfill</span></code> 行为不符 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/20868">GH 20868</a>)</p></li>
</ul>
</section>
<section id="interval">
<h3>区间<a class="headerlink" href="v1.5.0.html#interval" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalArray.__setitem__()</span></code> 中的错误：当将 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> 设置到基于整数的数组中时，引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45484">GH 45484</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.IntervalDtype.html#pandas.IntervalDtype" title="pandas.IntervalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalDtype</span></code></a> 中的错误：当使用 datetime64[ns, tz] 作为 dtype 字符串时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46999">GH 46999</a>)</p></li>
</ul>
</section>
<section id="indexing">
<h3>索引<a class="headerlink" href="v1.5.0.html#indexing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.iloc.html#pandas.DataFrame.iloc" title="pandas.DataFrame.iloc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iloc()</span></code></a> 中的错误：当对仅包含一个 ExtensionDtype 列的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 索引单行时，返回的是副本而非底层数据的视图 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45241">GH 45241</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__getitem__()</span></code> 中的错误：即使选择了唯一列，当 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 包含重复列时仍返回副本 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45316">GH 45316</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41062">GH 41062</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.align.html#pandas.Series.align" title="pandas.Series.align"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.align()</span></code></a> 中的错误：当两个 MultiIndex 的交集相同时，未能创建具有级别并集的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45224">GH 45224</a>)</p></li>
<li><p>将 NA 值（<code class="docutils literal notranslate"><span class="pre">None</span></code> 或 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>）设置到基于整数的 <a class="reference internal" href="../reference/api/pandas.IntervalDtype.html#pandas.IntervalDtype" title="pandas.IntervalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalDtype</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中时出现错误，错误地将其转换为 object dtype 而不是基于浮点数的 <a class="reference internal" href="../reference/api/pandas.IntervalDtype.html#pandas.IntervalDtype" title="pandas.IntervalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalDtype</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45568">GH 45568</a>)</p></li>
<li><p>索引时将值设置到 <code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 列中出现错误，当使用 <code class="docutils literal notranslate"><span class="pre">df.iloc[:,</span> <span class="pre">i]</span> <span class="pre">=</span> <span class="pre">values</span></code> 且 <code class="docutils literal notranslate"><span class="pre">values</span></code> 具有与 <code class="docutils literal notranslate"><span class="pre">df.iloc[:,</span> <span class="pre">i]</span></code> 相同的 dtype 时，错误地插入了新数组而不是原地设置 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/33457">GH 33457</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__setitem__()</span></code> 中的错误：当使用非整数 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 且使用整数键设置无法原地设置的值时，引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> 而不是转换为通用 dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45070">GH 45070</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 中的错误：当将值作为列表设置到 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 中时，未将 <code class="docutils literal notranslate"><span class="pre">None</span></code> 转换为 <code class="docutils literal notranslate"><span class="pre">NA</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47987">GH 47987</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__setitem__()</span></code> 中的错误：当将不兼容的值设置到 <code class="docutils literal notranslate"><span class="pre">PeriodDtype</span></code> 或 <code class="docutils literal notranslate"><span class="pre">IntervalDtype</span></code> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中时，使用布尔掩码索引时会引发异常，而使用其他等效索引器时则会强制转换；现在这些操作都一致地强制转换，包括 <a class="reference internal" href="../reference/api/pandas.Series.mask.html#pandas.Series.mask" title="pandas.Series.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mask()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.where()</span></code></a> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45768">GH 45768</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> 中的错误：当存在多个日期时间类 dtype 的列时，未能将结果降级以与其他 dtype 保持一致 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45837">GH 45837</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">isin()</span></code> 中的错误：当使用无符号整数 dtype 和没有 dtype 的列表状参数时，错误地向上转换为 <code class="docutils literal notranslate"><span class="pre">float64</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46485">GH 46485</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.loc.__setitem__()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.loc.__getitem__()</span></code> 中的错误：当不使用 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 但使用多个键时，未引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/13831">GH 13831</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Index.reindex.html#pandas.Index.reindex" title="pandas.Index.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.reindex()</span></code></a> 中的错误：当指定了 <code class="docutils literal notranslate"><span class="pre">level</span></code> 但未提供 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时引发 <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code>；现在 level 被忽略 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35132">GH 35132</a>)</p></li>
<li><p>当设置的值对于 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 的 dtype 来说太大时，未能强制转换为通用类型 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/26049">GH 26049</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/32878">GH 32878</a>) 中的错误</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">loc.__setitem__()</span></code> 中的错误：将 <code class="docutils literal notranslate"><span class="pre">range</span></code> 键视为位置而非基于标签的键 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45479">GH 45479</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__setitem__()</span></code> 中的错误：当使用标量键和 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 作为值进行设置时，将扩展数组 dtypes 转换为 object (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46896">GH 46896</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__setitem__()</span></code> 中的错误：当将标量设置到可为空的 pandas dtype 时，如果标量无法（无损地）转换为可为空的类型，则不会引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45404">GH 45404</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__setitem__()</span></code> 中的错误：当设置包含 <code class="docutils literal notranslate"><span class="pre">NA</span></code> 的 <code class="docutils literal notranslate"><span class="pre">boolean</span></code> dtype 值时，错误地引发异常而不是转换为 <code class="docutils literal notranslate"><span class="pre">boolean</span></code> dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45462">GH 45462</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.loc.html#pandas.Series.loc" title="pandas.Series.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.loc()</span></code></a> 中的错误：当 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 不匹配时，布尔索引器包含 <code class="docutils literal notranslate"><span class="pre">NA</span></code> 导致引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46551">GH 46551</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__setitem__()</span></code> 中的错误：将 <a class="reference internal" href="../reference/api/pandas.NA.html#pandas.NA" title="pandas.NA"><code class="xref py py-attr docutils literal notranslate"><span class="pre">NA</span></code></a> 设置到数值型 dtype 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中时，会错误地向上转换为 object-dtype，而不是将值视为 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44199">GH 44199</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 中的错误：当将值设置到列中且右侧是字典时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47216">GH 47216</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__setitem__()</span></code> 中的错误：当使用 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype、全为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 的布尔掩码和不兼容的值时，错误地转换为 <code class="docutils literal notranslate"><span class="pre">object</span></code> 而不是保留 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45967">GH 45967</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.__getitem__()</span></code> 中的错误：当索引器是来自包含 <code class="docutils literal notranslate"><span class="pre">NA</span></code> 的布尔 dtype 时，引发 <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45806">GH 45806</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.__setitem__()</span></code> 中的错误：使用标量扩展 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 时丢失精度 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/32346">GH 32346</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.mask.html#pandas.Series.mask" title="pandas.Series.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mask()</span></code></a> 中的错误：当 <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code> 或使用小整数 dtypes 的布尔掩码设置值时，错误地引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45750">GH 45750</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.mask.html#pandas.DataFrame.mask" title="pandas.DataFrame.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mask()</span></code></a> 中的错误：当 <code class="docutils literal notranslate"><span class="pre">inplace=True</span></code> 且包含 <code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> 列时，错误地引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45577">GH 45577</a>)</p></li>
<li><p>从具有 object-dtype 行索引且包含日期时间类值的 DataFrame 中获取列时出现错误：现在生成的 Series 会保留父 DataFrame 中精确的 object-dtype Index (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/42950">GH 42950</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.__getattribute__()</span></code> 中的错误：如果列具有 <code class="docutils literal notranslate"><span class="pre">"string"</span></code> dtype，则引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46185">GH 46185</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.compare.html#pandas.DataFrame.compare" title="pandas.DataFrame.compare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.compare()</span></code></a> 中的错误：当比较扩展数组 dtype 和 numpy dtype 时，返回全为 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 的列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44014">GH 44014</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> 中的错误：当使用 <code class="docutils literal notranslate"><span class="pre">"boolean"</span></code> 掩码处理 numpy dtype 时设置了错误的值 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44014">GH 44014</a>)</p></li>
<li><p>对 <a class="reference internal" href="../reference/api/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> 使用 <code class="docutils literal notranslate"><span class="pre">np.str_</span></code> 键进行索引时错误地引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45580">GH 45580</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex.get_indexer()</span></code> 中的错误：当索引包含 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值时，导致目标中存在但索引中不存在的元素被映射到 NaN 元素的索引，而不是 -1 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45361">GH 45361</a>)</p></li>
<li><p>当将大整数值设置到具有 <code class="docutils literal notranslate"><span class="pre">float32</span></code> 或 <code class="docutils literal notranslate"><span class="pre">float16</span></code> dtype 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 中时出现错误，错误地改变了这些值，而不是强制转换为 <code class="docutils literal notranslate"><span class="pre">float64</span></code> dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45844">GH 45844</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.asof.html#pandas.Series.asof" title="pandas.Series.asof"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.asof()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.asof.html#pandas.DataFrame.asof" title="pandas.DataFrame.asof"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.asof()</span></code></a> 中的错误：错误地将布尔型 dtype 结果转换为 <code class="docutils literal notranslate"><span class="pre">float64</span></code> dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/16063">GH 16063</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">NDFrame.xs()</span></code>、<a class="reference internal" href="../reference/api/pandas.DataFrame.iterrows.html#pandas.DataFrame.iterrows" title="pandas.DataFrame.iterrows"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iterrows()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.iloc.html#pandas.DataFrame.iloc" title="pandas.DataFrame.iloc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.iloc()</span></code></a> 中的错误：并非总是传播元数据 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/28283">GH 28283</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.sum.html#pandas.DataFrame.sum" title="pandas.DataFrame.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sum()</span></code></a> 中的错误：如果输入包含 NaNs，min_count 会改变 dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46947">GH 46947</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalTree</span></code> 中的错误导致无限递归 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46658">GH 46658</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> 中的错误：当索引到 <code class="docutils literal notranslate"><span class="pre">NA</span></code> 时引发 <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>，而不是将其替换为 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46673">GH 46673</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.at.html#pandas.DataFrame.at" title="pandas.DataFrame.at"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.at()</span></code></a> 中的错误：会允许修改多个列 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48296">GH 48296</a>)</p></li>
</ul>
</section>
<section id="missing">
<h3>缺失值<a class="headerlink" href="v1.5.0.html#missing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a> 中的错误：在某些没有 NA 值的情况下，<code class="docutils literal notranslate"><span class="pre">downcast</span></code> 关键字未被遵守 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45423">GH 45423</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.fillna.html#pandas.Series.fillna" title="pandas.Series.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.fillna()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a> 中的错误：当使用 <a class="reference internal" href="../reference/api/pandas.IntervalDtype.html#pandas.IntervalDtype" title="pandas.IntervalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalDtype</span></code></a> 和不兼容的值时，引发异常而不是转换为通用（通常是 object）dtype (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45796">GH 45796</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.map.html#pandas.Series.map" title="pandas.Series.map"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.map()</span></code></a> 中的错误：如果 mapper 是 <code class="docutils literal notranslate"><span class="pre">dict</span></code> 或 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a>，则不遵守 <code class="docutils literal notranslate"><span class="pre">na_action</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47527">GH 47527</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.interpolate.html#pandas.DataFrame.interpolate" title="pandas.DataFrame.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code></a> 中的错误：当 object-dtype 列中使用 <code class="docutils literal notranslate"><span class="pre">inplace=False</span></code> 时，未能返回副本 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45791">GH 45791</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.dropna.html#pandas.DataFrame.dropna" title="pandas.DataFrame.dropna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.dropna()</span></code></a> 中的错误：允许同时设置 <code class="docutils literal notranslate"><span class="pre">how</span></code> 和 <code class="docutils literal notranslate"><span class="pre">thresh</span></code> 这两个不兼容的参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46575">GH 46575</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a> 中的错误：当 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 是单个块时忽略了 <code class="docutils literal notranslate"><span class="pre">axis</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47713">GH 47713</a>)</p></li>
</ul>
</section>
<section id="multiindex">
<h3>多级索引<a class="headerlink" href="v1.5.0.html#multiindex" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 中的错误：当使用负步长和非空起始/结束值对 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 进行切片时，返回空结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46156">GH 46156</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 中的错误：当使用除 -1 以外的负步长对 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 进行切片时引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46156">GH 46156</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> 中的错误：当使用负步长对 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 进行切片并切片非整数标签索引级别时引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46156">GH 46156</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Series.to_numpy.html#pandas.Series.to_numpy" title="pandas.Series.to_numpy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_numpy()</span></code></a> 中的错误：当提供了 <code class="docutils literal notranslate"><span class="pre">na_value</span></code> 时，多级索引的 Series 无法转换为 numpy 数组 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45774">GH 45774</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex.equals</span></code> 中的错误：当只有一侧具有扩展数组 dtype 时，不满足交换律 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46026">GH 46026</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.MultiIndex.from_tuples.html#pandas.MultiIndex.from_tuples" title="pandas.MultiIndex.from_tuples"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.from_tuples()</span></code></a> 中的错误：无法构造空元组的 Index (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45608">GH 45608</a>)</p></li>
</ul>
</section>
<section id="i-o">
<h3>I/O<a class="headerlink" href="v1.5.0.html#i-o" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_stata.html#pandas.DataFrame.to_stata" title="pandas.DataFrame.to_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code></a> 中的错误：如果 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 包含 <code class="docutils literal notranslate"><span class="pre">-np.inf</span></code>，则未引发错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45350">GH 45350</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中的错误：某些 <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> 可调用对象导致无限循环 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45585">GH 45585</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.info.html#pandas.DataFrame.info" title="pandas.DataFrame.info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.info()</span></code></a> 中的错误：当在空的 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 上调用时，输出末尾的换行符被省略 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45494">GH 45494</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中的错误：对于 <code class="docutils literal notranslate"><span class="pre">engine="c"</span></code> 且 <code class="docutils literal notranslate"><span class="pre">on_bad_lines="warn"</span></code> 时，未能识别换行符 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41710">GH 41710</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> 中的错误：对于 <code class="docutils literal notranslate"><span class="pre">Float64</span></code> dtype 未遵守 <code class="docutils literal notranslate"><span class="pre">float_format</span></code> 参数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45991">GH 45991</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中的错误：并非在所有情况下都遵守指定的索引列转换器 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/40589">GH 40589</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中的错误：即使 <code class="docutils literal notranslate"><span class="pre">index_col=False</span></code>，仍将第二行解释为 <a class="reference internal" href="../reference/api/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> 名称 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46569">GH 46569</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_parquet.html#pandas.read_parquet" title="pandas.read_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parquet()</span></code></a> 中的错误：当 <code class="docutils literal notranslate"><span class="pre">engine="pyarrow"</span></code> 且传递了不支持数据类型的列时，导致部分写入磁盘 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44914">GH 44914</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_excel()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.ExcelWriter.html#pandas.ExcelWriter" title="pandas.ExcelWriter"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExcelWriter</span></code></a> 中的错误：当将空 DataFrame 写入 <code class="docutils literal notranslate"><span class="pre">.ods</span></code> 文件时会引发异常 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45793">GH 45793</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中的错误：对于 <code class="docutils literal notranslate"><span class="pre">engine="python"</span></code> 时，忽略了不存在的标题行 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47400">GH 47400</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中的错误：当 <code class="docutils literal notranslate"><span class="pre">header</span></code> 引用不存在的行时，引发了无法控制的 <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/43143">GH 43143</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> 中的错误：<code class="docutils literal notranslate"><span class="pre">&lt;br&gt;</span></code> 元素周围的文本在连接时没有空格 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/29528">GH 29528</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> 中的错误：当数据长度超过标题行时，导致 <code class="docutils literal notranslate"><span class="pre">usecols</span></code> 中期望字符串的可调用对象出现问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46997">GH 46997</a>)</p></li>
<li><p>带有 <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> 子类型的 Interval dtype 在 Parquet 往返过程中出现错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45881">GH 45881</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 中的错误：当读取 XML 元素之间包含换行符的 <code class="docutils literal notranslate"><span class="pre">.ods</span></code> 文件时 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45598">GH 45598</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_parquet.html#pandas.read_parquet" title="pandas.read_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parquet()</span></code></a> 中的错误：当 <code class="docutils literal notranslate"><span class="pre">engine="fastparquet"</span></code> 时，文件在出错时未关闭 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46555">GH 46555</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> 现在在 <code class="docutils literal notranslate"><span class="pre">border</span></code> 关键字设置为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 时，会从 <code class="docutils literal notranslate"><span class="pre">&lt;table&gt;</span></code> 元素中排除 <code class="docutils literal notranslate"><span class="pre">border</span></code> 属性。</p></li>
<li><p>在处理某些类型的压缩 SAS7BDAT 文件时，<a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/35545">GH 35545</a>)</p></li>
<li><p>当未给定名称时，<a class="reference internal" href="../reference/api/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> 未能向前填充 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47487">GH 47487</a>)</p></li>
<li><p>对于零行的 SAS7BDAT 文件，<a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 返回 <code class="docutils literal notranslate"><span class="pre">None</span></code> 而不是空 DataFrame，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/18198">GH 18198</a>)</p></li>
<li><p>在 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 中使用扩展数组时，<a class="reference internal" href="../reference/api/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> 使用了错误的缺失值，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47986">GH 47986</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">StataWriter</span></code> 中存在错误，值标签总是以默认编码写入 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46750">GH 46750</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">StataWriterUTF8</span></code> 中存在错误，一些有效字符从变量名中被删除 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47276">GH 47276</a>)</p></li>
<li><p>当写入带有 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 的空 DataFrame 时，<a class="reference internal" href="../reference/api/pandas.DataFrame.to_excel.html#pandas.DataFrame.to_excel" title="pandas.DataFrame.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_excel()</span></code></a> 存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/19543">GH 19543</a>)</p></li>
<li><p>对于包含 0x40 控制字节的 RLE 压缩 SAS7BDAT 文件，<a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/31243">GH 31243</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 打乱列名存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/31243">GH 31243</a>)</p></li>
<li><p>对于包含 0x00 控制字节的 RLE 压缩 SAS7BDAT 文件，<a class="reference internal" href="../reference/api/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> 存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47099">GH 47099</a>)</p></li>
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">use_nullable_dtypes=True</span></code> 时，<a class="reference internal" href="../reference/api/pandas.read_parquet.html#pandas.read_parquet" title="pandas.read_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_parquet()</span></code></a> 返回 <code class="docutils literal notranslate"><span class="pre">float64</span></code> 数据类型而不是可空 <code class="docutils literal notranslate"><span class="pre">Float64</span></code> 数据类型，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45694">GH 45694</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code></a> 中存在错误，即 <code class="docutils literal notranslate"><span class="pre">PeriodDtype</span></code> 在使用 <a class="reference internal" href="../reference/api/pandas.read_json.html#pandas.read_json" title="pandas.read_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_json()</span></code></a> 读取回来时无法完成序列化往返 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44720">GH 44720</a>)</p></li>
<li><p>读取带有中文字符标签的 XML 文件时，<a class="reference internal" href="../reference/api/pandas.read_xml.html#pandas.read_xml" title="pandas.read_xml"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_xml()</span></code></a> 会引发 <code class="docutils literal notranslate"><span class="pre">XMLSyntaxError</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47902">GH 47902</a>)</p></li>
</ul>
</section>
<section id="period">
<h3>Period<a class="headerlink" href="v1.5.0.html#period" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>从 <a class="reference internal" href="../reference/api/pandas.arrays.PeriodArray.html#pandas.arrays.PeriodArray" title="pandas.arrays.PeriodArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodArray</span></code></a> 中减去 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 返回错误结果，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45999">GH 45999</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.Period.strftime.html#pandas.Period.strftime" title="pandas.Period.strftime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Period.strftime()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.PeriodIndex.strftime.html#pandas.PeriodIndex.strftime" title="pandas.PeriodIndex.strftime"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.strftime()</span></code></a> 存在错误，指令 <code class="docutils literal notranslate"><span class="pre">%l</span></code> 和 <code class="docutils literal notranslate"><span class="pre">%u</span></code> 给出错误结果 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46252">GH 46252</a>)</p></li>
<li><p>当将字符串传递给 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 且微秒是 1000 的倍数时，推断出不正确的 <code class="docutils literal notranslate"><span class="pre">freq</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46811">GH 46811</a>)</p></li>
<li><p>从 <a class="reference internal" href="../reference/api/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> 或 <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code> 对象构造 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 时，如果对象具有非零纳秒且 <code class="docutils literal notranslate"><span class="pre">freq="ns"</span></code>，会错误地截断纳秒，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46811">GH 46811</a>)</p></li>
<li><p>将 <code class="docutils literal notranslate"><span class="pre">np.timedelta64("NaT",</span> <span class="pre">"ns")</span></code> 添加到具有类似 timedelta 的 freq 的 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 时，错误地引发 <code class="docutils literal notranslate"><span class="pre">IncompatibleFrequency</span></code> 而不是返回 <code class="docutils literal notranslate"><span class="pre">NaT</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47196">GH 47196</a>)</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">dtype.freq.n</span> <span class="pre">&gt;</span> <span class="pre">1</span></code> 时，将整数数组添加到 <a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 数组时给出错误结果，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47209">GH 47209</a>)</p></li>
<li><p>当操作溢出时，从 <a class="reference internal" href="../reference/api/pandas.PeriodDtype.html#pandas.PeriodDtype" title="pandas.PeriodDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodDtype</span></code></a> 数组中减去 <a class="reference internal" href="../reference/api/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> 返回错误结果而不是引发 <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47538">GH 47538</a>)</p></li>
</ul>
</section>
<section id="plotting">
<h3>绘图<a class="headerlink" href="v1.5.0.html#plotting" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.plot.barh.html#pandas.DataFrame.plot.barh" title="pandas.DataFrame.plot.barh"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot.barh()</span></code></a> 阻止了 x 轴的标注，且 <code class="docutils literal notranslate"><span class="pre">xlabel</span></code> 更新了 y 轴标签，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45144">GH 45144</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.plot.box.html#pandas.DataFrame.plot.box" title="pandas.DataFrame.plot.box"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot.box()</span></code></a> 阻止了 x 轴的标注，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45463">GH 45463</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.boxplot.html#pandas.DataFrame.boxplot" title="pandas.DataFrame.boxplot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.boxplot()</span></code></a> 阻止了传递 <code class="docutils literal notranslate"><span class="pre">xlabel</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ylabel</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45463">GH 45463</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.boxplot.html#pandas.DataFrame.boxplot" title="pandas.DataFrame.boxplot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.boxplot()</span></code></a> 阻止了指定 <code class="docutils literal notranslate"><span class="pre">vert=False</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/36918">GH 36918</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.plot.scatter.html#pandas.DataFrame.plot.scatter" title="pandas.DataFrame.plot.scatter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot.scatter()</span></code></a> 阻止了指定 <code class="docutils literal notranslate"><span class="pre">norm</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45809">GH 45809</a>)</p></li>
<li><p>修复了在未设置 ylabel 时，<a class="reference internal" href="../reference/api/pandas.Series.plot.html#pandas.Series.plot" title="pandas.Series.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.plot()</span></code></a> 中显示“None”作为 ylabel 的问题 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46129">GH 46129</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a> 中存在错误，导致绘制季度序列时 xticks 和垂直网格位置不正确 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47602">GH 47602</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.plot.html#pandas.DataFrame.plot" title="pandas.DataFrame.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.plot()</span></code></a> 中存在错误，阻止了为辅助 y 轴设置 y 轴标签、限制和刻度 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47753">GH 47753</a>)</p></li>
</ul>
</section>
<section id="groupby-resample-rolling">
<h3>分组/重采样/滚动<a class="headerlink" href="v1.5.0.html#groupby-resample-rolling" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 忽略 <a class="reference internal" href="../reference/api/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> 上的 <code class="docutils literal notranslate"><span class="pre">closed="right"</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45414">GH 45414</a>)</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">func="size"</span></code> 且输入 DataFrame 具有多列时，<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 失败，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/27469">GH 27469</a>)</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 时，<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.size.html#pandas.core.groupby.DataFrameGroupBy.size" title="pandas.core.groupby.DataFrameGroupBy.size"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.size()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> (带 <code class="docutils literal notranslate"><span class="pre">func="size"</span></code>) 产生错误结果，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45715">GH 45715</a>)</p></li>
<li><p>当 <a class="reference internal" href="../reference/api/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> 的列数多于行数时，<a class="reference internal" href="../reference/api/pandas.core.window.ewm.ExponentialMovingWindow.mean.html#pandas.core.window.ewm.ExponentialMovingWindow.mean" title="pandas.core.window.ewm.ExponentialMovingWindow.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExponentialMovingWindow.mean()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 且 <code class="docutils literal notranslate"><span class="pre">engine='numba'</span></code> 时存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46086">GH 46086</a>)</p></li>
<li><p>使用 <code class="docutils literal notranslate"><span class="pre">engine="numba"</span></code> 时存在错误，修改 <code class="docutils literal notranslate"><span class="pre">engine_kwargs</span></code> 会返回相同的 JIT 编译函数 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46086">GH 46086</a>)</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 且 <code class="docutils literal notranslate"><span class="pre">func</span></code> 为 <code class="docutils literal notranslate"><span class="pre">"first"</span></code> 或 <code class="docutils literal notranslate"><span class="pre">"last"</span></code> 时，<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.transform.html#pandas.core.groupby.DataFrameGroupBy.transform" title="pandas.core.groupby.DataFrameGroupBy.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform()</span></code></a> 失败，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45986">GH 45986</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cumsum.html#pandas.core.groupby.DataFrameGroupBy.cumsum" title="pandas.core.groupby.DataFrameGroupBy.cumsum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cumsum()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">skipna=False</span></code> 时给出错误结果，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46216">GH 46216</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.sum.html#pandas.core.groupby.DataFrameGroupBy.sum" title="pandas.core.groupby.DataFrameGroupBy.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.sum()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.sum.html#pandas.core.groupby.SeriesGroupBy.sum" title="pandas.core.groupby.SeriesGroupBy.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.sum()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.prod.html#pandas.core.groupby.DataFrameGroupBy.prod" title="pandas.core.groupby.DataFrameGroupBy.prod"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.prod()</span></code></a>、<code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.prod,</span> <span class="pre">:meth:()</span></code>.<code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cumsum</span></code> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cumsum.html#pandas.core.groupby.SeriesGroupBy.cumsum" title="pandas.core.groupby.SeriesGroupBy.cumsum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cumsum()</span></code></a> 在整数数据类型时丢失精度，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37493">GH 37493</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cumsum.html#pandas.core.groupby.DataFrameGroupBy.cumsum" title="pandas.core.groupby.DataFrameGroupBy.cumsum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cumsum()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cumsum.html#pandas.core.groupby.SeriesGroupBy.cumsum" title="pandas.core.groupby.SeriesGroupBy.cumsum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cumsum()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> 数据类型时未能识别 <code class="docutils literal notranslate"><span class="pre">NaT</span></code> 为空值，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46216">GH 46216</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cumsum.html#pandas.core.groupby.DataFrameGroupBy.cumsum" title="pandas.core.groupby.DataFrameGroupBy.cumsum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cumsum()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cumsum.html#pandas.core.groupby.SeriesGroupBy.cumsum" title="pandas.core.groupby.SeriesGroupBy.cumsum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cumsum()</span></code></a> 在整数数据类型时，当和大于数据类型的最大值时导致溢出，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/37493">GH 37493</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummin.html#pandas.core.groupby.DataFrameGroupBy.cummin" title="pandas.core.groupby.DataFrameGroupBy.cummin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cummin.html#pandas.core.groupby.SeriesGroupBy.cummin" title="pandas.core.groupby.SeriesGroupBy.cummin"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cummin()</span></code></a>、<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummax.html#pandas.core.groupby.DataFrameGroupBy.cummax" title="pandas.core.groupby.DataFrameGroupBy.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummax()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cummax.html#pandas.core.groupby.SeriesGroupBy.cummax" title="pandas.core.groupby.SeriesGroupBy.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cummax()</span></code></a> 在可空数据类型时错误地原地修改原始数据，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46220">GH 46220</a>)</p></li>
<li><p>当 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 的第一级包含 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时，<a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 引发错误，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47348">GH 47348</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cummax.html#pandas.core.groupby.DataFrameGroupBy.cummax" title="pandas.core.groupby.DataFrameGroupBy.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cummax()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cummax.html#pandas.core.groupby.SeriesGroupBy.cummax" title="pandas.core.groupby.SeriesGroupBy.cummax"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cummax()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">int64</span></code> 数据类型且首个值为最小可能的 int64 时存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46382">GH 46382</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.cumprod.html#pandas.core.groupby.DataFrameGroupBy.cumprod" title="pandas.core.groupby.DataFrameGroupBy.cumprod"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.cumprod()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.cumprod.html#pandas.core.groupby.SeriesGroupBy.cumprod" title="pandas.core.groupby.SeriesGroupBy.cumprod"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.cumprod()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">skipna=False</span></code> 时，<code class="docutils literal notranslate"><span class="pre">NaN</span></code> 会影响不同列的计算，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48064">GH 48064</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.max.html#pandas.core.groupby.DataFrameGroupBy.max" title="pandas.core.groupby.DataFrameGroupBy.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.max()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.max.html#pandas.core.groupby.SeriesGroupBy.max" title="pandas.core.groupby.SeriesGroupBy.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.max()</span></code></a> 在空组和 <code class="docutils literal notranslate"><span class="pre">uint64</span></code> 数据类型时错误地引发 <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46408">GH 46408</a>)</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">func</span></code> 是字符串且提供了 args 或 kwargs 时，<a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.apply.html#pandas.core.groupby.DataFrameGroupBy.apply" title="pandas.core.groupby.DataFrameGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.apply()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.apply.html#pandas.core.groupby.SeriesGroupBy.apply" title="pandas.core.groupby.SeriesGroupBy.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.apply()</span></code></a> 会失败，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46479">GH 46479</a>)</p></li>
<li><p>当存在唯一分组时，<code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.apply()</span></code> 会错误地命名其结果，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46369">GH 46369</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.sum.html#pandas.core.window.rolling.Rolling.sum" title="pandas.core.window.rolling.Rolling.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.sum()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.mean.html#pandas.core.window.rolling.Rolling.mean" title="pandas.core.window.rolling.Rolling.mean"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.mean()</span></code></a> 在窗口值相同的情况下会给出错误结果，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/42064">GH 42064</a>, <a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46431">GH 46431</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.var.html#pandas.core.window.rolling.Rolling.var" title="pandas.core.window.rolling.Rolling.var"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.var()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.std.html#pandas.core.window.rolling.Rolling.std" title="pandas.core.window.rolling.Rolling.std"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.std()</span></code></a> 在窗口值相同的情况下会给出非零结果，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/42064">GH 42064</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.skew.html#pandas.core.window.rolling.Rolling.skew" title="pandas.core.window.rolling.Rolling.skew"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.skew()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.kurt.html#pandas.core.window.rolling.Rolling.kurt" title="pandas.core.window.rolling.Rolling.kurt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.kurt()</span></code></a> 在窗口值相同的情况下会给出 NaN，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/30993">GH 30993</a>)</p></li>
<li><p>当窗口大小大于数据大小时，<a class="reference internal" href="../reference/api/pandas.core.window.rolling.Rolling.var.html#pandas.core.window.rolling.Rolling.var" title="pandas.core.window.rolling.Rolling.var"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Rolling.var()</span></code></a> 在计算加权方差时会发生段错误，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46760">GH 46760</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Grouper.__repr__()</span></code> 中存在错误，其中未包含 <code class="docutils literal notranslate"><span class="pre">dropna</span></code>。现在已包含 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46754">GH 46754</a>)</p></li>
<li><p>当 center=True、axis=1 且指定 win_type 时，<a class="reference internal" href="../reference/api/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling" title="pandas.DataFrame.rolling"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code></a> 会引发 ValueError，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46135">GH 46135</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.core.groupby.DataFrameGroupBy.describe.html#pandas.core.groupby.DataFrameGroupBy.describe" title="pandas.core.groupby.DataFrameGroupBy.describe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.describe()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.core.groupby.SeriesGroupBy.describe.html#pandas.core.groupby.SeriesGroupBy.describe" title="pandas.core.groupby.SeriesGroupBy.describe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.describe()</span></code></a> 对空数据集产生不一致结果，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/41575">GH 41575</a>)</p></li>
<li><p>当与 <code class="docutils literal notranslate"><span class="pre">on</span></code> 一起使用时，<a class="reference internal" href="../reference/api/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> 归约方法会尝试聚合提供的列，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47079">GH 47079</a>)</p></li>
<li><p>当输入 DataFrame/Series 的 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 中有 NaN 值时，<a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 不遵守 <code class="docutils literal notranslate"><span class="pre">dropna=False</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46783">GH 46783</a>)</p></li>
<li><p>当从缺少重采样键的键列表中获取结果时，<code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.resample()</span></code> 引发 <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47362">GH 47362</a>)</p></li>
<li><p>当 DataFrame 为空进行转换（如 fillna）时，<a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 会丢失索引列，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47787">GH 47787</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.Series.groupby.html#pandas.Series.groupby" title="pandas.Series.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.groupby()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">dropna=False</span></code> 和 <code class="docutils literal notranslate"><span class="pre">sort=False</span></code> 时，会将所有空组放在末尾，而不是按照它们出现的顺序，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46584">GH 46584</a>)</p></li>
</ul>
</section>
<section id="reshaping">
<h3>重塑<a class="headerlink" href="v1.5.0.html#reshaping" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 在连接具有整数数据类型的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 和另一个具有整数分类且包含 <code class="docutils literal notranslate"><span class="pre">NaN</span></code> 值的 <a class="reference internal" href="../reference/api/pandas.CategoricalDtype.html#pandas.CategoricalDtype" title="pandas.CategoricalDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalDtype</span></code></a> 时，转换为 object 数据类型而不是 <code class="docutils literal notranslate"><span class="pre">float64</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45359">GH 45359</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> 选择了 object 和 categorical 数据类型但未选择 string，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/44965">GH 44965</a>)</p></li>
<li><p>当将 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 与另一个 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 的 <a class="reference internal" href="../reference/api/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> 对齐时，<a class="reference internal" href="../reference/api/pandas.DataFrame.align.html#pandas.DataFrame.align" title="pandas.DataFrame.align"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.align()</span></code></a> 存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46001">GH 46001</a>)</p></li>
<li><p>连接 <code class="docutils literal notranslate"><span class="pre">IntegerDtype</span></code> 或 <code class="docutils literal notranslate"><span class="pre">FloatingDtype</span></code> 数组时存在错误，结果数据类型未反映不可空数据类型的行为 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46379">GH 46379</a>)</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">join="outer"</span></code> 且 <code class="docutils literal notranslate"><span class="pre">sort=True</span></code> 时，<a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 丢失列的数据类型，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47329">GH 47329</a>)</p></li>
<li><p>当包含 <code class="docutils literal notranslate"><span class="pre">None</span></code> 时，<a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 不排序列名，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47331">GH 47331</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">concat()</span></code></a> 在具有相同键时，在索引 <a class="reference internal" href="../reference/api/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> 时导致错误，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46519">GH 46519</a>)</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">dropna=True</span></code> 且聚合列具有扩展数组数据类型时，<a class="reference internal" href="../reference/api/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pivot_table()</span></code></a> 引发 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47477">GH 47477</a>)</p></li>
<li><p>在 ssl 库中使用 <code class="docutils literal notranslate"><span class="pre">FIPS</span></code> 模式时，<a class="reference internal" href="../reference/api/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> 对 <code class="docutils literal notranslate"><span class="pre">how="cross"</span></code> 引发错误，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/48024">GH 48024</a>)</p></li>
<li><p>使用后缀连接具有重复列名的 DataFrame 列表时，<a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46396">GH 46396</a>)</p></li>
<li><p><a class="reference internal" href="../reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table" title="pandas.DataFrame.pivot_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pivot_table()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">sort=False</span></code> 时导致索引仍被排序，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/17041">GH 17041</a>)</p></li>
<li><p>当 <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> 且 <code class="docutils literal notranslate"><span class="pre">sort=False</span></code> 时，<a class="reference internal" href="../reference/api/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">concat()</span></code></a> 的结果 Index 是 <code class="xref py py-class docutils literal notranslate"><span class="pre">Int64Index</span></code> 而不是 <a class="reference internal" href="../reference/api/pandas.RangeIndex.html#pandas.RangeIndex" title="pandas.RangeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">RangeIndex</span></code></a>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46675">GH 46675</a>)</p></li>
<li><p>当 columns 中缺少 <code class="docutils literal notranslate"><span class="pre">stubnames</span></code> 且 <code class="docutils literal notranslate"><span class="pre">i</span></code> 包含字符串数据类型列时，<a class="reference internal" href="../reference/api/pandas.wide_to_long.html#pandas.wide_to_long" title="pandas.wide_to_long"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wide_to_long()</span></code></a> 引发错误，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46044">GH 46044</a>)</p></li>
<li><p>带有分类索引的 <a class="reference internal" href="../reference/api/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> 导致意外重新排序，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47812">GH 47812</a>)</p></li>
</ul>
</section>
<section id="sparse">
<h3>稀疏<a class="headerlink" href="v1.5.0.html#sparse" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="../reference/api/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.where()</span></code></a> 和 <a class="reference internal" href="../reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> 在 <code class="docutils literal notranslate"><span class="pre">SparseDtype</span></code> 时未能保留数组的 <code class="docutils literal notranslate"><span class="pre">fill_value</span></code>，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45691">GH 45691</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArray.unique()</span></code> 未能保持原始元素顺序，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47809">GH 47809</a>)</p></li>
</ul>
</section>
<section id="extensionarray">
<h3>扩展数组<a class="headerlink" href="v1.5.0.html#extensionarray" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">IntegerArray.searchsorted()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">FloatingArray.searchsorted()</span></code> 在对 <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> 操作时返回不一致的结果，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45255">GH 45255</a>)</p></li>
</ul>
</section>
<section id="id1">
<h3>样式器<a class="headerlink" href="v1.5.0.html#id1" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>尝试将样式函数应用于空的 DataFrame 子集时存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/45313">GH 45313</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CSSToExcelConverter</span></code> 中存在错误，当未提供边框样式而只提供边框颜色时，导致 <code class="docutils literal notranslate"><span class="pre">xlsxwriter</span></code> 引擎出现 <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/42276">GH 42276</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.set_sticky()</span></code> 中存在错误，导致在暗模式下出现白底白字 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/46984">GH 46984</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.to_latex()</span></code> 中存在错误，当 <code class="docutils literal notranslate"><span class="pre">clines="all;data"</span></code> 且 <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> 没有行时导致 <code class="docutils literal notranslate"><span class="pre">UnboundLocalError</span></code>。(<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47203">GH 47203</a>)</p></li>
<li><p>当使用 <code class="docutils literal notranslate"><span class="pre">xlsxwriter</span></code> 引擎时，<code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.to_excel()</span></code> 使用 <code class="docutils literal notranslate"><span class="pre">vertical-align:</span> <span class="pre">middle;</span></code> 存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/30107">GH 30107</a>)</p></li>
<li><p>将样式应用于具有布尔列标签的 DataFrame 时存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47838">GH 47838</a>)</p></li>
</ul>
</section>
<section id="metadata">
<h3>元数据<a class="headerlink" href="v1.5.0.html#metadata" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.DataFrame.melt.html#pandas.DataFrame.melt" title="pandas.DataFrame.melt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.melt()</span></code></a> 中的元数据传播 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/28283">GH 28283</a>)</p></li>
<li><p>修复了 <a class="reference internal" href="../reference/api/pandas.DataFrame.explode.html#pandas.DataFrame.explode" title="pandas.DataFrame.explode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.explode()</span></code></a> 中的元数据传播 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/28283">GH 28283</a>)</p></li>
</ul>
</section>
<section id="other">
<h3>其他<a class="headerlink" href="v1.5.0.html#other" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>当 <code class="docutils literal notranslate"><span class="pre">names=True</span></code> 且 <code class="docutils literal notranslate"><span class="pre">check_order=False</span></code> 时，<a class="reference internal" href="../reference/api/pandas.testing.assert_index_equal.html#pandas.testing.assert_index_equal" title="pandas.testing.assert_index_equal"><code class="xref py py-func docutils literal notranslate"><span class="pre">assert_index_equal()</span></code></a> 未检查名称，存在错误 (<a class="extlink-issue reference external" href="https://github.com/pandas-dev/pandas/issues/47328">GH 47328</a>)</p></li>
</ul>
</section>
</section>
<section id="contributors">
<span id="whatsnew-150-contributors"></span><h2>贡献者<a class="headerlink" href="v1.5.0.html#contributors" title="Link to this heading">#</a></h2>
<p>共有 271 人为本次发布贡献了补丁。名字旁边有“+”的人是首次贡献补丁。</p>
<ul class="simple">
<li><p>Aadharsh Acharya +</p></li>
<li><p>Aadharsh-Acharya +</p></li>
<li><p>Aadhi Manivannan +</p></li>
<li><p>Adam Bowden</p></li>
<li><p>Aditya Agarwal +</p></li>
<li><p>Ahmed Ibrahim +</p></li>
<li><p>Alastair Porter +</p></li>
<li><p>Alex Povel +</p></li>
<li><p>Alex-Blade</p></li>
<li><p>Alexandra Sciocchetti +</p></li>
<li><p>AlonMenczer +</p></li>
<li><p>Andras Deak +</p></li>
<li><p>Andrew Hawyrluk</p></li>
<li><p>Andy Grigg +</p></li>
<li><p>Aneta Kahleová +</p></li>
<li><p>Anthony Givans +</p></li>
<li><p>Anton Shevtsov +</p></li>
<li><p>B. J. Potter +</p></li>
<li><p>BarkotBeyene +</p></li>
<li><p>Ben Beasley +</p></li>
<li><p>Ben Wozniak +</p></li>
<li><p>Bernhard Wagner +</p></li>
<li><p>Boris Rumyantsev</p></li>
<li><p>Brian Gollop +</p></li>
<li><p>CCXXXI +</p></li>
<li><p>Chandrasekaran Anirudh Bhardwaj +</p></li>
<li><p>Charles Blackmon-Luca +</p></li>
<li><p>Chris Moradi +</p></li>
<li><p>ChrisAlbertsen +</p></li>
<li><p>Compro Prasad +</p></li>
<li><p>DaPy15</p></li>
<li><p>Damian Barabonkov +</p></li>
<li><p>Daniel I +</p></li>
<li><p>Daniel Isaac +</p></li>
<li><p>Daniel Schmidt</p></li>
<li><p>Danil Iashchenko +</p></li>
<li><p>Dare Adewumi</p></li>
<li><p>Dennis Chukwunta +</p></li>
<li><p>Dennis J. Gray +</p></li>
<li><p>Derek Sharp +</p></li>
<li><p>Dhruv Samdani +</p></li>
<li><p>Dimitra Karadima +</p></li>
<li><p>Dmitry Savostyanov +</p></li>
<li><p>Dmytro Litvinov +</p></li>
<li><p>Do Young Kim +</p></li>
<li><p>Dries Schaumont +</p></li>
<li><p>Edward Huang +</p></li>
<li><p>Eirik +</p></li>
<li><p>Ekaterina +</p></li>
<li><p>Eli Dourado +</p></li>
<li><p>Ezra Brauner +</p></li>
<li><p>Fabian Gabel +</p></li>
<li><p>FactorizeD +</p></li>
<li><p>Fangchen Li</p></li>
<li><p>Francesco Romandini +</p></li>
<li><p>Greg Gandenberger +</p></li>
<li><p>Guo Ci +</p></li>
<li><p>Hiroaki Ogasawara</p></li>
<li><p>Hood Chatham +</p></li>
<li><p>Ian Alexander Joiner +</p></li>
<li><p>Irv Lustig</p></li>
<li><p>Ivan Ng +</p></li>
<li><p>JHM Darbyshire</p></li>
<li><p>JHM Darbyshire (MBP)</p></li>
<li><p>JHM Darbyshire (iMac)</p></li>
<li><p>JMBurley</p></li>
<li><p>Jack Goldsmith +</p></li>
<li><p>James Freeman +</p></li>
<li><p>James Lamb</p></li>
<li><p>James Moro +</p></li>
<li><p>Janosh Riebesell</p></li>
<li><p>Jarrod Millman</p></li>
<li><p>Jason Jia +</p></li>
<li><p>Jeff Reback</p></li>
<li><p>Jeremy Tuloup +</p></li>
<li><p>Johannes Mueller</p></li>
<li><p>John Bencina +</p></li>
<li><p>John Mantios +</p></li>
<li><p>John Zangwill</p></li>
<li><p>Jon Bramley +</p></li>
<li><p>Jonas Haag</p></li>
<li><p>Jordan Hicks</p></li>
<li><p>Joris Van den Bossche</p></li>
<li><p>Jose Ortiz +</p></li>
<li><p>JosephParampathu +</p></li>
<li><p>José Duarte</p></li>
<li><p>Julian Steger +</p></li>
<li><p>Kai Priester +</p></li>
<li><p>Kapil E. Iyer +</p></li>
<li><p>Karthik Velayutham +</p></li>
<li><p>Kashif Khan</p></li>
<li><p>Kazuki Igeta +</p></li>
<li><p>Kevin Jan Anker +</p></li>
<li><p>Kevin Sheppard</p></li>
<li><p>Khor Chean Wei</p></li>
<li><p>Kian Eliasi</p></li>
<li><p>Kian S +</p></li>
<li><p>Kim, KwonHyun +</p></li>
<li><p>Kinza-Raza +</p></li>
<li><p>Konjeti Maruthi +</p></li>
<li><p>Leonardus Chen</p></li>
<li><p>Linxiao Francis Cong +</p></li>
<li><p>Loïc Estève</p></li>
<li><p>LucasG0 +</p></li>
<li><p>Lucy Jiménez +</p></li>
<li><p>Luis Pinto</p></li>
<li><p>Luke Manley</p></li>
<li><p>Marc Garcia</p></li>
<li><p>Marco Edward Gorelli</p></li>
<li><p>Marco Gorelli</p></li>
<li><p>MarcoGorelli</p></li>
<li><p>Margarete Dippel +</p></li>
<li><p>Mariam-ke +</p></li>
<li><p>Martin Fleischmann</p></li>
<li><p>Marvin John Walter +</p></li>
<li><p>Marvin Walter +</p></li>
<li><p>Mateusz</p></li>
<li><p>Matilda M +</p></li>
<li><p>Matthew Roeschke</p></li>
<li><p>Matthias Bussonnier</p></li>
<li><p>MeeseeksMachine</p></li>
<li><p>Mehgarg +</p></li>
<li><p>Melissa Weber Mendonça +</p></li>
<li><p>Michael Milton +</p></li>
<li><p>Michael Wang</p></li>
<li><p>Mike McCarty +</p></li>
<li><p>Miloni Atal +</p></li>
<li><p>Mitlasóczki Bence +</p></li>
<li><p>Moritz Schreiber +</p></li>
<li><p>Morten Canth Hels +</p></li>
<li><p>Nick Crews +</p></li>
<li><p>NickFillot +</p></li>
<li><p>Nicolas Hug +</p></li>
<li><p>Nima Sarang</p></li>
<li><p>Noa Tamir +</p></li>
<li><p>Pandas Development Team</p></li>
<li><p>Parfait Gasana</p></li>
<li><p>Parthi +</p></li>
<li><p>Partho +</p></li>
<li><p>Patrick Hoefler</p></li>
<li><p>Peter</p></li>
<li><p>Peter Hawkins +</p></li>
<li><p>Philipp A</p></li>
<li><p>Philipp Schaefer +</p></li>
<li><p>Pierrot +</p></li>
<li><p>Pratik Patel +</p></li>
<li><p>Prithvijit</p></li>
<li><p>Purna Chandra Mansingh +</p></li>
<li><p>Radoslaw Lemiec +</p></li>
<li><p>RaphSku +</p></li>
<li><p>Reinert Huseby Karlsen +</p></li>
<li><p>Richard Shadrach</p></li>
<li><p>Richard Shadrach +</p></li>
<li><p>Robbie Palmer</p></li>
<li><p>Robert de Vries</p></li>
<li><p>Roger +</p></li>
<li><p>Roger Murray +</p></li>
<li><p>Ruizhe Deng +</p></li>
<li><p>SELEE +</p></li>
<li><p>Sachin Yadav +</p></li>
<li><p>Saiwing Yeung +</p></li>
<li><p>Sam Rao +</p></li>
<li><p>Sandro Casagrande +</p></li>
<li><p>Sebastiaan Vermeulen +</p></li>
<li><p>Shaghayegh +</p></li>
<li><p>Shantanu +</p></li>
<li><p>Shashank Shet +</p></li>
<li><p>Shawn Zhong +</p></li>
<li><p>Shuangchi He +</p></li>
<li><p>Simon Hawkins</p></li>
<li><p>Simon Knott +</p></li>
<li><p>Solomon Song +</p></li>
<li><p>Somtochi Umeh +</p></li>
<li><p>Stefan Krawczyk +</p></li>
<li><p>Stefanie Molin</p></li>
<li><p>Steffen Rehberg</p></li>
<li><p>Steven Bamford +</p></li>
<li><p>Steven Rotondo +</p></li>
<li><p>Steven Schaerer</p></li>
<li><p>Sylvain MARIE +</p></li>
<li><p>Sylvain Marié</p></li>
<li><p>Tarun Raghunandan Kaushik +</p></li>
<li><p>Taylor Packard +</p></li>
<li><p>Terji Petersen</p></li>
<li><p>Thierry Moisan</p></li>
<li><p>Thomas Grainger</p></li>
<li><p>Thomas Hunter +</p></li>
<li><p>Thomas Li</p></li>
<li><p>Tim McFarland +</p></li>
<li><p>Tim Swast</p></li>
<li><p>Tim Yang +</p></li>
<li><p>Tobias Pitters</p></li>
<li><p>Tom Aarsen +</p></li>
<li><p>Tom Augspurger</p></li>
<li><p>Torsten Wörtwein</p></li>
<li><p>TraverseTowner +</p></li>
<li><p>Tyler Reddy</p></li>
<li><p>Valentin Iovene</p></li>
<li><p>Varun Sharma +</p></li>
<li><p>Vasily Litvinov</p></li>
<li><p>Venaturum</p></li>
<li><p>Vinicius Akira Imaizumi +</p></li>
<li><p>Vladimir Fokow +</p></li>
<li><p>Wenjun Si</p></li>
<li><p>Will Lachance +</p></li>
<li><p>William Andrea</p></li>
<li><p>Wolfgang F. Riedl +</p></li>
<li><p>Xingrong Chen</p></li>
<li><p>Yago González</p></li>
<li><p>Yikun Jiang +</p></li>
<li><p>Yuanhao Geng</p></li>
<li><p>Yuval +</p></li>
<li><p>Zero</p></li>
<li><p>Zhengfei Wang +</p></li>
<li><p>abmyii</p></li>
<li><p>alexondor +</p></li>
<li><p>alm</p></li>
<li><p>andjhall +</p></li>
<li><p>anilbey +</p></li>
<li><p>arnaudlegout +</p></li>
<li><p>asv-bot +</p></li>
<li><p>ateki +</p></li>
<li><p>auderson +</p></li>
<li><p>bherwerth +</p></li>
<li><p>bicarlsen +</p></li>
<li><p>carbonleakage +</p></li>
<li><p>charles +</p></li>
<li><p>charlogazzo +</p></li>
<li><p>code-review-doctor +</p></li>
<li><p>dataxerik +</p></li>
<li><p>deponovo</p></li>
<li><p>dimitra-karadima +</p></li>
<li><p>dospix +</p></li>
<li><p>ehallam +</p></li>
<li><p>ehsan shirvanian +</p></li>
<li><p>ember91 +</p></li>
<li><p>eshirvana</p></li>
<li><p>fractionalhare +</p></li>
<li><p>gaotian98 +</p></li>
<li><p>gesoos</p></li>
<li><p>github-actions[bot]</p></li>
<li><p>gunghub +</p></li>
<li><p>hasan-yaman</p></li>
<li><p>iansheng +</p></li>
<li><p>iasoon +</p></li>
<li><p>jbrockmendel</p></li>
<li><p>joshuabello2550 +</p></li>
<li><p>jyuv +</p></li>
<li><p>kouya takahashi +</p></li>
<li><p>mariana-LJ +</p></li>
<li><p>matt +</p></li>
<li><p>mattB1989 +</p></li>
<li><p>nealxm +</p></li>
<li><p>partev</p></li>
<li><p>poloso +</p></li>
<li><p>realead</p></li>
<li><p>roib20 +</p></li>
<li><p>rtpsw</p></li>
<li><p>ryangilmour +</p></li>
<li><p>shourya5 +</p></li>
<li><p>srotondo +</p></li>
<li><p>stanleycai95 +</p></li>
<li><p>staticdev +</p></li>
<li><p>tehunter +</p></li>
<li><p>theidexisted +</p></li>
<li><p>tobias.pitters +</p></li>
<li><p>uncjackg +</p></li>
<li><p>vernetya</p></li>
<li><p>wany-oh +</p></li>
<li><p>wfr +</p></li>
<li><p>z3c0 +</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev" href="v1.5.1.html" title="previous page"> <i class="fa-solid fa-angle-left"></i> <div class="prev-next-info"> <p class="prev-next-subtitle">上一页</p> <p class="prev-next-title">1.5.1 中的新功能（2022 年 10 月 19 日）</p> </div> </a> <a class="right-next" href="v1.4.4.html" title="next page"> <div class="prev-next-info"> <p class="prev-next-subtitle">下一页</p> <p class="prev-next-title">1.4.4 中的新功能（2022 年 8 月 31 日）</p> </div> <i class="fa-solid fa-angle-right"></i> </a></div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 本页目录</div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#enhancements">增强功能</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#pandas-stubs"><code class="docutils literal notranslate"><span class="pre">pandas-stubs</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#native-pyarrow-backed-extensionarray">原生 PyArrow 支持的 ExtensionArray</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#dataframe-interchange-protocol-implementation">DataFrame 交换协议实现</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#styler">样式器</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#control-of-index-with-group-keys-in-dataframe-resample">使用 <code class="docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">group_keys</span></code> 控制索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#from-dummies">from_dummies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#writing-to-orc-files">写入 ORC 文件</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#reading-directly-from-tar-archives">直接从 TAR 存档读取</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#read-xml-now-supports-dtype-converters-and-parse-dates">read_xml 现在支持 <code class="docutils literal notranslate"><span class="pre">dtype</span></code>、<code class="docutils literal notranslate"><span class="pre">converters</span></code> 和 <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#read-xml-now-supports-large-xml-using-iterparse">read_xml 现在支持使用 <code class="docutils literal notranslate"><span class="pre">iterparse</span></code> 读取大型 XML</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#copy-on-write">写时复制</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#other-enhancements">其他增强功能</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#notable-bug-fixes">显著的 Bug 修复</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#using-dropna-true-with-groupby-transforms">在 <code class="docutils literal notranslate"><span class="pre">groupby</span></code> 转换中使用 <code class="docutils literal notranslate"><span class="pre">dropna=True</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#serializing-tz-naive-timestamps-with-to-json-with-iso-dates-true">使用 <code class="docutils literal notranslate"><span class="pre">iso_dates=True</span></code> 时，通过 to_json() 序列化时区无关的 Timestamps</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#dataframegroupby-value-counts-with-non-grouping-categorical-columns-and-observed-true">DataFrameGroupBy.value_counts 与非分组分类列和 <code class="docutils literal notranslate"><span class="pre">observed=True</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#backwards-incompatible-api-changes">向后不兼容的 API 更改</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#increased-minimum-versions-for-dependencies">依赖项的最低版本增加</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#other-api-changes">其他 API 更改</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#deprecations">弃用</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#label-based-integer-slicing-on-a-series-with-an-int64index-or-rangeindex">在具有 Int64Index 或 RangeIndex 的 Series 上进行基于标签的整数切片</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#excelwriter-attributes"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExcelWriter</span></code> 属性</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#using-group-keys-with-transformers-in-dataframegroupby-apply-and-seriesgroupby-apply">在 <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.apply()</span></code> 和 <code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.apply()</span></code> 中使用 <code class="docutils literal notranslate"><span class="pre">group_keys</span></code> 和转换器</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#inplace-operation-when-setting-values-with-loc-and-iloc">使用 <code class="docutils literal notranslate"><span class="pre">loc</span></code> 和 <code class="docutils literal notranslate"><span class="pre">iloc</span></code> 设置值时的原地操作</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#numeric-only-default-value"><code class="docutils literal notranslate"><span class="pre">numeric_only</span></code> 默认值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#other-deprecations">其他弃用项</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#performance-improvements">性能改进</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#bug-fixes">Bug 修复</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#categorical">分类</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#datetimelike">日期时间类型</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#timedelta">时间差</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#time-zones">时区</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#numeric">数值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#conversion">转换</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#strings">字符串</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#interval">区间</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#indexing">索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#missing">缺失值</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#multiindex">多级索引</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#i-o">I/O</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#period">周期</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#plotting">绘图</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#groupby-resample-rolling">分组/重采样/滚动</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#reshaping">重塑</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#sparse">稀疏</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#extensionarray">扩展数组</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#id1">样式器</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#metadata">元数据</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#other">其他</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="v1.5.0.html#contributors">贡献者</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/whatsnew/v1.5.0.rst.txt">
      <i class="fa-solid fa-file-lines"></i> 显示源代码</a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js%3Fdigest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js%3Fdigest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="copyright">© 2025, pandas via <a href="https://numfocus.org">NumFOCUS, Inc.</a> 由 <a href="https://www.ovhcloud.com">OVHcloud</a> 托管。</p></div>
      
        <div class="footer-item">

  <p class="sphinx-version">使用 <a href="https://sphinx-doc.cn/">Sphinx</a> 8.1.3 创建。<br />
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">使用 <a href="https://pydata.sphinx-doc.cn/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4 构建。</p></div>
      
    </div>
  
</div>

  </footer>
  
</body></html>