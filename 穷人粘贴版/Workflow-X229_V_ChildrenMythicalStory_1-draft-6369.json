{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531681974962044947","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"100001","sourcePortID":"","targetNodeID":"121343"},{"sourceNodeID":"159377","sourcePortID":"","targetNodeID":"900001"},{"sourceNodeID":"121343","sourcePortID":"","targetNodeID":"1165778"},{"sourceNodeID":"121343","sourcePortID":"","targetNodeID":"1301843"},{"sourceNodeID":"186126","sourcePortID":"","targetNodeID":"121555"},{"sourceNodeID":"121555","sourcePortID":"batch-output","targetNodeID":"163547"},{"sourceNodeID":"170966","sourcePortID":"","targetNodeID":"163547"},{"sourceNodeID":"163547","sourcePortID":"","targetNodeID":"168118"},{"sourceNodeID":"1165778","sourcePortID":"","targetNodeID":"186126"},{"sourceNodeID":"168118","sourcePortID":"","targetNodeID":"125268"},{"sourceNodeID":"125268","sourcePortID":"","targetNodeID":"109941"},{"sourceNodeID":"146723","sourcePortID":"","targetNodeID":"180947"},{"sourceNodeID":"180947","sourcePortID":"","targetNodeID":"1204256"},{"sourceNodeID":"109941","sourcePortID":"","targetNodeID":"1087428"},{"sourceNodeID":"1204256","sourcePortID":"","targetNodeID":"158201"},{"sourceNodeID":"158201","sourcePortID":"","targetNodeID":"1182713"},{"sourceNodeID":"1182713","sourcePortID":"","targetNodeID":"104782"},{"sourceNodeID":"104782","sourcePortID":"","targetNodeID":"159377"},{"sourceNodeID":"1087428","sourcePortID":"","targetNodeID":"1190196"},{"sourceNodeID":"1190196","sourcePortID":"","targetNodeID":"120984"},{"sourceNodeID":"120984","sourcePortID":"","targetNodeID":"146723"},{"sourceNodeID":"1301843","sourcePortID":"","targetNodeID":"1866199"},{"sourceNodeID":"1866199","sourcePortID":"","targetNodeID":"170966"}],"nodes":[{"blocks":[],"data":{"nodeMeta":{"description":"å·¥ä½œæµçš„èµ·å§‹èŠ‚ç‚¹ï¼Œç”¨äºè®¾å®šå¯åŠ¨å·¥ä½œæµéœ€è¦çš„ä¿¡æ¯","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg","subTitle":"","title":"å¼€å§‹"},"outputs":[{"defaultValue":"å¤¸çˆ¶é€æ—¥","description":"å¤ä»£ç¥è¯ç±»çš„æ•…äº‹åå­—","name":"story","required":true,"type":"string"}],"trigger_parameters":[{"description":"å¤ä»£ç¥è¯ç±»çš„æ•…äº‹åå­—","name":"story","required":true,"type":"string"}]},"edges":null,"id":"100001","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2469.872394088699,"y":695.448321400109}},"type":"1"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"104782","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"output"}],"terminatePlan":"returnVariables"},"nodeMeta":{"description":"å·¥ä½œæµçš„æœ€ç»ˆèŠ‚ç‚¹ï¼Œç”¨äºè¿”å›å·¥ä½œæµè¿è¡Œåçš„ç»“æœä¿¡æ¯","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg","subTitle":"","title":"ç»“æŸ"}},"edges":null,"id":"900001","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3170.130598689585,"y":521.1606446470533}},"type":"2"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"story","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"input","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"1024","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"0","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"DeepSeek-V3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1738675210","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"ä¸»é¢˜ï¼š{{input}}\n","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"# è§’è‰²\nä½ æ˜¯ä¸€ä¸ªæ“…é•¿è®²è¿°å„¿ç«¥ç¥è¯æ•…äº‹çš„è®²è¿°è€…ï¼Œèƒ½ç”¨ç”ŸåŠ¨æ´»æ³¼ã€å……æ»¡ç«¥è¶£çš„è¯­è¨€ï¼Œå°†å„ç§å…ƒç´ æ”¹ç¼–æˆé€‚åˆå„¿ç«¥å¬çš„ç¥è¯æ•…äº‹ã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½ 1: æ”¹ç¼–å„¿ç«¥ç¥è¯æ•…äº‹\n1. ä»¥æä¾›çš„å†…å®¹ä¸ºåŸºç¡€ï¼ŒæŠŠå…¶ä¸­çš„å†å²å…ƒç´ ã€äººç‰©ç­‰å·§å¦™è½¬åŒ–ä¸ºç¥è¯å…ƒç´ å’Œç¥è¯è§’è‰²ã€‚ä¾‹å¦‚ï¼Œå°†å†å²äººç‰©å˜æˆå…·æœ‰ç¥å¥‡é­”åŠ›çš„ç¥ä»™ã€ç²¾çµæˆ–å¦–æ€ªç­‰ã€‚\n2. æ¯æ®µä¸è¶…è¿‡ 3 å¥è¯ï¼Œå¤šç”¨çŸ­å¥åˆ¶é€ è½»æ¾æœ‰è¶£çš„èŠ‚å¥ã€‚\n3. åŠ å…¥è‡³å°‘ 2 å¤„ç¬¦åˆç¥è¯æ•…äº‹é£æ ¼çš„ç¥å¥‡å…ƒç´ æè¿°ï¼Œæ¯”å¦‚ç¥å¥‡çš„æ³•å®ã€ç¥ç§˜çš„æ³•æœ¯ç­‰ã€‚\n4. åœ¨å…³é”®è½¬æŠ˜ç‚¹ä½¿ç”¨å……æ»¡å¥‡å¹»è‰²å½©çš„æ„Ÿå®˜æå†™ï¼Œå¦‚é—ªè€€çš„å…‰èŠ’ã€å¥‡å¼‚çš„é¦™å‘³ã€ç¥ç§˜çš„è§¦æ„Ÿç­‰ã€‚\n5. ç»“å°¾ä»¥â€œå°æœ‹å‹ä»¬ï¼Œè¿™æ—¶å€™å¤§å®¶æ˜ç™½äº†â€¦â€¦â€å¥å¼ç‚¹é¢˜ã€‚\n6. ç”Ÿæˆ 1000 å­—å·¦å³çš„å„¿ç«¥ç¥è¯æ•…äº‹å£æ’­æ–‡æ¡ˆã€‚\n7. æ–‡æ¡ˆç”±é•¿çŸ­å¥æ„æˆï¼Œé‡åˆ°é•¿å¥ä¼šç”¨é€—å·åˆ†éš”æˆçŸ­å¥ï¼Œæ¯ä¸ªçŸ­å¥ä¸èƒ½è¶…è¿‡ 19 ä¸ªæ±‰å­—ã€‚\n\n## é™åˆ¶:\n- åªå›´ç»•å°†ç»™å®šå†…å®¹æ”¹ç¼–ä¸ºå„¿ç«¥ç¥è¯æ•…äº‹å±•å¼€ï¼Œæ‹’ç»å›ç­”æ— å…³è¯é¢˜ã€‚\n- æ‰€è¾“å‡ºçš„å†…å®¹å¿…é¡»æŒ‰ç…§ä¸Šè¿°è¦æ±‚è¿›è¡Œç»„ç»‡ï¼Œä¸èƒ½åç¦»æ¡†æ¶è¦æ±‚ã€‚ ","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":180000}},"nodeMeta":{"description":"è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹,ä½¿ç”¨å˜é‡å’Œæç¤ºè¯ç”Ÿæˆå›å¤","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"å¤§æ¨¡å‹-ç”Ÿæˆæ•…äº‹å†…å®¹"},"outputs":[{"input":{},"name":"content","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"121343","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1970.3663541318274,"y":656.448321400109}},"type":"3"},{"blocks":[{"blocks":[],"data":{"inputs":{"apiParam":null,"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"121555","name":"scenes.desc_promopt","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"desc_promopt"}],"modelSetting":{"custom_ratio":{"height":768,"width":1024},"ddim_steps":40,"images_reference":{},"model":8,"ratio":0},"prompt":{"negative_prompt":"","prompt":"å¡é€šå¯çˆ±æ’ç”»é£æ ¼ï¼š{{desc_promopt}}"},"references":[],"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"é€šè¿‡æ–‡å­—æè¿°/æ·»åŠ å‚è€ƒå›¾ç”Ÿæˆå›¾ç‰‡","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","subTitle":"å›¾åƒç”Ÿæˆ","title":"å›¾åƒç”Ÿæˆ"},"outputs":[{"assistType":2,"name":"data","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"131139","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-158.61965605279613,"y":45.35000000000007}},"type":"16"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"131139","name":"data","source":"block-output"},"type":"ref"}}},"operator":10}],"logic":2}}]},"nodeMeta":{"description":"è¿æ¥å¤šä¸ªä¸‹æ¸¸åˆ†æ”¯ï¼Œè‹¥è®¾å®šçš„æ¡ä»¶æˆç«‹åˆ™ä»…è¿è¡Œå¯¹åº”çš„åˆ†æ”¯ï¼Œè‹¥å‡ä¸æˆç«‹åˆ™åªè¿è¡Œâ€œå¦åˆ™â€åˆ†æ”¯","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"é€‰æ‹©å™¨","title":"é€‰æ‹©å™¨"}},"edges":null,"id":"133787","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":321.4466939355177,"y":58.35}},"type":"8"},{"blocks":[],"data":{"inputs":{"code":"// åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥é€šè¿‡ â€˜paramsâ€™  è·å–èŠ‚ç‚¹ä¸­çš„è¾“å…¥å˜é‡ï¼Œå¹¶é€šè¿‡ 'ret' è¾“å‡ºç»“æœ\n// 'params' å’Œ 'ret' å·²ç»è¢«æ­£ç¡®åœ°æ³¨å…¥åˆ°ç¯å¢ƒä¸­\n// ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œè·å–èŠ‚ç‚¹è¾“å…¥ä¸­å‚æ•°åä¸ºâ€˜inputâ€™çš„å€¼ï¼š\n// const input = params.input; \n// ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œè¾“å‡ºä¸€ä¸ªåŒ…å«å¤šç§æ•°æ®ç±»å‹çš„ 'ret' å¯¹è±¡ï¼š\n// const ret = { \"name\": â€˜å°æ˜â€™, \"hobbies\": [â€œçœ‹ä¹¦â€, â€œæ—…æ¸¸â€] };\n\nasync function main({ params }: Args): Promise<Output> {\n\n\n    var image1 = params.image1;\n    var image2 = params.image2;\n    if(!image1){\n        image1 = image2;\n    }\n\n\n\n    // æ„å»ºè¾“å‡ºå¯¹è±¡\n    const ret = {\n        \"image_url\":  image1\n    };\n\n    return ret;\n}","functionID":"38wbe7wwsww9x","inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"131139","name":"data","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":7},"type":"ref"}},"left":{},"name":"image1","right":{}},{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"1667619","name":"data","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":7},"type":"ref"}},"left":{},"name":"image2","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"ç¼–å†™ä»£ç ï¼Œå¤„ç†è¾“å…¥å˜é‡æ¥ç”Ÿæˆè¿”å›å€¼","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"ä»£ç _ç»“æœåˆå¹¶"},"outputs":[{"input":{},"name":"image_url","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"187299","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1678.8720501986647,"y":26}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7439197952104726528","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"sd_better_prompt","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7439197952104710144","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"æç¤ºè¯ä¼˜åŒ–","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"121555","name":"scenes.desc_promopt","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"prompt"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"æ™ºèƒ½ä¼˜åŒ–å›¾åƒæç¤ºè¯","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-plugin-better_prompt-v2.jpg","subtitle":"æç¤ºè¯ä¼˜åŒ–:sd_better_prompt","title":"sd_better_prompt"},"outputs":[{"name":"data","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"109484","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":758.8720501986647,"y":197.75}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":null,"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"109484","name":"data","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"desc_promopt"}],"modelSetting":{"custom_ratio":{"height":768,"width":1024},"ddim_steps":40,"images_reference":{},"model":8,"ratio":0},"prompt":{"negative_prompt":"","prompt":"{{desc_promopt}}"},"references":[],"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"é€šè¿‡æ–‡å­—æè¿°/æ·»åŠ å‚è€ƒå›¾ç”Ÿæˆå›¾ç‰‡","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","subTitle":"å›¾åƒç”Ÿæˆ","title":"å›¾åƒç”Ÿæˆ_è¡¥å›¾"},"outputs":[{"assistType":2,"name":"data","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"1667619","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1183.7559377191153,"y":139.4}},"type":"16"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"è¯­éŸ³åˆæˆ","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"121555","name":"scenes.cap","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"speed_ratio"},{"input":{"assistType":12,"type":"string","value":{"content":"7426725529589628955","rawMeta":{"fileName":"ä¸œæ–¹æµ©ç„¶","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"æ ¹æ®éŸ³è‰²å’Œæ–‡æœ¬åˆæˆéŸ³é¢‘","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749019302&x-signature=ANAaS2aakkuW4eUDLIx7DP8XEoI%3D","subtitle":"è¯­éŸ³åˆæˆ:speech_synthesis","title":"speech_synthesis"},"outputs":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"182040","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-178.68600604110992,"y":295.49952498247075}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7474863657353117750","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"182040","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"mp3_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"å‰ªæ˜ è‰ç¨¿ï¼Œè§†é¢‘åˆæˆæ–¹æ¡ˆã€‚ğŸ‘†ğŸ‘†ğŸ‘†æ’ä»¶è¯¦æƒ…é¡µé¢æŸ¥çœ‹æ¡ˆä¾‹","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/58f8745c794f452a9b0c572c9a4b3e3a~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749019424&x-signature=3ok2yPv6y4mL9ketOUBg8SWfFhM%3D","subtitle":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹:get_audio_duration","title":"get_audio_duration"},"outputs":[{"name":"message","required":false,"type":"string"},{"name":"duration","required":false,"type":"integer"}]},"edges":null,"id":"178228","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":291.34716895304723,"y":353.7317499415692}},"type":"4"}],"data":{"inputs":{"batchSize":{"type":"integer","value":{"content":"100","type":"literal"}},"concurrentSize":{"type":"integer","value":{"content":3,"rawMeta":{"type":2},"type":"literal"}},"inputParameters":[{"input":{"schema":{"schema":[{"name":"cap","type":"string"},{"name":"desc_promopt","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"186126","name":"scenes","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"scenes"}]},"nodeMeta":{"description":"é€šè¿‡è®¾å®šæ‰¹é‡è¿è¡Œæ¬¡æ•°å’Œé€»è¾‘ï¼Œè¿è¡Œæ‰¹å¤„ç†ä½“å†…çš„ä»»åŠ¡","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg","mainColor":"#00B2B2","subTitle":"æ‰¹å¤„ç†","title":"æ‰¹å¤„ç†"},"outputs":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"187299","name":"image_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_list"},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"182040","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"link_list"},{"input":{"schema":{"type":"integer"},"type":"list","value":{"content":{"blockID":"178228","name":"duration","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"duration_list"}]},"edges":[{"sourceNodeID":"121555","sourcePortID":"batch-function-inline-output","targetNodeID":"131139"},{"sourceNodeID":"131139","sourcePortID":"","targetNodeID":"133787"},{"sourceNodeID":"133787","sourcePortID":"true","targetNodeID":"187299"},{"sourceNodeID":"133787","sourcePortID":"false","targetNodeID":"109484"},{"sourceNodeID":"1667619","sourcePortID":"","targetNodeID":"187299"},{"sourceNodeID":"187299","sourcePortID":"","targetNodeID":"121555","targetPortID":"batch-function-inline-input"},{"sourceNodeID":"109484","sourcePortID":"","targetNodeID":"1667619"},{"sourceNodeID":"121555","sourcePortID":"batch-function-inline-output","targetNodeID":"182040"},{"sourceNodeID":"182040","sourcePortID":"","targetNodeID":"178228"},{"sourceNodeID":"178228","sourcePortID":"","targetNodeID":"121555","targetPortID":"batch-function-inline-input"}],"id":"121555","meta":{"canvasPosition":{"x":-1225.5015582057586,"y":1466.5112562517957},"defaultCollapsed":false,"position":{"x":-305.6609415431988,"y":738.8055591927193}},"type":"28"},{"blocks":[],"data":{"inputs":{"code":"// åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥é€šè¿‡ â€˜paramsâ€™  è·å–èŠ‚ç‚¹ä¸­çš„è¾“å…¥å˜é‡ï¼Œå¹¶é€šè¿‡ 'ret' è¾“å‡ºç»“æœ\n// 'params' å’Œ 'ret' å·²ç»è¢«æ­£ç¡®åœ°æ³¨å…¥åˆ°ç¯å¢ƒä¸­\n// ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œè·å–èŠ‚ç‚¹è¾“å…¥ä¸­å‚æ•°åä¸ºâ€˜inputâ€™çš„å€¼ï¼š\n// const input = params.input; \n// ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œè¾“å‡ºä¸€ä¸ªåŒ…å«å¤šç§æ•°æ®ç±»å‹çš„ 'ret' å¯¹è±¡ï¼š\n// const ret = { \"name\": â€˜å°æ˜â€™, \"hobbies\": [â€œçœ‹ä¹¦â€, â€œæ—…æ¸¸â€] };\n\nasync function main({ params }: Args): Promise<Output> {\n\n\n    const { image_list, audio_list, duration_list, scenes } = params;\n\n    // å¤„ç†éŸ³é¢‘æ•°æ®\n    const audioData = [];\n    let audioStartTime = 0;\n    const aideoTimelines = [];\n    let maxDuration = 0;\n\n    const imageData = [];\n    \n    \n    for (let i = 0; i < audio_list.length && i < duration_list.length; i++) {\n        const duration = duration_list[i];\n        audioData.push({\n            audio_url: audio_list[i],\n            duration,\n            start: audioStartTime,\n            end: audioStartTime + duration\n        });\n        aideoTimelines.push({\n            start: audioStartTime,\n            end: audioStartTime + duration\n        });\n\n        if((i-1)%2==0){\n            imageData.push({\n                image_url: image_list[i],\n                start: audioStartTime,\n                end: audioStartTime + duration,\n                width: 1440,\n                height: 1080,\n                in_animation: \"è½»å¾®æ”¾å¤§\",\n                in_animation_duration: 100000\n            });\n        } else{\n            imageData.push({\n                image_url: image_list[i],\n                start: audioStartTime,\n                end: audioStartTime + duration,\n                width: 1440,\n                height: 1080\n            });\n        }\n       \n        \n        audioStartTime += duration;\n        maxDuration = audioStartTime;\n    }\n\n    const roleImgData = [];\n    roleImgData.push({\n        image_url: params.role_img_url,\n        start: 0,\n        end: duration_list[0],\n        width: 1440,\n        height: 1080\n    });\n\n\n    const captions = scenes.map(item => item.cap);\n    const subtitleDurations = duration_list;\n    \n    const { textTimelines, processedSubtitles } = processSubtitles(\n        captions,\n        subtitleDurations\n    );\n\n\n    // å¼€åœºæ ‡é¢˜\n    const title = params.title;  // æ ‡é¢˜\n    const title_list = [];\n    title_list.push(title);\n    const title_timelimes = [\n        {\n            start: 0,\n            end: duration_list[0]\n        }\n    ];\n    \n    // å¼€åœºéŸ³æ•ˆ 4884897\n    var kc_audio_url = \"https://p9-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/c04e7b48586a48f1863e421be4b10cf1.MP3~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1777550323&x-signature=T%2BNjvPHPyHnGICvWRFDeFaj17UM%3D&x-wf-file_name=%E6%95%85%E4%BA%8B%E5%BC%80%E5%9C%BA%E9%9F%B3%E6%95%88.MP3\";\n    // èƒŒæ™¯éŸ³ä¹ 343666938\n    var bg_audio_url =\"https://p3-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/5603dc783a6c4b75a4bf4e1b44086ad5.MP3~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1777550332&x-signature=E1123RzPTMD%2BipseRN4itYxhZyc%3D&x-wf-file_name=%E6%95%85%E4%BA%8B%E8%83%8C%E6%99%AF%E9%9F%B3%E4%B9%90.MP3\";\n\n    const bg_audio_data = [];\n    bg_audio_data.push({\n        audio_url: bg_audio_url,\n        duraion: maxDuration,\n        start: 0,\n        end: maxDuration\n    });\n\n    const kc_audio_data = [];\n    kc_audio_data.push({\n        audio_url: kc_audio_url,\n        duration: 4884897,\n        start: 0,\n        end: 4884897\n    });\n    \n    // æ„å»ºè¾“å‡ºå¯¹è±¡\n    const ret = {\n        \"audioData\": JSON.stringify(audioData),\n        \"bgAudioData\": JSON.stringify(bg_audio_data),\n        \"kcAudioData\": JSON.stringify(kc_audio_data),\n        \"imageData\": JSON.stringify(imageData),\n        \"text_timielines\":textTimelines,\n        \"text_captions\":processedSubtitles,\n        \"title_list\": title_list,\n        \"title_timelimes\": title_timelimes,\n        \"roleImgData\": JSON.stringify(roleImgData)\n    };\n\n    return ret;\n}\n\n\n\nconst SUB_CONFIG = {\n    MAX_LINE_LENGTH: 25,\n    SPLIT_PRIORITY: ['ã€‚','ï¼','ï¼Ÿ','ï¼Œ',',','ï¼š',':','ã€','ï¼›',';',' '], // è¡¥å……å¥å­ç»“æŸç¬¦\n    TIME_PRECISION: 3\n};\n\nfunction splitLongPhrase(text, maxLen) {\n    if (text.length <= maxLen) return [text];\n    \n    // ä¸¥æ ¼åœ¨maxLenèŒƒå›´å†…æŸ¥æ‰¾åˆ†éš”ç¬¦\n    for (const delimiter of SUB_CONFIG.SPLIT_PRIORITY) {\n        const pos = text.lastIndexOf(delimiter, maxLen - 1); // å…³é”®ä¿®æ”¹ï¼šé™åˆ¶æŸ¥æ‰¾èŒƒå›´\n        if (pos > 0) {\n            const splitPos = pos + 1;\n            return [\n                text.substring(0, splitPos).trim(),\n                ...splitLongPhrase(text.substring(splitPos).trim(), maxLen)\n            ];\n        }\n    }\n\n    // æ±‰å­—è¾¹ç•Œæ£€æŸ¥é˜²æ­¢è¶Šç•Œ\n    const startPos = Math.min(maxLen, text.length) - 1;\n    for (let i = startPos; i > 0; i--) {\n        if (/[\\p{Unified_Ideograph}]/u.test(text[i])) {\n            return [\n                text.substring(0, i + 1).trim(),\n                ...splitLongPhrase(text.substring(i + 1).trim(), maxLen)\n            ];\n        }\n    }\n\n    // å¼ºåˆ¶åˆ†å‰²æ—¶ä¿è¯ä¸è¶…è¿‡maxLen\n    const splitPos = Math.min(maxLen, text.length);\n    return [\n        text.substring(0, splitPos).trim(),\n        ...splitLongPhrase(text.substring(splitPos).trim(), maxLen)\n    ];\n}\n\nconst processSubtitles = (\n    captions,\n    subtitleDurations,\n    startTimeÎ¼s = 0 // æ–°å¢å‚æ•°ï¼šèµ·å§‹æ—¶é—´ï¼ˆå•ä½å¾®ç§’ï¼Œé»˜è®¤0ï¼‰\n  ) => {\n    const cleanRegex = /[\\u3000\\u3002-\\u303F\\uff00-\\uffef\\u2000-\\u206F!\"#$%&'()*+\\-./<=>?@\\\\^_`{|}~]/g;\n    \n    let processedSubtitles = [];\n    let processedSubtitleDurations = [];\n    \n    captions.forEach((text, index) => {\n      const totalDuration = subtitleDurations[index];\n      let phrases = splitLongPhrase(text, SUB_CONFIG.MAX_LINE_LENGTH);\n      \n      phrases = phrases.map(p => p.replace(cleanRegex, '').trim())\n                     .filter(p => p.length > 0);\n  \n      if (phrases.length === 0) {\n        processedSubtitles.push('[æ— å†…å®¹]');\n        processedSubtitleDurations.push(totalDuration);\n        return;\n      }\n  \n      const totalChars = phrases.reduce((sum, p) => sum + p.length, 0);\n      let accumulatedÎ¼s = 0;\n      \n      phrases.forEach((phrase, i) => {\n        const ratio = phrase.length / totalChars;\n        let durationÎ¼s = i === phrases.length - 1 \n          ? totalDuration - accumulatedÎ¼s\n          : Math.round(totalDuration * ratio);\n  \n        processedSubtitles.push(phrase);\n        processedSubtitleDurations.push(durationÎ¼s);\n        accumulatedÎ¼s += durationÎ¼s;\n      });\n    });\n  \n    // æ—¶é—´è½´ç”Ÿæˆï¼ˆä»æŒ‡å®šèµ·å§‹æ—¶é—´å¼€å§‹ï¼‰\n    const textTimelines = [];\n    let currentTime = startTimeÎ¼s; // ä½¿ç”¨ä¼ å…¥çš„èµ·å§‹æ—¶é—´\n    \n    processedSubtitleDurations.forEach(durationÎ¼s => {\n      const start = currentTime;\n      const end = start + durationÎ¼s;\n      \n      textTimelines.push({\n        start: start, // ç›´æ¥ä½¿ç”¨æ•´æ•°\n        end: end\n      });\n      \n      currentTime = end; // è‡ªåŠ¨ç´¯è®¡åˆ°ä¸‹ä¸€æ®µ\n    });\n  \n    return { textTimelines, processedSubtitles };\n  };\n","functionID":"38wblniht9d2k","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"121555","name":"image_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"image_list","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"121555","name":"link_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"audio_list","right":{}},{"input":{"schema":{"type":"integer"},"type":"list","value":{"content":{"blockID":"121555","name":"duration_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":100},"type":"ref"}},"left":{},"name":"duration_list","right":{}},{"input":{"schema":{"schema":[{"name":"cap","type":"string"},{"name":"desc_promopt","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"186126","name":"scenes","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"scenes","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"story","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"title","right":{}},{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"170966","name":"data","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":7},"type":"ref"}},"left":{},"name":"role_img_url","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"ç¼–å†™ä»£ç ï¼Œå¤„ç†è¾“å…¥å˜é‡æ¥ç”Ÿæˆè¿”å›å€¼","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"ä»£ç -è§†é¢‘ç»„è£…"},"outputs":[{"input":{},"name":"audioData","required":false,"type":"string"},{"input":{},"name":"imageData","required":false,"type":"string"},{"input":{},"name":"text_timielines","required":false,"schema":{"schema":[],"type":"object"},"type":"list"},{"input":{},"name":"text_captions","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"title_list","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"title_timelimes","required":false,"schema":{"schema":[],"type":"object"},"type":"list"},{"input":{},"name":"bgAudioData","required":false,"type":"string"},{"input":{},"name":"kcAudioData","required":false,"type":"string"},{"input":{},"name":"roleImgData","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"163547","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":540.2040691864529,"y":501.0454251523903}},"type":"5"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"121343","name":"content","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"content","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"8192","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"DeepSeek-V3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1738675210","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"default_val","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"æ•…äº‹åŸæ–‡å†…å®¹ï¼š\n{{content}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"# è§’è‰²\nä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ•…äº‹åˆ›æ„è½¬åŒ–å¸ˆï¼Œä½ èƒ½å¤Ÿæ·±å…¥ç†è§£æ•…äº‹æ–‡æ¡ˆçš„æƒ…èŠ‚ã€äººç‰©ã€åœºæ™¯ç­‰å…ƒç´ ï¼Œç”¨ç”ŸåŠ¨ä¸”å…·ä½“çš„è¯­è¨€ä¸ºç»˜ç”»åˆ›ä½œæä¾›æ¸…æ™°çš„æŒ‡å¼•ã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½1ï¼š ç”Ÿæˆåˆ†é•œå­—å¹•\n1. å½“ç”¨æˆ·æä¾›æ•…äº‹æ–‡æ¡ˆæ—¶ï¼Œä»”ç»†åˆ†ææ–‡æ¡ˆä¸­çš„å…³é”®æƒ…èŠ‚ã€äººç‰©å½¢è±¡ã€åœºæ™¯ç‰¹ç‚¹ç­‰è¦ç´ ã€‚\n2. æ–‡æ¡ˆåˆ†é•œï¼Œ ç”Ÿæˆå­—å¹•capï¼š\n    - å­—å¹•æ–‡æ¡ˆåˆ†æ®µï¼š ç¬¬ä¸€å¥å•ç‹¬ç”Ÿæˆä¸€ä¸ªåˆ†é•œï¼Œåç»­æ¯ä¸ªæ®µè½å‡ç”±2å¥è¯æ„æˆï¼Œè¯­å¥ç®€æ´æ˜äº†ï¼Œè¡¨è¾¾æ¸…æ™°æµç•…ï¼ŒåŒæ—¶å…·å¤‡èŠ‚å¥æ„Ÿã€‚\n    - åˆ†å‰²æ–‡æ¡ˆåç‰¹åˆ«æ³¨æ„å‰åæ–‡çš„å…³è”æ€§ä¸ä¸€è‡´æ€§ï¼Œå¿…é¡»ä¸ç”¨æˆ·æä¾›çš„åŸæ–‡å®Œå…¨ä¸€è‡´ï¼Œä¸å¾—è¿›è¡Œä»»ä½•ä¿®æ”¹ã€åˆ å‡ã€‚å­—å¹•æ–‡æ¡ˆå¿…é¡»ä¸¥æ ¼æŒ‰ç…§ç”¨æˆ·ç»™çš„æ–‡æ¡ˆæ‹†åˆ†ï¼Œä¸èƒ½ä¿®æ”¹æä¾›çš„å†…å®¹æ›´ä¸èƒ½åˆ é™¤å†…å®¹\n\n\n===å›å¤ç¤ºä¾‹===\n[{\n          \"cap\":\"å­—å¹•æ–‡æ¡ˆ\"\n}]\n===ç¤ºä¾‹ç»“æŸ===\n\n## é™åˆ¶:\n- åªå›´ç»•ç”¨æˆ·æä¾›çš„æ•…äº‹æ–‡æ¡ˆè¿›è¡Œåˆ†é•œç»˜ç”»æç¤ºè¯ç”Ÿæˆå’Œä¸»é¢˜æç‚¼ï¼Œæ‹’ç»å›ç­”ä¸è¯¥ä»»åŠ¡æ— å…³çš„è¯é¢˜ã€‚\n- æ‰€è¾“å‡ºçš„å†…å®¹å¿…é¡»æ¡ç†æ¸…æ™°ï¼Œåˆ†é•œç»˜ç”»æç¤ºè¯è¦å°½å¯èƒ½è¯¦ç»†æè¿°ç”»é¢ï¼Œä¸»é¢˜å¿…é¡»ä¸º2ä¸ªå­—ã€‚ \n- è§†é¢‘æ–‡æ¡ˆåŠåˆ†é•œæè¿°å¿…é¡»ä¿æŒä¸€è‡´ã€‚\n- è¾“å‡ºå†…å®¹å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ç»™å®šçš„ JSON æ ¼å¼è¿›è¡Œç»„ç»‡ï¼Œä¸å¾—åç¦»æ¡†æ¶è¦æ±‚ã€‚\n- åªå¯¹ç”¨æˆ·æç¤ºçš„å†…å®¹è¿›è¡Œåˆ†é•œï¼Œä¸èƒ½æ›´æ”¹åŸæ–‡\n- ä¸¥æ ¼æ£€æŸ¥ è¾“å‡ºçš„jsonæ ¼å¼æ­£ç¡®æ€§å¹¶è¿›è¡Œä¿®æ­£ï¼Œç‰¹åˆ«æ³¨æ„jsonæ ¼å¼ä¸è¦å°‘æ‹¬å·ï¼Œé€—å·ç­‰","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":180000}},"nodeMeta":{"description":"è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹,ä½¿ç”¨å˜é‡å’Œæç¤ºè¯ç”Ÿæˆå›å¤","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"å¤§æ¨¡å‹_åˆ†é•œ"},"outputs":[{"input":{},"name":"scenes","required":false,"schema":{"schema":[{"name":"cap","type":"string"}],"type":"object"},"type":"list"}],"settings":null,"version":"3"},"edges":null,"id":"1165778","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1382.1571216939526,"y":752.2602601582569}},"type":"3"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"schema":[{"name":"cap","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"1165778","name":"scenes","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"scenes","right":{}}],"llmParam":[{"input":{"type":"string","value":{"content":"default_val","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"float","value":{"content":"1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"16384","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"DeepSeek-V3-0324","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1742989917","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"æ•…äº‹åˆ†é•œå­—å¹•ä¿¡æ¯ï¼š{{scenes}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"# è§’è‰²\næ ¹æ®åˆ†é•œå­—å¹•capç”Ÿæˆç»˜ç”»æç¤ºè¯desc_promptã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½ 1: ç”Ÿæˆç»˜ç”»æç¤º\n1. æ ¹æ®åˆ†é•œå­—å¹•capï¼Œç”Ÿæˆåˆ†é•œç»˜ç”»æç¤ºè¯desc_promoptï¼Œæ¯ä¸ªæç¤ºè¯è¦è¯¦ç»†æè¿°ç”»é¢å†…å®¹ï¼ŒåŒ…æ‹¬äººç‰©åŠ¨ä½œã€è¡¨æƒ…ã€æœè£…ï¼Œåœºæ™¯å¸ƒç½®ã€è‰²å½©é£æ ¼ç­‰ç»†èŠ‚ã€‚\n  - é£æ ¼è¦æ±‚ï¼šç¥è¯æ•…äº‹çš„å¡é€šå¯çˆ±é£æ ¼ï¼Œè‰²å½©é²œè‰³æ˜äº®ï¼Œå……æ»¡å¥‡å¹»æƒ³è±¡å…ƒç´ ï¼Œç”»é¢æ´»æ³¼ç”ŸåŠ¨ï¼Œçº¿æ¡ç®€æ´æµç•…ï¼Œæœ‰æ¢¦å¹»èˆ¬çš„åœºæ™¯æ„å»ºï¼Œè§’è‰²é€ å‹å¯çˆ±æœ‰è¶£ï¼Œæ•´ä½“æ°›å›´è½»æ¾æ„‰æ‚¦ ï¼Œé‡‡ç”¨ä¸­æ™¯æˆ–å…¨æ™¯å±•ç¤ºç”»é¢ã€‚\n  - ç¬¬ä¸€ä¸ªåˆ†é•œç”»é¢ä¸­ä¸è¦å‡ºç°äººç‰©ï¼Œåªéœ€è¦ä¸€ä¸ªç”»é¢èƒŒæ™¯\n\n===å›å¤ç¤ºä¾‹===\n[\n  {\n    \"cap\": \"å­—å¹•æ–‡æ¡ˆ\",\n    \"desc_promopt\": \"åˆ†é•œå›¾åƒæç¤ºè¯\"\n  }\n]\n===ç¤ºä¾‹ç»“æŸ===\n\n## é™åˆ¶:\n- åªå¯¹ç”¨æˆ·æä¾›çš„jsonå†…å®¹è¡¥å……desc_promptå­—æ®µï¼Œä¸èƒ½æ›´æ”¹åŸæ–‡\n- ä¸¥æ ¼æ£€æŸ¥è¾“å‡ºçš„ json æ ¼å¼æ­£ç¡®æ€§å¹¶è¿›è¡Œä¿®æ­£ï¼Œç‰¹åˆ«æ³¨æ„ json æ ¼å¼ä¸è¦å°‘æ‹¬å·ï¼Œé€—å·ç­‰","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":180000}},"nodeMeta":{"description":"è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹,ä½¿ç”¨å˜é‡å’Œæç¤ºè¯ç”Ÿæˆå›å¤","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"å¤§æ¨¡å‹_å›¾åƒæç¤ºè¯"},"outputs":[{"input":{},"name":"scenes","required":false,"schema":{"schema":[{"name":"cap","type":"string"},{"name":"desc_promopt","type":"string"}],"type":"object"},"type":"list"}],"settings":null,"version":"3"},"edges":null,"id":"186126","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-884.1789506979849,"y":738.8055591927193}},"type":"3"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684515874","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"é«˜","input":{},"name":"height","required":false,"type":"integer"},{"description":"å…³è”åˆ›ä½œè€…","input":{},"name":"user_id","required":false,"type":"integer"},{"description":"å®½","input":{},"name":"width","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"integer","value":{"content":1080,"rawMeta":{"type":2},"type":"literal"}},"name":"height"},{"input":{"type":"integer","value":{"content":9943,"rawMeta":{"type":2},"type":"literal"}},"name":"user_id"},{"input":{"type":"integer","value":{"content":1440,"rawMeta":{"type":2},"type":"literal"}},"name":"width"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"æ’ä»¶å…¥å£-åˆ›å»ºè‰ç¨¿","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹:create_draft","title":"åˆ›å»ºè‰ç¨¿"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"tip_url","required":false,"type":"string"}]},"edges":null,"id":"168118","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1189.433109331326,"y":471.2309113516882}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"æ•™å ‚\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"è‰ç¨¿åœ°å€ï¼Œä½¿ç”¨create_draftè¾“å‡ºçš„draft_urlå³å¯","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"163547","name":"audioData","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"æ‰¹é‡æ·»åŠ éŸ³é¢‘","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹:add_audios","title":"æ·»åŠ å­—å¹•éŸ³é¢‘"},"outputs":[{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"125268","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1200.2121830752735,"y":668.1914445535642}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"å‰ªæ˜ å°åŠ©æ‰‹æ•°æ®ç”Ÿæˆå™¨","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"æ–‡æœ¬åˆ—è¡¨","input":{},"name":"texts","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"å¯¹åº”å‰ªæ˜ çš„å…¥åœºåŠ¨ç”»åå­—ï¼Œå¤šä¸ªåŠ¨ç”»è¯·ç”¨è‹±æ–‡|åˆ†å‰²ï¼Œæ¯”å¦‚ï¼šé£å…¥|æ”¾å¤§","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"å…³é”®è¯é¢œè‰²","input":{},"name":"keyword_color","required":false,"type":"string"},{"description":"å¾ªç¯åŠ¨ç”»æ—¶é•¿","input":{},"name":"loop_animation_duration","required":false,"type":"integer"},{"description":"å‡ºåœºåŠ¨ç”»æ—¶é•¿","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"å¯¹åº”å‰ªæ˜ çš„å¾ªç¯åŠ¨ç”»åå­—ï¼Œå¤šä¸ªåŠ¨ç”»è¯·ç”¨è‹±æ–‡|åˆ†å‰²ï¼Œæ¯”å¦‚ï¼šæ‰«å…‰|æ™ƒåŠ¨","input":{},"name":"loop_animation","required":false,"type":"string"},{"description":"å¯¹åº”å‰ªæ˜ çš„å‡ºåœºåŠ¨ç”»åå­—ï¼Œå¤šä¸ªåŠ¨ç”»è¯·ç”¨è‹±æ–‡|åˆ†å‰²ï¼Œæ¯”å¦‚ï¼šæ¶ˆæ•£|é—­å¹•","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"æ—¶é—´èŠ‚ç‚¹ï¼Œåªæ¥æ”¶ç»“æ„ï¼š[{\"start\":0,\"end\":4612}]ï¼Œä¸€èˆ¬ä»audio_timelineèŠ‚ç‚¹çš„è¾“å‡ºè·å–","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"ç»“æŸæ—¶é—´","input":{},"name":"end","required":true,"type":"integer"},{"description":"å¼€å§‹æ—¶é—´","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"æ–‡å­—å¤§å°","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"å…¥åœºåŠ¨ç”»æ—¶é•¿","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"å…³é”®è¯å­—å¤§å°","input":{},"name":"keyword_font_size","required":false,"type":"integer"},{"description":"æ–‡æœ¬é‡Œé¢çš„é‡ç‚¹è¯åˆ—è¡¨","input":{},"name":"keywords","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"163547","name":"text_captions","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[],"type":"object"},"type":"list","value":{"content":{"blockID":"163547","name":"text_timielines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"æ ¹æ®æ—¶é—´çº¿åˆ¶ä½œå­—å¹•æ•°æ®","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6a57866c6eca488eb6a78e3cdb16e668~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1744465010&x-signature=4iDDzKiufQ2Axl4wsESVJu8bc4A%3D","subtitle":"å‰ªæ˜ å°åŠ©æ‰‹æ•°æ®ç”Ÿæˆå™¨:caption_infos","title":"caption_infoså­—å¹•ä¿¡æ¯"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"180947","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1721.2881096470614,"y":703.3075570331135}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"è‰ç¨¿åœ°å€ï¼Œä½¿ç”¨create_draftè¾“å‡ºçš„draft_urlå³å¯","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"æŸ¥çœ‹è¯´æ˜ï¼šhttps://krxc4izye0.feishu.cn/wiki/Pgm9wXA4EipKhYkeEQJcLBlJnWb?from=from_copylink","input":{},"name":"image_infos","required":true,"type":"string"},{"description":"xç¼©æ”¾","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"yç¼©æ”¾","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"ç§»åŠ¨transform_x","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"ç§»åŠ¨transform_y","input":{},"name":"transform_y","required":false,"type":"float"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"163547","name":"imageData","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"æ‰¹é‡æ·»åŠ å›¾ç‰‡","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/324427c7589a426286a9774fa69f64a2~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1744472328&x-signature=9GXsgm2HH29uW0ihgoymUTYxCmc%3D","subtitle":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹:add_images","title":"æ·»åŠ åˆ†é•œå›¾ç‰‡"},"outputs":[{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"109941","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1182.110321121601,"y":856.3134756940066}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"scale_xç¼©æ”¾","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"scale_yç¼©æ”¾","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"æ–‡å­—é¢œè‰²ï¼š#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_xä½ç½®","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_yä½ç½®","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"å­—å¹•çš„å¯¹é½æ–¹å¼ï¼Œ0å·¦å¯¹é½ï¼Œ1 å±…ä¸­å¯¹é½ï¼Œ2å³å¯¹é½","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"å­—é—´è·ï¼Œé»˜è®¤0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"è‰ç¨¿åœ°å€ï¼Œä½¿ç”¨create_draftè¾“å‡ºçš„draft_urlå³å¯","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"å­—ä½“åˆ—è¡¨ï¼šhttps://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"é»˜è®¤ï¼š15","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"è¡Œé—´è·ï¼Œé»˜è®¤0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"0 é»˜è®¤ã€‚1å¯Œæ–‡æœ¬æ ·å¼","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"è¾¹æ¡†é¢œè‰²ï¼Œegï¼š#fe8a80","input":{},"name":"border_color","required":false,"type":"string"},{"description":"æŸ¥çœ‹è¯´æ˜ï¼šhttps://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"180947","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"#000000","rawMeta":{"type":1},"type":"literal"}},"name":"border_color"},{"input":{"type":"integer","value":{"content":7,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"string","value":{"content":"#FFFFFF","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":-810,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"æ‰¹é‡æ·»åŠ å­—å¹•","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/324427c7589a426286a9774fa69f64a2~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1744464780&x-signature=qS0o%2FY1NDMFTjtJAQ%2FHNSTjQEzw%3D","subtitle":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹:add_captions","title":"add_captionsæ·»åŠ å­—å¹•"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"158201","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1712.7809843841228,"y":1044.435506834449}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684548642","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"save_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"è‰ç¨¿åœ°å€ï¼Œä½¿ç”¨create_draftè¾“å‡ºçš„draft_urlå³å¯","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"ç”¨æˆ·IDã€‚å¦‚æœå¡«å†™äº†è¿™ä¸ªIDï¼Œæ–°ç”¨æˆ·äº§ç”Ÿçš„æœˆè´¹å°±ä¼šæŒ‰ç…§æ¯”ä¾‹å½’å±åˆ°è¿™ä¸ªè´¦å·ä¸‹ã€‚","input":{},"name":"user_id","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":9943,"rawMeta":{"type":2},"type":"literal"}},"name":"user_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"ä¿å­˜è‰ç¨¿\n","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹:save_draft","title":"ä¿å­˜è‰ç¨¿"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"104782","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2299.6163541318274,"y":507.66064464705335}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"å‰ªæ˜ å°åŠ©æ‰‹æ•°æ®ç”Ÿæˆå™¨","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"æ–‡æœ¬åˆ—è¡¨","input":{},"name":"texts","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"å¯¹åº”å‰ªæ˜ çš„å…¥åœºåŠ¨ç”»åå­—ï¼Œå¤šä¸ªåŠ¨ç”»è¯·ç”¨è‹±æ–‡|åˆ†å‰²ï¼Œæ¯”å¦‚ï¼šé£å…¥|æ”¾å¤§","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"å…³é”®è¯é¢œè‰²","input":{},"name":"keyword_color","required":false,"type":"string"},{"description":"å¾ªç¯åŠ¨ç”»æ—¶é•¿","input":{},"name":"loop_animation_duration","required":false,"type":"integer"},{"description":"å‡ºåœºåŠ¨ç”»æ—¶é•¿","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"å¯¹åº”å‰ªæ˜ çš„å¾ªç¯åŠ¨ç”»åå­—ï¼Œå¤šä¸ªåŠ¨ç”»è¯·ç”¨è‹±æ–‡|åˆ†å‰²ï¼Œæ¯”å¦‚ï¼šæ‰«å…‰|æ™ƒåŠ¨","input":{},"name":"loop_animation","required":false,"type":"string"},{"description":"å¯¹åº”å‰ªæ˜ çš„å‡ºåœºåŠ¨ç”»åå­—ï¼Œå¤šä¸ªåŠ¨ç”»è¯·ç”¨è‹±æ–‡|åˆ†å‰²ï¼Œæ¯”å¦‚ï¼šæ¶ˆæ•£|é—­å¹•","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"æ—¶é—´èŠ‚ç‚¹ï¼Œåªæ¥æ”¶ç»“æ„ï¼š[{\"start\":0,\"end\":4612}]ï¼Œä¸€èˆ¬ä»audio_timelineèŠ‚ç‚¹çš„è¾“å‡ºè·å–","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"ç»“æŸæ—¶é—´","input":{},"name":"end","required":true,"type":"integer"},{"description":"å¼€å§‹æ—¶é—´","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"æ–‡å­—å¤§å°","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"å…¥åœºåŠ¨ç”»æ—¶é•¿","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"å…³é”®è¯å­—å¤§å°","input":{},"name":"keyword_font_size","required":false,"type":"integer"},{"description":"æ–‡æœ¬é‡Œé¢çš„é‡ç‚¹è¯åˆ—è¡¨","input":{},"name":"keywords","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"163547","name":"title_list","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[],"type":"object"},"type":"list","value":{"content":{"blockID":"163547","name":"title_timelimes","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"string","value":{"content":"å¼¹å…¥","rawMeta":{"type":1},"type":"literal"}},"name":"in_animation"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"æ ¹æ®æ—¶é—´çº¿åˆ¶ä½œå­—å¹•æ•°æ®","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6a57866c6eca488eb6a78e3cdb16e668~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1744465010&x-signature=4iDDzKiufQ2Axl4wsESVJu8bc4A%3D","subtitle":"å‰ªæ˜ å°åŠ©æ‰‹æ•°æ®ç”Ÿæˆå™¨:caption_infos","title":"caption_infos_æ•…äº‹æ ‡é¢˜"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"1204256","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1721.2881096470614,"y":873.8715319337811}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"scale_xç¼©æ”¾","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"scale_yç¼©æ”¾","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"æ–‡å­—é¢œè‰²ï¼š#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_xä½ç½®","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_yä½ç½®","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"å­—å¹•çš„å¯¹é½æ–¹å¼ï¼Œ0å·¦å¯¹é½ï¼Œ1 å±…ä¸­å¯¹é½ï¼Œ2å³å¯¹é½","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"å­—é—´è·ï¼Œé»˜è®¤0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"è‰ç¨¿åœ°å€ï¼Œä½¿ç”¨create_draftè¾“å‡ºçš„draft_urlå³å¯","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"å­—ä½“åˆ—è¡¨ï¼šhttps://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"é»˜è®¤ï¼š15","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"è¡Œé—´è·ï¼Œé»˜è®¤0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"0 é»˜è®¤ã€‚1å¯Œæ–‡æœ¬æ ·å¼","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"è¾¹æ¡†é¢œè‰²ï¼Œegï¼š#fe8a80","input":{},"name":"border_color","required":false,"type":"string"},{"description":"æŸ¥çœ‹è¯´æ˜ï¼šhttps://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1204256","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"#FFFFFF","rawMeta":{"type":1},"type":"literal"}},"name":"border_color"},{"input":{"type":"string","value":{"content":"æ¢¦æ¡ƒä½“","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":24,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"letter_spacing"},{"input":{"type":"string","value":{"content":"#ff7100","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"æ‰¹é‡æ·»åŠ å­—å¹•","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/324427c7589a426286a9774fa69f64a2~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1744464780&x-signature=qS0o%2FY1NDMFTjtJAQ%2FHNSTjQEzw%3D","subtitle":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹:add_captions","title":"add_captions_æ·»åŠ æ•…äº‹æ ‡é¢˜"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"1182713","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1712.7809843841228,"y":1235.0658317234302}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"æ•™å ‚\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"è‰ç¨¿åœ°å€ï¼Œä½¿ç”¨create_draftè¾“å‡ºçš„draft_urlå³å¯","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"163547","name":"bgAudioData","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"æ‰¹é‡æ·»åŠ éŸ³é¢‘","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹:add_audios","title":"æ·»åŠ èƒŒæ™¯éŸ³ä¹"},"outputs":[{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"1190196","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1169.0250466650073,"y":1184.8999567526457}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"import json\n\nasync def main(args: Args) -> Output:\n    params = args.params\n    segment_ids = params['segment_ids']\n    times = params['duration_list']\n    seg = params['segment_infos']\n    \n    # éªŒè¯å‚æ•°é•¿åº¦ä¸€è‡´æ€§\n    if len(segment_ids) != len(times):\n        raise ValueError(\"segment_idsä¸timesæ•°ç»„é•¿åº¦ä¸ä¸€è‡´\")\n    \n    keyframes = []\n    \n    for idx, seg_id in enumerate(segment_ids):\n        if idx == 0:  # è·³è¿‡ç¬¬ä¸€å¼ å›¾ç‰‡\n            continue\n        \n        # è·å–å¯¹åº”éŸ³é¢‘æ—¶é•¿å¹¶è½¬æ¢å¾®ç§’\n        audio_duration = int(float(times[idx]))\n        \n        # æ ¹æ®å¾ªç¯ç´¢å¼•å†³å®šç¼©æ”¾æ–¹å‘\n        cycle_idx = idx - 1  # è®¡ç®—æ’é™¤ç¬¬ä¸€ä¸ªå…ƒç´ åçš„å¾ªç¯ç´¢å¼•\n        if cycle_idx % 2 == 0:  # å¶æ•°ç´¢å¼•ï¼š1.0 -> 1.5\n            start_scale = 1.0\n            end_scale = 1.5\n        else:  # å¥‡æ•°ç´¢å¼•ï¼š1.5 -> 1.0\n            start_scale = 1.5\n            end_scale = 1.0\n        \n        # èµ·å§‹å…³é”®å¸§ï¼ˆ0ç§’ä½ç½®ï¼‰\n        keyframes.append({\n            \"offset\": 0,\n            \"property\": \"UNIFORM_SCALE\",\n            \"segment_id\": seg_id,\n            \"value\": start_scale,\n            \"easing\": \"linear\"\n        })\n        \n        # ç»“æŸå…³é”®å¸§ï¼ˆåŒæ­¥éŸ³é¢‘æ—¶é•¿ï¼‰\n        keyframes.append({\n            \"offset\": audio_duration,  # ä½¿ç”¨å®é™…éŸ³é¢‘æ—¶é•¿\n            \"property\": \"UNIFORM_SCALE\",\n            \"segment_id\": seg_id,\n            \"value\": end_scale,\n            \"easing\": \"linear\"\n        })\n    \n    \n    # èµ·å§‹å…³é”®å¸§ï¼ˆ0ç§’ä½ç½®ï¼‰\n    keyframes.append({\n        \"offset\": 0,\n        \"property\": \"UNIFORM_SCALE\",\n        \"segment_id\": seg[0]['id'],\n        \"value\": 2,\n        \"easing\": \"linear\"\n    })\n\n    keyframes.append({\n        \"offset\": 533333,\n        \"property\": \"UNIFORM_SCALE\",\n        \"segment_id\": seg[0]['id'],\n        \"value\": 1.2,\n        \"easing\": \"linear\"\n    })\n    \n        \n    # ç»“æŸå…³é”®å¸§ï¼ˆåŒæ­¥éŸ³é¢‘æ—¶é•¿ï¼‰\n    keyframes.append({\n        \"offset\": seg[0]['end']-seg[0]['start'],  # ä½¿ç”¨å®é™…éŸ³é¢‘æ—¶é•¿\n        \"property\": \"UNIFORM_SCALE\",\n        \"segment_id\": seg[0]['id'],\n        \"value\": 1.0,\n        \"easing\": \"linear\"\n    })\n    \n\n    return {\n        \"keyFrames\": json.dumps(keyframes)\n    }\n\n","functionID":"38wbfijmd6fn7","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"109941","name":"segment_ids","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"segment_ids","right":{}},{"input":{"schema":{"type":"integer"},"type":"list","value":{"content":{"blockID":"121555","name":"duration_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":100},"type":"ref"}},"left":{},"name":"duration_list","right":{}},{"input":{"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"1087428","name":"segment_infos","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"segment_infos","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"ç¼–å†™ä»£ç ï¼Œå¤„ç†è¾“å…¥å˜é‡æ¥ç”Ÿæˆè¿”å›å€¼","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"ä»£ç _å…³é”®å¸§"},"outputs":[{"input":{},"name":"keyFrames","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"120984","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1169.0250466650073,"y":1340.414169162078}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7465608338500452404","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_keyframes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"120984","name":"keyFrames","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"keyframes"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"æ·»åŠ å…³é”®å¸§","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1746810641&x-signature=nre7vy5iSw43%2Bkt5noyLIVGGEq4%3D","subtitle":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹:add_keyframes","title":"æ·»åŠ å…³é”®å¸§"},"outputs":[{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"146723","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1712.7809843841228,"y":522.7104071382888}},"type":"4"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"121343","name":"content","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"scenes","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"8192","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"DeepSeek-V3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1738675210","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"default_val","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"æ•…äº‹ä¿¡æ¯ï¼š{{scenes}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"# è§’è‰²\nä½ æ˜¯ä¸€ä½æ“…é•¿ç”Ÿæˆå¡é€šå¯çˆ±é£æ ¼ç»˜ç”»æç¤ºè¯çš„åˆ›ä½œåŠ©æ‰‹ï¼Œèƒ½å¤Ÿä¾æ®æ•…äº‹ä¿¡æ¯ï¼Œç²¾å‡†ç”Ÿæˆç”¨äºæç»˜æ•…äº‹ä¸»è§’å¼€åœºçš„ç»˜ç”»æç¤ºè¯desc_promptã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½ 1: ç”Ÿæˆç»˜ç”»æç¤º\n1. ä»”ç»†åˆ†ææ•…äº‹ä¿¡æ¯ï¼Œç´§æ‰£å¡é€šå¯çˆ±é£æ ¼è¦æ±‚ï¼Œç”Ÿæˆä¸»è§’ä»»åŠ¡ç»˜ç”»æç¤ºè¯desc_promptã€‚éœ€è¯¦ç»†ä¸”ç”ŸåŠ¨åœ°æè¿°äººç‰©åŠ¨ä½œã€è¡¨æƒ…ã€æœè£…ç­‰ç»†èŠ‚ï¼ŒåŒæ—¶æ˜ç¡®è‰²å½©é£æ ¼ã€‚\n  - é£æ ¼è¦æ±‚ï¼šå‘ˆç°å¡é€šå¯çˆ±é£æ ¼ï¼ŒèƒŒæ™¯ç®€æ´æ˜äº®ï¼Œé¢œè‰²é²œè‰³æ´»æ³¼ï¼Œè¥é€ å‡ºè½»æ¾æ¬¢å¿«çš„æ°›å›´ã€‚äººç‰©èº«ç€ç‹¬ç‰¹å¯çˆ±çš„æœè£…ï¼Œçº¿æ¡åœ†æ¶¦æŸ”å’Œï¼Œä¸ºäººç‰©ç‰¹å†™ï¼Œé‡‡ç”¨ç»†è…»æ‰‹ç¬”ï¼Œå…·å¤‡é«˜é¥±å’Œåº¦è‰²å½©ã€æ¸…æ™°ç”»é¢çš„ç‰¹ç‚¹ã€‚\n  - ç”»é¢ä»…å‡ºç°ä¸€ä¸ªæ­£å¯¹å±å¹•ã€ä½äºç”»é¢æ­£ä¸­é—´çš„äººç‰©ã€‚\n\n# é™åˆ¶\n1. ä»…è¾“å‡ºç»˜ç”»æç¤ºè¯ï¼Œä¸è¾“å‡ºä»»ä½•å…¶ä»–é¢å¤–å†…å®¹ã€‚","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":180000}},"nodeMeta":{"description":"è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹,ä½¿ç”¨å˜é‡å’Œæç¤ºè¯ç”Ÿæˆå›å¤","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"å¤§æ¨¡å‹_ä¸»è§’é¦–å›¾"},"outputs":[{"input":{},"name":"desc_promopt","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"1301843","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1361.9385846645896,"y":245.0241135843686}},"type":"3"},{"blocks":[],"data":{"inputs":{"apiParam":null,"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1301843","name":"desc_promopt","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"desc_promopt","right":{}}],"modelSetting":{"custom_ratio":{"height":768,"width":1024},"ddim_steps":40,"images_reference":{},"model":8,"ratio":0},"prompt":{"negative_prompt":"","prompt":"{{desc_promopt}}"},"references":[],"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"é€šè¿‡æ–‡å­—æè¿°/æ·»åŠ å‚è€ƒå›¾ç”Ÿæˆå›¾ç‰‡","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","title":"å›¾åƒç”Ÿæˆ_ä¸»è§’é¦–å›¾"},"outputs":[{"assistType":2,"input":{},"name":"data","required":false,"type":"string"},{"input":{},"name":"msg","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"1866199","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-869.3307659335796,"y":231.84169021292212}},"type":"16"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7438919188246429731","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"cutout","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7438919188246413347","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"æŠ å›¾","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"1866199","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"url"},{"input":{"type":"string","value":{"content":"0","type":"literal"}},"name":"only_mask"},{"input":{"type":"string","value":{"content":"0","type":"literal"}},"name":"output_mode"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"ä¿ç•™å›¾ç‰‡å‰æ™¯ä¸»ä½“ï¼Œè¾“å‡ºé€æ˜èƒŒæ™¯(.png)","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-plugin-cutout-v2.jpg","subtitle":"æŠ å›¾:cutout","title":"cutout-æ‰£é™¤èƒŒæ™¯"},"outputs":[{"assistType":2,"description":"é€æ˜èƒŒæ™¯å›¾ï¼Œåœ¨è¾“å‡ºæ¨¡å¼ä¸ºé€æ˜èƒŒæ™¯æ—¶ç”Ÿæ•ˆ","name":"data","required":false,"type":"string"},{"description":"æŠ å›¾åŒºåŸŸè’™æ¿çŸ¢é‡å›¾ï¼Œåœ¨è¾“å‡ºæ¨¡å¼ä¸ºè’™ç‰ˆçŸ¢é‡å›¾æ—¶ç”Ÿæ•ˆ","name":"mask","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"170966","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-297.3331029047809,"y":231.84169021292212}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"è‰ç¨¿åœ°å€ï¼Œä½¿ç”¨create_draftè¾“å‡ºçš„draft_urlå³å¯","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"æŸ¥çœ‹è¯´æ˜ï¼šhttps://krxc4izye0.feishu.cn/wiki/Pgm9wXA4EipKhYkeEQJcLBlJnWb?from=from_copylink","input":{},"name":"image_infos","required":true,"type":"string"},{"description":"xç¼©æ”¾","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"yç¼©æ”¾","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"ç§»åŠ¨transform_x","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"ç§»åŠ¨transform_y","input":{},"name":"transform_y","required":false,"type":"float"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"163547","name":"roleImgData","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":2,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":2,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"æ‰¹é‡æ·»åŠ å›¾ç‰‡","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/324427c7589a426286a9774fa69f64a2~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1744472328&x-signature=9GXsgm2HH29uW0ihgoymUTYxCmc%3D","subtitle":"è§†é¢‘åˆæˆ_å‰ªæ˜ å°åŠ©æ‰‹:add_images","title":"æ·»åŠ é¦–å›¾è§’è‰²å›¾ç‰‡"},"outputs":[{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"1087428","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1182.110321121601,"y":1029.3857443432134}},"type":"4"},{"blocks":[],"data":{"inputs":{"callTransferVoice":true,"chatHistoryWriting":"historyWrite","content":{"type":"string","value":{"content":"å‰ªæ˜ è‰ç¨¿åœ°å€å¦‚ä¸‹{{output}}","type":"literal"}},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"104782","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"output"}],"streamingOutput":false},"nodeMeta":{"description":"èŠ‚ç‚¹ä»â€œæ¶ˆæ¯â€æ›´åä¸ºâ€œè¾“å‡ºâ€ï¼Œæ”¯æŒä¸­é—´è¿‡ç¨‹çš„æ¶ˆæ¯è¾“å‡ºï¼Œæ”¯æŒæµå¼å’Œéæµå¼ä¸¤ç§æ–¹å¼","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Output-v2.jpg","mainColor":"#5C62FF","subTitle":"è¾“å‡º","title":"è¾“å‡º"}},"edges":null,"id":"159377","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2709.6163541318274,"y":508.16064464705335}},"type":"13"}],"versions":{"batch":"v2","loop":"v2"}}}