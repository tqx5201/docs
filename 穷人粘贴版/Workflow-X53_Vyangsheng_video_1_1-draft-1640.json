{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531361010327470131","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"100001","sourcePortID":"","targetNodeID":"182665"},{"sourceNodeID":"116461","sourcePortID":"","targetNodeID":"900001"},{"sourceNodeID":"182665","sourcePortID":"","targetNodeID":"117695"},{"sourceNodeID":"117695","sourcePortID":"batch-output","targetNodeID":"103693"},{"sourceNodeID":"103693","sourcePortID":"","targetNodeID":"130140"},{"sourceNodeID":"130140","sourcePortID":"","targetNodeID":"163219"},{"sourceNodeID":"160558","sourcePortID":"","targetNodeID":"116461"},{"sourceNodeID":"163219","sourcePortID":"","targetNodeID":"143467"},{"sourceNodeID":"198834","sourcePortID":"","targetNodeID":"160558"},{"sourceNodeID":"141258","sourcePortID":"","targetNodeID":"198834"},{"sourceNodeID":"143467","sourcePortID":"","targetNodeID":"141258"}],"nodes":[{"blocks":[],"data":{"nodeMeta":{"description":"工作流的起始节点，用于设定启动工作流需要的信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg","subTitle":"","title":"开始"},"outputs":[{"name":"input","required":false,"type":"string"}],"trigger_parameters":[{"name":"input","required":false,"type":"string"}]},"edges":null,"id":"100001","meta":{"position":{"x":-762.8129499798928,"y":223.42999378299282}},"type":"1"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"116461","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"output"}],"terminatePlan":"returnVariables"},"nodeMeta":{"description":"工作流的最终节点，用于返回工作流运行后的结果信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg","subTitle":"","title":"结束"}},"edges":null,"id":"900001","meta":{"position":{"x":5250.540608978868,"y":210.42999378299282}},"type":"2"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String"}],"method":"split","splitParams":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":["。","，","\n"],"type":"literal"}},"name":"delimiters"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allDelimiters"}]},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"句号分割"},"outputs":[{"name":"output","required":true,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"182665","meta":{"position":{"x":-78.49394695426668,"y":210.42999378299282}},"type":"15"},{"blocks":[{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"117695","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"input"}],"llmParam":[{"input":{"type":"float","value":{"content":"1","rawMeta":{"type":4},"type":"literal"}},"name":"temperature"},{"input":{"type":"float","value":{"content":"0.7","rawMeta":{"type":4},"type":"literal"}},"name":"topP"},{"input":{"type":"integer","value":{"content":"2","rawMeta":{"type":2},"type":"literal"}},"name":"responseFormat"},{"input":{"type":"integer","value":{"content":"1024","rawMeta":{"type":2},"type":"literal"}},"name":"maxTokens"},{"input":{"type":"string","value":{"content":"豆包·工具调用","rawMeta":{"type":1},"type":"literal"}},"name":"modleName"},{"input":{"type":"integer","value":{"content":"1706077826","rawMeta":{"type":2},"type":"literal"}},"name":"modelType"},{"input":{"type":"string","value":{"content":"balance","rawMeta":{"type":1},"type":"literal"}},"name":"generationDiversity"},{"input":{"type":"string","value":{"content":"用户输入：{{input}}","rawMeta":{"type":1},"type":"literal"}},"name":"prompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"enableChatHistory"},{"input":{"type":"integer","value":{"content":"3","rawMeta":{"type":2},"type":"literal"}},"name":"chatHistoryRound"},{"input":{"type":"string","value":{"content":"中式养生相关主题视频后期专家，请为用户输入的视频文案进行配图。生成配图所需的提示词。\n\n# 配图风格参考：\n中国画，徐悲鸿，粗犷笔触\n\n# 输出格式\n返回一条配图提示词，不需做任何多余解释","rawMeta":{"type":1},"type":"literal"}},"name":"systemPrompt"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"stableSystemPrompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"canContinue"}],"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","subTitle":"大模型","title":"大模型"},"outputs":[{"name":"output","required":false,"type":"string"}],"version":"3"},"edges":null,"id":"95937","meta":{"position":{"x":180,"y":0}},"type":"3"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"95937","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"prompt"}],"modelSetting":{"custom_ratio":{"height":1024,"width":1024},"ddim_steps":25,"model":1},"prompt":{"negative_prompt":"文字、符号","prompt":"{{prompt}}，中国画，徐悲鸿，粗犷笔触"},"references":[],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":60000}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","mainColor":"#FF4DC3","subTitle":"图像生成","title":"图像生成"},"outputs":[{"assistType":2,"name":"data","type":"string"},{"name":"msg","type":"string"}]},"edges":null,"id":"63797","meta":{"position":{"x":640,"y":0}},"type":"16"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"语音语种，非必填，参考 https://bytedance.larkoffice.com/docx/WdDOdiB1BoRyBNxlkXWcn0n3nLc","input":{},"name":"language","required":false,"type":"string"},{"defaultValue":"爽快思思/Skye","description":"音色ID，默认为爽快思思/Skye。详细音色列表参考 https://bytedance.larkoffice.com/docx/WdDOdiB1BoRyBNxlkXWcn0n3nLc, default value is 爽快思思/Skye","input":{},"name":"speaker_id","required":false,"type":"string"},{"defaultValue":1,"description":"语速，范围是[0.2,3]，默认为1，通常保留一位小数即可, default value is 1","input":{},"name":"speed_ratio","required":false,"type":"float"},{"description":"要合成音频的文本内容","input":{},"name":"text","required":true,"type":"string"},{"assistType":12,"description":"voice id","input":{},"name":"voice_id","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"117695","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"assistType":12,"type":"string","value":{"content":"7468512265151528987","rawMeta":{"fileName":"磁性解说男声","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"语音合成:speech_synthesis","title":"语音合成"},"outputs":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"93288","meta":{"position":{"x":180,"y":265.9}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7417655779794157603","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7417655779794141219","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"获取音频时长","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"mp3_url","input":{},"name":"mp3_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"93288","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"mp3_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"输入音频链接，获取音频时长","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"获取音频时长:get_audio_duration","title":"获取语音时长"},"outputs":[{"name":"duration","required":false,"type":"float"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"67031","meta":{"position":{"x":640,"y":265.9}},"type":"4"}],"data":{"inputs":{"batchSize":{"type":"integer","value":{"content":"100","type":"literal"}},"concurrentSize":{"type":"integer","value":{"content":3,"rawMeta":{"type":2},"type":"literal"}},"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"182665","name":"output","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"input"}]},"nodeMeta":{"description":"通过设定批量运行次数和逻辑，运行批处理体内的任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg","mainColor":"#00B2B2","subTitle":"批处理","title":"批处理"},"outputs":[{"input":{"assistType":2,"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"63797","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"img_list"},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"93288","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_list"},{"input":{"schema":{"type":"float"},"type":"list","value":{"content":{"blockID":"67031","name":"duration","source":"block-output"},"rawMeta":{"type":4},"type":"ref"}},"name":"duration_list"}]},"edges":[{"sourceNodeID":"117695","sourcePortID":"batch-function-inline-output","targetNodeID":"95937"},{"sourceNodeID":"95937","sourcePortID":"","targetNodeID":"63797"},{"sourceNodeID":"63797","sourcePortID":"","targetNodeID":"117695","targetPortID":"batch-function-inline-input"},{"sourceNodeID":"117695","sourcePortID":"batch-function-inline-output","targetNodeID":"93288"},{"sourceNodeID":"93288","sourcePortID":"","targetNodeID":"67031"},{"sourceNodeID":"67031","sourcePortID":"","targetNodeID":"117695","targetPortID":"batch-function-inline-input"}],"id":"117695","meta":{"canvasPosition":{"x":301.5060530457333,"y":504.3299937829928},"position":{"x":711.5060530457333,"y":210.42999378299282}},"type":"28"},{"blocks":[],"data":{"inputs":{"code":"import json\nimport random\nfrom typing import List, Dict, Any\n\nasync def main(args: Dict[str, Any]) -> Dict[str, Any]:\n    params = args['params']\n    image_list = params['img_list']\n    audio_list = params['audio_list']\n    duration_list = params['duration_list']\n    text_list = params['text_list']\n    width = params['width']\n    height = params['height']\n    \n    captions = []\n    images = []\n    audios = []\n\n    image_start = 0\n    image_end = 0\n\n    for idx, duration_obj in enumerate(duration_list):\n        image_end = int(image_start + int(duration_obj * 1_000_000))\n        captions.append({\n                'text': text_list[idx],\n                'start': image_start,\n                'end': image_end,\n                # \"in_animation\": \"渐显\",\n                # \"out_animation\": \"渐隐\"\n            })\n        audios.append({\n                \"audio_url\": audio_list[idx],\n                \"duration\": int(duration_obj * 1_000_000),\n                \"start\": image_start,\n                \"end\": image_end\n            })\n        images.append({\n            \"image_url\": image_list[idx],\n            \"width\": width,\n            \"height\": height,\n            \"start\": image_start,\n            \"end\": image_end\n            # \"in_animation\": random.choice(['向右滑动', '向左滑动','向下滑动', '向上滑动','渐显'])\n        })\n        image_start = image_end\n\n    return {\n        \"captions\": json.dumps(captions),\n        \"imgs\": json.dumps(images),\n        \"audios\": json.dumps(audios)\n    }\n","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"182665","name":"output","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"text_list"},{"input":{"schema":{"assistType":2,"type":"string"},"type":"list","value":{"content":{"blockID":"117695","name":"img_list","source":"block-output"},"rawMeta":{"type":104},"type":"ref"}},"name":"img_list"},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"117695","name":"audio_list","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"audio_list"},{"input":{"schema":{"type":"float"},"type":"list","value":{"content":{"blockID":"117695","name":"duration_list","source":"block-output"},"rawMeta":{"type":102},"type":"ref"}},"name":"duration_list"},{"input":{"type":"string","value":{"content":"1920","rawMeta":{"type":1},"type":"literal"}},"name":"height"},{"input":{"type":"string","value":{"content":"1080","rawMeta":{"type":1},"type":"literal"}},"name":"width"}],"language":3,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码-组合参数"},"outputs":[{"name":"captions","required":false,"type":"string"},{"name":"imgs","required":false,"type":"string"},{"name":"audios","required":false,"type":"string"}]},"edges":null,"id":"103693","meta":{"position":{"x":1501.506053045733,"y":210.42999378299282}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684515874","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"高","input":{},"name":"height","required":false,"type":"integer"},{"description":"关联创作者","input":{},"name":"user_id","required":false,"type":"integer"},{"description":"宽","input":{},"name":"width","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"integer","value":{"content":1920,"rawMeta":{"type":2},"type":"literal"}},"name":"height"},{"input":{"type":"integer","value":{"content":8858,"rawMeta":{"type":2},"type":"literal"}},"name":"user_id"},{"input":{"type":"integer","value":{"content":1080,"rawMeta":{"type":2},"type":"literal"}},"name":"width"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"插件入口-创建草稿","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:create_draft","title":"创建草稿"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"tip_url","required":false,"type":"string"}]},"edges":null,"id":"130140","meta":{"position":{"x":1961.506053045733,"y":210.42999378299282}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684548642","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"save_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"用户ID。如果填写了这个ID，新用户产生的月费就会按照比例归属到这个账号下。","input":{},"name":"user_id","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"160558","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":8858,"rawMeta":{"type":2},"type":"literal"}},"name":"user_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"保存草稿\n","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:save_draft","title":"保存草稿"},"outputs":[{"name":"message","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"116461","meta":{"position":{"x":4721.506053045733,"y":210.42999378299282}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/Pgm9wXA4EipKhYkeEQJcLBlJnWb?from=from_copylink","input":{},"name":"image_infos","required":true,"type":"string"},{"description":"x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"移动transform_x","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"移动transform_y","input":{},"name":"transform_y","required":false,"type":"float"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"130140","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"103693","name":"imgs","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_images","title":"添加图片"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"163219","meta":{"position":{"x":2421.506053045733,"y":210.42999378299282}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"},{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"103693","name":"captions","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"198834","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":"#000000","rawMeta":{"type":1},"type":"literal"}},"name":"border_color"},{"input":{"type":"integer","value":{"content":15,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"string","value":{"content":"#ffffff","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":-800,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加字幕","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_captions","title":"添加字幕"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"}],"type":"object"},"type":"list"},{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"160558","meta":{"position":{"x":4261.506053045733,"y":210.42999378299282}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"教堂\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"103693","name":"audios","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"141258","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_audios","title":"添加音频"},"outputs":[{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"198834","meta":{"position":{"x":3801.506053045733,"y":210.42999378299282}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"\nasync function main({ params }: Args): Promise<Output> {\n    let key_frames = []\n    for(let info of params.input){\n        key_frames.push({\"offset\":0,\"property\":\"UNIFORM_SCALE\",\"segment_id\":info.id,\"value\":1})\n        key_frames.push({\"offset\":info.end,\"property\":\"UNIFORM_SCALE\",\"segment_id\":info.id,\"value\":1.1})\n    }\n    \n    \n    // 构建输出对象\n    const ret = {\n        \"key0\": JSON.stringify(key_frames)\n    };\n\n    return ret;\n}","inputParameters":[{"input":{"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"163219","name":"segment_infos","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"input"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码-组合关键帧"},"outputs":[{"name":"key0","required":false,"type":"string"}]},"edges":null,"id":"143467","meta":{"position":{"x":2881.506053045733,"y":210.42999378299282}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7465608338500452404","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_keyframes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"关键帧数据，格式： [     {       \"offset\": 5000000,       \"property\": \"KFTypePositionX\",       \"segment_id\": \"acc5b516-046b-4eae-a179-f686f35e70a8\",       \"value\": 0     }   ]","input":{},"name":"keyframes","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"163219","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"143467","name":"key0","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"keyframes"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"添加关键帧","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_keyframes","title":"添加关键帧"},"outputs":[{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"141258","meta":{"position":{"x":3341.506053045733,"y":210.42999378299282}},"type":"4"}],"versions":{"batch":"v2","loop":"v2"}}}