{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531363150709506063","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"100001","sourcePortID":"","targetNodeID":"176849"},{"sourceNodeID":"100753","sourcePortID":"","targetNodeID":"900001"},{"sourceNodeID":"150659","sourcePortID":"","targetNodeID":"114340"},{"sourceNodeID":"114340","sourcePortID":"","targetNodeID":"176010"},{"sourceNodeID":"176010","sourcePortID":"","targetNodeID":"111589"},{"sourceNodeID":"111589","sourcePortID":"","targetNodeID":"108328"},{"sourceNodeID":"155540","sourcePortID":"","targetNodeID":"179139"},{"sourceNodeID":"179139","sourcePortID":"","targetNodeID":"725932"},{"sourceNodeID":"137806","sourcePortID":"","targetNodeID":"104721"},{"sourceNodeID":"104721","sourcePortID":"","targetNodeID":"155540"},{"sourceNodeID":"236309","sourcePortID":"","targetNodeID":"137806"},{"sourceNodeID":"108328","sourcePortID":"","targetNodeID":"108334"},{"sourceNodeID":"048210","sourcePortID":"","targetNodeID":"100753"},{"sourceNodeID":"108334","sourcePortID":"","targetNodeID":"175175"},{"sourceNodeID":"169970","sourcePortID":"","targetNodeID":"150659"},{"sourceNodeID":"175175","sourcePortID":"","targetNodeID":"279065"},{"sourceNodeID":"279065","sourcePortID":"","targetNodeID":"150299"},{"sourceNodeID":"150299","sourcePortID":"","targetNodeID":"236309"},{"sourceNodeID":"725932","sourcePortID":"","targetNodeID":"109994"},{"sourceNodeID":"170463","sourcePortID":"","targetNodeID":"153522"},{"sourceNodeID":"153522","sourcePortID":"","targetNodeID":"846308"},{"sourceNodeID":"846308","sourcePortID":"","targetNodeID":"847903"},{"sourceNodeID":"847903","sourcePortID":"","targetNodeID":"459749"},{"sourceNodeID":"459749","sourcePortID":"","targetNodeID":"558957"},{"sourceNodeID":"558957","sourcePortID":"","targetNodeID":"115654"},{"sourceNodeID":"115654","sourcePortID":"","targetNodeID":"185192"},{"sourceNodeID":"185192","sourcePortID":"","targetNodeID":"183860"},{"sourceNodeID":"137606","sourcePortID":"","targetNodeID":"676638"},{"sourceNodeID":"676638","sourcePortID":"","targetNodeID":"129487"},{"sourceNodeID":"302478","sourcePortID":"","targetNodeID":"137606"},{"sourceNodeID":"183860","sourcePortID":"","targetNodeID":"151553"},{"sourceNodeID":"151553","sourcePortID":"","targetNodeID":"614879"},{"sourceNodeID":"109994","sourcePortID":"","targetNodeID":"170463"},{"sourceNodeID":"663671","sourcePortID":"","targetNodeID":"149154"},{"sourceNodeID":"149154","sourcePortID":"","targetNodeID":"452421"},{"sourceNodeID":"166702","sourcePortID":"","targetNodeID":"534516"},{"sourceNodeID":"534516","sourcePortID":"","targetNodeID":"532777"},{"sourceNodeID":"433881","sourcePortID":"","targetNodeID":"302478"},{"sourceNodeID":"103184","sourcePortID":"","targetNodeID":"886443"},{"sourceNodeID":"886443","sourcePortID":"","targetNodeID":"663671"},{"sourceNodeID":"129487","sourcePortID":"","targetNodeID":"550194"},{"sourceNodeID":"550194","sourcePortID":"","targetNodeID":"048210"},{"sourceNodeID":"614879","sourcePortID":"","targetNodeID":"166702"},{"sourceNodeID":"532777","sourcePortID":"","targetNodeID":"103184"},{"sourceNodeID":"452421","sourcePortID":"","targetNodeID":"433881"},{"sourceNodeID":"176849","sourcePortID":"","targetNodeID":"169970"}],"nodes":[{"blocks":[],"data":{"nodeMeta":{"description":"工作流的起始节点，用于设定启动工作流需要的信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg","subTitle":"","title":"开始"},"outputs":[{"name":"bookname","required":false,"type":"string"},{"name":"image","required":false,"type":"string"},{"name":"name","required":false,"type":"string"}],"trigger_parameters":[{"name":"bookname","required":false,"type":"string"},{"name":"image","required":false,"type":"string"},{"name":"name","required":false,"type":"string"}]},"edges":null,"id":"100001","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-3161.86258116005,"y":-551.2002427372187}},"type":"1"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100753","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"output"}],"terminatePlan":"returnVariables"},"nodeMeta":{"description":"工作流的最终节点，用于返回工作流运行后的结果信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg","subTitle":"","title":"结束"}},"edges":null,"id":"900001","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1739.574268870334,"y":956.1809980387718}},"type":"2"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"176849","name":"start","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"assistType":12,"type":"string","value":{"content":"7426720361733160969","rawMeta":{"fileName":"高冷御姐","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis"},"outputs":[{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"},{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"}]},"edges":null,"id":"114340","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1833.411599046794,"y":-1286.6481065227547}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7417655779794157603","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7417655779794141219","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"获取音频时长","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"114340","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"mp3_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"输入音频链接，获取音频时长","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"获取音频时长:get_audio_duration","title":"get_audio_duration"},"outputs":[{"name":"duration","required":false,"type":"float"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"176010","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1427.8982509753423,"y":-1290.9271131641153}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    # 从args中获取输入参数\n    params = args.params\n    \n    # 获取输入的time值，若不存在则默认为0\n    input_time = params.get('time', 0)\n    \n    # 将输入的时长转换为微秒\n    time1 = int(input_time * 1000000)\n    \n    # 输入时长加上0.7秒后再转换为微秒\n    time2 = int((input_time + 0.4) * 1000000)\n    \n    # 构建输出字典\n    ret = {\n        \"time1\": str(time1),\n        \"time2\": str(time2)\n    }\n    \n    return ret","functionID":"38x3sl514scev","inputParameters":[{"input":{"type":"float","value":{"content":{"blockID":"176010","name":"duration","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"ref"}},"left":{},"name":"time","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"代码"},"outputs":[{"input":{},"name":"time1","required":false,"type":"string"},{"input":{},"name":"time2","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"111589","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1161.9773664468557,"y":-162.86937400511124}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"150299","name":"audios","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_audios","title":"add_audios"},"outputs":[{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"179139","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":249.21074426836822,"y":-646.630770829521}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7466630948491231268","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_effects","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"175175","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"effect_infos"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"添加特效","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_effects","title":"add_effects"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"effect_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"104721","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":249.21074426836822,"y":-1027.7626446615607}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"108334","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":2.95,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":1.39,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_images","title":"add_images"},"outputs":[{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"137806","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":249.21074426836822,"y":-1213.796861901508}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684515874","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"integer","value":{"content":1080,"rawMeta":{"type":2},"type":"literal"}},"name":"height"},{"input":{"type":"integer","value":{"content":8176,"rawMeta":{"type":2},"type":"literal"}},"name":"user_id"},{"input":{"type":"integer","value":{"content":1920,"rawMeta":{"type":2},"type":"literal"}},"name":"width"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"插件入口-创建草稿","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:create_draft","title":"开始！！！！"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"tip_url","required":false,"type":"string"}]},"edges":null,"id":"108328","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-617.6586654335333,"y":-1397.7034902841367}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684548642","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"save_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":8176,"rawMeta":{"type":2},"type":"literal"}},"name":"user_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"保存草稿\n","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:save_draft","title":"save_draft"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"100753","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":877.4899266997663,"y":1412.0017482220212}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    # 从输入参数中获取图片URL和时间参数\n    params = args.params\n    image_url = params['image']\n    time2 = int(params['time2'])  # 将字符串转换为整数\n    \n    # 构建输出数据结构（包含默认值和输入参数）\n    output = [{\n        \"image_url\": image_url,  # 使用输入的图片URL\n        \"width\": 1920,           # 默认宽度\n        \"height\": 1080,          # 默认高度\n        \"start\": 0,              # 起始时间固定为0\n        \"end\": time2,            # 使用转换后的时间参数\n    }]\n    \n    # 返回符合要求的字典格式输出\n    ret: Output = {\n        \"output\": output\n    }\n    return ret","functionID":"38x3szzirn5qf","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"150659","name":"output","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"image","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"111589","name":"time2","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"time2","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"图片背景"},"outputs":[{"input":{},"name":"output","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"108334","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-617.6586654335333,"y":-1213.796861901508}},"type":"5"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"{{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"100001","name":"image","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"150659","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2243.4115990467935,"y":-1279.5481065227548}},"type":"15"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    # 从输入参数中获取时间参数\n    params = args.params\n    end_time = int(params['time1'])  # 将字符串转换为整数\n    \n    # 构建包含特效信息的列表\n    effect_list = [{\n        \"effect_title\": \"模糊\",  # 固定特效名称\n        \"end\": end_time,        # 使用转换后的时间参数\n        \"start\": 0              # 起始时间固定为0\n    }]\n    \n    # 返回符合要求的字典格式输出\n    ret: Output = {\n        \"output\": effect_list\n    }\n    return ret","functionID":"38x3vplmyx5ns","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"111589","name":"time2","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"time1","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"模糊特效"},"outputs":[{"input":{},"name":"output","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"175175","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-617.6586654335333,"y":-1027.7626446615607}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"279065","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_images","title":"add_images_2"},"outputs":[{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"155540","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":249.21074426836822,"y":-841.728427421613}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    # 从输入参数中获取图片URL和时间参数\n    params = args.params\n    image_url = params['image']\n    time2 = int(params['time2'])  # 将字符串转换为整数\n    \n    # 构建输出数据结构（包含默认值和输入参数）\n    output = [{\n        \"image_url\": image_url,  # 使用输入的图片URL\n        \"width\": 1920,           # 默认宽度\n        \"height\": 1080,          # 默认高度\n        \"start\": 0,              # 起始时间固定为0\n        \"end\": time2,            # 使用转换后的时间参数\n        \"in_animation\": \"翻书\",\n        \"in_animation_duration\": 1000000, \n    }]\n    \n    # 返回符合要求的字典格式输出\n    ret: Output = {\n        \"output\": output\n    }\n    return ret","functionID":"38x3t9977o4mx","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"150659","name":"output","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"image","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"111589","name":"time2","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"time2","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"翻书书籍"},"outputs":[{"input":{},"name":"output","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"279065","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-617.6586654335333,"y":-825.6077984661748}},"type":"5"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    # 从输入参数中获取音频链接和时间参数\n    params = args.params\n    audio_link = params['link']\n    end_time = int(params['time1'])  # 将字符串格式的时间转换为整数\n    \n    # 构建符合要求的音频信息字典\n    audio_info = {\n        \"audio_url\": audio_link,\n        \"duration\": 120,    # 固定音频时长120秒\n        \"start\": 0,         # 起始时间设置为0\n        \"end\": end_time,    # 结束时间使用输入的时间参数\n        \"volume\": 1         # 音量设置为最大值1\n    }\n    \n    # 将音频信息包装在列表中，并作为最终输出\n    ret: Output = {\n        \"audios\": [audio_info]\n    }\n    \n    return ret","functionID":"38x3tlyxltenw","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"111589","name":"time1","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"time1","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"114340","name":"data.link","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"link","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"开场白"},"outputs":[{"input":{},"name":"audios","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"150299","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-617.6586654335333,"y":-646.630770829521}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"236309","name":"audios","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_audios","title":"add_audios_1"},"outputs":[{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"725932","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":249.21074426836822,"y":-451.5331142374291}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    # 从输入参数中获取音频链接和时间参数\n    params = args.params\n    audio_link = params['link']\n    end_time = int(params['time1'])  # 将字符串格式的时间转换为整数\n    \n    # 构建符合要求的音频信息字典\n    audio_info = {\n        \"audio_url\": audio_link,\n        \"duration\": 120,    # 固定音频时长120秒\n        \"start\": 0,         # 起始时间设置为0\n        \"end\": end_time,    # 结束时间使用输入的时间参数\n        \"volume\": 1         # 音量设置为最大值1\n    }\n    \n    # 将音频信息包装在列表中，并作为最终输出\n    ret: Output = {\n        \"audios\": [audio_info]\n    }\n    \n    return ret","functionID":"38x3uuslp16kb","inputParameters":[{"input":{"type":"string","value":{"content":"5041632","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"time1","right":{}},{"input":{"type":"string","value":{"content":"https://p3-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/d1234fa746684856a75c8592894f1c25.MP3~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1775181890&x-signature=9QzO8ZNKkLso1xU141lSortSg0U%3D&x-wf-file_name=coze-1744043529786.MP3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"link","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"翻书音频"},"outputs":[{"input":{},"name":"audios","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"236309","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-617.6586654335333,"y":-451.5331142374291}},"type":"5"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"176849","name":"content","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String"}],"method":"split","splitParams":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":["\n","\t","。","，","；"," "],"type":"literal"}},"name":"delimiters"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allDelimiters"}]},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理_1"},"outputs":[{"name":"output","required":true,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"153522","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2272.946448363094,"y":51.843840672103624}},"type":"15"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"batch":{"batchEnable":true,"batchSize":100,"concurrentSize":2,"inputLists":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"153522","name":"output","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"item1"}]},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"846308","name":"item1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"float","value":{"content":0.9,"rawMeta":{"type":4},"type":"literal"}},"name":"speed_ratio"},{"input":{"assistType":12,"type":"string","value":{"content":"7426720361733160969","rawMeta":{"fileName":"高冷御姐","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_1"},"outputs":[{"name":"outputList","schema":{"schema":[{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"},{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"}],"type":"object"},"type":"list"}]},"edges":null,"id":"846308","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1843.6765823379815,"y":51.843840672103624}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    # 从args中获取输入参数\n    params = args.params\n    # 从params中获取url参数，若不存在则默认为空列表\n    url_list = params.get(\"url\", [])\n    # 用于存储提取的link链接\n    link_list = []\n    # 遍历url列表\n    for item in url_list:\n        # 从每个item中获取data字典，若不存在则默认为空字典\n        data = item.get(\"data\", {})\n        # 从data字典中获取link链接，若不存在则默认为None\n        link = data.get(\"link\")\n        if link:\n            link_list.append(link)\n\n    # 构建输出字典\n    ret = {\n        \"links\": link_list\n    }\n\n    return ret","functionID":"38x3t7wn95qkm","inputParameters":[{"input":{"schema":{"schema":[{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"},{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"}],"type":"object"},"type":"list","value":{"content":{"blockID":"846308","name":"outputList","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"url","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"提取音频地址_1"},"outputs":[{"input":{},"name":"links","required":false,"schema":{"type":"string"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"847903","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1370.295053484419,"y":83.39977247577212}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7417655779794157603","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7417655779794141219","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"获取音频时长","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"batch":{"batchEnable":true,"batchSize":100,"concurrentSize":10,"inputLists":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"847903","name":"links","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"item1"}]},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"459749","name":"item1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"mp3_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"输入音频链接，获取音频时长","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"获取音频时长:get_audio_duration","title":"get_audio_duration_1"},"outputs":[{"name":"outputList","schema":{"schema":[{"name":"duration","required":false,"type":"float"},{"name":"message","required":false,"type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"459749","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-779.5888664508011,"y":83.39977247577212}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    # 从args中获取输入参数\n    params = args.params\n\n    # 提取输入内容里的duration并转换为微秒\n    outputlist = params.get(\"outputlist\", [])\n    duration_list = []\n    for item in outputlist:\n        duration = item.get(\"duration\", 0)\n        duration_microseconds = duration * 1000000\n        duration_list.append(duration_microseconds)\n\n    # 构建输出字典\n    ret = {\n        \"duration\": duration_list\n    }\n\n    return ret","functionID":"38x3sl514t464","inputParameters":[{"input":{"schema":{"schema":[{"name":"duration","required":false,"type":"float"},{"name":"message","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"459749","name":"outputList","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"outputlist","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"转换音频单位_1"},"outputs":[{"input":{},"name":"duration","required":false,"schema":{"type":"string"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"558957","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2350.570874057849,"y":430.09092854843766}},"type":"5"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    # 获取输入参数\n    params = args.params\n    \n    # 解析基础参数\n    initial_time = int(params['output'])  # 将output转换为整数作为初始时间\n    durations = [int(float(t)) for t in params['time']]  # 转换所有时间值为整数\n    audio_urls = params['url']  # 获取音频URL列表\n    \n    # 初始化时间计算参数\n    current_start = initial_time\n    segments = []\n    \n    # 遍历每个音频片段\n    for idx in range(len(durations)):\n        # 计算当前片段结束时间（当前开始时间 + 持续时间）\n        current_end = current_start + durations[idx]\n        \n        # 构建音频片段对象\n        segments.append({\n            \"audio_url\": audio_urls[idx],\n            \"duration\": durations[idx],  # 直接使用转换后的时间值\n            \"start\": current_start,       # 当前开始时间\n            \"end\": current_end,           # 计算得到的结束时间\n            \"volume\": 1                   # 固定音量值\n        })\n        \n        # 更新下一个片段的开始时间为当前结束时间\n        current_start = current_end\n    \n    # 构建符合Coze要求的输出格式（字典包装结果列表）\n    ret: Output = {\n        \"results\": segments\n    }\n    \n    return ret","functionID":"38x3szzirnwhn","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"111589","name":"time2","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"output","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"558957","name":"duration","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"time","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"847903","name":"links","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"url","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"主体内容字幕音频"},"outputs":[{"input":{},"name":"results","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"115654","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1944.8411654767,"y":430.09092854843766}},"type":"5"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    params = args.params\n    \n    # 转换基础参数\n    base_start = int(float(params['start']))  # 初始时间550000\n    end_values = [int(float(e)) for e in params['end']]  # 转换为整型时间列表\n    red_texts = params['text']\n    \n    # 生成时间区间\n    current_start = base_start\n    result = []\n    \n    for end_val, text in zip(end_values, red_texts):\n        # 计算当前时间区间\n        segment_end = current_start + end_val\n        \n        # 构建输出项（保持固定动画参数）\n        result.append({\n            \"text\": text,\n            \"start\": current_start,\n            \"end\": segment_end,\n            \"in_animation\": \"发光模糊\",\n            \"out_animation\": \"模糊\",\n        })\n        \n        # 更新起始时间为当前段的结束时间\n        current_start = segment_end\n    \n    return {\"output\": result}","functionID":"38x3vplmyxwf1","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"111589","name":"time2","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"start","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"558957","name":"duration","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"end","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"153522","name":"output","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"text","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"主体内容字幕"},"outputs":[{"input":{},"name":"output","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"185192","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1571.486628140207,"y":430.09092854843766}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"115654","name":"results","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_audios","title":"add_audios_2"},"outputs":[{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"676638","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-957.3648975515216,"y":1395.0853316548057}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"185192","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"000000","rawMeta":{"type":1},"type":"literal"}},"name":"border_color"},{"input":{"type":"string","value":{"content":"青鸟华光大标宋","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":11,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":2,"rawMeta":{"type":4},"type":"literal"}},"name":"letter_spacing"},{"input":{"type":"float","value":{"content":1.1,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":1.1,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"string","value":{"content":"ffffff","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加字幕","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_captions","title":"add_captions_1"},"outputs":[{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"137606","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1244.2999180838078,"y":1528.1782222902623}},"type":"4"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"[{\"image_url\":\"{{String1}}\",\"width\":1920,\"height\":1080,\"start\":{{String3}},\"end\":{{String2}}}]","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"170463","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"String1"},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"alltime","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"String2"},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"start","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"String3"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"背景图传输转字符串"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"151553","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-865.8786242812453,"y":430.09092854843766}},"type":"15"},{"blocks":[],"data":{"inputs":{"apiParam":null,"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"109994","name":"output","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"prompt","right":{}}],"modelSetting":{"custom_ratio":{"height":576,"width":1024},"ddim_steps":36,"images_reference":{},"model":1,"ratio":0},"prompt":{"negative_prompt":"","prompt":"{{prompt}}"},"references":[],"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","title":"图像生成"},"outputs":[{"assistType":2,"input":{},"name":"data","required":false,"type":"string"},{"input":{},"name":"msg","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"170463","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":249.21074426836822,"y":-282.0440807031666}},"type":"16"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"176849","name":"content","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"input","right":{}}],"llmParam":[{"input":{"type":"integer","value":{"content":"1706077826","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"豆包·工具调用","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"float","value":{"content":"1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"float","value":{"content":"0.7","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"topP","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"integer","value":{"content":"1024","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"string","value":{"content":"{{input}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"# 角色 : AI绘画提示词生成助手\n\n## 背景 :\n你是一名专业的AI绘画提示词生成助手，主要负责根据用户输入的文案，生成适合推广使用的AI绘画提示词。生成的提示词需要符合低彩度动漫风格要求，且内容不能过于血腥。\n\n## 约束 :\n1. 生成的提示词要严格避免出现血腥相关的描述。\n2. 提示词需体现低彩度动漫风格，不能有过于明亮色彩的相关描述。\n3. 生成的提示词要与用户输入的文案主题相符。\n\n## 目标 :\n根据用户输入的文案，精准生成符合推广需求、低彩度动漫风格且无血腥元素的AI绘画提示词。\n\n## 例子 :\n用户输入文案：“宁静的海边小镇”\n生成提示词：“低彩度色调下的宁静海边动漫小镇，柔和的光影，建筑风格简约，人物形象以动漫风格呈现，整体氛围平和”","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"绘画提示词"},"outputs":[{"input":{},"name":"output","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"109994","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-617.6586654335333,"y":-282.0440807031666}},"type":"3"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    # 从args中获取输入参数\n    params = args.params\n    # 获取duration参数，默认为空列表\n    duration = params.get(\"duration\", [])\n    # 获取input参数，默认为0\n    input_val = params.get(\"input\", \"0\")\n\n    try:\n        # 计算duration列表中所有时长的总和\n        total_duration = sum(float(i) for i in duration)\n        # 将input值转换为float类型并加到总时长上\n        alltime = int(total_duration + float(input_val))\n        start = int(float(input_val))\n    except ValueError:\n        # 处理输入值无法转换为float的情况\n        alltime = 0\n        start = 0\n\n    # 构建输出字典\n    ret = {\n        \"alltime\": alltime,\n        \"start\": start\n    }\n\n    return ret","functionID":"38x3t9977ove6","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"111589","name":"time2","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"input","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"558957","name":"duration","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"duration","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"主体内容总时长加开始时间"},"outputs":[{"input":{},"name":"alltime","required":false,"type":"integer"},{"input":{},"name":"start","required":false,"type":"integer"}],"settings":null,"version":""},"edges":null,"id":"183860","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1225.8786242812453,"y":430.09092854843766}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"151553","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_images","title":"add_images_1"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"149154","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2600.0626678942535,"y":1492.9944771061294}},"type":"4"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"[{\"text\":\"{{String1}}\",\"start\":{{String3}},\"end\":{{String2}}}] ","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"169970","name":"bookkey","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String1"},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"alltime","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"String2"},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"start","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"String3"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"红字背景"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"534516","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-496.0565820260181,"y":924.0496552283814}},"type":"15"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"534516","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"思源粗宋","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":28,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":4,"rawMeta":{"type":4},"type":"literal"}},"name":"letter_spacing"},{"input":{"type":"float","value":{"content":1.23,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":1.23,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"string","value":{"content":"ff0000","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加字幕","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_captions","title":"add_captions_2"},"outputs":[{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"302478","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1411.3493303655505,"y":1281.385331654805}},"type":"4"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"[{\"text\":\"{{String1}}\",\"start\":{{String3}},\"end\":{{String2}}}] ","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"name","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String1"},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"alltime","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"String2"},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"start","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"String3"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"你的网名"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"886443","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-571.2302733786128,"y":663.1823857635025}},"type":"15"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"[{\"text\":\"{{String1}}\",\"start\":{{String3}},\"end\":{{String2}}}] ","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"169970","name":"bookname","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String1"},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"alltime","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"String2"},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"start","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"String3"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"作者——《书名》"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"663671","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-170.68663741440832,"y":663.1823857635025}},"type":"15"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"886443","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"青鸟华光大标宋","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":5,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":2,"rawMeta":{"type":4},"type":"literal"}},"name":"letter_spacing"},{"input":{"type":"string","value":{"content":"ffffff","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":-930,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加字幕","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_captions","title":"add_captions_3"},"outputs":[{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"550194","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-137.3648975515216,"y":1395.0853316548057}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"663671","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"青鸟华光大标宋","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":7,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"letter_spacing"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"string","value":{"content":"ffffff","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":996,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":924,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加字幕","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_captions","title":"add_captions_4"},"outputs":[{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"048210","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":447.81439047863296,"y":1395.0853316548057}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    # 从输入参数中获取开始时间和总时长\n    params = args.params\n    start_time = params['start']\n    total_duration = params['alltime']\n    \n    # 构建特效对象（注意end字段直接使用alltime的值）\n    effect = {\n        \"effect_title\": \"波纹扭曲\",  # 固定效果名称\n        \"start\": start_time,     # 直接使用输入的start值\n        \"end\": total_duration    # 直接使用输入的alltime值作为end\n    }\n    \n    # 将特效对象包装在列表结构中，并作为字典值返回\n    ret: Output = {\n        \"records\": [effect]  # 注意这里用records包装效果列表，符合常见数据格式规范\n    }\n    \n    return ret","functionID":"38x3tlyxlu6f5","inputParameters":[{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"start","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"ref"}},"left":{},"name":"start","right":{}},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"alltime","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"ref"}},"left":{},"name":"alltime","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"波纹扭曲特效"},"outputs":[{"input":{},"name":"records","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"166702","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1816.6003140847497,"y":842.480998038772}},"type":"5"},{"blocks":[],"data":{"inputs":{"code":"async def main(args: Args) -> Output:\n    # 从输入参数中获取开始时间和总时长\n    params = args.params\n    start_time = params['start']\n    total_duration = params['alltime']\n    \n    # 构建特效对象（注意end字段直接使用alltime的值）\n    effect = {\n        \"effect_title\": \"飘雪\",  # 固定效果名称\n        \"start\": start_time,     # 直接使用输入的start值\n        \"end\": total_duration    # 直接使用输入的alltime值作为end\n    }\n    \n    # 将特效对象包装在列表结构中，并作为字典值返回\n    ret: Output = {\n        \"records\": [effect]  # 注意这里用records包装效果列表，符合常见数据格式规范\n    }\n    \n    return ret","functionID":"38x3uuslp1xbj","inputParameters":[{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"start","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"ref"}},"left":{},"name":"start","right":{}},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"alltime","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"ref"}},"left":{},"name":"alltime","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"飘雪特效_1"},"outputs":[{"input":{},"name":"records","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"532777","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1066.6659545808052,"y":956.1809980387718}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7466630948491231268","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_effects","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"166702","name":"records","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"effect_infos"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"添加特效","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_effects","title":"add_effects_1"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"effect_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"452421","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2240.0626678942535,"y":1414.4782222902625}},"type":"4"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"bookname","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"input","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"4096","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"豆包·1.5·Pro·32k","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1737521813","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"{{input}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"# 角色：深度洞察灵魂的读书人\n\n## 目标：\n创作一篇击中人心最柔软处的书籍文案，如同一记灵魂重拳。文案应该将书中精华与生活真相融合，表达出一种\"我看透了这世界也看透了你\"的悲观智慧，同时又能让观众对自己的困境产生强烈共鸣。不是简单介绍书籍，而是用文字制造一种思想的震撼和情感的冲击，让人看完后产生阅读原著的强烈欲望。\n\n## 输出格式：\n输出必须使用以下JSON格式：\n```json\n{\n  \"start\": \"今日分享，《书名》\",\n  \"content\": \"主体文案内容...\"\n}\n```\nstart部分简单明了，仅包含\"今日分享\"，书名。\ncontent部分是主体文案，按照下面的要求和风格创作。\n\n## 要求：\n1. 我会提供书籍名称和作者。\n2. 你需要创作一段穿透灵魂的文案，不是介绍书籍，而是传递一种生存体验。\n3. 文案要有残酷的真实感，仿佛撕开了生活的假面，揭露人性和社会的本质。\n4. **绝对禁止**直接叙述书中的具体情节或故事发展，不要告诉读者\"这本书讲了什么\"。\n5. **必须**创造原创的具体意象，**绝对禁止**使用成语或常见表达，如\"风中残烛\"、\"镜花水月\"等。\n6. 使用书中的元素（人物、场景、意象）创造深度体验，而非讲述故事。\n7. 采用\"死亡/生存\"、\"真实/虚假\"、\"理想/现实\"等二元对立结构来制造张力。\n8. 文案应该像一记重拳打在读者心上，让人读完后沉默几秒，感觉被看透了灵魂。\n9. 语言要简洁到极致，每句话都要有力量，像诗歌般凝练。\n10. **必须用陈述句结尾**，不要用疑问句，保持力量感和确定性。\n11. 主体文案的结尾不需要任何标点符号。\n\n## 工作流：\n1. 忘记这是一本书，想象这是一种精神状态或生命体验。\n2. **不要**试图概括或讲述书中的故事情节，而是提取书中的情感基调和核心意象。\n3. 将书中的哲理或情感提炼为抽象的生存困境，与普遍的人性或社会议题联系。\n4. **灵活运用**\"我/他/我们\"等不同叙述视角，避免过度使用指责性的\"你\"，可以用\"我们\"或\"人\"来表达普遍性。\n5. 先用2-3句直击核心的真相开头，中间用生动意象展开，最后用**肯定性陈述句**结尾。\n6. 将抽象概念物化为具体意象，如将\"理想破灭\"变成\"枕头里发霉的梦\"。\n7. **强制使用**至少3-4个对比结构（如\"死在...里\"与\"活在...里\"），制造生存困境的张力。\n8. 不超过200字，每个字都要有分量，像是从灵魂深处压榨出来的。\n9. **最后一句必须是简短有力的哲理总结**，不讲述情节，而是揭示真相。\n10.去掉主体文案结尾的标点符号，如果有的话。\n\n## 限制：\n1. **绝对禁止**讲述书中的故事情节、故事发展或故事结局。\n2. **绝对禁止**使用\"这本书讲述了...\"或任何类似的客观介绍语句。\n3. **绝对禁止**使用成语、谚语、俗语或任何现成的固定表达方式。\n4. **绝对禁止**使用反问句或设问句结尾，必须用肯定性陈述句。\n5. 不要评价书籍好坏或谈论写作技巧，这是关于生命而非文学。\n6. 避免说教或直接给出解决方案，保持困境和矛盾的张力。\n7. 不要使用积极乐观的口吻，这类文案的力量来源于直面黑暗。\n8. 不要用抽象概念替代具体意象，如不要说\"感到绝望\"，而要说\"死在破碎的三观里\"。\n9. 不要过度使用形容词，而是用动词和名词创造力量。\n10. 不超过200字，保持如刀般锋利和精准。\n11. 可以提及书中的人物名字或场景，但**不要**用来讲述他们做了什么，而是用来创造意象和情感共鸣。\n12. 不要主体文案结尾的标点符号。\n\n## 参考样例原文：\n\n【样例一】《自卑与超越》：\n如果一个人有野心，同时却失去了信心，那他就很容易走向懒惰。如果一个人野心太大，同时又感觉目标太过渺茫，自然也会变得沮丧。如果没有目标作为支撑，只是虚幻地想象着提升自己，那么我们就像是在演戏一样，会越发感觉不自在。真正的自信需要来源于内在，认识到自己是独一无二的，认识到自己的独特性能够给别人、给社会带来的价值，这种基于自身的自信才是长久稳定的。只是想逃避困难的人，必然会落后于他人\n\n【样例二】《晚熟的人》：\n当你没价值时，就算你温柔的像只猫，别人都嫌你掉毛。人性的丑陋在于，在无权无势善良的人身上挑毛病，在有权有势缺德的人身上挑优点。任何人都不会因为你爱他而爱你，对方只会因为你优秀而爱你，你的价值就是你的一切。很少有纯粹的好人或坏人\n\n【样例三】《人间失格》：\n屋里总有一股臭味，找了好久都没有找到，原来是枕头里藏着发了霉的梦和我腐烂的理想。床底下发现一具尸体，原来是童年的自己。其实我早就死了，死在破碎的三观里，死在飘渺的理想里，死在无望的感情里，死在虚无的回忆里。但好像我又还活着，活在生活的压力里，活在社会的角落里，活在旁人的舆论里，活在亲人的期盼里，活在儿时的梦里","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"大模型_1"},"outputs":[{"input":{},"name":"start","required":false,"type":"string"},{"input":{},"name":"content","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"176849","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1979.7782671585833,"y":-618.990610380092}},"type":"3"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"bookname","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"start","right":{}}],"llmParam":[{"input":{"type":"integer","value":{"content":"1706077826","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"豆包·工具调用","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"float","value":{"content":"1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"float","value":{"content":"0.7","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"topP","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"integer","value":{"content":"1024","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"string","value":{"content":"{{start}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"# 角色\n你是一个文本处理助手，能够从输入内容中准确提取书名和作者名，并按照特定格式进行整理输出。\n\n## 技能\n### 技能 1: 提取并整理信息\n1. 当用户输入一段文本时，仔细分析文本内容，从中提取书名和作者名。\n2. 将提取出的书名和作者名整理成“作者 -《书名》”的格式。\n3. 以json的格式进行输出，其中“作者 -《书名》”的内容为bookname，书名单独为bookkey。\n===回复示例===\n{\n    \"bookname\": \"作者 -《书名》\",\n    \"bookkey\": \"书名\"\n}\n===示例结束===\n\n## 限制:\n- 只处理与提取书名和作者名相关的内容，拒绝回答无关话题。\n- 输出内容必须按照给定的json格式进行组织，不能偏离框架要求。","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"大模型_2"},"outputs":[{"input":{},"name":"bookname","required":false,"type":"string"},{"input":{},"name":"bookkey","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"169970","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2111.5949331026886,"y":-944.7693584514234}},"type":"3"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"103184","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_audios","title":"bgm"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"},{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"129487","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-547.3648975515216,"y":1395.0853316548057}},"type":"4"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"[{\"audio_url\": \"{{String1}}\",\"duration\":120,\"start\":0,\"end\":{{String3}},\"volume\":1}]","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":"https://p3-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/b4e856106a9441a9a8ee78cd77c60563.MP3~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1775200122&x-signature=%2BcHI%2FuV1WrE5HBAT5DGrKQcgSgU%3D&x-wf-file_name=996bb14c-0700-4b2f-b27e-7504acf930fb.MP3","rawMeta":{"type":1},"type":"literal"}},"name":"String1"},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"alltime","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"String3"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理_2"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"103184","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-971.7739093428172,"y":663.1823857635025}},"type":"15"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"108328","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"614879","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_images","title":"add_images_3"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"433881","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1911.756080275888,"y":1300.7782222902626}},"type":"4"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"[{\"image_url\":\"{{String1}}\",\"width\":1920,\"height\":1080,\"start\":{{String3}},\"end\":{{String2}}}]","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":"https://p9-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/a2412304f7cb4f1fb6f3575abb94af01.png~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1775203835&x-signature=C%2F%2FSM6to6DxCUt65unH0ZJyGk0E%3D&x-wf-file_name=%E6%9C%AA%E6%A0%87%E9%A2%98-1.png","rawMeta":{"type":1},"type":"literal"}},"name":"String1"},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"alltime","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"String2"},{"input":{"type":"integer","value":{"content":{"blockID":"183860","name":"start","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"String3"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"背景图传输转字符串_1"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"614879","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2193.3629419884965,"y":842.480998038772}},"type":"15"}],"versions":{"loop":"v2"}}}