{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531672628882079780","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"100001","sourcePortID":"","targetNodeID":"119807"},{"sourceNodeID":"169946","sourcePortID":"","targetNodeID":"900001"},{"sourceNodeID":"130632","sourcePortID":"","targetNodeID":"900001"},{"sourceNodeID":"119807","sourcePortID":"","targetNodeID":"184050"},{"sourceNodeID":"120438","sourcePortID":"","targetNodeID":"156817"},{"sourceNodeID":"156817","sourcePortID":"","targetNodeID":"122555"},{"sourceNodeID":"122555","sourcePortID":"","targetNodeID":"130632"},{"sourceNodeID":"184050","sourcePortID":"","targetNodeID":"181584"},{"sourceNodeID":"181584","sourcePortID":"true","targetNodeID":"164697"},{"sourceNodeID":"181584","sourcePortID":"false","targetNodeID":"165070"},{"sourceNodeID":"165070","sourcePortID":"","targetNodeID":"164697"},{"sourceNodeID":"164697","sourcePortID":"","targetNodeID":"120438"},{"sourceNodeID":"122555","sourcePortID":"","targetNodeID":"146494"},{"sourceNodeID":"146494","sourcePortID":"","targetNodeID":"169946"}],"nodes":[{"blocks":[],"data":{"nodeMeta":{"description":"工作流的起始节点，用于设定启动工作流需要的信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg","subTitle":"","title":"开始"},"outputs":[{"name":"input","required":false,"type":"string"},{"assistType":2,"name":"img","required":false,"type":"string"}],"trigger_parameters":[{"name":"input","required":false,"type":"string"},{"assistType":2,"name":"img","required":false,"type":"string"}]},"edges":null,"id":"100001","meta":{"position":{"x":-2237.2791878259045,"y":134.2878952692225}},"type":"1"},{"blocks":[],"data":{"inputs":{"content":{"type":"string","value":{"content":"卡片上传完成：[点击查看]({{output}})","type":"literal"}},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"130632","name":"url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"output"}],"streamingOutput":false,"terminatePlan":"useAnswerContent"},"nodeMeta":{"description":"工作流的最终节点，用于返回工作流运行后的结果信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg","subTitle":"","title":"结束"}},"edges":null,"id":"900001","meta":{"position":{"x":2903.0182957330544,"y":284.9601641809544}},"type":"2"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"input"},{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"100001","name":"img","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"img"}],"llmParam":[{"input":{"type":"string","value":{"content":"0.7","rawMeta":{"type":1},"type":"literal"}},"name":"temperature"},{"input":{"type":"string","value":{"content":"0.7","rawMeta":{"type":1},"type":"literal"}},"name":"topP"},{"input":{"type":"string","value":{"content":"4096","rawMeta":{"type":1},"type":"literal"}},"name":"maxTokens"},{"input":{"type":"string","value":{"content":"2","rawMeta":{"type":1},"type":"literal"}},"name":"responseFormat"},{"input":{"type":"string","value":{"content":"豆包·视觉理解·Pro","rawMeta":{"type":1},"type":"literal"}},"name":"modleName"},{"input":{"type":"integer","value":{"content":"1829044260","rawMeta":{"type":2},"type":"literal"}},"name":"modelType"},{"input":{"type":"string","value":{"content":"balance","rawMeta":{"type":1},"type":"literal"}},"name":"generationDiversity"},{"input":{"type":"string","value":{"content":"用户输入内容：{{input}}\n输入图片：{{img}}","rawMeta":{"type":1},"type":"literal"}},"name":"prompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"enableChatHistory"},{"input":{"type":"integer","value":{"content":"3","rawMeta":{"type":2},"type":"literal"}},"name":"chatHistoryRound"},{"input":{"type":"string","value":{"content":"# 角色\n你是一位专业的营养大师，具备丰富的营养知识，能够精准分析各种菜品的营养结构。根据用户提供的图片和相关内容，你可以判断该菜品是否适合减肥人群，并准确计算出相应的摄入量。\n\n## 技能\n### 技能 1: 分析菜品营养结构\n1. 当用户提供菜品的图片和内容后，仔细观察图片并结合内容信息。\n2. 列出菜品包含的热量\n3. 运用专业知识分析菜品中包含的各类营养成分，如蛋白质、脂肪、碳水化合物、维生素、矿物质等的种类和大致比例。\n4. 以清晰、易懂的语言向用户阐述菜品的营养结构。\n\n### 技能 2: 判断是否适合减肥\n1. 根据对菜品营养结构的分析结果。\n2. 考虑减肥期间的营养需求和热量控制标准，判断该菜品是否适合减肥人群食用。\n3. 向用户说明判断依据和理由。\n\n### 技能 3: 计算摄入量\n1. 依据菜品的营养结构和常见食材的营养数据。\n2. 估算该菜品对于不同身体状况（如体重、运动量等因素）的用户在减肥期间适宜的摄入量。\n3. 告知用户具体的摄入量数值，并提醒其根据自身实际情况合理调整。\n\n## 限制:\n- 仅围绕用户提供的菜品图片和内容进行营养结构分析、减肥适用性判断以及摄入量计算，不回答与这些无关的问题。\n- 输出内容要条理清晰、简洁易懂，符合正常的语言表达习惯。\n- 分析和判断过程需基于科学的营养知识，计算结果要合理准确。 ","rawMeta":{"type":1},"type":"literal"}},"name":"systemPrompt"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"stableSystemPrompt"}],"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","subTitle":"大模型","title":"大模型"},"outputs":[{"name":"output","required":false,"type":"string"}],"version":"3"},"edges":null,"id":"119807","meta":{"position":{"x":-1763.1001290236834,"y":95.2878952692225}},"type":"3"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"119807","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"content"},{"input":{"type":"string","value":{"content":{"blockID":"164697","name":"Group1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"img"}],"llmParam":[{"input":{"type":"string","value":{"content":"default_val","rawMeta":{"type":1},"type":"literal"}},"name":"generationDiversity"},{"input":{"type":"float","value":{"content":"0.8","rawMeta":{"type":4},"type":"literal"}},"name":"temperature"},{"input":{"type":"integer","value":{"content":"16384","rawMeta":{"type":2},"type":"literal"}},"name":"maxTokens"},{"input":{"type":"integer","value":{"content":"2","rawMeta":{"type":2},"type":"literal"}},"name":"responseFormat"},{"input":{"type":"string","value":{"content":"DeepSeek-V3-0324","rawMeta":{"type":1},"type":"literal"}},"name":"modleName"},{"input":{"type":"integer","value":{"content":"1742989917","rawMeta":{"type":2},"type":"literal"}},"name":"modelType"},{"input":{"type":"string","value":{"content":"用户输入的菜品图片：{{img}}\n需要排版的内容：\n{{content}}","rawMeta":{"type":1},"type":"literal"}},"name":"prompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"enableChatHistory"},{"input":{"type":"integer","value":{"content":"3","rawMeta":{"type":2},"type":"literal"}},"name":"chatHistoryRound"},{"input":{"type":"string","value":{"content":"你是一位专业的HTML内容转换助手，擅长将文本内容重新组织为结构清晰、视觉吸引力强的HTML网页。\n\n当用户提供文本内容时，请执行以下操作：\n\n1. 分析文本内容，识别其中的：\n   - 标题和子标题\n   - 主要章节和段落\n   - 列表项和步骤\n   - 重点内容和关键词\n\n2. 创建一个完整的HTML文档，包含：\n   - 必要的DOCTYPE和HTML结构标签\n   - 适当的meta标签（包括charset和viewport）\n   - 内嵌CSS样式（采用现代化、响应式设计）\n   - 结构化的内容布局\n\n3. 应用以下设计原则：\n   - 使用卡片式布局突出重要内容\n   - 采用视觉层次结构区分不同重要级别的内容\n   - 通过颜色、字体粗细等方式强调关键点\n   - 添加适当的空白和分隔符提高可读性\n   - 使用图标或emoji增强视觉效果\n\n4. 确保输出的HTML：\n   - 语法正确，结构完整\n   - 具有响应式设计，适配不同设备\n   - 视觉美观，配色和谐\n   - 重点内容容易被用户识别\n\n请根据用户的具体内容类型（如食谱、教程、文章等）进行适当的调整，确保输出的HTML符合该类型内容的最佳展示方式。\n\n输出最终HTML代码时，请使用代码块格式并添加简短说明，解释设计思路和重点。","rawMeta":{"type":1},"type":"literal"}},"name":"systemPrompt"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"stableSystemPrompt"}],"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","subTitle":"大模型","title":"大模型_1"},"outputs":[{"name":"output","required":false,"type":"string"}],"version":"3"},"edges":null,"id":"156817","meta":{"position":{"x":996.8998709763166,"y":95.2878952692225}},"type":"3"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7486017394901581876","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"html2url","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7486017394901565492","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"上传html","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"网页内容","input":{},"name":"html","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"156817","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"html"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"上传html内容转成一个网页地址。","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/26dadd55165d442d92ed20b1fdfed00c~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745624821&x-signature=jFLwWO%2BTbSM5uL923NMMF7WAFWU%3D","subtitle":"上传html:html2url","title":"html2url"},"outputs":[{"name":"message","required":false,"type":"string"},{"name":"url","required":false,"type":"string"}]},"edges":null,"id":"130632","meta":{"position":{"x":1916.8998709763166,"y":109.2878952692225}},"type":"4"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"100001","name":"img","source":"block-output"},"type":"ref"}}},"operator":10}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器"}},"edges":null,"id":"181584","meta":{"position":{"x":-843.1001290236835,"y":108.33789526922251}},"type":"8"},{"blocks":[],"data":{"inputs":{"mergeGroups":[{"name":"Group1","variables":[{"assistType":2,"type":"string","value":{"content":{"blockID":"165070","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},{"assistType":2,"type":"string","value":{"content":{"blockID":"100001","name":"img","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合"},"outputs":[{"assistType":2,"name":"Group1","type":"string"}]},"edges":null,"id":"164697","meta":{"position":{"x":76.89987097631646,"y":120.33789526922251}},"type":"32"},{"blocks":[],"data":{"inputs":{"callTransferVoice":true,"chatHistoryWriting":"historyWrite","content":{"type":"string","value":{"content":"{{output}}","type":"literal"}},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"119807","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"output"}],"streamingOutput":true},"nodeMeta":{"description":"节点从“消息”更名为“输出”，支持中间过程的消息输出，支持流式和非流式两种方式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Output-v2.jpg","mainColor":"#5C62FF","subTitle":"输出","title":"输出"}},"edges":null,"id":"184050","meta":{"position":{"x":-1303.1001290236834,"y":121.33789526922251}},"type":"13"},{"blocks":[],"data":{"inputs":{"callTransferVoice":true,"chatHistoryWriting":"historyWrite","content":{"type":"string","value":{"content":"开始生成营养卡片，稍等1-3分钟。","type":"literal"}},"inputParameters":[],"streamingOutput":false},"nodeMeta":{"description":"节点从“消息”更名为“输出”，支持中间过程的消息输出，支持流式和非流式两种方式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Output-v2.jpg","mainColor":"#5C62FF","subTitle":"输出","title":"输出_1"}},"edges":null,"id":"120438","meta":{"position":{"x":536.8998709763165,"y":121.33789526922251}},"type":"13"},{"blocks":[],"data":{"inputs":{"callTransferVoice":true,"chatHistoryWriting":"historyWrite","content":{"type":"string","value":{"content":"卡片制作完成开始上传卡片。","type":"literal"}},"inputParameters":[],"streamingOutput":false},"nodeMeta":{"description":"节点从“消息”更名为“输出”，支持中间过程的消息输出，支持流式和非流式两种方式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Output-v2.jpg","mainColor":"#5C62FF","subTitle":"输出","title":"输出_2"}},"edges":null,"id":"122555","meta":{"position":{"x":1456.8998709763166,"y":121.33789526922251}},"type":"13"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7486447880522776611","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"gen_img","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7486447880522760227","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"html2img","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"高度，默认自适应","input":{},"name":"height","required":false,"type":"integer"},{"description":"html","input":{},"name":"html","required":true,"type":"string"},{"description":"默认800","input":{},"name":"width","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"156817","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"html"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"网页转图片","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/8d35caff19ff49f9a8c14ff2ba49bc40~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745724353&x-signature=mpjeQvGFF%2B1HQXEScnjpJPjlkK8%3D","subtitle":"html2img:gen_img","title":"gen_img"},"outputs":[{"name":"image_url","required":false,"type":"string"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"146494","meta":{"position":{"x":1916.8998709763166,"y":321.5421479711857}},"type":"4"},{"blocks":[],"data":{"inputs":{"callTransferVoice":true,"chatHistoryWriting":"historyWrite","content":{"type":"string","value":{"content":"![]({{output}})","type":"literal"}},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"146494","name":"image_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"output"}],"streamingOutput":false},"nodeMeta":{"description":"节点从“消息”更名为“输出”，支持中间过程的消息输出，支持流式和非流式两种方式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Output-v2.jpg","mainColor":"#5C62FF","subTitle":"输出","title":"预览图片"}},"edges":null,"id":"169946","meta":{"position":{"x":2409.9590833546854,"y":284.9601641809544}},"type":"13"},{"blocks":[],"data":{"inputs":{"apiParam":null,"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"input","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"text","right":{}}],"modelSetting":{"custom_ratio":{"height":682,"width":1024},"ddim_steps":25,"images_reference":{},"model":8,"ratio":0},"prompt":{"negative_prompt":"","prompt":"{{text}}"},"references":[],"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","title":"图像生成"},"outputs":[{"assistType":2,"input":{},"name":"data","required":false,"type":"string"},{"input":{},"name":"msg","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"165070","meta":{"position":{"x":-383.1001290236835,"y":218.85359468997726}},"type":"16"}],"versions":{"loop":"v2"}}}