{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531638953226829887","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"133111","sourcePortID":"","targetNodeID":"117273"},{"sourceNodeID":"117273","sourcePortID":"","targetNodeID":"123794"},{"sourceNodeID":"123794","sourcePortID":"","targetNodeID":"181802"}],"nodes":[{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7494245680807084082","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_table","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7494245680807051314","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"超级多维表格","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"table_id"},{"input":{"type":"string","value":{"content":"任务ID","rawMeta":{"type":1},"type":"literal"}},"name":"name"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"获取表格数据。","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/58988df7861f40bca7fcc630a927a451~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1752041859&x-signature=JOSHoP8soqAbF%2BPOr9ygKo5JVCg%3D","subtitle":"超级多维表格:get_table","title":"get_table"},"outputs":[{"name":"data","required":false,"schema":[{"name":"pagination","required":false,"schema":[{"name":"page","required":false,"type":"integer"},{"name":"page_size","required":false,"type":"integer"},{"name":"total_pages","required":false,"type":"integer"},{"name":"total_rows","required":false,"type":"integer"}],"type":"object"},{"name":"result","required":false,"schema":{"schema":[{"name":"datas","required":false,"schema":{"type":"string"},"type":"list"},{"name":"title","required":false,"type":"string"}],"type":"object"},"type":"list"},{"name":"table_name","required":false,"type":"string"},{"name":"web_url","required":false,"type":"string"}],"type":"object"},{"name":"success","required":false,"type":"boolean"}]},"edges":null,"id":"133111","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-338.2527355705539,"y":104.10076263786898}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"async function main({ params }: Args): Promise<Output> {\n    let done = true;\n    // 明确指定 video_urls 的类型为 string[]\n    const video_urls: string[] = [];\n\n    for (const item of params.data) {\n        // 安全访问嵌套属性\n        const videoUrl = item?.result?.video_url;\n        \n        if (typeof videoUrl === 'string' && videoUrl.trim() !== '') {\n            video_urls.push(videoUrl);\n        } else {\n            video_urls.push('');\n            done = false;\n            \n        }\n    }\n\n    return {\n        \"done\": done,\n        \n        video_urls\n    };\n}","functionID":"38woh8yor5ah2","inputParameters":[{"input":{"schema":{"schema":[{"name":"code","required":false,"type":"integer"},{"name":"msg","required":false,"type":"string"},{"name":"result","required":false,"schema":[{"name":"task_id","required":false,"type":"string"},{"name":"updated_at","required":false,"type":"string"},{"name":"user_id","required":false,"type":"integer"},{"name":"duration","required":false,"type":"integer"},{"name":"hs_token","required":false,"type":"string"},{"name":"id","required":false,"type":"string"},{"name":"prompt_tokens","required":false,"type":"integer"},{"name":"status","required":false,"type":"string"},{"name":"completion_tokens","required":false,"type":"integer"},{"name":"created_at","required":false,"type":"string"},{"name":"image_url","required":false,"type":"string"},{"name":"prompt","required":false,"type":"string"},{"name":"video_url","required":false,"type":"string"}],"type":"object"},{"name":"tip_url","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"117273","name":"outputList","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"data","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"代码"},"outputs":[{"input":{},"name":"done","required":false,"type":"boolean"},{"input":{},"name":"video_urls","required":false,"schema":{"type":"string"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"123794","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":581.7472644294461,"y":104.10076263786898}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7494245680807100466","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"save_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7494245680807051314","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"超级多维表格","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"123794","name":"video_urls","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"datas"},{"input":{"type":"string","value":{"content":"视频","rawMeta":{"type":1},"type":"literal"}},"name":"name"},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"table_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"保存列表数据。","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/58988df7861f40bca7fcc630a927a451~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1752041859&x-signature=JOSHoP8soqAbF%2BPOr9ygKo5JVCg%3D","subtitle":"超级多维表格:save_list","title":"save_list"},"outputs":[{"name":"data","required":false,"schema":[{"name":"table_id","required":false,"type":"string"},{"name":"total_rows","required":false,"type":"integer"},{"name":"updated_rows","required":false,"schema":{"type":"integer"},"type":"list"},{"name":"added_rows","required":false,"schema":{"type":"string"},"type":"list"},{"name":"message","required":false,"type":"string"}],"type":"object"},{"name":"message","required":false,"type":"string"},{"name":"success","required":false,"type":"boolean"},{"name":"web_url","required":false,"type":"string"}]},"edges":null,"id":"181802","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1041.7472644294462,"y":104.10076263786898}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7509780733309894665","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"task_info_v2","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7504579163953774592","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"豆包图生视频","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"batch":{"batchEnable":true,"batchSize":100,"concurrentSize":10,"inputLists":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"133111","name":"data.result.datas","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"item1"}]},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"117273","name":"item1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"task_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"获取任务信息","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/1609ed4d3e0d45a9afb7c08c9ddd65b0~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1752044264&x-signature=rGF2zIIIn%2BBu3H4UX5Gt0PT%2Bgww%3D","subtitle":"豆包图生视频:task_info_v2","title":"task_info_v2"},"outputs":[{"name":"outputList","schema":{"schema":[{"name":"code","required":false,"type":"integer"},{"name":"msg","required":false,"type":"string"},{"name":"result","required":false,"schema":[{"name":"task_id","required":false,"type":"string"},{"name":"updated_at","required":false,"type":"string"},{"name":"user_id","required":false,"type":"integer"},{"name":"duration","required":false,"type":"integer"},{"name":"hs_token","required":false,"type":"string"},{"name":"id","required":false,"type":"string"},{"name":"prompt_tokens","required":false,"type":"integer"},{"name":"status","required":false,"type":"string"},{"name":"completion_tokens","required":false,"type":"integer"},{"name":"created_at","required":false,"type":"string"},{"name":"image_url","required":false,"type":"string"},{"name":"prompt","required":false,"type":"string"},{"name":"video_url","required":false,"type":"string"}],"type":"object"},{"name":"tip_url","required":false,"type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"117273","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":121.74726442944609,"y":104.10076263786898}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}}],"versions":{"loop":"v2"}}}