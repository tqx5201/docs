{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531334424152178723","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"100001","sourcePortID":"","targetNodeID":"158963"},{"sourceNodeID":"186296","sourcePortID":"","targetNodeID":"900001"},{"sourceNodeID":"111445","sourcePortID":"","targetNodeID":"900001"},{"sourceNodeID":"198633","sourcePortID":"true","targetNodeID":"169003"},{"sourceNodeID":"169003","sourcePortID":"","targetNodeID":"182325"},{"sourceNodeID":"152653","sourcePortID":"","targetNodeID":"160311"},{"sourceNodeID":"160311","sourcePortID":"","targetNodeID":"198633"},{"sourceNodeID":"158963","sourcePortID":"","targetNodeID":"152653"},{"sourceNodeID":"198728","sourcePortID":"","targetNodeID":"186296"},{"sourceNodeID":"198633","sourcePortID":"false","targetNodeID":"617035"},{"sourceNodeID":"617035","sourcePortID":"","targetNodeID":"198728"},{"sourceNodeID":"182325","sourcePortID":"batch-output","targetNodeID":"289556"},{"sourceNodeID":"289556","sourcePortID":"","targetNodeID":"105492"},{"sourceNodeID":"105492","sourcePortID":"","targetNodeID":"755643"},{"sourceNodeID":"755643","sourcePortID":"false","targetNodeID":"728616"},{"sourceNodeID":"755643","sourcePortID":"true","targetNodeID":"111445"},{"sourceNodeID":"728616","sourcePortID":"","targetNodeID":"198728"}],"nodes":[{"blocks":[],"data":{"nodeMeta":{"description":"工作流的起始节点，用于设定启动工作流需要的信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg","subTitle":"","title":"开始"},"outputs":[{"name":"share_link","required":true,"type":"string"},{"name":"app_token","required":true,"type":"string"}],"trigger_parameters":[{"name":"share_link","required":true,"type":"string"},{"name":"app_token","required":true,"type":"string"}]},"edges":null,"id":"100001","meta":{"position":{"x":-3579.490257651825,"y":450.73611486267373}},"type":"1"},{"blocks":[],"data":{"inputs":{"content":{"type":"string","value":{"content":"{{output}}","type":"literal"}},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"111445","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"output"}],"streamingOutput":false,"terminatePlan":"useAnswerContent"},"nodeMeta":{"description":"工作流的最终节点，用于返回工作流运行后的结果信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg","subTitle":"","title":"结束"}},"edges":null,"id":"900001","meta":{"position":{"x":3669.4503616386487,"y":471.8725386734985}},"type":"2"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426237296480895015","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_notes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426237296480878631","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"小红书笔记提取","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"share_link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"获取小红书笔记信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"小红书笔记提取:get_notes","title":"get_notes"},"outputs":[{"description":"小红书笔记内容","name":"content","required":false,"type":"string"},{"description":"小红书图组","name":"image_urls","required":false,"schema":{"type":"string"},"type":"list"},{"description":"小红书笔记标题","name":"title","required":false,"type":"string"}]},"edges":null,"id":"169003","meta":{"position":{"x":-1232.76752541694,"y":544.4361148626737}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7395047759797321755","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_table","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7395047759797272603","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"飞书多维表格","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"},{"input":{"type":"integer","value":{"content":0,"type":"literal"}},"name":"pluginAuthMode"}],"inputDefs":[{"description":"多维表格的唯一标识符，支持输入文档 url。","input":{},"name":"app_token","required":true,"type":"string"},{"description":"默认表格视图的名称，不填则默认为表格。","input":{},"name":"default_view_name","required":false,"type":"string"},{"description":"数据表的初始字段列表，1. 如果 default_view_name 字段和 fields 字段都不填写，将会创建一个仅包含索引列的空数据表。2. 如果指定了 fields 字段，将会创建一个包含初始字段的数据表且默认第一个字段为索引列。","input":{},"name":"fields","required":false,"schema":{"schema":[{"description":"字段类型，可选值包括1：多行文本、2：数字、3：单选、4：多选、5：日期、7：复选框、11：人员、13：电话号码、15：超链接、17：附件、18：单向关联、20：公式、21：双向关联、22：地理位置、23：群组、1001：创建时间、1002：最后更新时间、1003：创建人、1004：修改人、1005：自动编号","input":{},"name":"type","required":false,"type":"integer"},{"description":"字段名","input":{},"name":"field_name","required":false,"type":"string"}],"type":"object"},"type":"list"},{"description":"数据表名称","input":{},"name":"name","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"app_token","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"app_token"},{"input":{"type":"string","value":{"content":{"blockID":"152653","name":"table_name","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"name"},{"input":{"schema":{"schema":[{"name":"field_name","type":"string"},{"name":"type","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"152653","name":"fields","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"fields"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"创建多维表格数据表","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/271da70954ec4c0ebfdb4635ac72c8e4~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745153609&x-signature=ERdnP6V8YLX97x80p1ebFEOovoI%3D","subtitle":"飞书多维表格:create_table","title":"create_table"},"outputs":[{"description":"错误码，非 0 表示失败。","name":"code","required":false,"type":"float"},{"description":"返回结果","name":"data","required":false,"schema":[{"description":"默认表格视图的 id，该字段仅在请求参数中填写了default_view_name 或 fields 才会返回。","name":"default_view_id","required":false,"type":"string"},{"description":"数据表初始字段的 id 列表，该字段仅在请求参数中填写了 fields 才会返回。例如： [\"fldUsUrIbN\"]","name":"field_id_list","required":false,"schema":{"type":"string"},"type":"list"},{"description":"多维表格数据表的唯一标识符","name":"table_id","required":false,"type":"string"}],"type":"object"},{"description":"链路追踪 id","name":"log_id","required":false,"type":"string"},{"description":"错误描述","name":"msg","required":false,"type":"string"}]},"edges":null,"id":"160311","meta":{"position":{"x":-2152.7675254169403,"y":437.73611486267373}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"/**\n * @author wx: shuidi_tech\n */\n// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    return {\n        table_name: `W0018-${params.dateTime}`,\n        fields: [\n            {\n                field_name: '图片链接',\n                type: 1\n            },\n            {\n                field_name: '图片中文字',\n                type: 1\n            },\n        ],\n    }\n}","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"158963","name":"dateTime","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"dateTime"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"转为多维表格所需格式"},"outputs":[{"name":"fields","required":false,"schema":{"schema":[{"name":"field_name","type":"string"},{"name":"type","type":"float"}],"type":"object"},"type":"list"},{"name":"table_name","required":false,"type":"string"}]},"edges":null,"id":"152653","meta":{"position":{"x":-2612.7675254169403,"y":437.73611486267373}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7484140117972631586","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"datetime","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7484140117972615202","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"日期时间","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"如果你想指定日期和时间，请填入当前日期和时间，否则就是当前的日期时间","input":{},"name":"datetime","required":false,"type":"string"}],"inputParameters":[],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"获取各种格式的日期和时间","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/10ff1be4f2d94bb0a97c0a002b84d10e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745155726&x-signature=nDls0ezWNuK0YS%2B6gITIAe8%2BwhQ%3D","subtitle":"日期时间:datetime","title":"datetime"},"outputs":[{"description":"时间戳","name":"timestamp","required":true,"type":"integer"},{"description":"年","name":"year","required":true,"type":"float"},{"description":"日","name":"date","required":true,"type":"float"},{"description":"标准时间格式","name":"dateTime","required":true,"type":"string"},{"description":"毫秒","name":"millisecond","required":true,"type":"float"},{"description":"分","name":"minute","required":true,"type":"float"},{"description":"提示","name":"prompt","required":true,"type":"string"},{"description":"秒","name":"second","required":true,"type":"float"},{"description":"仅时间","name":"timeOnly","required":true,"type":"string"},{"description":"仅日期","name":"dateOnly","required":true,"type":"string"},{"description":"文件名友好格式","name":"filenameFriendly","required":true,"type":"string"},{"description":"时","name":"hour","required":true,"type":"float"},{"description":"月","name":"month","required":true,"type":"float"}]},"edges":null,"id":"158963","meta":{"position":{"x":-3072.7675254169403,"y":437.73611486267373}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7483526971092516875","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"throwError","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7483526971092500491","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"抛出错误","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"198728","name":"error_message","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"error_message"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"抛出错误","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/d059b0cf678d495f90201cf6f030256c~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747288475&x-signature=BlrQbwLbZAiD4Qm%2BrZXjtUpDgH4%3D","subtitle":"抛出错误:throwError","title":"throwError"},"outputs":[{"description":"错误信息","name":"error_message","required":true,"type":"string"},{"description":"提示","name":"prompt","required":true,"type":"string"}]},"edges":null,"id":"186296","meta":{"position":{"x":3107.2324745830597,"y":331.0361148626737}},"type":"4"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"float","value":{"content":{"blockID":"160311","name":"code","source":"block-output"},"type":"ref"}}},"operator":1,"right":{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}}}}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器_3"}},"edges":null,"id":"198633","meta":{"position":{"x":-1692.76752541694,"y":424.73611486267373}},"type":"8"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"多维表格创建数据表失败，请联系客服: shuidi_tech ；；；错误信息：[{{String2}}] {{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"160311","name":"msg","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String1"},{"input":{"type":"float","value":{"content":{"blockID":"160311","name":"code","source":"block-output"},"rawMeta":{"type":4},"type":"ref"}},"name":"String2"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理_2"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"617035","meta":{"position":{"x":2187.2324745830597,"y":224.33611486267372}},"type":"15"},{"blocks":[],"data":{"inputs":{"code":"/**\n * @author wx: shuidi_tech\n */\n// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input;\n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    return {\n        records: params.content.map(item => ({\n            fields: JSON.stringify({\n                图片链接: item.img_url,\n                图片中文字: item.img_text\n            })\n        }))\n    };\n}\n","inputParameters":[{"input":{"schema":{"schema":[{"name":"img_url","type":"string"},{"name":"img_text","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"182325","name":"output","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"content"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"转为多维表格所需格式_1"},"outputs":[{"name":"records","required":false,"schema":{"schema":[{"name":"fields","type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"289556","meta":{"position":{"x":807.2324745830599,"y":544.4361148626737}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7395047759797288987","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_records","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7395047759797272603","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"飞书多维表格","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"},{"input":{"type":"integer","value":{"content":0,"type":"literal"}},"name":"pluginAuthMode"}],"inputDefs":[{"description":"多维表格数据表的名称","input":{},"name":"table_name","required":false,"type":"string"},{"defaultValue":"open_id","description":"用户 ID 类型，可选值有 open_id、union_id、user_id，默认值为 open_id。, default value is open_id","input":{},"name":"user_id_type","required":false,"type":"string"},{"description":"多维表格的唯一标识符，支持输入文档 url。","input":{},"name":"app_token","required":true,"type":"string"},{"description":"多维表格数据表的唯一标识符","input":{},"name":"table_id","required":false,"type":"string"},{"description":"本次请求将要新增的记录列表，格式为：[{\"fields\":{\"文本\":\"文本内容\",\"单选\":\"选项 1\",\"日期\":1674206443000}}]","input":{},"name":"records","required":true,"schema":{"schema":[{"description":"数据表的字段，即数据表的列，格式为 json 字符串。例如：{\"文本\":\"文本内容\",\"单选\":\"选项 1\",\"日期\":1674206443000}","input":{},"name":"fields","required":true,"type":"string"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"app_token","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"app_token"},{"input":{"schema":{"schema":[{"name":"fields","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"289556","name":"records","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"records"},{"input":{"type":"string","value":{"content":{"blockID":"160311","name":"data.table_id","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"table_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"在多维表格数据表中新增多条记录，单次调用最多新增 500 条记录。","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/271da70954ec4c0ebfdb4635ac72c8e4~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745153701&x-signature=hzrchor6eBL562ZAKhiPFy3JZV8%3D","subtitle":"飞书多维表格:add_records","title":"add_records"},"outputs":[{"description":"错误描述","name":"msg","required":false,"type":"string"},{"description":"错误码，非 0 表示失败。","name":"code","required":false,"type":"float"},{"description":"返回结果","name":"data","required":false,"schema":[{"description":"本次请求新增的记录列表","name":"records","required":false,"schema":{"schema":[{"description":"数据表的字段，即数据表的列，格式为 json 字符串。","name":"fields","required":false,"type":"string"},{"description":"一条记录的唯一标识 id","name":"record_id","required":false,"type":"string"}],"type":"object"},"type":"list"}],"type":"object"},{"description":"链路追踪 id","name":"log_id","required":false,"type":"string"}]},"edges":null,"id":"105492","meta":{"position":{"x":1267.23247458306,"y":544.4361148626737}},"type":"4"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"float","value":{"content":{"blockID":"105492","name":"code","source":"block-output"},"type":"ref"}}},"operator":1,"right":{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}}}}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器_4"}},"edges":null,"id":"755643","meta":{"position":{"x":1727.23247458306,"y":531.4361148626737}},"type":"8"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"多维表格数据表中添加数据失败，请联系客服: shuidi_tech ；；；错误信息：[{{String2}}] {{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"105492","name":"msg","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String1"},{"input":{"type":"float","value":{"content":{"blockID":"105492","name":"code","source":"block-output"},"rawMeta":{"type":4},"type":"ref"}},"name":"String2"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理_3"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"728616","meta":{"position":{"x":2187.2324745830597,"y":437.73611486267373}},"type":"15"},{"blocks":[],"data":{"inputs":{"mergeGroups":[{"name":"error_message","variables":[{"type":"string","value":{"content":{"blockID":"617035","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},{"type":"string","value":{"content":{"blockID":"728616","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合"},"outputs":[{"name":"error_message","type":"string"}]},"edges":null,"id":"198728","meta":{"position":{"x":2647.2324745830597,"y":330.0361148626737}},"type":"32"},{"blocks":[{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7454457295544778786","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"general_ocr","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7454457295544762402","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"OCR火山版","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"182325","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"【OCR火山版】是一个强大的光学字符识别（OCR）插件，提供两种主要工具：常规OCR工具和多语言OCR工具。该插件能够从图像或PDF文档中提取文本信息，支持多种语言，适用于各种应用场景。","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/2d2f6acf3d7142b68334cebbd6378597~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747099203&x-signature=p8XQLLYjaz7LbcZrdDY3JfXxJFw%3D","subtitle":"OCR火山版:general_ocr","title":"general_ocr"},"outputs":[{"description":"错误信息","name":"msg","required":false,"type":"string"},{"description":"错误码","name":"code","required":false,"type":"float"},{"description":"识别结果","name":"data","required":false,"schema":[{"description":"文本行位置\t","name":"line_rects","required":false,"schema":{"schema":[{"description":"宽","name":"height","required":false,"type":"float"},{"description":"长","name":"width","required":false,"type":"float"},{"description":"x轴坐标","name":"x","required":false,"type":"float"},{"description":"y轴坐标","name":"y","required":false,"type":"float"}],"type":"object"},"type":"list"},{"description":"识别结果\t","name":"line_texts","required":false,"schema":{"type":"string"},"type":"list"}],"type":"object"},{"description":"日志id","name":"log_id","required":false,"type":"string"}]},"edges":null,"id":"143220","meta":{"position":{"x":180,"y":19}},"type":"4"},{"blocks":[],"data":{"inputs":{"mergeGroups":[{"name":"img_url","variables":[{"type":"string","value":{"content":{"blockID":"182325","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]},{"name":"img_text","variables":[{"type":"string","value":{"content":{"blockID":"110057","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合_1"},"outputs":[{"name":"img_url","type":"string"},{"name":"img_text","type":"string"}]},"edges":null,"id":"137973","meta":{"position":{"x":1100,"y":0}},"type":"32"},{"blocks":[],"data":{"inputs":{"code":"/**\n * @author wx: shuidi_tech\n */\n// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    return {\n        output: params.input.join('\\n')\n    }\n}","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"143220","name":"data.line_texts","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"input"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码"},"outputs":[{"name":"output","required":false,"type":"string"}]},"edges":null,"id":"110057","meta":{"position":{"x":640,"y":31}},"type":"5"}],"data":{"inputs":{"batchSize":{"type":"integer","value":{"content":"100","type":"literal"}},"concurrentSize":{"type":"integer","value":{"content":"10","type":"literal"}},"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"169003","name":"image_urls","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"input"}]},"nodeMeta":{"description":"通过设定批量运行次数和逻辑，运行批处理体内的任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg","mainColor":"#00B2B2","subTitle":"批处理","title":"批处理"},"outputs":[{"input":{"schema":{"schema":[{"name":"img_url","type":"string"},{"name":"img_text","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"137973","name":"","source":"block-output"},"rawMeta":{"type":6},"type":"ref"}},"name":"output"}]},"edges":[{"sourceNodeID":"182325","sourcePortID":"batch-function-inline-output","targetNodeID":"143220"},{"sourceNodeID":"143220","sourcePortID":"","targetNodeID":"110057"},{"sourceNodeID":"110057","sourcePortID":"","targetNodeID":"137973"},{"sourceNodeID":"137973","sourcePortID":"","targetNodeID":"182325","targetPortID":"batch-function-inline-input"}],"id":"182325","meta":{"canvasPosition":{"x":-852.7675254169401,"y":837.8361148626738},"position":{"x":-212.76752541694015,"y":544.4361148626737}},"type":"28"},{"blocks":[],"data":{"inputs":{"code":"/**\n * @author wx: shuidi_tech\n */\n// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    return {\n        output: `${params.app_token.split('?')[0]}?table=${params.table_id}`\n    };\n}","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"app_token","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"app_token"},{"input":{"type":"string","value":{"content":{"blockID":"160311","name":"data.table_id","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"table_id"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_1"},"outputs":[{"name":"output","required":false,"type":"string"}]},"edges":null,"id":"111445","meta":{"position":{"x":3107.2324745830597,"y":602.7861148626737}},"type":"5"}],"versions":{"batch":"v2","loop":"v2"}}}