{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531684366923366440","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"134481","sourcePortID":"","targetNodeID":"191539"},{"sourceNodeID":"191539","sourcePortID":"","targetNodeID":"162860"},{"sourceNodeID":"162860","sourcePortID":"","targetNodeID":"116495"},{"sourceNodeID":"116495","sourcePortID":"","targetNodeID":"1611172"},{"sourceNodeID":"1219276","sourcePortID":"","targetNodeID":"130518"},{"sourceNodeID":"130518","sourcePortID":"loop-output","targetNodeID":"137494"},{"sourceNodeID":"1611172","sourcePortID":"","targetNodeID":"136720"},{"sourceNodeID":"136720","sourcePortID":"","targetNodeID":"146360"},{"sourceNodeID":"146360","sourcePortID":"","targetNodeID":"113974"},{"sourceNodeID":"113974","sourcePortID":"","targetNodeID":"167516"},{"sourceNodeID":"122598","sourcePortID":"","targetNodeID":"1844526"},{"sourceNodeID":"1844526","sourcePortID":"","targetNodeID":"118941"},{"sourceNodeID":"161447","sourcePortID":"","targetNodeID":"1256633"},{"sourceNodeID":"1256633","sourcePortID":"","targetNodeID":"1906869"},{"sourceNodeID":"1906869","sourcePortID":"","targetNodeID":"134481"},{"sourceNodeID":"118941","sourcePortID":"","targetNodeID":"161447"},{"sourceNodeID":"167516","sourcePortID":"","targetNodeID":"176256"},{"sourceNodeID":"176256","sourcePortID":"","targetNodeID":"163142"},{"sourceNodeID":"163142","sourcePortID":"","targetNodeID":"200446"},{"sourceNodeID":"200446","sourcePortID":"","targetNodeID":"1219276"}],"nodes":[{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684515874","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"integer","value":{"content":1080,"rawMeta":{"type":2},"type":"literal"}},"name":"height"},{"input":{"type":"integer","value":{"content":1920,"rawMeta":{"type":2},"type":"literal"}},"name":"width"}],"settingOnError":{"processType":1,"retryTimes":1,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/fde2e11e85fa4c759b5754d267b148ba~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749543482&x-signature=uEJYC6tru7QKpNGzZPyMs9zEELA%3D","subtitle":"视频合成_剪映小助手:create_draft","title":"create_draft"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"tip_url","required":false,"type":"string"}]},"edges":null,"id":"191539","meta":{"position":{"x":-187.9621945890524,"y":-445.87301865671094}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684499490","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_videos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"191539","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"134481","name":"bg_video_data","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"video_infos"},{"input":{"type":"float","value":{"content":0.5,"rawMeta":{"type":4},"type":"literal"}},"name":"alpha"}],"settingOnError":{"processType":1,"retryTimes":1,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/fde2e11e85fa4c759b5754d267b148ba~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749543519&x-signature=OfoYe1APHqRDiWYhyrNS%2B54SR1c%3D","subtitle":"视频合成_剪映小助手:add_videos","title":"add_videos（背景视频）"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":true,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"video_ids","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"162860","meta":{"position":{"x":1624.5457298896918,"y":-669.9424584215398}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"134481","name":"bg_audio_data","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"191539","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/fde2e11e85fa4c759b5754d267b148ba~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749543553&x-signature=lXd%2FRiLkG0uQ0psQ6gJxLiXW7gY%3D","subtitle":"视频合成_剪映小助手:add_audios","title":"add_audios_背景音乐"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"},{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"116495","meta":{"position":{"x":1624.5457298896918,"y":-428.3290219563468}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"130518","name":"input.texts","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"130518","name":"input.timelines","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"string","value":{"content":{"blockID":"105844","name":"in_animation_str","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"in_animation"},{"input":{"type":"string","value":{"content":"ff0303","rawMeta":{"type":1},"type":"literal"}},"name":"keyword_color"},{"input":{"type":"integer","value":{"content":18,"rawMeta":{"type":2},"type":"literal"}},"name":"keyword_font_size"},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"130518","name":"input.keywords","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"keywords"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749543852&x-signature=iXInmRHwnkLhMjBuDonQTl6a%2B6Q%3D","subtitle":"剪映小助手数据生成器:caption_infos","title":"caption_infos"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"195958","meta":{"position":{"x":-614.0223802356718,"y":123.9619838280262}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"195958","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"191539","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"000000","rawMeta":{"type":1},"type":"literal"}},"name":"border_color"},{"input":{"type":"string","value":{"content":{"blockID":"105844","name":"style.fontFamily","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"font"},{"input":{"type":"integer","value":{"content":{"blockID":"105844","name":"style.fontSize","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"font_size"},{"input":{"type":"string","value":{"content":"ffffff","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":{"blockID":"130518","name":"input.text_positions.x","source":"block-output"},"rawMeta":{"type":4},"type":"ref"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":{"blockID":"130518","name":"input.text_positions.y","source":"block-output"},"rawMeta":{"type":4},"type":"ref"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/fde2e11e85fa4c759b5754d267b148ba~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749543863&x-signature=WiixeM%2BpBMwVV4qIkVweWKkpJDo%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"add_captions"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"163288","meta":{"position":{"x":-36.80045285535772,"y":123.9619838280262}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"\nasync function main({ params }: Args): Promise<Output> {\n\n    const in_animations = params.input;\n\n\n    const style = getRandomStyle();\n\n    // 构建输出对象\n    const ret = {\n        \"in_animation_str\": in_animations.join('|'),\n        \"style\": style\n    };\n\n    return ret;\n}\n\nfunction getRandomStyle() {\n    const fonts = ['挥墨体'];\n    const fontSizes = [16, 16, 16, 16];\n    \n    return {\n      fontFamily: fonts[Math.floor(Math.random() * fonts.length)].replace(/(\\s+)/, \"'$1'\"),\n      fontSize: fontSizes[Math.floor(Math.random() * fontSizes.length)]\n    };\n  }","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"130518","name":"input.text_in_animation","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"input"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_1"},"outputs":[{"name":"in_animation_str","required":false,"type":"string"},{"name":"style","required":false,"schema":[{"name":"fontFamily","type":"string"},{"name":"fontSize","type":"integer"}],"type":"object"}]},"edges":null,"id":"105844","meta":{"position":{"x":-1093.5094008185624,"y":135.9619838280262}},"type":"5"}],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"schema":[{"name":"text_positions","schema":[{"name":"x","type":"float"},{"name":"y","type":"float"}],"type":"object"},{"name":"text_in_animation","schema":{"type":"string"},"type":"list"},{"name":"texts","schema":{"type":"string"},"type":"list"},{"name":"timelines","schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list"},{"name":"keywords","schema":{"type":"string"},"type":"list"}],"type":"object"},"type":"list","value":{"content":{"blockID":"134481","name":"result","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"input"}],"loopCount":{"type":"integer","value":{"content":"10","type":"literal"}},"loopType":"array","variableParameters":[]},"nodeMeta":{"description":"用于通过设定循环次数和逻辑，重复执行一系列任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","mainColor":"#00B2B2","subTitle":"循环","title":"循环"},"outputs":[]},"edges":[{"sourceNodeID":"105844","sourcePortID":"","targetNodeID":"195958"},{"sourceNodeID":"195958","sourcePortID":"","targetNodeID":"163288"},{"sourceNodeID":"163288","sourcePortID":"","targetNodeID":"130518","targetPortID":"loop-function-inline-input"},{"sourceNodeID":"130518","sourcePortID":"loop-function-inline-output","targetNodeID":"105844"}],"id":"130518","meta":{"canvasPosition":{"x":3345.8150587317296,"y":411.7849100449908},"position":{"x":2766.61753496641,"y":-264.05448165076916}},"type":"21","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684548642","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"save_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"191539","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/fde2e11e85fa4c759b5754d267b148ba~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749544674&x-signature=sXTMc4tOR8pEn6tX2WCiXVyS0Pc%3D","subtitle":"视频合成_剪映小助手:save_draft","title":"save_draft"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"137494","meta":{"position":{"x":3330.6418129057774,"y":-263.05448165076916}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"134481","name":"initialAudioData","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"191539","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/fde2e11e85fa4c759b5754d267b148ba~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749543553&x-signature=lXd%2FRiLkG0uQ0psQ6gJxLiXW7gY%3D","subtitle":"视频合成_剪映小助手:add_audios","title":"add_audios_口播文案"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"},{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"1611172","meta":{"position":{"x":1631.716154341258,"y":-159.28330928614122}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109802306060299","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"str_to_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":"大雪纷飞","rawMeta":{"type":1},"type":"literal"}},"name":"obj"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"字符转列表","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748329571&x-signature=b2nOQe5vR3Kjq%2BDei%2F2op4SpyDA%3D","subtitle":"剪映小助手数据生成器:str_to_list","title":"特效列表化"},"outputs":[{"name":"infos","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"136720","meta":{"position":{"x":1624.5457298896918,"y":123.85422219233448}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476312785018765321","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"effect_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"136720","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"effects"},{"input":{"schema":{"schema":[],"type":"object"},"type":"list","value":{"content":{"blockID":"134481","name":"bg_big_text_timeline","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据时间线关联特效","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748329276&x-signature=T7A4qerb9HZd%2BRqzBWsNlCHD3es%3D","subtitle":"剪映小助手数据生成器:effect_infos","title":"输入前特效格式整理"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"146360","meta":{"position":{"x":1624.5457298896918,"y":407.54436397878686}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7466630948491231268","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_effects","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"191539","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"146360","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"effect_infos"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"添加特效","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/58f8745c794f452a9b0c572c9a4b3e3a~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748329250&x-signature=WIlC%2BSJlR%2Fo6GMEbhrUlg3CKcj8%3D","subtitle":"视频合成_剪映小助手:add_effects","title":"add_effects（添加特效）"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"effect_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"113974","meta":{"position":{"x":1624.5457298896918,"y":619.7468938730173}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"input"}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","rawMeta":{"type":4},"type":"literal"}},"name":"temperature"},{"input":{"type":"integer","value":{"content":"4096","rawMeta":{"type":2},"type":"literal"}},"name":"maxTokens"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"spCurrentTime"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"spAntiLeak"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"prefixCache"},{"input":{"type":"integer","value":{"content":"2","rawMeta":{"type":2},"type":"literal"}},"name":"responseFormat"},{"input":{"type":"string","value":{"content":"豆包·1.5·Pro·32k","rawMeta":{"type":1},"type":"literal"}},"name":"modleName"},{"input":{"type":"integer","value":{"content":"1737521813","rawMeta":{"type":2},"type":"literal"}},"name":"modelType"},{"input":{"type":"string","value":{"content":"balance","rawMeta":{"type":1},"type":"literal"}},"name":"generationDiversity"},{"input":{"type":"string","value":{"content":"{{input}}","rawMeta":{"type":1},"type":"literal"}},"name":"prompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"enableChatHistory"},{"input":{"type":"integer","value":{"content":"3","rawMeta":{"type":2},"type":"literal"}},"name":"chatHistoryRound"},{"input":{"type":"string","value":{"content":"# 角色\n你是一位擅长创作情感文案的高手，专注于成年人在关系、婚姻、自我、孤独、成长等方面复杂情绪的表达。你的写作风格深刻且克制，语言富有节奏感，追求内容的真实、共鸣与余韵，摒弃情绪煽动或口号式的表达。\n\n## 技能\n### 技能 1: 生成情感文案\n1. 当用户提供主题后，按照要求文风进行创作。\n2. 创作需遵循以下风格：\n    - **写作立场**：\n        - 写作者角色是一个内心敏感、诚实且冷静的人。\n        - 语气像在深夜与朋友促膝长谈，带有沉思与自我拉扯的感觉。\n        - 所有表达皆从“亲历者”视角出发，而非“旁观者叙述”。\n        - 杜绝高位劝导式写法与泛泛而谈。\n    - **语言风格**：\n        - 文风安静、内敛、节制，同时情绪饱满。\n        - 用词考究，具备书面质感，不使用“风雨兼程”“一起白头”“走完一生”等泛滥语句。\n        - 拒绝使用“你值得”“你一定要”“真正的××是……”等公众号话术。\n        - 可运用贴近日常细节的隐喻，如“那盏没关的灯”“沉默像湿气爬满心墙”。\n    - **节奏与句式**：\n        - 巧妙运用短句与长句交错，营造真实的思考语气。\n        - 多使用反问句、破句、情绪中断句，形成自然的节奏。\n        - 适度使用生活意象作为情绪锚，如饭菜、回家路、深夜灯光、沉默、短视频等。\n        - 段落开头不使用大词堆砌，从具体经验或真实疑问切入。\n    - **结构安排**：\n        - 文案结构为2至3段，每段80 - 100字，总字数不超过300字。\n        - 第一段：提出主题与内心疑问，营造情绪张力。\n        - 第二段：融入具体生活细节，引发沉浸式共鸣，推动情绪深化。\n        - 第三段：由深入沉入走向内敛升华，结尾带有留白感，不总结、不讲大道理。\n        - 每一段包含“情绪 + 细节 + 顿悟/困惑”三元素。\n    - **目标情绪密度**：\n        - 情绪真实但不过于饱和。\n        - 允许有“无解感”“不完美”“温柔的悲观”。\n        - 让读者产生“这像我自己在想的”感觉，而非“这是写给别人的”。\n    - **生成要求**：\n        - 输出围绕用户给定的“主题词”写作。\n        - 用“今日主题，XXX”作为开头。\n        - 内容模仿给定风格写作，严禁生成励志体、鸡汤腔、公众号文风。\n\n### 回复示例\n今日主题，结婚。婚姻或许是你这一生唯一一次亲手选择家人的机会。你想与怎样的人共度余生，就该去寻找怎样的人，而非将就着试试看。人生哪有那么多试错的机会？终有一天你会懂得，物质条件固然重要，但更重要的是一个人的责任感与担当，以及他掌控情绪的能力。\n婚姻不该是彼此的拖累，而应是疲惫时的相互扶持。是遇到难题时有人能与你细细商量，是下班推开门桌上摆着热腾腾的饭菜，是生活压得你喘不过气时却有力的拥抱，是在外受尽委屈后家里永远亮着的那盏灯，而非永无休止的争吵，更非所有琐事都压在你一人肩头。\n婚姻的意义或许就在于明知前路仍有风雨，但你们坚信能携手跨过每一道坎。当全世界都质疑你时，唯独他会说我懂你。所以选对伴侣太重要了，人生的另一半若是选错，往后每一步都会是煎熬。别怕来得晚，但一定要等到那个对的人，因为他会是你后半生的光照亮所有暗淡的时光。。\n\n### 示例结束\n\n## 限制:\n- 仅围绕用户提供的主题按照要求文风进行创作，不回答与文案创作无关的话题。\n- 输出内容需符合上述回复示例格式，不得偏离框架要求。 ","rawMeta":{"type":1},"type":"literal"}},"name":"systemPrompt"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"stableSystemPrompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"canContinue"}],"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":180000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","subTitle":"大模型","title":"大模型"},"outputs":[{"name":"output","required":false,"type":"string"}],"version":"3"},"edges":null,"id":"122598","meta":{"position":{"x":-1344.854731482314,"y":-1182.5706687733793}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n\n\n  const originalData = params.content;\n  const processedData = splitSubtitle(originalData);\n\n    // 构建输出对象\n    const ret = {\n        \"texts\": processedData\n    };\n\n    return ret;\n}\n\n\nfunction splitSubtitle(text) {\n    // 定义标点符号正则（可自行扩展）\n    const punctuationRegex = /[。！？；，、\\.!?;,]/g;\n    \n    // 按标点分割，同时捕获非标点内容（包括中英文标点）\n    const segments = text.split(new RegExp(`(${punctuationRegex.source})`));\n    \n    // 合并相邻非标点内容，过滤空字符串和标点符号\n    const result = [];\n    let currentSegment = '';\n    \n    for (const segment of segments) {\n      if (punctuationRegex.test(segment)) {\n        if (currentSegment.trim().length > 0) {\n          result.push(currentSegment.trim());\n          currentSegment = '';\n        }\n      } else {\n        currentSegment += segment;\n      }\n    }\n    \n    // 处理最后一段\n    if (currentSegment.trim().length > 0) {\n      result.push(currentSegment.trim());\n    }\n    \n    return result;\n  }\n  ","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"122598","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"content"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_字幕切割_1"},"outputs":[{"name":"texts","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"1844526","meta":{"position":{"x":-1226.1182258211206,"y":-732.7890662440108}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"batch":{"batchEnable":true,"batchSize":100,"concurrentSize":10,"inputLists":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"1844526","name":"texts","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"item1"}]},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1256633","name":"item1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"assistType":12,"type":"string","value":{"content":"7468512265151725595","rawMeta":{"fileName":"霸气青叔","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":1,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749528468&x-signature=c5RxT9iSeujzE6xEOYDkc9BHUIM%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_1"},"outputs":[{"name":"outputList","schema":{"schema":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"1256633","meta":{"position":{"x":-696.569585523389,"y":-966.2332395644528}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7474863657353117750","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"batch":{"batchEnable":true,"batchSize":100,"concurrentSize":10,"inputLists":[{"input":{"schema":{"schema":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"1256633","name":"outputList","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"item1"}]},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1906869","name":"item1.data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"mp3_url"}],"settingOnError":{"processType":1,"retryTimes":1,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/fde2e11e85fa4c759b5754d267b148ba~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749534156&x-signature=1xEa6T7Bh87RpPMZYFwnJAY5E3c%3D","subtitle":"视频合成_剪映小助手:get_audio_duration","title":"get_audio_duration_1"},"outputs":[{"name":"outputList","schema":{"schema":[{"name":"duration","required":false,"type":"integer"},{"name":"message","required":false,"type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"1906869","meta":{"position":{"x":-187.9621945890524,"y":-854.2332395644529}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"async function main({ params }: Args): Promise<Output> {\n    const { audio_list_data, texts, duration_data, bg_big_text, bg_audio_url, bg_video_url } = params;\n  \n    const duration_list = duration_data.map(item => item.duration);\n    const audio_list = audio_list_data.map(item => item.data.link);\n  \n    let audioStartTime = 0;\n    let maxDuration = 0;\n    const initialAudioData: {\n      audio_url: string;\n      duration: number;\n      volume: number;\n      start: number;\n      end: number;\n    }[] = [];\n  \n    for (let i = 0; i < audio_list.length; i++) {\n      const duration = duration_list[i];\n      initialAudioData.push({\n        audio_url: audio_list[i],\n        duration: duration,\n        volume: 2,\n        start: audioStartTime,\n        end: audioStartTime + duration\n      });\n      audioStartTime += duration;\n      maxDuration = audioStartTime;\n    }\n  \n    const bg_audio_data = [\n      {\n        audio_url: bg_audio_url,\n        duration: maxDuration,\n        start: 0,\n        end: maxDuration,\n        volume: 2\n      }\n    ];\n  \n    const video_data = [\n      {\n        video_url: bg_video_url,\n        duration: maxDuration,\n        width: 1920,\n        height: 1080,\n        start: 0,\n        end: maxDuration\n      }\n    ];\n  \n    const { result, keywords } = generateSubtitles(duration_list, texts);\n  \n    return {\n      initialAudioData: JSON.stringify(initialAudioData),\n      result,\n      keywords,\n      bg_audio_data: JSON.stringify(bg_audio_data),\n      bg_video_data: JSON.stringify(video_data),\n      bg_big_text_data: [bg_big_text],\n      bg_big_text_timeline: [\n        {\n          start: 0,\n          end: maxDuration\n        }\n      ]\n    };\n  }\n  \n  // ----------------------------\n  \n  const presetAnimations = [\n    '渐显', '羽化向右擦开', '放大', '向上露出', '向下滑动',\n    '向下飞入', '站起', '逐字旋转', '甩出', '右上弹入',\n    '滑动上升', '旋入'\n  ];\n  \n  // 拆分文本函数：平均拆成两段（适用于长度 > 8）\n  function splitText(text: string, maxSegments = 2): string[] {\n    if (maxSegments <= 1 || text.length <= 8) {\n      return [text];\n    }\n  \n    const mid = Math.floor(text.length / 2);\n    return [text.slice(0, mid), text.slice(mid)];\n  }\n  \n  // 主字幕生成函数\n  function generateSubtitles(durationList: number[], texts: string[]): { result: any[], keywords: string[] } {\n    const result: any[] = [];\n    const keywords: string[] = [];\n    let globalOffset = 0;\n  \n    for (let i = 0; i < texts.length; i++) {\n      const rawText = texts[i].replace(/\\s+/g, '');\n      const duration = durationList[i];\n  \n      const segmentCount = rawText.length > 8 ? 2 : 1;\n      const segments = splitText(rawText, segmentCount);\n  \n      let positionGroup: { x: number; y: number }[];\n      if (segments.length === 1) {\n        positionGroup = [{ x: 0, y: 0 }];\n      } else {\n        positionGroup = [{ x: -573, y: 523 }, { x: 573, y: -523 }];\n      }\n  \n      const keyword = rawText.length >= 2 ? rawText.slice(-2) : '';\n      if (keyword) {\n        keywords.push(keyword);\n      }\n  \n      for (let j = 0; j < segments.length; j++) {\n        const segment = segments[j];\n        const position = positionGroup[j] || positionGroup[positionGroup.length - 1];\n        const animation = presetAnimations[Math.floor(Math.random() * presetAnimations.length)];\n  \n        result.push({\n          text_positions: position,\n          text_in_animation: [animation],\n          texts: [segment],\n          timelines: [{\n            start: globalOffset,\n            end: globalOffset + duration\n          }],\n          keywords: [keyword]\n        });\n      }\n  \n      globalOffset += duration;\n    }\n  \n    return { result, keywords };\n  }\n  ","inputParameters":[{"input":{"schema":{"schema":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"1256633","name":"outputList","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"audio_list_data"},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"1844526","name":"texts","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[{"name":"duration","required":false,"type":"integer"},{"name":"message","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"1906869","name":"outputList","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"duration_data"},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"bg_big_text"},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"bg_audio_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"bg_audio_url"},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"bg_video_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"bg_video_url"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码"},"outputs":[{"name":"initialAudioData","required":false,"type":"string"},{"name":"result","required":false,"schema":{"schema":[{"name":"text_positions","schema":[{"name":"x","type":"float"},{"name":"y","type":"float"}],"type":"object"},{"name":"text_in_animation","schema":{"type":"string"},"type":"list"},{"name":"texts","schema":{"type":"string"},"type":"list"},{"name":"timelines","schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list"},{"name":"keywords","schema":{"type":"string"},"type":"list"}],"type":"object"},"type":"list"},{"name":"bg_video_data","required":false,"type":"string"},{"name":"bg_audio_data","required":false,"type":"string"},{"name":"bg_big_text_data","required":false,"schema":{"type":"string"},"type":"list"},{"name":"bg_big_text_timeline","required":false,"schema":{"schema":[],"type":"object"},"type":"list"}]},"edges":null,"id":"134481","meta":{"position":{"x":-187.9621945890524,"y":-620.7890662440108}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"canvasSchema":"{\"version\":\"6.0.0-rc2\",\"width\":800,\"height\":500,\"backgroundColor\":\"#ffffffff\",\"customVariableRefs\":[{\"variableId\":\"GjWsDxz71kf5qc9S4hmpY\",\"objectId\":\"ciat33PyI3NG5AhzSN_CQ\",\"variableName\":\"date1\"}],\"objects\":[{\"fontSize\":220,\"fontWeight\":\"normal\",\"fontFamily\":\"字语文畅体\",\"fontStyle\":\"normal\",\"lineHeight\":1.2,\"text\":\"  2025年\",\"charSpacing\":0,\"textAlign\":\"left\",\"styles\":[],\"pathStartOffset\":0,\"pathSide\":\"left\",\"pathAlign\":\"baseline\",\"underline\":false,\"overline\":false,\"linethrough\":false,\"textBackgroundColor\":\"\",\"direction\":\"ltr\",\"width\":786.5,\"height\":248.6,\"editable\":true,\"backgroundColor\":\"\",\"padding\":0,\"customId\":\"ciat33PyI3NG5AhzSN_CQ\",\"customType\":\"inline_text\",\"type\":\"IText\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":0.2532,\"top\":97.603,\"fill\":\"#ff0000fe\",\"stroke\":\"#000000ff\",\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1.2626,\"scaleY\":1.2626,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0}],\"background\":\"#ffffffff\"}","inputParameters":[{"id":"GjWsDxz71kf5qc9S4hmpY","input":{"type":"string","value":{"content":{"blockID":"100001","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"date1"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":60000}},"nodeMeta":{"description":"自定义画板排版，支持引用添加文本和图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon_DrawingBoard_v2.jpg","mainColor":"#FF4DC3","subTitle":"画板","title":"画板_背景大字"},"outputs":[{"assistType":2,"name":"data","type":"string"},{"name":"msg","type":"string"}]},"edges":null,"id":"118941","meta":{"position":{"x":-696.569585523389,"y":-1409.7641706147112}},"type":"23","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7438919188246429731","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"cutout","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7438919188246413347","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"抠图","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"118941","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"url"},{"input":{"type":"string","value":{"content":"0","type":"literal"}},"name":"only_mask"},{"input":{"type":"string","value":{"content":"0","type":"literal"}},"name":"output_mode"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"保留图片前景主体，输出透明背景(.png)","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-plugin-cutout-v2.jpg","subtitle":"抠图:cutout","title":"cutout（背景大字抠图）"},"outputs":[{"name":"msg","required":false,"type":"string"},{"assistType":2,"description":"透明背景图，在输出模式为透明背景时生效","name":"data","required":false,"type":"string"},{"description":"抠图区域蒙板矢量图，在输出模式为蒙版矢量图时生效","name":"mask","required":false,"type":"string"}]},"edges":null,"id":"161447","meta":{"position":{"x":-681.6644231730121,"y":-1230.1642376572738}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109802306060299","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"str_to_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"161447","name":"data","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"obj"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749566777&x-signature=QFk9EZhcjbF0YrHXT60%2BCnP68No%3D","subtitle":"剪映小助手数据生成器:str_to_list","title":"str_to_list"},"outputs":[{"name":"infos","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"167516","meta":{"position":{"x":2272.5479970740757,"y":-757.3714801166633}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439223843","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"imgs_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"167516","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"imgs"},{"input":{"schema":{"schema":[],"type":"object"},"type":"list","value":{"content":{"blockID":"134481","name":"bg_big_text_timeline","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"string","value":{"content":"Kira游动","rawMeta":{"type":1},"type":"literal"}},"name":"in_animation"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"数据格式化转换器工具\n视频合成-剪映小助手工具格式生成器","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749566806&x-signature=CQPY6H%2BAKock9w6DXiWJcSFkh78%3D","subtitle":"剪映小助手数据生成器:imgs_infos","title":"imgs_infos"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"176256","meta":{"position":{"x":2715.0980638526644,"y":-765.6930448822267}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"191539","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"176256","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":0.66,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":0.66,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/fde2e11e85fa4c759b5754d267b148ba~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1749566867&x-signature=iqsPp7kIRe8F%2FFN3kAZWgzL3d8s%3D","subtitle":"视频合成_剪映小助手:add_images","title":"add_images_文字背景大字"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"163142","meta":{"position":{"x":2290.0098892569918,"y":-483.082459591666}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7478102722533834778","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"keyframes_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"对应offsets的值，长度要一致，比如1|2，或者1|2|1","input":{},"name":"values","required":true,"type":"string"},{"description":"视频宽度","input":{},"name":"width","required":false,"type":"integer"},{"description":"关键帧类型： KFTypePositionX: X轴移动，需要提供width参数，值会被除以width进行归一化  KFTypePositionY: Y轴移动，需要提供height参数，值会被除以height进行归一化  KFTypeRotation: 旋转角度，值范围必须在0-360度之间  UNIFORM_SCALE: 均匀缩放，值范围必须在0.01-5之间  KFTypeAlpha: 透明度，值范围必须在0-1之间","input":{},"name":"ctype","required":true,"type":"string"},{"description":"视频高度","input":{},"name":"height","required":false,"type":"integer"},{"description":"需要放置关键帧的位置比例，eg：0|100 这个就是代表在开始和结尾放置，0|50|100代表在开头，中间，结尾放置3个关键帧","input":{},"name":"offsets","required":true,"type":"string"},{"description":"轨道数据，add_images节点输出","input":{},"name":"segment_infos","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"s_id","input":{},"name":"id","required":true,"type":"string"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"type":"string","value":{"content":"KFTypeAlpha","rawMeta":{"type":1},"type":"literal"}},"name":"ctype"},{"input":{"type":"string","value":{"content":"0|100","rawMeta":{"type":1},"type":"literal"}},"name":"offsets"},{"input":{"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"163142","name":"segment_infos","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"segment_infos"},{"input":{"type":"string","value":{"content":"0.3|0.3","rawMeta":{"type":1},"type":"literal"}},"name":"values"},{"input":{"type":"integer","value":{"content":1080,"rawMeta":{"type":2},"type":"literal"}},"name":"height"},{"input":{"type":"integer","value":{"content":1920,"rawMeta":{"type":2},"type":"literal"}},"name":"width"}],"settingOnError":{"dataOnErr":"{\n    \"keyframes_infos\": \"\"\n}","processType":2,"retryTimes":0,"switch":true,"timeoutMs":180000}},"nodeMeta":{"description":"关键帧数据生成器","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:keyframes_infos","title":"keyframes_infos透明度"},"outputs":[{"description":"放入add_frames节点","name":"keyframes_infos","required":false,"type":"string"},{"name":"errorBody","readonly":true,"schema":[{"name":"errorMessage","readonly":true,"type":"string"},{"name":"errorCode","readonly":true,"type":"string"}],"type":"object"},{"name":"isSuccess","readonly":true,"type":"boolean"}]},"edges":null,"id":"200446","meta":{"position":{"x":2257.176860405829,"y":-264.05448165076916}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7465608338500452404","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_keyframes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"191539","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"200446","name":"keyframes_infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"keyframes"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"添加关键帧","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/58f8745c794f452a9b0c572c9a4b3e3a~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748672655&x-signature=iFZjhJCyFY2%2BYqUbY3KzuXXWNqI%3D","subtitle":"视频合成_剪映小助手:add_keyframes","title":"add_keyframes_1"},"outputs":[{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"1219276","meta":{"position":{"x":2234.0306819171715,"y":48.925885014081416}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}}],"versions":{"loop":"v2"}}}