{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531363469243072558","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"802866","sourcePortID":"","targetNodeID":"412892"},{"sourceNodeID":"412892","sourcePortID":"","targetNodeID":"158193"},{"sourceNodeID":"158193","sourcePortID":"false","targetNodeID":"121637"},{"sourceNodeID":"121637","sourcePortID":"","targetNodeID":"157404"},{"sourceNodeID":"180549","sourcePortID":"","targetNodeID":"117044"},{"sourceNodeID":"117044","sourcePortID":"","targetNodeID":"159299"},{"sourceNodeID":"167928","sourcePortID":"","targetNodeID":"133604"},{"sourceNodeID":"133604","sourcePortID":"","targetNodeID":"158006"},{"sourceNodeID":"116774","sourcePortID":"","targetNodeID":"199678"},{"sourceNodeID":"199678","sourcePortID":"","targetNodeID":"157066"},{"sourceNodeID":"157066","sourcePortID":"","targetNodeID":"120765"},{"sourceNodeID":"120765","sourcePortID":"","targetNodeID":"196263"},{"sourceNodeID":"127923","sourcePortID":"","targetNodeID":"163434"},{"sourceNodeID":"163434","sourcePortID":"","targetNodeID":"167928"},{"sourceNodeID":"186971","sourcePortID":"","targetNodeID":"194925"},{"sourceNodeID":"194925","sourcePortID":"batch-output","targetNodeID":"108744"},{"sourceNodeID":"108744","sourcePortID":"","targetNodeID":"180549"},{"sourceNodeID":"115560","sourcePortID":"","targetNodeID":"186971"},{"sourceNodeID":"179043","sourcePortID":"","targetNodeID":"115560"},{"sourceNodeID":"157404","sourcePortID":"","targetNodeID":"179043"},{"sourceNodeID":"158006","sourcePortID":"","targetNodeID":"200446"},{"sourceNodeID":"159299","sourcePortID":"","targetNodeID":"127923"},{"sourceNodeID":"300216","sourcePortID":"","targetNodeID":"110766"},{"sourceNodeID":"110766","sourcePortID":"","targetNodeID":"116774"},{"sourceNodeID":"200446","sourcePortID":"","targetNodeID":"300216"},{"sourceNodeID":"158193","sourcePortID":"true","targetNodeID":"157404"}],"nodes":[{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"book_name","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"book_name"},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"author_name","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"author_name"}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","rawMeta":{"type":4},"type":"literal"}},"name":"temperature"},{"input":{"type":"integer","value":{"content":"2200","rawMeta":{"type":2},"type":"literal"}},"name":"maxTokens"},{"input":{"type":"integer","value":{"content":"2","rawMeta":{"type":2},"type":"literal"}},"name":"responseFormat"},{"input":{"type":"string","value":{"content":"DeepSeek-R1","rawMeta":{"type":1},"type":"literal"}},"name":"modleName"},{"input":{"type":"integer","value":{"content":"1738675233","rawMeta":{"type":2},"type":"literal"}},"name":"modelType"},{"input":{"type":"string","value":{"content":"balance","rawMeta":{"type":1},"type":"literal"}},"name":"generationDiversity"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"prompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"enableChatHistory"},{"input":{"type":"integer","value":{"content":"3","rawMeta":{"type":2},"type":"literal"}},"name":"chatHistoryRound"},{"input":{"type":"string","value":{"content":"# 角色\n你是一个专业的名著金句提取点评专家，擅长从各类名著中精准提取经典语句，并能用通俗易懂的大白话进行感悟总结，以满足书单号视频创作需求。\n\n## 技能\n### 技能 1: 提取金句\n1. 依据用户输入的书名{{book_name}}和作者{{author_name}}，在相关名著资源中搜索并提取约200字的经典语句。\n2. 对提取的语句进行感悟总结，语言要通俗易懂，能引发大众深入思考。\n3. 以“今天要分享的是：《{{book_name}}》”开头，直接输出语句内容，不要出现“金句”字样。\n\n## 输出格式\n将内容一句一句以数组化形式输出，每句话长度不超过15个字，每句话中可以有逗号或者顿号，但句末不能带标点符号。如下：\n===输出示例===\n勇敢就是在你还没有开始的时候\n就知道自己注定会输\n但依然义无反顾地去做\n并且不管发生什么，都能坚持到底\n  ===示例结束===\n  \n## 限制:\n- 输出约200字的语句及感悟总结，每句话结束处不要加标点符号。\n-第一句话必须以“今天要分享的是：《{{book_name}}》”开头\n- 除语句内容和大白话感悟外，不输出任何解析内容。\n- 只围绕名著相关内容进行输出，拒绝无关话题。\n- 输出内容需按给定格式组织，不得偏离框架要求。\n- 利用搜索工具确保信息来源准确。  ","rawMeta":{"type":1},"type":"literal"}},"name":"systemPrompt"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"stableSystemPrompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"canContinue"}],"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","subTitle":"大模型","title":"大模型_风格3"},"outputs":[{"name":"end_content","required":false,"type":"string"},{"name":"title","required":false,"type":"string"},{"name":"content","required":false,"type":"string"},{"name":"reasoning_content","required":false,"type":"string"}],"version":"3"},"edges":null,"id":"802866","meta":{"position":{"x":-2026.1510747495988,"y":-693.8742197595183}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n\n    var auto_text = params.auto_text;\n    var content = params.content +  params.end_content;\n    if(auto_text&&auto_text!='无'){\n        content = auto_text;\n    }\n\n    // 构建输出对象\n    const ret = {\n        \"content\": content\n    };\n\n    return ret;\n}","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"auto_text","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"auto_text"},{"input":{"type":"string","value":{"content":{"blockID":"802866","name":"content","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"content"},{"input":{"type":"string","value":{"content":{"blockID":"802866","name":"end_content","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"end_content"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_3"},"outputs":[{"name":"content","required":false,"type":"string"}]},"edges":null,"id":"412892","meta":{"position":{"x":-1566.151074749599,"y":-660.2644099130059}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"fcParam":{"llmNodeUID":"7522818706218237995","pluginFCParam":{"pluginList":[{"api_id":"7362079843678289974","api_name":"bingWebSearch","is_draft":false,"plugin_id":"7362079843678273590","plugin_version":""},{"api_id":"7372463719307280411","api_name":"browse","is_draft":false,"plugin_id":"7372463719307264027","plugin_version":""}]},"spaceID":"7512069975897735222","workflowVersion":""},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"book_name","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"book"}],"llmParam":[{"input":{"type":"float","value":{"content":"1","rawMeta":{"type":4},"type":"literal"}},"name":"temperature"},{"input":{"type":"integer","value":{"content":"4096","rawMeta":{"type":2},"type":"literal"}},"name":"maxTokens"},{"input":{"type":"integer","value":{"content":"2","rawMeta":{"type":2},"type":"literal"}},"name":"responseFormat"},{"input":{"type":"string","value":{"content":"豆包·通用模型·Pro·256k","rawMeta":{"type":1},"type":"literal"}},"name":"modleName"},{"input":{"type":"integer","value":{"content":"1739348827","rawMeta":{"type":2},"type":"literal"}},"name":"modelType"},{"input":{"type":"string","value":{"content":"default_val","rawMeta":{"type":1},"type":"literal"}},"name":"generationDiversity"},{"input":{"type":"string","value":{"content":"不能输出语气词，不能输出（）的内容，不需要说明使用说明公式，直接输出内容。一定要输出我们今天要聊的这本书——《{{book}}》深刻体验的描绘等。（只需要输出内容）不能低于1000 字，不能超过1200字","rawMeta":{"type":1},"type":"literal"}},"name":"prompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"enableChatHistory"},{"input":{"type":"integer","value":{"content":"3","rawMeta":{"type":2},"type":"literal"}},"name":"chatHistoryRound"},{"input":{"type":"string","value":{"content":"# 角色\n你是一位资深的书籍速览专家，擅长将任何书籍的核心内容，通过调用{#LibraryBlock id=\"7362079843678273590\" uuid=\"AZrJPhr1xhEnlhYCZx3Ks\" type=\"plugin\" apiId=\"7362079843678289974\"#}bingWebSearch{#/LibraryBlock#}来获取书本的内容，通过引人入胜的方式，浓缩成精彩的口播稿。\n\n## 核心任务\n为用户指定的书籍 {{book}}，创作一篇 **1000 字以上** 的口播稿，旨在快速抓住听众注意力，通过生动的故事化叙述，清晰、有逻辑地呈现书籍的核心内容、情节、人物和主题，并留下明确的观点或启发。（输出不需要结构和语气等词语）\n\n## 创作流程与要求（不需要输出结构词）\n\n1.  **强力开篇钩子**:（只需要输出内容）\n 分析 {{book}} 的核心，选择最能引发 **好奇、共鸣、震惊或思考** 的点，构思一个强力开头 (参考方法论：好奇、恐吓、痛点、震惊、故事引入、反问、悬念、对比、情景假设、成功案例、观众误解)。这个开头要直接抓住人。\n \n2.  **引入书本 (关键过渡)**: （只需要输出内容）\n在强力开篇钩子结束后，**必须紧接着**用一两句话进行**清晰的过渡**。**务必明确说出类似这样的话**：“(刚才提到的现象/问题/故事)，我们今天要聊的这本书——《{{book}}》。” 或者 “而这个问题的答案/这种体验的深刻描绘，就藏在《{{book}}》这本书里。” **紧接着，用非常简练的语言（一句话左右）点明这本书大致是关于什么的**，例如：“它讲述了一个关于[主要人物类型]在[特定环境]中[核心经历]的动人故事。” 或者 “这本书主要探讨了[核心主题]是如何影响我们的[生活方面]的。” **这个过渡必须简洁、明确，直接将听众的注意力从钩子引导到书本本身。**\n\n3.  **故事化内容阐述 (核心部分)**:（只需要输出内容）\n    *   **提炼核心**: 深入理解书籍的核心论点、关键情节脉络、主要人物的成长或转变、以及贯穿始终的主题思想。\n    *   **叙事驱动**: **优先使用“叙事性强”的风格**，将书籍的核心内容、论点或知识点，**通过讲述书中的具体故事、案例、关键情节或人物经历**来呈现。让听众仿佛亲历其中，而不是听枯燥的总结。\n    *   **逻辑清晰**: 确保故事讲述的逻辑链条清晰，情节发展、人物动机、观点阐述之间承接自然，层层递进。即使是多个故事或案例，也要围绕核心主题有机组织。\n    *   **观点明确**: 在叙述过程中，或在故事段落之间，**巧妙融入并明确传达书籍的核心观点或作者意图**。可以通过对人物行为的反思、对情节发展的点评、或直接引用书中关键洞见来实现。要让听众不仅听到故事，更能理解故事背后的深意。\n    *   **融入风格元素**: 在叙事中自然融入以下元素，增强表达效果（无需刻意说明使用了哪种）：\n        *   **对比性**: 通过对比人物、情境、观点等，突出核心信息。\n        *   **反思性**: 引导听众思考现象背后的原因或意义。\n        *   **情感共鸣**: 描绘能触动人心的情节或情感，建立连接。\n        *   **启发性/希望性**: 展现成长、改变的可能性，给予启发或鼓励。\n        *   **批判性 (如适用)**: 呈现书中对某些观念或现象的批判。\n        *   **实用性/教育性 (如适用)**: 如果书中有具体方法或建议，将其融入故事或作为故事的启示点出。\n    *   **引用**: 适时、精准地引用书中 **1-2 句** 最具代表性或冲击力的原话，增强说服力和感染力，但避免堆砌。\n\n4.  **结尾升华**:（只需要输出内容）\n    *   **总结核心**: 简要回顾故事所揭示的核心信息或观点。\n    *   **提炼价值**: 使用下方“结尾升华公式”的 **模式** (不必拘泥于字眼，领会其精神)，将书本内容与听众的认知、生活或更广阔的层面联系起来，强调其意义和价值，引发进一步思考或行动的意愿。\n    *   **结尾升华公式模式参考**:（输出不需要结构和语气等词语）\n        *   模式1: (书/主题) 不仅改变认知，更促使行动，推动发展，激励探索。\n        *   模式2: (书/主题) 如同 (比喻)，打破局限，引领方向，价值彰显，需积极拥抱。\n        *   模式3: (书/主题) 是 (本质总结)，重塑思维/行为，发挥作用，需挖掘潜力，创造价值。\n        \n## 最终产出示例 (示意格式，内容无关):\n\n(直接从这里开始输出口播稿正文第一句话，比如：)\n你有没有想过，为什么有些人似乎总能心想事成？今天我们要聊的这本书... (继续写正文)... 这本书不仅仅是理论，它更像是一把钥匙，能打开我们思维的枷锁，让我们看到更广阔的世界。 (直接在这里结束最后一句，不要有任何多余的文字)\n\n---\n\n**请注意：** 上面的“最终产出示例”只是为了**演示格式**，表明输出应该是什么样子（直接开始正文，直接结束正文，中间没有任何标签或说明）。**请不要在你的实际回答中包含这个示例本身。**\n\n## 格式及字数要求（只需要输出内容）\n\n1.  **直接输出口播稿**: 最终输出的内容应是**完整、连贯、可直接用于口播的文本**。**禁止**包含任何说明性文字、标题、括号注释、语气词（如“嗯”、“啊”、“这个”、“那个”等）、或提到你正在遵循什么公式或指令。\n2.  **字数**: 全文总字数需严格控制在 **不能低于1000 字，不能超过1200字**。\n3.  **语言风格**: 活泼生动、富有感染力，使用形象化的语言，但要**通俗易懂**，避免生僻词汇。\n4.  **结构**: 开头钩子 → 书本介绍 → 故事化阐述（主体，包含逻辑、观点、风格元素）→ 结尾升华。\n\n## 限制\n1.  **紧扣原书**: 所有内容必须围绕用户指定的书籍 {{book}} 展开。\n2.  **禁止额外内容**: 不输出任何与口播稿本身无关的内容，例如“好的，这是为您生成的口播稿：”或对指令的确认。\n3.  **纯文本输出**: 保证输出内容是纯粹的文案，其他的不需要输出无关的内容包括语气词和框架。\n4. **引入书本 (关键过渡)** 不能漏了，这个很重要的，一定要按照创作流程与要求来生成内容。一定要输出我们今天要聊的这本书——《{{book}}》深刻体验的描绘等。\n5.不能输出语气词等内容，禁止输出任何说明性的内容，直接输出正文的内容，不能输出（）的内容，不需要说明使用说明公式，直接输出内容。","rawMeta":{"type":1},"type":"literal"}},"name":"systemPrompt"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"stableSystemPrompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"canContinue"}],"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","subTitle":"大模型","title":"内容生成"},"outputs":[{"name":"output","required":false,"type":"string"}],"version":"3"},"edges":null,"id":"121637","meta":{"position":{"x":-56.95864444498966,"y":-641.4060990895106}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"async function main({ params }: Args): Promise<Output> { \r\n    let audios = [];\r\n    let images = [];\r\n    let images2 = [];\r\n    let texts = [];\r\n    let start = 0;\r\n\r\n    // Calculate the total duration of all audio tracks\r\n    const totalDuration = params.mp3_druations.reduce((sum, duration) => sum + (duration || 0), 0) * 1000000;\r\n\r\n    // Process audio and text data\r\n    for (let index = 0; index < params.mp3_urls.length; index++) {\r\n        const duration = (params.mp3_druations[index] || 0) * 1000000;\r\n        const end = start + duration;\r\n\r\n        audios.push({\r\n            \"audio_url\": params.mp3_urls[index],\r\n            \"duration\": duration,\r\n            \"volume\": 10,\r\n            \"start\": start,\r\n            \"end\": end\r\n        });\r\n\r\n        texts.push({\r\n            \"text\": params.texts[index] || '',\r\n            \"start\": start,\r\n            \"end\": end,\r\n            \"in_animation\": '',\r\n            \"out_animation\": ''\r\n        });\r\n\r\n        start = end;\r\n    }\r\n\r\n    // Process image data (images array)\r\n    let image_start = 0;\r\n    for (let index = 0; index < params.images.length; index++) {\r\n        const duration = (params.mp3_druations[index] || 0) * 1000000;\r\n        const end = image_start + duration;\r\n\r\n        images.push({\r\n            \"image_url\": params.images[index],\r\n            \"width\": 1920,\r\n            \"height\": 1080,\r\n            \"start\": image_start,\r\n            \"end\": end,\r\n            \"in_animation\": \"放大\",\r\n            \"out_animation\": \"\",\r\n            \"loop_animation\": \"\",\r\n            \"in_animation_duration\": 300000,\r\n            \"out_animation_duration\": 300000\r\n        });\r\n\r\n        image_start = end;\r\n    }\r\n\r\n    // Process images2 (single image)\r\n    if (params.images2) {\r\n        images2.push({\r\n            \"image_url\": params.images2,\r\n            \"width\": 1920,\r\n            \"height\": 1080,\r\n            \"start\": 0,\r\n            \"end\": totalDuration,\r\n            \"in_animation\": \"\",\r\n            \"out_animation\": \"\",\r\n            \"loop_animation\": \"\",\r\n            \"in_animation_duration\": 20000,\r\n            \"out_animation_duration\": 20000\r\n        });\r\n    }\r\n\r\n    // Effect information (use total start time)\r\n    let effect_infos = [{\r\n        \"effect_title\": \"金粉闪闪\",\r\n        \"start\": 0,\r\n        \"end\": start\r\n    }];\r\n\r\n    // Background music information\r\n    let bg_mp3 = [{\r\n        \"audio_url\": params.bg_audio || '',\r\n        \"duration\": start,\r\n        \"volume\": 0.5,\r\n        \"start\": 0,\r\n        \"end\": start\r\n    }];\r\n\r\n    // Total duration timeline (output as an array of objects directly containing start and end)\r\n    let totalTimeline = [{\r\n        \"start\": 0,\r\n        \"end\": totalDuration\r\n    }];\r\n\r\n    return {\r\n        audios: JSON.stringify(audios),\r\n        images: JSON.stringify(images),\r\n        images2: JSON.stringify(images2),\r\n        texts: JSON.stringify(texts),\r\n        effect_infos: JSON.stringify(effect_infos),\r\n        bg_mp3: JSON.stringify(bg_mp3),\r\n        totalTimeline: JSON.stringify(totalTimeline), // Output as a flat array of objects\r\n    };\r\n}\r\n","inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"179043","name":"content","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"194925","name":"link_list","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"mp3_urls"},{"input":{"schema":{"type":"float"},"type":"list","value":{"content":{"blockID":"194925","name":"duration_list","source":"block-output"},"rawMeta":{"type":102},"type":"ref"}},"name":"mp3_druations"},{"input":{"schema":{"assistType":2,"type":"string"},"type":"list","value":{"content":{"blockID":"194925","name":"imagelist","source":"block-output"},"rawMeta":{"type":104},"type":"ref"}},"name":"images"},{"input":{"type":"string","value":{"content":"https://coze-tmp-file.oss-cn-shenzhen.aliyuncs.com/2025_03_20/732558dd-30dd-402f-880d-3a49f44fc71e.mp3","rawMeta":{"type":1},"type":"literal"}},"name":"bg_audio"},{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"180549","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"images2"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"组合结构代码"},"outputs":[{"name":"audios","required":false,"type":"string"},{"name":"images","required":false,"type":"string"},{"name":"images2","required":false,"type":"string"},{"name":"texts","required":false,"type":"string"},{"name":"effect_infos","required":false,"type":"string"},{"name":"bg_mp3","required":false,"type":"string"},{"name":"totalTimeline","required":false,"schema":{"schema":[],"type":"object"},"type":"list"}]},"edges":null,"id":"117044","meta":{"position":{"x":1063.0574170137743,"y":-362.9491422342328}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"移动transform_y","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/Pgm9wXA4EipKhYkeEQJcLBlJnWb?from=from_copylink","input":{},"name":"image_infos","required":true,"type":"string"},{"description":"x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"移动transform_x","input":{},"name":"transform_x","required":false,"type":"float"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"167928","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"117044","name":"images","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":0.5,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":0.5,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_images","title":"add_images火柴人"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"133604","meta":{"position":{"x":157.57527076797396,"y":461.68108547769566}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"},{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"117044","name":"texts","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"158006","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":"1","type":"literal"}},"name":"alignment"},{"input":{"type":"integer","value":{"content":8,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"string","value":{"content":"#000000","type":"literal"}},"name":"text_color"},{"input":{"type":"string","value":{"content":"-780","type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加字幕","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_captions","title":"add_captions字幕"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"199678","meta":{"position":{"x":1997.5752707679756,"y":461.68108547769566}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"教堂\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"117044","name":"audios","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"163434","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_audios","title":"add_audios配音"},"outputs":[{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"120765","meta":{"position":{"x":511.90608693337253,"y":770.8862382613904}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684515874","type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_draft","type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"高","input":{},"name":"height","required":false,"type":"integer"},{"description":"关联创作者","input":{},"name":"user_id","required":false,"type":"integer"},{"description":"宽","input":{},"name":"width","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"string","value":{"content":"1080","type":"literal"}},"name":"height"},{"input":{"type":"integer","value":{"content":1262,"rawMeta":{"type":2},"type":"literal"}},"name":"user_id"},{"input":{"type":"integer","value":{"content":1440,"rawMeta":{"type":2},"type":"literal"}},"name":"width"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"创建草稿","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:create_draft","title":"创建草稿"},"outputs":[{"name":"tip_url","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"163434","meta":{"position":{"x":933.7554278822486,"y":-40.76103270567751}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684548642","type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"save_draft","type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"用户ID。如果填写了这个ID，新用户产生的月费就会按照比例归属到这个账号下。","input":{},"name":"user_id","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"120765","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1262,"rawMeta":{"type":2},"type":"literal"}},"name":"user_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"保存草稿\n","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:save_draft","title":"save_draft"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"196263","meta":{"position":{"x":963.0574170137743,"y":806.4379903605684}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7466630948491231268","type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_effects","type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"特效数组内容，eg:[{\"effect_title\":\"金粉闪闪\",\"end\":5000000,\"start\":0}]","input":{},"name":"effect_infos","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"199678","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"117044","name":"effect_infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"effect_infos"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"添加特效","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_effects","title":"add_effects特效"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"effect_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"157066","meta":{"position":{"x":-408.09391306662747,"y":770.8862382613904}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"194925","name":"prompt.output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"promot"}],"modelSetting":{"custom_ratio":{"height":1024,"width":1024},"ddim_steps":30,"model":8},"prompt":{"negative_prompt":"","prompt":"{{promot}}纯白色背景，干净的背景"},"references":[],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":60000}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","mainColor":"#FF4DC3","subTitle":"图像生成","title":"图像生成_1"},"outputs":[{"assistType":2,"name":"data","type":"string"},{"name":"msg","type":"string"}]},"edges":null,"id":"153277","meta":{"position":{"x":180,"y":0}},"type":"16"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"defaultValue":"爽快思思/Skye","description":"音色ID，默认为爽快思思/Skye。详细音色列表参考 https://bytedance.larkoffice.com/docx/WdDOdiB1BoRyBNxlkXWcn0n3nLc, default value is 爽快思思/Skye","input":{},"name":"speaker_id","required":false,"type":"string"},{"defaultValue":1,"description":"语速，范围是[0.2,3]，默认为1，通常保留一位小数即可, default value is 1","input":{},"name":"speed_ratio","required":false,"type":"float"},{"description":"要合成音频的文本内容","input":{},"name":"text","required":true,"type":"string"},{"assistType":12,"description":"voice id","input":{},"name":"voice_id","required":false,"type":"string"},{"description":"语音语种，非必填，参考 https://bytedance.larkoffice.com/docx/WdDOdiB1BoRyBNxlkXWcn0n3nLc","input":{},"name":"language","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"194925","name":"content","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"float","value":{"content":1.2,"rawMeta":{"type":4},"type":"literal"}},"name":"speed_ratio"},{"input":{"assistType":12,"type":"string","value":{"content":"7426720361733177353","rawMeta":{"fileName":"渊博小叔","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_1"},"outputs":[{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"},{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"}]},"edges":null,"id":"787331","meta":{"position":{"x":180,"y":266.1}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7438919188246429731","type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"cutout","type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7438919188246413347","type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"抠图","type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"defaultValue":0,"description":"输出图模式，可选透明背景图/蒙版矢量图, enum list is [0,1], default value is 0","enum":[0,1],"enumVarNames":["透明背景图","蒙版矢量图"],"input":{},"name":"output_mode","required":false,"title":"输出图模式","type":"integer"},{"description":"自定义抠图内容的提示词，不填时默认保留主体抠图","input":{},"name":"prompt","required":false,"title":"提示词","type":"string"},{"assistType":2,"description":"待抠图的图片","input":{},"name":"url","required":true,"title":"上传图","type":"image"}],"inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"153277","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"url"},{"input":{"type":"string","value":{"content":"0","type":"literal"}},"name":"only_mask"},{"input":{"type":"string","value":{"content":"0","type":"literal"}},"name":"output_mode"}],"settingOnError":{"dataOnErr":"{\n    \"msg\": \"\",\n    \"data\": \"\",\n    \"mask\": \"\"\n}","processType":2,"retryTimes":0,"switch":true,"timeoutMs":180000}},"nodeMeta":{"description":"保留图片前景主体，输出透明背景(.png)","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-plugin-cutout-v2.jpg","subtitle":"抠图:cutout","title":"抠图_1"},"outputs":[{"name":"msg","required":false,"type":"string"},{"assistType":2,"description":"透明背景图，在输出模式为透明背景时生效","name":"data","required":false,"type":"string"},{"description":"抠图区域蒙板矢量图，在输出模式为蒙版矢量图时生效","name":"mask","required":false,"type":"string"},{"name":"errorBody","readonly":true,"schema":[{"name":"errorMessage","readonly":true,"type":"string"},{"name":"errorCode","readonly":true,"type":"string"}],"type":"object"},{"name":"isSuccess","readonly":true,"type":"boolean"}]},"edges":null,"id":"028490","meta":{"position":{"x":654.851367304343,"y":14.000000000000021}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7490399342566637622","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7490399342566621238","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"获取音频时间","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"787331","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"mp3_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"获取音频时长，返回秒","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"获取音频时间:get_audio_duration","title":"get_audio_duration"},"outputs":[{"name":"duration","required":false,"type":"float"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"118048","meta":{"position":{"x":633.5693061910089,"y":278.9762190571106}},"type":"4"}],"data":{"inputs":{"batchSize":{"type":"integer","value":{"content":"100","type":"literal"}},"concurrentSize":{"type":"integer","value":{"content":"3","type":"literal"}},"inputParameters":[{"input":{"schema":{"schema":[{"name":"output","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"186971","name":"outputList","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"prompt"},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"179043","name":"content","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"content"}]},"nodeMeta":{"description":"通过设定批量运行次数和逻辑，运行批处理体内的任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg","mainColor":"#00B2B2","subTitle":"批处理","title":"画面内容"},"outputs":[{"input":{"assistType":2,"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"028490","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"imagelist"},{"input":{"schema":{"type":"float"},"type":"list","value":{"content":{"blockID":"118048","name":"duration","source":"block-output"},"rawMeta":{"type":4},"type":"ref"}},"name":"duration_list"},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"787331","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"link_list"}]},"edges":[{"sourceNodeID":"194925","sourcePortID":"batch-function-inline-output","targetNodeID":"153277"},{"sourceNodeID":"153277","sourcePortID":"","targetNodeID":"028490"},{"sourceNodeID":"194925","sourcePortID":"batch-function-inline-output","targetNodeID":"787331"},{"sourceNodeID":"787331","sourcePortID":"","targetNodeID":"118048"},{"sourceNodeID":"028490","sourcePortID":"","targetNodeID":"194925","targetPortID":"batch-function-inline-input"},{"sourceNodeID":"118048","sourcePortID":"","targetNodeID":"194925","targetPortID":"batch-function-inline-input"}],"id":"194925","meta":{"canvasPosition":{"x":-1057.276096536369,"y":-106.39854329237119},"position":{"x":-646.9425829862248,"y":-362.9491422342328}},"type":"28","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"移动transform_y","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/Pgm9wXA4EipKhYkeEQJcLBlJnWb?from=from_copylink","input":{},"name":"image_infos","required":true,"type":"string"},{"description":"x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"移动transform_x","input":{},"name":"transform_x","required":false,"type":"float"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"163434","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"117044","name":"images2","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_images","title":"add_images背景图"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"},{"name":"track_id","required":false,"type":"string"}]},"edges":null,"id":"167928","meta":{"position":{"x":-302.42472923202604,"y":461.68108547769566}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"canvasSchema":"{\"version\":\"6.0.0-rc2\",\"width\":1440,\"height\":1080,\"backgroundColor\":\"#ffffffff\",\"customVariableRefs\":[{\"variableId\":\"qtz3JL6CEltwoURZNTDNi\",\"objectId\":\"wubitD4PbOCLGd4Sjggr2\",\"variableName\":\"Content1\"},{\"variableId\":\"hx9XgJeLhtCb2BNNDNL3W\",\"objectId\":\"zKnii6jWElKLVN_b5HbgM\",\"variableName\":\"Content2\"},{\"variableId\":\"9PWu6QRfeC27rG6DjUEv9\",\"objectId\":\"TABcLeJrVImi4NZjDQBlC\",\"variableName\":\"Content3\"},{\"variableId\":\"nc5ts9eHh3DtwY60QYLCR\",\"objectId\":\"DAuKjgr3wObfO0tjVIY3m\",\"variableName\":\"Content4\"}],\"objects\":[{\"rx\":0,\"ry\":0,\"width\":0,\"height\":89.1205,\"backgroundColor\":\"\",\"padding\":0,\"customId\":\"Vz5xbDTUBYUWQWUoqSswg\",\"customType\":\"rect\",\"type\":\"Rect\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":312.8339,\"top\":15.6352,\"fill\":\"#ccccccff\",\"stroke\":\"#000000ff\",\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0},{\"fontSize\":48,\"fontWeight\":\"normal\",\"fontFamily\":\"抖音美好体\",\"fontStyle\":\"normal\",\"lineHeight\":1.2,\"text\":\"|\",\"charSpacing\":0,\"textAlign\":\"center\",\"styles\":[],\"pathStartOffset\":0,\"pathSide\":\"left\",\"pathAlign\":\"baseline\",\"underline\":false,\"overline\":false,\"linethrough\":false,\"textBackgroundColor\":\"\",\"direction\":\"ltr\",\"width\":12.9141,\"height\":54.24,\"editable\":true,\"backgroundColor\":\"\",\"padding\":0,\"customId\":\"Je-QeHcZTzz_pgC8MjnTi\",\"customType\":\"inline_text\",\"type\":\"IText\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":321.5696,\"top\":18.7044,\"fill\":\"#0000007c\",\"stroke\":\"#000000ff\",\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0},{\"fontSize\":48,\"fontWeight\":\"normal\",\"fontFamily\":\"抖音美好体\",\"fontStyle\":\"normal\",\"lineHeight\":1.2,\"text\":\"|\",\"charSpacing\":0,\"textAlign\":\"center\",\"styles\":[],\"pathStartOffset\":0,\"pathSide\":\"left\",\"pathAlign\":\"baseline\",\"underline\":false,\"overline\":false,\"linethrough\":false,\"textBackgroundColor\":\"\",\"direction\":\"ltr\",\"width\":12.9141,\"height\":54.24,\"editable\":true,\"backgroundColor\":\"\",\"padding\":0,\"customId\":\"OujV2rL99sVsagjKAXa-A\",\"customType\":\"inline_text\",\"type\":\"IText\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":705.5593,\"top\":18.7044,\"fill\":\"#0000007c\",\"stroke\":\"#000000ff\",\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0},{\"fontSize\":48,\"fontWeight\":\"normal\",\"fontFamily\":\"抖音美好体\",\"fontStyle\":\"normal\",\"lineHeight\":1.2,\"text\":\"|\",\"charSpacing\":0,\"textAlign\":\"center\",\"styles\":[],\"pathStartOffset\":0,\"pathSide\":\"left\",\"pathAlign\":\"baseline\",\"underline\":false,\"overline\":false,\"linethrough\":false,\"textBackgroundColor\":\"\",\"direction\":\"ltr\",\"width\":12.9141,\"height\":54.24,\"editable\":true,\"backgroundColor\":\"\",\"padding\":0,\"customId\":\"yyBfeKwOeJ_w4wxo6Vq7t\",\"customType\":\"inline_text\",\"type\":\"IText\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":1089.5489,\"top\":18.7044,\"fill\":\"#0000007c\",\"stroke\":\"#000000ff\",\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0},{\"fontSize\":35,\"fontWeight\":\"normal\",\"fontFamily\":\"抖音美好体\",\"fontStyle\":\"normal\",\"lineHeight\":1.2,\"text\":\"青年与哲人对话\",\"charSpacing\":0,\"textAlign\":\"center\",\"styles\":[],\"pathStartOffset\":0,\"pathSide\":\"left\",\"pathAlign\":\"baseline\",\"underline\":false,\"overline\":false,\"linethrough\":false,\"textBackgroundColor\":\"\",\"direction\":\"ltr\",\"width\":245,\"height\":39.55,\"editable\":true,\"backgroundColor\":\"\",\"padding\":0,\"customId\":\"wubitD4PbOCLGd4Sjggr2\",\"customType\":\"inline_text\",\"type\":\"IText\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":33.7764,\"top\":26.0494,\"fill\":\"#000000ff\",\"stroke\":\"#000000ff\",\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0},{\"fontSize\":35,\"fontWeight\":\"normal\",\"fontFamily\":\"抖音美好体\",\"fontStyle\":\"normal\",\"lineHeight\":1.2,\"text\":\"青年与哲人对话\",\"charSpacing\":0,\"textAlign\":\"center\",\"styles\":[],\"pathStartOffset\":0,\"pathSide\":\"left\",\"pathAlign\":\"baseline\",\"underline\":false,\"overline\":false,\"linethrough\":false,\"textBackgroundColor\":\"\",\"direction\":\"ltr\",\"width\":245,\"height\":39.55,\"editable\":true,\"backgroundColor\":\"\",\"padding\":0,\"customId\":\"zKnii6jWElKLVN_b5HbgM\",\"customType\":\"inline_text\",\"type\":\"IText\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":400.1764,\"top\":26.0494,\"fill\":\"#000000ff\",\"stroke\":\"#000000ff\",\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0},{\"fontSize\":35,\"fontWeight\":\"normal\",\"fontFamily\":\"抖音美好体\",\"fontStyle\":\"normal\",\"lineHeight\":1.2,\"text\":\"青年与哲人对话\",\"charSpacing\":0,\"textAlign\":\"center\",\"styles\":[],\"pathStartOffset\":0,\"pathSide\":\"left\",\"pathAlign\":\"baseline\",\"underline\":false,\"overline\":false,\"linethrough\":false,\"textBackgroundColor\":\"\",\"direction\":\"ltr\",\"width\":245,\"height\":39.55,\"editable\":true,\"backgroundColor\":\"\",\"padding\":0,\"customId\":\"TABcLeJrVImi4NZjDQBlC\",\"customType\":\"inline_text\",\"type\":\"IText\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":784.1661,\"top\":26.0494,\"fill\":\"#000000ff\",\"stroke\":\"#000000ff\",\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0},{\"fontSize\":35,\"fontWeight\":\"normal\",\"fontFamily\":\"抖音美好体\",\"fontStyle\":\"normal\",\"lineHeight\":1.2,\"text\":\"青年与哲人对话\",\"charSpacing\":0,\"textAlign\":\"center\",\"styles\":[],\"pathStartOffset\":0,\"pathSide\":\"left\",\"pathAlign\":\"baseline\",\"underline\":false,\"overline\":false,\"linethrough\":false,\"textBackgroundColor\":\"\",\"direction\":\"ltr\",\"width\":245,\"height\":39.55,\"editable\":true,\"backgroundColor\":\"\",\"padding\":0,\"customId\":\"DAuKjgr3wObfO0tjVIY3m\",\"customType\":\"inline_text\",\"type\":\"IText\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":1141.8304,\"top\":26.0494,\"fill\":\"#000000ff\",\"stroke\":\"#000000ff\",\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0}],\"background\":\"#ffffffff\"}","inputParameters":[{"id":"qtz3JL6CEltwoURZNTDNi","input":{"type":"string","value":{"content":{"blockID":"115560","name":"output1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"Content1"},{"id":"hx9XgJeLhtCb2BNNDNL3W","input":{"type":"string","value":{"content":{"blockID":"115560","name":"output2","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"Content2"},{"id":"9PWu6QRfeC27rG6DjUEv9","input":{"type":"string","value":{"content":{"blockID":"115560","name":"output3","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"Content3"},{"id":"nc5ts9eHh3DtwY60QYLCR","input":{"type":"string","value":{"content":{"blockID":"115560","name":"output4","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"Content4"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":60000}},"nodeMeta":{"description":"自定义画板排版，支持引用添加文本和图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon_DrawingBoard_v2.jpg","mainColor":"#FF4DC3","subTitle":"画板","title":"背景图"},"outputs":[{"assistType":2,"name":"data","type":"string"},{"name":"msg","type":"string"}]},"edges":null,"id":"180549","meta":{"position":{"x":603.0574170137743,"y":-362.9491422342328}},"type":"23","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"batch":{"batchEnable":true,"batchSize":100,"concurrentSize":10,"inputLists":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"179043","name":"content","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"item1"}]},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"186971","name":"item1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"input"}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","rawMeta":{"type":4},"type":"literal"}},"name":"temperature"},{"input":{"type":"integer","value":{"content":"1024","rawMeta":{"type":2},"type":"literal"}},"name":"maxTokens"},{"input":{"type":"integer","value":{"content":"2","rawMeta":{"type":2},"type":"literal"}},"name":"responseFormat"},{"input":{"type":"string","value":{"content":"DeepSeek-V3","rawMeta":{"type":1},"type":"literal"}},"name":"modleName"},{"input":{"type":"integer","value":{"content":"1738675210","rawMeta":{"type":2},"type":"literal"}},"name":"modelType"},{"input":{"type":"string","value":{"content":"balance","rawMeta":{"type":1},"type":"literal"}},"name":"generationDiversity"},{"input":{"type":"string","value":{"content":"{{input}}只需要修改括号里面的动作词就可以了，其他的不需要动，结合开头的内容一起输出内容，其他的不能修改。","rawMeta":{"type":1},"type":"literal"}},"name":"prompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"enableChatHistory"},{"input":{"type":"integer","value":{"content":"3","rawMeta":{"type":2},"type":"literal"}},"name":"chatHistoryRound"},{"input":{"type":"string","value":{"content":"# 角色\n你是一位专业的AI绘画描述词生成专家，专为“三分钟读书简笔画版本”创作合适的描述词。将输入句子{{input}}转化为符合现代写实风格且具有简笔画特点的AI绘画描述词。\n\n## 要求\n针对每个输入句子，仅生成一份描述词。风格为现代写实与简笔画融合，线条流畅简洁，色彩柔和且层次分明，着重对人物的头发、衣物纹理等细节细腻处理，生动刻画人物形象与表情。自由构思符合正常行为逻辑的角色动作，以此体现句子的情感或心理学主题。通过添加符号、物品等简约装饰元素营造氛围。用于绘制启蒙图片，输出仅针对{{input}}，严格按要求作答。\n\n## 示例\n通用模板：现代写实与简笔画融合风格，线条流畅简洁，色彩柔和且层次分明，人物头发、衣物纹理等细节处理细腻，人物形象生动，表情刻画细腻。角色数量 + 行为动作 + 情绪描述 + 情绪符号 + 极简场景物品，超高清晰度矢量图，轮廓清晰无描边。\n### 提示词参考案例：\n1. 现代写实与简笔画融合风格，线条流畅简洁，色彩柔和且层次分明。2个角色激烈争吵，情绪激动，带有愤怒符号，站在极简街道上 ，超高清晰度矢量图，轮廓清晰。\n2. 现代写实与简笔画融合风格，线条流畅简洁，色彩柔和且层次分明，高对比度。一个角色半低着身体，情绪低落 ，头顶乌云并带点小雨，超高清晰度矢量图，轮廓清晰。\n3. 现代写实与简笔画融合风格，线条流畅简洁，色彩柔和且层次分明。三个角色高兴庆祝，伴有烟花，超高清晰度矢量图，轮廓清晰。\n4. 现代写实与简笔画融合风格，线条流畅简洁，色彩柔和且层次分明。一个角色打翻牛奶洒在地上，神情慌张，带有惊慌符号，超高清晰度矢量图，轮廓清晰。\n5.  现代写实与简笔画融合风格，线条流畅简洁，色彩柔和且层次分明。两个角色，女角色感到惊讶，男角色淡定思考，带有思考符号，超高清晰度矢量图，轮廓清晰。\n\n## 输出要求\n完整输出所有内容，不得遗漏。输出内容字数限制在150 - 200字之间。请严格按照上述提示进行操作与输出。\n\n## 技能\n无特殊技能要求\n\n## 限制\n输出内容需围绕将输入句子转化为现代写实与简笔画融合风格的角色描述词展开，不涉及其他无关内容。 ","rawMeta":{"type":1},"type":"literal"}},"name":"systemPrompt"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"stableSystemPrompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"canContinue"}],"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","subTitle":"大模型","title":"描述动作"},"outputs":[{"name":"outputList","required":false,"schema":{"schema":[{"name":"output","type":"string"}],"type":"object"},"type":"list"}],"version":"3"},"edges":null,"id":"186971","meta":{"position":{"x":1783.04135555501,"y":-712.9310990895113}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"179043","name":"content","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"input"}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","rawMeta":{"type":4},"type":"literal"}},"name":"temperature"},{"input":{"type":"integer","value":{"content":"1024","rawMeta":{"type":2},"type":"literal"}},"name":"maxTokens"},{"input":{"type":"integer","value":{"content":"2","rawMeta":{"type":2},"type":"literal"}},"name":"responseFormat"},{"input":{"type":"string","value":{"content":"DeepSeek-V3","rawMeta":{"type":1},"type":"literal"}},"name":"modleName"},{"input":{"type":"integer","value":{"content":"1738675210","rawMeta":{"type":2},"type":"literal"}},"name":"modelType"},{"input":{"type":"string","value":{"content":"balance","rawMeta":{"type":1},"type":"literal"}},"name":"generationDiversity"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"prompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"enableChatHistory"},{"input":{"type":"integer","value":{"content":"3","rawMeta":{"type":2},"type":"literal"}},"name":"chatHistoryRound"},{"input":{"type":"string","value":{"content":"# 角色\n你是一个专门搞三分钟读书视频工作流的助手哈，能根据给你的内容清楚地划分一下，把它稳稳地分成四个板块，然后用六个字以内说说每个板块讲了啥，当作内容框架进度条，这样就能按照内容进度展示出完整的进度条啦。\n\n## 技能\n### 技能 1: 划分内容板块\n1. 等用户给你{{input}}内容后，好好琢磨琢磨这内容的逻辑结构和主题走向。\n2. 把这内容顺顺当当分成四个板块。\n\n### 技能 2: 概括板块内容\n1. 针对分好的每个板块，拎出核心要点。\n2. 用六个字以内明明白白概括每个板块讲的内容。\n\n### 技能 3: 生成进度条\n1. 按照概括出来的四个板块内容，做出完整的内容框架进度条，让人一眼就能看清内容进度。\n\n## 限制:\n- 就围绕用户给的内容做板块划分、概括还有进度条生成，别的不相关话题咱不处理。\n- 输出的内容得按上面要求来，别跑偏。\n- 每个板块的六个字以内概括得准确体现板块核心内容。 ","rawMeta":{"type":1},"type":"literal"}},"name":"systemPrompt"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"stableSystemPrompt"},{"input":{"type":"boolean","value":{"content":false,"rawMeta":{"type":3},"type":"literal"}},"name":"canContinue"}],"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","subTitle":"大模型","title":"标题时间轴"},"outputs":[{"name":"output1","required":false,"type":"string"},{"name":"output2","required":false,"type":"string"},{"name":"output3","required":false,"type":"string"},{"name":"output4","required":false,"type":"string"}],"version":"3"},"edges":null,"id":"115560","meta":{"position":{"x":1323.0413555550103,"y":-712.9310990895113}},"type":"3","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"import re\nfrom typing import TypedDict, List, Dict, Union\n\n# 定义输入参数类型\nclass Input(TypedDict):\n    input: str\n\n# 定义输出参数类型 - 输出为字符串列表\nclass Output(TypedDict):\n    content: List[str]\n\ndef process_and_segment_text(text) -> List[str]:\n    \"\"\"\n    处理文本，在每个中文句号、逗号、分号、问号、感叹号等符号后添加空行，\n    但低于6个字的句子不添加换行。确保每段不超过20个字，并且合理分段，保留语气。\n    返回一个包含文本段落的列表。\n    \"\"\"\n    # 1. 在每个中文句号、逗号、分号、问号、感叹号等符号后添加换行符\n    processed_text = re.sub(r'(。|，|；|？|！|、|：)+', r'\\1\\n', text)\n    \n    # 2. 确保开头有一个换行符\n    if not processed_text.startswith('\\n'):\n        processed_text = '\\n' + processed_text\n    \n    # 仅移除整个文本开头或结尾的多余空白\n    processed_text = processed_text.strip()\n\n    # 如果处理后的文本为空，直接返回空列表\n    if not processed_text:\n        return []\n\n    # 以换行符为分隔符进行分段\n    segments = processed_text.split('\\n')\n\n    # 去除空段落\n    segments = [segment.strip() for segment in segments if segment.strip()]\n\n    # 3. 对每个段落进行处理，确保每段不超过20个字，并且低于6个字的段落不分段\n    final_segments = []\n    current_segment = \"\"\n\n    for segment in segments:\n        words_in_segment = segment.split()\n        for word in words_in_segment:\n            # 如果当前段落加上当前词不超过20个字，则继续加入\n            if len(current_segment + word) <= 25:\n                current_segment += word\n            else:\n                if len(current_segment) >= 6:  # 当前段落大于6个字时加入最终结果\n                    final_segments.append(current_segment)\n                current_segment = word  # 当前段落重新开始\n\n    # 添加最后的段落\n    if current_segment and len(current_segment) >= 6:\n        final_segments.append(current_segment)\n\n    return final_segments\n\n# Coze 节点的主函数 - 返回字符串列表\nasync def main(args) -> Output:\n    \"\"\"\n    Coze 节点主函数，接收输入文本，处理后返回分段的字符串列表。\n    \"\"\"\n    params = args.params\n    input_text = params.get('input', '') # 使用 .get() 安全获取输入\n\n    # 检查输入是否为空\n    if not input_text:\n        # 如果输入为空，根据期望的 Array<String> 格式，返回一个空列表\n        print(\"DEBUG: Input text is empty, returning empty list.\") # 添加调试信息\n        # 将返回字典的键名从 'output' 修改为 'content'\n        return {'content': []}\n\n    print(f\"DEBUG: Received input text (first 50 chars): {input_text[:50]}\") # 添加调试信息\n\n    # 调用处理函数进行分段，得到一个字符串列表\n    processed_segments = process_and_segment_text(input_text)\n\n    print(f\"DEBUG: Processed into {len(processed_segments)} segments.\") # 添加调试信息\n    if processed_segments:\n         print(f\"DEBUG: First segment (first 50 chars): {processed_segments[0][:50]}\") # 添加调试信息\n\n    # 将返回字典的键名从 'output' 修改为 'content'\n    return {\n        'content': processed_segments\n    }\n","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"157404","name":"Group1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"input"}],"language":3,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"分割内容"},"outputs":[{"name":"content","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"179043","meta":{"position":{"x":863.0413555550103,"y":-686.9310990895111}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/Pgm9wXA4EipKhYkeEQJcLBlJnWb?from=from_copylink","input":{},"name":"image_infos","required":true,"type":"string"},{"description":"x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"移动transform_x","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"移动transform_y","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"163434","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"127923","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":1749,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_images","title":"add_images时间轴"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"158006","meta":{"position":{"x":617.575270767974,"y":461.68108547769566}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109802306060299","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"str_to_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"对象内容","input":{},"name":"obj","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":"https://p9-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/52d5a2caeb8a458f920d43431e5f986a.png~tplv-mdko3gqilj-image.png?rk3s=c8fe7ad5&x-expires=1775752105&x-signature=b90hFm7su2b9MHAHgGwTfq%2F2EYs%3D","rawMeta":{"type":1},"type":"literal"}},"name":"obj"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"字符转列表","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:str_to_list","title":"str_to_list"},"outputs":[{"name":"infos","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"159299","meta":{"position":{"x":1523.0574170137743,"y":-362.9491422342328}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439223843","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"imgs_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"图片高度","input":{},"name":"height","required":false,"type":"integer"},{"description":"图片列表，格式[\"https://a.png\",\"https://a.png\"]","input":{},"name":"imgs","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"对应剪映的转场动画名字   可选","input":{},"name":"transition","required":false,"type":"string"},{"description":"图片宽度","input":{},"name":"width","required":false,"type":"integer"},{"description":"对应剪映的入场动画名字   可选","input":{},"name":"in_animation","required":false,"type":"string"},{"description":"对应剪映的入场动画时长  可选","input":{},"name":"in_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的组合动画名字    可选","input":{},"name":"loop_animation","required":false,"type":"string"},{"description":"对应剪映的组合动画时长  可选","input":{},"name":"loop_animation_duration","required":false,"type":"integer"},{"description":"对应剪映的出场动画名字。可选","input":{},"name":"out_animation","required":false,"type":"string"},{"description":"对应剪映的出场动画时长  可选","input":{},"name":"out_animation_duration","required":false,"type":"integer"},{"description":"时间节点，只接收结构：[{\"start\":0,\"end\":4612}]，一般从audio_timeline节点的输出获取","input":{},"name":"timelines","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"},{"description":"对应剪映的转场动画时长 ，范围是500000-2500000  可选","input":{},"name":"transition_duration","required":false,"type":"integer"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"159299","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"imgs"},{"input":{"schema":{"schema":[],"type":"object"},"type":"list","value":{"content":{"blockID":"117044","name":"totalTimeline","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"integer","value":{"content":1734,"rawMeta":{"type":2},"type":"literal"}},"name":"height"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据时间线制作图片数据","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:imgs_infos","title":"imgs_infos"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"127923","meta":{"position":{"x":1983.0574170137759,"y":-362.9491422342328}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7478102722533834778","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"keyframes_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"对应offsets的值，长度要一致，比如1|2，或者1|2|1","input":{},"name":"values","required":true,"type":"string"},{"description":"视频宽度","input":{},"name":"width","required":false,"type":"integer"},{"description":"关键帧类型： KFTypePositionX: X轴移动，需要提供width参数，值会被除以width进行归一化  KFTypePositionY: Y轴移动，需要提供height参数，值会被除以height进行归一化  KFTypeRotation: 旋转角度，值范围必须在0-360度之间  UNIFORM_SCALE: 均匀缩放，值范围必须在0.01-5之间  KFTypeAlpha: 透明度，值范围必须在0-1之间","input":{},"name":"ctype","required":true,"type":"string"},{"description":"视频高度","input":{},"name":"height","required":false,"type":"integer"},{"description":"需要放置关键帧的位置比例，eg：0|100 这个就是代表在开始和结尾放置，0|50|100代表在开头，中间，结尾放置3个关键帧","input":{},"name":"offsets","required":true,"type":"string"},{"description":"轨道数据，add_images节点输出","input":{},"name":"segment_infos","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"s_id","input":{},"name":"id","required":true,"type":"string"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"type":"string","value":{"content":"KFTypePositionX","rawMeta":{"type":1},"type":"literal"}},"name":"ctype"},{"input":{"type":"string","value":{"content":"0|100","rawMeta":{"type":1},"type":"literal"}},"name":"offsets"},{"input":{"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"158006","name":"segment_infos","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"segment_infos"},{"input":{"type":"string","value":{"content":"-2880|66","rawMeta":{"type":1},"type":"literal"}},"name":"values"},{"input":{"type":"integer","value":{"content":1440,"rawMeta":{"type":2},"type":"literal"}},"name":"width"}],"settingOnError":{"dataOnErr":"{\n    \"keyframes_infos\": \"\"\n}","processType":2,"retryTimes":0,"switch":true,"timeoutMs":180000}},"nodeMeta":{"description":"关键帧数据生成器","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:keyframes_infos","title":"keyframes_infos移动"},"outputs":[{"description":"放入add_frames节点","name":"keyframes_infos","required":false,"type":"string"},{"name":"errorBody","readonly":true,"schema":[{"name":"errorMessage","readonly":true,"type":"string"},{"name":"errorCode","readonly":true,"type":"string"}],"type":"object"},{"name":"isSuccess","readonly":true,"type":"boolean"}]},"edges":null,"id":"110766","meta":{"position":{"x":1077.575270767974,"y":354.6310854776955}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7465608338500452404","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_keyframes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"关键帧数据，格式： [     {       \"offset\": 5000000,       \"property\": \"KFTypePositionX\",       \"segment_id\": \"acc5b516-046b-4eae-a179-f686f35e70a8\",       \"value\": 0     }   ]","input":{},"name":"keyframes","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"163434","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"110766","name":"keyframes_infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"keyframes"}],"settingOnError":{"dataOnErr":"{\n    \"draft_url\": \"\"\n}","processType":2,"retryTimes":0,"switch":true,"timeoutMs":180000}},"nodeMeta":{"description":"添加关键帧","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_keyframes","title":"add_keyframes"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"errorBody","readonly":true,"schema":[{"name":"errorMessage","readonly":true,"type":"string"},{"name":"errorCode","readonly":true,"type":"string"}],"type":"object"},{"name":"isSuccess","readonly":true,"type":"boolean"}]},"edges":null,"id":"116774","meta":{"position":{"x":1537.575270767974,"y":354.6310854776955}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"async function main({ params }: Args): Promise<Output> {\n    // Assuming the audio durations are under params.input, where some might be null\n    const validAudios = params.input.filter(duration => duration !== null);\n    const audioCount = validAudios.length;  // Count only valid audio durations\n\n    return {\n        audio_count: audioCount\n    };\n}\n","inputParameters":[{"input":{"schema":{"type":"float"},"type":"list","value":{"content":{"blockID":"194925","name":"duration_list","source":"block-output"},"rawMeta":{"type":102},"type":"ref"}},"name":"input"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码"},"outputs":[{"name":"key0","required":false,"type":"string"}]},"edges":null,"id":"108744","meta":{"position":{"x":143.05741701377428,"y":-362.9491422342328}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7478102722533834778","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"keyframes_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"对应offsets的值，长度要一致，比如1|2，或者1|2|1","input":{},"name":"values","required":true,"type":"string"},{"description":"视频宽度","input":{},"name":"width","required":false,"type":"integer"},{"description":"关键帧类型： KFTypePositionX: X轴移动，需要提供width参数，值会被除以width进行归一化  KFTypePositionY: Y轴移动，需要提供height参数，值会被除以height进行归一化  KFTypeRotation: 旋转角度，值范围必须在0-360度之间  UNIFORM_SCALE: 均匀缩放，值范围必须在0.01-5之间  KFTypeAlpha: 透明度，值范围必须在0-1之间","input":{},"name":"ctype","required":true,"type":"string"},{"description":"视频高度","input":{},"name":"height","required":false,"type":"integer"},{"description":"需要放置关键帧的位置比例，eg：0|100 这个就是代表在开始和结尾放置，0|50|100代表在开头，中间，结尾放置3个关键帧","input":{},"name":"offsets","required":true,"type":"string"},{"description":"轨道数据，add_images节点输出","input":{},"name":"segment_infos","required":true,"schema":{"schema":[{"description":"结束时间","input":{},"name":"end","required":true,"type":"integer"},{"description":"s_id","input":{},"name":"id","required":true,"type":"string"},{"description":"开始时间","input":{},"name":"start","required":true,"type":"integer"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"type":"string","value":{"content":"KFTypeAlpha","rawMeta":{"type":1},"type":"literal"}},"name":"ctype"},{"input":{"type":"string","value":{"content":"0|100","rawMeta":{"type":1},"type":"literal"}},"name":"offsets"},{"input":{"schema":{"schema":[{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"158006","name":"segment_infos","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"segment_infos"},{"input":{"type":"string","value":{"content":"0.5|0.5","rawMeta":{"type":1},"type":"literal"}},"name":"values"},{"input":{"type":"integer","value":{"content":1440,"rawMeta":{"type":2},"type":"literal"}},"name":"width"}],"settingOnError":{"dataOnErr":"{\n    \"keyframes_infos\": \"\"\n}","processType":2,"retryTimes":0,"switch":true,"timeoutMs":180000}},"nodeMeta":{"description":"关键帧数据生成器","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"剪映小助手数据生成器:keyframes_infos","title":"keyframes_infos透明度"},"outputs":[{"description":"放入add_frames节点","name":"keyframes_infos","required":false,"type":"string"},{"name":"errorBody","readonly":true,"schema":[{"name":"errorMessage","readonly":true,"type":"string"},{"name":"errorCode","readonly":true,"type":"string"}],"type":"object"},{"name":"isSuccess","readonly":true,"type":"boolean"}]},"edges":null,"id":"200446","meta":{"position":{"x":1077.575270767974,"y":568.7310854776954}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7465608338500452404","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_keyframes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"关键帧数据，格式： [     {       \"offset\": 5000000,       \"property\": \"KFTypePositionX\",       \"segment_id\": \"acc5b516-046b-4eae-a179-f686f35e70a8\",       \"value\": 0     }   ]","input":{},"name":"keyframes","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"163434","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"200446","name":"keyframes_infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"keyframes"}],"settingOnError":{"dataOnErr":"{\n    \"draft_url\": \"\"\n}","processType":2,"retryTimes":0,"switch":true,"timeoutMs":180000}},"nodeMeta":{"description":"添加关键帧","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:add_keyframes","title":"add_keyframes_1"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"errorBody","readonly":true,"schema":[{"name":"errorMessage","readonly":true,"type":"string"},{"name":"errorCode","readonly":true,"type":"string"}],"type":"object"},{"name":"isSuccess","readonly":true,"type":"boolean"}]},"edges":null,"id":"300216","meta":{"position":{"x":1537.575270767974,"y":568.7310854776954}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"string","value":{"content":{"blockID":"412892","name":"content","source":"block-output"},"type":"ref"}}},"operator":10}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器"}},"edges":null,"id":"158193","meta":{"position":{"x":-516.9586444449887,"y":-699.831099089511}},"type":"8","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"mergeGroups":[{"name":"Group1","variables":[{"type":"string","value":{"content":{"blockID":"121637","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},{"type":"string","value":{"content":{"blockID":"412892","name":"content","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合"},"outputs":[{"name":"Group1","type":"string"}]},"edges":null,"id":"157404","meta":{"position":{"x":403.04135555501034,"y":-687.9310990895111}},"type":"32","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}}],"versions":{"batch":"v2","loop":"v2"}}}