{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531682370685157410","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"100001","sourcePortID":"","targetNodeID":"194701"},{"sourceNodeID":"904077","sourcePortID":"","targetNodeID":"900001"},{"sourceNodeID":"194701","sourcePortID":"","targetNodeID":"194443"},{"sourceNodeID":"194443","sourcePortID":"","targetNodeID":"142731"},{"sourceNodeID":"194443","sourcePortID":"","targetNodeID":"143241"},{"sourceNodeID":"194443","sourcePortID":"","targetNodeID":"196872"},{"sourceNodeID":"142731","sourcePortID":"","targetNodeID":"148554"},{"sourceNodeID":"143241","sourcePortID":"","targetNodeID":"144065"},{"sourceNodeID":"1183625","sourcePortID":"","targetNodeID":"144065"},{"sourceNodeID":"144065","sourcePortID":"loop-output","targetNodeID":"148554"},{"sourceNodeID":"167246","sourcePortID":"","targetNodeID":"148554"},{"sourceNodeID":"1072425","sourcePortID":"loop-output","targetNodeID":"148554"},{"sourceNodeID":"1051688","sourcePortID":"loop-output","targetNodeID":"148554"},{"sourceNodeID":"109800","sourcePortID":"","targetNodeID":"148554"},{"sourceNodeID":"148554","sourcePortID":"","targetNodeID":"150526"},{"sourceNodeID":"150526","sourcePortID":"","targetNodeID":"168118"},{"sourceNodeID":"168118","sourcePortID":"","targetNodeID":"103574"},{"sourceNodeID":"103574","sourcePortID":"","targetNodeID":"1006722"},{"sourceNodeID":"1805868","sourcePortID":"","targetNodeID":"157087"},{"sourceNodeID":"157087","sourcePortID":"","targetNodeID":"1313867"},{"sourceNodeID":"1313867","sourcePortID":"","targetNodeID":"1573763"},{"sourceNodeID":"1573763","sourcePortID":"","targetNodeID":"160635"},{"sourceNodeID":"1982583","sourcePortID":"","targetNodeID":"104782"},{"sourceNodeID":"104782","sourcePortID":"","targetNodeID":"904077"},{"sourceNodeID":"1671820","sourcePortID":"","targetNodeID":"1808004"},{"sourceNodeID":"1808004","sourcePortID":"","targetNodeID":"1982583"},{"sourceNodeID":"143241","sourcePortID":"","targetNodeID":"1072425"},{"sourceNodeID":"143241","sourcePortID":"","targetNodeID":"1051688"},{"sourceNodeID":"143241","sourcePortID":"","targetNodeID":"167246"},{"sourceNodeID":"143241","sourcePortID":"","targetNodeID":"1183625"},{"sourceNodeID":"160635","sourcePortID":"","targetNodeID":"120041"},{"sourceNodeID":"120041","sourcePortID":"","targetNodeID":"1537147"},{"sourceNodeID":"1537147","sourcePortID":"","targetNodeID":"194997"},{"sourceNodeID":"196872","sourcePortID":"","targetNodeID":"1045640"},{"sourceNodeID":"1045640","sourcePortID":"","targetNodeID":"1487547"},{"sourceNodeID":"1487547","sourcePortID":"","targetNodeID":"109800"},{"sourceNodeID":"194997","sourcePortID":"","targetNodeID":"134550"},{"sourceNodeID":"134550","sourcePortID":"","targetNodeID":"1173260"},{"sourceNodeID":"1006722","sourcePortID":"","targetNodeID":"1073078"},{"sourceNodeID":"1173260","sourcePortID":"","targetNodeID":"1729353"},{"sourceNodeID":"1729353","sourcePortID":"","targetNodeID":"1933504"},{"sourceNodeID":"1933504","sourcePortID":"","targetNodeID":"1428261"},{"sourceNodeID":"1428261","sourcePortID":"","targetNodeID":"1527144"},{"sourceNodeID":"1527144","sourcePortID":"","targetNodeID":"1485631"},{"sourceNodeID":"1485631","sourcePortID":"","targetNodeID":"1671820"},{"sourceNodeID":"1073078","sourcePortID":"","targetNodeID":"1805868"}],"nodes":[{"blocks":[],"data":{"nodeMeta":{"description":"工作流的起始节点，用于设定启动工作流需要的信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg","subTitle":"","title":"开始"},"outputs":[{"defaultValue":"平凡的世界","description":"书籍名字","name":"book_name","required":true,"type":"string"},{"description":"书籍作者","name":"author_name","required":true,"type":"string"},{"defaultValue":"徐老师AI","description":"右下角（署名）","name":"ip_name","required":true,"type":"string"},{"description":"文案（不填则智能体出）","name":"text","required":true,"type":"string"}],"trigger_parameters":[{"description":"书籍名字","name":"book_name","required":true,"type":"string"},{"description":"书籍作者","name":"author_name","required":true,"type":"string"},{"description":"右下角（署名）","name":"ip_name","required":true,"type":"string"},{"description":"文案（不填则智能体出）","name":"text","required":true,"type":"string"}]},"edges":null,"id":"100001","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2822.759220994493,"y":-575.908155523708}},"type":"1"},{"blocks":[],"data":{"inputs":{"content":{"type":"string","value":{"content":"草稿地址：{{draft_url}}","type":"literal"}},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"104782","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"output"}],"streamingOutput":false,"terminatePlan":"useAnswerContent"},"nodeMeta":{"description":"工作流的最终节点，用于返回工作流运行后的结果信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg","subTitle":"","title":"结束"}},"edges":null,"id":"900001","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3276.457494587221,"y":690.3342376517221}},"type":"2"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"book_name","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"book_name","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"author_name","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"author_name","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"text","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"text","right":{}}],"llmParam":[{"input":{"type":"string","value":{"content":"default_val","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"float","value":{"content":"0.7","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"topP","right":{}},{"input":{"type":"float","value":{"content":"0","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"frequencyPenalty","right":{}},{"input":{"type":"integer","value":{"content":"16384","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"豆包·1.5·Pro·深度思考·128K","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1744866658","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"书籍名称：{{book_name}}\n书籍作者：{{author_name}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"# 角色\n你是一个擅长生成书籍对话口播字幕文案的助手，能够根据给定的书籍名称和作者，创作视频对话口播字幕文案。对话角色设定为主持人和拟人化的书籍，采用跨时代的形式展开对话。\n\n## 技能\n### 技能1: 生成对话文案\n1. 当用户提供《具体书籍名称》及作者等信息后，深度解读书籍内容。\n2. 将书籍拟人化，如“富爸爸老师，请问......”，“富爸爸老师，为什么......”，其中后续问题要紧密结合讲解书籍里的核心痛点，吸引观众兴趣。\n3. 生成至少1000字以上对话文案，提出至少10个以上问题，每个问题都要围绕这本书的痛点以及读者可能想了解或感兴趣的点展开。解答问题时，需结合现实生活中的实际情况或案例以及书籍知识点进行说明。\n4. 文案中不能仅有提问和回答情节，要加入对话情节。当说到重点或真相时，提问的人要说出惊讶的话，使整个视频看起来更像真实的对话或采访。\n5. 文案内容需包含每个问题对应的对话、解释、现如今是什么情况、之后该怎么做等部分。对于较长的台词，要用标点符号合理拆分为短句, 且每个短句不能超过10个字。\n6. 回复内容说明：role_name=角色名称，固定2个，主持人和书籍名称， order=台词出场顺序，也是台词 唯一编号，line=角色台词，口播字幕文案\n7.如果用户输入了{{text}}，请直接对文案进行台词编号\n  - **回复示例**：\n```json\n{\n    \"role_list\": [\n        {\n            \"role_name\": \"[主持人]\"\n        },\n        {\n            \"role_name\": \"[书籍]\"\n        }\n    ],\n    \"text_list\":[\n                {\n                   \"order\": 1,\n                    \"line\": \"[台词]\",\n                   \"role_name\":\"主持人\"\n                },\n                {\n                   \"order\": 2,\n                    \"line\": \"[台词]\",\n                   \"role_name\":\"书籍\"\n                },\n                {\n                   \"order\": 3,\n                    \"line\": \"[台词]\",\n                   \"role_name\":\"主持人\"\n                },\n                {\n                   \"order\": 4,\n                    \"line\": \"[台词]\",\n                   \"role_name\":\"书籍2\"\n                },\n                {\n                   \"order\": 5,\n                    \"line\": \"[台词]\",\n                   \"role_name\":\"主持人\"\n                },\n                {\n                   \"order\": 6,\n                    \"line\": \"[台词]\",\n                   \"role_name\":\"书籍\"\n                }\n    ]\n}\n```\n\n## 限制\n- 只围绕用户提供的书籍相关内容生成对话文案，拒绝回答与书籍无关的话题。\n- 文案需满足用户提出的格式和要求，不能偏离框架设定，尤其要注意将过长台词用标点符号拆分为短句。\n- 采用长短句形式进行提问和回答， 用逗号将长句进行分隔。","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":180000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"大模型_生成对话文案"},"outputs":[{"input":{},"name":"role_list","required":false,"schema":{"schema":[{"name":"role_name","type":"string"}],"type":"object"},"type":"list"},{"input":{},"name":"text_list","required":false,"schema":{"schema":[{"name":"role_name","type":"string"},{"name":"line","type":"string"},{"name":"order","type":"integer"}],"type":"object"},"type":"list"},{"input":{},"name":"reasoning_content","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"194443","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1813.085714612375,"y":-639.5283866983912}},"type":"3"},{"blocks":[],"data":{"inputs":{"canvasSchema":"{\"version\":\"6.0.0-rc2\",\"width\":1920,\"height\":1080,\"backgroundColor\":\"#ffffffff\",\"customVariableRefs\":[{\"variableId\":\"ylybJwSeHJUqSrTa7i7qz\",\"objectId\":\"wCvN7lAbPlU5Ophxcxkgd\",\"variableName\":\"ip_name\"}],\"objects\":[{\"subTargetCheck\":false,\"interactive\":false,\"width\":1920.0165,\"height\":1102.6058,\"backgroundColor\":\"\",\"padding\":0,\"customFixedHeight\":1102.6057653150142,\"customId\":\"PDdTAczQl7xu7FcyinRk0\",\"customType\":\"img\",\"type\":\"Group\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":-1.6265,\"top\":-21.834,\"fill\":\"rgb(0,0,0)\",\"stroke\":null,\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"clipPath\":{\"rx\":0,\"ry\":0,\"width\":1920.0165,\"height\":1102.6058,\"backgroundColor\":\"\",\"padding\":0,\"type\":\"Rect\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":-960.0082,\"top\":-551.3029,\"fill\":\"rgb(0,0,0)\",\"stroke\":null,\"strokeWidth\":1,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"inverted\":false,\"absolutePositioned\":false},\"layoutManager\":{\"type\":\"layoutManager\",\"strategy\":\"fit-content\"},\"objects\":[{\"cropX\":0,\"cropY\":0,\"width\":1920,\"height\":1080,\"backgroundColor\":\"\",\"padding\":0,\"customFixedType\":\"fill\",\"type\":\"Image\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":-980.9829,\"top\":-551.8029,\"fill\":\"rgb(0,0,0)\",\"stroke\":null,\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1.0219,\"scaleY\":1.0219,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"src\":\"https://p9-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/bbfc0bbb8bce4e97b0bc6d71da8bca18.png~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1777817906&x-signature=cOuuBxOPg%2BcpUbNw9ZyPMcXLTQI%3D\",\"crossOrigin\":null,\"filters\":[]},{\"rx\":0,\"ry\":0,\"width\":1920.0165,\"height\":1102.6058,\"backgroundColor\":\"\",\"padding\":0,\"type\":\"Rect\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":-960.0082,\"top\":-551.3029,\"fill\":\"#00000000\",\"stroke\":\"#000000ff\",\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0}]},{\"fontSize\":72,\"fontWeight\":\"normal\",\"fontFamily\":\"抖音美好体\",\"fontStyle\":\"normal\",\"lineHeight\":1.2,\"text\":\"@姬先森-AI频道\",\"charSpacing\":0,\"textAlign\":\"left\",\"styles\":[],\"pathStartOffset\":0,\"pathSide\":\"left\",\"pathAlign\":\"baseline\",\"underline\":false,\"overline\":false,\"linethrough\":false,\"textBackgroundColor\":\"\",\"direction\":\"ltr\",\"minWidth\":20,\"splitByGrapheme\":true,\"width\":720.8465,\"height\":68.0415,\"editable\":true,\"backgroundColor\":\"\",\"padding\":18,\"customFixedHeight\":68.04149035695195,\"customId\":\"wCvN7lAbPlU5Ophxcxkgd\",\"customType\":\"block_text\",\"type\":\"Textbox\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":1339.8581,\"top\":987.5635,\"fill\":\"#0000006d\",\"stroke\":\"#000000ff\",\"strokeWidth\":0,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"clipPath\":{\"rx\":0,\"ry\":0,\"width\":756.8465,\"height\":104.0415,\"backgroundColor\":\"\",\"padding\":0,\"type\":\"Rect\",\"version\":\"6.0.0-rc2\",\"originX\":\"left\",\"originY\":\"top\",\"left\":-378.4232,\"top\":-52.0207,\"fill\":\"rgb(0,0,0)\",\"stroke\":null,\"strokeWidth\":1,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeDashOffset\":0,\"strokeLineJoin\":\"miter\",\"strokeUniform\":false,\"strokeMiterLimit\":4,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"fillRule\":\"nonzero\",\"paintFirst\":\"fill\",\"globalCompositeOperation\":\"source-over\",\"skewX\":0,\"skewY\":0,\"inverted\":false,\"absolutePositioned\":false}}],\"background\":\"#ffffffff\"}","inputParameters":[{"id":"ylybJwSeHJUqSrTa7i7qz","input":{"type":"string","value":{"content":{"blockID":"100001","name":"ip_name","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"ip_name"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":60000}},"nodeMeta":{"description":"自定义画板排版，支持引用添加文本和图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon_DrawingBoard_v2.jpg","mainColor":"#FF4DC3","subTitle":"画板","title":"画板_对话背景"},"outputs":[{"assistType":2,"name":"data","type":"string"},{"name":"msg","type":"string"}]},"edges":null,"id":"142731","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":342.93855956666334,"y":-867.002787422301}},"type":"23"},{"blocks":[{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"144065","name":"text_list.line","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"float","value":{"content":1.1,"rawMeta":{"type":4},"type":"literal"}},"name":"speed_ratio"},{"input":{"assistType":12,"type":"string","value":{"content":"7426725529589645339","rawMeta":{"fileName":"解说小明","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748656300&x-signature=myuAFWCmxnzQBolJPLaK0JbCfR0%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis"},"outputs":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"189102","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":640,"y":0}},"type":"4"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"string","value":{"content":{"blockID":"144065","name":"text_list.role_name","source":"block-output"},"type":"ref"}}},"operator":7,"right":{"input":{"type":"string","value":{"content":"主持人","rawMeta":{"type":1},"type":"literal"}}}}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器_1"}},"edges":null,"id":"117723","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":180,"y":94.15000000000002}},"type":"8"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"144065","name":"text_list.line","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"float","value":{"content":1.05,"rawMeta":{"type":4},"type":"literal"}},"name":"speed_ratio"},{"input":{"assistType":12,"type":"string","value":{"content":"7426720361753903141","rawMeta":{"fileName":"爽快思思","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748656300&x-signature=myuAFWCmxnzQBolJPLaK0JbCfR0%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_1"},"outputs":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"1688228","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":640,"y":214.10000000000002}},"type":"4"},{"blocks":[],"data":{"inputs":{"mergeGroups":[{"name":"Group1","variables":[{"type":"string","value":{"content":{"blockID":"189102","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},{"type":"string","value":{"content":{"blockID":"1688228","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合"},"outputs":[{"name":"Group1","type":"string"}]},"edges":null,"id":"158565","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1100,"y":106.05000000000003}},"type":"32"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7474863657353117750","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"158565","name":"Group1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"mp3_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面查看案例","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/58f8745c794f452a9b0c572c9a4b3e3a~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748656597&x-signature=mOmChk%2FTolYSNYTulD8KkshfCnk%3D","subtitle":"视频合成_剪映小助手:get_audio_duration","title":"get_audio_duration"},"outputs":[{"name":"duration","required":false,"type":"integer"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"158996","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1560,"y":95.05000000000003}},"type":"4"}],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"schema":[{"name":"role_name","type":"string"},{"name":"line","type":"string"},{"name":"order","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"143241","name":"text_list2","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"text_list"}],"loopCount":{"type":"integer","value":{"content":"10","type":"literal"}},"loopType":"array","variableParameters":[]},"nodeMeta":{"description":"用于通过设定循环次数和逻辑，重复执行一系列任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","mainColor":"#00B2B2","subTitle":"循环","title":"循环_2"},"outputs":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"158565","name":"Group1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_list"},{"input":{"schema":{"type":"integer"},"type":"list","value":{"content":{"blockID":"158996","name":"duration","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"duration_list"}]},"edges":[{"sourceNodeID":"117723","sourcePortID":"true","targetNodeID":"189102"},{"sourceNodeID":"189102","sourcePortID":"","targetNodeID":"158565"},{"sourceNodeID":"144065","sourcePortID":"loop-function-inline-output","targetNodeID":"117723"},{"sourceNodeID":"117723","sourcePortID":"false","targetNodeID":"1688228"},{"sourceNodeID":"1688228","sourcePortID":"","targetNodeID":"158565"},{"sourceNodeID":"158565","sourcePortID":"","targetNodeID":"158996"},{"sourceNodeID":"158996","sourcePortID":"","targetNodeID":"144065","targetPortID":"loop-function-inline-input"}],"id":"144065","meta":{"canvasPosition":{"x":-396.10407948256335,"y":-389.7027874223011},"defaultCollapsed":false,"position":{"x":342.93855956666334,"y":-386.8027874223012}},"type":"21"},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    const { bg_image_url, audio_list1, duration_list1, role_list, text_list,audio_list2, duration_list2,audio_list3, duration_list3,keywords,\n        start_audio_list,start_duration_list } = params; \n\n    const audio_list = [...audio_list1, ...audio_list2, ...audio_list3];\n    const duration_list = [...duration_list1, ...duration_list2, ...duration_list3];\n\n    let audioStartTime = 0;\n    let maxDuration = 0;\n    let initialStartTime = 0;\n\n\n    const initialAudioData = [];\n    for(let i=0; i< start_audio_list.length;i++){\n        const duration = start_duration_list[i];\n        initialAudioData.push({\n            audio_url: start_audio_list[i],\n            duration,\n            volume: 2,\n            start: audioStartTime,\n            end: audioStartTime + duration\n        });\n\n       \n        audioStartTime += duration;\n        maxDuration = audioStartTime;\n        initialStartTime += duration;\n    }\n\n    const  start_text_timelines1 = [];\n    start_text_timelines1.push(\n               {\n                   start: 0,\n                   end: start_duration_list[0]\n               }\n       );\n\n\n      //https://p9-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/373c3e491f214adfa3934a507e1c92e4.MP3~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1777426600&x-signature=Bp8XLZFWPpP1SiIQRKkVxluOl%2BU%3D&x-wf-file_name=%E5%92%9A%E9%9F%B3%E6%95%88.MP3\n      const start_audio_text1 =[];\n      start_audio_text1.push({\n          audio_url: \"https://p6-bot-sign.byteimg.com/tos-cn-i-v4nquku3lp/0562121f72f943f2802c7e8dc49e0e7b.MP3~tplv-v4nquku3lp-image.image?rk3s=68e6b6b5&x-expires=1749305401&x-signature=ZiBfMBfiHBWUnk6iqQPFe%2FFdfDM%3D\",\n          duration: 548571,\n          volume: 2,\n          start:  0,\n          end:   548571\n      });\n\n       const  start_text_timelines2 = [];\n       start_text_timelines2.push(\n                  {\n                      start: start_duration_list[0],\n                      end:  start_duration_list[0]+start_duration_list[1]\n                  }\n          );\n        const start_audio_text2 =[];\n        start_audio_text2.push({\n            audio_url: \"https://p9-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/2ae7ccd877ea4c79b4fcbcfe38170b54.MP3~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1777425687&x-signature=m4S898PliWoqTBPavUmbcGKWozY%3D&x-wf-file_name=%E5%AD%97%E5%B9%95%E5%87%BA%E5%9C%BA.MP3\",\n            duration: 862040,\n            volume: 2,\n            start:  start_duration_list[0],\n            end:  start_duration_list[0] + 862040\n        });\n\n       const  start_text_timelines3 = [];\n       start_text_timelines3.push(\n                  {\n                      start: start_duration_list[0]+start_duration_list[1],\n                      end: start_duration_list[0]+start_duration_list[1]+start_duration_list[2]\n                  }\n          );\n    \n    // 处理音频数据\n    const audioData = [];\n    \n\n    for (let i = 0; i < audio_list.length && i < duration_list.length; i++) {\n        const duration = duration_list[i];\n        audioData.push({\n            audio_url: audio_list[i],\n            duration,\n            volume: 2,\n            start: audioStartTime,\n            end: audioStartTime + duration\n        });\n        audioStartTime += duration;\n        maxDuration = audioStartTime;\n    }\n\n\n    // 书籍拟人化图片\n    var role1_img_url = \"https://p9-bot-workflow-sign.byteimg.com/tos-cn-i-mdko3gqilj/7153ce955e1b4d51ab2e3972846fb13e.png~tplv-mdko3gqilj-image.image?rk3s=81d4c505&x-expires=1777338929&x-signature=LLDTeL38s5rfHt7%2BG1%2FvGFrwa%2FQ%3D&x-wf-file_name=CodeL.png\";\n    var role2_img_url = \"https://s.coze.cn/t/MRdXPFzGLOw/\";\n\n    const result = generateVideoTimeline(\n        {\n            role_list: role_list,\n            text_list: text_list,\n            audio_list: audio_list,\n            duration_list: duration_list\n        },\n        role1_img_url,\n        role2_img_url,\n        keywords,\n        initialStartTime\n    );\n\n     // 处理背景图片\n     const bgImageData = [\n        {\n            image_url: bg_image_url,\n            width: 1920,\n            height: 1080,\n            start: 0,\n            end: maxDuration + 1000000\n        }\n    ];\n    \n\n    // 构建输出对象\n    const ret = {\n        \"role\":  result.role,\n        \"bgImageData\": JSON.stringify(bgImageData),\n        \"audioData\": JSON.stringify(audioData),\n        \"initialAudioData\": JSON.stringify(initialAudioData),\n        \"roleImage1\": JSON.stringify(result.role[0].images),\n        \"roleImage2\": JSON.stringify(result.role[1].images),\n        \"caption_text1\": {\n            \"text1\": result.role[0].texts,\n            \"timelines1\": result.role[0].timelines\n        },\n        \"caption_text2\": {\n            \"text2\": result.role[1].texts,\n            \"timelines2\": result.role[1].timelines\n        },\n        \"captions1\": JSON.stringify(result.role[0].captions),\n        \"captions2\": JSON.stringify(result.role[1].captions),\n        \"start_timelines1\": start_text_timelines1,\n        \"start_timelines2\": start_text_timelines2,\n        \"start_timelines3\": start_text_timelines3,\n        \"start_audio_text1\": JSON.stringify(start_audio_text1),\n        \"start_audio_text2\": JSON.stringify(start_audio_text2)\n    };\n\n    return ret;\n}\n\n\n\nfunction generateVideoTimeline(data, imageUrl1, imageUrl2, keywords = [], initialStartTime = 0) {\n    const { role_list, text_list, duration_list } = data;\n\n    // 按order排序台词\n    const sortedTexts = [...text_list].sort((a, b) => a.order - b.order);\n    \n    // 初始化时间轴起点\n    let currentEnd = initialStartTime;  // 使用传入的初始时间\n    const roleMap = new Map();\n\n    // 换行处理函数\n    const splitLongLines = (line) => {\n        const maxLength = 10;\n        if (line.length <= maxLength) return line;\n        return line.replace(new RegExp(`(.{${maxLength}})`, \"g\"), \"$1\\n\").replace(/\\n$/, \"\");\n    };\n\n    for (const text of sortedTexts) {\n        // 获取当前台词的持续时间\n        const duration = duration_list[text.order - 1];\n        const start = currentEnd;  // 起始时间基于当前累计值\n        const end = start + duration;\n        currentEnd = end;\n\n        // 标准化角色名称匹配（处理方括号）\n        const matchedRole = role_list.find(role => \n            role.role_name.replace(/[[\\]]/g, \"\") === text.role_name\n        );\n\n        if (!matchedRole) continue;\n\n        const roleKey = matchedRole.role_name;\n        \n        // 初始化角色数据结构\n        if (!roleMap.has(roleKey)) {\n            roleMap.set(roleKey, {\n                role_name: roleKey,\n                texts: [],\n                timelines: [],\n                images: [],\n                captions: []\n            });\n        }\n\n        const roleData = roleMap.get(roleKey);\n        \n        // 处理台词文本（换行分割）\n        const processedLine = splitLongLines(text.line);\n        roleData.texts.push(processedLine);\n        roleData.timelines.push({ start, end });\n\n        // 生成 captions 对象\n        const matchedKeywords = keywords.filter(keyword => processedLine.includes(keyword));\n        const uniqueKeywords = [...new Set(matchedKeywords)];\n        const caption = {\n            start,  // 使用调整后的时间\n            end,    // 使用调整后的时间\n            text: processedLine,\n            in_animation: \"羽化向右擦开\"\n        };\n        if (uniqueKeywords.length > 0) {\n            caption.keyword = uniqueKeywords.join('|');\n            caption.keyword_color = \"#fe8a80\";\n            caption.keyword_font_size = 10;\n            caption.font_size = 10;\n        }\n        roleData.captions.push(caption);\n        \n        // 添加图片配置\n        const imageUrl = role_list.indexOf(matchedRole) === 0 ? imageUrl1 : imageUrl2;\n        const lastImage = roleData.images[roleData.images.length - 1];\n        if (lastImage && lastImage.end === start) {  // 时间衔接判断依然有效\n            lastImage.end = end;\n        } else {\n            roleData.images.push({\n                image_url: imageUrl,\n                in_animation: \"轻微放大\",\n                width: 300,\n                height: 300,\n                start,  // 使用调整后的时间\n                end    // 使用调整后的时间\n            });\n        }\n    }\n\n    return { role: Array.from(roleMap.values()) };\n}\n\n\n\n// function generateVideoTimeline(data, imageUrl1, imageUrl2, keywords = []) {\n//     const { role_list, text_list, duration_list } = data;\n\n//     // 按order排序台词\n//     const sortedTexts = [...text_list].sort((a, b) => a.order - b.order);\n    \n//     // 计算时间轴并分组\n//     let currentEnd = 0;\n//     const roleMap = new Map();\n\n//     // 换行处理函数\n//     const splitLongLines = (line) => {\n//         const maxLength = 10;\n//         if (line.length <= maxLength) return line;\n//         return line.replace(new RegExp(`(.{${maxLength}})`, \"g\"), \"$1\\n\").replace(/\\n$/, \"\");\n//     };\n\n//     for (const text of sortedTexts) {\n//         // 获取当前台词的持续时间\n//         const duration = duration_list[text.order - 1];\n//         const start = currentEnd;\n//         const end = start + duration;\n//         currentEnd = end;\n\n//         // 标准化角色名称匹配（处理方括号）\n//         const matchedRole = role_list.find(role => \n//             role.role_name.replace(/[[\\]]/g, \"\") === text.role_name\n//         );\n\n//         if (!matchedRole) continue;\n\n//         const roleKey = matchedRole.role_name;\n        \n//         // 初始化角色数据结构\n//         if (!roleMap.has(roleKey)) {\n//             roleMap.set(roleKey, {\n//                 role_name: roleKey,\n//                 texts: [],\n//                 timelines: [],\n//                 images: [],\n//                 captions: []  // 新增 captions 集合\n//             });\n//         }\n\n//         const roleData = roleMap.get(roleKey);\n        \n//         // 处理台词文本（换行分割）\n//         const processedLine = splitLongLines(text.line);\n//         roleData.texts.push(processedLine);\n//         roleData.timelines.push({ start, end });\n\n//         // 生成 captions 对象（含关键词匹配逻辑）\n//         const matchedKeywords = keywords.filter(keyword => processedLine.includes(keyword));\n//         const uniqueKeywords = [...new Set(matchedKeywords)];\n//         const caption = {\n//             start,\n//             end,\n//             text: processedLine,\n//             in_animation: \"羽化向右擦开\"\n//         };\n//         if (uniqueKeywords.length > 0) {\n//             caption.keyword = uniqueKeywords.join('|');\n//             caption.keyword_color = \"#fe8a80\";\n//             caption.keyword_font_size = 10;\n//             caption.font_size = 10;\n//         }\n//         roleData.captions.push(caption);  // 添加到 captions 集合\n        \n//         // 添加图片配置（合并连续时间段逻辑不变）\n//         const imageUrl = role_list.indexOf(matchedRole) === 0 ? imageUrl1 : imageUrl2;\n//         const lastImage = roleData.images[roleData.images.length - 1];\n//         if (lastImage && lastImage.end === start) {\n//             lastImage.end = end;\n//         } else {\n//             roleData.images.push({\n//                 image_url: imageUrl,\n//                 in_animation: \"轻微放大\",\n//                 width: 300,\n//                 height: 300,\n//                 start,\n//                 end\n//             });\n//         }\n//     }\n\n//     return { role: Array.from(roleMap.values()) };\n// }\n\n\n\n\n\n","functionID":"38wbejnf9wtr6","inputParameters":[{"input":{"assistType":2,"type":"string","value":{"content":{"blockID":"142731","name":"data","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":7},"type":"ref"}},"left":{},"name":"bg_image_url","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"144065","name":"audio_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"audio_list2","right":{}},{"input":{"schema":{"type":"integer"},"type":"list","value":{"content":{"blockID":"144065","name":"duration_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":100},"type":"ref"}},"left":{},"name":"duration_list2","right":{}},{"input":{"schema":{"schema":[{"name":"role_name","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"194443","name":"role_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"role_list","right":{}},{"input":{"schema":{"schema":[{"name":"role_name","type":"string"},{"name":"line","type":"string"},{"name":"order","type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"143241","name":"text_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"text_list","right":{}},{"input":{"schema":{"type":"integer"},"type":"list","value":{"content":{"blockID":"1072425","name":"duration_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":100},"type":"ref"}},"left":{},"name":"duration_list1","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"1072425","name":"audio_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"audio_list1","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"1051688","name":"audio_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"audio_list3","right":{}},{"input":{"schema":{"type":"integer"},"type":"list","value":{"content":{"blockID":"1051688","name":"duration_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":100},"type":"ref"}},"left":{},"name":"duration_list3","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"167246","name":"keywords","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"keywords","right":{}},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"109800","name":"start_audio_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":99},"type":"ref"}},"left":{},"name":"start_audio_list","right":{}},{"input":{"schema":{"type":"integer"},"type":"list","value":{"content":{"blockID":"109800","name":"start_duration_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":100},"type":"ref"}},"left":{},"name":"start_duration_list","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"代码"},"outputs":[{"input":{},"name":"role","required":false,"schema":{"schema":[{"name":"role_name","type":"string"},{"name":"texts","schema":{"type":"string"},"type":"list"},{"name":"timelines","schema":{"schema":[{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list"},{"name":"images","schema":{"schema":[{"name":"image_url","type":"string"},{"name":"width","type":"integer"},{"name":"height","type":"integer"},{"name":"start","type":"integer"},{"name":"end","type":"integer"}],"type":"object"},"type":"list"}],"type":"object"},"type":"list"},{"input":{},"name":"bgImageData","required":false,"type":"string"},{"input":{},"name":"audioData","required":false,"type":"string"},{"input":{},"name":"roleImage1","required":false,"type":"string"},{"input":{},"name":"roleImage2","required":false,"type":"string"},{"input":{},"name":"caption_text1","required":false,"schema":[{"name":"text1","schema":{"type":"string"},"type":"list"},{"name":"timelines1","schema":{"schema":[],"type":"object"},"type":"list"}],"type":"object"},{"input":{},"name":"caption_text2","required":false,"schema":[{"name":"text2","schema":{"type":"string"},"type":"list"},{"name":"timelines2","schema":{"schema":[],"type":"object"},"type":"list"}],"type":"object"},{"input":{},"name":"captions1","required":false,"type":"string"},{"input":{},"name":"captions2","required":false,"type":"string"},{"input":{},"name":"initialAudioData","required":false,"type":"string"},{"input":{},"name":"start_timelines1","required":false,"schema":{"schema":[],"type":"object"},"type":"list"},{"input":{},"name":"start_timelines2","required":false,"schema":{"schema":[],"type":"object"},"type":"list"},{"input":{},"name":"start_timelines3","required":false,"schema":{"schema":[],"type":"object"},"type":"list"},{"input":{},"name":"start_audio_text2","required":false,"type":"string"},{"input":{},"name":"start_audio_text1","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"148554","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1806.8771081262958,"y":-793.6067317657307}},"type":"5"},{"blocks":[],"data":{"inputs":{"callTransferVoice":true,"chatHistoryWriting":"historyWrite","content":{"type":"string","value":{"content":"视频编排中， 即将完成...","type":"literal"}},"inputParameters":[],"streamingOutput":false},"nodeMeta":{"description":"节点从“消息”更名为“输出”，支持中间过程的消息输出，支持流式和非流式两种方式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Output-v2.jpg","mainColor":"#5C62FF","subTitle":"输出","title":"输出_4"}},"edges":null,"id":"150526","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1806.8771081262958,"y":-587.7413359819336}},"type":"13"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684515874","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"高","input":{},"name":"height","required":false,"type":"integer"},{"description":"关联创作者","input":{},"name":"user_id","required":false,"type":"integer"},{"description":"宽","input":{},"name":"width","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"integer","value":{"content":1080,"rawMeta":{"type":2},"type":"literal"}},"name":"height"},{"input":{"type":"integer","value":{"content":1262,"rawMeta":{"type":2},"type":"literal"}},"name":"user_id"},{"input":{"type":"integer","value":{"content":1920,"rawMeta":{"type":2},"type":"literal"}},"name":"width"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"插件入口-创建草稿","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:create_draft","title":"create_draft"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"tip_url","required":false,"type":"string"}]},"edges":null,"id":"168118","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1806.8771081262958,"y":-345.5467527068781}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/Pgm9wXA4EipKhYkeEQJcLBlJnWb?from=from_copylink","input":{},"name":"image_infos","required":true,"type":"string"},{"description":"x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"移动transform_x","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"移动transform_y","input":{},"name":"transform_y","required":false,"type":"float"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"148554","name":"bgImageData","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加图片","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745749351&x-signature=YW9Vqi9abcDGNAnsKJFwO%2FL%2FXN0%3D","subtitle":"视频合成_剪映小助手:add_images","title":"add_images_背景图"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"103574","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1806.8771081262958,"y":-119.498474983493}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"教堂\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"148554","name":"audioData","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745675823&x-signature=CF0gxJyJ5eQu5HPEV8HKkVN2s%2Fk%3D","subtitle":"视频合成_剪映小助手:add_audios","title":"add_audios_字幕音频"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"157087","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1781.809108685763,"y":585.2465793430633}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/Pgm9wXA4EipKhYkeEQJcLBlJnWb?from=from_copylink","input":{},"name":"image_infos","required":true,"type":"string"},{"description":"x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"移动transform_x","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"移动transform_y","input":{},"name":"transform_y","required":false,"type":"float"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"148554","name":"roleImage1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":0.7,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":0.7,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"float","value":{"content":-1024,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":-250,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加图片","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745749351&x-signature=YW9Vqi9abcDGNAnsKJFwO%2FL%2FXN0%3D","subtitle":"视频合成_剪映小助手:add_images","title":"add_images_角色图片"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"1313867","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1806.8771081262958,"y":713.3198344267425}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833883688","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_images","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/Pgm9wXA4EipKhYkeEQJcLBlJnWb?from=from_copylink","input":{},"name":"image_infos","required":true,"type":"string"},{"description":"x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"移动transform_x","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"移动transform_y","input":{},"name":"transform_y","required":false,"type":"float"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"148554","name":"roleImage2","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"image_infos"},{"input":{"type":"float","value":{"content":0.7,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_x"},{"input":{"type":"float","value":{"content":0.7,"rawMeta":{"type":4},"type":"literal"}},"name":"scale_y"},{"input":{"type":"float","value":{"content":1049,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":217,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加图片","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745749351&x-signature=YW9Vqi9abcDGNAnsKJFwO%2FL%2FXN0%3D","subtitle":"视频合成_剪映小助手:add_images","title":"add_images_角色图片_1"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"image_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"1573763","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1806.8771081262958,"y":868.1912336204978}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837955684548642","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"save_draft","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"用户ID。如果填写了这个ID，新用户产生的月费就会按照比例归属到这个账号下。","input":{},"name":"user_id","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1262,"rawMeta":{"type":2},"type":"literal"}},"name":"user_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"保存草稿\n","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"视频合成_剪映小助手:save_draft","title":"save_draft"},"outputs":[{"name":"draft_url","required":false,"type":"string"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"104782","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2342.3263912817893,"y":332.88755496675276}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"148554","name":"captions1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":0,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"#000000","rawMeta":{"type":1},"type":"literal"}},"name":"border_color"},{"input":{"type":"string","value":{"content":"优设标题黑","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":10,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"letter_spacing"},{"input":{"type":"float","value":{"content":3,"rawMeta":{"type":4},"type":"literal"}},"name":"line_spacing"},{"input":{"type":"string","value":{"content":"#FFFFFF","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":500,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":527,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加字幕","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745752347&x-signature=nbka%2BCUaeAX9F%2BTsrhxXdzP1HVc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"add_captions_主持人"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"1808004","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2395.835644114575,"y":-180.56030034738387}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"148554","name":"captions2","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":0,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"#000000","rawMeta":{"type":1},"type":"literal"}},"name":"border_color"},{"input":{"type":"string","value":{"content":"优设标题黑","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":10,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"letter_spacing"},{"input":{"type":"float","value":{"content":3,"rawMeta":{"type":4},"type":"literal"}},"name":"line_spacing"},{"input":{"type":"string","value":{"content":"#FFFFFF","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":-554,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":367,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加字幕","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745752347&x-signature=nbka%2BCUaeAX9F%2BTsrhxXdzP1HVc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"add_captions_书籍"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"1982583","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2395.835644114575,"y":84.58891447414817}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n\n\n  const originalData = params.text_list;\n  const processedData = processDialogues(originalData);\n\n  const len = processedData.length;\n  const part1End = Math.ceil(len / 3);\n  const part2End = part1End + Math.ceil((len - part1End) / 2);\n\n\n\n    // 构建输出对象\n    const ret = {\n        \"text_list\": processedData,\n        \"text_list1\": processedData.slice(0, part1End),\n        \"text_list2\": processedData.slice(part1End, part2End),\n        \"text_list3\": processedData.slice(part2End)\n    };\n\n    return ret;\n}\n\nfunction processDialogues(originalData) {\n    let orderCounter = 1;\n    const result = [];\n    \n    originalData.forEach(item => {\n        const segments = item.line.split(/([!?。，！？；;、...——])/g);\n        let tempStr = '';\n\n        const pushFilteredLine = (str) => {\n            // 核心修改：仅保留汉字、英文、数字、英文问号?和中文问号？\n            const filtered = str.replace(/[^\\u4e00-\\u9fa5a-zA-Z0-9?？]/g, '');\n            if (filtered) {\n                result.push({\n                    role_name: item.role_name,\n                    line: filtered,\n                    order: orderCounter++\n                });\n            }\n        };\n\n        segments.forEach(segment => {\n            segment = segment.trim();\n            if (!segment) return;\n\n            if (['!', '?', '。', '，','；','？','！','、','...','——',';'].includes(segment)) {\n                tempStr += segment;\n                const lastChar = tempStr.slice(-1);\n                \n                // 处理逻辑：如果当前符号是问号则保留，其他符号会被过滤\n                const rawLine = tempStr; // 直接传递原始字符串，由过滤逻辑处理符号\n                pushFilteredLine(rawLine);\n                tempStr = '';\n            } else {\n                if (tempStr) {\n                    pushFilteredLine(tempStr);\n                    tempStr = '';\n                }\n                tempStr = segment;\n            }\n        });\n\n        if (tempStr) pushFilteredLine(tempStr);\n    });\n\n    return result;\n}\n\n// function processDialogues(originalData) {\n//     let orderCounter = 1;\n//     const result = [];\n    \n//     originalData.forEach(item => {\n//         const segments = item.line.split(/([!?。，！？；;、...——])/g);\n//         let tempStr = '';\n\n//         const pushFilteredLine = (str) => {\n//             // 核心过滤逻辑：移除非汉字、英文、数字的字符\n//             const filtered = str.replace(/[^\\u4e00-\\u9fa5a-zA-Z0-9]/g, '');\n//             if (filtered) {\n//                 result.push({\n//                     role_name: item.role_name,\n//                     line: filtered,\n//                     order: orderCounter++\n//                 });\n//             }\n//         };\n\n//         segments.forEach(segment => {\n//             segment = segment.trim();\n//             if (!segment) return;\n\n//             if (['!', '?', '。', '，','；','？','！','、','...','——',';'].includes(segment)) {\n//                 tempStr += segment;\n//                 const lastChar = tempStr.slice(-1);\n                \n//                 // 处理带逻辑的字符串\n//                 const rawLine = lastChar.match(/[!?！？]/) ? tempStr : tempStr.slice(0, -1);\n//                 pushFilteredLine(rawLine);\n//                 tempStr = '';\n//             } else {\n//                 if (tempStr) {\n//                     pushFilteredLine(tempStr);\n//                     tempStr = '';\n//                 }\n//                 tempStr = segment;\n//             }\n//         });\n\n//         if (tempStr) pushFilteredLine(tempStr);\n//     });\n\n//     return result;\n// }\n\n","functionID":"38wbg1232i8dj","inputParameters":[{"input":{"schema":{"schema":[{"name":"role_name","type":"string"},{"name":"line","type":"string"},{"name":"order","type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"194443","name":"text_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"text_list","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"代码_字幕切割"},"outputs":[{"input":{},"name":"text_list","required":false,"schema":{"schema":[{"name":"role_name","type":"string"},{"name":"line","type":"string"},{"name":"order","type":"integer"}],"type":"object"},"type":"list"},{"input":{},"name":"text_list1","required":false,"schema":{"schema":[{"name":"role_name","type":"string"},{"name":"line","type":"string"},{"name":"order","type":"string"}],"type":"object"},"type":"list"},{"input":{},"name":"text_list2","required":false,"schema":{"schema":[{"name":"role_name","type":"string"},{"name":"line","type":"string"},{"name":"order","type":"string"}],"type":"object"},"type":"list"},{"input":{},"name":"text_list3","required":false,"schema":{"schema":[{"name":"role_name","type":"string"},{"name":"line","type":"string"},{"name":"order","type":"string"}],"type":"object"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"143241","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-1341.163416865365,"y":-246.1027874223014}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7465608338500452404","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_keyframes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"160635","name":"keyframes1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"keyframes"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"添加关键帧","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/58f8745c794f452a9b0c572c9a4b3e3a~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748672655&x-signature=iFZjhJCyFY2%2BYqUbY3KzuXXWNqI%3D","subtitle":"视频合成_剪映小助手:add_keyframes","title":"add_keyframes"},"outputs":[{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"120041","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1781.809108685763,"y":1271.6218959603816}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n\n    const {segment_infos1,segment_infos2} = params\n    // [ { \"offset\": 5000000, \"property\": \"KFTypePositionX\", \"segment_id\": \"acc5b516-046b-4eae-a179-f686f35e70a8\", \"value\": 0 } ]\n    \n    // 添加segment_infos1关键帧，上下，左右移动\n    const segment_infos1_list = [];\n    for(let i=0;i<segment_infos1.length;i++){\n        // start和end为微秒数\n        const start = segment_infos1[i].start;\n        const end = segment_infos1[i].end;\n        // 每隔1000000微秒打一个关键帧\n        const countY = (end - start) / 900000;\n        for(let j=0;j<countY;j++){\n        let value = j%2==0?-250:-150;\n            let offset = j*900000> end ?end :j*900000;\n            segment_infos1_list.push({\n                \"offset\": j*900000,  // 打上关键帧的偏移时间量，范围是start到end\n                \"property\": \"KFTypePositionY\", // 关键帧类型\n                \"segment_id\": segment_infos1[i].id, \n                \"value\": value/1080 // 关键帧的值 注意：这里得value值不是x或者y值，而是要通过计算得出，计算公式：如果是横向移动就是x除以宽，如果是纵向移动就是y除以高\n            });\n        }\n\n          // 每隔800000微秒打一个关键帧\n          const countX = (end - start) / 700000;\n          for(let j=0;j<countX;j++){\n          let value = j%2==0?-1024:-824;\n              let offset = j*700000> end ?end :j*700000;\n              segment_infos1_list.push({\n                  \"offset\": j*700000,  // 打上关键帧的偏移时间量，范围是start到end\n                  \"property\": \"KFTypePositionX\", // 关键帧类型\n                  \"segment_id\": segment_infos1[i].id, \n                  \"value\": value/1920 // 关键帧的值 注意：这里得value值不是x或者y值，而是要通过计算得出，计算公式：如果是横向移动就是x除以宽，如果是纵向移动就是y除以高\n              });\n          }\n    }\n\n    // 添加segment_infos1关键帧，上下，左右移动\n    const segment_infos2_list = [];\n    for(let i=0;i<segment_infos2.length;i++){\n        // start和end为微秒数\n        const start = segment_infos2[i].start;\n        const end = segment_infos2[i].end;\n        // 每隔1000000微秒打一个关键帧\n        const countY = (end - start) / 1000000;\n        for(let j=0;j<countY;j++){\n        let value = j%2==0?217:117;\n            let offset = j*1000000> end ?end :j*1000000;\n            segment_infos2_list.push({\n                \"offset\": j*1000000,  // 打上关键帧的偏移时间量，范围是start到end\n                \"property\": \"KFTypePositionY\", // 关键帧类型\n                \"segment_id\": segment_infos2[i].id, \n                \"value\": value/1080 // 关键帧的值 注意：这里得value值不是x或者y值，而是要通过计算得出，计算公式：如果是横向移动就是x除以宽，如果是纵向移动就是y除以高\n            });\n        }\n\n          // 每隔800000微秒打一个关键帧\n          const countX = (end - start) / 800000;\n          for(let j=0;j<countX;j++){\n          let value = j%2==0?1049:900;\n              let offset = j*800000> end ?end :j*800000;\n              segment_infos2_list.push({\n                  \"offset\": j*800000,  // 打上关键帧的偏移时间量，范围是start到end\n                  \"property\": \"KFTypePositionX\", // 关键帧类型\n                  \"segment_id\": segment_infos2[i].id, \n                  \"value\": value/1920 // 关键帧的值 注意：这里得value值不是x或者y值，而是要通过计算得出，计算公式：如果是横向移动就是x除以宽，如果是纵向移动就是y除以高\n              });\n          }\n    }\n\n\n\n    // 构建输出对象\n    const ret = {\n        \"keyframes1\": JSON.stringify(segment_infos1_list),\n        \"keyframes2\": JSON.stringify(segment_infos2_list) \n    };\n\n    return ret;\n}","functionID":"38wblniht8lbc","inputParameters":[{"input":{"schema":{"schema":[{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"1313867","name":"segment_infos","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"segment_infos1","right":{}},{"input":{"schema":{"schema":[{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"},{"name":"id","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"1573763","name":"segment_infos","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"segment_infos2","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"代码_关键帧"},"outputs":[{"input":{},"name":"keyframes1","required":false,"type":"string"},{"input":{},"name":"keyframes2","required":false,"type":"string"}],"settings":null,"version":""},"edges":null,"id":"160635","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1790.0519696842039,"y":1038.434237651723}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7465608338500452404","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_keyframes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"string","value":{"content":{"blockID":"160635","name":"keyframes2","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"keyframes"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"添加关键帧","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/58f8745c794f452a9b0c572c9a4b3e3a~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748672655&x-signature=iFZjhJCyFY2%2BYqUbY3KzuXXWNqI%3D","subtitle":"视频合成_剪映小助手:add_keyframes","title":"add_keyframes_1"},"outputs":[{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"1537147","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1790.0519696842039,"y":1461.3656823217957}},"type":"4"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"schema":[{"name":"role_name","type":"string"},{"name":"line","type":"string"},{"name":"order","type":"integer"}],"type":"object"},"type":"list","value":{"content":{"blockID":"194443","name":"text_list","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"input","right":{}}],"llmParam":[{"input":{"type":"string","value":{"content":"default_val","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"8192","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"DeepSeek-V3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1738675210","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"{{input}}","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"# 口播关键词提取专家\n\n## 定位\n专精于从口播类视频字幕文本中提取核心关键词的信息处理专家，适用于短视频运营、内容分析、广告优化等场景。\n\n## 核心能力\n1. **文本解析**  \n   - 自动过滤时间戳/标点等非语义内容\n   - 识别口语化表达中的有效信息单元\n\n2. **关键词提取**  \n   - 采用TF-IDF+TextRank混合算法\n   - 区分核心关键词(产品/功能/场景)与辅助词(情绪/修饰)\n   - 支持专业术语提取(需标注领域)\n\n3. **上下文理解**  \n   - 识别重复强调的关键概念\n   - 自动合并同义词近义词\n   - 保留否定语境(如\"不推荐\"\"慎用\")\n\n4. **多语言支持**  \n   - 中英文混合文本处理\n   - 方言词汇识别(需标注语种)\n\n## 知识储备\n- 语言学：分词技术/词性标注/依存句法分析\n- 领域词库：  \n  ▫ 电商：促销话术/产品属性  \n  ▫ 教育：学科术语/课程体系  \n  ▫ 科技：技术参数/功能特性\n\n## 输入输出\n**输入格式**：  \n[\n                {\n                   \"order\": 1,\n                    \"line\": \"大家好今天要评测这款石墨烯发热衣\",\n                   \"role_name\":\"主持人\"\n                },\n                {\n                   \"order\": 2,\n                    \"line\": \"重点看三个维度：保暖性/透气性/耐用度\",\n                   \"role_name\":\"书籍\"\n                }\n    ]\n\n**输出格式**：  \n [\"石墨烯发热衣\", \"保暖性\", \"透气性\", \"耐用度\"]\n\n## 约束条件\n1. 拒绝生成非文本内容相关的联想","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":180000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"大模型_关键词提取"},"outputs":[{"input":{},"name":"keywords","required":false,"schema":{"type":"string"},"type":"list"}],"settings":null,"version":"3"},"edges":null,"id":"167246","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":342.93855956666334,"y":-652.9027874223011}},"type":"3"},{"blocks":[],"data":{"inputs":{"callTransferVoice":true,"chatHistoryWriting":"historyWrite","content":{"type":"string","value":{"content":"视频草稿地址， 请使用剪映小助手下载：\n{{draft_url}}","type":"literal"}},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"streamingOutput":false},"nodeMeta":{"description":"节点从“消息”更名为“输出”，支持中间过程的消息输出，支持流式和非流式两种方式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Output-v2.jpg","mainColor":"#5C62FF","subTitle":"输出","title":"输出_2"}},"edges":null,"id":"904077","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2342.3263912817893,"y":664.3342376517221}},"type":"13"},{"blocks":[{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1072425","name":"text_list.line","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"float","value":{"content":1.1,"rawMeta":{"type":4},"type":"literal"}},"name":"speed_ratio"},{"input":{"assistType":12,"type":"string","value":{"content":"7426725529589645339","rawMeta":{"fileName":"解说小明","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748656300&x-signature=myuAFWCmxnzQBolJPLaK0JbCfR0%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_2"},"outputs":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"1236386","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":640,"y":0}},"type":"4"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"string","value":{"content":{"blockID":"1072425","name":"text_list.role_name","source":"block-output"},"type":"ref"}}},"operator":7,"right":{"input":{"type":"string","value":{"content":"主持人","rawMeta":{"type":1},"type":"literal"}}}}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器_2"}},"edges":null,"id":"1821120","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":180,"y":94.15000000000002}},"type":"8"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1072425","name":"text_list.line","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"float","value":{"content":1.05,"rawMeta":{"type":4},"type":"literal"}},"name":"speed_ratio"},{"input":{"assistType":12,"type":"string","value":{"content":"7426720361753903141","rawMeta":{"fileName":"爽快思思","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748656300&x-signature=myuAFWCmxnzQBolJPLaK0JbCfR0%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_3"},"outputs":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"1963437","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":640,"y":214.10000000000002}},"type":"4"},{"blocks":[],"data":{"inputs":{"mergeGroups":[{"name":"Group1","variables":[{"type":"string","value":{"content":{"blockID":"1236386","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},{"type":"string","value":{"content":{"blockID":"1963437","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合_1"},"outputs":[{"name":"Group1","type":"string"}]},"edges":null,"id":"1829773","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1100,"y":106.05000000000003}},"type":"32"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7474863657353117750","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1829773","name":"Group1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"mp3_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面查看案例","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/58f8745c794f452a9b0c572c9a4b3e3a~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748656597&x-signature=mOmChk%2FTolYSNYTulD8KkshfCnk%3D","subtitle":"视频合成_剪映小助手:get_audio_duration","title":"get_audio_duration_1"},"outputs":[{"name":"duration","required":false,"type":"integer"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"1088394","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1560,"y":95.05000000000003}},"type":"4"}],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"schema":[{"name":"role_name","type":"string"},{"name":"line","type":"string"},{"name":"order","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"143241","name":"text_list1","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"text_list"}],"loopCount":{"type":"integer","value":{"content":"10","type":"literal"}},"loopType":"array","variableParameters":[]},"nodeMeta":{"description":"用于通过设定循环次数和逻辑，重复执行一系列任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","mainColor":"#00B2B2","subTitle":"循环","title":"循环_1"},"outputs":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"1829773","name":"Group1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_list"},{"input":{"schema":{"type":"integer"},"type":"list","value":{"content":{"blockID":"1088394","name":"duration","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"duration_list"}]},"edges":[{"sourceNodeID":"1821120","sourcePortID":"true","targetNodeID":"1236386"},{"sourceNodeID":"1236386","sourcePortID":"","targetNodeID":"1829773"},{"sourceNodeID":"1072425","sourcePortID":"loop-function-inline-output","targetNodeID":"1821120"},{"sourceNodeID":"1821120","sourcePortID":"false","targetNodeID":"1963437"},{"sourceNodeID":"1963437","sourcePortID":"","targetNodeID":"1829773"},{"sourceNodeID":"1829773","sourcePortID":"","targetNodeID":"1088394"},{"sourceNodeID":"1088394","sourcePortID":"","targetNodeID":"1072425","targetPortID":"loop-function-inline-input"}],"id":"1072425","meta":{"canvasPosition":{"x":-527.0614404333367,"y":764.3342376517226},"defaultCollapsed":false,"position":{"x":342.93855956666334,"y":445.1465793430634}},"type":"21"},{"blocks":[{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1051688","name":"text_list.line","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"float","value":{"content":1.1,"rawMeta":{"type":4},"type":"literal"}},"name":"speed_ratio"},{"input":{"assistType":12,"type":"string","value":{"content":"7426725529589645339","rawMeta":{"fileName":"解说小明","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748656300&x-signature=myuAFWCmxnzQBolJPLaK0JbCfR0%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_4"},"outputs":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"1385208","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":640,"y":0}},"type":"4"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"string","value":{"content":{"blockID":"1051688","name":"text_list.role_name","source":"block-output"},"type":"ref"}}},"operator":7,"right":{"input":{"type":"string","value":{"content":"主持人","rawMeta":{"type":1},"type":"literal"}}}}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器_3"}},"edges":null,"id":"1234910","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":180,"y":94.15000000000002}},"type":"8"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1051688","name":"text_list.line","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"float","value":{"content":1.05,"rawMeta":{"type":4},"type":"literal"}},"name":"speed_ratio"},{"input":{"assistType":12,"type":"string","value":{"content":"7426720361753903141","rawMeta":{"fileName":"爽快思思","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748656300&x-signature=myuAFWCmxnzQBolJPLaK0JbCfR0%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_5"},"outputs":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"1099567","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":640,"y":214.10000000000002}},"type":"4"},{"blocks":[],"data":{"inputs":{"mergeGroups":[{"name":"Group1","variables":[{"type":"string","value":{"content":{"blockID":"1385208","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},{"type":"string","value":{"content":{"blockID":"1099567","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合_2"},"outputs":[{"name":"Group1","type":"string"}]},"edges":null,"id":"1076285","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1100,"y":106.05000000000003}},"type":"32"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7474863657353117750","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1076285","name":"Group1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"mp3_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面查看案例","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/58f8745c794f452a9b0c572c9a4b3e3a~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748656597&x-signature=mOmChk%2FTolYSNYTulD8KkshfCnk%3D","subtitle":"视频合成_剪映小助手:get_audio_duration","title":"get_audio_duration_2"},"outputs":[{"name":"duration","required":false,"type":"integer"},{"name":"message","required":false,"type":"string"}]},"edges":null,"id":"1925631","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1560,"y":95.05000000000003}},"type":"4"}],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"schema":[{"name":"role_name","type":"string"},{"name":"line","type":"string"},{"name":"order","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"143241","name":"text_list3","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"text_list"}],"loopCount":{"type":"integer","value":{"content":"10","type":"literal"}},"loopType":"array","variableParameters":[]},"nodeMeta":{"description":"用于通过设定循环次数和逻辑，重复执行一系列任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","mainColor":"#00B2B2","subTitle":"循环","title":"循环_3"},"outputs":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"1076285","name":"Group1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_list"},{"input":{"schema":{"type":"integer"},"type":"list","value":{"content":{"blockID":"1925631","name":"duration","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"duration_list"}]},"edges":[{"sourceNodeID":"1234910","sourcePortID":"true","targetNodeID":"1385208"},{"sourceNodeID":"1385208","sourcePortID":"","targetNodeID":"1076285"},{"sourceNodeID":"1051688","sourcePortID":"loop-function-inline-output","targetNodeID":"1234910"},{"sourceNodeID":"1234910","sourcePortID":"false","targetNodeID":"1099567"},{"sourceNodeID":"1099567","sourcePortID":"","targetNodeID":"1076285"},{"sourceNodeID":"1076285","sourcePortID":"","targetNodeID":"1925631"},{"sourceNodeID":"1925631","sourcePortID":"","targetNodeID":"1051688","targetPortID":"loop-function-inline-input"}],"id":"1051688","meta":{"canvasPosition":{"x":-527.0614404333367,"y":1593.0971048751385},"defaultCollapsed":false,"position":{"x":342.93855956666334,"y":1271.6218959603816}},"type":"21"},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n\n    const book_name = params.book_name;\n    const startText = [];\n    startText.push(\"假如书籍会说话\");\n    startText.push(\"今日对话\");\n    startText.push(book_name);\n\n\n    // 构建输出对象\n    const ret = {\n        \"start_text\": startText\n    };\n\n    return ret;\n}","functionID":"38wbrpebwgh4l","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"book_name","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"book_name","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"代码_开场文案"},"outputs":[{"input":{},"name":"start_text","required":false,"schema":{"type":"string"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"196872","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-558.9464455900663,"y":-1049.5993327562785}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"batch":{"batchEnable":true,"batchSize":100,"concurrentSize":10,"inputLists":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"196872","name":"start_text","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"items"}]},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1045640","name":"items","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"float","value":{"content":1.1,"rawMeta":{"type":4},"type":"literal"}},"name":"speed_ratio"},{"input":{"assistType":12,"type":"string","value":{"content":"7468512265151725595","rawMeta":{"fileName":"霸气青叔","type":18},"type":"literal"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748656300&x-signature=myuAFWCmxnzQBolJPLaK0JbCfR0%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis_开场音频"},"outputs":[{"name":"outputList","schema":{"schema":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"1045640","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":66.24523542924567,"y":-1120.595310979815}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7474863657353117750","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"get_audio_duration","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"batch":{"batchEnable":true,"batchSize":100,"concurrentSize":10,"inputLists":[{"input":{"schema":{"schema":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"1045640","name":"outputList","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"items"}]},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1487547","name":"items.data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"mp3_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"剪映草稿，视频合成方案。👆👆👆插件详情页面查看案例","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/58f8745c794f452a9b0c572c9a4b3e3a~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748656597&x-signature=mOmChk%2FTolYSNYTulD8KkshfCnk%3D","subtitle":"视频合成_剪映小助手:get_audio_duration","title":"get_audio_duration_3"},"outputs":[{"name":"outputList","schema":{"schema":[{"name":"duration","required":false,"type":"integer"},{"name":"message","required":false,"type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"1487547","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":579.0647221672145,"y":-1143.1098229467952}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    const {speech_outputs,duration_outputList} = params;\n\n\n    const start_audio_list =[];\n    for(var s of speech_outputs){\n        start_audio_list.push(s.data.link);\n    }\n\n    \n    const start_duration_list =[];\n    for(let s of duration_outputList){\n        start_duration_list.push(s.duration);\n    }\n\n    // 构建输出对象\n    const ret = {\n        \"start_audio_list\": start_audio_list,\n        \"start_duration_list\":start_duration_list\n    };\n\n    return ret;\n}","functionID":"38wbab2lhvrd4","inputParameters":[{"input":{"schema":{"schema":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"1045640","name":"outputList","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"speech_outputs","right":{}},{"input":{"schema":{"schema":[{"name":"duration","required":false,"type":"integer"},{"name":"message","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"1487547","name":"outputList","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":103},"type":"ref"}},"left":{},"name":"duration_outputList","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"代码_开场数据组装"},"outputs":[{"input":{},"name":"start_audio_list","required":false,"schema":{"type":"string"},"type":"list"},{"input":{},"name":"start_duration_list","required":false,"schema":{"type":"integer"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"109800","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1050.7387897563187,"y":-1119.1098229467952}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"194997","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[],"type":"object"},"type":"list","value":{"content":{"blockID":"148554","name":"start_timelines1","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"string","value":{"content":"逐字旋入","rawMeta":{"type":1},"type":"literal"}},"name":"in_animation"},{"input":{"type":"integer","value":{"content":800000,"rawMeta":{"type":2},"type":"literal"}},"name":"in_animation_duration"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据时间线制作字幕数据","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748883014&x-signature=j1bEpGpdg3J6bNSrA36pnh00LcM%3D","subtitle":"剪映小助手数据生成器:caption_infos","title":"caption_infos开场1"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"134550","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2862.3877126207854,"y":-1092.2008021332583}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"教堂\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"148554","name":"initialAudioData","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745675823&x-signature=CF0gxJyJ5eQu5HPEV8HKkVN2s%2Fk%3D","subtitle":"视频合成_剪映小助手:add_audios","title":"add_audios_开场音频"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"1006722","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1781.809108685763,"y":84.58891447414817}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"134550","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"#000000","rawMeta":{"type":1},"type":"literal"}},"name":"border_color"},{"input":{"type":"string","value":{"content":"尔雅新大黑","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":19,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"string","value":{"content":"#ffde00","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加字幕","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745752347&x-signature=nbka%2BCUaeAX9F%2BTsrhxXdzP1HVc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"add_captions_开场1"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"1173260","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3276.457494587221,"y":-1092.2008021332583}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109802306060299","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"str_to_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":"假如书籍会说话","rawMeta":{"type":1},"type":"literal"}},"name":"obj"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"字符转列表","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748910258&x-signature=eDyFk3li9D6CXmGpo6lgotaS7fQ%3D","subtitle":"剪映小助手数据生成器:str_to_list","title":"str_to_list_假如书籍会说话"},"outputs":[{"name":"infos","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"194997","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2428.412866198202,"y":-1092.2008021332583}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109802306060299","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"str_to_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":"今日对话","rawMeta":{"type":1},"type":"literal"}},"name":"obj"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"字符转列表","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748910258&x-signature=eDyFk3li9D6CXmGpo6lgotaS7fQ%3D","subtitle":"剪映小助手数据生成器:str_to_list","title":"str_to_list_今日对话"},"outputs":[{"name":"infos","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"1729353","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2420.501444767616,"y":-853.4353472582445}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"1729353","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[],"type":"object"},"type":"list","value":{"content":{"blockID":"148554","name":"start_timelines2","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"string","value":{"content":"放大","rawMeta":{"type":1},"type":"literal"}},"name":"in_animation"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据时间线制作字幕数据","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748883014&x-signature=j1bEpGpdg3J6bNSrA36pnh00LcM%3D","subtitle":"剪映小助手数据生成器:caption_infos","title":"caption_infos开场2"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"1933504","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2854.476291190199,"y":-853.4353472582445}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1933504","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"#FFFFFF","rawMeta":{"type":1},"type":"literal"}},"name":"border_color"},{"input":{"type":"string","value":{"content":"思源中宋","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":30,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"letter_spacing"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"line_spacing"},{"input":{"type":"string","value":{"content":"#000000","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加字幕","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745752347&x-signature=nbka%2BCUaeAX9F%2BTsrhxXdzP1HVc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"add_captions_开场2"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"1428261","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3268.5460731566345,"y":-853.4353472582445}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7476109802306060299","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"str_to_list","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"book_name","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"obj"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"字符转列表","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748910258&x-signature=eDyFk3li9D6CXmGpo6lgotaS7fQ%3D","subtitle":"剪映小助手数据生成器:str_to_list","title":"str_to_list_书籍名称展示"},"outputs":[{"name":"infos","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"1527144","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2421.8085979194902,"y":-652.1337618694558}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7475829177439191075","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"caption_infos","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7475829177439109155","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"剪映小助手数据生成器","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"1527144","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"texts"},{"input":{"schema":{"schema":[],"type":"object"},"type":"list","value":{"content":{"blockID":"148554","name":"start_timelines3","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"timelines"},{"input":{"type":"string","value":{"content":"向上滑动","rawMeta":{"type":1},"type":"literal"}},"name":"in_animation"},{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"1527144","name":"infos","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"keywords"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据时间线制作字幕数据","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/6d332ece10284d579e2461b0b6c0a60e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748883014&x-signature=j1bEpGpdg3J6bNSrA36pnh00LcM%3D","subtitle":"剪映小助手数据生成器:caption_infos","title":"caption_infos开场3"},"outputs":[{"name":"infos","required":false,"type":"string"}]},"edges":null,"id":"1485631","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":2855.7834443420734,"y":-652.1337618694558}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833850920","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_captions","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"字间距，默认0","input":{},"name":"letter_spacing","required":false,"type":"float"},{"description":"scale_x缩放","input":{},"name":"scale_x","required":false,"type":"float"},{"description":"0 默认。1富文本样式","input":{},"name":"style_text","required":false,"type":"integer"},{"description":"文字颜色：#ff1837","input":{},"name":"text_color","required":false,"type":"string"},{"description":"transform_x位置","input":{},"name":"transform_x","required":false,"type":"float"},{"description":"transform_y位置","input":{},"name":"transform_y","required":false,"type":"float"},{"description":"行间距，默认0","input":{},"name":"line_spacing","required":false,"type":"float"},{"description":"scale_y缩放","input":{},"name":"scale_y","required":false,"type":"float"},{"description":"字幕的对齐方式，0左对齐，1 居中对齐，2右对齐","input":{},"name":"alignment","required":false,"type":"integer"},{"description":"边框颜色，eg：#fe8a80","input":{},"name":"border_color","required":false,"type":"string"},{"description":"查看说明：https://krxc4izye0.feishu.cn/wiki/HhQrw3BFhi1XGOkkJCBcfkqGnwf?from=from_copylink","input":{},"name":"captions","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"},{"description":"字体列表：https://krxc4izye0.feishu.cn/wiki/SmnrwabXriG7JckEzyGcChk4nDd","input":{},"name":"font","required":false,"type":"string"},{"description":"默认：15","input":{},"name":"font_size","required":false,"type":"integer"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1485631","name":"infos","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"captions"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"},{"input":{"type":"integer","value":{"content":1,"rawMeta":{"type":2},"type":"literal"}},"name":"alignment"},{"input":{"type":"string","value":{"content":"#000000","rawMeta":{"type":1},"type":"literal"}},"name":"border_color"},{"input":{"type":"string","value":{"content":"优设标题黑","rawMeta":{"type":1},"type":"literal"}},"name":"font"},{"input":{"type":"integer","value":{"content":20,"rawMeta":{"type":2},"type":"literal"}},"name":"font_size"},{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}},"name":"letter_spacing"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"line_spacing"},{"input":{"type":"string","value":{"content":"#fe8a80","rawMeta":{"type":1},"type":"literal"}},"name":"text_color"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_x"},{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}},"name":"transform_y"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加字幕","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745752347&x-signature=nbka%2BCUaeAX9F%2BTsrhxXdzP1HVc%3D","subtitle":"视频合成_剪映小助手:add_captions","title":"add_captions_开场3"},"outputs":[{"name":"text_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"track_id","required":false,"type":"string"},{"name":"draft_url","required":false,"type":"string"},{"name":"segment_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"segment_infos","required":false,"schema":{"schema":[{"name":"id","required":false,"type":"string"},{"name":"start","required":false,"type":"integer"},{"name":"end","required":false,"type":"integer"}],"type":"object"},"type":"list"}]},"edges":null,"id":"1671820","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":3269.853226308509,"y":-652.1337618694561}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"教堂\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"148554","name":"start_audio_text2","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745675823&x-signature=CF0gxJyJ5eQu5HPEV8HKkVN2s%2Fk%3D","subtitle":"视频合成_剪映小助手:add_audios","title":"add_audios_开场音效2"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"1073078","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1781.809108685763,"y":218.78755496675285}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7457837925833834536","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_audios","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7457837925833801768","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频合成_剪映小助手","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"[{\"audio_url\": \"http://example.com/audio1.mp3\",\"duration\":120,\"start\":0,\"end\":12000000,\"audio_effect\":\"教堂\"}]","input":{},"name":"audio_infos","required":true,"type":"string"},{"description":"草稿地址，使用create_draft输出的draft_url即可","input":{},"name":"draft_url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"148554","name":"start_audio_text1","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio_infos"},{"input":{"type":"string","value":{"content":{"blockID":"168118","name":"draft_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"draft_url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"批量添加音频","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/f013e4af74224258a37363a531aecefe~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745675823&x-signature=CF0gxJyJ5eQu5HPEV8HKkVN2s%2Fk%3D","subtitle":"视频合成_剪映小助手:add_audios","title":"add_audios_开场音效1"},"outputs":[{"name":"track_id","required":false,"type":"string"},{"name":"audio_ids","required":false,"schema":{"type":"string"},"type":"list"},{"name":"draft_url","required":false,"type":"string"}]},"edges":null,"id":"1805868","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1781.809108685763,"y":402.0170671549081}},"type":"4"},{"blocks":[],"data":{"inputs":{"callTransferVoice":true,"chatHistoryWriting":"historyWrite","content":{"type":"string","value":{"content":"正在生成对话文案...","type":"literal"}},"inputParameters":[],"streamingOutput":true},"nodeMeta":{"description":"节点从“消息”更名为“输出”，支持中间过程的消息输出，支持流式和非流式两种方式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Output-v2.jpg","mainColor":"#5C62FF","subTitle":"输出","title":"输出"}},"edges":null,"id":"194701","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-2349.207494587221,"y":-601.908155523708}},"type":"13"},{"blocks":[],"data":{"inputs":{"callTransferVoice":true,"chatHistoryWriting":"historyWrite","content":{"type":"string","value":{"content":"开始生成音频...","type":"literal"}},"inputParameters":[],"streamingOutput":true},"nodeMeta":{"description":"节点从“消息”更名为“输出”，支持中间过程的消息输出，支持流式和非流式两种方式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Output-v2.jpg","mainColor":"#5C62FF","subTitle":"输出","title":"输出_1"}},"edges":null,"id":"1183625","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-82.83022177299449,"y":-426.25116898422493}},"type":"13"}],"versions":{"loop":"v2"}}}