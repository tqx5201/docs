{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531672341647032329","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"100001","sourcePortID":"","targetNodeID":"142334"},{"sourceNodeID":"155118","sourcePortID":"loop-output","targetNodeID":"900001"},{"sourceNodeID":"142334","sourcePortID":"","targetNodeID":"105312"},{"sourceNodeID":"105312","sourcePortID":"","targetNodeID":"155118"}],"nodes":[{"blocks":[],"data":{"nodeMeta":{"description":"工作流的起始节点，用于设定启动工作流需要的信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg","subTitle":"","title":"开始"},"outputs":[{"description":"生成图片数量","name":"num","required":true,"type":"string"},{"description":"角色（老爷爷、老虎、小狗等…）","name":"role","required":true,"type":"string"},{"description":"输入角色的动作/描述/任务","name":"task","required":true,"type":"string"}],"trigger_parameters":[{"description":"生成图片数量","name":"num","required":true,"type":"string"},{"description":"角色（老爷爷、老虎、小狗等…）","name":"role","required":true,"type":"string"},{"description":"输入角色的动作/描述/任务","name":"task","required":true,"type":"string"}]},"edges":null,"id":"100001","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-816.2530667441035,"y":-107.29673730867441}},"type":"1"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"assistType":2,"type":"string"},"type":"list","value":{"content":{"blockID":"155118","name":"output","source":"block-output"},"rawMeta":{"type":104},"type":"ref"}},"name":"output"}],"terminatePlan":"returnVariables"},"nodeMeta":{"description":"工作流的最终节点，用于返回工作流运行后的结果信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg","subTitle":"","title":"结束"}},"edges":null,"id":"900001","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":1091.9721765345469,"y":-107.29673730867441}},"type":"2"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"role","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","type":"ref"}},"left":{},"name":"role","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"num","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","type":"ref"}},"left":{},"name":"num","right":{}},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"task","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","type":"ref"}},"left":{},"name":"talk","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"1","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"float","value":{"content":"0.7","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"topP","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"integer","value":{"content":"1024","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"string","value":{"content":"豆包·Function call模型","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1706077826","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"你是一名专业的表情包提示词生成家，你需要帮我生成适合AI绘画的提示词，提示词内容专门描述表情包的场景，你需要给我表情描述和动作，规则如下：\n1、如果{{role}}等于“随机”那角色帮我自由发挥，但是一定不要出现“随机”这两个字，如果{{role}}不等于“随机”，那么角色一定是{{role}}，表情和动作尽可能相呼应\n2、如果{{talk}}等于“随机”那配文内容也帮我自由发挥，但是一定不要出现“随机”这两个字，如果{{talk}}不等于“随机”，那配文内容也一定是{{talk}},表情和动作尽可能相呼应\n2、格式一定是漫画表情包+{{role}}+表情+动作+配文：“{{talk}}”\n3、请严格按照我的要求输出，帮我直接输出{{num}}描述词，一定要出{{num}}描述词，不要出现数字等不必要的文案介绍和话术\n\n请严格按照以上的要求出提示词\n\n案例输出：\n画一个表情包，皮卡丘，凶恶的表情，拿着20米的长刀，配文：“你想咋地？”\n画一个表情包，蜡笔小新，生气的表情，生气的动作，配文：“想打你”\n画一个表情包，熊猫，兴奋的表情，关电脑的动作，配文：“下班啦”\n","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"大模型"},"outputs":[{"input":{},"name":"output","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"142334","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-278.5117349695256,"y":-146.2967373086744}},"type":"3"},{"blocks":[],"data":{"inputs":{"code":"async function main({ params }: Args): Promise<Output> {\n    let infos = params.infos.split('\\n').filter(info => info.trim() !== '')\n    let ret = []\n    for (let info of  infos){\n        ret.push(`${info}，突出的主体，高光，强光，8K，高画质，高分辨率`)\n    }\n\n    \n\n    return ret;\n}","functionID":"38wg96qr9dqif","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"142334","name":"output","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","type":"ref"}},"left":{},"name":"infos","right":{}}],"language":5,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"格式化描述词"},"outputs":[{"input":{},"name":"ret","required":false,"schema":{"type":"string"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"105312","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":181.4882650304744,"y":-120.29673730867441}},"type":"5"},{"blocks":[{"blocks":[],"data":{"inputs":{"apiParam":null,"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"155118","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"prompt"}],"modelSetting":{"custom_ratio":{"height":1024,"width":1024},"ddim_steps":25,"images_reference":{},"model":8,"ratio":0},"prompt":{"negative_prompt":"","prompt":"{{prompt}}"},"references":[],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":60000}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","subTitle":"图像生成","title":"图像生成_1"},"outputs":[{"assistType":2,"name":"data","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"190661","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":0,"y":100}},"type":"16"}],"data":{"inputs":{"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"105312","name":"ret","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"input"}],"loopCount":{"type":"integer","value":{"content":"10","type":"literal"}},"loopType":"array","variableParameters":[]},"nodeMeta":{"description":"用于通过设定循环次数和逻辑，重复执行一系列任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","mainColor":"#00B2B2","subTitle":"循环","title":"循环"},"outputs":[{"input":{"assistType":2,"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"190661","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"output"}]},"edges":[{"sourceNodeID":"155118","sourcePortID":"loop-function-inline-output","targetNodeID":"190661"},{"sourceNodeID":"190661","sourcePortID":"","targetNodeID":"155118","targetPortID":"loop-function-inline-input"}],"id":"155118","meta":{"canvasPosition":{"x":600.4882650304744,"y":79.70326269132559},"defaultCollapsed":false,"position":{"x":600.4882650304744,"y":-120.29673730867441}},"type":"21"}],"versions":{"loop":"v2"}}}