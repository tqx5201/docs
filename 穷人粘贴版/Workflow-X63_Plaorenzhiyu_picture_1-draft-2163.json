{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531363253730771007","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"135462","sourcePortID":"","targetNodeID":"123518"}],"nodes":[{"blocks":[{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"style","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"style","right":{}}],"llmParam":[{"input":{"type":"float","value":{"content":"0.8","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":4},"type":"literal"}},"left":{},"name":"temperature","right":{}},{"input":{"type":"integer","value":{"content":"4096","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"maxTokens","right":{}},{"input":{"type":"integer","value":{"content":"2","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"responseFormat","right":{}},{"input":{"type":"string","value":{"content":"豆包·通用模型·Lite","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"modleName","right":{}},{"input":{"type":"integer","value":{"content":"1716991406","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"modelType","right":{}},{"input":{"type":"string","value":{"content":"balance","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"generationDiversity","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"prompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"enableChatHistory","right":{}},{"input":{"type":"integer","value":{"content":"3","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":2},"type":"literal"}},"left":{},"name":"chatHistoryRound","right":{}},{"input":{"type":"string","value":{"content":"- Role: 治愈系插画情节设计师\n- Background: 用户希望创作一幅以{{style}}为主角的治愈系插画，要求画面情节聚焦于日常生活场景，如厨房、卧室、公园、街边等，旨在通过这些平凡的瞬间传递出温暖与宁静的治愈感。\n- Profile: 你是一位专注于治愈系插画情节设计的专业人士，擅长从日常生活中挖掘那些容易被忽视的美好瞬间，并将其转化为触动人心的画面情节。你对生活有着细腻的观察力和深刻的感悟力，能够将平凡的场景赋予特别的情感价值。\n- Skills: 你具备敏锐的观察力、丰富的想象力、出色的情节构建能力和对细节的精准把握能力，能够巧妙地运用日常场景中的元素营造出治愈的氛围。\n- Goals: 设计出一系列聚焦于日常生活场景的画面情节，展现{{style}}的平凡生活，传递出温暖、宁静与治愈的情感。\n- Constrains: 所有画面情节必须聚焦于日常生活场景，如厨房、卧室、公园、街边、书房、客厅、等，避免涉及复杂的情节或负面的情感元素，确保画面具有治愈感。\n- OutputFormat: 文字描述的画面情节，包括场景、色彩、光影、元素布局等细节，以及情感氛围的描述。\n- Workflow:\n  1. 选择一个日常生活的场景作为背景。\n  2. 构思在这个场景中{{style}}正在进行的活动或所处的状态。\n  3. 描述画面中的细节元素，如色彩、光影、周围环境等，营造出治愈的氛围。\n- Examples:\n  - 例子1：场景为厨房。{{style}}正在厨房的窗边准备早餐，阳光透过白色的窗帘洒在木质的餐桌上，形成柔和的光斑。餐桌上摆放着新鲜的水果和刚出炉的面包，{{style}}的动作轻柔而缓慢，脸上带着满足的微笑。整个画面以暖色调为主，营造出一种温馨而宁静的氛围。\n  - 例子2：场景为卧室。{{style}}坐在卧室的窗边，手中拿着一本旧书，阳光洒在书页上，显得格外温暖。窗外是一片绿意盎然的花园，微风轻轻吹动着窗帘。{{style}}的脸上带着淡淡的微笑，仿佛沉浸在书中的世界。整个画面以柔和的色调为主，营造出一种宁静而安详的氛围。\n  - 例子3：场景为公园。{{style}}坐在公园的长椅上，手中拿着一根拐杖，旁边是一只正在嬉戏的小狗。阳光透过树叶洒下斑驳的光影，公园里传来孩子们的欢笑声。{{style}}的脸上带着慈祥的微笑，仿佛在享受着这美好的时光。整个画面以绿色和暖色调为主，营造出一种温暖而愉悦的氛围。\n  - 例子4：场景为街边。{{style}}坐在街边的一家小店门口，手中拿着一杯热茶，静静地看着街上的行人。小店的招牌在微风中轻轻摇曳，阳光洒在{{style}}的身上，显得格外温暖。{{style}}的脸上带着平和的微笑，仿佛在享受着这份宁静。整个画面以暖色调为主，营造出一种质朴而宁静的氛围。","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"systemPrompt","right":{}},{"input":{"type":"string","value":{"content":"","dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"literal"}},"left":{},"name":"stableSystemPrompt","right":{}},{"input":{"type":"boolean","value":{"content":false,"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":3},"type":"literal"}},"left":{},"name":"canContinue","right":{}}],"settingOnError":{"processType":1,"switch":false,"timeoutMs":600000}},"nodeMeta":{"description":"调用大语言模型,使用变量和提示词生成回复","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-LLM-v2.jpg","title":"生成漫画情节"},"outputs":[{"input":{},"name":"output","required":false,"type":"string"}],"settings":null,"version":"3"},"edges":null,"id":"10042","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":180,"y":0}},"type":"3"},{"blocks":[],"data":{"inputs":{"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"123518","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"type":"string","value":{"content":{"blockID":"10042","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"scene"},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"style","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"style"}],"modelSetting":{"custom_ratio":{"height":1024,"width":1024},"ddim_steps":25,"model":8},"prompt":{"prompt":"主角形象是：主角是一个{{style}}，地中海发型的老人、头发花白，脸上有和蔼的笑容、Q版、脸颊红润。\n画面情节是：{{scene}}\n绘画风格：简笔画，治愈系插画，笔触简单，有线条感，卡通风格\n图片上方写着黑色文字：{{text}}\n文字的背景需要干净，且是浅色系"},"references":[],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":60000}},"nodeMeta":{"description":"通过文字描述/添加参考图生成图片","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-ImageGeneration-v2.jpg","mainColor":"#FF4DC3","subTitle":"图像生成","title":"图像生成"},"outputs":[{"assistType":2,"name":"data","type":"string"},{"name":"msg","type":"string"}]},"edges":null,"id":"01563","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":640,"y":0}},"type":"16"}],"data":{"inputs":{"batchSize":{"type":"integer","value":{"content":5,"rawMeta":{"type":2},"type":"literal"}},"concurrentSize":{"type":"integer","value":{"content":3,"rawMeta":{"type":2},"type":"literal"}},"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"135462","name":"link_array","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"input"}]},"nodeMeta":{"description":"通过设定批量运行次数和逻辑，运行批处理体内的任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg","mainColor":"#00B2B2","subTitle":"批处理","title":"批处理"},"outputs":[{"input":{"assistType":2,"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"01563","name":"data","source":"block-output"},"rawMeta":{"type":7},"type":"ref"}},"name":"output"}]},"edges":[{"sourceNodeID":"123518","sourcePortID":"batch-function-inline-output","targetNodeID":"10042"},{"sourceNodeID":"10042","sourcePortID":"","targetNodeID":"01563"},{"sourceNodeID":"01563","sourcePortID":"","targetNodeID":"123518","targetPortID":"batch-function-inline-input"}],"id":"123518","meta":{"canvasPosition":{"x":480.2946971319757,"y":281.8351589648846},"defaultCollapsed":false,"position":{"x":532.4945485557856,"y":-7.650300618789558}},"type":"28","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"from typing import TypedDict, List, Dict, Union\n\n# 定义输入参数类型\nclass Input(TypedDict):\n    input: str\n\n# 定义输出参数类型\nclass Output(TypedDict):\n    link_array: List[str]\n\nasync def main(args) -> Output:\n    params = args['params']\n    text = params['input']\n\n    # 将输入的多行字符串拆分为列表\n    links = text.strip().split(\"\\n\")\n\n    return { \n        'link_array': links\n    }","functionID":"38x41ukr9fprc","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"input","source":"block-output"},"dependencies":{"variables":null},"inputMode":"","rawMeta":{"type":1},"type":"ref"}},"left":{},"name":"input","right":{}}],"language":3,"settingOnError":{"processType":1,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","title":"字符转列表"},"outputs":[{"input":{},"name":"link_array","required":false,"schema":{"type":"string"},"type":"list"}],"settings":null,"version":""},"edges":null,"id":"135462","meta":{"canvasPosition":{"x":0,"y":0},"defaultCollapsed":false,"position":{"x":-58.74263431382553,"y":279.47265896488466}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}}],"versions":{"batch":"v2","loop":"v2"}}}