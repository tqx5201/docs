{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7531334023572389931","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"100001","sourcePortID":"","targetNodeID":"154909"},{"sourceNodeID":"186296","sourcePortID":"","targetNodeID":"900001"},{"sourceNodeID":"755643","sourcePortID":"true","targetNodeID":"900001"},{"sourceNodeID":"154909","sourcePortID":"","targetNodeID":"195392"},{"sourceNodeID":"195392","sourcePortID":"true","targetNodeID":"141101"},{"sourceNodeID":"195392","sourcePortID":"false","targetNodeID":"127211"},{"sourceNodeID":"111842","sourcePortID":"false","targetNodeID":"158823"},{"sourceNodeID":"158823","sourcePortID":"","targetNodeID":"141101"},{"sourceNodeID":"151907","sourcePortID":"","targetNodeID":"142836"},{"sourceNodeID":"142836","sourcePortID":"","targetNodeID":"755643"},{"sourceNodeID":"111877","sourcePortID":"true","targetNodeID":"158963"},{"sourceNodeID":"158963","sourcePortID":"","targetNodeID":"151907"},{"sourceNodeID":"111842","sourcePortID":"true","targetNodeID":"141101"},{"sourceNodeID":"141101","sourcePortID":"","targetNodeID":"129321"},{"sourceNodeID":"127211","sourcePortID":"","targetNodeID":"111842"},{"sourceNodeID":"129321","sourcePortID":"","targetNodeID":"129309"},{"sourceNodeID":"129309","sourcePortID":"false","targetNodeID":"157423"},{"sourceNodeID":"129309","sourcePortID":"true","targetNodeID":"112182"},{"sourceNodeID":"755643","sourcePortID":"false","targetNodeID":"617035"},{"sourceNodeID":"139643","sourcePortID":"","targetNodeID":"167669"},{"sourceNodeID":"617035","sourcePortID":"","targetNodeID":"167669"},{"sourceNodeID":"179466","sourcePortID":"","targetNodeID":"167669"},{"sourceNodeID":"167669","sourcePortID":"","targetNodeID":"186296"},{"sourceNodeID":"157423","sourcePortID":"","targetNodeID":"109623"},{"sourceNodeID":"109623","sourcePortID":"","targetNodeID":"139643"},{"sourceNodeID":"112182","sourcePortID":"","targetNodeID":"111877"},{"sourceNodeID":"111877","sourcePortID":"false","targetNodeID":"179466"}],"nodes":[{"blocks":[],"data":{"nodeMeta":{"description":"工作流的起始节点，用于设定启动工作流需要的信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Start-v2.jpg","subTitle":"","title":"开始"},"outputs":[{"name":"share_link","required":true,"type":"string"},{"name":"api_key","required":true,"type":"string"},{"defaultValue":"folder_token","name":"folder_token","required":true,"type":"string"}],"trigger_parameters":[]},"edges":null,"id":"100001","meta":{"position":{"x":-3745.6237529983064,"y":-108.95922014916391}},"type":"1"},{"blocks":[],"data":{"inputs":{"content":{"type":"string","value":{"content":"{{url}}","type":"literal"}},"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"142836","name":"data.url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"url"}],"streamingOutput":false,"terminatePlan":"useAnswerContent"},"nodeMeta":{"description":"工作流的最终节点，用于返回工作流运行后的结果信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-End-v2.jpg","subTitle":"","title":"结束"}},"edges":null,"id":"900001","meta":{"position":{"x":4559.713341543515,"y":-49.98422014916389}},"type":"2"},{"blocks":[],"data":{"inputs":{"code":"/**\n * @author wx: shuidi_tech\n */\n// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    const inputStr = params.input;\n    let videoUrl = \"\";\n\n    const urlPatterns = [\n        /https:\\/\\/v\\.douyin\\.com\\/[a-zA-Z0-9]+\\/?/,\n        /https:\\/\\/(?:www\\.)?douyin\\.com\\/video\\/\\d+(?:\\?[^\\s?]*)?/,\n        /https:\\/\\/(?:www\\.)?kuaishou\\.com\\/short-video\\/[a-zA-Z0-9]+(?:\\?[^\\s?]*)?/,\n        /https:\\/\\/v\\.kuaishou\\.com\\/[a-zA-Z0-9]+\\/?/\n    ];\n\n    for (const pattern of urlPatterns) {\n        const match = inputStr.match(pattern);\n        if (match) {\n            videoUrl = match[0];\n            // Remove query parameters for specific paths\n            if (videoUrl.includes('/video/') || videoUrl.includes('/short-video/')) {\n                videoUrl = videoUrl.split('?')[0];\n            }\n            break;\n        }\n    }\n\n    const lowerInput = inputStr.toLowerCase();\n    const judgeNumValue = (lowerInput.includes('.mp4') || lowerInput.includes('expires=')) ? 1 : 0;\n\n    return {\n        judge_num_value: judgeNumValue,\n        douyin_url: videoUrl\n    };\n}","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"share_link","source":"block-output"},"type":"ref"}},"name":"input"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"判断给的网址是mp4链接还是抖音等链接"},"outputs":[{"name":"judge_num_value","required":false,"type":"float"},{"name":"douyin_url","required":false,"type":"string"}]},"edges":null,"id":"154909","meta":{"position":{"x":-3260.286658456486,"y":-108.95922014916391}},"type":"5"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"float","value":{"content":{"blockID":"154909","name":"judge_num_value","source":"block-output"},"type":"ref"}}},"operator":1,"right":{"input":{"type":"float","value":{"content":1,"rawMeta":{"type":4},"type":"literal"}}}}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"值1选择器"}},"edges":null,"id":"195392","meta":{"position":{"x":-2800.286658456486,"y":-121.95922014916391}},"type":"8"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7431157518577156136","type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"extract_xhs_article_webinfo","type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7431157518577139752","type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"小红书文章信息提取","type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","type":"literal"}},"name":"outDocLink"},{"input":{"type":"integer","value":{"content":1748053953,"type":"literal"}},"name":"updateTime"}],"inputDefs":[{"description":"小红书文章链接地址，自动提取分享文本中链接URL","input":{},"name":"url","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"share_link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"url"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"提取小红书文章网页详细信息，包括作者信息、文章标题、内容、图片链接、视频链接、点赞、收藏、分享、评论等信息","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"小红书文章信息提取:extract_xhs_article_webinfo","title":"处理小红书链接数据"},"outputs":[{"name":"articleInfo","required":false,"schema":[{"name":"noteId","required":false,"type":"string"},{"name":"time","required":false,"type":"integer"},{"name":"title","required":false,"type":"string"},{"name":"xsecToken","required":false,"type":"string"},{"name":"desc","required":false,"type":"string"},{"name":"ipLocation","required":false,"type":"string"},{"name":"lastUpdateTime","required":false,"type":"integer"},{"name":"type","required":false,"type":"string"}],"type":"object"},{"name":"baseInfo","required":false,"schema":[{"name":"nickname","required":false,"type":"string"},{"name":"shareCount","required":false,"type":"string"},{"name":"title","required":false,"type":"string"},{"name":"likedCount","required":false,"type":"string"},{"name":"commentCount","required":false,"type":"string"},{"name":"desc","required":false,"type":"string"},{"name":"imageList","required":false,"schema":{"schema":[{"name":"livePhoto","required":false,"type":"boolean"},{"name":"stream","required":false,"schema":[],"type":"object"},{"name":"url","required":false,"type":"string"},{"name":"urlDefault","required":false,"type":"string"},{"name":"infoList","required":false,"schema":{"schema":[{"name":"imageScene","required":false,"type":"string"},{"name":"url","required":false,"type":"string"}],"type":"object"},"type":"list"},{"name":"height","required":false,"type":"integer"},{"name":"traceId","required":false,"type":"string"},{"name":"urlPre","required":false,"type":"string"},{"name":"width","required":false,"type":"integer"},{"name":"fileId","required":false,"type":"string"}],"type":"object"},"type":"list"},{"name":"type","required":false,"type":"string"},{"name":"videoUrl","required":false,"type":"string"},{"name":"collectedCount","required":false,"type":"string"}],"type":"object"},{"name":"url","required":false,"type":"string"}]},"edges":null,"id":"158823","meta":{"position":{"x":-1420.2866584564858,"y":-115.45922014916391}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7395047785122414619","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_document","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7395047785122398235","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"飞书云文档","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"},{"input":{"type":"integer","value":{"content":0,"type":"literal"}},"name":"pluginAuthMode"}],"inputDefs":[{"description":"文档内容，支持 markdown 语法，可以为空。","input":{},"name":"content","required":false,"type":"string"},{"description":"指定文档所在文件夹 的 Token，不传或传空表示根目录。支持输入文件夹 token 或者 文件夹 URL。","input":{},"name":"folder_token","required":false,"type":"string"},{"description":"文档标题，只支持纯文本。","input":{},"name":"title","required":false,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"112182","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"content"},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"folder_token","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"folder_token"},{"input":{"type":"string","value":{"content":{"blockID":"151907","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"title"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"创建文档，支持创建空文档和带内容的文档，支持 markdown 语法创建。","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Plugin-v2.jpg","subtitle":"飞书云文档:create_document","title":"create_document"},"outputs":[{"description":"错误码，非 0 表示失败。","name":"code","required":false,"type":"float"},{"description":"返回结果","name":"data","required":false,"schema":[{"description":"文档标题","name":"title","required":false,"type":"string"},{"description":"文档唯一标识","name":"token","required":false,"type":"string"},{"description":"文档类型","name":"type","required":false,"type":"string"},{"description":"文档链接","name":"url","required":false,"type":"string"}],"type":"object"},{"description":"链路追踪 id","name":"log_id","required":false,"type":"string"},{"description":"错误描述","name":"msg","required":false,"type":"string"}]},"edges":null,"id":"142836","meta":{"position":{"x":2259.713341543514,"y":-322.8592201491639}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7484140117972631586","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"datetime","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7484140117972615202","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"日期时间","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"如果你想指定日期和时间，请填入当前日期和时间，否则就是当前的日期时间","input":{},"name":"datetime","required":false,"type":"string"}],"inputParameters":[],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"获取各种格式的日期和时间","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/10ff1be4f2d94bb0a97c0a002b84d10e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745155726&x-signature=nDls0ezWNuK0YS%2B6gITIAe8%2BwhQ%3D","subtitle":"日期时间:datetime","title":"datetime"},"outputs":[{"description":"仅时间","name":"timeOnly","required":true,"type":"string"},{"description":"时间戳","name":"timestamp","required":true,"type":"integer"},{"description":"年","name":"year","required":true,"type":"float"},{"description":"日","name":"date","required":true,"type":"float"},{"description":"分","name":"minute","required":true,"type":"float"},{"description":"提示","name":"prompt","required":true,"type":"string"},{"description":"秒","name":"second","required":true,"type":"float"},{"description":"毫秒","name":"millisecond","required":true,"type":"float"},{"description":"月","name":"month","required":true,"type":"float"},{"description":"仅日期","name":"dateOnly","required":true,"type":"string"},{"description":"标准时间格式","name":"dateTime","required":true,"type":"string"},{"description":"文件名友好格式","name":"filenameFriendly","required":true,"type":"string"},{"description":"时","name":"hour","required":true,"type":"float"}]},"edges":null,"id":"158963","meta":{"position":{"x":1339.7133415435142,"y":-322.8592201491639}},"type":"4"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"W0004-{{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"158963","name":"dateTime","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文件名称"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"151907","meta":{"position":{"x":1799.7133415435142,"y":-322.8592201491639}},"type":"15"},{"blocks":[],"data":{"inputs":{"note":"[{\"type\":\"heading-three\",\"children\":[{\"text\":\"输出说明\",\"type\":\"text\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"输出的是文档的链接，打开即可看到工作流执行结果\",\"type\":\"text\"}]}]","schemaType":"slate"},"size":{"height":140.12604254820153,"width":362.9756518996718}},"edges":null,"id":"122878","meta":{"position":{"x":4561.213341543515,"y":306.91577985083615}},"type":"31"},{"blocks":[],"data":{"inputs":{"mergeGroups":[{"name":"video_url","variables":[{"type":"string","value":{"content":{"blockID":"158823","name":"baseInfo.videoUrl","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},{"type":"string","value":{"content":{"blockID":"127211","name":"data.video","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},{"type":"string","value":{"content":{"blockID":"100001","name":"share_link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合"},"outputs":[{"name":"video_url","type":"string"}]},"edges":null,"id":"141101","meta":{"position":{"x":-960.286658456486,"y":-112.93422014916393}},"type":"32"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"integer","value":{"content":{"blockID":"127211","name":"code","source":"block-output"},"type":"ref"}}},"operator":1,"right":{"input":{"type":"integer","value":{"content":0,"rawMeta":{"type":2},"type":"literal"}}}}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器"}},"edges":null,"id":"111842","meta":{"position":{"x":-1880.2866584564858,"y":-186.93422014916393}},"type":"8"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7493172141890928691","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"parse_video","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7493172141890912307","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"抖音视频解析","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"api_key","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"api_key"},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"share_link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"share_link"}],"settingOnError":{"dataOnErr":"{\n    \"code\": -1,\n    \"data\": {\n        \"cover\": \"\",\n        \"title\": \"\",\n        \"video\": \"\"\n    },\n    \"message\": \"\",\n    \"prompt\": \"\"\n}","processType":1,"retryTimes":0,"switch":false,"timeoutMs":180000}},"nodeMeta":{"description":"抖音视频解析","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/394b1fca8dde40c5a9b8d02f28d361c3~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747324788&x-signature=ytPx9%2Fyz4W5gcTonjXXkf4ROCwE%3D","subtitle":"抖音视频解析:parse_video","title":"parse_video"},"outputs":[{"description":"状态码；0成功","name":"code","required":true,"type":"integer"},{"name":"data","required":false,"schema":[{"description":"封面","name":"cover","required":true,"type":"string"},{"description":"标题","name":"title","required":true,"type":"string"},{"description":"视频资源地址","name":"video","required":true,"type":"string"}],"type":"object"},{"description":"执行信息","name":"message","required":true,"type":"string"},{"description":"提示","name":"prompt","required":true,"type":"string"}]},"edges":null,"id":"127211","meta":{"position":{"x":-2340.286658456486,"y":-173.93422014916393}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7492817685936455720","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"voice_to_text","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7492817685936439336","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"视频语音转文案","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"api_key","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"api_key"},{"input":{"type":"string","value":{"content":{"blockID":"141101","name":"video_url","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"file_url"}],"settingOnError":{"dataOnErr":"{\n    \"data\": \"\",\n    \"error_message\": \"\"\n}","processType":2,"retryTimes":0,"switch":true,"timeoutMs":180000}},"nodeMeta":{"description":"视频、语音转文字","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/c11b36c3fcfd41f2877bcdd8ebaba689~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747325014&x-signature=ZF%2BWwBB9oFLp41359WhFR4rPM4w%3D","subtitle":"视频语音转文案:voice_to_text","title":"voice_to_text"},"outputs":[{"description":"data","name":"data","required":true,"type":"string"},{"description":"error_message","name":"error_message","required":true,"type":"string"},{"name":"errorBody","readonly":true,"schema":[{"name":"errorMessage","readonly":true,"type":"string"},{"name":"errorCode","readonly":true,"type":"string"}],"type":"object"},{"name":"isSuccess","readonly":true,"type":"boolean"}]},"edges":null,"id":"129321","meta":{"position":{"x":-500.28665845648595,"y":-111.93422014916393}},"type":"4"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"string","value":{"content":{"blockID":"129321","name":"data","source":"block-output"},"type":"ref"}}},"operator":10}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器_1"}},"edges":null,"id":"129309","meta":{"position":{"x":-40.286658456485924,"y":-124.93422014916393}},"type":"8"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"float","value":{"content":{"blockID":"142836","name":"code","source":"block-output"},"type":"ref"}}},"operator":1,"right":{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}}}}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器_4"}},"edges":null,"id":"755643","meta":{"position":{"x":2719.713341543514,"y":-335.8592201491639}},"type":"8"},{"blocks":[],"data":{"inputs":{"mergeGroups":[{"name":"error_message","variables":[{"type":"string","value":{"content":{"blockID":"139643","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},{"type":"string","value":{"content":{"blockID":"617035","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},{"type":"string","value":{"content":{"blockID":"179466","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合_4"},"outputs":[{"name":"error_message","type":"string"}]},"edges":null,"id":"167669","meta":{"position":{"x":3639.713341543514,"y":-50.98422014916389}},"type":"32"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7483526971092516875","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"throwError","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7483526971092500491","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"抛出错误","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"167669","name":"error_message","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"error_message"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"抛出错误","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/d059b0cf678d495f90201cf6f030256c~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747288475&x-signature=BlrQbwLbZAiD4Qm%2BrZXjtUpDgH4%3D","subtitle":"抛出错误:throwError","title":"throwError"},"outputs":[{"description":"错误信息","name":"error_message","required":true,"type":"string"},{"description":"提示","name":"prompt","required":true,"type":"string"}]},"edges":null,"id":"186296","meta":{"position":{"x":4099.713341543515,"y":-49.98422014916389}},"type":"4"},{"blocks":[],"data":{"inputs":{"mergeGroups":[{"name":"error_message","variables":[{"type":"string","value":{"content":{"blockID":"129321","name":"error_message","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},{"type":"string","value":{"content":{"blockID":"129321","name":"errorBody.errorMessage","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]},{"name":"error_code","variables":[{"type":"string","value":{"content":{"blockID":"129321","name":"errorBody.errorCode","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合_2"},"outputs":[{"name":"error_message","type":"string"},{"name":"error_code","type":"string"}]},"edges":null,"id":"157423","meta":{"position":{"x":2259.713341543514,"y":132.91577985083615}},"type":"32"},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    return {\n        output: `${params.error_code ? `[${params.error_code}] ` : ''}${params.error_message}`\n    };\n}","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"157423","name":"error_code","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"error_code"},{"input":{"type":"string","value":{"content":{"blockID":"157423","name":"error_message","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"error_message"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_1"},"outputs":[{"name":"output","required":false,"type":"string"}]},"edges":null,"id":"109623","meta":{"position":{"x":2719.713341543514,"y":163.91577985083615}},"type":"5"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"文案提取失败，请联系客服微信: shuidi_tech\n\n错误信息：{{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"109623","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"139643","meta":{"position":{"x":3179.713341543514,"y":163.91577985083615}},"type":"15"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7494153937088725027","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"content_check","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7494153937088708643","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"文案校对","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"api_key","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"api_key"},{"input":{"type":"string","value":{"content":{"blockID":"129321","name":"data","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"user_prompt"},{"input":{"type":"string","value":{"content":"gpt-4o","rawMeta":{"type":1},"type":"literal"}},"name":"model"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"POST /stream","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/903237a10391450abcb06d42d7713f13~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747627599&x-signature=O0PMckmjbh4ADTgMsTfXI9pIUV0%3D","subtitle":"文案校对:content_check","title":"content_check"},"outputs":[{"description":"流式输出内容","name":"output","required":false,"type":"string"}]},"edges":null,"id":"112182","meta":{"position":{"x":419.71334154351405,"y":-215.90922014916396}},"type":"4"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"string","value":{"content":{"blockID":"129321","name":"data","source":"block-output"},"type":"ref"}}},"operator":10}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器_5"}},"edges":null,"id":"111877","meta":{"position":{"x":879.713341543514,"y":-228.90922014916396}},"type":"8"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"文案矫正失败，请联系客服微信: shuidi_tech","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理_4"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"179466","meta":{"position":{"x":3179.713341543514,"y":-49.98422014916389}},"type":"15"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"飞书文档创建失败，请联系客服: shuidi_tech ；；；错误信息：[{{String1}}] {{String2}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"float","value":{"content":{"blockID":"142836","name":"code","source":"block-output"},"rawMeta":{"type":4},"type":"ref"}},"name":"String1"},{"input":{"type":"string","value":{"content":{"blockID":"142836","name":"msg","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String2"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理_2"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"617035","meta":{"position":{"x":3179.713341543514,"y":-263.88422014916387}},"type":"15"},{"blocks":[],"data":{"inputs":{"note":"[{\"type\":\"heading-three\",\"children\":[{\"text\":\"参数说明\",\"type\":\"text\"}]},{\"type\":\"bulleted-list\",\"children\":[{\"type\":\"list-item\",\"children\":[{\"text\":\"share_link：输入抖音、小红书视频分享链接\",\"type\":\"text\"}]},{\"type\":\"list-item\",\"children\":[{\"type\":\"text\",\"text\":\"api_key：获取地址：\"},{\"type\":\"text\",\"text\":\"https://api.shuidi.tech/\",\"link\":\"https://api.shuidi.tech/token\"}]}]},{\"type\":\"bulleted-list\",\"children\":[{\"type\":\"list-item\",\"children\":[{\"text\":\"folder_token：飞书文件夹链接（\",\"type\":\"text\"},{\"type\":\"text\",\"text\":\"获取方式\",\"link\":\"https://ai-for-everyone.feishu.cn/wiki/E5GfweCUzis5lJkRwcrcR2ABn2d#share-BrDDdzo8XoeWi7xpKGbczMdxnDe\"},{\"type\":\"text\",\"text\":\"）\"}]}]}]","schemaType":"slate"},"size":{"height":151.97879912862524,"width":357.2813662911369}},"edges":null,"id":"489409","meta":{"position":{"x":-3720.286658456486,"y":85.99077985083608}},"type":"31"}],"versions":{"loop":"v2"}}}