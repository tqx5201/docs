{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7533690332337192995","spaceId":"","host":"www.coze.cn","isDouyin":false,"flowMode":0},"json":{"edges":[{"sourceNodeID":"184011","sourcePortID":"","targetNodeID":"157941"},{"sourceNodeID":"157941","sourcePortID":"batch-output","targetNodeID":"111445"},{"sourceNodeID":"198633","sourcePortID":"true","targetNodeID":"190111"},{"sourceNodeID":"190111","sourcePortID":"","targetNodeID":"150764"},{"sourceNodeID":"150764","sourcePortID":"batch-output","targetNodeID":"184011"},{"sourceNodeID":"158963","sourcePortID":"","targetNodeID":"152653"},{"sourceNodeID":"152653","sourcePortID":"","targetNodeID":"160311"},{"sourceNodeID":"160311","sourcePortID":"","targetNodeID":"198633"},{"sourceNodeID":"198633","sourcePortID":"false","targetNodeID":"617035"},{"sourceNodeID":"617035","sourcePortID":"","targetNodeID":"186296"}],"nodes":[{"blocks":[{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"# 角色\n根据风格生成用户所需内容\n\n## 风格\n{{String1}}\n\n## 输出格式\n- 不需要标题，直接输出正文\n\n## 限制\n- 输出时使用纯文本，不要使用markdown\n- 长度100字左右\n- 如果用户输入的数据不包含具体参数数据，那么输出时也不要带有具体的数据。","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"157941","name":"input","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String1"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理_1"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"1338335","meta":{"position":{"x":180,"y":31}},"type":"15"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7493966683858714678","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"wujie","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7493966683858698294","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"全球大模型","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"api_key","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"api_key"},{"input":{"type":"string","value":{"content":"claude-3-7-sonnet-20250219","rawMeta":{"type":1},"type":"literal"}},"name":"model"},{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"content","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"user_prompt"},{"input":{"type":"string","value":{"content":{"blockID":"1338335","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"system_prompt"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"POST /stream","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/c56bdd247c154e3594f5594887744051~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748857256&x-signature=k0S1cbyfDN9Kder1D6iwALgWcks%3D","subtitle":"全球大模型:llm","title":"llm_1"},"outputs":[{"description":"流式输出内容","name":"output","required":false,"type":"string"}]},"edges":null,"id":"1545374","meta":{"position":{"x":640,"y":31}},"type":"4"},{"blocks":[],"data":{"inputs":{"mergeGroups":[{"name":"audio","variables":[{"type":"string","value":{"content":{"blockID":"122241","name":"data.link","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]},{"name":"text","variables":[{"type":"string","value":{"content":{"blockID":"1545374","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}}]}]},"nodeMeta":{"description":"对多个分支的输出进行聚合处理","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/VariableMerge-icon.jpg","mainColor":"#00B2B2","subTitle":"变量聚合","title":"变量聚合_2"},"outputs":[{"name":"audio","type":"string"},{"name":"text","type":"string"}]},"edges":null,"id":"1980325","meta":{"position":{"x":1560,"y":0}},"type":"32"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7426655854067367946","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"speech_synthesis","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7426655854067351562","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"语音合成","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1545374","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"},{"input":{"assistType":12,"type":"string","value":{"content":{"blockID":"100001","name":"voice_id","source":"block-output"},"rawMeta":{"type":18},"type":"ref"}},"name":"voice_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"根据音色和文本合成音频","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dc534eb73e7046b1807db96af7c0e212~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748858153&x-signature=QxiLPwrcY59j7kWXZg%2FuAkGqV4w%3D","subtitle":"语音合成:speech_synthesis","title":"speech_synthesis"},"outputs":[{"name":"code","required":false,"type":"float"},{"name":"data","required":false,"schema":[{"name":"link","required":false,"type":"string"}],"type":"object"},{"name":"log_id","required":false,"type":"string"},{"name":"msg","required":false,"type":"string"}]},"edges":null,"id":"122241","meta":{"position":{"x":1100,"y":31}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"/**\n * @author wx: shuidi_tech\n */\n// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input;\n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    return {\n        records: [\n            {\n                fields: JSON.stringify({\n                    文案: params.text,\n                    音频: params.audio\n                }),\n            },\n        ],\n    };\n}\n","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"1980325","name":"audio","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"audio"},{"input":{"type":"string","value":{"content":{"blockID":"1980325","name":"text","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"text"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"转为多维表格所需格式_1"},"outputs":[{"name":"records","required":false,"schema":{"schema":[{"name":"fields","type":"string"}],"type":"object"},"type":"list"}]},"edges":null,"id":"289556","meta":{"position":{"x":2020,"y":31}},"type":"5"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7395047759797288987","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_records","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7395047759797272603","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"飞书多维表格","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"},{"input":{"type":"integer","value":{"content":0,"type":"literal"}},"name":"pluginAuthMode"}],"inputDefs":[{"description":"多维表格数据表的名称","input":{},"name":"table_name","required":false,"type":"string"},{"defaultValue":"open_id","description":"用户 ID 类型，可选值有 open_id、union_id、user_id，默认值为 open_id。, default value is open_id","input":{},"name":"user_id_type","required":false,"type":"string"},{"description":"多维表格的唯一标识符，支持输入文档 url。","input":{},"name":"app_token","required":true,"type":"string"},{"description":"多维表格数据表的唯一标识符","input":{},"name":"table_id","required":false,"type":"string"},{"description":"本次请求将要新增的记录列表，格式为：[{\"fields\":{\"文本\":\"文本内容\",\"单选\":\"选项 1\",\"日期\":1674206443000}}]","input":{},"name":"records","required":true,"schema":{"schema":[{"description":"数据表的字段，即数据表的列，格式为 json 字符串。例如：{\"文本\":\"文本内容\",\"单选\":\"选项 1\",\"日期\":1674206443000}","input":{},"name":"fields","required":true,"type":"string"}],"type":"object"},"type":"list"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"app_token","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"app_token"},{"input":{"schema":{"schema":[{"name":"fields","type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"289556","name":"records","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"records"},{"input":{"type":"string","value":{"content":{"blockID":"160311","name":"data.table_id","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"table_id"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"在多维表格数据表中新增多条记录，单次调用最多新增 500 条记录。","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/271da70954ec4c0ebfdb4635ac72c8e4~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745153701&x-signature=hzrchor6eBL562ZAKhiPFy3JZV8%3D","subtitle":"飞书多维表格:add_records","title":"add_records"},"outputs":[{"description":"错误描述","name":"msg","required":false,"type":"string"},{"description":"错误码，非 0 表示失败。","name":"code","required":false,"type":"float"},{"description":"返回结果","name":"data","required":false,"schema":[{"description":"本次请求新增的记录列表","name":"records","required":false,"schema":{"schema":[{"description":"数据表的字段，即数据表的列，格式为 json 字符串。","name":"fields","required":false,"type":"string"},{"description":"一条记录的唯一标识 id","name":"record_id","required":false,"type":"string"}],"type":"object"},"type":"list"}],"type":"object"},{"description":"链路追踪 id","name":"log_id","required":false,"type":"string"}]},"edges":null,"id":"105492","meta":{"position":{"x":2480,"y":31}},"type":"4"},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"float","value":{"content":{"blockID":"105492","name":"code","source":"block-output"},"type":"ref"}}},"operator":1,"right":{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}}}}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器_4"}},"edges":null,"id":"755643","meta":{"position":{"x":2940,"y":18}},"type":"8"},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"多维表格数据表中添加数据失败，请联系客服: shuidi_tech ；；；错误信息：[{{String2}}] {{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"105492","name":"msg","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String1"},{"input":{"type":"float","value":{"content":{"blockID":"105492","name":"code","source":"block-output"},"rawMeta":{"type":4},"type":"ref"}},"name":"String2"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理_3"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"728616","meta":{"position":{"x":3400,"y":31}},"type":"15"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7483526971092516875","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"throwError","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7483526971092500491","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"抛出错误","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"728616","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"error_message"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"抛出错误","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/0f387fdef0b44db3b510d66b1eee1c6c~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747625377&x-signature=o1QHvOjCcLCg%2F2jY4vA1%2FEv9WJU%3D","subtitle":"抛出错误:throwError","title":"throwError_1"},"outputs":[{"description":"错误信息","name":"error_message","required":true,"type":"string"},{"description":"提示","name":"prompt","required":true,"type":"string"}]},"edges":null,"id":"178163","meta":{"position":{"x":3860,"y":31}},"type":"4"}],"data":{"inputs":{"batchSize":{"type":"integer","value":{"content":{"blockID":"100001","name":"count","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"concurrentSize":{"type":"integer","value":{"content":10,"rawMeta":{"type":2},"type":"literal"}},"inputParameters":[{"input":{"schema":{"type":"string"},"type":"list","value":{"content":{"blockID":"184011","name":"output","source":"block-output"},"rawMeta":{"type":99},"type":"ref"}},"name":"input"}]},"nodeMeta":{"description":"通过设定批量运行次数和逻辑，运行批处理体内的任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg","mainColor":"#00B2B2","subTitle":"批处理","title":"批处理"},"outputs":[{"input":{"schema":{"schema":[{"description":"流式输出内容","name":"output","required":false,"type":"string"}],"type":"object"},"type":"list","value":{"content":{"blockID":"1545374","name":"","source":"block-output"},"rawMeta":{"type":6},"type":"ref"}},"name":"output"}]},"edges":[{"sourceNodeID":"157941","sourcePortID":"batch-function-inline-output","targetNodeID":"1338335"},{"sourceNodeID":"1338335","sourcePortID":"","targetNodeID":"1545374"},{"sourceNodeID":"1545374","sourcePortID":"","targetNodeID":"122241"},{"sourceNodeID":"122241","sourcePortID":"","targetNodeID":"1980325"},{"sourceNodeID":"1980325","sourcePortID":"","targetNodeID":"289556"},{"sourceNodeID":"289556","sourcePortID":"","targetNodeID":"105492"},{"sourceNodeID":"105492","sourcePortID":"","targetNodeID":"755643"},{"sourceNodeID":"755643","sourcePortID":"false","targetNodeID":"728616"},{"sourceNodeID":"755643","sourcePortID":"true","targetNodeID":"157941","targetPortID":"batch-function-inline-input"},{"sourceNodeID":"728616","sourcePortID":"","targetNodeID":"178163"},{"sourceNodeID":"178163","sourcePortID":"","targetNodeID":"157941","targetPortID":"batch-function-inline-input"}],"id":"157941","meta":{"canvasPosition":{"x":490.2791461412151,"y":655.420197044335},"position":{"x":2510.2791461412153,"y":362.020197044335}},"type":"28","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"/**\n * @author 作者微信: shuidi_tech\n * @description 将数字切割为数组，合并起来还是原数字大小，为了避免大模型token不够\n */\n// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    const N = 20;\n    \n    const num = Math.floor(params.input / N)\n    \n    return {\n        output: [...(new Array(num).fill(N)), params.input % N]\n    };\n}","inputParameters":[{"input":{"type":"integer","value":{"content":{"blockID":"100001","name":"count","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"input"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码"},"outputs":[{"name":"output","required":false,"schema":{"type":"integer"},"type":"list"}]},"edges":null,"id":"190111","meta":{"position":{"x":-2389.7208538587847,"y":362.020197044335}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"# 角色\n你是一位提示词生成专家，现在需要你根据用户的输入{{String1}}批量生成推文提示词\n\n## 技能\n### 技能一\n输出数量必须严格等于{{String2}}的一句话提示词，这些提示词要与用户的输入{{String1}}相关。\n\n## 参考输出\n[\n  \"提示词1\",\n  \"提示词2\"\n]\n\n## 限制\n- 仅输出提示词，其它无关的内容一律不要。\n- 提示词必须与用户的输入{{String1}}相关。\n- 提示词必须简短，不能超过60个汉字。\n- 输出的提示词数量必须精确等于{{String2}}个，不得多也不得少。\n- 输出的提示词数量必须精确等于{{String2}}个，不得多也不得少。\n- 输出的提示词数量必须精确等于{{String2}}个，不得多也不得少。","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"content","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String1"},{"input":{"type":"integer","value":{"content":{"blockID":"150764","name":"input","source":"block-output"},"rawMeta":{"type":2},"type":"ref"}},"name":"String2"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"142175","meta":{"position":{"x":180,"y":0}},"type":"15"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7493966683858714678","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"wujie","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7493966683858698294","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"全球大模型","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"api_key","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"api_key"},{"input":{"type":"string","value":{"content":"gpt-4o","rawMeta":{"type":1},"type":"literal"}},"name":"model"},{"input":{"type":"string","value":{"content":{"blockID":"142175","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"user_prompt"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"POST /stream","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/c56bdd247c154e3594f5594887744051~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1748857256&x-signature=k0S1cbyfDN9Kder1D6iwALgWcks%3D","subtitle":"全球大模型:llm","title":"llm"},"outputs":[{"description":"流式输出内容","name":"output","required":false,"type":"string"}]},"edges":null,"id":"160133","meta":{"position":{"x":640,"y":0}},"type":"4"},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7493966683858714678","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"wujie","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7493966683858698294","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"全球大模型","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"api_key","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"api_key"},{"input":{"type":"string","value":{"content":"gpt-4o-mini","rawMeta":{"type":1},"type":"literal"}},"name":"model"},{"input":{"type":"string","value":{"content":{"blockID":"160133","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"user_prompt"},{"input":{"type":"string","value":{"content":"检查用户输入是否符合标准JSON格式。若不符合，仅修正JSON语法和格式错误后直接返回修正后的JSON。若已是有效JSON，则直接返回原JSON。不添加任何说明、注释或其他非JSON内容，响应中只包含JSON本身。","rawMeta":{"type":1},"type":"literal"}},"name":"system_prompt"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"POST /stream","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/c56bdd247c154e3594f5594887744051~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747749599&x-signature=QfbvMON7WJ6SGx18TdIDkDcOE9s%3D","subtitle":"全球大模型:llm","title":"llm_3"},"outputs":[{"description":"流式输出内容","name":"output","required":false,"type":"string"}]},"edges":null,"id":"147954","meta":{"position":{"x":1100,"y":0}},"type":"4"},{"blocks":[],"data":{"inputs":{"code":"/**\n * @author wx: shuidi_tech\n */\n// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    let res: string[];\n\n    try {\n        res = JSON.parse(params.input)\n    } catch {\n        res = []\n    }\n\n    return {\n        output: res\n    }\n}","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"147954","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"input"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_2"},"outputs":[{"name":"output","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"197878","meta":{"position":{"x":1560,"y":0}},"type":"5"}],"data":{"inputs":{"batchSize":{"type":"integer","value":{"content":200,"rawMeta":{"type":2},"type":"literal"}},"concurrentSize":{"type":"integer","value":{"content":"10","type":"literal"}},"inputParameters":[{"input":{"schema":{"type":"integer"},"type":"list","value":{"content":{"blockID":"190111","name":"output","source":"block-output"},"rawMeta":{"type":100},"type":"ref"}},"name":"input"}]},"nodeMeta":{"description":"通过设定批量运行次数和逻辑，运行批处理体内的任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Batch-v2.jpg","mainColor":"#00B2B2","subTitle":"批处理","title":"批处理_2"},"outputs":[{"input":{"schema":{"schema":[{"name":"output","required":false,"schema":{"type":"string"},"type":"list"}],"type":"object"},"type":"list","value":{"content":{"blockID":"197878","name":"","source":"block-output"},"rawMeta":{"type":6},"type":"ref"}},"name":"output"}]},"edges":[{"sourceNodeID":"150764","sourcePortID":"batch-function-inline-output","targetNodeID":"142175"},{"sourceNodeID":"142175","sourcePortID":"","targetNodeID":"160133"},{"sourceNodeID":"160133","sourcePortID":"","targetNodeID":"147954"},{"sourceNodeID":"147954","sourcePortID":"","targetNodeID":"197878"},{"sourceNodeID":"197878","sourcePortID":"","targetNodeID":"150764","targetPortID":"batch-function-inline-input"}],"id":"150764","meta":{"canvasPosition":{"x":-2009.720853858785,"y":655.420197044335},"position":{"x":-1139.720853858785,"y":362.020197044335}},"type":"28","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    return {\n        output: params.input.map(item=>item.output).flat()\n    }\n}","inputParameters":[{"input":{"schema":{"schema":[{"name":"output","required":false,"schema":{"type":"string"},"type":"list"}],"type":"object"},"type":"list","value":{"content":{"blockID":"150764","name":"output","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"input"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_4"},"outputs":[{"name":"output","required":false,"schema":{"type":"string"},"type":"list"}]},"edges":null,"id":"184011","meta":{"position":{"x":110.27914614121511,"y":362.020197044335}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7484140117972631586","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"datetime","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7484140117972615202","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"日期时间","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputDefs":[{"description":"如果你想指定日期和时间，请填入当前日期和时间，否则就是当前的日期时间","input":{},"name":"datetime","required":false,"type":"string"}],"inputParameters":[],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"获取各种格式的日期和时间","icon":"https://p9-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/10ff1be4f2d94bb0a97c0a002b84d10e~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745155726&x-signature=nDls0ezWNuK0YS%2B6gITIAe8%2BwhQ%3D","subtitle":"日期时间:datetime","title":"datetime_1"},"outputs":[{"description":"时间戳","name":"timestamp","required":true,"type":"integer"},{"description":"年","name":"year","required":true,"type":"float"},{"description":"日","name":"date","required":true,"type":"float"},{"description":"标准时间格式","name":"dateTime","required":true,"type":"string"},{"description":"毫秒","name":"millisecond","required":true,"type":"float"},{"description":"分","name":"minute","required":true,"type":"float"},{"description":"提示","name":"prompt","required":true,"type":"string"},{"description":"秒","name":"second","required":true,"type":"float"},{"description":"仅时间","name":"timeOnly","required":true,"type":"string"},{"description":"仅日期","name":"dateOnly","required":true,"type":"string"},{"description":"文件名友好格式","name":"filenameFriendly","required":true,"type":"string"},{"description":"时","name":"hour","required":true,"type":"float"},{"description":"月","name":"month","required":true,"type":"float"}]},"edges":null,"id":"158963","meta":{"position":{"x":-4229.720853858785,"y":255.32019704433503}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"/**\n * @author wx: shuidi_tech\n */\n// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    return {\n        table_name: `W0017-${params.dateTime}`,\n        fields: [\n            {\n                field_name: '文案',\n                type: 1\n            },\n            {\n                field_name: '音频',\n                type: 1\n            }\n        ],\n    }\n}","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"158963","name":"dateTime","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"dateTime"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"转为多维表格所需格式"},"outputs":[{"name":"fields","required":false,"schema":{"schema":[{"name":"field_name","type":"string"},{"name":"type","type":"float"}],"type":"object"},"type":"list"},{"name":"table_name","required":false,"type":"string"}]},"edges":null,"id":"152653","meta":{"position":{"x":-3769.7208538587847,"y":255.32019704433503}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7395047759797321755","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"create_table","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7395047759797272603","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"飞书多维表格","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"},{"input":{"type":"integer","value":{"content":0,"type":"literal"}},"name":"pluginAuthMode"}],"inputDefs":[{"description":"多维表格的唯一标识符，支持输入文档 url。","input":{},"name":"app_token","required":true,"type":"string"},{"description":"默认表格视图的名称，不填则默认为表格。","input":{},"name":"default_view_name","required":false,"type":"string"},{"description":"数据表的初始字段列表，1. 如果 default_view_name 字段和 fields 字段都不填写，将会创建一个仅包含索引列的空数据表。2. 如果指定了 fields 字段，将会创建一个包含初始字段的数据表且默认第一个字段为索引列。","input":{},"name":"fields","required":false,"schema":{"schema":[{"description":"字段类型，可选值包括1：多行文本、2：数字、3：单选、4：多选、5：日期、7：复选框、11：人员、13：电话号码、15：超链接、17：附件、18：单向关联、20：公式、21：双向关联、22：地理位置、23：群组、1001：创建时间、1002：最后更新时间、1003：创建人、1004：修改人、1005：自动编号","input":{},"name":"type","required":false,"type":"integer"},{"description":"字段名","input":{},"name":"field_name","required":false,"type":"string"}],"type":"object"},"type":"list"},{"description":"数据表名称","input":{},"name":"name","required":true,"type":"string"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"app_token","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"app_token"},{"input":{"type":"string","value":{"content":{"blockID":"152653","name":"table_name","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"name"},{"input":{"schema":{"schema":[{"name":"field_name","type":"string"},{"name":"type","type":"float"}],"type":"object"},"type":"list","value":{"content":{"blockID":"152653","name":"fields","source":"block-output"},"rawMeta":{"type":103},"type":"ref"}},"name":"fields"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"创建多维表格数据表","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/271da70954ec4c0ebfdb4635ac72c8e4~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1745153609&x-signature=ERdnP6V8YLX97x80p1ebFEOovoI%3D","subtitle":"飞书多维表格:create_table","title":"create_table"},"outputs":[{"description":"错误码，非 0 表示失败。","name":"code","required":false,"type":"float"},{"description":"返回结果","name":"data","required":false,"schema":[{"description":"默认表格视图的 id，该字段仅在请求参数中填写了default_view_name 或 fields 才会返回。","name":"default_view_id","required":false,"type":"string"},{"description":"数据表初始字段的 id 列表，该字段仅在请求参数中填写了 fields 才会返回。例如： [\"fldUsUrIbN\"]","name":"field_id_list","required":false,"schema":{"type":"string"},"type":"list"},{"description":"多维表格数据表的唯一标识符","name":"table_id","required":false,"type":"string"}],"type":"object"},{"description":"链路追踪 id","name":"log_id","required":false,"type":"string"},{"description":"错误描述","name":"msg","required":false,"type":"string"}]},"edges":null,"id":"160311","meta":{"position":{"x":-3309.7208538587847,"y":255.32019704433503}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"branches":[{"condition":{"conditions":[{"left":{"input":{"type":"float","value":{"content":{"blockID":"160311","name":"code","source":"block-output"},"type":"ref"}}},"operator":1,"right":{"input":{"type":"float","value":{"content":0,"rawMeta":{"type":4},"type":"literal"}}}}],"logic":2}}]},"nodeMeta":{"description":"连接多个下游分支，若设定的条件成立则仅运行对应的分支，若均不成立则只运行“否则”分支","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Condition-v2.jpg","mainColor":"#00B2B2","subTitle":"选择器","title":"选择器_3"}},"edges":null,"id":"198633","meta":{"position":{"x":-2849.7208538587847,"y":242.32019704433503}},"type":"8","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"concatParams":[{"input":{"type":"string","value":{"content":"多维表格创建数据表失败，请联系客服: shuidi_tech ；；；错误信息：[{{String2}}] {{String1}}","rawMeta":{"type":1},"type":"literal"}},"name":"concatResult"},{"input":{"type":"string","value":{"content":"，","rawMeta":{"type":1},"type":"literal"}},"name":"arrayItemConcatChar"},{"input":{"schema":{"schema":[{"name":"label","required":true,"type":"string"},{"name":"value","required":true,"type":"string"},{"name":"isDefault","required":true,"type":"boolean"}],"type":"object"},"type":"list","value":{"content":[{"isDefault":true,"label":"换行","value":"\n"},{"isDefault":true,"label":"制表符","value":"\t"},{"isDefault":true,"label":"句号","value":"。"},{"isDefault":true,"label":"逗号","value":"，"},{"isDefault":true,"label":"分号","value":"；"},{"isDefault":true,"label":"空格","value":" "}],"type":"literal"}},"name":"allArrayItemConcatChars"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"160311","name":"msg","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"String1"},{"input":{"type":"float","value":{"content":{"blockID":"160311","name":"code","source":"block-output"},"rawMeta":{"type":4},"type":"ref"}},"name":"String2"}],"method":"concat"},"nodeMeta":{"description":"用于处理多个字符串类型变量的格式","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-StrConcat-v2.jpg","mainColor":"#3071F2","subTitle":"文本处理","title":"文本处理_2"},"outputs":[{"name":"output","required":true,"type":"string"}]},"edges":null,"id":"617035","meta":{"position":{"x":2510.2791461412153,"y":148.62019704433504}},"type":"15","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7483526971092516875","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"throwError","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7483526971092500491","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"抛出错误","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"617035","name":"output","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"error_message"}],"settingOnError":{"processType":1,"retryTimes":0,"timeoutMs":180000}},"nodeMeta":{"description":"抛出错误","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/d059b0cf678d495f90201cf6f030256c~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&x-expires=1747288475&x-signature=BlrQbwLbZAiD4Qm%2BrZXjtUpDgH4%3D","subtitle":"抛出错误:throwError","title":"throwError"},"outputs":[{"description":"错误信息","name":"error_message","required":true,"type":"string"},{"description":"提示","name":"prompt","required":true,"type":"string"}]},"edges":null,"id":"186296","meta":{"position":{"x":4910.279146141215,"y":148.62019704433504}},"type":"4","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"code":"/**\n * @author wx: shuidi_tech\n */\n// 在这里，您可以通过 ‘params’  获取节点中的输入变量，并通过 'ret' 输出结果\n// 'params' 和 'ret' 已经被正确地注入到环境中\n// 下面是一个示例，获取节点输入中参数名为‘input’的值：\n// const input = params.input; \n// 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n// const ret = { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync function main({ params }: Args): Promise<Output> {\n    return {\n        output: `${params.app_token.split('?')[0]}?table=${params.table_id}`\n    };\n}","inputParameters":[{"input":{"type":"string","value":{"content":{"blockID":"100001","name":"app_token","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"app_token"},{"input":{"type":"string","value":{"content":{"blockID":"160311","name":"data.table_id","source":"block-output"},"rawMeta":{"type":1},"type":"ref"}},"name":"table_id"}],"language":5,"settingOnError":{"processType":1,"retryTimes":0,"switch":false,"timeoutMs":60000}},"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","subTitle":"代码","title":"代码_1"},"outputs":[{"name":"output","required":false,"type":"string"}]},"edges":null,"id":"111445","meta":{"position":{"x":4910.279146141215,"y":362.020197044335}},"type":"5","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}},{"blocks":[],"data":{"inputs":{"note":"[{\"type\":\"paragraph\",\"children\":[{\"text\":\"api_key的申请地址：（主要作用是调用国外的chatgpt的模型来写文案）\",\"type\":\"text\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"https://api.shuidi.tech/detail\",\"type\":\"text\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"\",\"type\":\"text\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"app_token：飞书文档在线文档随便一个好，下面是示例的地址：\",\"type\":\"text\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"https://rwmtvdp41tm.feishu.cn/wiki/HDrwwmIc2iZISwkiP1NcpovAnVb?from=from_copylink\",\"type\":\"text\"}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"text\",\"text\":\"\"}]},{\"type\":\"paragraph\",\"children\":[{\"type\":\"text\",\"text\":\"飞书文档的权限要是互联网可见，还有可编辑\"}]},{\"type\":\"paragraph\",\"children\":[{\"text\":\"\",\"type\":\"text\"}]}]","schemaType":"slate"},"size":{"height":160.30347382490106,"width":566.493858309925}},"edges":null,"id":"100929","meta":{"position":{"x":-4712.3066540195705,"y":82.02019704433502}},"type":"31","_temp":{"bounds":{"x":0,"y":0,"width":0,"height":0}}}],"versions":{"batch":"v2","loop":"v2"}}}